{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/rest/query/operations/pbfJSONFeatureSet.js", "../../../../../../node_modules/@arcgis/core/rest/query/executeQueryPBF.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { assertIsSome as e } from \"../../../core/maybe.js\";\nimport { getGeometryZScaler as t } from \"../../../geometry/support/zscale.js\";\nimport { unquantizeOptimizedGeometry as r, convertToGeometry as s } from \"../../../layers/graphics/featureConversionUtils.js\";\nfunction o(e, t) {\n  return t;\n}\nfunction i(e, t, r, s) {\n  switch (r) {\n    case 0:\n      return u(e, t + s, 0);\n    case 1:\n      return \"lowerLeft\" === e.originPosition ? u(e, t + s, 1) : l(e, t + s, 1);\n  }\n}\nfunction n(e, t, r, s) {\n  return 2 === r ? u(e, t, 2) : i(e, t, r, s);\n}\nfunction a(e, t, r, s) {\n  return 2 === r ? 0 === t ? 0 : u(e, t, 3) : i(e, t, r, s);\n}\nfunction h(e, t, r, s) {\n  return 3 === r ? 0 === t ? 0 : u(e, t, 3) : n(e, t, r, s);\n}\nfunction u({\n  translate: e,\n  scale: t\n}, r, s) {\n  return e[s] + r * t[s];\n}\nfunction l({\n  translate: e,\n  scale: t\n}, r, s) {\n  return e[s] - r * t[s];\n}\nclass d {\n  constructor(e) {\n    this._options = e, this.geometryTypes = [\"esriGeometryPoint\", \"esriGeometryMultipoint\", \"esriGeometryPolyline\", \"esriGeometryPolygon\"], this._previousCoordinate = [0, 0], this._transform = null, this._applyTransform = o, this._lengths = [], this._currentLengthIndex = 0, this._toAddInCurrentPath = 0, this._vertexDimension = 0, this._mValueOffset = null, this._coordinateBuffer = null, this._coordinateBufferPtr = 0, this._attributesConstructor = class {};\n  }\n  createFeatureResult() {\n    return {\n      fields: [],\n      features: []\n    };\n  }\n  finishFeatureResult(e) {\n    if (this._options.applyTransform && (e.transform = null), this._attributesConstructor = class {}, this._coordinateBuffer = null, this._lengths.length = 0, !e.hasZ) return;\n    const r = t(e.geometryType, this._options.sourceSpatialReference, e.spatialReference);\n    if (null != r) for (const t of e.features) r(t.geometry);\n  }\n  createSpatialReference() {\n    return {};\n  }\n  addField(t, r) {\n    const s = t.fields;\n    e(s), s.push(r);\n    const o = s.map(e => e.name);\n    this._attributesConstructor = function () {\n      for (const e of o) this[e] = null;\n    };\n  }\n  addFeature(e, t) {\n    e.features.push(t);\n  }\n  prepareFeatures(e) {\n    switch (this._transform = e.transform, this._options.applyTransform && e.transform && (this._applyTransform = this._deriveApplyTransform(e)), this._mValueOffset = null, this._vertexDimension = 2, e.hasZ && this._vertexDimension++, e.hasM && (this._mValueOffset = this._vertexDimension, this._vertexDimension++), e.geometryType) {\n      case \"esriGeometryPoint\":\n        this.addCoordinate = (e, t, r) => this.addCoordinatePoint(e, t, r), this.createGeometry = e => this.createPointGeometry(e);\n        break;\n      case \"esriGeometryPolygon\":\n        this.addCoordinate = (e, t, r) => this._addCoordinatePolygon(e, t, r), this.createGeometry = e => this._createPolygonGeometry(e);\n        break;\n      case \"esriGeometryPolyline\":\n        this.addCoordinate = (e, t, r) => this._addCoordinatePolyline(e, t, r), this.createGeometry = e => this._createPolylineGeometry(e);\n        break;\n      case \"esriGeometryMultipoint\":\n        this.addCoordinate = (e, t, r) => this._addCoordinateMultipoint(e, t, r), this.createGeometry = e => this._createMultipointGeometry(e);\n    }\n  }\n  createFeature() {\n    return this._lengths.length = 0, this._currentLengthIndex = 0, this._previousCoordinate[0] = 0, this._previousCoordinate[1] = 0, this._coordinateBuffer = null, this._coordinateBufferPtr = 0, {\n      attributes: new this._attributesConstructor()\n    };\n  }\n  allocateCoordinates() {}\n  addLength(e, t, r) {\n    0 === this._lengths.length && (this._toAddInCurrentPath = t), this._lengths.push(t);\n  }\n  addQueryGeometry(e, t) {\n    const {\n        queryGeometry: o,\n        queryGeometryType: i\n      } = t,\n      n = r(o.clone(), o, !1, !1, this._transform),\n      a = s(n, i, !1, !1);\n    e.queryGeometryType = i, e.queryGeometry = {\n      ...a\n    };\n  }\n  createPointGeometry(e) {\n    const t = {\n      x: 0,\n      y: 0,\n      spatialReference: e.spatialReference\n    };\n    return e.hasZ && (t.z = 0), e.hasM && (t.m = 0), t;\n  }\n  addCoordinatePoint(e, t, r) {\n    const s = this._transform;\n    switch (t = this._applyTransform(s, t, r, 0), r) {\n      case 0:\n        e.x = t;\n        break;\n      case 1:\n        e.y = t;\n        break;\n      case 2:\n        \"z\" in e ? e.z = t : e.m = t;\n        break;\n      case 3:\n        e.m = t;\n    }\n  }\n  _transformPathLikeValue(e, t) {\n    let r = 0;\n    t <= 1 && (r = this._previousCoordinate[t], this._previousCoordinate[t] += e);\n    const s = this._transform;\n    return null !== this._mValueOffset && 0 === e && t > 0 && !(t % this._mValueOffset) ? 0 : this._applyTransform(s, e, t, r);\n  }\n  _addCoordinatePolyline(e, t, r) {\n    this._dehydratedAddPointsCoordinate(e.paths, t, r);\n  }\n  _addCoordinatePolygon(e, t, r) {\n    this._dehydratedAddPointsCoordinate(e.rings, t, r);\n  }\n  _addCoordinateMultipoint(e, t, r) {\n    0 === r && e.points.push([]);\n    const s = this._transformPathLikeValue(t, r);\n    e.points[e.points.length - 1].push(s);\n  }\n  _createPolygonGeometry(e) {\n    return {\n      rings: [[]],\n      spatialReference: e.spatialReference,\n      hasZ: !!e.hasZ,\n      hasM: !!e.hasM\n    };\n  }\n  _createPolylineGeometry(e) {\n    return {\n      paths: [[]],\n      spatialReference: e.spatialReference,\n      hasZ: !!e.hasZ,\n      hasM: !!e.hasM\n    };\n  }\n  _createMultipointGeometry(e) {\n    return {\n      points: [],\n      spatialReference: e.spatialReference,\n      hasZ: !!e.hasZ,\n      hasM: !!e.hasM\n    };\n  }\n  _dehydratedAddPointsCoordinate(e, t, r) {\n    0 === r && 0 == this._toAddInCurrentPath-- && (e.push([]), this._toAddInCurrentPath = this._lengths[++this._currentLengthIndex] - 1, this._previousCoordinate[0] = 0, this._previousCoordinate[1] = 0);\n    const s = this._transformPathLikeValue(t, r),\n      o = e[e.length - 1];\n    0 === r && (this._coordinateBufferPtr = 0, this._coordinateBuffer = new Array(this._vertexDimension), o.push(this._coordinateBuffer)), this._coordinateBuffer[this._coordinateBufferPtr++] = s;\n  }\n  _deriveApplyTransform(e) {\n    const {\n      hasZ: t,\n      hasM: r\n    } = e;\n    return t && r ? h : t ? n : r ? a : i;\n  }\n}\nexport { d as JSONFeatureSetParserContext };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { parseUrl as r } from \"../utils.js\";\nimport { JSONFeatureSetParserContext as e } from \"./operations/pbfJSONFeatureSet.js\";\nimport { executeQueryPBF as t } from \"./operations/query.js\";\nimport o from \"../support/FeatureSet.js\";\nimport a from \"../support/Query.js\";\nasync function s(r, e, t) {\n  const s = await n(r, a.from(e), t);\n  return o.fromJSON(s);\n}\nasync function n(o, s, n) {\n  const p = r(o),\n    i = {\n      ...n\n    },\n    u = a.from(s),\n    m = !u.quantizationParameters,\n    {\n      data: f\n    } = await t(p, u, new e({\n      sourceSpatialReference: u.sourceSpatialReference,\n      applyTransform: m\n    }), i);\n  return f;\n}\nexport { s as executeQueryPBF, n as executeRawQueryPBF };"],
  "mappings": "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",
  "names": ["o", "n", "e", "i", "a", "n", "o", "i", "u", "f"]
}
