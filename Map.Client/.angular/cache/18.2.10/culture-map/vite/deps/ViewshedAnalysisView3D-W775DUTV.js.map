{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/viewshedToolUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedVisualization.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedAnalysisVisualization.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedComputedData.js", "../../../../../../node_modules/@arcgis/core/analysis/Viewshed.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/viewshedToolConfig.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/FieldOfViewManipulation.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ArrowManipulator.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ScaleOrientManipulation.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/viewshedToolManipulatorUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedSubTool.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedTool.js", "../../../../../../node_modules/@arcgis/core/views/3d/analysis/ViewshedAnalysisView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { rad2deg as t } from \"../../../../core/mathUtils.js\";\nimport { len as r, set as e } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as o } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { b as i, c as n, n as s, z as a, m as c } from \"../../../../chunks/vec32.js\";\nimport { create as m } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { distance as f } from \"../../../../geometry/geometryEngine.js\";\nimport { sv3d as l } from \"../../../../geometry/support/vectorStacks.js\";\nimport { calculateTranslateRotateFromBases as p, calculateInputRotationTransform as g } from \"../../interactive/manipulatorUtils.js\";\nimport { screenToRenderPlane as u } from \"../../interactive/editingTools/dragEventPipeline3D.js\";\nfunction b({\n  tiltedUpVector: t,\n  rightVector: r,\n  observerRenderSpace: e\n}, o) {\n  const i = p(t, r, e, o);\n  return i[12] = 0, i[13] = 0, i[14] = 0, i;\n}\nfunction v(t, r, {\n  origin: o,\n  basis1: i,\n  basis2: n\n}) {\n  const m = s(l.get(), i),\n    f = s(l.get(), n),\n    p = a(l.get(), r, o);\n  return e(t, c(p, m), c(p, f));\n}\nfunction j(e, o) {\n  const i = v(h, e, o),\n    [n, s] = i;\n  let a = Math.acos(n / r(i));\n  return s < 0 && (a = 2 * Math.PI - a), t(a);\n}\nfunction d(r, e, o) {\n  const s = m(),\n    a = i(m(), o.basis1, o.basis2);\n  return r.next(u(e, o.plane)).next(r => {\n    \"start\" === r.action && n(s, r.renderStart);\n    const e = t(g(s, r.renderEnd, o.origin, a));\n    return {\n      ...r,\n      deltaAngle: e\n    };\n  });\n}\nfunction x(t, r) {\n  if (null == t) return 0;\n  const {\n      observer: e,\n      target: o\n    } = t,\n    i = r.camera.position,\n    n = f(i, e) > f(i, o) ? e : o;\n  return r.pixelSizeAt(n);\n}\nconst h = o();\nexport { j as angleFromPointAndCircle, x as computeOffsetScale, b as getViewshedRotationMatrix, d as screenToCircleAngle };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../Color.js\";\nimport i from \"../../../../core/Accessor.js\";\nimport { equals as s } from \"../../../../core/lang.js\";\nimport { deg2rad as o } from \"../../../../core/mathUtils.js\";\nimport { destroyMaybe as r } from \"../../../../core/maybe.js\";\nimport { watch as a, initial as l } from \"../../../../core/reactiveUtils.js\";\nimport { property as n } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport { subclass as c } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { fromRotation as h } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as m } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { h as u, s as d, z as p, H as f, n as _, j as V, d as b, k as w, c as E, g as v } from \"../../../../chunks/vec32.js\";\nimport { create as g, clone as A } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { computeOffsetScale as L } from \"./viewshedToolUtils.js\";\nimport { LineVisualElement as y } from \"../../interactive/visualElements/LineVisualElement.js\";\nimport { RenderOccludedFlag as C } from \"../../webgl-engine/lib/Material.js\";\nimport { createStipplePatternSimple as j } from \"../../webgl-engine/materials/lineStippleUtils.js\";\nconst R = 2,\n  D = new e([85, 85, 85, .5]);\nlet O = class extends i {\n  constructor(t) {\n    super(t), this.visible = !0, this._viewshedCorners = {\n      topLeft: g(),\n      topRight: g(),\n      bottomLeft: g(),\n      bottomRight: g(),\n      center: g()\n    }, this._arcCenterPoints = {\n      top: g(),\n      bottom: g(),\n      left: g(),\n      right: g()\n    }, this._parallelCenters = {\n      top: g(),\n      bottom: g()\n    };\n  }\n  initialize() {\n    const t = {\n        ...{\n          view: this.view,\n          isDecoration: !0,\n          color: this._color\n        },\n        renderOccluded: C.OccludeAndTransparent\n      },\n      e = {\n        ...t,\n        width: R,\n        stipplePattern: j(2)\n      };\n    this._boundaryLinesVisualElement = new y(t), this._leftArcVisualElement = new y(t), this._rightArcVisualElement = new y(t), this._topArcVisualElement = new y(t), this._bottomArcVisualElement = new y(t), this._centralLongitude = new y(e), this._centralLatitude = new y(e), this.addHandles([a(() => {\n      const t = this.viewshedComputedData;\n      if (!t?.isValid()) return null;\n      const e = this._offsetScale,\n        i = this._viewshedCorners,\n        s = this._arcCenterPoints,\n        o = this._parallelCenters;\n      return t.cornerPoints(e, i), t.arcCentersPoints(e, s), t.parallelCenterPoints(o), {\n        viewshedComputedData: t,\n        corners: i,\n        arcCenters: s,\n        parallelCenters: o\n      };\n    }, t => {\n      null != t ? (this._forEachVisualElement(t => t.attached = !0), this._updateVisualElements(t)) : this._forEachVisualElement(t => t.attached = !1);\n    }, {\n      initial: !0,\n      equals: s\n    }), a(() => ({\n      visible: this.visible,\n      horFOV: this.viewshedComputedData?.horizontalFieldOfView\n    }), ({\n      visible: t,\n      horFOV: e\n    }, i) => {\n      t !== i?.visible && this._forEachVisualElement(e => e.visible = t), t && e !== i?.horFOV && (this._boundaryLinesVisualElement.visible = 360 !== e);\n    }, l), a(() => this._color, t => this._forEachVisualElement(e => e.color = t), l)]);\n  }\n  get _color() {\n    const t = this.viewshedComputedData;\n    if (null == t) return e.toUnitRGBA(D);\n    const i = this.analysisViewData,\n      s = i.tool?.active || i.interactive,\n      o = t === i.selectedViewshedComputedData,\n      r = t.viewshed === i.tool?.stagedViewshed,\n      a = s && (o || r) ? this.view.effectiveTheme.accentColor : D;\n    return e.toUnitRGBA(a);\n  }\n  get _offsetScale() {\n    return L(this.viewshedComputedData, this.view);\n  }\n  destroy() {\n    this._boundaryLinesVisualElement = r(this._boundaryLinesVisualElement), this._leftArcVisualElement = r(this._leftArcVisualElement), this._rightArcVisualElement = r(this._rightArcVisualElement), this._topArcVisualElement = r(this._topArcVisualElement), this._bottomArcVisualElement = r(this._bottomArcVisualElement), this._centralLongitude = r(this._centralLongitude), this._centralLatitude = r(this._centralLatitude);\n  }\n  _forEachVisualElement(t) {\n    [this._boundaryLinesVisualElement, this._leftArcVisualElement, this._rightArcVisualElement, this._topArcVisualElement, this._bottomArcVisualElement, this._centralLatitude, this._centralLongitude].forEach(t);\n  }\n  _updateVisualElements(t) {\n    const {\n      viewshedComputedData: e,\n      corners: i,\n      arcCenters: s,\n      parallelCenters: o\n    } = t;\n    this._updateBoundaryLines(i), this._updateBoundaryArcs(e, i, o), this._updateCentralHelperArcs(e, s);\n  }\n  _updateBoundaryLines(t) {\n    this._boundaryLinesVisualElement.geometry = [[t.center, t.topLeft], [t.center, t.topRight], [t.center, t.bottomLeft], [t.center, t.bottomRight]];\n  }\n  _updateBoundaryArcs(t, e, i) {\n    const {\n        observerRenderSpace: s,\n        rightVector: r,\n        horizontalFieldOfView: a,\n        tiltedUpVector: l\n      } = t,\n      n = o(a),\n      c = g(),\n      p = m();\n    h(p, n / 2, l), u(c, r, p), S(this._leftArcVisualElement, s, e.bottomLeft, e.topLeft, \"forward\", c), h(p, -n / 2, l), d(c, 0, 0, 0), u(c, r, p), S(this._rightArcVisualElement, s, e.bottomRight, e.topRight, \"forward\", c);\n    const f = a > 180 ? \"backward\" : \"forward\";\n    S(this._topArcVisualElement, i.top, e.topRight, e.topLeft, f, l), S(this._bottomArcVisualElement, i.bottom, e.bottomRight, e.bottomLeft, f, l);\n  }\n  _updateCentralHelperArcs(t, e) {\n    const i = t.observerRenderSpace,\n      s = t.horizontalFieldOfView >= 180 ? \"backward\" : \"forward\";\n    S(this._centralLatitude, i, e.right, e.left, s, t.tiltedUpVector), S(this._centralLongitude, i, e.top, e.bottom, \"forward\", t.leftVector);\n  }\n};\nfunction S(t, e, i, s, r, a, l = 5) {\n  const n = g();\n  p(n, i, e);\n  const c = f(n),\n    d = g();\n  p(d, s, e), _(d, d), V(d, d, c);\n  let L = b(n, d);\n  const y = A(a);\n  \"backward\" === r && (w(y, y), L = -(2 * Math.PI - L));\n  const C = [],\n    j = Math.ceil(Math.abs(L) / o(l)),\n    R = m();\n  h(R, L / j, y);\n  const D = g();\n  E(D, n);\n  const O = g();\n  E(O, i);\n  for (let o = 0; o < j; o++) {\n    const t = g();\n    E(t, O), u(D, D, R), v(O, e, D);\n    const i = g();\n    E(i, O), C.push([t, i]);\n  }\n  t.geometry = C;\n}\nt([n()], O.prototype, \"view\", void 0), t([n()], O.prototype, \"analysisViewData\", void 0), t([n()], O.prototype, \"viewshedComputedData\", void 0), t([n()], O.prototype, \"visible\", void 0), t([n()], O.prototype, \"_color\", null), t([n()], O.prototype, \"_offsetScale\", null), O = t([c(\"esri.views.3d.analysis.Viewshed.ViewshedVisualization\")], O);\nconst U = O;\nexport { U as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as s } from \"../../../../chunks/tslib.es6.js\";\nimport i from \"../../../../core/Accessor.js\";\nimport { destroyHandle as e } from \"../../../../core/handleUtils.js\";\nimport { mapCollection as o, watch as t } from \"../../../../core/reactiveUtils.js\";\nimport { property as a } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as r } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport l from \"./ViewshedVisualization.js\";\nlet n = class extends i {\n  get visible() {\n    return this.analysisViewData.visible;\n  }\n  constructor(s) {\n    super(s);\n  }\n  initialize() {\n    const s = this.analysisViewData,\n      i = o(() => this.analysisViewData.viewshedComputedDataHandles, ({\n        viewshedComputedData: i\n      }) => {\n        const e = new l({\n          view: this.view,\n          viewshedComputedData: i,\n          analysisViewData: s\n        });\n        return {\n          visualization: e,\n          remove: () => e.destroy()\n        };\n      });\n    this._viewshedVisualizations = i, this.addHandles([e(i), t(() => this.visible, s => this._viewshedVisualizations.forEach(({\n      visualization: i\n    }) => i.visible = s))]);\n  }\n};\ns([a({\n  constructOnly: !0\n})], n.prototype, \"analysisViewData\", void 0), s([a({\n  constructOnly: !0,\n  nonNullable: !0\n})], n.prototype, \"view\", void 0), s([a({\n  constructOnly: !0\n})], n.prototype, \"isDecoration\", void 0), s([a()], n.prototype, \"visible\", null), n = s([r(\"esri.views.3d.analysis.Viewshed.ViewshedAnalysisVisualization\")], n);\nexport { n as ViewshedAnalysisVisualization };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { deg2rad as r } from \"../../../../core/mathUtils.js\";\nimport { property as o } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as i } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { fromRotation as s } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as n } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { j as p, g as a, z as c, n as l, b as h, k as d, h as u } from \"../../../../chunks/vec32.js\";\nimport { create as f, fromValues as g, fromArray as m } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport V from \"../../../../geometry/Point.js\";\nvar S;\nlet v = S = class extends t {\n  constructor(e) {\n    super(e);\n  }\n  get observer() {\n    return this.viewshed.observer ?? new V();\n  }\n  get farDistance() {\n    return this.viewshed.farDistance;\n  }\n  get farDistanceRenderSpace() {\n    return this.farDistance / this.metersPerUnit;\n  }\n  get heading() {\n    return this.viewshed.heading;\n  }\n  get tilt() {\n    return this.viewshed.tilt;\n  }\n  get tiltParallelToSurface() {\n    return this.tilt - 90;\n  }\n  get horizontalFieldOfView() {\n    return this.viewshed.horizontalFieldOfView;\n  }\n  get verticalFieldOfView() {\n    return this.viewshed.verticalFieldOfView;\n  }\n  get observerRenderSpace() {\n    return this._pointToRenderSpace(this.observer, f());\n  }\n  get target() {\n    const e = this.targetRenderSpace;\n    return this.renderSpaceToPoint(e, this.observer.spatialReference);\n  }\n  get targetRenderSpace() {\n    const {\n        leftVector: e,\n        northVector: t,\n        upVector: o\n      } = this,\n      i = this.observerRenderSpace,\n      s = this.farDistanceRenderSpace,\n      n = f();\n    return p(n, t, s), w(n, -r(this.heading), o, n), w(n, -r(this.tiltParallelToSurface), e, n), a(n, i, n), n;\n  }\n  get targetDirection() {\n    const e = c(f(), this.targetRenderSpace, this.observerRenderSpace);\n    return l(e, e);\n  }\n  get tiltedUpVector() {\n    const e = w(this.upVector, -r(this.tiltParallelToSurface), this.leftVector, f());\n    return l(e, e);\n  }\n  get _basis() {\n    return this.renderCoordsHelper.basisMatrixAtPosition(this.observerRenderSpace, n());\n  }\n  get upVector() {\n    const e = this._basis;\n    return g(e[8], e[9], e[10]);\n  }\n  get northVector() {\n    const e = this._basis;\n    return g(e[4], e[5], e[6]);\n  }\n  get leftVector() {\n    const e = this.upVector,\n      t = w(this.northVector, -r(this.heading), e, f());\n    return h(t, e, t);\n  }\n  get rightVector() {\n    return d(f(), this.leftVector);\n  }\n  clone() {\n    return new S({\n      renderCoordsHelper: this.renderCoordsHelper,\n      viewshed: this.viewshed.clone()\n    });\n  }\n  isValid() {\n    return this.viewshed.isValid();\n  }\n  get metersPerUnit() {\n    return this.renderCoordsHelper.spatialReference.metersPerUnit;\n  }\n  pointOnSphere(e, t, o) {\n    const {\n        observerRenderSpace: i,\n        targetRenderSpace: s\n      } = this,\n      n = c(j, s, i);\n    return w(n, -r(t), this.leftVector, n), w(n, -r(e), this.tiltedUpVector, n), a(o, n, i);\n  }\n  cornerPoints(e, t) {\n    const r = this.observerRenderSpace,\n      o = this.horizontalFieldOfView / 2,\n      i = this.verticalFieldOfView / 2,\n      s = this.pointOnSphere(-o, i, H),\n      n = this.pointOnSphere(o, i, _),\n      l = this.pointOnSphere(-o, -i, x),\n      h = this.pointOnSphere(o, -i, L),\n      d = c(D, s, r),\n      u = c(U, n, r),\n      f = c(T, l, r),\n      g = c(z, h, r),\n      {\n        horizontalFieldOfView: m\n      } = this,\n      V = C;\n    b(d, u, s, l, r, e, m, t.topLeft, t.bottomLeft, V);\n    const S = F;\n    b(g, f, n, h, r, e, m, t.topRight, t.bottomRight, S), p(t.center, a(t.center, S, V), .5);\n  }\n  arcCentersPoints(e, t) {\n    const r = this.horizontalFieldOfView / 2,\n      o = this.verticalFieldOfView / 2,\n      i = this.pointOnSphere(0, o, t.top),\n      s = this.pointOnSphere(0, -o, t.bottom),\n      n = this.pointOnSphere(-r, 0, t.left),\n      p = this.pointOnSphere(r, 0, t.right),\n      {\n        observerRenderSpace: a\n      } = this;\n    O(i, a, e), O(s, a, e), O(n, a, e), O(p, a, e);\n  }\n  parallelCenterPoints(e) {\n    const t = this.observerRenderSpace,\n      o = this.farDistanceRenderSpace * Math.sin(r(this.verticalFieldOfView / 2)),\n      i = p(j, this.tiltedUpVector, o);\n    a(e.top, t, i), c(e.bottom, t, i);\n  }\n  renderSpaceToPoint(e, t) {\n    const r = j;\n    return this.renderCoordsHelper.fromRenderCoords(e, r, t), new V(r[0], r[1], r[2], t);\n  }\n  _pointToRenderSpace(e, t) {\n    const r = m(e.toArray());\n    return this.renderCoordsHelper.toRenderCoords(r, e.spatialReference, t), t;\n  }\n};\nfunction b(e, t, r, o, i, s, n, p, c, l) {\n  const h = R(e, t, s, P);\n  a(l, i, h), y(r, e, h, s, n, p), y(o, e, h, s, n, c);\n}\nfunction w(e, t, r, o) {\n  return s(k, t, r), u(o, e, k);\n}\nfunction R(e, t, r, o) {\n  const i = h(o, e, t);\n  return l(i, i), p(i, i, r), i;\n}\nfunction y(e, t, r, o, i, s) {\n  const n = l(j, t);\n  return p(n, n, o), a(s, e, n), 0 !== i && 360 !== i && a(s, s, r), s;\n}\nfunction O(e, t, r) {\n  const o = c(j, e, t);\n  l(o, o), p(o, o, r), a(e, e, o);\n}\ne([o()], v.prototype, \"renderCoordsHelper\", void 0), e([o()], v.prototype, \"viewshed\", void 0), e([o()], v.prototype, \"observer\", null), e([o()], v.prototype, \"farDistance\", null), e([o()], v.prototype, \"farDistanceRenderSpace\", null), e([o()], v.prototype, \"heading\", null), e([o()], v.prototype, \"tilt\", null), e([o()], v.prototype, \"tiltParallelToSurface\", null), e([o()], v.prototype, \"horizontalFieldOfView\", null), e([o()], v.prototype, \"verticalFieldOfView\", null), e([o()], v.prototype, \"observerRenderSpace\", null), e([o()], v.prototype, \"target\", null), e([o()], v.prototype, \"targetRenderSpace\", null), e([o()], v.prototype, \"targetDirection\", null), e([o()], v.prototype, \"tiltedUpVector\", null), e([o()], v.prototype, \"_basis\", null), e([o()], v.prototype, \"upVector\", null), e([o()], v.prototype, \"northVector\", null), e([o()], v.prototype, \"leftVector\", null), e([o()], v.prototype, \"rightVector\", null), e([o()], v.prototype, \"isValid\", null), e([o()], v.prototype, \"metersPerUnit\", null), v = S = e([i(\"esri.views.3d.analysis.Viewshed.ViewshedComputedData\")], v);\nconst j = f(),\n  P = f(),\n  C = f(),\n  F = f(),\n  D = f(),\n  U = f(),\n  T = f(),\n  z = f(),\n  H = f(),\n  _ = f(),\n  x = f(),\n  L = f(),\n  k = n();\nexport { v as ViewshedComputedData };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport \"../geometry.js\";\nimport r from \"../core/Accessor.js\";\nimport { ClonableMixin as o } from \"../core/Clonable.js\";\nimport { cyclicalDegrees as t } from \"../core/Cyclical.js\";\nimport { equalsMaybe as i } from \"../core/maybe.js\";\nimport { property as s } from \"../core/accessorSupport/decorators/property.js\";\nimport { cast as a } from \"../core/accessorSupport/decorators/cast.js\";\nimport \"../core/RandomLCG.js\";\nimport \"../core/has.js\";\nimport { subclass as l } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { ensureNumber as n } from \"../core/accessorSupport/ensureType.js\";\nimport p from \"../geometry/Point.js\";\nlet c = class extends o(r) {\n  constructor(e) {\n    super(e), this.observer = null, this.farDistance = 1e3, this.heading = 0, this.tilt = 90, this.horizontalFieldOfView = 45, this.verticalFieldOfView = 45;\n  }\n  isValid() {\n    return null != this.observer && this.farDistance > 0;\n  }\n  equals(e) {\n    return i(this.observer, e.observer) && this.farDistance === e.farDistance && this.heading === e.heading && this.tilt === e.tilt && this.horizontalFieldOfView === e.horizontalFieldOfView && this.verticalFieldOfView === e.verticalFieldOfView;\n  }\n};\ne([s({\n  type: p\n})], c.prototype, \"observer\", void 0), e([s({\n  type: Number,\n  nonNullable: !0,\n  range: {\n    min: 0\n  }\n})], c.prototype, \"farDistance\", void 0), e([s({\n  type: Number,\n  nonNullable: !0\n}), a(e => t.normalize(n(e)))], c.prototype, \"heading\", void 0), e([s({\n  type: Number,\n  nonNullable: !0,\n  range: {\n    min: 0,\n    max: 180\n  }\n})], c.prototype, \"tilt\", void 0), e([s({\n  type: Number,\n  nonNullable: !0,\n  range: {\n    min: 0,\n    max: 360\n  }\n})], c.prototype, \"horizontalFieldOfView\", void 0), e([s({\n  type: Number,\n  nonNullable: !0,\n  range: {\n    min: 0,\n    max: 180\n  }\n})], c.prototype, \"verticalFieldOfView\", void 0), e([s()], c.prototype, \"isValid\", null), c = e([l(\"esri.analysis.Viewshed\")], c);\nconst m = c;\nexport { m as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { deg2rad as o } from \"../../../../core/mathUtils.js\";\nimport { resizeHandleCornerWidth as i, displayFocusMultiplier as t } from \"../Slice/sliceToolConfig.js\";\nconst r = i,\n  s = t * r,\n  m = 5,\n  c = .0025,\n  e = 1,\n  l = Math.sin(o(2)),\n  f = t / 1.5,\n  n = 5,\n  p = 1;\nexport { p as angleOpenThreshold, s as fovFocusedArcWidth, r as fovUnfocusedArcWidth, n as observerManipulatorSize, m as scaleOrientArcAngle, f as scaleOrientArrowTipFocusMultiplier, l as scaleOrientArrowTipLength, c as scaleOrientHandleRadius, e as scaleOrientMinDistance };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from \"../../../../Color.js\";\nimport e from \"../../../../core/Handles.js\";\nimport { handlesGroup as i } from \"../../../../core/handleUtils.js\";\nimport { deg2rad as r, clamp as a } from \"../../../../core/mathUtils.js\";\nimport { destroyMaybe as o } from \"../../../../core/maybe.js\";\nimport { watch as n, initial as s } from \"../../../../core/reactiveUtils.js\";\nimport { fromYRotation as l, fromXRotation as c, fromScaling as u, fromZRotation as p, fromTranslation as h, fromRotation as m, multiply as f } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as d } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { s as _, z as v } from \"../../../../chunks/vec32.js\";\nimport { fromValues as M, create as b } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { f as g } from \"../../../../chunks/boundedPlane.js\";\nimport { angleOpenThreshold as w, fovFocusedArcWidth as j, fovUnfocusedArcWidth as A } from \"./viewshedToolConfig.js\";\nimport { screenToCircleAngle as O, getViewshedRotationMatrix as V, computeOffsetScale as y } from \"./viewshedToolUtils.js\";\nimport { Manipulator3D as T } from \"../../interactive/Manipulator3D.js\";\nimport { RenderObject as E } from \"../../interactive/RenderObject.js\";\nimport { ManipulatorType as F } from \"../../interactive/editingTools/ManipulatorType.js\";\nimport { Manipulation as U } from \"../../interactive/editingTools/manipulations/Manipulation.js\";\nimport { createPolylineGeometry as R } from \"../../webgl-engine/lib/GeometryUtil.js\";\nimport { RenderOccludedFlag as S } from \"../../webgl-engine/lib/Material.js\";\nimport { assert as x } from \"../../webgl-engine/lib/Util.js\";\nimport { RibbonLineMaterial as z } from \"../../webgl-engine/materials/RibbonLineMaterial.js\";\nimport { createManipulatorDragEventPipeline as D } from \"../../../interactive/dragEventPipeline.js\";\nimport { ManipulatorStateFlags as I } from \"../../../interactive/interfaces.js\";\nclass P extends U {\n  constructor(t) {\n    super(), this._handles = new e(), this._interactive = !0, this._tool = t.tool, this._view = t.view, this._focusedArcMaterial = this._createArcMaterial(!0), this._unfocusedArcMaterial = this._createArcMaterial(!1), this._createManipulators(), this.forEachManipulator(t => this._tool.manipulators.add(t));\n  }\n  destroy() {\n    this._handles = o(this._handles), this.forEachManipulator(t => {\n      this._tool.manipulators.remove(t), t.destroy();\n    }), this._tool = null, this._view = null, this._manipulators = null;\n  }\n  get interactive() {\n    return this._interactive;\n  }\n  set interactive(t) {\n    this._interactive !== t && (this._interactive = t, this._updateManipulatorInteractivity());\n  }\n  createDragPipeline(t, e) {\n    const r = Object.values(this._manipulators);\n    return i(r.map(({\n      manipulator: i,\n      side: r\n    }) => D(i, (i, a, o, n, s) => {\n      const l = H(r, e);\n      B(r) ? e.horizontalFieldOfView : e.verticalFieldOfView;\n      const c = a.next(t => ({\n          ...t,\n          manipulatorType: F.SCALE,\n          side: r\n        })),\n        u = O(c, this._view, l);\n      t(i, u, o);\n    })));\n  }\n  updateManipulatorsTransform(t) {\n    this._forEachManipulatorInfo(e => this._updateArcManipulatorTransform(e, t));\n  }\n  updateManipulatorVisuals(t) {\n    this._forEachManipulatorInfo(e => this._updateArcManipulatorVisuals(e, t));\n  }\n  _updateArcManipulatorVisuals({\n    manipulator: t,\n    side: e\n  }, i) {\n    const r = [];\n    if (null != i) {\n      if (\"left\" === e && (i.horizontalFieldOfView < w || i.horizontalFieldOfView > 360 - w) || \"bottom\" === e && i.verticalFieldOfView < w) return t.renderObjects = [], void (t.collisionType = {\n        type: \"line\",\n        paths: []\n      });\n      const [a, o] = C(e, i, this._unfocusedArcMaterial);\n      r.push(new E(a, I.Unfocused), new E(a.instantiate({\n        material: this._focusedArcMaterial\n      }), I.Focused)), t.collisionType = {\n        type: \"line\",\n        paths: [o]\n      };\n    }\n    t.renderObjects = r, t.radius = 10;\n  }\n  _updateArcManipulatorTransform({\n    manipulator: t,\n    side: e\n  }, i) {\n    const a = i.horizontalFieldOfView,\n      o = r(i.verticalFieldOfView / 2),\n      n = r(a / 2),\n      s = B(e);\n    t.location = i.observer;\n    const M = d(),\n      b = t => {\n        f(M, t, M);\n      };\n    b(l(J, r(-90))), s || b(c(J, o));\n    const g = i.farDistanceRenderSpace;\n    b(u(J, _(K, g, g, g))), b(p(J, k(e))), b(V(i, J));\n    const w = v(K, i.targetRenderSpace, i.observerRenderSpace);\n    let j, A;\n    if (b(h(J, w)), s) {\n      if (j = n, A = i.tiltedUpVector, 0 !== a && 360 !== a) {\n        const t = y(i, this._view);\n        j += 2 * Math.tan(t / (2 * i.farDistance));\n      }\n    } else A = i.rightVector, j = o;\n    j *= \"right\" === e || \"bottom\" === e ? -1 : 1;\n    const O = m(J, j, A);\n    null != O && b(O), t.modelTransform = M;\n  }\n  _updateManipulatorInteractivity() {\n    const t = this.grabbing;\n    this.forEachManipulator(e => {\n      e.interactive = !t && this.interactive || e.grabbing;\n    });\n  }\n  _createManipulators() {\n    const t = this._createArcManipulator(\"left\"),\n      e = this._createArcManipulator(\"right\"),\n      i = this._createArcManipulator(\"top\"),\n      r = this._createArcManipulator(\"bottom\");\n    this._manipulators = {\n      left: t,\n      right: e,\n      top: i,\n      bottom: r\n    };\n    const a = [[r.manipulator, i.manipulator], [t.manipulator, e.manipulator]];\n    a.push(...a.map(([t, e]) => [e, t])), this._handles.add(a.map(([t, e]) => t.events.on(\"focus-changed\", t => {\n      const i = \"focus\" === t.action;\n      e.hovering = i;\n    })));\n  }\n  _createArcManipulator(t) {\n    const e = {\n      manipulator: new T({\n        view: this._view,\n        autoScaleRenderObjects: !1,\n        worldSized: !0\n      }),\n      side: t\n    };\n    return this._updateArcManipulatorVisuals(e), e;\n  }\n  _createArcMaterial(e) {\n    const i = e ? j : A,\n      r = new z({\n        renderOccluded: S.OccludeAndTransparent,\n        isDecoration: !0,\n        width: i\n      });\n    return this._handles.add(n(() => t.toUnitRGBA(this._view.effectiveTheme.accentColor), t => r.setParameters({\n      color: t\n    }), s)), r;\n  }\n  forEachManipulator(t) {\n    Object.values(this._manipulators).forEach(({\n      manipulator: e\n    }) => t(e, F.SCALE));\n  }\n  _forEachManipulatorInfo(t) {\n    Object.values(this._manipulators).forEach(e => t(e));\n  }\n}\nfunction C(t, e, i) {\n  const {\n      horizontalFieldOfView: o,\n      verticalFieldOfView: n\n    } = e,\n    s = B(t),\n    l = r(a((s ? n : o) / 2, 0, 15)),\n    c = s ? 1 : Math.max(Math.sin(r(90 - n / 2)), .1),\n    u = G(-l / 2, l / 2, c, [-c, 0, 0]);\n  return [R(i, u), u];\n}\nfunction G(t, e, i, r = [0, 0, 0], a = 10) {\n  x(a > 1, \"createArcPolylineGeometry() needs at least 2 for numVertices\");\n  const o = e - t,\n    [n, s, l] = r;\n  if (o <= 0 || i <= 0) {\n    const t = .001;\n    return [M(n, s, l + t), M(n, s, s + -t)];\n  }\n  const c = [],\n    u = o / a;\n  for (let p = 0; p < a; p++) {\n    let r = t + p * u;\n    p === a - 1 && (r = e);\n    const o = Math.cos(r) * i,\n      h = Math.sin(r) * i,\n      m = M(o + n, s, h + l);\n    c.push(m);\n  }\n  return c;\n}\nfunction L(t) {\n  switch (t) {\n    case \"left\":\n      return 0;\n    case \"bottom\":\n      return 1;\n    case \"right\":\n      return 2;\n    case \"top\":\n      return 3;\n  }\n}\nfunction k(t) {\n  return L(t) * q;\n}\nfunction B(t) {\n  return \"left\" === t || \"right\" === t;\n}\nfunction H(t, {\n  observerRenderSpace: e,\n  targetDirection: i,\n  tiltedUpVector: r,\n  rightVector: a\n}) {\n  const o = B(t) ? a : r;\n  return g(e, i, o);\n}\nconst q = Math.PI / 2,\n  J = d(),\n  K = b();\nexport { P as FieldOfViewManipulation, G as createArcPolylineVertices, B as isSideHorizontal, k as sideToRad };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport t from \"../../../../core/Handles.js\";\nimport { deg2rad as r } from \"../../../../core/mathUtils.js\";\nimport { watch as o, initial as i } from \"../../../../core/reactiveUtils.js\";\nimport { fromTranslation as s, mul as n, fromXRotation as a, fromYRotation as c } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as l } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { h as m } from \"../../../../chunks/vec32.js\";\nimport { fromValues as f } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { displayFocusMultiplier as p } from \"../Slice/sliceToolConfig.js\";\nimport { createArcPolylineVertices as d } from \"./FieldOfViewManipulation.js\";\nimport { scaleOrientArrowTipLength as u, scaleOrientArrowTipFocusMultiplier as h } from \"./viewshedToolConfig.js\";\nimport { Manipulator3D as j } from \"../../interactive/Manipulator3D.js\";\nimport { RenderObject as w } from \"../../interactive/RenderObject.js\";\nimport { CullFaceOptions as b } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { createTubeGeometry as g, createExtrudedTriangle as v } from \"../../webgl-engine/lib/GeometryUtil.js\";\nimport { RenderOccludedFlag as M } from \"../../webgl-engine/lib/Material.js\";\nimport { ColorMaterial as _ } from \"../../webgl-engine/materials/ColorMaterial.js\";\nimport { ManipulatorStateFlags as O } from \"../../../interactive/interfaces.js\";\nclass U extends j {\n  constructor(e, r, o, i) {\n    super({\n      view: e,\n      autoScaleRenderObjects: !1,\n      worldSized: !0,\n      radius: 5\n    }), this._handles = new t(), this._setupManipulatorVisual(r, o, i);\n  }\n  destroy() {\n    this._handles.remove(), super.destroy();\n  }\n  _setupManipulatorVisual(e, t, o) {\n    const i = this._createMaterial(),\n      u = r(t),\n      h = e ? 1 : Math.sin(u),\n      j = e ? d(0, u, h, [-h, 0, 0]) : [f(0, 0, 0), f(0, 0, h)],\n      b = g(i, j, o, 16, !1),\n      v = g(i, j, o * p, 16, !1),\n      M = x(!1, i, o),\n      _ = x(!0, i, o),\n      U = l();\n    s(U, j[j.length - 1]), n(U, U, a(C, Math.PI / 2)), n(U, U, c(C, Math.PI / 2)), e && n(U, U, a(C, -u)), M.transformation = U, _.transformation = U, this.renderObjects = [new w(b, O.Unfocused), new w(v, O.Focused), new w(M, O.Unfocused), new w(_, O.Focused)];\n    const T = f(0, y(!0), 0),\n      F = m(T, T, U),\n      D = [...j, F];\n    this.collisionType = {\n      type: \"line\",\n      paths: [D]\n    };\n  }\n  _createMaterial() {\n    const t = new _({\n      cullFace: b.Back,\n      renderOccluded: M.OccludeAndTransparent,\n      isDecoration: !0,\n      writeLinearDepth: !0\n    });\n    return this._handles.add(o(() => e.toUnitRGBA(this.view.effectiveTheme.accentColor), e => t.setParameters({\n      color: e\n    }), i)), t;\n  }\n}\nfunction x(e, t, r) {\n  const o = y(e);\n  let i = 2 * r;\n  e && (i *= p);\n  const s = o / 2;\n  return v(t, o, s, s, i, 0);\n}\nfunction y(e) {\n  let t = u;\n  return e && (t *= h), t;\n}\nconst C = l();\nexport { U as ArrowManipulator };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from \"../../../../core/Handles.js\";\nimport { deg2rad as i } from \"../../../../core/mathUtils.js\";\nimport { fromScaling as a, fromTranslation as e, fromZRotation as r, mul as o, fromYRotation as n, multiply as s } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as l } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { g as c, j as p, b as m, s as h, p as u, a as d } from \"../../../../chunks/vec32.js\";\nimport { create as _ } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { f } from \"../../../../chunks/boundedPlane.js\";\nimport { fromValues as v } from \"../../../../geometry/support/ray.js\";\nimport { displayFocusMultiplier as g } from \"../Slice/sliceToolConfig.js\";\nimport { ArrowManipulator as T } from \"./ArrowManipulator.js\";\nimport { scaleOrientArcAngle as w, scaleOrientHandleRadius as M } from \"./viewshedToolConfig.js\";\nimport { screenToCircleAngle as j, getViewshedRotationMatrix as D } from \"./viewshedToolUtils.js\";\nimport { screenToRenderRay as b } from \"../../interactive/editingTools/dragEventPipeline3D.js\";\nimport { ManipulatorType as x } from \"../../interactive/editingTools/ManipulatorType.js\";\nimport { Manipulation as y } from \"../../interactive/editingTools/manipulations/Manipulation.js\";\nimport { createManipulatorDragEventPipeline as E, dragAtLocation as P } from \"../../../interactive/dragEventPipeline.js\";\nclass R extends y {\n  constructor(i) {\n    super(), this._handles = new t(), this._interactive = !0, this._tool = i.tool, this._view = i.view, this._manipulatorHeading = new T(this._view, !0, w, M), this._manipulatorTilt = new T(this._view, !0, w, M), this._manipulatorDistance = new T(this._view, !1, w, M), this.forEachManipulator(t => {\n      this._tool.manipulators.add(t), this._handles.add(t.events.on(\"grab-changed\", () => this._updateManipulatorInteractivity()));\n    });\n  }\n  destroy() {\n    this._handles.destroy(), this.forEachManipulator(t => {\n      this._tool.manipulators.remove(t), t.destroy();\n    }), this._manipulatorHeading = null, this._manipulatorTilt = null, this._manipulatorDistance = null, this._tool = null, this._view = null;\n  }\n  get interactive() {\n    return this._interactive;\n  }\n  set interactive(t) {\n    this._interactive !== t && (this._interactive = t, this._updateManipulatorInteractivity());\n  }\n  createHeadingDragPipeline(t, a) {\n    return E(this._manipulatorHeading, (e, r, o, n, s) => {\n      const {\n          _view: l\n        } = this,\n        h = Math.sin(i(a.tiltParallelToSurface)) * a.farDistanceRenderSpace,\n        u = c(A, a.observerRenderSpace, p(O, a.upVector, h)),\n        d = m(O, a.northVector, a.upVector),\n        _ = f(u, a.northVector, d),\n        v = j(r, l, _).next(t => ({\n          ...t,\n          manipulatorType: x.ROTATE\n        }));\n      t(e, v, o);\n    });\n  }\n  createTiltDragPipeline(t, i) {\n    return E(this._manipulatorTilt, (a, e, r, o, n) => {\n      const s = f(i.observerRenderSpace, i.targetDirection, i.tiltedUpVector),\n        l = j(e, this._view, s).next(t => ({\n          ...t,\n          manipulatorType: x.ROTATE\n        }));\n      t(a, l, r);\n    });\n  }\n  createDistanceDragPipeline(t, i) {\n    return E(this._manipulatorDistance, (a, e, r, o, n) => {\n      const s = v(i.observerRenderSpace, i.targetDirection),\n        l = e.next(P(this._view, a.location)).next(b(this._view, s)).next(t => ({\n          ...t,\n          manipulatorType: x.SCALE\n        }));\n      t(a, l, r);\n    });\n  }\n  updateManipulators(t) {\n    const {\n      target: i\n    } = t;\n    this._manipulatorHeading.location = i, this._manipulatorTilt.location = i, this._manipulatorDistance.location = i;\n    const c = l(),\n      m = t => {\n        s(c, t, c);\n      },\n      u = I(t);\n    m(a(H, h(A, u, u, u))), m(D(t, H));\n    const d = M * g * u,\n      _ = p(A, t.targetDirection, d);\n    m(e(H, _));\n    const f = r(H, -C);\n    o(f, f, n(V, -C)), this._manipulatorHeading.modelTransform = o(l(), c, f);\n    const v = n(H, C);\n    o(v, v, r(V, Math.PI)), this._manipulatorTilt.modelTransform = s(l(), c, v), this._manipulatorDistance.modelTransform = c;\n  }\n  _updateManipulatorInteractivity() {\n    const t = !this.grabbing;\n    this.forEachManipulator(i => {\n      i.interactive = t && this._interactive || i.grabbing;\n    });\n  }\n  forEachManipulator(t) {\n    t(this._manipulatorHeading, x.ROTATE), t(this._manipulatorTilt, x.ROTATE), t(this._manipulatorDistance, x.SCALE);\n  }\n}\nconst S = {\n    top: _(),\n    bottom: _(),\n    left: _(),\n    right: _()\n  },\n  H = l(),\n  V = l(),\n  A = _(),\n  O = _(),\n  C = Math.PI / 2;\nfunction I(t) {\n  const i = 1,\n    {\n      verticalFieldOfView: a,\n      horizontalFieldOfView: e\n    } = t,\n    r = a > 180,\n    o = e > 180,\n    n = t.farDistanceRenderSpace;\n  if (r && o) return Math.max(i, n);\n  t.arcCentersPoints(n, S);\n  const {\n      left: s,\n      right: l,\n      top: c,\n      bottom: p\n    } = S,\n    m = 1.9 * (r ? u(s, l) : o ? u(p, s) : Math.sqrt(Math.min(d(p, c), d(s, l))));\n  return Math.max(i, Math.min(n, m));\n}\nexport { R as ScaleOrientManipulation };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as r } from \"../../../../chunks/tslib.es6.js\";\nimport o from \"../../../../Color.js\";\nimport e from \"../../../../core/Handles.js\";\nimport { watch as t, initial as s } from \"../../../../core/reactiveUtils.js\";\nimport { property as i } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport \"../../../../core/accessorSupport/interfaces.js\";\nimport \"../../../../core/accessorSupport/tracking/Flags.js\";\nimport \"../../../../core/Warning.js\";\nimport \"../../../../core/Error.js\";\nimport { observerManipulatorSize as c } from \"./viewshedToolConfig.js\";\nimport { Manipulator3D as a } from \"../../interactive/Manipulator3D.js\";\nimport { createManipulatorMaterial as m } from \"../../interactive/manipulatorUtils.js\";\nimport { RenderObject as p } from \"../../interactive/RenderObject.js\";\nimport { createSphereGeometry as n } from \"../../webgl-engine/lib/GeometryUtil.js\";\nclass l extends a {\n  constructor(r, o) {\n    super({\n      view: r,\n      autoScaleRenderObjects: !1,\n      worldSized: !1,\n      radius: c,\n      interactive: !1\n    }), this._handles = new e();\n    const i = m(this._color);\n    this.renderObjects = [new p(n(i, c, 32, 32))], o.manipulators.add(this), this._handles.add([t(() => this._color, r => {\n      i.setParameters({\n        color: r\n      });\n    }, s)]);\n  }\n  destroy() {\n    this._handles.remove(), super.destroy();\n  }\n  get _color() {\n    return o.toUnitRGBA(this.view.effectiveTheme.accentColor);\n  }\n}\nr([i()], l.prototype, \"_color\", null);\nexport { l as ViewshedObserverManipulator };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport i from \"../../../../core/Accessor.js\";\nimport { isSome as t } from \"../../../../core/arrayUtils.js\";\nimport { cyclicalDegrees as a, Cyclical as s } from \"../../../../core/Cyclical.js\";\nimport { handlesGroup as n } from \"../../../../core/handleUtils.js\";\nimport { destroyMaybe as l } from \"../../../../core/maybe.js\";\nimport { watch as o, syncAndInitial as r, initial as p } from \"../../../../core/reactiveUtils.js\";\nimport { property as u } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport { subclass as h } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { z as d, H as c, m as v } from \"../../../../chunks/vec32.js\";\nimport { create as m } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { project as f } from \"../../../../geometry/projection.js\";\nimport { viewingModeFromString as M } from \"../../../ViewingMode.js\";\nimport { FieldOfViewManipulation as _, isSideHorizontal as w } from \"./FieldOfViewManipulation.js\";\nimport { ScaleOrientManipulation as b } from \"./ScaleOrientManipulation.js\";\nimport { scaleOrientMinDistance as g } from \"./viewshedToolConfig.js\";\nimport { ViewshedObserverManipulator as V } from \"./viewshedToolManipulatorUtils.js\";\nimport { Settings as O } from \"../../interactive/editingTools/settings.js\";\nimport { discRadiusSmall as y } from \"../../interactive/editingTools/manipulations/config.js\";\nimport { MoveManipulation as D } from \"../../interactive/editingTools/manipulations/MoveManipulation.js\";\nimport { ExtendedLineVisualElement as E } from \"../../interactive/visualElements/ExtendedLineVisualElement.js\";\nimport { LaserlineVisualElement as H } from \"../../interactive/visualElements/LaserlineVisualElement.js\";\nimport { RenderOccludedFlag as j } from \"../../webgl-engine/lib/Material.js\";\nimport { resetProperties as T, dragManipulatedObject as C } from \"../../../interactive/dragEventPipeline.js\";\nimport { EditGeometryOperations as F } from \"../../../interactive/editGeometry/EditGeometryOperations.js\";\nconst x = Symbol(\"dragHandles\"),\n  P = Symbol(\"hideManipulators\");\nlet S = class extends i {\n  constructor(e) {\n    super(e), this._moveManipulation = null, this._observerManipulator = null, this._fieldOfViewManipulation = null, this._scaleOrientManipulation = null, this._moveHelperVisualElement = null, this._settings = new O({\n      getTheme: () => this.view.effectiveTheme\n    }), this._grabbing = !1, this.viewshedComputedData = null;\n  }\n  initialize() {\n    this._moveManipulation = this._createMoveManipulation(), this._fieldOfViewManipulation = new _({\n      view: this.view,\n      tool: this.parentTool\n    }), this._scaleOrientManipulation = new b({\n      view: this.view,\n      tool: this.parentTool\n    }), this._observerManipulator = new V(this.view, this.parentTool), this._createMoveHelperVisuals(), this.addHandles([o(() => {\n      const {\n        observer: e\n      } = this;\n      return {\n        observer: e,\n        array: e?.toArray()\n      };\n    }, ({\n      observer: e\n    }) => {\n      null != e && (this._moveManipulation.location = e, this._observerManipulator.location = e);\n    }, r), o(() => {\n      const {\n        viewshedComputedData: e\n      } = this;\n      return {\n        viewshedComputedData: e,\n        observer: e?.observer\n      };\n    }, ({\n      viewshedComputedData: e,\n      observer: i\n    }, a) => {\n      this._grabbing && i !== a?.observer || (this.removeHandles(x), e?.isValid() && this.addHandles([this._buildObserverDragPipeline(e), this._buildFOVDragPipeline(e), this._buildScaleOrientDragPipeline(e)].filter(t), x));\n    }, p), o(() => {\n      const e = this.viewshedComputedData;\n      return e?.isValid() ? {\n        viewshedCompData: e,\n        target: e.targetRenderSpace,\n        hFOV: e.horizontalFieldOfView,\n        vFOV: e.verticalFieldOfView\n      } : null;\n    }, e => {\n      null != e && this._fieldOfViewManipulation.updateManipulatorsTransform(e.viewshedCompData);\n    }, p), o(() => {\n      const e = this.viewshedComputedData;\n      return e?.isValid() ? {\n        viewshedCompData: e,\n        hFOV: e.horizontalFieldOfView,\n        vFOV: e.verticalFieldOfView,\n        tilt: e.tilt\n      } : null;\n    }, e => {\n      null != e && this._fieldOfViewManipulation.updateManipulatorVisuals(e.viewshedCompData);\n    }, p), o(() => this.analysisViewData.visible && (this.viewshedComputedData?.isValid() ?? !1) && !this.parentTool.placingTarget, e => this._updateManipulationAvailability(e), p), o(() => {\n      const e = this.viewshedComputedData;\n      if (!e?.isValid()) return null;\n      const {\n        observer: i,\n        target: t,\n        verticalFieldOfView: a,\n        horizontalFieldOfView: s\n      } = e;\n      return {\n        viewshedCompData: e,\n        observer: i,\n        target: t,\n        verticalFieldOfView: a,\n        horizontalFieldOfView: s\n      };\n    }, e => {\n      null != e && this._scaleOrientManipulation.updateManipulators(e.viewshedCompData);\n    }, p), o(() => this.viewshedComputedData?.observerRenderSpace, e => {\n      null != e && this._updateMoveHelperVisualsLocation(e);\n    }, p)]);\n    const e = e => {\n      this.addHandles([e.events.on(\"focus-changed\", () => this._updateManipulatorVisibility()), e.events.on(\"grab-changed\", e => {\n        this._grabbing = \"start\" === e.action;\n      })]);\n    };\n    this._forEachManipulator(e);\n  }\n  destroy() {\n    this._moveManipulation = l(this._moveManipulation), this._fieldOfViewManipulation = l(this._fieldOfViewManipulation), this._scaleOrientManipulation = l(this._scaleOrientManipulation), this.parentTool.manipulators.remove(this._observerManipulator), this._observerManipulator = l(this._observerManipulator), this._destroyMoveHelperVisuals();\n  }\n  get viewshed() {\n    return this.viewshedComputedData?.viewshed;\n  }\n  get grabbing() {\n    return this._grabbing;\n  }\n  get observer() {\n    return this.viewshed?.observer;\n  }\n  set observer(e) {\n    const i = this.viewshed;\n    null != i && (i.observer = e);\n  }\n  get discManipulator() {\n    return this._moveManipulation.xyManipulation.discManipulator;\n  }\n  onManipulatorSelectionChanged() {\n    this._updateManipulatorVisibility();\n  }\n  hasManipulator(e) {\n    let i = !1;\n    return this._forEachManipulator(t => {\n      i = i || t === e;\n    }), i;\n  }\n  _someManipulatorSelected() {\n    return this._moveManipulation.selected || this._fieldOfViewManipulation.selected || this._scaleOrientManipulation.selected;\n  }\n  _someManipulatorHovering() {\n    return this._moveManipulation.hovering || this._fieldOfViewManipulation.hovering || this._scaleOrientManipulation.hovering;\n  }\n  _createMoveManipulation() {\n    return new D({\n      view: this.view,\n      tool: this.parentTool,\n      snapToScene: !1,\n      xyAvailable: !0,\n      xyAxisAvailable: !0,\n      zAvailable: !0,\n      radius: y\n    });\n  }\n  _buildObserverDragPipeline(e) {\n    const i = {\n        mode: \"absolute-height\",\n        offset: 0\n      },\n      t = e.observer;\n    return null == t ? null : this._moveManipulation.createDragPipeline((i, t, a, s, n) => {\n      s = s.next(T(this, [\"observer\"]));\n      const l = e.observer.clone();\n      if (null == l) return {\n        steps: a,\n        cancel: s\n      };\n      const o = F.fromGeometry(l, M(this.view.viewingMode));\n      return {\n        steps: a.next(C({\n          operations: o\n        })).next(e => (this.observer = f(o.data.geometry, l.spatialReference), e)),\n        cancel: s\n      };\n    }, i, t.spatialReference, void 0);\n  }\n  _buildFOVDragPipeline(e) {\n    let i = 0,\n      t = 0;\n    return this._fieldOfViewManipulation.createDragPipeline((s, n, l) => {\n      if (null == e) return {\n        steps: n,\n        cancel: l\n      };\n      const o = e.viewshed;\n      l = l.next(T(e, [\"horizontalFieldOfView\", \"verticalFieldOfView\"]));\n      return {\n        steps: n.next(s => {\n          \"start\" === s.action && (i = e.horizontalFieldOfView, t = e.verticalFieldOfView);\n          const n = s.deltaAngle;\n          let l = 0;\n          switch (s.side) {\n            case \"left\":\n              l = i / 2 - n;\n              break;\n            case \"right\":\n              l = i / 2 + n;\n              break;\n            case \"top\":\n              l = t + 2 * n;\n              break;\n            case \"bottom\":\n              l = t - 2 * n;\n          }\n          return w(s.side) ? (l = a.normalize(l), l = l > 270 ? 0 : l > 180 ? 180 : l, o.horizontalFieldOfView = 2 * l) : o.verticalFieldOfView = l, s;\n        }),\n        cancel: l\n      };\n    }, e);\n  }\n  _buildScaleOrientDragPipeline(e) {\n    let i = 0,\n      t = 0;\n    const s = (i, t) => (a, s, n) => {\n      if (null == e) return {\n        steps: s,\n        cancel: n\n      };\n      const l = e.viewshed;\n      return n = n.next(T(l, [i])), {\n        steps: s = s.next(t(l, e)),\n        cancel: n\n      };\n    };\n    return n([this._scaleOrientManipulation.createHeadingDragPipeline(s(\"heading\", (i, s) => s => (\"start\" === s.action && (t = e.heading), i.heading = a.normalize(t + s.deltaAngle), s)), e), this._scaleOrientManipulation.createTiltDragPipeline(s(\"tilt\", (t, a) => a => {\n      \"start\" === a.action && (i = e.tilt);\n      let s = i + a.deltaAngle;\n      return s < -90 ? s = 180 : s > 270 && (s = 0), t.tilt = A.clamp(s), a;\n    }), e), this._scaleOrientManipulation.createDistanceDragPipeline(s(\"farDistance\", (e, i) => t => {\n      const a = d(z, t.renderEnd, i.observerRenderSpace),\n        s = c(a) * i.metersPerUnit,\n        n = v(a, i.targetDirection) < 0 ? g : s;\n      return e.farDistance = n, t;\n    }), e)]);\n  }\n  _updateManipulationAvailability(e) {\n    this._moveManipulation.available = e, this._fieldOfViewManipulation.available = e, this._scaleOrientManipulation.available = e, this._observerManipulator.available = e;\n  }\n  _updateManipulatorVisibility() {\n    const e = this._someManipulatorSelected() || this._someManipulatorHovering() && null == this.view.activeTool;\n    if (e) this.removeHandles(P);else {\n      const e = [],\n        i = i => {\n          e.push(i.disableDisplay());\n        };\n      this._forEachManipulator(i), this.addHandles(e, P);\n    }\n    this._updateMoveHelperVisualsVisibility(e);\n  }\n  _forEachManipulator(e) {\n    this._moveManipulation.forEachManipulator(e), this._fieldOfViewManipulation.forEachManipulator(e), this._scaleOrientManipulation.forEachManipulator(e), e(this._observerManipulator);\n  }\n  _createMoveHelperVisuals() {\n    this._destroyMoveHelperVisuals();\n    const e = new H({\n        view: this.view,\n        attached: !0,\n        style: {\n          glowWidth: this._settings.visualElements.heightPlane.glowWidth,\n          innerWidth: this._settings.visualElements.heightPlane.innerWidth\n        },\n        isDecoration: !0\n      }),\n      i = new E({\n        view: this.view,\n        extensionType: this._settings.visualElements.zVerticalLine.extensionType,\n        attached: !0,\n        innerWidth: 1,\n        writeDepthEnabled: !1,\n        renderOccluded: j.OccludeAndTransparent,\n        isDecoration: !0\n      });\n    this._moveHelperVisualElement = {\n      laserline: e,\n      verticalLine: i\n    }, this.addHandles([o(() => this._settings.visualElements.zVerticalLine, e => e.apply(i), r), o(() => this._settings.visualElements.heightPlane, i => i.apply(e), r)]);\n  }\n  _updateMoveHelperVisualsVisibility(e) {\n    e = this.analysisViewData.visible && e;\n    const i = this._moveHelperVisualElement;\n    null != i && (i.verticalLine.visible = e, i.laserline.visible = e);\n  }\n  _updateMoveHelperVisualsLocation(e) {\n    const i = this._moveHelperVisualElement;\n    if (null == i) return;\n    const {\n      laserline: t,\n      verticalLine: a\n    } = i;\n    t.heightManifoldTarget = e, t.intersectsWorldUpAtLocation = e, null != e && a.setStartEndFromWorldDownAtLocation(e);\n  }\n  _destroyMoveHelperVisuals() {\n    const e = this._moveHelperVisualElement;\n    null != e && (e.laserline.destroy(), e.verticalLine.destroy(), this._moveHelperVisualElement = null);\n  }\n  get test() {\n    return {\n      moveManipulation: this._moveManipulation,\n      fieldOfViewManipulation: this._fieldOfViewManipulation,\n      scaleOrientManipulation: this._scaleOrientManipulation,\n      moveHelperVisualElements: this._moveHelperVisualElement,\n      viewshedComputedData: this.viewshedComputedData\n    };\n  }\n};\ne([u({\n  constructOnly: !0\n})], S.prototype, \"analysis\", void 0), e([u({\n  constructOnly: !0\n})], S.prototype, \"analysisViewData\", void 0), e([u({\n  constructOnly: !0\n})], S.prototype, \"parentTool\", void 0), e([u({\n  constructOnly: !0,\n  nonNullable: !0\n})], S.prototype, \"view\", void 0), e([u()], S.prototype, \"viewshed\", null), e([u()], S.prototype, \"_grabbing\", void 0), e([u()], S.prototype, \"grabbing\", null), e([u()], S.prototype, \"viewshedComputedData\", void 0), e([u()], S.prototype, \"observer\", null), S = e([h(\"esri.views.3d.analysis.Viewshed.ViewshedSubTool\")], S);\nconst z = m(),\n  A = new s(0, 180);\nexport { S as ViewshedSubTool };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport t from \"../../../../analysis/Viewshed.js\";\nimport { rad2deg as s } from \"../../../../core/mathUtils.js\";\nimport { destroyMaybe as i } from \"../../../../core/maybe.js\";\nimport { watch as o, syncAndInitial as a, sync as l, mapCollection as n } from \"../../../../core/reactiveUtils.js\";\nimport { property as r } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as d } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as c } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { z as h, H as u, s as p, d as m, m as g } from \"../../../../chunks/vec32.js\";\nimport { create as w } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { create as _, fromPositionAndNormal as v, projectPoint as b } from \"../../../../geometry/support/plane.js\";\nimport { ViewshedSubTool as y } from \"./ViewshedSubTool.js\";\nimport { AnalysisToolBase as f } from \"../../../interactive/AnalysisToolBase.js\";\nimport { sketchKeys as V } from \"../../../interactive/keybindings.js\";\nimport { newToolIntersector as T } from \"../../../interactive/ToolIntersector.js\";\nimport { createScreenPointArrayFromEvent as M } from \"../../../support/screenUtils.js\";\nimport S from \"../../../../geometry/Point.js\";\nvar H;\nlet C = H = class extends f {\n  constructor(e) {\n    super(e), this.removeIncompleteOnCancel = !1, this.automaticManipulatorSelection = !1, this._stagedViewshed = null, this._stagedViewshedComputedData = null, this._creating = !1, this._selectedManipulator = null, this._selectedManipulatorSubTool = null;\n  }\n  initialize() {\n    this._intersector = T(this.view.state.viewingMode);\n    const e = this.analysisViewData.viewshedComputedDataHandles;\n    this.addHandles([o(() => e.some(e => e.viewshedComputedData.isValid()), e => {\n      e && this.finishToolCreation();\n    }, a), o(() => this._stagedViewshed, e => {\n      this._stagedViewshedComputedData = null != e ? this.analysisViewData.viewshedComputedDataHandles.find(t => t.viewshedComputedData.viewshed === e)?.viewshedComputedData : null;\n    }, a), o(() => this.firstGrabbedManipulator, e => {\n      null != e && this._selectManipulator(e);\n    }, l), o(() => this.analysisViewData.visible, e => {\n      e || this._selectManipulator(null);\n    }), o(() => this.view.activeTool, e => {\n      e !== this && null != e && this._selectManipulator(null);\n    })]), this.subToolHandles = n(() => e, ({\n      viewshedComputedData: e\n    }) => {\n      const t = new y({\n        analysis: this.analysis,\n        analysisViewData: this.analysisViewData,\n        parentTool: this,\n        view: this.view,\n        viewshedComputedData: e\n      });\n      return {\n        subTool: t,\n        remove: () => {\n          this._selectedManipulatorSubTool === t && this._selectManipulator(null), t.destroy();\n        }\n      };\n    });\n  }\n  destroy() {\n    this.subToolHandles = i(this.subToolHandles);\n  }\n  onDeactivate() {\n    this.removeStaged();\n  }\n  get cursor() {\n    return this.creating ? \"crosshair\" : null;\n  }\n  _selectManipulator(e) {\n    const t = this._selectedManipulator;\n    null != t && (t.selected = !1, this._selectedManipulator = null, this._selectedManipulatorSubTool?.onManipulatorSelectionChanged(), this._selectedManipulatorSubTool = null), null != e && (e.selected = !0, this._selectedManipulator = e, this._selectedManipulatorSubTool = this.subToolHandles.find(t => t.subTool.hasManipulator(e))?.subTool, this._selectedManipulatorSubTool?.onManipulatorSelectionChanged());\n  }\n  get selectedViewshed() {\n    return this._selectedManipulatorSubTool?.viewshed;\n  }\n  set selectedViewshed(e) {\n    this.selectViewshed(e);\n  }\n  get selectedViewshedComputedData() {\n    return this._selectedManipulatorSubTool?.viewshedComputedData;\n  }\n  get stagedViewshed() {\n    return this._stagedViewshed;\n  }\n  get grabbing() {\n    return this.subToolHandles.some(({\n      subTool: e\n    }) => e.grabbing);\n  }\n  get creating() {\n    return this._creating && this.active;\n  }\n  get placingTarget() {\n    return null != this._stagedViewshed;\n  }\n  createViewsheds() {\n    this._creating = !0;\n  }\n  onManipulatorSelectionChanged() {\n    this.subToolHandles.forEach(e => e.subTool.onManipulatorSelectionChanged());\n  }\n  onInputEvent(e) {\n    switch (e.type) {\n      case \"immediate-click\":\n        this._clickDeselectHandler();\n        break;\n      case \"immediate-double-click\":\n        this._doubleClickHandler(e);\n        break;\n      case \"pointer-move\":\n        this._pointerMoveHandler(e);\n        break;\n      case \"key-down\":\n        V.cancel === e.key ? this._cancelKeyHandler(e) : V.delete.includes(e.key) && this._deleteKeyHandler();\n    }\n  }\n  onInputEventAfter(e) {\n    if (\"immediate-click\" === e.type) this._clickPlacementHandler(e);\n  }\n  _clickDeselectHandler() {\n    this.hasFocusedManipulators || this._selectManipulator(null);\n  }\n  _clickPlacementHandler(e) {\n    if (!this.creating || this.hasFocusedManipulators) return;\n    const s = this._stagedViewshed,\n      i = this._intersectScreen(e, R);\n    if (null != i) {\n      if (null == s) {\n        i.mapPoint.z = (i.mapPoint.z ?? 0) + 2;\n        const e = new t({\n          observer: i.mapPoint.clone()\n        });\n        this.analysis.viewsheds.add(e), this._stagedViewshed = e, this._updateStagedViewshed(i.scenePoint);\n      } else {\n        this._updateStagedViewshed(i.scenePoint);\n        const e = this._stagedViewshed;\n        this._stagedViewshed = null, this.selectViewshed(e);\n      }\n      e.stopPropagation();\n    }\n  }\n  _doubleClickHandler(e) {\n    this.creating && (this.removeStaged(), this._selectManipulator(null), this._creating = !1, this.view.activeTool = null, e.stopPropagation());\n  }\n  _pointerMoveHandler(e) {\n    if (!this.creating || null == this._stagedViewshed) return;\n    const t = this._intersectScreen(e, R);\n    null != t && this._updateStagedViewshed(t.scenePoint);\n  }\n  _cancelKeyHandler(e) {\n    if (this.creating) {\n      if (this.removeStaged()) return this._selectManipulator(null), void e.stopPropagation();\n      this._creating = !1;\n    } else if (!this.grabbing) return this.selectViewshed(null), void e.stopPropagation();\n  }\n  _deleteKeyHandler() {\n    this.creating && this.removeStaged(), null != this.selectedViewshed && this.analysis.viewsheds.remove(this.selectedViewshed);\n  }\n  _updateStagedViewshed(e) {\n    const t = this._stagedViewshed,\n      s = this._stagedViewshedComputedData;\n    if (null == t || null == s) return;\n    const {\n      heading: i,\n      tilt: o,\n      farDistance: a\n    } = D(this.view, s, e);\n    t.farDistance = a, t.tilt = o, t.heading = i;\n  }\n  removeStaged() {\n    return null != this._stagedViewshed && (this.analysis.viewsheds.remove(this._stagedViewshed), this._stagedViewshed = null, !0);\n  }\n  selectViewshed(e) {\n    if (null != e) for (const s of this.view.tools.items) s !== this && s instanceof H && s.selectViewshed(null);\n    const t = this.subToolHandles.find(t => t.subTool.viewshed === e)?.subTool;\n    this._selectManipulator(t?.discManipulator);\n  }\n  _intersectScreen(e, t) {\n    const s = M(e);\n    this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(s, this._intersector);\n    const i = this._intersector.results.min,\n      o = t.scenePoint;\n    if (!i.getIntersectionPoint(o)) return null;\n    const a = t.mapPoint;\n    return a.spatialReference = this.view.spatialReference, this.view.renderCoordsHelper.fromRenderCoords(o, a), null == a ? null : t;\n  }\n  get test() {\n    return {\n      subTools: this.subToolHandles.map(e => e.subTool.test),\n      selectedSubTool: this._selectedManipulatorSubTool?.test,\n      stagedViewshed: this._stagedViewshed\n    };\n  }\n};\nfunction D(e, t, i) {\n  const o = t.observerRenderSpace,\n    a = h(j, i, o),\n    l = u(a) * t.metersPerUnit,\n    n = e.renderCoordsHelper.basisMatrixAtPosition(o, x),\n    r = p(P, n[8], n[9], n[10]),\n    d = v(o, r, O),\n    c = b(d, i, k),\n    w = h(c, c, o),\n    _ = s(m(a, w)) * (g(r, a) < 0 ? -1 : 1) + 90,\n    y = p(I, n[4], n[5], n[6]),\n    f = s(m(y, w)),\n    V = p(I, n[0], n[1], n[2]);\n  return {\n    heading: g(w, V) < 0 ? 360 - f : f,\n    tilt: _,\n    farDistance: l\n  };\n}\ne([r({\n  constructOnly: !0\n})], C.prototype, \"view\", void 0), e([r()], C.prototype, \"analysisViewData\", void 0), e([r()], C.prototype, \"removeIncompleteOnCancel\", void 0), e([r()], C.prototype, \"automaticManipulatorSelection\", void 0), e([r({\n  constructOnly: !0\n})], C.prototype, \"analysis\", void 0), e([r()], C.prototype, \"subToolHandles\", void 0), e([r()], C.prototype, \"_stagedViewshed\", void 0), e([r()], C.prototype, \"_stagedViewshedComputedData\", void 0), e([r()], C.prototype, \"_creating\", void 0), e([r({\n  readOnly: !0\n})], C.prototype, \"cursor\", null), e([r()], C.prototype, \"_selectedManipulator\", void 0), e([r()], C.prototype, \"_selectedManipulatorSubTool\", void 0), e([r()], C.prototype, \"selectedViewshed\", null), e([r()], C.prototype, \"selectedViewshedComputedData\", null), e([r()], C.prototype, \"grabbing\", null), e([r()], C.prototype, \"creating\", null), e([r()], C.prototype, \"placingTarget\", null), C = H = e([d(\"esri.views.3d.analysis.Viewshed.ViewshedTool\")], C);\nconst j = w(),\n  P = w(),\n  k = w(),\n  I = w(),\n  x = c(),\n  O = _(),\n  R = {\n    mapPoint: new S(),\n    scenePoint: w()\n  },\n  z = C;\nexport { z as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport s from \"../../../core/Accessor.js\";\nimport { abortMaybe as i, destroyMaybe as t } from \"../../../core/maybe.js\";\nimport { mapCollection as o, watch as a, initial as d } from \"../../../core/reactiveUtils.js\";\nimport { property as r } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as l } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { AnalysisView3D as n } from \"./AnalysisView3D.js\";\nimport { ViewshedAnalysisVisualization as h } from \"./Viewshed/ViewshedAnalysisVisualization.js\";\nimport { ViewshedComputedData as p } from \"./Viewshed/ViewshedComputedData.js\";\nimport m from \"./Viewshed/ViewshedTool.js\";\nimport { Viewshed as w } from \"../webgl-engine/lib/Viewshed.js\";\nimport { connectAnalysisViewToTool as c, removeAnalysisViewTool as u, activateAnalysisViewTool as V } from \"../../analysis/analysisViewUtils.js\";\nlet v = class extends n(s) {\n  constructor(e) {\n    super(e), this.type = \"viewshed-view-3d\", this.analysis = null, this.tool = null, this.viewshedComputedDataHandles = null, this._placementTask = null;\n  }\n  get selectedViewshed() {\n    return this.tool?.selectedViewshed;\n  }\n  set selectedViewshed(e) {\n    const {\n      tool: s\n    } = this;\n    null != s && (s.selectedViewshed = e);\n  }\n  get selectedViewshedComputedData() {\n    return this.tool?.selectedViewshedComputedData;\n  }\n  initialize() {\n    this._initializeUpdateHandle(), this.viewshedComputedDataHandles = o(() => this.analysis.viewsheds, e => {\n      const s = new p({\n          renderCoordsHelper: this.view.renderCoordsHelper,\n          viewshed: e\n        }),\n        i = Symbol();\n      return this.addHandles(a(() => s.isValid(), (e, i) => {\n        this.visible && (e ? this._addViewshedsToRenderer(s) : i && this._removeViewshedsFromRenderer(s));\n      }, d)), {\n        viewshedComputedData: s,\n        remove: () => {\n          this.removeHandles(i), this._removeViewshedsFromRenderer(s), s.destroy();\n        }\n      };\n    }), this._analysisVisualization = new h({\n      view: this.view,\n      analysisViewData: this,\n      isDecoration: !this.parent\n    }), this.addHandles([a(() => this.visible, e => {\n      const s = this.viewshedComputedDataHandles.map(e => e.viewshedComputedData).filter(e => e.isValid());\n      e ? this._addViewshedsToRenderer(s) : this._removeViewshedsFromRenderer(s);\n    }), a(() => this.view.renderCoordsHelper, e => {\n      this.viewshedComputedDataHandles.forEach(({\n        viewshedComputedData: s\n      }) => s.renderCoordsHelper = e);\n    }), c(this, m)]);\n  }\n  destroy() {\n    this._placementTask = i(this._placementTask), u(this), this._analysisVisualization = t(this._analysisVisualization), this._removeViewshedsFromRenderer(this.viewshedComputedDataHandles.map(e => e.viewshedComputedData));\n  }\n  async createViewsheds(e) {\n    return this._placementTask = i(this._placementTask), this._placementTask = V(this, e), null != this.tool && this.tool.createViewsheds(), await this._placementTask.promise;\n  }\n  _initializeUpdateHandle() {\n    const e = this.view._stage.renderer.plugins.plugins.find(e => e instanceof w);\n    e && (this._updateHandleInRenderer = e.updateViewsheds.bind(e));\n  }\n  _addViewshedsToRenderer(e) {\n    this._updateHandleInRenderer({\n      adds: e\n    });\n  }\n  _removeViewshedsFromRenderer(e) {\n    this._updateHandleInRenderer({\n      removes: e\n    });\n  }\n};\ne([r({\n  readOnly: !0\n})], v.prototype, \"type\", void 0), e([r({\n  constructOnly: !0,\n  nonNullable: !0\n})], v.prototype, \"analysis\", void 0), e([r()], v.prototype, \"tool\", void 0), e([r()], v.prototype, \"selectedViewshed\", null), e([r()], v.prototype, \"selectedViewshedComputedData\", null), e([r()], v.prototype, \"viewshedComputedDataHandles\", void 0), e([r()], v.prototype, \"_analysisVisualization\", void 0), e([r()], v.prototype, \"_placementTask\", void 0), v = e([l(\"esri.views.3d.analysis.ViewshedAnalysisView3D\")], v);\nconst y = v;\nexport { y as default };"],
  "mappings": "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",
  "names": ["b", "t", "r", "e", "o", "i", "O", "d", "r", "e", "o", "s", "a", "_", "O", "w", "x", "t", "i", "n", "h", "R", "u", "O", "t", "h", "e", "f", "i", "s", "o", "r", "a", "x", "l", "n", "c", "p", "S", "d", "g", "L", "y", "j", "C", "D", "n", "s", "i", "e", "a", "S", "v", "e", "t", "o", "i", "s", "n", "g", "w", "u", "r", "_", "j", "H", "l", "x", "h", "d", "D", "U", "f", "z", "m", "V", "C", "b", "p", "a", "O", "c", "R", "P", "y", "k", "c", "e", "a", "r", "s", "m", "c", "e", "l", "f", "n", "p", "P", "t", "e", "r", "o", "i", "p", "a", "n", "s", "l", "H", "c", "A", "u", "d", "C", "M", "b", "y", "J", "g", "K", "k", "w", "j", "x", "O", "z", "h", "G", "m", "L", "q", "U", "e", "r", "o", "i", "t", "u", "h", "j", "G", "b", "v", "s", "M", "x", "_", "g", "C", "y", "T", "F", "O", "D", "d", "l", "f", "R", "t", "i", "U", "m", "c", "a", "p", "e", "r", "o", "n", "s", "l", "h", "u", "A", "g", "O", "d", "_", "v", "M", "H", "b", "f", "C", "y", "S", "l", "r", "o", "n", "i", "f", "e", "u", "x", "P", "S", "e", "j", "R", "l", "i", "a", "t", "s", "u", "o", "n", "h", "E", "f", "K", "A", "z", "c", "H", "C", "o", "e", "t", "S", "p", "s", "i", "R", "a", "D", "c", "j", "l", "n", "x", "r", "P", "d", "O", "J", "k", "w", "_", "y", "I", "f", "V", "z", "v", "s", "e", "i", "n", "a", "z", "l", "C", "y"]
}
