{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/core/AsyncSequence.js", "../../../../../../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile.js", "../../../../../../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher.js", "../../../../../../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache.js", "../../../../../../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js", "../../../../../../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as s } from \"../chunks/tslib.es6.js\";\nimport t from \"./Accessor.js\";\nimport { property as e } from \"./accessorSupport/decorators/property.js\";\nimport { subclass as i } from \"./accessorSupport/decorators/subclass.js\";\nlet r = class extends t {\n  constructor() {\n    super(...arguments), this.updating = !1, this._pending = [];\n  }\n  push(s, t) {\n    this._pending.push({\n      promise: s,\n      callback: t\n    }), 1 === this._pending.length && this._process();\n  }\n  _process() {\n    if (!this._pending.length) return void (this.updating = !1);\n    this.updating = !0;\n    const s = this._pending[0];\n    s.promise.then(t => s.callback(t)).catch(() => {}).then(() => {\n      this._pending.shift(), this._process();\n    });\n  }\n};\ns([e()], r.prototype, \"updating\", void 0), r = s([i(\"esri.core.AsyncSequence\")], r);\nexport { r as AsyncSequence };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { createTask as t, resultOrAbort as e } from \"../../../../../core/asyncUtils.js\";\nimport { create as s, fromExtent as a, intersects as E } from \"../../../../../geometry/support/aaBoundingRect.js\";\nclass r {\n  constructor(t, e) {\n    this.data = t, this.resolution = e, this.state = {\n      type: i.CREATED\n    }, this.alive = !0;\n  }\n  process(t) {\n    switch (this.state.type) {\n      case i.CREATED:\n        return this.state = this._gotoFetchCount(this.state, t), this.state.task.promise.then(t.resume, t.resume);\n      case i.FETCH_COUNT:\n        break;\n      case i.FETCHED_COUNT:\n        return this.state = this._gotoFetchFeatures(this.state, t), this.state.task.promise.then(t.resume, t.resume);\n      case i.FETCH_FEATURES:\n        break;\n      case i.FETCHED_FEATURES:\n        this.state = this._goToDone(this.state, t);\n      case i.DONE:\n    }\n    return null;\n  }\n  get debugInfo() {\n    return {\n      data: this.data,\n      featureCount: this._featureCount,\n      state: this._stateToString\n    };\n  }\n  get _featureCount() {\n    switch (this.state.type) {\n      case i.CREATED:\n      case i.FETCH_COUNT:\n        return 0;\n      case i.FETCHED_COUNT:\n        return this.state.featureCount;\n      case i.FETCH_FEATURES:\n        return this.state.previous.featureCount;\n      case i.FETCHED_FEATURES:\n        return this.state.features.length;\n      case i.DONE:\n        return this.state.previous.features.length;\n    }\n  }\n  get _stateToString() {\n    switch (this.state.type) {\n      case i.CREATED:\n        return \"created\";\n      case i.FETCH_COUNT:\n        return \"fetch-count\";\n      case i.FETCHED_COUNT:\n        return \"fetched-count\";\n      case i.FETCH_FEATURES:\n        return \"fetch-features\";\n      case i.FETCHED_FEATURES:\n        return \"fetched-features\";\n      case i.DONE:\n        return \"done\";\n    }\n  }\n  _gotoFetchCount(s, a) {\n    return {\n      type: i.FETCH_COUNT,\n      previous: s,\n      task: t(async t => {\n        const s = await e(a.fetchCount(this, t));\n        this.state.type === i.FETCH_COUNT && (this.state = u(this.state, s.ok ? s.value : 1 / 0));\n      })\n    };\n  }\n  _gotoFetchFeatures(s, a) {\n    return {\n      type: i.FETCH_FEATURES,\n      previous: s,\n      task: t(async t => {\n        const E = await e(a.fetchFeatures(this, s.featureCount, t));\n        this.state.type === i.FETCH_FEATURES && (this.state = T(this.state, E.ok ? E.value : []));\n      })\n    };\n  }\n  _goToDone(t, e) {\n    return e.finish(this, t.features), {\n      type: i.DONE,\n      previous: t\n    };\n  }\n  reset() {\n    const t = this.state;\n    switch (this.state = {\n      type: i.CREATED\n    }, t.type) {\n      case i.CREATED:\n      case i.FETCHED_COUNT:\n      case i.FETCHED_FEATURES:\n      case i.DONE:\n        break;\n      case i.FETCH_COUNT:\n      case i.FETCH_FEATURES:\n        t.task.abort();\n    }\n  }\n  intersects(t) {\n    return null == t || !this.data.extent || (a(t, n), E(this.data.extent, n));\n  }\n}\nfunction u(t, e) {\n  return {\n    type: i.FETCHED_COUNT,\n    featureCount: e,\n    previous: t\n  };\n}\nfunction T(t, e) {\n  return {\n    type: i.FETCHED_FEATURES,\n    previous: t,\n    features: e\n  };\n}\nvar i;\n!function (t) {\n  t[t.CREATED = 0] = \"CREATED\", t[t.FETCH_COUNT = 1] = \"FETCH_COUNT\", t[t.FETCHED_COUNT = 2] = \"FETCHED_COUNT\", t[t.FETCH_FEATURES = 3] = \"FETCH_FEATURES\", t[t.FETCHED_FEATURES = 4] = \"FETCHED_FEATURES\", t[t.DONE = 5] = \"DONE\";\n}(i || (i = {}));\nconst n = s();\nexport { r as PendingFeatureTile, i as StateType };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport { equals as i } from \"../../../../../core/arrayUtils.js\";\nimport { AsyncSequence as s } from \"../../../../../core/AsyncSequence.js\";\nimport { createTask as r } from \"../../../../../core/asyncUtils.js\";\nimport { makeHandle as o } from \"../../../../../core/handleUtils.js\";\nimport n from \"../../../../../core/Logger.js\";\nimport { throwIfAbortError as l } from \"../../../../../core/promiseUtils.js\";\nimport { sync as a, when as u } from \"../../../../../core/reactiveUtils.js\";\nimport { union as d, equals as c, isSubsetOf as h, difference as p } from \"../../../../../core/SetUtils.js\";\nimport { property as f } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport { subclass as y } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { UpdatingHandles as g } from \"../../../../../core/support/UpdatingHandles.js\";\nimport _ from \"../../../../../geometry/Extent.js\";\nimport { toExtent as m } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { unquantizeOptimizedFeatureSet as F, convertFromFeatureSet as b } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { isHostedAgolService as T } from \"../../../../../layers/support/arcgisLayerUrl.js\";\nimport { OptimizedFeatureSetParserContext as P } from \"../../../../../rest/query/operations/pbfOptimizedFeatureSet.js\";\nimport { executeQueryForExtent as I, executeQueryPBF as v, executeQuery as O } from \"../../../../../rest/query/operations/query.js\";\nimport S from \"../../../../../rest/support/Query.js\";\nimport { StateType as C, PendingFeatureTile as E } from \"./PendingFeatureTile.js\";\nlet x = class extends t {\n  get _minimumVerticesPerFeature() {\n    switch (this.store?.featureStore.geometryType) {\n      case \"esriGeometryPoint\":\n      case \"esriGeometryMultipoint\":\n        return 1;\n      case \"esriGeometryPolygon\":\n        return 4;\n      case \"esriGeometryPolyline\":\n        return 2;\n    }\n  }\n  get _mandatoryOutFields() {\n    const e = new Set();\n    return this.objectIdField && e.add(this.objectIdField), this.globalIdField && e.add(this.globalIdField), e;\n  }\n  set outFields(e) {\n    const t = this._get(\"outFields\"),\n      i = d(e, this._mandatoryOutFields);\n    c(i, t) || (this._set(\"outFields\", i), h(i, t) || this.refresh());\n  }\n  get outFields() {\n    return this._get(\"outFields\") ?? this._mandatoryOutFields;\n  }\n  set filter(e) {\n    const t = this._get(\"filter\"),\n      i = this._filterProperties(e);\n    JSON.stringify(t) !== JSON.stringify(i) && this._set(\"filter\", i);\n  }\n  set customParameters(e) {\n    const t = this._get(\"customParameters\");\n    JSON.stringify(t) !== JSON.stringify(e) && this._set(\"customParameters\", e);\n  }\n  get _configuration() {\n    return {\n      filter: this.filter,\n      customParameters: this.customParameters,\n      tileInfo: this.tileInfo,\n      tileSize: this.tileSize\n    };\n  }\n  set tileInfo(e) {\n    const t = this._get(\"tileInfo\");\n    t !== e && (null != e && null != t && JSON.stringify(e) === JSON.stringify(t) || (this._set(\"tileInfo\", e), this.store.tileInfo = e));\n  }\n  set tileSize(e) {\n    this._get(\"tileSize\") !== e && this._set(\"tileSize\", e);\n  }\n  get updating() {\n    return this.updatingExcludingEdits || this._pendingEdits.updating;\n  }\n  get updatingExcludingEdits() {\n    return this._updatingHandles.updating;\n  }\n  get hasZ() {\n    return this.store.featureStore.hasZ;\n  }\n  constructor(e) {\n    super(e), this.suspended = !0, this.tilesOfInterest = [], this.availability = 0, this._pendingTiles = new Map(), this._updatingHandles = new g(), this._pendingEdits = new s(), this._pendingEditsAbortController = new AbortController();\n  }\n  initialize() {\n    this._initializeFetchExtent(), this._updatingHandles.add(() => this._configuration, () => this.refresh()), this._updatingHandles.add(() => this.tilesOfInterest, (e, t) => {\n      i(e, t, ({\n        id: e\n      }, {\n        id: t\n      }) => e === t) || this._process();\n    }, a), this.addHandles(u(() => !this.suspended, () => this._process()));\n  }\n  destroy() {\n    this._pendingTiles.forEach(e => this._deletePendingTile(e)), this._pendingTiles.clear(), this.store.destroy(), this.tilesOfInterest.length = 0, this._pendingEditsAbortController.abort(), this._pendingEditsAbortController = null, this._updatingHandles.destroy();\n  }\n  refresh() {\n    this.store.refresh(), this._pendingTiles.forEach(e => this._deletePendingTile(e)), this._process();\n  }\n  applyEdits(e) {\n    this._pendingEdits.push(e, async e => {\n      if (0 === e.addedFeatures.length && 0 === e.updatedFeatures.length && 0 === e.deletedFeatures.length) return;\n      for (const [, i] of this._pendingTiles) i.reset();\n      const t = {\n        ...e,\n        deletedFeatures: e.deletedFeatures.map(({\n          objectId: e,\n          globalId: t\n        }) => e && -1 !== e ? e : this._lookupObjectIdByGlobalId(t))\n      };\n      await this._updatingHandles.addPromise(this.store.processEdits(t, (e, t) => this._queryFeaturesById(e, t), this._pendingEditsAbortController.signal)), this._processPendingTiles();\n    });\n  }\n  _initializeFetchExtent() {\n    if (!this.capabilities.query.supportsExtent || !T(this.url)) return;\n    const e = r(async e => {\n      try {\n        const t = await I(this.url, new S({\n          where: \"1=1\",\n          outSpatialReference: this.spatialReference,\n          cacheHint: this.capabilities.query.supportsCacheHint ?? void 0\n        }), {\n          query: this._configuration.customParameters,\n          signal: e\n        });\n        this.store.extent = _.fromJSON(t.data?.extent);\n      } catch (t) {\n        l(t), n.getLogger(this).warn(\"Failed to fetch data extent\", t);\n      }\n    });\n    this._updatingHandles.addPromise(e.promise.then(() => this._process())), this.addHandles(o(() => e.abort()));\n  }\n  get debugInfo() {\n    return {\n      numberOfFeatures: this.store.featureStore.numFeatures,\n      tilesOfInterest: this.tilesOfInterest,\n      pendingTiles: Array.from(this._pendingTiles.values()).map(e => e.debugInfo),\n      storedTiles: this.store.debugInfo\n    };\n  }\n  _process() {\n    this._markTilesNotAlive(), this._createPendingTiles(), this._deletePendingTiles(), this._processPendingTiles();\n  }\n  _markTilesNotAlive() {\n    for (const [, e] of this._pendingTiles) e.alive = !1;\n  }\n  _createPendingTiles() {\n    if (this.suspended) return;\n    const e = this._collectMissingTilesInfo();\n    if (this._setAvailability(null == e ? 1 : e.coveredArea / e.fullArea), null != e) for (const {\n      data: t,\n      resolution: i\n    } of e.missingTiles) {\n      const e = this._pendingTiles.get(t.id);\n      e ? (e.resolution = i, e.alive = !0) : this._createPendingTile(t, i);\n    }\n  }\n  _collectMissingTilesInfo() {\n    let e = null;\n    for (let t = this.tilesOfInterest.length - 1; t >= 0; t--) {\n      const i = this.tilesOfInterest[t],\n        s = this.store.process(i, (e, t) => this._verifyTileComplexity(e, t), this.outFields);\n      null == e ? e = s : e.prepend(s);\n    }\n    return e;\n  }\n  _deletePendingTiles() {\n    for (const [, e] of this._pendingTiles) e.alive || this._deletePendingTile(e);\n  }\n  _processPendingTiles() {\n    const e = {\n      fetchCount: (e, t) => this._fetchCount(e, t),\n      fetchFeatures: (e, t, i) => this._fetchFeatures(e, t, i),\n      finish: (e, t) => this._finishPendingTile(e, t),\n      resume: () => this._processPendingTiles()\n    };\n    if (this._ensureFetchAllCounts(e)) for (const [, t] of this._pendingTiles) this._verifyTileComplexity(this.store.getFeatureCount(t.data), t.resolution) && this._updatingHandles.addPromise(t.process(e));\n  }\n  _verifyTileComplexity(e, t) {\n    return this._verifyVertexComplexity(e) && this._verifyFeatureDensity(e, t);\n  }\n  _verifyVertexComplexity(e) {\n    return e * this._minimumVerticesPerFeature < q;\n  }\n  _verifyFeatureDensity(e, t) {\n    if (null == this.tileInfo) return !1;\n    const i = this.tileSize * t;\n    return e * (A / (i * i)) < H;\n  }\n  _ensureFetchAllCounts(e) {\n    let t = !0;\n    for (const [, i] of this._pendingTiles) i.state.type < C.FETCHED_COUNT && this._updatingHandles.addPromise(i.process(e)), i.state.type <= C.FETCH_COUNT && (t = !1);\n    return t;\n  }\n  _finishPendingTile(e, t) {\n    this.store.add(e.data, t), this._deletePendingTile(e), this._updateAvailability();\n  }\n  _updateAvailability() {\n    const e = this._collectMissingTilesInfo();\n    this._setAvailability(null == e ? 1 : e.coveredArea / e.fullArea);\n  }\n  _setAvailability(e) {\n    this._set(\"availability\", e);\n  }\n  _createPendingTile(e, t) {\n    const i = new E(e, t);\n    return this._pendingTiles.set(e.id, i), i;\n  }\n  _deletePendingTile(e) {\n    e.reset(), this._pendingTiles.delete(e.data.id);\n  }\n  async _fetchCount(e, t) {\n    return this.store.fetchCount(e.data, this.url, this._createCountQuery(e), {\n      query: this.customParameters,\n      timeout: w,\n      signal: t\n    });\n  }\n  async _fetchFeatures(e, t, i) {\n    let s = 0;\n    const r = [];\n    let o = 0,\n      n = t;\n    for (;;) {\n      const l = this._createFeaturesQuery(e),\n        a = this._setPagingParameters(l, s, n),\n        {\n          features: u,\n          exceededTransferLimit: d\n        } = await this._queryFeatures(l, i);\n      a && (s += l.num), o += u.length;\n      for (const e of u) r.push(e);\n      if (n = t - o, !a || !d || n <= 0) return r;\n    }\n  }\n  _filterProperties(e) {\n    return null == e ? {\n      where: \"1=1\",\n      gdbVersion: void 0,\n      timeExtent: void 0\n    } : {\n      where: e.where || \"1=1\",\n      timeExtent: e.timeExtent,\n      gdbVersion: e.gdbVersion\n    };\n  }\n  _lookupObjectIdByGlobalId(e) {\n    const t = this.globalIdField,\n      i = this.objectIdField;\n    if (null == t) throw new Error(\"Expected globalIdField to be defined\");\n    let s = null;\n    if (this.store.featureStore.forEach(r => {\n      e === r.attributes[t] && (s = r.objectId ?? r.attributes[i]);\n    }), null == s) throw new Error(`Expected to find a feature with globalId ${e}`);\n    return s;\n  }\n  _queryFeaturesById(e, t) {\n    const i = this._createFeaturesQuery();\n    return i.objectIds = e, this._queryFeatures(i, t);\n  }\n  _queryFeatures(e, t) {\n    return this.capabilities.query.supportsFormatPBF ? this._queryFeaturesPBF(e, t) : this._queryFeaturesJSON(e, t);\n  }\n  async _queryFeaturesPBF(e, t) {\n    const {\n        sourceSpatialReference: i\n      } = this,\n      {\n        data: s\n      } = await v(this.url, e, new P({\n        sourceSpatialReference: i\n      }), {\n        query: this._configuration.customParameters,\n        timeout: w,\n        signal: t\n      });\n    return F(s);\n  }\n  async _queryFeaturesJSON(e, t) {\n    const {\n        sourceSpatialReference: i\n      } = this,\n      {\n        data: s\n      } = await O(this.url, e, i, {\n        query: this._configuration.customParameters,\n        timeout: w,\n        signal: t\n      });\n    return b(s, this.objectIdField);\n  }\n  _createCountQuery(e) {\n    const t = this._createBaseQuery(e);\n    return this.capabilities.query.supportsCacheHint && (t.cacheHint = !0), t;\n  }\n  _createFeaturesQuery(e = null) {\n    const t = this._createBaseQuery(e),\n      i = null != e?.data ? this.store.getAttributesForTile(e?.data?.id) : null,\n      s = d(p(this.outFields, i ?? new Set()), this._mandatoryOutFields);\n    return t.outFields = Array.from(s), t.returnGeometry = !0, null != e && (this.capabilities.query.supportsResultType ? t.resultType = \"tile\" : this.capabilities.query.supportsCacheHint && (t.cacheHint = !0)), t;\n  }\n  _createBaseQuery(e) {\n    const t = new S({\n        returnZ: this.hasZ,\n        returnM: !1,\n        geometry: null != this.tileInfo && null != e ? m(e.data.extent, this.tileInfo.spatialReference) : void 0\n      }),\n      i = this._configuration.filter;\n    return null != i && (t.where = i.where, t.gdbVersion = i.gdbVersion, t.timeExtent = i.timeExtent), t.outSpatialReference = this.spatialReference, t;\n  }\n  _setPagingParameters(e, t, i) {\n    if (!this.capabilities.query.supportsPagination) return !1;\n    const {\n        supportsMaxRecordCountFactor: s,\n        supportsCacheHint: r,\n        tileMaxRecordCount: o,\n        maxRecordCount: n,\n        supportsResultType: l\n      } = this.capabilities.query,\n      a = s ? S.MAX_MAX_RECORD_COUNT_FACTOR : 1,\n      u = a * ((l || r) && o ? o : n || j);\n    return e.start = t, s ? (e.maxRecordCountFactor = Math.min(a, Math.ceil(i / u)), e.num = Math.min(i, e.maxRecordCountFactor * u)) : e.num = Math.min(i, u), !0;\n  }\n};\ne([f({\n  constructOnly: !0\n})], x.prototype, \"url\", void 0), e([f({\n  constructOnly: !0\n})], x.prototype, \"objectIdField\", void 0), e([f({\n  constructOnly: !0\n})], x.prototype, \"globalIdField\", void 0), e([f({\n  constructOnly: !0\n})], x.prototype, \"capabilities\", void 0), e([f({\n  constructOnly: !0\n})], x.prototype, \"sourceSpatialReference\", void 0), e([f({\n  constructOnly: !0\n})], x.prototype, \"spatialReference\", void 0), e([f({\n  constructOnly: !0\n})], x.prototype, \"store\", void 0), e([f({\n  readOnly: !0\n})], x.prototype, \"_minimumVerticesPerFeature\", null), e([f()], x.prototype, \"_mandatoryOutFields\", null), e([f()], x.prototype, \"outFields\", null), e([f()], x.prototype, \"suspended\", void 0), e([f()], x.prototype, \"filter\", null), e([f()], x.prototype, \"customParameters\", null), e([f({\n  readOnly: !0\n})], x.prototype, \"_configuration\", null), e([f()], x.prototype, \"tileInfo\", null), e([f()], x.prototype, \"tileSize\", null), e([f()], x.prototype, \"tilesOfInterest\", void 0), e([f({\n  readOnly: !0\n})], x.prototype, \"updating\", null), e([f({\n  readOnly: !0\n})], x.prototype, \"updatingExcludingEdits\", null), e([f({\n  readOnly: !0\n})], x.prototype, \"availability\", void 0), e([f()], x.prototype, \"hasZ\", null), x = e([y(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher\")], x);\nconst j = 2e3,\n  w = 6e5,\n  q = 1e6,\n  A = 25,\n  H = 1;\nexport { x as FeatureServiceTiledFetcher };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t {\n  constructor() {\n    this._store = new Map(), this._byteSize = 0;\n  }\n  set(t, e) {\n    this.delete(t), this._store.set(t, e), this._byteSize += e.byteSize;\n  }\n  delete(t) {\n    const e = this._store.get(t);\n    return !!this._store.delete(t) && (null != e && (this._byteSize -= e.byteSize), !0);\n  }\n  get(t) {\n    return this._used(t), this._store.get(t);\n  }\n  has(t) {\n    return this._used(t), this._store.has(t);\n  }\n  clear() {\n    this._store.clear();\n  }\n  applyByteSizeLimit(t, e) {\n    for (const [s, r] of this._store) {\n      if (this._byteSize <= t) break;\n      this.delete(s), e(r);\n    }\n  }\n  values() {\n    return this._store.values();\n  }\n  [Symbol.iterator]() {\n    return this._store[Symbol.iterator]();\n  }\n  _used(t) {\n    const e = this._store.get(t);\n    e && (this._store.delete(t), this._store.set(t, e));\n  }\n}\nexport { t as FeatureServiceTileCache };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport { estimateAttributesObjectSize as s, estimateFixedArraySize as i } from \"../../../../../core/byteSizeEstimations.js\";\nimport { ByteSizeUnit as r } from \"../../../../../core/ByteSizeUnit.js\";\nimport \"../../../../../core/has.js\";\nimport { intersection as o, isSubsetOf as n } from \"../../../../../core/SetUtils.js\";\nimport { property as l } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/RandomLCG.js\";\nimport { subclass as c } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as u, intersects as a, fromExtent as h, area as d } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsOptimizedGeometry as f } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { BoundsStore as _ } from \"../../../../../layers/graphics/data/BoundsStore.js\";\nimport p from \"../../../../../layers/support/TileInfo.js\";\nimport { TileKey as m } from \"../../../../../layers/support/TileKey.js\";\nimport { executeQueryForCount as g } from \"../../../../../rest/query/operations/query.js\";\nimport { FeatureServiceTileCache as y } from \"./FeatureServiceTileCache.js\";\nlet v = class extends t {\n  constructor(e) {\n    super(e), this.tileInfo = null, this.extent = null, this.maximumByteSize = 10 * r.MEGABYTES, this._tileBounds = new _(), this._tiles = new y(), this._refCounts = new Map(), this._tileFeatureCounts = new Map(), this._tmpBoundingRect = u();\n  }\n  add(e, t) {\n    for (const r of t) this._referenceFeature(r.objectId);\n    const s = this.featureStore.upsertMany(t),\n      i = s.map(e => new Set(Object.keys(e.attributes))).reduce((e, t) => o(e, t), new Set(Object.keys(s[0]?.attributes ?? [])));\n    this._addTileStorage(e, new Set(s.map(e => e.objectId)), S(s), i), this._tiles.applyByteSizeLimit(this.maximumByteSize, e => this._removeTileStorage(e));\n  }\n  getAttributesForTile(e) {\n    return e ? this._tiles.get(e)?.attributeKeys : null;\n  }\n  destroy() {\n    this.clear(), this._tileFeatureCounts.clear();\n  }\n  clear() {\n    this.featureStore.clear(), this._tileBounds.clear(), this._tiles.clear(), this._refCounts.clear();\n  }\n  refresh() {\n    this.clear(), this._tileFeatureCounts.clear();\n  }\n  processEdits(e, t, s) {\n    return this._processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)), this._processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures), t, s);\n  }\n  _addTileStorage(e, t, s, i) {\n    const r = e.id;\n    this._tiles.set(r, new w(e, t, s, i)), this._tileBounds.set(r, e.extent), this._tileFeatureCounts.set(r, t.size);\n  }\n  _remove({\n    id: e\n  }) {\n    const t = this._tiles.get(e);\n    t && this._removeTileStorage(t);\n  }\n  _removeTileStorage(e) {\n    const t = [];\n    for (const i of e.objectIds) this._unreferenceFeature(i) === x.REMOVED && t.push(i);\n    this.featureStore.removeManyById(t);\n    const s = e.data.id;\n    this._tiles.delete(s), this._tileBounds.delete(s);\n  }\n  _processEditsDelete(e) {\n    this.featureStore.removeManyById(e);\n    for (const [, t] of this._tiles) {\n      for (const s of e) t.objectIds.delete(s);\n      this._tileFeatureCounts.set(t.data.id, t.objectIds.size);\n    }\n    for (const t of e) this._refCounts.delete(t);\n  }\n  async _processEditsRefetch(e, t, s) {\n    const i = (await t(e, s)).features,\n      {\n        hasZ: r,\n        hasM: o\n      } = this.featureStore;\n    for (const n of i) {\n      const e = f(this._tmpBoundingRect, n.geometry, r, o);\n      null != e && this._tileBounds.forEachInBounds(e, e => {\n        const t = this._tiles.get(e);\n        this.featureStore.add(n);\n        const s = n.objectId;\n        t.objectIds.has(s) || (t.objectIds.add(s), this._referenceFeature(s), this._tileFeatureCounts.set(t.data.id, t.objectIds.size));\n      });\n    }\n  }\n  process(e, t = () => !0, s) {\n    if (null == this.tileInfo || !e.extent || null != this.extent && !a(h(this.extent, this._tmpBoundingRect), e.extent)) return new j(e);\n    const i = this.getAttributesForTile(e.id);\n    if (n(s, i)) return new j(e);\n    const r = this._createTileTree(e, this.tileInfo);\n    return this._simplify(r, t, null, 0, 1), this._collectMissingTiles(e, r, this.tileInfo, s);\n  }\n  get debugInfo() {\n    return Array.from(this._tiles.values()).map(({\n      data: e\n    }) => ({\n      data: e,\n      featureCount: this._tileFeatureCounts.get(e.id) || 0\n    }));\n  }\n  getFeatureCount(e) {\n    return this._tileFeatureCounts.get(e.id) ?? 0;\n  }\n  async fetchCount(e, t, s, i) {\n    const r = this._tileFeatureCounts.get(e.id);\n    if (null != r) return r;\n    const o = await g(t, s, i);\n    return this._tileFeatureCounts.set(e.id, o.data.count), o.data.count;\n  }\n  _createTileTree(e, t) {\n    const s = new F(e.level, e.row, e.col);\n    return t.updateTileInfo(s, p.ExtrapolateOptions.POWER_OF_TWO), this._tileBounds.forEachInBounds(e.extent, i => {\n      const r = this._tiles.get(i)?.data;\n      r && C(e, r) && this._populateChildren(s, r, t, this._tileFeatureCounts.get(r.id) || 0);\n    }), s;\n  }\n  _populateChildren(e, t, s, i) {\n    const r = t.level - e.level - 1;\n    if (r < 0) return void (e.isLeaf = !0);\n    const o = t.row >> r,\n      n = t.col >> r,\n      l = e.row << 1,\n      c = n - (e.col << 1) + (o - l << 1),\n      u = e.children[c];\n    if (null != u) this._populateChildren(u, t, s, i);else {\n      const r = new F(e.level + 1, o, n);\n      s.updateTileInfo(r, p.ExtrapolateOptions.POWER_OF_TWO), e.children[c] = r, this._populateChildren(r, t, s, i);\n    }\n  }\n  _simplify(e, t, s, i, r) {\n    const o = r * r;\n    if (e.isLeaf) return t(this.getFeatureCount(e), r) ? 0 : (this._remove(e), null != s && (s.children[i] = null), o);\n    const n = r / 2,\n      l = n * n;\n    let c = 0;\n    for (let u = 0; u < e.children.length; u++) {\n      const s = e.children[u];\n      c += null != s ? this._simplify(s, t, e, u, n) : l;\n    }\n    return 0 === c ? this._mergeChildren(e) : 1 - c / o < I && (this._purge(e), null != s && (s.children[i] = null), c = o), c;\n  }\n  _mergeChildren(e) {\n    const t = new Set();\n    let s,\n      i = 0;\n    this._forEachLeaf(e, e => {\n      const r = this._tiles.get(e.id);\n      if (r) {\n        s = s ? o(s, r.attributeKeys) : new Set(r.attributeKeys), i += r.byteSize;\n        for (const e of r.objectIds) t.has(e) || (t.add(e), this._referenceFeature(e));\n        this._remove(e);\n      }\n    }), this._addTileStorage(e, t, i, s ?? new Set()), e.isLeaf = !0, e.children[0] = e.children[1] = e.children[2] = e.children[3] = null, this._tileFeatureCounts.set(e.id, t.size);\n  }\n  _forEachLeaf(e, t) {\n    for (const s of e.children) null != s && (s.isLeaf ? t(s) : this._forEachLeaf(s, t));\n  }\n  _purge(e) {\n    if (null != e) if (e.isLeaf) this._remove(e);else for (let t = 0; t < e.children.length; t++) {\n      const s = e.children[t];\n      this._purge(s), e.children[t] = null;\n    }\n  }\n  _collectMissingTiles(e, t, s, i) {\n    const r = new b(s, e, this.extent);\n    return this._collectMissingTilesRecurse(t, r, 1, i), r.info;\n  }\n  _collectMissingTilesRecurse(e, t, s, i) {\n    const r = this.getAttributesForTile(e.id),\n      o = r && !n(i, r);\n    if (o && t.addMissing(e.level, e.row, e.col, s), e.isLeaf) return;\n    if (!e.hasChildren) return void (o || t.addMissing(e.level, e.row, e.col, s));\n    const l = s / 2;\n    for (let n = 0; n < e.children.length; n++) {\n      const s = e.children[n];\n      null == s ? t.addMissing(e.level + 1, (e.row << 1) + ((2 & n) >> 1), (e.col << 1) + (1 & n), l) : this._collectMissingTilesRecurse(s, t, l, i);\n    }\n  }\n  _referenceFeature(e) {\n    const t = (this._refCounts.get(e) || 0) + 1;\n    return this._refCounts.set(e, t), 1 === t ? x.ADDED : x.UNCHANGED;\n  }\n  _unreferenceFeature(e) {\n    const t = (this._refCounts.get(e) || 0) - 1;\n    return 0 === t ? (this._refCounts.delete(e), x.REMOVED) : (t > 0 && this._refCounts.set(e, t), x.UNCHANGED);\n  }\n  get test() {}\n};\nfunction C(e, t) {\n  if (!e || !t) return !1;\n  if (e.level === t.level) return e.row === t.row && e.col === t.col;\n  const s = e.level < t.level,\n    i = s ? e : t,\n    r = s ? t : e,\n    o = 1 << r.level - i.level;\n  return Math.floor(r.row / o) === i.row && Math.floor(r.col / o) === i.col;\n}\nfunction S(e) {\n  return e.reduce((e, t) => e + E(t), 0);\n}\nfunction E(e) {\n  return 32 + T(e.geometry) + s(e.attributes);\n}\nfunction T(e) {\n  if (null == e) return 0;\n  const t = i(e.lengths, 4);\n  return 32 + i(e.coords, 8) + t;\n}\ne([l({\n  constructOnly: !0\n})], v.prototype, \"featureStore\", void 0), e([l()], v.prototype, \"tileInfo\", void 0), e([l()], v.prototype, \"extent\", void 0), e([l()], v.prototype, \"maximumByteSize\", void 0), v = e([c(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore\")], v);\nclass w {\n  constructor(e, t, s, i) {\n    this.data = e, this.objectIds = t, this.byteSize = s, this.attributeKeys = i;\n  }\n}\nclass F {\n  constructor(e, t, s) {\n    this.level = e, this.row = t, this.col = s, this.isLeaf = !1, this.extent = null, this.children = [null, null, null, null];\n  }\n  get hasChildren() {\n    return !this.isLeaf && (null != this.children[0] || null != this.children[1] || null != this.children[2] || null != this.children[3]);\n  }\n}\nclass j {\n  constructor(e, t = []) {\n    this.missingTiles = t, this.fullArea = 0, this.coveredArea = 0, this.fullArea = d(e.extent), this.coveredArea = this.fullArea;\n  }\n  prepend(e) {\n    this.missingTiles = e.missingTiles.concat(this.missingTiles), this.coveredArea += e.coveredArea, this.fullArea += e.fullArea;\n  }\n}\nclass b {\n  constructor(e, t, s) {\n    this._tileInfo = e, this._extent = null, this.info = new j(t), null != s && (this._extent = h(s));\n  }\n  addMissing(e, t, s, i) {\n    const r = new m(null, e, t, s);\n    this._tileInfo.updateTileInfo(r, p.ExtrapolateOptions.POWER_OF_TWO), null == r.extent || null != this._extent && !a(this._extent, r.extent) || (this.info.missingTiles.push({\n      data: r,\n      resolution: i\n    }), this.info.coveredArea -= d(r.extent));\n  }\n}\nconst I = .18751;\nvar x;\n!function (e) {\n  e[e.ADDED = 0] = \"ADDED\", e[e.REMOVED = 1] = \"REMOVED\", e[e.UNCHANGED = 2] = \"UNCHANGED\";\n}(x || (x = {}));\nexport { v as FeatureServiceTileStore, j as ProcessResult };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport \"../../../../../geometry.js\";\nimport t from \"../../../../../core/Evented.js\";\nimport { createResolver as i, throwIfAborted as s } from \"../../../../../core/promiseUtils.js\";\nimport { watch as r, whenOnce as n, sync as a } from \"../../../../../core/reactiveUtils.js\";\nimport { property as o } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/RandomLCG.js\";\nimport { subclass as l } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { UpdatingHandles as d } from \"../../../../../core/support/UpdatingHandles.js\";\nimport u from \"../../../../../geometry/SpatialReference.js\";\nimport p from \"../../../../../layers/graphics/data/FeatureStore.js\";\nimport { QueryEngine as c } from \"../../../../../layers/graphics/data/QueryEngine.js\";\nimport h from \"../../../../../layers/support/TileInfo.js\";\nimport g from \"../../../../../rest/support/Query.js\";\nimport f from \"../../../../../symbols/support/ElevationInfo.js\";\nimport { getSnappingCandidateElevationAligner as m } from \"../snappingCandidateElevationAlignment.js\";\nimport { getSnappingCandidateElevationFilter as y } from \"../snappingCandidateElevationFilter.js\";\nimport { getSymbologySnappingCandidatesFetcher as _ } from \"../symbologySnappingCandidates.js\";\nimport { FeatureServiceTiledFetcher as S } from \"./FeatureServiceTiledFetcher.js\";\nimport { FeatureServiceTileStore as F } from \"./FeatureServiceTileStore.js\";\nimport { fromJSON as v } from \"../../../../../geometry/support/jsonUtils.js\";\nlet w = class extends t.EventedAccessor {\n  constructor() {\n    super(...arguments), this._isInitializing = !0, this.remoteClient = null, this._whenSetup = i(), this._elevationAligner = m(), this._elevationFilter = y(), this._symbologyCandidatesFetcher = _(), this._updatingHandles = new d(), this._editsUpdatingHandles = new d(), this._pendingApplyEdits = new Map(), this._alignPointsInFeatures = async (e, t) => {\n      const i = {\n          query: e\n        },\n        r = await this.remoteClient.invoke(\"alignElevation\", i, {\n          signal: t\n        });\n      return s(t), r;\n    }, this._getSymbologyCandidates = async (e, t) => {\n      const i = {\n          candidates: e,\n          spatialReference: this._spatialReference.toJSON()\n        },\n        r = await this.remoteClient.invoke(\"getSymbologyCandidates\", i, {\n          signal: t\n        });\n      return s(t), r;\n    };\n  }\n  get updating() {\n    return this.updatingExcludingEdits || this._editsUpdatingHandles.updating || this._featureFetcher.updating;\n  }\n  get updatingExcludingEdits() {\n    return this._featureFetcher.updatingExcludingEdits || this._isInitializing || this._updatingHandles.updating;\n  }\n  destroy() {\n    this._featureFetcher?.destroy(), this._queryEngine?.destroy(), this._featureStore?.clear();\n  }\n  async setup(e) {\n    if (this.destroyed) return {\n      result: {}\n    };\n    const {\n        geometryType: t,\n        objectIdField: i,\n        timeInfo: s,\n        fieldsIndex: n\n      } = e.serviceInfo,\n      {\n        hasZ: o\n      } = e,\n      l = u.fromJSON(e.spatialReference);\n    this._spatialReference = l, this._featureStore = new p({\n      ...e.serviceInfo,\n      hasZ: o,\n      hasM: !1\n    }), this._queryEngine = new c({\n      spatialReference: e.spatialReference,\n      featureStore: this._featureStore,\n      geometryType: t,\n      fieldsIndex: n,\n      hasZ: o,\n      hasM: !1,\n      objectIdField: i,\n      timeInfo: s\n    }), this._featureFetcher = new S({\n      store: new F({\n        featureStore: this._featureStore\n      }),\n      url: e.serviceInfo.url,\n      objectIdField: e.serviceInfo.objectIdField,\n      globalIdField: e.serviceInfo.globalIdField,\n      capabilities: e.serviceInfo.capabilities,\n      spatialReference: l,\n      sourceSpatialReference: u.fromJSON(e.serviceInfo.spatialReference),\n      customParameters: e.configuration.customParameters\n    });\n    const d = \"3d\" === e.configuration.viewType;\n    return this._elevationAligner = m(d, {\n      elevationInfo: null != e.elevationInfo ? f.fromJSON(e.elevationInfo) : null,\n      alignPointsInFeatures: this._alignPointsInFeatures\n    }), this._elevationFilter = y(d), this.addHandles([r(() => this._featureFetcher.availability, e => this.emit(\"notify-availability\", {\n      availability: e\n    }), a), r(() => this.updating, () => this._notifyUpdating())]), this._whenSetup.resolve(), this._isInitializing = !1, this.configure(e.configuration);\n  }\n  async configure(e) {\n    return await this._updatingHandles.addPromise(this._whenSetup.promise), this._updateFeatureFetcherConfiguration(e), j;\n  }\n  async setSuspended(e, t) {\n    return await this._updatingHandles.addPromise(this._whenSetup.promise), s(t), this._featureFetcher.suspended = e, j;\n  }\n  async updateOutFields(e, t) {\n    return await this._updatingHandles.addPromise(this._whenSetup.promise), s(t), this._featureFetcher.outFields = new Set(e ?? []), j;\n  }\n  async fetchCandidates(e, t) {\n    await this._whenSetup.promise, s(t);\n    const i = b(e),\n      r = t?.signal,\n      n = await this._queryEngine.executeQueryForSnapping(i, r);\n    s(r);\n    const a = await this._elevationAligner.alignCandidates(n.candidates, u.fromJSON(e.point.spatialReference) ?? u.WGS84, r);\n    s(r);\n    const o = await this._symbologyCandidatesFetcher.fetch(a, r);\n    s(r);\n    const l = 0 === o.length ? a : a.concat(o);\n    return {\n      result: {\n        candidates: this._elevationFilter.filter(i, l)\n      }\n    };\n  }\n  async updateTiles(e, t) {\n    return await this._updatingHandles.addPromise(this._whenSetup.promise), s(t), this._featureFetcher.tileSize = e.tileSize, this._featureFetcher.tilesOfInterest = e.tiles, this._featureFetcher.tileInfo = null != e.tileInfo ? h.fromJSON(e.tileInfo) : null, j;\n  }\n  async refresh(e, t) {\n    return await this._updatingHandles.addPromise(this._whenSetup.promise), s(t), this._featureFetcher.refresh(), j;\n  }\n  async whenNotUpdating(e, t) {\n    return await this._updatingHandles.addPromise(this._whenSetup.promise), s(t), await n(() => !this.updatingExcludingEdits, t), s(t), j;\n  }\n  async getDebugInfo(e, t) {\n    return s(t), {\n      result: this._featureFetcher.debugInfo\n    };\n  }\n  async beginApplyEdits(e, t) {\n    this._updatingHandles.addPromise(this._whenSetup.promise), s(t);\n    const r = i();\n    return this._pendingApplyEdits.set(e.id, r), this._featureFetcher.applyEdits(r.promise), this._editsUpdatingHandles.addPromise(r.promise), j;\n  }\n  async endApplyEdits(e, t) {\n    const i = this._pendingApplyEdits.get(e.id);\n    return i && i.resolve(e.edits), s(t), j;\n  }\n  async notifyElevationSourceChange(e, t) {\n    return this._elevationAligner.notifyElevationSourceChange(), j;\n  }\n  async notifySymbologyChange(e, t) {\n    return this._symbologyCandidatesFetcher.notifySymbologyChange(), j;\n  }\n  async setSymbologySnappingSupported(e) {\n    return this._symbologyCandidatesFetcher = _(e, this._getSymbologyCandidates), j;\n  }\n  _updateFeatureFetcherConfiguration(e) {\n    this._featureFetcher.filter = null != e.filter ? g.fromJSON(e.filter) : null, this._featureFetcher.customParameters = e.customParameters;\n  }\n  _notifyUpdating() {\n    this.emit(\"notify-updating\", {\n      updating: this.updating\n    });\n  }\n};\ne([o({\n  readOnly: !0\n})], w.prototype, \"updating\", null), e([o({\n  readOnly: !0\n})], w.prototype, \"updatingExcludingEdits\", null), e([o()], w.prototype, \"_isInitializing\", void 0), w = e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker\")], w);\nconst I = w;\nfunction b(e) {\n  if (!e.filter) return {\n    ...e,\n    query: {\n      where: \"1=1\"\n    }\n  };\n  const {\n      distance: t,\n      units: i,\n      spatialRel: s,\n      where: r,\n      timeExtent: n,\n      objectIds: a\n    } = e.filter,\n    o = {\n      geometry: e.filter.geometry ? v(e.filter.geometry) : void 0,\n      distance: t,\n      units: i,\n      spatialRel: s,\n      timeExtent: n,\n      objectIds: a,\n      where: r ?? \"1=1\"\n    };\n  return {\n    ...e,\n    query: o\n  };\n}\nconst j = {\n  result: {}\n};\nexport { I as default };"],
  "mappings": "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",
  "names": ["r", "s", "t", "e", "a", "r", "t", "e", "i", "s", "a", "u", "E", "o", "n", "x", "e", "t", "i", "h", "r", "b", "w", "s", "o", "n", "l", "a", "u", "d", "f", "c", "t", "e", "s", "r", "e", "E", "o", "t", "u", "r", "s", "i", "S", "w", "x", "n", "j", "C", "l", "c", "b", "T", "a", "w", "o", "i", "n", "h", "e", "t", "r", "s", "l", "f", "x", "d", "j", "b", "a", "I", "y"]
}
