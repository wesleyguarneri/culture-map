import {
  j as j2
} from "./chunk-6PFH6TN3.js";
import "./chunk-Q7ENCKPJ.js";
import {
  a as a5
} from "./chunk-SLCHZ6DD.js";
import {
  L
} from "./chunk-3RL4VAAQ.js";
import "./chunk-JPIYGHSR.js";
import {
  i as i4
} from "./chunk-YTFX4PFO.js";
import "./chunk-N3IR233K.js";
import {
  l
} from "./chunk-DSMB46HB.js";
import "./chunk-KQDYTHCF.js";
import {
  d
} from "./chunk-K2XCQKCC.js";
import {
  l as l2
} from "./chunk-AJS4B62I.js";
import {
  p as p2
} from "./chunk-S5EXT7FA.js";
import {
  e as e6
} from "./chunk-73Y7XDLH.js";
import {
  I,
  x
} from "./chunk-ZWCV4HKG.js";
import {
  e as e5
} from "./chunk-NQVBBKAN.js";
import "./chunk-TYQXPPSP.js";
import {
  y as y2
} from "./chunk-PFMGJTQM.js";
import "./chunk-DWASPXVI.js";
import {
  k
} from "./chunk-4KWLMXIA.js";
import "./chunk-BIUXKPKA.js";
import {
  i
} from "./chunk-CIW3KHOW.js";
import "./chunk-H7WPOTQH.js";
import "./chunk-SNY4EEM3.js";
import "./chunk-2GDRAUF6.js";
import "./chunk-XLPKC3OB.js";
import "./chunk-HEWCRCJC.js";
import "./chunk-B5ZW6SJE.js";
import {
  j
} from "./chunk-SJX5DIA7.js";
import {
  n as n3
} from "./chunk-6A7CWJED.js";
import "./chunk-APL7ANIA.js";
import "./chunk-LFKEQKEA.js";
import "./chunk-DUTZNK67.js";
import "./chunk-IN6BQCWS.js";
import {
  y as y3
} from "./chunk-CRNUMTSV.js";
import "./chunk-JM7HAEY6.js";
import {
  t
} from "./chunk-UWJIHV6Q.js";
import {
  b
} from "./chunk-ZUSCOMQM.js";
import {
  p,
  y as y4
} from "./chunk-DSEUCBVP.js";
import "./chunk-UPDWQH75.js";
import {
  S
} from "./chunk-RXWBJSJ5.js";
import {
  f as f5
} from "./chunk-M2NS3MSU.js";
import "./chunk-HMNBB7ED.js";
import "./chunk-3RRMLFFN.js";
import {
  c as c3
} from "./chunk-DR5TVNEL.js";
import "./chunk-HT2T6PUB.js";
import "./chunk-K64AAM77.js";
import "./chunk-6EUVKE22.js";
import {
  i as i3
} from "./chunk-OKJHJ3CY.js";
import "./chunk-DTUSTSEJ.js";
import "./chunk-JCWFGRHQ.js";
import "./chunk-JILEJ6R2.js";
import "./chunk-GAW5JHG4.js";
import "./chunk-OEKKQXBD.js";
import "./chunk-S3IO7V4Q.js";
import {
  u as u3
} from "./chunk-K226GFDN.js";
import "./chunk-4ZZRP4MA.js";
import "./chunk-FPFZQCEQ.js";
import "./chunk-5I6J67HP.js";
import "./chunk-YVULORT6.js";
import "./chunk-PB33BAI3.js";
import "./chunk-CVB43GGP.js";
import "./chunk-LLDOZWVV.js";
import "./chunk-U2LCAVGY.js";
import "./chunk-FYAEQPUY.js";
import "./chunk-7XMEZQ34.js";
import "./chunk-BDM2D6IC.js";
import {
  f as f4
} from "./chunk-U2ZVAEKG.js";
import "./chunk-EDSMXTFO.js";
import "./chunk-MNLT652N.js";
import "./chunk-OGZAGPIO.js";
import "./chunk-HJJIIYFF.js";
import "./chunk-T6GCUITX.js";
import "./chunk-TUIGM7TV.js";
import "./chunk-IHVSZYZS.js";
import "./chunk-6CA6K3O7.js";
import {
  w
} from "./chunk-NYQ5CYNR.js";
import {
  _
} from "./chunk-O7UDKFOW.js";
import {
  f as f2
} from "./chunk-TKPMIAIW.js";
import {
  o
} from "./chunk-NQOJNTB3.js";
import "./chunk-MFOQYQFG.js";
import {
  s as s2
} from "./chunk-NKCPFCP3.js";
import {
  e as e4,
  f as f3
} from "./chunk-3ZXOUEQG.js";
import {
  E,
  c as c2,
  e as e3,
  i as i2,
  r as r2,
  u as u2,
  z
} from "./chunk-AXVPJBVW.js";
import {
  e as e2,
  n as n2,
  r
} from "./chunk-OXEPWRM7.js";
import {
  c,
  u
} from "./chunk-POILQGXA.js";
import {
  G
} from "./chunk-JJS7PR2U.js";
import "./chunk-L5YS4GSA.js";
import "./chunk-PRREDSOB.js";
import "./chunk-V5C6HSAM.js";
import "./chunk-SYATLP3H.js";
import {
  f
} from "./chunk-V6AMQYXE.js";
import {
  V
} from "./chunk-EITGQLII.js";
import "./chunk-TIVJXVMN.js";
import "./chunk-XNUH25NY.js";
import "./chunk-WGAPNV7F.js";
import "./chunk-BXQGM56A.js";
import {
  e
} from "./chunk-4Z5SGKRM.js";
import "./chunk-ANKOCGE2.js";
import {
  y
} from "./chunk-7CJXZOFG.js";
import "./chunk-IRGZKO7V.js";
import "./chunk-5SELS7VU.js";
import {
  N,
  a as a3,
  a3 as a4
} from "./chunk-DDYVXG4F.js";
import "./chunk-ANP42J2U.js";
import {
  a as a2
} from "./chunk-HJY2YILU.js";
import "./chunk-7DA6A5LD.js";
import "./chunk-2MMLMOWS.js";
import "./chunk-4323ZVPF.js";
import {
  a,
  n2 as n,
  s2 as s
} from "./chunk-WYIDUUN2.js";
import "./chunk-DXLOWWK7.js";
import "./chunk-JWIQHGQB.js";

// ../../../node_modules/@arcgis/core/layers/voxel/voxelPlaneUtils.js
var f6 = n2();
var l3 = e5();
var u4 = e5();
var p3 = e5();
var h = r(0, 0, 1);
var j3 = r(0, 1, 0);
var x2 = r(1, 0, 0);
function b2(r4) {
  r2(f6, r4), z(f6, f6);
  const a10 = Math.atan2(f6[1], f6[0]), s6 = I(e5(), h, -a10);
  E(f6, f6, s6);
  const c8 = -1 * Math.atan2(f6[2], f6[0]);
  return [c(a10) + 270, c(c8) + 90];
}
function g(o2, a10) {
  return I(u4, h, u(o2 - 270)), I(p3, j3, u(a10 - 90)), x(l3, u4, p3), r2(f6, x2), E(f6, f6, l3), z(f6, f6), [f6[0], f6[1], f6[2]];
}

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelSlice.js
var m = class extends i(f) {
  constructor(o2) {
    super(o2), this.enabled = true, this.label = "", this.normal = null, this.point = null;
  }
  get orientation() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [o2, t6] = b2(this.normal);
    return a5.normalize(a3(o2), 0, true);
  }
  set orientation(o2) {
    const t6 = g(o2, this.tilt);
    this._set("normal", t6), this._set("orientation", o2);
  }
  get tilt() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [o2, t6] = b2(this.normal);
    return a5.normalize(a3(t6), 0, true);
  }
  set tilt(o2) {
    const t6 = g(this.orientation, o2);
    this._set("normal", t6), this._set("tilt", o2);
  }
};
e([y({
  type: Boolean,
  json: {
    write: true
  }
})], m.prototype, "enabled", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], m.prototype, "label", void 0), e([y({
  type: Number,
  json: {
    read: false
  },
  clonable: false,
  range: {
    min: 0,
    max: 360
  }
}), s2((o2) => a5.normalize(a3(o2), 0, true))], m.prototype, "orientation", null), e([y({
  type: Number,
  json: {
    read: false
  },
  clonable: false,
  range: {
    min: 0,
    max: 360
  }
}), s2((o2) => a5.normalize(a3(o2), 0, true))], m.prototype, "tilt", null), e([y({
  type: [Number],
  json: {
    write: true
  }
})], m.prototype, "normal", void 0), e([y({
  type: [Number],
  json: {
    write: true
  }
})], m.prototype, "point", void 0), m = e([a4("esri.layers.voxel.VoxelSlice")], m);
var c4 = m;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelSection.js
var d2 = class extends i(f) {
  constructor() {
    super(...arguments), this.enabled = true, this.href = null, this.id = null, this.label = "", this.normal = null, this.point = null, this.sizeInPixel = null, this.slices = null, this.timeId = 0, this.variableId = null;
  }
  get orientation() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [e7, r4] = b2(this.normal);
    return a5.normalize(a3(e7), 0, true);
  }
  get tilt() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [e7, r4] = b2(this.normal);
    return a5.normalize(a3(r4), 0, true);
  }
};
e([y({
  type: Boolean,
  json: {
    default: true,
    write: true
  }
})], d2.prototype, "enabled", void 0), e([y({
  type: String,
  json: {
    origins: {
      service: {
        read: f4
      }
    },
    write: {
      enabled: true,
      isRequired: true
    }
  }
}), j2({
  origins: ["web-scene"],
  type: "resource",
  prefix: "sections",
  compress: true
})], d2.prototype, "href", void 0), e([y({
  type: N,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], d2.prototype, "id", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], d2.prototype, "label", void 0), e([y({
  type: Number,
  clonable: false,
  readOnly: true,
  range: {
    min: 0,
    max: 360
  }
})], d2.prototype, "orientation", null), e([y({
  type: Number,
  clonable: false,
  readOnly: true,
  range: {
    min: 0,
    max: 360
  }
})], d2.prototype, "tilt", null), e([y({
  type: [Number],
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], d2.prototype, "normal", void 0), e([y({
  type: [Number],
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], d2.prototype, "point", void 0), e([y({
  type: [N],
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], d2.prototype, "sizeInPixel", void 0), e([y({
  type: [c4],
  json: {
    write: true
  }
})], d2.prototype, "slices", void 0), e([y({
  type: N,
  json: {
    default: 0,
    write: true
  }
})], d2.prototype, "timeId", void 0), e([y({
  type: N,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], d2.prototype, "variableId", void 0), d2 = e([a4("esri.layers.voxel.VoxelSection")], d2);
var u5 = d2;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelSimpleShading.js
var t2 = class extends f {
  constructor() {
    super(...arguments), this.diffuseFactor = 0.5, this.specularFactor = 0.5;
  }
};
e([y({
  type: Number,
  range: {
    min: 0,
    max: 1
  },
  json: {
    default: 0.5,
    write: true
  }
})], t2.prototype, "diffuseFactor", void 0), e([y({
  type: Number,
  range: {
    min: 0,
    max: 1
  },
  json: {
    default: 0.5,
    write: true
  }
})], t2.prototype, "specularFactor", void 0), t2 = e([a4("esri.layers.voxel.VoxelSimpleShading")], t2);
var p4 = t2;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelFormat.js
var s3 = class extends f {
  constructor() {
    super(...arguments), this.continuity = null, this.hasNoData = false, this.noData = 0, this.offset = 0, this.scale = 1, this.type = null;
  }
};
e([y({
  type: ["discrete", "continuous"],
  json: {
    write: true
  }
})], s3.prototype, "continuity", void 0), e([y({
  type: Boolean,
  json: {
    write: true
  }
})], s3.prototype, "hasNoData", void 0), e([y({
  type: Number,
  json: {
    write: true
  }
})], s3.prototype, "noData", void 0), e([y({
  type: Number,
  json: {
    write: true
  }
})], s3.prototype, "offset", void 0), e([y({
  type: Number,
  json: {
    write: true
  }
})], s3.prototype, "scale", void 0), e([y({
  type: String,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], s3.prototype, "type", void 0), s3 = e([a4("esri.layers.voxel.VoxelFormat")], s3);
var p5 = s3;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelVariable.js
var s4 = class extends f {
  constructor() {
    super(...arguments), this.id = null, this.description = "", this.name = null, this.originalFormat = null, this.renderingFormat = null, this.unit = "", this.volumeId = 0, this.type = null;
  }
};
e([y({
  type: Number,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], s4.prototype, "id", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], s4.prototype, "description", void 0), e([y({
  type: String,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], s4.prototype, "name", void 0), e([y({
  type: p5,
  json: {
    write: true
  }
})], s4.prototype, "originalFormat", void 0), e([y({
  type: p5,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], s4.prototype, "renderingFormat", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], s4.prototype, "unit", void 0), e([y({
  type: Number,
  json: {
    write: true
  }
})], s4.prototype, "volumeId", void 0), e([y({
  type: ["stc-hot-spot-results", "stc-cluster-outlier-results", "stc-estimated-bin", "generic-nearest-interpolated"],
  json: {
    write: true
  }
})], s4.prototype, "type", void 0), s4 = e([a4("esri.layers.voxel.VoxelVariable")], s4);
var p6 = s4;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelIsosurface.js
var l4 = class extends i(f) {
  constructor() {
    super(...arguments), this.color = u3.fromArray([0, 0, 0, 0]), this.value = 0, this.enabled = true, this.label = "", this.colorLocked = false;
  }
};
e([y({
  type: u3,
  json: {
    type: [N],
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], l4.prototype, "color", void 0), e([y({
  type: Number,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], l4.prototype, "value", void 0), e([y({
  type: Boolean,
  json: {
    default: true,
    write: true
  }
})], l4.prototype, "enabled", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], l4.prototype, "label", void 0), e([y({
  type: Boolean,
  json: {
    default: false,
    write: true
  }
})], l4.prototype, "colorLocked", void 0), l4 = e([a4("esri.layers.voxel.VoxelIsosurface")], l4);
var a6 = l4;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelColorStop.js
var c5 = class extends i(f) {
  constructor() {
    super(...arguments), this.color = null, this.position = 0;
  }
};
e([y({
  type: u3,
  json: {
    type: [N],
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], c5.prototype, "color", void 0), e([y({
  type: Number,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], c5.prototype, "position", void 0), c5 = e([a4("esri.layers.voxel.VoxelColorStop")], c5);
var l5 = c5;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelOpacityStop.js
var p7 = class extends i(f) {
  constructor() {
    super(...arguments), this.opacity = 1, this.position = 0;
  }
};
e([y({
  type: Number,
  json: {
    name: "alpha",
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], p7.prototype, "opacity", void 0), e([y({
  type: Number,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], p7.prototype, "position", void 0), p7 = e([a4("esri.layers.voxel.VoxelOpacityStop")], p7);
var i5 = p7;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelRangeFilter.js
var p8 = class extends i(f) {
  constructor() {
    super(...arguments), this.enabled = false, this.range = null;
  }
};
e([y({
  type: Boolean,
  json: {
    default: false,
    write: true
  }
})], p8.prototype, "enabled", void 0), e([y({
  type: [Number],
  json: {
    write: true
  }
})], p8.prototype, "range", void 0), p8 = e([a4("esri.layers.voxel.VoxelRangeFilter")], p8);
var a7 = p8;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelTransferFunctionStyle.js
var u6;
!function(o2) {
  o2[o2.Color = 1] = "Color", o2[o2.Alpha = 2] = "Alpha", o2[o2.Both = 3] = "Both";
}(u6 || (u6 = {}));
var y5 = class extends i(f) {
  constructor(o2) {
    super(o2), this.interpolation = null, this.stretchRange = null, this.rangeFilter = null, this._colorMapSize = 256, this.colorStops = new (V.ofType(l5))(), this.opacityStops = new (V.ofType(i5))();
  }
  set colorStops(o2) {
    this._set("colorStops", n3(o2, this._get("colorStops"), V.ofType(l5)));
  }
  set opacityStops(o2) {
    this._set("opacityStops", n3(o2, this._get("opacityStops"), V.ofType(i5)));
  }
  getPreviousNext(o2, t6, r4) {
    let e7 = o2;
    for (; --e7 > 0 && t6[e7].type !== r4 && t6[e7].type !== u6.Both; ) ;
    let s6 = o2;
    const i6 = t6.length;
    for (; ++s6 < i6 && t6[s6].type !== r4 && t6[s6].type !== u6.Both; ) ;
    return [e7, s6];
  }
  get rasterizedTransferFunction() {
    const o2 = [];
    if (this.colorStops.length < 2) return o2;
    const r4 = [], e7 = [], s6 = 1e-5;
    for (const t6 of this.colorStops) {
      if (!t6.color) return o2;
      e7.push({
        color: {
          r: t6.color.r,
          g: t6.color.g,
          b: t6.color.b,
          a: Math.round(255 * (1 - t6.color.a))
        },
        position: t6.position,
        type: u6.Color
      });
    }
    if (0 === this.opacityStops.length) for (const t6 of e7) r4.push({
      color: t6.color,
      position: t6.position
    });
    else {
      for (const t6 of this.opacityStops) {
        const o4 = e4(t6.position, 0, 1), r5 = Math.round(255 * e4(1 - t6.opacity, 0, 1));
        let i7 = false;
        for (const t7 of e7) if (t7.type === u6.Color && Math.abs(t7.position - o4) < s6) {
          t7.color.a = r5, t7.type = u6.Both, i7 = true;
          break;
        }
        i7 || e7.push({
          color: {
            r: 0,
            g: 0,
            b: 0,
            a: r5
          },
          position: t6.position,
          type: u6.Alpha
        });
      }
      e7.sort((o4, t6) => o4.position < t6.position ? -1 : 1);
      const o3 = e7.length;
      for (let t6 = 0; t6 < o3; ++t6) {
        const r5 = e7[t6];
        if (r5.type !== u6.Both) if (r5.type === u6.Color) {
          const [s7, i7] = this.getPreviousNext(t6, e7, u6.Alpha);
          if (-1 !== s7 && i7 !== o3) {
            const o4 = (r5.position - e7[s7].position) / (e7[i7].position - e7[s7].position);
            r5.color.a = Math.round(f3(e7[s7].color.a, e7[i7].color.a, o4));
          } else r5.color.a = -1 !== s7 ? e7[s7].color.a : e7[i7].color.a;
        } else {
          const [s7, i7] = this.getPreviousNext(t6, e7, u6.Color);
          if (-1 !== s7 && i7 !== o3) {
            const o4 = (r5.position - e7[s7].position) / (e7[i7].position - e7[s7].position), t7 = e7[s7].color, p14 = e7[i7].color;
            S2.forEach((e8) => {
              r5.color[e8] = Math.round(f3(t7[e8], p14[e8], o4));
            });
          } else -1 !== s7 ? S2.forEach((o4) => {
            r5.color[o4] = e7[s7].color[o4];
          }) : S2.forEach((o4) => {
            r5.color[o4] = e7[i7].color[o4];
          });
        }
      }
      for (const t6 of e7) r4.push({
        color: t6.color,
        position: t6.position
      });
    }
    r4[0].position = 0, r4[r4.length - 1].position = 1;
    let i6 = 0, l7 = 1;
    for (let c8 = 0; c8 < this._colorMapSize; ++c8) {
      const e8 = c8 / this._colorMapSize;
      for (; e8 > r4[l7].position; ) i6 = l7++;
      const s7 = (e8 - r4[i6].position) / (r4[l7].position - r4[i6].position), a10 = r4[i6].color, h2 = r4[l7].color, f9 = new u3();
      S2.forEach((o3) => {
        f9[o3] = Math.round(f3(a10[o3], h2[o3], s7));
      }), f9.a = e4(1 - f3(a10.a, h2.a, s7) / 255, 0, 1), o2.push(f9);
    }
    return o2;
  }
  getColorForContinuousDataValue(o2, t6) {
    const r4 = this.rasterizedTransferFunction;
    if (this.colorStops.length < 2 || !Array.isArray(this.stretchRange) || this.stretchRange.length < 2 || r4.length < 256) return null;
    let e7 = this.stretchRange[0], s6 = this.stretchRange[1];
    if (e7 > s6) {
      const o3 = e7;
      e7 = s6, s6 = o3;
    }
    o2 = e4(o2, e7, s6);
    const i6 = r4[Math.round((o2 - e7) / (s6 - e7) * (this._colorMapSize - 1))].clone();
    return t6 || (i6.a = 1), i6;
  }
};
e([y({
  type: ["linear", "nearest"],
  json: {
    write: true
  }
})], y5.prototype, "interpolation", void 0), e([y({
  type: [Number],
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], y5.prototype, "stretchRange", void 0), e([y({
  type: V.ofType(l5),
  json: {
    write: {
      enabled: true,
      overridePolicy() {
        return {
          enabled: !!this.colorStops && this.colorStops.length > 0
        };
      }
    }
  }
})], y5.prototype, "colorStops", null), e([y({
  type: V.ofType(i5),
  json: {
    read: {
      source: "alphaStops"
    },
    write: {
      enabled: true,
      target: "alphaStops",
      overridePolicy() {
        return {
          enabled: !!this.opacityStops && this.opacityStops.length > 0
        };
      }
    }
  }
})], y5.prototype, "opacityStops", null), e([y({
  type: a7,
  json: {
    write: true
  }
})], y5.prototype, "rangeFilter", void 0), e([y({
  type: [u3],
  clonable: false,
  json: {
    read: false
  }
})], y5.prototype, "rasterizedTransferFunction", null), y5 = e([a4("esri.layers.voxel.VoxelTransferFunctionStyle")], y5);
var g2 = y5;
var S2 = ["r", "g", "b"];

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelUniqueValue.js
var a8 = class extends i(f) {
  constructor() {
    super(...arguments), this.color = u3.fromArray([0, 0, 0, 0]), this.value = 0, this.enabled = true, this.label = "";
  }
};
e([y({
  type: u3,
  json: {
    type: [N],
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], a8.prototype, "color", void 0), e([y({
  type: N,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], a8.prototype, "value", void 0), e([y({
  type: Boolean,
  json: {
    default: true,
    write: true
  }
})], a8.prototype, "enabled", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], a8.prototype, "label", void 0), a8 = e([a4("esri.layers.voxel.VoxelUniqueValue")], a8);
var l6 = a8;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelVariableStyle.js
var p9;
var c6 = p9 = class extends f {
  constructor(e7) {
    super(e7), this.variableId = 0, this.label = "", this.transferFunction = null, this.uniqueValues = null, this.isosurfaces = null, this.uniqueValues = new (V.ofType(l6))(), this.isosurfaces = new (V.ofType(a6))();
  }
  clone() {
    return new p9({
      variableId: this.variableId,
      label: this.label,
      transferFunction: a(this.transferFunction),
      uniqueValues: a(this.uniqueValues),
      isosurfaces: a(this.isosurfaces)
    });
  }
};
e([y({
  type: N,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], c6.prototype, "variableId", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], c6.prototype, "label", void 0), e([y({
  type: g2,
  json: {
    write: {
      enabled: true,
      overridePolicy() {
        return {
          enabled: !this.uniqueValues || this.uniqueValues.length < 1
        };
      }
    }
  }
})], c6.prototype, "transferFunction", void 0), e([y({
  type: V.ofType(l6),
  json: {
    write: {
      enabled: true,
      overridePolicy() {
        return {
          enabled: !!this.uniqueValues && this.uniqueValues.length > 0
        };
      }
    }
  }
})], c6.prototype, "uniqueValues", void 0), e([y({
  type: V.ofType(a6),
  json: {
    write: {
      enabled: true,
      overridePolicy() {
        const e7 = !this.uniqueValues || this.uniqueValues.length < 1, s6 = !!this.isosurfaces && this.isosurfaces.length > 0;
        return {
          enabled: e7 && s6
        };
      }
    }
  }
})], c6.prototype, "isosurfaces", void 0), c6 = p9 = e([a4("esri.layers.voxel.VoxelVariableStyle")], c6);
var f7 = c6;

// ../../../node_modules/@arcgis/core/layers/voxel/NCTimeParser.js
function r3(r4) {
  const e7 = /^(days?|hours?|minutes?|seconds?|d|h|m|s) since (\d{1,4})-(\d{1,2})-(\d{1,2})[ |T](\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[\s|Z]?(([+|\-|\s?])(\d{1,2}):(\d{1,2}))?$/i.exec(r4);
  if (null == e7) return {
    didParse: false
  };
  const [, t6, s6, a10, d5, n4, i6, u7, N2, o2, c8, f9, p14] = e7;
  let $ = "seconds";
  const P = t6.charAt(0).toLowerCase();
  "d" === P ? $ = "days" : "h" === P ? $ = "hours" : "m" === P && ($ = "minutes");
  const m4 = parseInt(s6, 10);
  if (Number.isNaN(m4)) return {
    didParse: false
  };
  const b3 = parseInt(a10, 10);
  if (Number.isNaN(b3) || b3 < 1 || b3 > 12) return {
    didParse: false
  };
  const I2 = parseInt(d5, 10);
  if (Number.isNaN(I2) || I2 < 1 || I2 > 31) return {
    didParse: false
  };
  if (2 === b3) {
    const r5 = m4 % 4 == 0 && (m4 % 100 != 0 || m4 % 400 == 0);
    if (r5 && I2 > 29 || !r5 && I2 > 28) return {
      didParse: false
    };
  } else if ((4 === b3 || 6 === b3 || 9 === b3 || 11 === b3) && I2 > 30) return {
    didParse: false
  };
  const S4 = parseInt(n4, 10);
  if (Number.isNaN(S4) || S4 < 0 || S4 > 23) return {
    didParse: false
  };
  const l7 = parseInt(i6, 10);
  if (Number.isNaN(l7) || l7 < 0 || l7 > 59) return {
    didParse: false
  };
  const h2 = parseInt(u7, 10);
  if (Number.isNaN(h2) || h2 < 0 || h2 > 59) return {
    didParse: false
  };
  let w2 = 1, x3 = 0, y6 = 0;
  if (c8 && (w2 = "-" === c8 ? -1 : 1), f9) {
    if (x3 = parseInt(f9, 10), Number.isNaN(x3) || x3 < 0) return {
      didParse: false
    };
    if (0 !== x3) {
      const r5 = w2 * x3;
      if (r5 < -12 || r5 > 14) return {
        didParse: false
      };
    }
  }
  if (p14 && (y6 = parseInt(p14, 10), Number.isNaN(y6) || y6 < 0 || y6 > 59)) return {
    didParse: false
  };
  const T = `${m4}`.padStart(4, "0"), Z = `${b3}`.padStart(2, "0"), A = `${I2}`.padStart(2, "0"), C2 = `${S4}`.padStart(2, "0"), D = `${l7}`.padStart(2, "0"), L2 = `${h2}`.padStart(2, "0");
  let g3 = "Z";
  0 === x3 && 0 === y6 || (g3 = w2 > 0 ? "+" : "-", g3 += `${x3}`.padStart(2, "0"), g3 += ":", g3 += `${y6}`.padStart(2, "0"));
  return {
    didParse: true,
    unit: $,
    reference: /* @__PURE__ */ new Date(`${T}-${Z}-${A}T${C2}:${D}:${L2}.000${g3}`)
  };
}

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelIrregularSpacing.js
var t3 = class extends f {
  constructor() {
    super(...arguments), this.values = null;
  }
};
e([y({
  type: [Number],
  json: {
    write: true
  }
})], t3.prototype, "values", void 0), t3 = e([a4("esri.layers.voxel.VoxelIrregularSpacing")], t3);
var p10 = t3;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelRegularSpacing.js
var t4 = class extends f {
  constructor() {
    super(...arguments), this.scale = 1, this.offset = 0;
  }
};
e([y({
  type: Number,
  json: {
    write: true
  }
})], t4.prototype, "scale", void 0), e([y({
  type: Number,
  json: {
    write: true
  }
})], t4.prototype, "offset", void 0), t4 = e([a4("esri.layers.voxel.VoxelRegularSpacing")], t4);
var p11 = t4;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelDimension.js
var a9 = class extends f {
  constructor() {
    super(...arguments), this.irregularSpacing = null, this.isPositiveUp = true, this.isWrappedDateLine = false, this.label = null, this.name = null, this.quantity = null, this.regularSpacing = null, this.size = 0, this.unit = null;
  }
  get isRegular() {
    return (null == this.irregularSpacing || void 0 === this.irregularSpacing) && null !== this.regularSpacing;
  }
  getRange() {
    return this.isRegular ? [this.regularSpacing.offset, this.regularSpacing.offset + this.regularSpacing.scale * (this.size - 1)] : Array.isArray(this.irregularSpacing?.values) && this.irregularSpacing.values.length > 1 ? [this.irregularSpacing.values[0], this.irregularSpacing.values[this.irregularSpacing.values.length - 1]] : [0, 0];
  }
};
e([y({
  type: p10,
  json: {
    write: true
  }
})], a9.prototype, "irregularSpacing", void 0), e([y({
  type: Boolean,
  json: {
    write: true
  }
})], a9.prototype, "isPositiveUp", void 0), e([y({
  type: Boolean,
  json: {
    write: true
  }
})], a9.prototype, "isWrappedDateLine", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], a9.prototype, "label", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], a9.prototype, "name", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], a9.prototype, "quantity", void 0), e([y({
  type: p11,
  json: {
    write: true
  }
})], a9.prototype, "regularSpacing", void 0), e([y({
  type: Number,
  json: {
    write: true
  }
})], a9.prototype, "size", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], a9.prototype, "unit", void 0), e([y({
  type: Boolean,
  json: {
    read: false
  }
})], a9.prototype, "isRegular", null), a9 = e([a4("esri.layers.voxel.VoxelDimension")], a9);
var p12 = a9;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelVolume.js
var f8 = class extends f {
  constructor(e7) {
    super(e7), this.id = 0, this.dimensions = null, this.spatialReference = f2.WGS84;
  }
  get zDimension() {
    if (!this.dimensions) return -1;
    if (!Array.isArray(this.dimensions)) return -1;
    if (4 !== this.dimensions.length) return -1;
    for (let e7 = 2; e7 < 4; ++e7) if (this.dimensions[e7].size > 0) return e7;
    return -1;
  }
  get isValid() {
    return !!this.dimensions && !!Array.isArray(this.dimensions) && 4 === this.dimensions.length && !(this.dimensions[0].size < 1 || this.dimensions[1].size < 1) && !(-1 === this.zDimension || this.dimensions[this.zDimension].size < 1);
  }
  get originInLayerSpace3D() {
    if (!this.isValid || "xyt" === this.volumeType) return [0, 0, 0];
    const e7 = this.dimensions[0].getRange(), i6 = this.dimensions[1].getRange(), s6 = this.dimensions[2], r4 = s6.isRegular ? s6.getRange() : [0, s6.size];
    return [e7[0], i6[0], r4[0]];
  }
  get voxelSizeInLayerSpaceSigned() {
    if (!this.isValid || "xyt" === this.volumeType) return [0, 0, 0];
    const e7 = this.dimensions[0].getRange(), i6 = this.dimensions[1].getRange(), s6 = this.dimensions[2], r4 = s6.isRegular ? s6.getRange() : [0, s6.size], t6 = [this.sizeInVoxels[0], this.sizeInVoxels[1], this.sizeInVoxels[2]];
    for (let n4 = 0; n4 < 3; ++n4) t6[n4] < 2 ? t6[n4] = 1 : t6[n4] -= 1;
    return s6.isRegular && !s6.isPositiveUp && (t6[2] *= -1), [(e7[1] - e7[0]) / t6[0], (i6[1] - i6[0]) / t6[1], (r4[1] - r4[0]) / t6[2]];
  }
  get volumeType() {
    if (this.isValid) {
      const e7 = this.dimensions[2].size > 0;
      let i6 = this.dimensions[3].size > 0;
      if (i6) {
        const e8 = this.dimensions[3];
        if (i6 = "time" === e8.quantity, i6 && null !== e8.unit) {
          i6 = r3(e8.unit).didParse;
        }
      }
      if (!e7 && i6) return "xyt";
      if (e7 && i6) return "xyzt";
    }
    return "xyz";
  }
  get sizeInVoxels() {
    if (!this.isValid) return [0, 0, 0];
    const e7 = this.zDimension;
    return [this.dimensions[0].size, this.dimensions[1].size, this.dimensions[e7].size];
  }
  get timeStops() {
    if ("xyzt" !== this.volumeType) return [];
    const e7 = this.dimensions[3], i6 = [], s6 = r3(e7.unit);
    if (s6.didParse) {
      if (e7.isRegular) {
        const t6 = e7.regularSpacing?.offset ?? 0, n4 = e7.regularSpacing?.scale || 1;
        for (let o2 = 0; o2 < e7.size; ++o2) {
          const e8 = t6 + n4 * o2;
          i6.push(i3(s6.reference, e8, s6.unit));
        }
      } else if (Array.isArray(e7.irregularSpacing?.values) && e7.irregularSpacing.values.length > 0) for (let t6 = 0; t6 < e7.irregularSpacing.values.length; ++t6) {
        const n4 = e7.irregularSpacing.values[t6];
        i6.push(i3(s6.reference, n4, s6.unit));
      }
    }
    return i6;
  }
  computeVoxelSpaceLocation(e7) {
    if (!this.isValid) return [0, 0, 0];
    if ("xyt" === this.volumeType) return n.getLogger(this).error("computeVoxelSpacePosition cannot be used with XYT volumes."), [0, 0, 0];
    if (!G(this.spatialReference, e7.spatialReference)) return n.getLogger(this).error("pos argument should have the same spatial reference as the VoxelLayer."), [0, 0, 0];
    const i6 = r(e7.x, e7.y, e7.z ?? 0);
    e3(i6, i6, this.originInLayerSpace3D), i2(i6, i6, this.voxelSizeInLayerSpaceSigned);
    const r4 = this.dimensions[this.zDimension];
    if (!r4.isRegular && Array.isArray(r4.irregularSpacing?.values) && r4.irregularSpacing.values.length > 1) {
      const s6 = e7.z ?? 0, t6 = r4.irregularSpacing.values, n4 = r4.isPositiveUp ? 1 : -1, o2 = t6.reduce((e8, i7) => Math.abs(n4 * i7 - s6) < Math.abs(n4 * e8 - s6) ? i7 : e8);
      for (let e8 = 0; e8 < t6.length; ++e8) if (t6[e8] === o2) {
        i6[2] = e8;
        break;
      }
    }
    return [i6[0], i6[1], i6[2]];
  }
  computeLayerSpaceLocation(e7) {
    if (!this.isValid) return new _({
      x: 0,
      y: 0,
      spatialReference: this.spatialReference
    });
    const i6 = e2(e7);
    if (c2(i6, i6, this.voxelSizeInLayerSpaceSigned), u2(i6, i6, this.originInLayerSpace3D), "xyt" === this.volumeType) return new _({
      x: i6[0],
      y: i6[1],
      spatialReference: this.spatialReference
    });
    const s6 = this.dimensions[this.zDimension];
    return s6.isRegular || Array.isArray(s6.irregularSpacing?.values) && (e7[2] < 0 ? i6[2] = s6.irregularSpacing.values[0] : e7[2] < s6.irregularSpacing.values.length ? i6[2] = s6.irregularSpacing.values[e7[2]] : i6[2] = s6.irregularSpacing.values[s6.irregularSpacing.values.length - 1], s6.isPositiveUp || (i6[2] *= -1)), new _({
      x: i6[0],
      y: i6[1],
      z: i6[2],
      spatialReference: this.spatialReference
    });
  }
};
e([y({
  type: Number,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], f8.prototype, "id", void 0), e([y({
  type: [p12],
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], f8.prototype, "dimensions", void 0), e([y({
  type: f2,
  json: {
    read: {
      enabled: false
    }
  }
})], f8.prototype, "spatialReference", void 0), e([y({
  type: Number,
  json: {
    read: false
  }
})], f8.prototype, "zDimension", null), e([y({
  type: [Boolean],
  json: {
    read: false
  }
})], f8.prototype, "isValid", null), e([y({
  type: [Number],
  json: {
    read: false
  }
})], f8.prototype, "originInLayerSpace3D", null), e([y({
  type: [Number],
  json: {
    read: false
  }
})], f8.prototype, "voxelSizeInLayerSpaceSigned", null), e([y({
  type: ["xyz", "xyzt", "xyt"],
  json: {
    read: {
      enabled: false
    }
  }
})], f8.prototype, "volumeType", null), e([y({
  type: [Number],
  json: {
    read: false
  }
})], f8.prototype, "sizeInVoxels", null), e([y({
  type: [Date],
  json: {
    read: false,
    write: false
  }
})], f8.prototype, "timeStops", null), f8 = e([a4("esri.layers.voxel.VoxelVolume")], f8);
var S3 = f8;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelVolumeIndex.js
var t5;
var s5 = t5 = class extends f {
  constructor() {
    super(...arguments), this.apronWidth = 1, this.brickSize = [32, 32, 32], this.maxLodLevel = 0, this.nodeSize = [4, 4, 4];
  }
  isValid() {
    const e7 = new t5();
    return e7.apronWidth === this.apronWidth && e7.maxLodLevel === this.maxLodLevel && !!this.brickSize && !!this.nodeSize && !(!Array.isArray(this.brickSize) || !Array.isArray(this.nodeSize)) && 3 === this.brickSize.length && 3 === this.nodeSize.length && 32 === this.brickSize[0] && 32 === this.brickSize[1] && 32 === this.brickSize[2] && 4 === this.nodeSize[0] && 4 === this.nodeSize[1] && 4 === this.nodeSize[2];
  }
};
e([y({
  type: Number,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], s5.prototype, "apronWidth", void 0), e([y({
  type: [Number],
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], s5.prototype, "brickSize", void 0), e([y({
  type: Number,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], s5.prototype, "maxLodLevel", void 0), e([y({
  type: [Number],
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], s5.prototype, "nodeSize", void 0), s5 = t5 = e([a4("esri.layers.voxel.VoxelVolumeIndex")], s5);
var d3 = s5;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelDynamicSection.js
var m2 = class extends i(f) {
  constructor(o2) {
    super(o2), this.enabled = true, this.label = "", this.normal = null, this.point = null;
  }
  get orientation() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [o2, t6] = b2(this.normal);
    return a5.normalize(a3(o2), 0, true);
  }
  set orientation(o2) {
    const t6 = g(o2, this.tilt);
    this._set("normal", t6), this._set("orientation", o2);
  }
  get tilt() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [o2, t6] = b2(this.normal);
    return a5.normalize(a3(t6), 0, true);
  }
  set tilt(o2) {
    const t6 = g(this.orientation, o2);
    this._set("normal", t6), this._set("tilt", o2);
  }
};
e([y({
  type: Boolean,
  json: {
    default: true,
    write: true
  }
})], m2.prototype, "enabled", void 0), e([y({
  type: String,
  json: {
    write: true
  }
})], m2.prototype, "label", void 0), e([y({
  type: Number,
  json: {
    read: false
  },
  clonable: false,
  range: {
    min: 0,
    max: 360
  }
}), s2((o2) => a5.normalize(a3(o2), 0, true))], m2.prototype, "orientation", null), e([y({
  type: Number,
  json: {
    read: false
  },
  clonable: false,
  range: {
    min: 0,
    max: 360
  }
}), s2((o2) => a5.normalize(a3(o2), 0, true))], m2.prototype, "tilt", null), e([y({
  type: [Number],
  json: {
    write: true
  }
})], m2.prototype, "normal", void 0), e([y({
  type: [Number],
  json: {
    write: true
  }
})], m2.prototype, "point", void 0), m2 = e([a4("esri.layers.voxel.VoxelDynamicSection")], m2);
var c7 = m2;

// ../../../node_modules/@arcgis/core/layers/voxel/VoxelVolumeStyle.js
var p13;
var m3 = p13 = class extends f {
  constructor(e7) {
    super(e7), this.volumeId = 0, this.verticalExaggeration = 1, this.exaggerationMode = "scale-height", this.verticalOffset = 0, this.slices = new (V.ofType(c4))(), this.dynamicSections = new (V.ofType(c7))();
  }
  set slices(e7) {
    this._set("slices", n3(e7, this._get("slices"), V.ofType(c4)));
  }
  set dynamicSections(e7) {
    this._set("dynamicSections", n3(e7, this._get("dynamicSections"), V.ofType(c7)));
  }
  clone() {
    return new p13({
      volumeId: this.volumeId,
      verticalExaggeration: this.verticalExaggeration,
      exaggerationMode: this.exaggerationMode,
      verticalOffset: this.verticalOffset,
      slices: a(this.slices),
      dynamicSections: a(this.dynamicSections)
    });
  }
};
e([y({
  type: N,
  json: {
    write: {
      enabled: true,
      isRequired: true
    }
  }
})], m3.prototype, "volumeId", void 0), e([y({
  type: Number,
  json: {
    default: 1,
    write: true
  }
})], m3.prototype, "verticalExaggeration", void 0), e([y({
  type: ["scale-position", "scale-height"],
  json: {
    default: "scale-height",
    write: true
  }
})], m3.prototype, "exaggerationMode", void 0), e([y({
  type: Number,
  json: {
    default: 0,
    write: true
  }
})], m3.prototype, "verticalOffset", void 0), e([y({
  type: V.ofType(c4),
  json: {
    write: {
      enabled: true,
      overridePolicy() {
        return {
          enabled: !!this.slices && this.slices.length > 0
        };
      }
    }
  }
})], m3.prototype, "slices", null), e([y({
  type: V.ofType(c7),
  json: {
    write: {
      enabled: true,
      overridePolicy() {
        return {
          enabled: !!this.dynamicSections && this.dynamicSections.length > 0
        };
      }
    }
  }
})], m3.prototype, "dynamicSections", null), m3 = p13 = e([a4("esri.layers.voxel.VoxelVolumeStyle")], m3);
var d4 = m3;

// ../../../node_modules/@arcgis/core/layers/VoxelLayer.js
var z2 = class extends L(l(b(j(t(S(e6(i4(f5)))))))) {
  constructor(e7) {
    super(e7), this.serviceRoot = "", this.operationalLayerType = "Voxel", this.legendEnabled = true, this.title = null, this.sections = null, this.currentVariableId = 0, this.volumeStyles = null, this.renderMode = "volume", this.variableStyles = null, this.enableSlices = true, this.enableSections = true, this.enableDynamicSections = true, this.enableIsosurfaces = true, this.shading = new p4(), this.opacity = 1, this.variables = new V(), this.volumes = new V(), this.index = null, this.minScale = 0, this.maxScale = 0, this.type = "voxel", this.version = {
      major: Number.NaN,
      minor: Number.NaN,
      versionString: ""
    }, this.fullExtent = null, this.popupEnabled = false, this.test = null, this.timeExtent = null, this.timeOffset = null, this.useViewTime = true, this.volumeStyles = new (V.ofType(d4))(), this.variableStyles = new (V.ofType(f7))(), this.sections = new (V.ofType(u5))();
  }
  normalizeCtorArgs(e7) {
    return e7?.constantUpscaling && (this.test = {
      constantUpscaling: true
    }, delete e7.constantUpscaling), e7;
  }
  set url(e7) {
    this._set("url", y3(e7, n.getLogger(this)));
  }
  load(e7) {
    const t6 = null != e7 ? e7.signal : null, i6 = this.loadFromPortal({
      supportedTypes: ["Scene Service"]
    }, e7).catch(a2).then(() => this._fetchService(t6)).then(() => this.serviceRoot = this.url);
    return this.addResolvingPromise(i6), Promise.resolve(this);
  }
  read(e7, t6) {
    super.read(e7, t6);
    for (const i6 of this.volumes) i6.spatialReference = this.spatialReference;
  }
  readVersion(e7, t6) {
    return super.parseVersionString(e7);
  }
  validateLayer(e7) {
    if (e7.layerType && e7.layerType !== this.operationalLayerType) throw new s("voxel-layer:layer-type-not-supported", "VoxelLayer does not support this layer type", {
      layerType: e7.layerType
    });
    if (isNaN(this.version.major) || isNaN(this.version.minor) || this.version.major < 3) throw new s("layer:service-version-not-supported", "Service version is not supported.", {
      serviceVersion: this.version.versionString,
      supportedVersions: "3.x"
    });
    if (this.version.major > 3) throw new s("layer:service-version-too-new", "Service version is too new.", {
      serviceVersion: this.version.versionString,
      supportedVersions: "3.x"
    });
  }
  readFullExtent(e7, t6, i6) {
    if (null != e7 && "object" == typeof e7) {
      const o2 = w.fromJSON(e7, i6);
      if (0 === o2.zmin && 0 === o2.zmax && Array.isArray(t6.volumes)) {
        const e8 = S3.fromJSON(t6.volumes[0]);
        if (e8.isValid && "xyt" !== e8.volumeType) {
          const t7 = e8.dimensions[2];
          if (t7.isRegular) {
            let e9 = t7.regularSpacing.offset, i7 = t7.regularSpacing.offset + t7.regularSpacing.scale * (t7.size - 1);
            if (e9 > i7) {
              const t8 = e9;
              e9 = i7, i7 = t8;
            }
            o2.zmin = e9, o2.zmax = i7;
          }
        }
      }
      return o2;
    }
    return null;
  }
  get voxelFields() {
    const e7 = [new y2({
      name: "Voxel.ServiceValue",
      alias: "Value",
      domain: null,
      editable: false,
      length: 128,
      type: "string"
    }), new y2({
      name: "Voxel.ServiceVariableLabel",
      alias: "Variable",
      domain: null,
      editable: false,
      length: 128,
      type: "string"
    }), new y2({
      name: "Voxel.Position",
      alias: "Voxel Position",
      domain: null,
      editable: false,
      length: 128,
      type: "string"
    })], t6 = this.getVolume(null);
    if (null != t6) {
      if ("xyzt" === t6.volumeType || "xyt" === t6.volumeType) {
        const t7 = new y2({
          name: "Voxel.ServiceLocalTime",
          alias: "Local Time",
          domain: null,
          editable: false,
          length: 128,
          type: "string"
        });
        e7.push(t7);
        const i6 = new y2({
          name: "Voxel.ServiceNativeTime",
          alias: "Native Time",
          domain: null,
          editable: false,
          length: 128,
          type: "string"
        });
        e7.push(i6);
      }
      if ("xyt" !== t6.volumeType) {
        const t7 = new y2({
          name: "Voxel.ServiceDepth",
          alias: "Depth",
          domain: null,
          editable: false,
          length: 128,
          type: "string"
        });
        e7.push(t7);
      }
    }
    return e7;
  }
  get popupTemplate() {
    return this.loaded ? this.createPopupTemplate() : null;
  }
  get defaultPopupTemplate() {
    return this.createPopupTemplate();
  }
  createPopupTemplate(e7) {
    const t6 = this.voxelFields, i6 = this.title;
    return p2({
      fields: t6,
      title: i6
    }, e7);
  }
  getConfiguration() {
    const e7 = {
      layerType: this.operationalLayerType,
      version: this.version.versionString,
      name: this.title,
      spatialReference: this.spatialReference,
      fullExtent: this.fullExtent,
      volumes: this.volumes.toJSON(),
      variables: this.variables.toJSON(),
      index: this.index?.toJSON(),
      sections: this.getSections(),
      style: {
        volumeStyles: this.getVolumeStyles(),
        currentVariableId: this.currentVariableId,
        renderMode: this.renderMode,
        variableStyles: this.getVariableStyles(),
        enableSections: this.enableSections,
        enableDynamicSections: this.enableDynamicSections,
        enableIsosurfaces: this.enableIsosurfaces,
        enableSlices: this.enableSlices,
        shading: this.shading
      }
    };
    return e7.index && this.index?.isValid() ? JSON.stringify(e7) : "";
  }
  getVariableStyle(e7) {
    let t6 = -1;
    t6 = null != e7 ? e7 : this.currentVariableId;
    if (!this.variableStyles || -1 === t6) return null;
    const i6 = this.variableStyles.findIndex((e8) => e8.variableId === t6);
    return i6 < 0 ? null : this.variableStyles.at(i6);
  }
  getVariable(e7) {
    let t6 = -1;
    if (t6 = null != e7 ? e7 : this.currentVariableId, !this.variables || -1 === t6) return null;
    const i6 = this.variables.findIndex((e8) => e8.id === t6);
    return i6 < 0 ? null : this.variables.at(i6);
  }
  getVolume(e7) {
    const t6 = this.getVariable(e7);
    return null != t6 ? this.volumes.find(({
      id: e8
    }) => e8 === t6.volumeId) : null;
  }
  get timeInfo() {
    const e7 = this.getVolume(null);
    if ("xyzt" !== e7?.volumeType) return null;
    const t6 = e7.timeStops;
    if (!t6?.length) return null;
    const o2 = new c3({
      start: t6[0],
      end: t6.at(-1)
    });
    return new d({
      fullTimeExtent: o2,
      stops: t6
    });
  }
  getVolumeStyle(e7) {
    const t6 = this.getVariable(e7);
    return null != t6 ? this.volumeStyles.find(({
      volumeId: e8
    }) => e8 === t6.volumeId) : null;
  }
  getColorForContinuousDataValue(e7, t6, i6) {
    const o2 = this.getVariable(e7);
    if (null == o2 || "continuous" !== o2.renderingFormat?.continuity) return null;
    if (!this.variableStyles) return null;
    const r4 = this.variableStyles.findIndex((t7) => t7.variableId === e7);
    if (r4 < 0) return null;
    const s6 = this.variableStyles.at(r4);
    return s6?.transferFunction ? s6.transferFunction.getColorForContinuousDataValue(t6, i6) : null;
  }
  getSections() {
    const e7 = [];
    for (const t6 of this.sections) e7.push(new u5({
      enabled: t6.enabled,
      href: t6.href,
      id: t6.id,
      label: t6.label,
      normal: t6.normal,
      point: t6.point,
      sizeInPixel: t6.sizeInPixel,
      slices: t6.slices,
      timeId: t6.timeId,
      variableId: t6.variableId
    }));
    return e7;
  }
  getVariableStyles() {
    const e7 = [];
    for (const t6 of this.variableStyles) {
      const i6 = this._getVariable(t6);
      if (null != i6) {
        const o2 = t6.clone();
        o2.isosurfaces.length > 4 && (o2.isosurfaces = o2.isosurfaces.slice(0, 3), n.getLogger(this).error("A maximum of 4 isosurfaces are supported for Voxel Layers."));
        for (const e8 of o2.isosurfaces) if (!e8.colorLocked) {
          const t7 = this.getColorForContinuousDataValue(o2.variableId, e8.value, false);
          null === t7 || t7.equals(e8.color) || (e8.color = t7);
        }
        if ("continuous" === i6.renderingFormat.continuity) (null === o2.transferFunction || o2.transferFunction.colorStops.length < 2) && n.getLogger(this).error(`VoxelVariableStyle for variable ${i6.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`), null !== o2.transferFunction && (Array.isArray(o2.transferFunction.stretchRange) && 2 === o2.transferFunction.stretchRange.length || (n.getLogger(this).error(`VoxelVariableStyle for variable ${i6.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`), o2.transferFunction.stretchRange = [0, 1], o2.transferFunction.colorStops.removeAll()));
        else if ("discrete" === i6.renderingFormat.continuity) if (0 === t6.uniqueValues.length) n.getLogger(this).error(`VoxelVariableStyle for variable ${i6.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);
        else for (const e8 of t6.uniqueValues) null !== e8.label && void 0 !== e8.label || null === e8.value || void 0 === e8.value || (e8.label = e8.value.toString());
        e7.push(o2);
      } else n.getLogger(this).error(`VoxelVariable ID=${t6.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`);
    }
    return e7;
  }
  getVolumeStyles() {
    const e7 = [];
    for (const t6 of this.volumeStyles) {
      const i6 = this._getVolumeFromVolumeId(t6.volumeId);
      if (null != i6) {
        const o2 = t6.clone();
        for (const e8 of o2.slices) this._isPlaneValid(e8, [0, 1, i6.zDimension], i6.dimensions) || (e8.enabled = false, e8.label = "invalid");
        for (const e8 of o2.dynamicSections) this._isPlaneValid(e8, [0, 1, i6.zDimension], i6.dimensions) || (e8.enabled = false, e8.label = "invalid");
        e7.push(o2);
      } else n.getLogger(this).error(`VoxelVolume ID=${t6.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`);
    }
    return e7;
  }
  _getVariable(e7) {
    const t6 = e7.variableId;
    for (const i6 of this.variables) if (i6.id === t6) return i6;
    return null;
  }
  _getVolumeFromVolumeId(e7) {
    for (const t6 of this.volumes) if (t6.id === e7) return t6;
    return null;
  }
  _isPlaneValid(e7, t6, i6) {
    if (!e7.point) return false;
    if (!Array.isArray(e7.point) || 3 !== e7.point.length) return false;
    if (!e7.normal) return false;
    if (!Array.isArray(e7.normal) || 3 !== e7.normal.length) return false;
    const o2 = r(e7.normal[0], e7.normal[1], e7.normal[2]);
    z(o2, o2);
    const r4 = 1e-6;
    return !(Math.abs(o2[0]) + Math.abs(o2[1]) + Math.abs(o2[2]) < r4) && (e7.normal[0] = o2[0], e7.normal[1] = o2[1], e7.normal[2] = o2[2], true);
  }
};
e([y({
  type: ["Voxel"]
})], z2.prototype, "operationalLayerType", void 0), e([y(y4)], z2.prototype, "legendEnabled", void 0), e([y({
  json: {
    write: true
  }
})], z2.prototype, "title", void 0), e([y(p)], z2.prototype, "url", null), e([y({
  type: V.ofType(u5),
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.sections",
        write: true
      }
    }
  }
})], z2.prototype, "sections", void 0), e([y({
  type: N,
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.currentVariableId",
        write: {
          enabled: true,
          isRequired: true,
          ignoreOrigin: true
        }
      },
      service: {
        name: "style.currentVariableId"
      }
    }
  }
})], z2.prototype, "currentVariableId", void 0), e([y({
  type: V.ofType(d4),
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.volumeStyles",
        write: true
      },
      service: {
        name: "style.volumeStyles"
      }
    }
  }
})], z2.prototype, "volumeStyles", void 0), e([y({
  type: ["volume", "surfaces"],
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.renderMode",
        write: true
      },
      service: {
        name: "style.renderMode"
      }
    }
  }
})], z2.prototype, "renderMode", void 0), e([y({
  type: V.ofType(f7),
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.variableStyles",
        write: true
      },
      service: {
        name: "style.variableStyles"
      }
    }
  }
})], z2.prototype, "variableStyles", void 0), e([y({
  type: Boolean,
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.enableSlices",
        write: true
      },
      service: {
        name: "style.enableSlices"
      }
    }
  }
})], z2.prototype, "enableSlices", void 0), e([y({
  type: Boolean,
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.enableSections",
        write: true
      },
      service: {
        name: "style.enableSections"
      }
    }
  }
})], z2.prototype, "enableSections", void 0), e([y({
  type: Boolean,
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.enableDynamicSections",
        write: true
      },
      service: {
        name: "style.enableDynamicSections"
      }
    }
  }
})], z2.prototype, "enableDynamicSections", void 0), e([y({
  type: Boolean,
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.enableIsosurfaces",
        write: true
      },
      service: {
        name: "style.enableIsosurfaces"
      }
    }
  }
})], z2.prototype, "enableIsosurfaces", void 0), e([y({
  type: p4,
  json: {
    origins: {
      "web-scene": {
        name: "layerDefinition.style.shading",
        write: true
      },
      service: {
        name: "style.shading"
      }
    }
  }
})], z2.prototype, "shading", void 0), e([y({
  type: ["show", "hide"]
})], z2.prototype, "listMode", void 0), e([y({
  type: Number,
  range: {
    min: 0,
    max: 1
  },
  nonNullable: true,
  json: {
    read: false,
    write: false,
    origins: {
      "web-scene": {
        read: false,
        write: false
      },
      "portal-item": {
        read: false,
        write: false
      }
    }
  }
})], z2.prototype, "opacity", void 0), e([y({
  type: V.ofType(p6)
})], z2.prototype, "variables", void 0), e([y({
  type: V.ofType(S3)
})], z2.prototype, "volumes", void 0), e([y({
  type: d3
})], z2.prototype, "index", void 0), e([y({
  type: Number,
  json: {
    name: "layerDefinition.minScale",
    write: true,
    origins: {
      service: {
        read: false,
        write: false
      }
    }
  }
})], z2.prototype, "minScale", void 0), e([y({
  type: Number,
  json: {
    name: "layerDefinition.maxScale",
    write: true,
    origins: {
      service: {
        read: false,
        write: false
      }
    }
  }
})], z2.prototype, "maxScale", void 0), e([y({
  json: {
    read: false
  },
  readOnly: true
})], z2.prototype, "type", void 0), e([y({
  readOnly: true,
  json: {
    name: "serviceVersion"
  }
})], z2.prototype, "version", void 0), e([o("service", "version")], z2.prototype, "readVersion", null), e([y({
  type: w
})], z2.prototype, "fullExtent", void 0), e([o("service", "fullExtent", ["fullExtent"])], z2.prototype, "readFullExtent", null), e([y({
  readOnly: true,
  clonable: false,
  json: {
    read: false
  }
})], z2.prototype, "voxelFields", null), e([y({
  type: Boolean,
  json: {
    name: "disablePopup",
    read: {
      reader: (e7, t6) => !t6.disablePopup
    },
    write: {
      enabled: true,
      ignoreOrigin: true,
      writer(e7, t6, i6) {
        t6[i6] = !e7;
      }
    },
    origins: {
      "portal-item": {
        default: true
      },
      "web-scene": {
        default: true
      }
    }
  }
})], z2.prototype, "popupEnabled", void 0), e([y({
  type: k,
  json: {
    read: false
  }
})], z2.prototype, "popupTemplate", null), e([y({
  readOnly: true
})], z2.prototype, "defaultPopupTemplate", null), e([y({
  type: d,
  readOnly: true,
  json: {
    read: false
  }
})], z2.prototype, "timeInfo", null), e([y({
  type: c3,
  json: {
    read: false
  }
})], z2.prototype, "timeExtent", void 0), e([y({
  type: l2,
  json: {
    read: false
  }
})], z2.prototype, "timeOffset", void 0), e([y({
  type: Boolean,
  nonNullable: true,
  json: {
    origins: {
      "web-scene": {
        name: "timeAnimation",
        write: true
      },
      service: {
        read: false
      }
    }
  }
})], z2.prototype, "useViewTime", void 0), z2 = e([a4("esri.layers.VoxelLayer")], z2);
var C = z2;
export {
  C as default
};
//# sourceMappingURL=VoxelLayer-2ZUABWRO.js.map
