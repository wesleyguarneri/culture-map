{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { isSymbol3D as t } from \"../../symbols.js\";\nimport { isDevEnvironment as e, adjustStaticAGOUrl as r } from \"../../core/devEnvironmentUtils.js\";\nimport l from \"../../core/Error.js\";\nimport { urlToObject as o, removeFile as n } from \"../../core/urlUtils.js\";\nimport s from \"../../portal/Portal.js\";\nimport { f as m } from \"../../chunks/persistableUrlUtils.js\";\nimport { fromJSON as i } from \"./jsonUtils.js\";\nimport a from \"./StyleOrigin.js\";\nimport { fetchStyle as u, requestJSON as p, makeCIMSymbolRef as f, Style2DUrlTemplate as y, symbolUrlFromStyleItem as c } from \"./styleUtils.js\";\nimport { Thumbnail as b } from \"./Thumbnail.js\";\nfunction g(t, e, r, o) {\n  const n = t.name;\n  return null == n ? Promise.reject(new l(\"symbolstyleutils:style-symbol-reference-name-missing\", \"Missing name in style symbol reference\")) : t.styleName && \"Esri2DPointSymbolsStyle\" === t.styleName ? d(n, e, o) : u(t, e, o).then(t => h(t, n, e, r, c, o));\n}\nfunction j(t, e) {\n  return e.items.find(e => e.name === t);\n}\nfunction h(u, y, c, g, h, d) {\n  const U = null != c?.portal ? c.portal : s.getDefault(),\n    N = {\n      portal: U,\n      url: o(u.baseUrl),\n      origin: \"portal-item\"\n    },\n    w = j(y, u.data);\n  if (!w) {\n    const t = `The symbol name '${y}' could not be found`;\n    return Promise.reject(new l(\"symbolstyleutils:symbol-name-not-found\", t, {\n      symbolName: y\n    }));\n  }\n  let S = m(h(w, g), N),\n    D = w.thumbnail?.href ?? null;\n  const O = w.thumbnail?.imageData;\n  e() && (S = r(S) ?? \"\", D = r(D));\n  const P = {\n    portal: U,\n    url: o(n(S)),\n    origin: \"portal-item\"\n  };\n  return p(S, d).then(e => {\n    const r = \"cimRef\" === g ? f(e.data) : e.data,\n      l = i(r, P);\n    if (l && t(l)) {\n      if (D) {\n        const t = m(D, N);\n        l.thumbnail = new b({\n          url: t\n        });\n      } else O && (l.thumbnail = new b({\n        url: `data:image/png;base64,${O}`\n      }));\n      u.styleUrl ? l.styleOrigin = new a({\n        portal: c.portal,\n        styleUrl: u.styleUrl,\n        name: y\n      }) : u.styleName && (l.styleOrigin = new a({\n        portal: c.portal,\n        styleName: u.styleName,\n        name: y\n      }));\n    }\n    return l;\n  });\n}\nfunction d(t, e, r) {\n  const l = y.replaceAll(/\\{SymbolName\\}/gi, t),\n    m = null != e.portal ? e.portal : s.getDefault();\n  return p(l, r).then(t => {\n    const e = f(t.data);\n    return i(e, {\n      portal: m,\n      url: o(n(l)),\n      origin: \"portal-item\"\n    });\n  });\n}\nexport { h as fetchSymbolFromStyle, j as getStyleItemFromStyle, g as resolveWebStyleSymbol };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcA,SAAS,EAAE,GAAG,GAAG,GAAG,GAAG;AACrB,QAAM,IAAI,EAAE;AACZ,SAAO,QAAQ,IAAI,QAAQ,OAAO,IAAI,EAAE,wDAAwD,wCAAwC,CAAC,IAAI,EAAE,aAAa,8BAA8B,EAAE,YAAYA,GAAE,GAAG,GAAG,CAAC,IAAI,EAAE,GAAG,GAAG,CAAC,EAAE,KAAK,CAAAC,OAAK,EAAEA,IAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;AAC/P;AACA,SAAS,EAAE,GAAG,GAAG;AACf,SAAO,EAAE,MAAM,KAAK,CAAAC,OAAKA,GAAE,SAAS,CAAC;AACvC;AACA,SAAS,EAAE,GAAGC,IAAGC,IAAGC,IAAGC,IAAGN,IAAG;AAC3B,QAAM,IAAI,QAAQI,IAAG,SAASA,GAAE,SAAS,EAAE,WAAW,GACpD,IAAI;AAAA,IACF,QAAQ;AAAA,IACR,KAAK,EAAE,EAAE,OAAO;AAAA,IAChB,QAAQ;AAAA,EACV,GACAG,KAAI,EAAEJ,IAAG,EAAE,IAAI;AACjB,MAAI,CAACI,IAAG;AACN,UAAM,IAAI,oBAAoBJ,EAAC;AAC/B,WAAO,QAAQ,OAAO,IAAI,EAAE,0CAA0C,GAAG;AAAA,MACvE,YAAYA;AAAA,IACd,CAAC,CAAC;AAAA,EACJ;AACA,MAAI,IAAI,EAAEG,GAAEC,IAAGF,EAAC,GAAG,CAAC,GAClB,IAAIE,GAAE,WAAW,QAAQ;AAC3B,QAAM,IAAIA,GAAE,WAAW;AACvB,EAAAH,GAAE,MAAM,IAAI,EAAE,CAAC,KAAK,IAAI,IAAI,EAAE,CAAC;AAC/B,QAAM,IAAI;AAAA,IACR,QAAQ;AAAA,IACR,KAAK,EAAE,GAAE,CAAC,CAAC;AAAA,IACX,QAAQ;AAAA,EACV;AACA,SAAOI,GAAE,GAAGR,EAAC,EAAE,KAAK,OAAK;AACvB,UAAM,IAAI,aAAaK,KAAII,GAAE,EAAE,IAAI,IAAI,EAAE,MACvC,IAAI,EAAE,GAAG,CAAC;AACZ,QAAI,KAAK,EAAE,CAAC,GAAG;AACb,UAAI,GAAG;AACL,cAAM,IAAI,EAAE,GAAG,CAAC;AAChB,UAAE,YAAY,IAAI,EAAE;AAAA,UAClB,KAAK;AAAA,QACP,CAAC;AAAA,MACH,MAAO,OAAM,EAAE,YAAY,IAAI,EAAE;AAAA,QAC/B,KAAK,yBAAyB,CAAC;AAAA,MACjC,CAAC;AACD,QAAE,WAAW,EAAE,cAAc,IAAI,EAAE;AAAA,QACjC,QAAQL,GAAE;AAAA,QACV,UAAU,EAAE;AAAA,QACZ,MAAMD;AAAA,MACR,CAAC,IAAI,EAAE,cAAc,EAAE,cAAc,IAAI,EAAE;AAAA,QACzC,QAAQC,GAAE;AAAA,QACV,WAAW,EAAE;AAAA,QACb,MAAMD;AAAA,MACR,CAAC;AAAA,IACH;AACA,WAAO;AAAA,EACT,CAAC;AACH;AACA,SAASH,GAAE,GAAG,GAAG,GAAG;AAClB,QAAM,IAAI,EAAE,WAAW,oBAAoB,CAAC,GAC1C,IAAI,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,WAAW;AACjD,SAAOQ,GAAE,GAAG,CAAC,EAAE,KAAK,CAAAP,OAAK;AACvB,UAAMC,KAAIO,GAAER,GAAE,IAAI;AAClB,WAAO,EAAEC,IAAG;AAAA,MACV,QAAQ;AAAA,MACR,KAAK,EAAE,GAAE,CAAC,CAAC;AAAA,MACX,QAAQ;AAAA,IACV,CAAC;AAAA,EACH,CAAC;AACH;",
  "names": ["d", "t", "e", "y", "c", "g", "h", "w", "b", "p"]
}
