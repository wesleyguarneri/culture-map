{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/arcade/functions/featuresetstats.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ArcadeDate as n } from \"../ArcadeDate.js\";\nimport { ArcadeExecutionError as t, ExecutionErrorCodes as e } from \"../executionError.js\";\nimport { H as a, u as r, o as i, c as o, q as s, K as c, N as u } from \"../../chunks/languageUtils.js\";\nimport { calculateStat as f } from \"./fieldStats.js\";\nimport { SqlTimeStampOffset as d } from \"../../core/sql/SqlTimestampOffset.js\";\nimport { WhereClause as l } from \"../../core/sql/WhereClause.js\";\nasync function m(n, t, e, a) {\n  if (1 === e.length) {\n    if (i(e[0])) return f(n, e[0], c(e[1], -1));\n    if (s(e[0])) return f(n, e[0].toArray(), c(e[1], -1));\n  } else if (2 === e.length) {\n    if (i(e[0])) return f(n, e[0], c(e[1], -1));\n    if (s(e[0])) return f(n, e[0].toArray(), c(e[1], -1));\n    if (r(e[0])) {\n      const r = await e[0].load(),\n        i = await y(l.create(e[1], r.getFieldsIndex(), r.dateFieldsTimeZoneDefaultUTC), a, t);\n      return g(t, await e[0].calculateStatistic(n, i, c(e[2], 1e3), t.abortSignal));\n    }\n  } else if (3 === e.length && r(e[0])) {\n    const r = await e[0].load(),\n      i = await y(l.create(e[1], r.getFieldsIndex(), r.dateFieldsTimeZoneDefaultUTC), a, t);\n    return g(t, await e[0].calculateStatistic(n, i, c(e[2], 1e3), t.abortSignal));\n  }\n  return f(n, e, -1);\n}\nfunction g(t, e) {\n  return e instanceof d ? n.fromReaderAsTimeStampOffset(e.toStorageFormat()) : e instanceof Date ? n.dateJSAndZoneToArcadeDate(e, u(t)) : e;\n}\nasync function y(n, t, e) {\n  const a = n.getVariables();\n  if (a.length > 0) {\n    const r = [];\n    for (let n = 0; n < a.length; n++) {\n      const i = {\n        name: a[n]\n      };\n      r.push(await t.evaluateIdentifier(e, i));\n    }\n    const i = {};\n    for (let n = 0; n < a.length; n++) i[a[n]] = r[n];\n    return n.parameters = i, n;\n  }\n  return n;\n}\nfunction A(n) {\n  \"async\" === n.mode && (n.functions.stdev = function (t, e) {\n    return n.standardFunctionAsync(t, e, (e, a, r) => m(\"stdev\", t, r, n));\n  }, n.functions.variance = function (t, e) {\n    return n.standardFunctionAsync(t, e, (e, a, r) => m(\"variance\", t, r, n));\n  }, n.functions.average = function (t, e) {\n    return n.standardFunctionAsync(t, e, (e, a, r) => m(\"mean\", t, r, n));\n  }, n.functions.mean = function (t, e) {\n    return n.standardFunctionAsync(t, e, (e, a, r) => m(\"mean\", t, r, n));\n  }, n.functions.sum = function (t, e) {\n    return n.standardFunctionAsync(t, e, (e, a, r) => m(\"sum\", t, r, n));\n  }, n.functions.min = function (t, e) {\n    return n.standardFunctionAsync(t, e, (e, a, r) => m(\"min\", t, r, n));\n  }, n.functions.max = function (t, e) {\n    return n.standardFunctionAsync(t, e, (e, a, r) => m(\"max\", t, r, n));\n  }, n.functions.count = function (c, u) {\n    return n.standardFunctionAsync(c, u, async (n, f, d) => {\n      if (a(d, 1, 1, c, u), r(d[0])) return d[0].count(n.abortSignal);\n      if (i(d[0]) || o(d[0])) return d[0].length;\n      if (s(d[0])) return d[0].length();\n      throw new t(c, e.InvalidParameter, u);\n    });\n  });\n}\nexport { A as registerFunctions };"],
  "mappings": "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",
  "names": ["m", "a", "r", "n", "i", "e"]
}
