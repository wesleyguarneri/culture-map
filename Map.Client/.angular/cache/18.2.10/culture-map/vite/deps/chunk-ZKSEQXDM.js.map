{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ReadDepth as e } from \"../output/ReadDepth.glsl.js\";\nimport { glsl as t } from \"../../shaderModules/interfaces.js\";\nimport { Texture2DPassUniform as r } from \"../../shaderModules/Texture2DPassUniform.js\";\nfunction a(a, o) {\n  if (!o.multipassEnabled) return;\n  a.fragment.include(e), a.fragment.uniforms.add(new r(\"terrainDepthTexture\", (e, t) => t.multipassTerrain.depth?.attachment));\n  const n = o.occlusionPass;\n  a.fragment.code.add(t`\n   ${n ? \"bool\" : \"void\"} terrainDepthTest(float fragmentDepth) {\n      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;\n      float linearDepth = linearizeDepth(depth);\n      ${n ? t`return fragmentDepth < linearDepth && depth < 1.0;` : t`\n          if(fragmentDepth ${o.cullAboveGround ? \">\" : \"<=\"} linearDepth){\n            discard;\n          }`}\n    }`);\n}\nclass o {\n  constructor() {\n    this.cullAboveGround = !1;\n  }\n}\nexport { o as MultipassTerrainUniforms, a as multipassTerrainTest };"],
  "mappings": ";;;;;;;;;;;AAOA,SAAS,EAAEA,IAAGC,IAAG;AACf,MAAI,CAACA,GAAE,iBAAkB;AACzB,EAAAD,GAAE,SAAS,QAAQ,CAAC,GAAGA,GAAE,SAAS,SAAS,IAAI,IAAI,EAAE,uBAAuB,CAAC,GAAG,MAAM,EAAE,iBAAiB,OAAO,UAAU,CAAC;AAC3H,QAAM,IAAIC,GAAE;AACZ,EAAAD,GAAE,SAAS,KAAK,IAAI;AAAA,KACjB,IAAI,SAAS,MAAM;AAAA;AAAA;AAAA,QAGhB,IAAI,wDAAwD;AAAA,6BACvCC,GAAE,kBAAkB,MAAM,IAAI;AAAA;AAAA,YAE/C;AAAA,MACN;AACN;AACA,IAAMA,KAAN,MAAQ;AAAA,EACN,cAAc;AACZ,SAAK,kBAAkB;AAAA,EACzB;AACF;",
  "names": ["a", "o"]
}
