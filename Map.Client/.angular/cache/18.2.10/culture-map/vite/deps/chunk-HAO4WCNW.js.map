{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { set as e } from \"../../../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as t } from \"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { RgbaFloatEncoding as r } from \"../util/RgbaFloatEncoding.glsl.js\";\nimport { Float2PassUniform as a } from \"../../shaderModules/Float2PassUniform.js\";\nimport { glsl as o } from \"../../shaderModules/interfaces.js\";\nfunction i(e) {\n  e.include(r), e.code.add(o`float linearDepthFromFloat(float depth, vec2 nearFar) {\nreturn -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);\n}\nfloat linearDepthFromRGBA(vec4 depth, vec2 nearFar) {\nreturn linearDepthFromFloat(rgba2float(depth), nearFar);\n}\nfloat linearDepthFromTexture(sampler2D depthTexture, vec2 uv, vec2 nearFar) {\nivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));\nreturn linearDepthFromRGBA(texelFetch(depthTexture, iuv, 0), nearFar);\n}`);\n}\nfunction c(e) {\n  e.uniforms.add(new a(\"zProjectionMap\", (e, t) => d(t.camera))), e.code.add(o`float linearizeDepth(float depth) {\nfloat depthNdc = depth * 2.0 - 1.0;\nfloat c1 = zProjectionMap[0];\nfloat c2 = zProjectionMap[1];\nreturn -(c1 / (depthNdc + c2 + 1e-7));\n}`), e.code.add(o`float depthFromTexture(sampler2D depthTexture, vec2 uv) {\nivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));\nfloat depth = texelFetch(depthTexture, iuv, 0).r;\nreturn depth;\n}`), e.code.add(o`float linearDepthFromTexture(sampler2D depthTexture, vec2 uv) {\nreturn linearizeDepth(depthFromTexture(depthTexture, uv));\n}`);\n}\nfunction d(t) {\n  const r = t.projectionMatrix;\n  return e(n, r[14], r[10]);\n}\nconst n = t();\nexport { c as ReadDepth, i as ReadLinearDepth };"],
  "mappings": ";;;;;;;;;;;;;;;;;AASA,SAAS,EAAEA,IAAG;AACZ,EAAAA,GAAE,QAAQ,CAAC,GAAGA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASzB;AACF;AACA,SAAS,EAAEA,IAAG;AACZ,EAAAA,GAAE,SAAS,IAAI,IAAI,EAAE,kBAAkB,CAACA,IAAG,MAAM,EAAE,EAAE,MAAM,CAAC,CAAC,GAAGA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,EAK3E,GAAGA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA,EAId,GAAGA,GAAE,KAAK,IAAI;AAAA;AAAA,EAEd;AACF;AACA,SAAS,EAAE,GAAG;AACZ,QAAM,IAAI,EAAE;AACZ,SAAOC,GAAEC,IAAG,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC;AAC1B;AACA,IAAMA,KAAI,EAAE;",
  "names": ["e", "o", "n"]
}
