import {
  L,
  W
} from "./chunk-4HFQTM2A.js";
import "./chunk-55LUHDLJ.js";
import "./chunk-BFBXDOCU.js";
import "./chunk-PNAY7MWN.js";
import "./chunk-3DTPZR2V.js";
import "./chunk-3X2VH2J4.js";
import "./chunk-LSPBOBQ5.js";
import "./chunk-37FUJHR2.js";
import "./chunk-UOIZXQPU.js";
import "./chunk-YKOY3XWH.js";
import "./chunk-D3AKDIJC.js";
import "./chunk-H32YBWKM.js";
import "./chunk-MI7B6AEI.js";
import "./chunk-DKRGLYVY.js";
import "./chunk-IWPREEVF.js";
import "./chunk-MLUSPV66.js";
import "./chunk-DME7BDTC.js";
import "./chunk-HR6RJVBL.js";
import "./chunk-7PY7QIZQ.js";
import {
  e as e4
} from "./chunk-ZDGJDLVE.js";
import "./chunk-TDWXQPNS.js";
import "./chunk-3JEG7JG5.js";
import "./chunk-MRA7OOFL.js";
import "./chunk-OOVP3XBH.js";
import "./chunk-AHCFNSHV.js";
import "./chunk-K5IDJ4GJ.js";
import "./chunk-IQRHHD7Z.js";
import "./chunk-VTRNFNJR.js";
import "./chunk-ONOHIFCT.js";
import "./chunk-W6GMJ4SS.js";
import "./chunk-IIVUY2T7.js";
import {
  e as e3
} from "./chunk-HBMA4SRU.js";
import "./chunk-TPVEWGXS.js";
import "./chunk-ATQ5GYTB.js";
import "./chunk-ZUHJZKEM.js";
import "./chunk-B4EEJXBQ.js";
import "./chunk-BB54E5CP.js";
import "./chunk-SLCHZ6DD.js";
import "./chunk-YZI2XBXY.js";
import "./chunk-EK3IKAMF.js";
import "./chunk-IJVN5N2Q.js";
import "./chunk-LM2N2I5R.js";
import "./chunk-ZQ57XGAE.js";
import "./chunk-UXW277HY.js";
import "./chunk-OR5F5ACQ.js";
import "./chunk-E2WAKNLZ.js";
import "./chunk-Z3GMSC63.js";
import "./chunk-F35MWZH7.js";
import "./chunk-ED7UGR2X.js";
import "./chunk-YA5CTHMT.js";
import "./chunk-4QBFFLOC.js";
import "./chunk-O437BSYE.js";
import "./chunk-YZNT6QWD.js";
import "./chunk-JDUU4ZDX.js";
import "./chunk-TT5ZTQDR.js";
import "./chunk-B7GRWOZI.js";
import "./chunk-SAOPWBKU.js";
import "./chunk-Z2JVKOTW.js";
import "./chunk-YW5DYBTP.js";
import "./chunk-2C54H6O6.js";
import "./chunk-UHMXQYZT.js";
import "./chunk-LZUPV7SL.js";
import "./chunk-2GRLWAHK.js";
import "./chunk-C3UDKWXD.js";
import "./chunk-YTFX4PFO.js";
import "./chunk-VOROPCKI.js";
import "./chunk-N3IR233K.js";
import "./chunk-DSMB46HB.js";
import "./chunk-USSQX44O.js";
import "./chunk-OTI4DGZ5.js";
import "./chunk-KQDYTHCF.js";
import "./chunk-TR6FCWXY.js";
import "./chunk-TROPJVOL.js";
import "./chunk-JKHDI77M.js";
import "./chunk-3AY5EJVP.js";
import "./chunk-XQCKIDQO.js";
import "./chunk-BNK4CEA6.js";
import "./chunk-BPMRTFHU.js";
import "./chunk-6LDLRQX4.js";
import "./chunk-Z4YAQ5JI.js";
import "./chunk-K2XCQKCC.js";
import "./chunk-AJS4B62I.js";
import "./chunk-S5EXT7FA.js";
import "./chunk-73Y7XDLH.js";
import "./chunk-YFOAET4H.js";
import "./chunk-5U4TBXYS.js";
import "./chunk-6WG22V46.js";
import "./chunk-OOGIXDXG.js";
import "./chunk-JFYQTYD3.js";
import "./chunk-KDJZAYOF.js";
import "./chunk-5453A3C5.js";
import "./chunk-HCFDI7IX.js";
import "./chunk-AQJS6F3O.js";
import "./chunk-WUB6LJVL.js";
import "./chunk-QXSES7JX.js";
import "./chunk-5YIMTGEC.js";
import "./chunk-YPU2P4KO.js";
import "./chunk-UFVMJL32.js";
import "./chunk-B67FUUE5.js";
import "./chunk-5GQ3OMCZ.js";
import "./chunk-2SMFPIRI.js";
import "./chunk-2GMKFOCL.js";
import "./chunk-ZR5BOILP.js";
import "./chunk-QCBC3RJX.js";
import "./chunk-6XGV55XZ.js";
import "./chunk-HOH445RO.js";
import "./chunk-63QCTVYB.js";
import "./chunk-U74WRHVJ.js";
import "./chunk-TCPN7AEH.js";
import "./chunk-W2IRSMFY.js";
import "./chunk-TRSGUVSM.js";
import "./chunk-U3MA63JX.js";
import "./chunk-WYKKCLBI.js";
import "./chunk-PFMGJTQM.js";
import "./chunk-Q7SRMLJZ.js";
import "./chunk-PQ4T66BG.js";
import "./chunk-SWPHGZYB.js";
import "./chunk-DWASPXVI.js";
import "./chunk-TNWXOQKO.js";
import "./chunk-MAO5BVLA.js";
import "./chunk-T2S5VXNP.js";
import "./chunk-4U5GUJRA.js";
import "./chunk-7KRERHHR.js";
import "./chunk-T4AP6CTC.js";
import "./chunk-HD65DNIO.js";
import "./chunk-4KWLMXIA.js";
import {
  c
} from "./chunk-BIUXKPKA.js";
import "./chunk-N6TJI25E.js";
import "./chunk-634JLXD4.js";
import "./chunk-Y3EDGYWG.js";
import "./chunk-UF6JOUSJ.js";
import "./chunk-T5JGQSO3.js";
import "./chunk-CIW3KHOW.js";
import "./chunk-J55F4AC2.js";
import "./chunk-IQLBZKUD.js";
import "./chunk-7MZZCQ64.js";
import "./chunk-DI6VABAK.js";
import "./chunk-5EBAJR7X.js";
import "./chunk-5JA2JHV3.js";
import "./chunk-JOJZ6YC5.js";
import "./chunk-L4TOCXR5.js";
import "./chunk-IMVP5ADD.js";
import "./chunk-H7WPOTQH.js";
import "./chunk-RTWBKPWJ.js";
import "./chunk-ZZEAVAVX.js";
import "./chunk-SJX5DIA7.js";
import "./chunk-SGSUM5YO.js";
import "./chunk-SG5TCCCK.js";
import "./chunk-6A7CWJED.js";
import "./chunk-LFKEQKEA.js";
import "./chunk-DUTZNK67.js";
import "./chunk-IN6BQCWS.js";
import "./chunk-CRNUMTSV.js";
import "./chunk-JM7HAEY6.js";
import "./chunk-DOK4SACJ.js";
import "./chunk-OUKUASAF.js";
import "./chunk-V5RMUGJJ.js";
import "./chunk-D2NB6D6N.js";
import "./chunk-UWJIHV6Q.js";
import "./chunk-ZUSCOMQM.js";
import "./chunk-DSEUCBVP.js";
import "./chunk-UPDWQH75.js";
import "./chunk-RXWBJSJ5.js";
import "./chunk-M2NS3MSU.js";
import "./chunk-HMNBB7ED.js";
import "./chunk-3RRMLFFN.js";
import "./chunk-DR5TVNEL.js";
import "./chunk-HT2T6PUB.js";
import "./chunk-K64AAM77.js";
import "./chunk-6EUVKE22.js";
import "./chunk-A3NNJ7XA.js";
import "./chunk-OKJHJ3CY.js";
import "./chunk-XTVPEVHA.js";
import "./chunk-DTUSTSEJ.js";
import "./chunk-JCWFGRHQ.js";
import "./chunk-JILEJ6R2.js";
import "./chunk-GAW5JHG4.js";
import "./chunk-OEKKQXBD.js";
import "./chunk-S3IO7V4Q.js";
import "./chunk-DZALMCYL.js";
import "./chunk-K226GFDN.js";
import "./chunk-4ZZRP4MA.js";
import "./chunk-7ZJ6P7J7.js";
import "./chunk-FPFZQCEQ.js";
import "./chunk-VDB6Y4TZ.js";
import {
  B,
  e2
} from "./chunk-WYMXVOAT.js";
import {
  n as n2
} from "./chunk-K7TO5IIO.js";
import "./chunk-A4VVDRCH.js";
import {
  g
} from "./chunk-CQDYITZC.js";
import "./chunk-5I6J67HP.js";
import "./chunk-YVULORT6.js";
import "./chunk-PB33BAI3.js";
import "./chunk-CVB43GGP.js";
import "./chunk-EODIWR2E.js";
import "./chunk-LLDOZWVV.js";
import "./chunk-FYAEQPUY.js";
import "./chunk-7XMEZQ34.js";
import "./chunk-BDM2D6IC.js";
import "./chunk-U2ZVAEKG.js";
import "./chunk-EDSMXTFO.js";
import "./chunk-MNLT652N.js";
import "./chunk-OGZAGPIO.js";
import "./chunk-HJJIIYFF.js";
import "./chunk-7RMVJCDW.js";
import "./chunk-T6GCUITX.js";
import "./chunk-TUIGM7TV.js";
import "./chunk-IHVSZYZS.js";
import "./chunk-6CA6K3O7.js";
import "./chunk-NYQ5CYNR.js";
import "./chunk-O7UDKFOW.js";
import "./chunk-TKPMIAIW.js";
import "./chunk-NQOJNTB3.js";
import "./chunk-MFOQYQFG.js";
import "./chunk-NKCPFCP3.js";
import "./chunk-3ZXOUEQG.js";
import "./chunk-AXVPJBVW.js";
import "./chunk-OXEPWRM7.js";
import "./chunk-POILQGXA.js";
import "./chunk-JJS7PR2U.js";
import "./chunk-L5YS4GSA.js";
import "./chunk-PRREDSOB.js";
import "./chunk-V5C6HSAM.js";
import "./chunk-SYATLP3H.js";
import "./chunk-V6AMQYXE.js";
import {
  P,
  d,
  v,
  w
} from "./chunk-6WHTZNUH.js";
import "./chunk-EITGQLII.js";
import "./chunk-TIVJXVMN.js";
import "./chunk-XNUH25NY.js";
import "./chunk-WGAPNV7F.js";
import "./chunk-BXQGM56A.js";
import {
  e
} from "./chunk-4Z5SGKRM.js";
import "./chunk-YPWMP2VK.js";
import "./chunk-23E6RT3O.js";
import "./chunk-RCBGISRX.js";
import "./chunk-2P72IR2Y.js";
import {
  S,
  i
} from "./chunk-ANKOCGE2.js";
import {
  y
} from "./chunk-7CJXZOFG.js";
import "./chunk-IRGZKO7V.js";
import "./chunk-5SELS7VU.js";
import {
  a3 as a
} from "./chunk-DDYVXG4F.js";
import "./chunk-ANP42J2U.js";
import "./chunk-HJY2YILU.js";
import "./chunk-7DA6A5LD.js";
import "./chunk-2MMLMOWS.js";
import "./chunk-4323ZVPF.js";
import {
  n2 as n
} from "./chunk-WYIDUUN2.js";
import "./chunk-DXLOWWK7.js";
import {
  __async,
  __spreadValues
} from "./chunk-JWIQHGQB.js";

// ../../../node_modules/@arcgis/core/widgets/Popup/css.js
var t = "esri-popup";
var o = `${t}--is-docked`;
var e5 = {
  base: t,
  baseHidden: `${t}--hidden`,
  main: `${t}__main-container`,
  shadow: `${t}--shadow`,
  isDocked: o,
  isDockedTopLeft: `${o}-top-left`,
  isDockedTopCenter: `${o}-top-center`,
  isDockedTopRight: `${o}-top-right`,
  isDockedBottomLeft: `${o}-bottom-left`,
  isDockedBottomCenter: `${o}-bottom-center`,
  isDockedBottomRight: `${o}-bottom-right`,
  alignTopCenter: `${t}--aligned-top-center`,
  alignBottomCenter: `${t}--aligned-bottom-center`,
  alignTopLeft: `${t}--aligned-top-left`,
  alignBottomLeft: `${t}--aligned-bottom-left`,
  alignTopRight: `${t}--aligned-top-right`,
  alignBottomRight: `${t}--aligned-bottom-right`,
  pointer: `${t}__pointer`,
  pointerDirection: `${t}__pointer-direction`
};

// ../../../node_modules/@arcgis/core/widgets/Popup/PopupViewModel.js
var e6 = class extends W {
  constructor(o2) {
    super(o2);
  }
};
e6 = e([a("esri.widgets.Popup.PopupViewModel")], e6);
var t2 = e6;

// ../../../node_modules/@arcgis/core/widgets/Popup/PopupVisibleElements.js
var s = class extends S {
  constructor() {
    super(...arguments), this.actionBar = true, this.closeButton = true, this.collapseButton = true, this.featureNavigation = true, this.featureListLayerTitle = true, this.heading = true, this.spinner = true;
  }
};
e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "actionBar", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "closeButton", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "collapseButton", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "featureNavigation", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "featureListLayerTitle", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "heading", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "spinner", void 0), s = e([a("esri.widgets.Popup.PopupVisibleElements")], s);
var p = s;

// ../../../node_modules/@arcgis/core/widgets/Popup.js
var _ = {
  buttonEnabled: true,
  position: "auto",
  breakpoint: {
    width: 544
  }
};
var E = class extends B {
  constructor(e7, t3) {
    super(e7, t3), this._dockAction = new c({
      id: "popup-dock-action"
    }), this._featuresWidget = new L({
      responsiveActionsEnabled: true
    }), this._containerNode = null, this._mainContainerNode = null, this._pointerOffsetInPx = 16, this.alignment = "auto", this.dockEnabled = false, this.headingLevel = 2, this.messages = null, this.viewModel = new t2(), this.visibleElements = new p();
  }
  initialize() {
    this.addHandles([d(() => [this.viewModel?.view?.widthBreakpoint, this.dockEnabled], () => this._handleDockIcon(), P), d(() => [this.dockEnabled, this.messages?.undock, this.messages?.dock], () => this._handleDockEnabled(), P), d(() => this.dockOptions, (e7) => {
      const {
        _dockAction: t3
      } = this, i2 = this._featuresWidget.headerActions;
      i2.remove(t3), e7.buttonEnabled && i2.add(t3);
    }, P), d(() => this.viewModel?.screenLocation, () => this._positionContainer()), d(() => [this.viewModel?.active, this.dockEnabled], () => this._toggleScreenLocationEnabled()), d(() => [this.viewModel?.screenLocation, this.viewModel?.view?.padding, this.viewModel?.view?.size, this.viewModel?.active, this.viewModel?.location, this.alignment], () => this.reposition()), d(() => this.viewModel?.view?.size, (e7, t3) => this._updateDockEnabledForViewSize(e7, t3)), d(() => this.viewModel?.view, (e7, t3) => this._viewChange(e7, t3)), d(() => this.viewModel?.view?.ready, (e7, t3) => this._viewReadyChange(e7 ?? false, t3 ?? false)), d(() => this.viewModel, () => this._featuresWidget.viewModel = this.viewModel, P), d(() => this._featureNavigationTop, (e7) => this._featuresWidget.featureNavigationTop = e7, P), d(() => this.headingLevel, (e7) => this._featuresWidget.headingLevel = e7, P), d(() => this.visibleElements.actionBar, (e7) => this._featuresWidget.visibleElements.actionBar = !!e7, P), d(() => this.visibleElements.closeButton, (e7) => this._featuresWidget.visibleElements.closeButton = !!e7, P), d(() => this.visibleElements.collapseButton, (e7) => this._featuresWidget.visibleElements.collapseButton = !!e7, P), d(() => this.visibleElements.heading, (e7) => this._featuresWidget.visibleElements.heading = !!e7, P), d(() => this.visibleElements.spinner, (e7) => this._featuresWidget.visibleElements.spinner = !!e7, P), d(() => this.visibleElements.featureNavigation, (e7) => this._featuresWidget.visibleElements.featureNavigation = !!e7, P), d(() => this.visibleElements.featureListLayerTitle, (e7) => this._featuresWidget.visibleElements.featureListLayerTitle = !!e7, P), v(() => this._featuresWidget, "trigger-header-action", (e7) => {
      e7.action === this._dockAction && (this.dockEnabled = !this.dockEnabled);
    })]);
  }
  normalizeCtorArgs(e7) {
    const t3 = __spreadValues({}, e7);
    return null != e7?.visibleElements && (t3.visibleElements = new p(e7.visibleElements), null != e7.collapseEnabled && (t3.visibleElements.collapseButton = e7.collapseEnabled), null != e7.spinnerEnabled && (t3.visibleElements.spinner = e7.spinnerEnabled)), t3;
  }
  destroy() {
    this._dockAction.destroy(), this._featuresWidget?.destroy();
  }
  get _featureNavigationTop() {
    const {
      currentAlignment: e7,
      currentDockPosition: t3
    } = this;
    return "bottom-left" === e7 || "bottom-center" === e7 || "bottom-right" === e7 || "top-left" === t3 || "top-center" === t3 || "top-right" === t3;
  }
  get actions() {
    return this.viewModel.actions;
  }
  set actions(e7) {
    this.viewModel.actions = e7;
  }
  get active() {
    return this.viewModel.active;
  }
  get autoCloseEnabled() {
    return this.viewModel.autoCloseEnabled;
  }
  set autoCloseEnabled(e7) {
    this.viewModel.autoCloseEnabled = e7;
  }
  get defaultPopupTemplateEnabled() {
    return this.viewModel.defaultPopupTemplateEnabled;
  }
  set defaultPopupTemplateEnabled(e7) {
    this.viewModel.defaultPopupTemplateEnabled = e7;
  }
  get content() {
    return this.viewModel.content;
  }
  set content(e7) {
    this.viewModel.content = e7;
  }
  get collapsed() {
    return this._featuresWidget.collapsed;
  }
  set collapsed(e7) {
    this._featuresWidget.collapsed = e7;
  }
  get collapseEnabled() {
    return i(n.getLogger(this), "collapseEnabled", {
      replacement: "PopupVisibleElements.collapseButton",
      version: "4.29"
    }), this.visibleElements.collapseButton;
  }
  set collapseEnabled(e7) {
    i(n.getLogger(this), "collapseEnabled", {
      replacement: "PopupVisibleElements.collapseButton",
      version: "4.29"
    }), this.visibleElements.collapseButton = e7;
  }
  get currentAlignment() {
    return this._getCurrentAlignment();
  }
  get currentDockPosition() {
    return this._getCurrentDockPosition();
  }
  get dockOptions() {
    return this._get("dockOptions") || _;
  }
  set dockOptions(e7) {
    const t3 = __spreadValues({}, _), i2 = this.viewModel?.view?.breakpoints, o2 = {};
    i2 && (o2.width = i2.xsmall, o2.height = i2.xsmall);
    const n3 = __spreadValues(__spreadValues({}, t3), e7), s2 = __spreadValues(__spreadValues({}, t3.breakpoint), o2), {
      breakpoint: r
    } = n3;
    "object" == typeof r ? n3.breakpoint = __spreadValues(__spreadValues({}, s2), r) : r && (n3.breakpoint = s2), this._set("dockOptions", n3), this._setCurrentDockPosition(), this.reposition();
  }
  get featureCount() {
    return this.viewModel.featureCount;
  }
  get featureMenuOpen() {
    return this.viewModel.featureMenuOpen;
  }
  set featureMenuOpen(e7) {
    this.viewModel.featureMenuOpen = e7;
  }
  get features() {
    return this.viewModel.features;
  }
  set features(e7) {
    this.viewModel.features = e7;
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e7) {
    this.viewModel.goToOverride = e7;
  }
  get highlightEnabled() {
    return this.viewModel.highlightEnabled;
  }
  set highlightEnabled(e7) {
    this.viewModel.highlightEnabled = e7;
  }
  get icon() {
    return "popup";
  }
  set icon(e7) {
    this._overrideIfSome("icon", e7);
  }
  get location() {
    return this.viewModel.location;
  }
  set location(e7) {
    this.viewModel.location = e7;
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e7) {
    this._overrideIfSome("label", e7);
  }
  get promises() {
    return this.viewModel.promises;
  }
  set promises(e7) {
    this.viewModel.promises = e7;
  }
  get selectedFeature() {
    return this.viewModel.selectedFeature;
  }
  get selectedFeatureIndex() {
    return this.viewModel.selectedFeatureIndex;
  }
  set selectedFeatureIndex(e7) {
    this.viewModel.selectedFeatureIndex = e7;
  }
  get selectedFeatureWidget() {
    return this._featuresWidget.selectedFeatureWidget;
  }
  get spinnerEnabled() {
    return i(n.getLogger(this), "spinnerEnabled", {
      replacement: "PopupVisibleElements.spinner",
      version: "4.29"
    }), this.visibleElements.spinner;
  }
  set spinnerEnabled(e7) {
    i(n.getLogger(this), "spinnerEnabled", {
      replacement: "PopupVisibleElements.spinner",
      version: "4.29"
    }), this.visibleElements.spinner = e7;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e7) {
    this.viewModel.title = e7;
  }
  get updateLocationEnabled() {
    return this.viewModel.updateLocationEnabled;
  }
  set updateLocationEnabled(e7) {
    this.viewModel.updateLocationEnabled = e7;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e7) {
    this.viewModel.view = e7;
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(e7) {
    this.viewModel.visible = e7;
  }
  blur() {
    const {
      active: e7
    } = this.viewModel;
    e7 || n.getLogger(this).warn("Popup can only be blurred when currently active."), this._featuresWidget.blur();
  }
  clear() {
    return this.viewModel.clear();
  }
  close() {
    this.visible = false;
  }
  fetchFeatures(e7, t3) {
    return this.viewModel.fetchFeatures(e7, t3);
  }
  focus() {
    const {
      active: e7
    } = this.viewModel;
    e7 || n.getLogger(this).warn("Popup can only be focused when currently active."), this.reposition(), requestAnimationFrame(() => {
      this._featuresWidget.focus();
    });
  }
  next() {
    return this.viewModel.next();
  }
  open(e7) {
    const t3 = !!e7 && !!e7.featureMenuOpen, i2 = {
      collapsed: !!e7 && !!e7.collapsed,
      featureMenuOpen: t3
    };
    this.set(i2), this.viewModel.open(e7), this._shouldFocus(e7);
  }
  previous() {
    return this.viewModel.previous();
  }
  reposition() {
    this.renderNow(), this._positionContainer(), this._setCurrentAlignment();
  }
  triggerAction(e7) {
    return this.viewModel.triggerAction(e7);
  }
  render() {
    const {
      dockEnabled: e7,
      currentAlignment: t3,
      currentDockPosition: i2
    } = this, {
      active: o2,
      screenLocation: n3
    } = this.viewModel, s2 = o2 && e7, r = o2 && !e7, l = this.selectedFeature?.layer?.title, a2 = this.selectedFeature?.layer?.id, d2 = {
      [e5.alignTopCenter]: "top-center" === t3,
      [e5.alignBottomCenter]: "bottom-center" === t3,
      [e5.alignTopLeft]: "top-left" === t3,
      [e5.alignBottomLeft]: "bottom-left" === t3,
      [e5.alignTopRight]: "top-right" === t3,
      [e5.alignBottomRight]: "bottom-right" === t3,
      [e5.isDocked]: s2,
      [e5.shadow]: r,
      [e5.isDockedTopLeft]: "top-left" === i2,
      [e5.isDockedTopCenter]: "top-center" === i2,
      [e5.isDockedTopRight]: "top-right" === i2,
      [e5.isDockedBottomLeft]: "bottom-left" === i2,
      [e5.isDockedBottomCenter]: "bottom-center" === i2,
      [e5.isDockedBottomRight]: "bottom-right" === i2
    };
    return n2("div", {
      afterCreate: this._positionContainer,
      afterUpdate: this._positionContainer,
      bind: this,
      class: this.classes(e5.base, d2, {
        [e5.baseHidden]: !n3 && !e7
      }),
      "data-layer-id": a2,
      "data-layer-title": l,
      role: "presentation"
    }, o2 ? [this._renderMainContainer(), this._renderPointer()] : null);
  }
  _renderPointer() {
    return this.dockEnabled ? null : n2("div", {
      class: e5.pointer,
      key: "popup-pointer",
      role: "presentation"
    }, n2("div", {
      class: this.classes(e5.pointerDirection, e5.shadow)
    }));
  }
  _renderMainContainer() {
    const {
      dockEnabled: e7
    } = this, t3 = {
      [e5.shadow]: e7
    };
    return n2("div", {
      afterCreate: this._setMainContainerNode,
      afterUpdate: this._setMainContainerNode,
      bind: this,
      class: this.classes(e5.main, e3.widget, t3)
    }, this._featuresWidget.render());
  }
  _shouldFocus(e7) {
    return __async(this, null, function* () {
      e7?.shouldFocus && (yield w(() => true === this.viewModel?.active), this.focus());
    });
  }
  _isOutsideView(e7) {
    const {
      popupHeight: t3,
      popupWidth: i2,
      screenLocation: o2,
      side: n3,
      view: s2
    } = e7;
    if (isNaN(i2) || isNaN(t3) || !s2 || !o2) return false;
    const r = s2.padding;
    return "right" === n3 && o2.x + i2 / 2 > s2.width - r.right || "left" === n3 && o2.x - i2 / 2 < r.left || "top" === n3 && o2.y - t3 < r.top || "bottom" === n3 && o2.y + t3 > s2.height - r.bottom;
  }
  _calculateAutoAlignment(e7) {
    if ("auto" !== e7) return e7;
    const {
      _pointerOffsetInPx: t3,
      _containerNode: i2,
      _mainContainerNode: o2,
      viewModel: n3
    } = this, {
      screenLocation: s2,
      view: r
    } = n3;
    if (null == s2 || !r || !i2) return "top-center";
    function l(e8) {
      return parseInt(e8.replaceAll(/[^-\d.]/g, ""), 10);
    }
    const a2 = o2 ? window.getComputedStyle(o2, null) : null, d2 = a2 ? l(a2.getPropertyValue("max-height")) : 0, c2 = a2 ? l(a2.getPropertyValue("height")) : 0, {
      height: p2,
      width: h
    } = i2.getBoundingClientRect(), u = h + t3, g2 = Math.max(p2, d2, c2) + t3, v2 = this._isOutsideView({
      popupHeight: g2,
      popupWidth: u,
      screenLocation: s2,
      side: "right",
      view: r
    }), m = this._isOutsideView({
      popupHeight: g2,
      popupWidth: u,
      screenLocation: s2,
      side: "left",
      view: r
    }), b = this._isOutsideView({
      popupHeight: g2,
      popupWidth: u,
      screenLocation: s2,
      side: "top",
      view: r
    }), f = this._isOutsideView({
      popupHeight: g2,
      popupWidth: u,
      screenLocation: s2,
      side: "bottom",
      view: r
    });
    return m ? b ? "bottom-right" : "top-right" : v2 ? b ? "bottom-left" : "top-left" : b ? f ? "top-center" : "bottom-center" : "top-center";
  }
  _callCurrentAlignment(e7) {
    return "function" == typeof e7 ? e7.call(this) : e7;
  }
  _getCurrentAlignment() {
    const {
      alignment: e7,
      dockEnabled: t3
    } = this;
    return t3 || !this.viewModel.active ? null : this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e7)));
  }
  _setCurrentAlignment() {
    this._set("currentAlignment", this._getCurrentAlignment());
  }
  _setCurrentDockPosition() {
    this._set("currentDockPosition", this._getCurrentDockPosition());
  }
  _calculatePositionResult(e7) {
    const t3 = ["left", "right"];
    return g(this.container) && t3.reverse(), e7?.replace(/leading/gi, t3[0]).replaceAll(/trailing/gi, t3[1]);
  }
  _callDockPosition(e7) {
    return "function" == typeof e7 ? e7.call(this) : e7;
  }
  _getDockPosition() {
    return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)));
  }
  _getCurrentDockPosition() {
    return this.dockEnabled && this.viewModel.active ? this._getDockPosition() : null;
  }
  _calculateAutoDockPosition(e7) {
    if ("auto" !== e7) return e7;
    const t3 = this.viewModel?.view, i2 = g(this.container) ? "top-left" : "top-right";
    if (!t3) return i2;
    const o2 = t3.padding || {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }, n3 = t3.width - o2.left - o2.right, {
      breakpoints: s2
    } = t3;
    return s2 && n3 <= s2.xsmall ? "bottom-center" : i2;
  }
  _getDockIcon() {
    const e7 = this._getDockPosition();
    if (this.dockEnabled) return "minimize";
    switch (e7) {
      case "top-left":
      case "bottom-left":
        return "dock-left";
      case "top-center":
        return "maximize";
      case "bottom-center":
        return "dock-bottom";
      default:
        return "dock-right";
    }
  }
  _handleDockIcon() {
    this._dockAction.icon = this._getDockIcon();
  }
  _handleDockEnabled() {
    this._dockAction.title = this.dockEnabled ? this.messages?.undock : this.messages?.dock;
  }
  _setMainContainerNode(e7) {
    this._mainContainerNode = e7;
  }
  _positionContainer(e7 = this._containerNode) {
    if (e7 && (this._containerNode = e7), !this._containerNode) return;
    const {
      screenLocation: t3
    } = this.viewModel, {
      width: i2
    } = this._containerNode.getBoundingClientRect(), o2 = this._calculatePositionStyle(t3, i2);
    o2 && Object.assign(this._containerNode.style, o2);
  }
  _calculateFullWidth(e7) {
    const {
      currentAlignment: t3,
      _pointerOffsetInPx: i2
    } = this;
    return "top-left" === t3 || "bottom-left" === t3 || "top-right" === t3 || "bottom-right" === t3 ? e7 + i2 : e7;
  }
  _calculateAlignmentPosition(e7, t3, i2, o2) {
    const {
      currentAlignment: n3,
      _pointerOffsetInPx: s2
    } = this;
    if (!i2) return;
    const {
      padding: r
    } = i2, l = o2 / 2, a2 = i2.height - t3, d2 = i2.width - e7;
    return "bottom-center" === n3 ? {
      top: t3 + s2 - r.top,
      left: e7 - l - r.left
    } : "top-left" === n3 ? {
      bottom: a2 + s2 - r.bottom,
      right: d2 + s2 - r.right
    } : "bottom-left" === n3 ? {
      top: t3 + s2 - r.top,
      right: d2 + s2 - r.right
    } : "top-right" === n3 ? {
      bottom: a2 + s2 - r.bottom,
      left: e7 + s2 - r.left
    } : "bottom-right" === n3 ? {
      top: t3 + s2 - r.top,
      left: e7 + s2 - r.left
    } : "top-center" === n3 ? {
      bottom: a2 + s2 - r.bottom,
      left: e7 - l - r.left
    } : void 0;
  }
  _calculatePositionStyle(e7, t3) {
    const {
      dockEnabled: i2,
      view: o2
    } = this;
    if (!o2) return;
    if (i2) return {
      left: "",
      top: "",
      right: "",
      bottom: ""
    };
    if (null == e7 || !t3) return;
    const n3 = this._calculateFullWidth(t3), s2 = this._calculateAlignmentPosition(e7.x, e7.y, o2, n3);
    return s2 ? {
      top: void 0 !== s2.top ? `${s2.top}px` : "auto",
      left: void 0 !== s2.left ? `${s2.left}px` : "auto",
      bottom: void 0 !== s2.bottom ? `${s2.bottom}px` : "auto",
      right: void 0 !== s2.right ? `${s2.right}px` : "auto"
    } : void 0;
  }
  _viewChange(e7, t3) {
    e7 && t3 && (this.close(), this.clear());
  }
  _viewReadyChange(e7, t3) {
    e7 ? this._wireUpView() : t3 && (this.close(), this.clear());
  }
  _wireUpView() {
    this._setDockEnabledForViewSize(this.dockOptions);
  }
  _dockingThresholdCrossed(e7, t3, i2) {
    const [o2, n3] = e7, [s2, r] = t3, {
      width: l = 0,
      height: a2 = 0
    } = i2 ?? {};
    return o2 <= l && s2 > l || o2 > l && s2 <= l || n3 <= a2 && r > a2 || n3 > a2 && r <= a2;
  }
  _updateDockEnabledForViewSize(e7, t3) {
    if (!e7 || !t3) return;
    const i2 = this.viewModel?.view?.padding || {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }, o2 = i2.left + i2.right, n3 = i2.top + i2.bottom, s2 = [], r = [];
    s2[0] = e7[0] - o2, s2[1] = e7[1] - n3, r[0] = t3[0] - o2, r[1] = t3[1] - n3;
    const {
      dockOptions: l
    } = this, a2 = l.breakpoint;
    this._dockingThresholdCrossed(s2, r, a2) && this._setDockEnabledForViewSize(l), this._setCurrentDockPosition();
  }
  _toggleScreenLocationEnabled() {
    const {
      dockEnabled: e7,
      viewModel: t3
    } = this;
    if (!t3) return;
    const i2 = t3.active && !e7;
    t3.screenLocationEnabled = i2;
  }
  _shouldDockAtCurrentViewSize(e7) {
    const t3 = e7.breakpoint, i2 = this.viewModel?.view?.ui;
    if (!i2) return false;
    const {
      width: o2,
      height: n3
    } = i2;
    if (isNaN(o2) || isNaN(n3)) return false;
    if (!t3) return false;
    const s2 = t3.hasOwnProperty("width") && o2 <= (t3.width ?? 0), r = t3.hasOwnProperty("height") && n3 <= (t3.height ?? 0);
    return s2 || r;
  }
  _setDockEnabledForViewSize(e7) {
    e7.breakpoint && (this.dockEnabled = this._shouldDockAtCurrentViewSize(e7));
  }
};
e([y({
  readOnly: true
})], E.prototype, "_featureNavigationTop", null), e([y()], E.prototype, "actions", null), e([y({
  readOnly: true
})], E.prototype, "active", null), e([y()], E.prototype, "alignment", void 0), e([y()], E.prototype, "autoCloseEnabled", null), e([y()], E.prototype, "defaultPopupTemplateEnabled", null), e([y()], E.prototype, "content", null), e([y()], E.prototype, "collapsed", null), e([y()], E.prototype, "collapseEnabled", null), e([y({
  readOnly: true
})], E.prototype, "currentAlignment", null), e([y({
  readOnly: true
})], E.prototype, "currentDockPosition", null), e([y()], E.prototype, "dockOptions", null), e([y()], E.prototype, "dockEnabled", void 0), e([y({
  readOnly: true
})], E.prototype, "featureCount", null), e([y()], E.prototype, "featureMenuOpen", null), e([y()], E.prototype, "features", null), e([y()], E.prototype, "goToOverride", null), e([y()], E.prototype, "headingLevel", void 0), e([y()], E.prototype, "highlightEnabled", null), e([y()], E.prototype, "icon", null), e([y()], E.prototype, "location", null), e([y()], E.prototype, "label", null), e([y(), e2("esri/widgets/Popup/t9n/Popup")], E.prototype, "messages", void 0), e([y()], E.prototype, "promises", null), e([y({
  readOnly: true
})], E.prototype, "selectedFeature", null), e([y()], E.prototype, "selectedFeatureIndex", null), e([y({
  readOnly: true
})], E.prototype, "selectedFeatureWidget", null), e([y()], E.prototype, "spinnerEnabled", null), e([y()], E.prototype, "title", null), e([y()], E.prototype, "updateLocationEnabled", null), e([y()], E.prototype, "view", null), e([y({
  type: t2
}), e4(["triggerAction", "trigger-action"])], E.prototype, "viewModel", void 0), e([y()], E.prototype, "visible", null), e([y({
  type: p,
  nonNullable: true
})], E.prototype, "visibleElements", void 0), E = e([a("esri.widgets.Popup")], E);
var k = E;
export {
  k as default
};
//# sourceMappingURL=Popup-724S6MQU.js.map
