import {
  r
} from "./chunk-6DNKENXH.js";
import {
  n,
  re
} from "./chunk-BPQJ7QAO.js";
import "./chunk-AHGS67ZN.js";
import "./chunk-PFFFLPSP.js";
import "./chunk-EOYCWFZW.js";
import "./chunk-KOUYF3XE.js";
import "./chunk-E3ITSUDB.js";
import "./chunk-UQMQLPLV.js";
import "./chunk-4HCKDN6K.js";
import "./chunk-ONOVFOVG.js";
import "./chunk-5JJ6GBOU.js";
import "./chunk-AW2BDC6B.js";
import "./chunk-EYUDXMUG.js";
import "./chunk-IAGWCSWA.js";
import "./chunk-KM65NCZ2.js";
import "./chunk-GQOLRPFL.js";
import "./chunk-OICO7AS6.js";
import "./chunk-WSWHLWMU.js";
import "./chunk-R3AQ3TGL.js";
import "./chunk-B6VSQC7C.js";
import "./chunk-BLE2CCDD.js";
import "./chunk-PAFFV5BJ.js";
import "./chunk-Q645EYZX.js";
import "./chunk-6QDMUFEM.js";
import "./chunk-T3454WZK.js";
import "./chunk-LZ6MXOBD.js";
import "./chunk-HSB7FBE7.js";
import "./chunk-6YA72G7G.js";
import "./chunk-D4LAF4TH.js";
import "./chunk-QL5HR3YL.js";
import "./chunk-D3AKDIJC.js";
import "./chunk-BAAB562I.js";
import "./chunk-R27BBJA3.js";
import "./chunk-5NCKEQLF.js";
import "./chunk-3PCYF7PE.js";
import "./chunk-MPUFKSB2.js";
import "./chunk-3HEBGT7Z.js";
import "./chunk-FICJP6TJ.js";
import "./chunk-ON42KCSZ.js";
import "./chunk-KHJ7WR3B.js";
import "./chunk-4JFSB6JC.js";
import "./chunk-HUHWKEOY.js";
import "./chunk-EMZQT2MP.js";
import "./chunk-PUH7YYDT.js";
import "./chunk-5JFTHL5W.js";
import "./chunk-KUYTX4V6.js";
import "./chunk-EXODD7PD.js";
import "./chunk-C7VF4AR2.js";
import "./chunk-EU7HJNZD.js";
import "./chunk-4HODTCAO.js";
import "./chunk-RSQ7FJBQ.js";
import "./chunk-EK3IKAMF.js";
import "./chunk-IJVN5N2Q.js";
import "./chunk-3NGDRCQI.js";
import "./chunk-TVUZAYCE.js";
import "./chunk-JCWQ2LOQ.js";
import "./chunk-P7OSFLIX.js";
import "./chunk-ZDC4PV4Y.js";
import "./chunk-O7ZVERIH.js";
import "./chunk-IIZFTYAL.js";
import "./chunk-YSIUOTSV.js";
import "./chunk-NQEXQAS7.js";
import "./chunk-R4DKV4UN.js";
import "./chunk-SNHPS7NU.js";
import "./chunk-L3F4XA4B.js";
import "./chunk-DLRYNII2.js";
import "./chunk-SYYDVGKY.js";
import "./chunk-6HBAAUBO.js";
import "./chunk-YLE5AYZV.js";
import "./chunk-VS26W5Y5.js";
import "./chunk-PVO5NM6Q.js";
import "./chunk-DM4WHMQY.js";
import "./chunk-C7NRYPDG.js";
import "./chunk-4QBFFLOC.js";
import "./chunk-O437BSYE.js";
import "./chunk-YZNT6QWD.js";
import "./chunk-2N3BR7QT.js";
import "./chunk-TROPJVOL.js";
import "./chunk-3AY5EJVP.js";
import "./chunk-XQCKIDQO.js";
import "./chunk-6LDLRQX4.js";
import "./chunk-5YIMTGEC.js";
import {
  d as d2
} from "./chunk-UFVMJL32.js";
import "./chunk-3UOXF3CT.js";
import "./chunk-2GMKFOCL.js";
import "./chunk-ZR5BOILP.js";
import "./chunk-6XGV55XZ.js";
import "./chunk-HOH445RO.js";
import "./chunk-R3F4JMNC.js";
import "./chunk-DY7FJHTG.js";
import "./chunk-JYODC3YQ.js";
import "./chunk-TRSGUVSM.js";
import "./chunk-U3MA63JX.js";
import "./chunk-WYKKCLBI.js";
import "./chunk-PFMGJTQM.js";
import "./chunk-DWASPXVI.js";
import "./chunk-MAO5BVLA.js";
import "./chunk-T2S5VXNP.js";
import "./chunk-4U5GUJRA.js";
import "./chunk-T4AP6CTC.js";
import "./chunk-HD65DNIO.js";
import "./chunk-4KWLMXIA.js";
import "./chunk-BIUXKPKA.js";
import "./chunk-N6TJI25E.js";
import "./chunk-634JLXD4.js";
import "./chunk-Y3EDGYWG.js";
import "./chunk-UF6JOUSJ.js";
import "./chunk-T5JGQSO3.js";
import "./chunk-CIW3KHOW.js";
import "./chunk-J55F4AC2.js";
import "./chunk-IQLBZKUD.js";
import "./chunk-7MZZCQ64.js";
import "./chunk-JOJZ6YC5.js";
import "./chunk-IMVP5ADD.js";
import "./chunk-H7WPOTQH.js";
import "./chunk-WPPFJVPN.js";
import "./chunk-6A7CWJED.js";
import "./chunk-CRNUMTSV.js";
import "./chunk-JM7HAEY6.js";
import "./chunk-V5RMUGJJ.js";
import "./chunk-D2NB6D6N.js";
import "./chunk-DR5TVNEL.js";
import "./chunk-HT2T6PUB.js";
import "./chunk-K64AAM77.js";
import "./chunk-6EUVKE22.js";
import "./chunk-A3NNJ7XA.js";
import "./chunk-OKJHJ3CY.js";
import "./chunk-XTVPEVHA.js";
import "./chunk-DTUSTSEJ.js";
import "./chunk-JCWFGRHQ.js";
import "./chunk-JILEJ6R2.js";
import "./chunk-GAW5JHG4.js";
import "./chunk-OEKKQXBD.js";
import "./chunk-S3IO7V4Q.js";
import "./chunk-DZALMCYL.js";
import "./chunk-K226GFDN.js";
import "./chunk-4ZZRP4MA.js";
import "./chunk-7ZJ6P7J7.js";
import "./chunk-FPFZQCEQ.js";
import "./chunk-YVULORT6.js";
import "./chunk-PB33BAI3.js";
import "./chunk-CVB43GGP.js";
import "./chunk-LLDOZWVV.js";
import "./chunk-7XMEZQ34.js";
import "./chunk-BDM2D6IC.js";
import "./chunk-U2ZVAEKG.js";
import "./chunk-EDSMXTFO.js";
import "./chunk-MNLT652N.js";
import "./chunk-7RMVJCDW.js";
import "./chunk-T6GCUITX.js";
import "./chunk-TUIGM7TV.js";
import "./chunk-IHVSZYZS.js";
import "./chunk-6CA6K3O7.js";
import "./chunk-NYQ5CYNR.js";
import "./chunk-O7UDKFOW.js";
import "./chunk-TKPMIAIW.js";
import "./chunk-NQOJNTB3.js";
import "./chunk-MFOQYQFG.js";
import "./chunk-NKCPFCP3.js";
import "./chunk-3ZXOUEQG.js";
import "./chunk-AXVPJBVW.js";
import "./chunk-OXEPWRM7.js";
import "./chunk-POILQGXA.js";
import "./chunk-JJS7PR2U.js";
import "./chunk-L5YS4GSA.js";
import "./chunk-PRREDSOB.js";
import "./chunk-V5C6HSAM.js";
import "./chunk-SYATLP3H.js";
import "./chunk-V6AMQYXE.js";
import {
  d
} from "./chunk-6WHTZNUH.js";
import "./chunk-EITGQLII.js";
import "./chunk-TIVJXVMN.js";
import "./chunk-XNUH25NY.js";
import "./chunk-WGAPNV7F.js";
import "./chunk-BXQGM56A.js";
import {
  e as e2
} from "./chunk-4Z5SGKRM.js";
import "./chunk-ANKOCGE2.js";
import {
  y
} from "./chunk-7CJXZOFG.js";
import "./chunk-IRGZKO7V.js";
import "./chunk-5SELS7VU.js";
import {
  a3 as a
} from "./chunk-DDYVXG4F.js";
import "./chunk-ANP42J2U.js";
import "./chunk-HJY2YILU.js";
import {
  e,
  o
} from "./chunk-7DA6A5LD.js";
import "./chunk-2MMLMOWS.js";
import "./chunk-4323ZVPF.js";
import {
  s2 as s
} from "./chunk-WYIDUUN2.js";
import "./chunk-DXLOWWK7.js";
import {
  __async,
  __spreadProps,
  __spreadValues
} from "./chunk-JWIQHGQB.js";

// ../../../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js
var p = class extends r(re) {
  constructor() {
    super(...arguments), this.pipelineConnectionStatus = "disconnected", this.pipelineErrorString = null;
  }
  initialize() {
    this.addHandles([d(() => this.layer.customParameters, (e3) => __async(this, null, function* () {
      (yield this.getWorker()).streamMessenger.updateCustomParameters(e3);
    })), this.layer.on("send-message-to-socket", (e3) => __async(this, null, function* () {
      (yield this.getWorker()).streamMessenger.sendMessageToSocket(e3);
    })), this.layer.on("send-message-to-client", (e3) => __async(this, null, function* () {
      (yield this.getWorker()).streamMessenger.sendMessageToClient(e3), this._isUserPaused && "type" in e3 && "clear" === e3.type && this.incrementSourceRefreshVersion();
    })), d(() => this.layer.purgeOptions, () => this._update()), d(() => this.suspended, this._onSuspendedChange.bind(this))], "constructor"), this._doResume();
  }
  destroy() {
    this._doPause();
  }
  get connectionError() {
    return this.pipelineErrorString ? new s("stream-controller", this.pipelineErrorString) : null;
  }
  on(e3, r2) {
    if (Array.isArray(e3)) return o(e3.map((e4) => this.on(e4, r2)));
    const n2 = ["data-received", "message-received"].includes(e3);
    n2 && this.getWorker().then((r3) => r3.streamMessenger.enableEvent(e3, true));
    const o2 = super.on(e3, r2), i = this;
    return e(() => {
      o2.remove(), n2 && (i._workerProxy.closed || i.hasEventListener(e3) || i.getWorker().then((r3) => r3.streamMessenger.enableEvent(e3, false)));
    });
  }
  queryLatestObservations(e3, t) {
    return __async(this, null, function* () {
      if (!(this.layer.timeInfo?.endField || this.layer.timeInfo?.startField || this.layer.timeInfo?.trackIdField)) throw new s("streamlayer-no-timeField", "queryLatestObservation can only be used with services that define a TrackIdField");
      const s2 = yield this.getWorker();
      return n(s2.features.executeQueryForLatestObservations(this._cleanUpQuery(e3), t).then((e4) => {
        const r2 = d2.fromJSON(e4);
        return r2.features.forEach((e5) => {
          e5.layer = this.layer, e5.sourceLayer = this.layer;
        }), r2;
      }), new d2({
        features: []
      }));
    });
  }
  detach() {
    super.detach(), this.pipelineConnectionStatus = "disconnected";
  }
  get _streamConnectionStatus() {
    return this.pipelineConnectionStatus;
  }
  _doPause() {
    null != this._refreshInterval && (clearInterval(this._refreshInterval), this._refreshInterval = null);
  }
  _doResume() {
    this._refreshInterval = setInterval(() => this.incrementSourceRefreshVersion(), this.layer.updateInterval);
  }
  _doDisconnect() {
    this.getWorker().then((e3) => e3.streamMessenger.disconnect()), this._doPause();
  }
  _doConnect() {
    this.getWorker().then((e3) => e3.streamMessenger.connect()), this.resume();
  }
  _doClear() {
    this.getWorker().then((e3) => e3.streamMessenger.clear()), null == this._refreshInterval && this.incrementSourceRefreshVersion();
  }
  _createClientOptions() {
    const e3 = super._createClientOptions(), r2 = this;
    return __spreadProps(__spreadValues({}, e3), {
      get container() {
        return r2.featureContainer;
      },
      setProperty: (e4) => {
        this.set(e4.propertyName, e4.value);
      }
    });
  }
};
e2([y()], p.prototype, "pipelineConnectionStatus", void 0), e2([y()], p.prototype, "pipelineErrorString", void 0), e2([y({
  readOnly: true
})], p.prototype, "connectionError", null), e2([y({
  readOnly: true
})], p.prototype, "_streamConnectionStatus", null), p = e2([a("esri.views.2d.layers.StreamLayerView2D")], p);
var u = p;
export {
  u as default
};
//# sourceMappingURL=StreamLayerView2D-ANB4UZVG.js.map
