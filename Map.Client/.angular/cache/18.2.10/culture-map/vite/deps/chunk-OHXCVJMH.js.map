{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/core/imageUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from \"../request.js\";\nimport e from \"./Error.js\";\nimport { isAbortError as r } from \"./promiseUtils.js\";\nimport { dataComponents as a } from \"./urlUtils.js\";\nimport { base64ToArrayBuffer as n } from \"../support/base64Utils.js\";\nlet i = null,\n  o = !0;\nfunction s(t, e, r) {\n  if (!t || !e) throw new Error(\"Cannot construct image data without dimensions\");\n  if (o) try {\n    return new ImageData(t, e);\n  } catch (a) {\n    o = !1;\n  }\n  return m(t, e, r);\n}\nfunction c(t, e, r, a) {\n  if (!e || !r) throw new Error(\"Cannot construct image data without dimensions\");\n  if (o) try {\n    return new ImageData(t, e, r);\n  } catch (i) {\n    o = !1;\n  }\n  const n = m(e, r, a);\n  return n.data.set(t, 0), n;\n}\nfunction f() {\n  return i || (i = document.createElement(\"canvas\"), i.width = 1, i.height = 1), i;\n}\nfunction m(t, e, r) {\n  return r || (r = f()), r.getContext(\"2d\").createImageData(t, e);\n}\nasync function u(a, n) {\n  const i = window.URL.createObjectURL(a);\n  try {\n    const {\n      data: e\n    } = await t(i, {\n      ...n,\n      responseType: \"image\"\n    });\n    return e;\n  } catch (o) {\n    if (!r(o)) throw new e(\"invalid-image\", `Could not fetch requested image at ${i}`);\n    throw o;\n  } finally {\n    window.URL.revokeObjectURL(i);\n  }\n}\nasync function p(t, e) {\n  const {\n      arrayBuffer: r,\n      mediaType: a\n    } = await d(t, e),\n    n = \"image/png\" === a;\n  if (\"image/gif\" === a) {\n    const {\n      isAnimatedGIF: t,\n      parseGif: a\n    } = await import(\"./image/gif.js\");\n    if (t(r)) return a(r, e);\n  }\n  if (n) {\n    const {\n      isAnimatedPNG: t,\n      parseApng: a\n    } = await import(\"./image/apng.js\");\n    if (t(r)) return a(r, e);\n  }\n  return u(new Blob([r], {\n    type: a\n  }), e);\n}\nasync function d(e, r) {\n  const i = a(e);\n  if (i?.isBase64) return {\n    arrayBuffer: n(i.data),\n    mediaType: i.mediaType\n  };\n  const o = await t(e, {\n    responseType: \"array-buffer\",\n    ...r\n  });\n  return {\n    arrayBuffer: o.data,\n    mediaType: o.getHeader?.(\"Content-Type\") ?? \"\"\n  };\n}\nexport { s as createEmptyImageData, p as getImageData, c as wrapImageData };"],
  "mappings": ";;;;;;;;;;;;;;;;;;AASA,IAAI,IAAI;AAAR,IACE,IAAI;AACN,SAASA,GAAEC,IAAG,GAAG,GAAG;AAClB,MAAI,CAACA,MAAK,CAAC,EAAG,OAAM,IAAI,MAAM,gDAAgD;AAC9E,MAAI,EAAG,KAAI;AACT,WAAO,IAAI,UAAUA,IAAG,CAAC;AAAA,EAC3B,SAAS,GAAG;AACV,QAAI;AAAA,EACN;AACA,SAAO,EAAEA,IAAG,GAAG,CAAC;AAClB;AACA,SAAS,EAAEA,IAAG,GAAG,GAAG,GAAG;AACrB,MAAI,CAAC,KAAK,CAAC,EAAG,OAAM,IAAI,MAAM,gDAAgD;AAC9E,MAAI,EAAG,KAAI;AACT,WAAO,IAAI,UAAUA,IAAG,GAAG,CAAC;AAAA,EAC9B,SAASC,IAAG;AACV,QAAI;AAAA,EACN;AACA,QAAM,IAAI,EAAE,GAAG,GAAG,CAAC;AACnB,SAAO,EAAE,KAAK,IAAID,IAAG,CAAC,GAAG;AAC3B;AACA,SAAS,IAAI;AACX,SAAO,MAAM,IAAI,SAAS,cAAc,QAAQ,GAAG,EAAE,QAAQ,GAAG,EAAE,SAAS,IAAI;AACjF;AACA,SAAS,EAAEA,IAAG,GAAG,GAAG;AAClB,SAAO,MAAM,IAAI,EAAE,IAAI,EAAE,WAAW,IAAI,EAAE,gBAAgBA,IAAG,CAAC;AAChE;AACA,SAAe,EAAE,GAAG,GAAG;AAAA;AACrB,UAAMC,KAAI,OAAO,IAAI,gBAAgB,CAAC;AACtC,QAAI;AACF,YAAM;AAAA,QACJ,MAAM;AAAA,MACR,IAAI,MAAM,EAAEA,IAAG,iCACV,IADU;AAAA,QAEb,cAAc;AAAA,MAChB,EAAC;AACD,aAAO;AAAA,IACT,SAASC,IAAG;AACV,UAAI,CAAC,EAAEA,EAAC,EAAG,OAAM,IAAI,EAAE,iBAAiB,sCAAsCD,EAAC,EAAE;AACjF,YAAMC;AAAA,IACR,UAAE;AACA,aAAO,IAAI,gBAAgBD,EAAC;AAAA,IAC9B;AAAA,EACF;AAAA;AACA,SAAe,EAAED,IAAG,GAAG;AAAA;AACrB,UAAM;AAAA,MACF,aAAa;AAAA,MACb,WAAW;AAAA,IACb,IAAI,MAAM,EAAEA,IAAG,CAAC,GAChB,IAAI,gBAAgB;AACtB,QAAI,gBAAgB,GAAG;AACrB,YAAM;AAAA,QACJ,eAAeA;AAAA,QACf,UAAUG;AAAA,MACZ,IAAI,MAAM,OAAO,mBAAgB;AACjC,UAAIH,GAAE,CAAC,EAAG,QAAOG,GAAE,GAAG,CAAC;AAAA,IACzB;AACA,QAAI,GAAG;AACL,YAAM;AAAA,QACJ,eAAeH;AAAA,QACf,WAAWG;AAAA,MACb,IAAI,MAAM,OAAO,oBAAiB;AAClC,UAAIH,GAAE,CAAC,EAAG,QAAOG,GAAE,GAAG,CAAC;AAAA,IACzB;AACA,WAAO,EAAE,IAAI,KAAK,CAAC,CAAC,GAAG;AAAA,MACrB,MAAM;AAAA,IACR,CAAC,GAAG,CAAC;AAAA,EACP;AAAA;AACA,SAAe,EAAE,GAAG,GAAG;AAAA;AACrB,UAAMF,KAAI,GAAE,CAAC;AACb,QAAIA,IAAG,SAAU,QAAO;AAAA,MACtB,aAAa,EAAEA,GAAE,IAAI;AAAA,MACrB,WAAWA,GAAE;AAAA,IACf;AACA,UAAMC,KAAI,MAAM,EAAE,GAAG;AAAA,MACnB,cAAc;AAAA,OACX,EACJ;AACD,WAAO;AAAA,MACL,aAAaA,GAAE;AAAA,MACf,WAAWA,GAAE,YAAY,cAAc,KAAK;AAAA,IAC9C;AAAA,EACF;AAAA;",
  "names": ["s", "t", "i", "o", "a"]
}
