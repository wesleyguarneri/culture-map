{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/widgets/Measurement/MeasurementViewModel.js", "../../../../../../node_modules/@arcgis/core/widgets/Measurement.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Accessor.js\";\nimport { measurementAreaUnits as r, measurementLengthUnits as o } from \"../../core/unitUtils.js\";\nimport { property as i } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as s } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { defaultUnitPropertyMetadata as a } from \"../../properties/defaultUnit.js\";\nlet n = class extends t {\n  constructor(e) {\n    super(e), this.activeTool = null, this.activeViewModel = null, this.view = null;\n  }\n  get areaUnit() {\n    return this.defaultUnit;\n  }\n  set areaUnit(e) {\n    this._overrideIfSome(\"areaUnit\", e);\n  }\n  get linearUnit() {\n    return this.defaultUnit;\n  }\n  set linearUnit(e) {\n    this._overrideIfSome(\"linearUnit\", e);\n  }\n  get state() {\n    const {\n      activeViewModel: e\n    } = this;\n    return e ? e.state : \"disabled\";\n  }\n};\ne([i({\n  type: [\"area\", \"distance\", \"direct-line\"]\n})], n.prototype, \"activeTool\", void 0), e([i()], n.prototype, \"activeViewModel\", void 0), e([i({\n  type: r\n})], n.prototype, \"areaUnit\", null), e([i(a)], n.prototype, \"defaultUnit\", void 0), e([i({\n  type: o\n})], n.prototype, \"linearUnit\", null), e([i({\n  readOnly: !0\n})], n.prototype, \"state\", null), e([i()], n.prototype, \"view\", void 0), n = e([s(\"esri.widgets.Measurement.MeasurementViewModel\")], n);\nconst p = n;\nexport { p as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport { ignoreAbortErrors as t } from \"../core/promiseUtils.js\";\nimport { watch as i } from \"../core/reactiveUtils.js\";\nimport { property as s } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/Logger.js\";\nimport \"../core/RandomLCG.js\";\nimport { subclass as r } from \"../core/accessorSupport/decorators/subclass.js\";\nimport o from \"./Widget.js\";\nimport a from \"./Measurement/MeasurementViewModel.js\";\nimport \"./support/widgetUtils.js\";\nimport { messageBundle as n } from \"./support/decorators/messageBundle.js\";\nimport { tsx as l } from \"./support/jsxFactory.js\";\nconst d = {\n  base: \"esri-measurement\"\n};\nfunction u(e) {\n  return \"esri.widgets.AreaMeasurement2D\" === e?.declaredClass || \"esri.widgets.AreaMeasurement3D\" === e?.declaredClass;\n}\nlet c = class extends o {\n  constructor(e, t) {\n    super(e, t), this._widgets = new Map(), this.activeWidget = null, this.messages = null, this.viewModel = new a();\n  }\n  initialize() {\n    this.activeWidget && this.viewModel.set(\"activeViewModel\", this.activeWidget.viewModel), this.view && this.activeTool && this._getActiveWidget().then(e => {\n      this._set(\"activeWidget\", e);\n    }), this.addHandles([i(() => [this.view, this.activeTool], async () => {\n      this._set(\"activeWidget\", await this._getActiveWidget());\n    }), i(() => this.activeWidget, (e, t) => {\n      this.viewModel.set(\"activeViewModel\", e ? e.viewModel : null), t && (t.visible = !1);\n    }), i(() => [this.areaUnit, this.linearUnit, this.uiStrings], () => this._updateSubWidgetProperties())]);\n  }\n  destroy() {\n    this._destroyWidgets();\n  }\n  get activeTool() {\n    return this.viewModel.activeTool;\n  }\n  set activeTool(e) {\n    this.viewModel.activeTool = e;\n  }\n  get areaUnit() {\n    return this.viewModel.areaUnit;\n  }\n  set areaUnit(e) {\n    this.viewModel.areaUnit = e;\n  }\n  get icon() {\n    return \"measure\";\n  }\n  set icon(e) {\n    this._overrideIfSome(\"icon\", e);\n  }\n  get label() {\n    return this.messages?.widgetLabel ?? \"\";\n  }\n  set label(e) {\n    this._overrideIfSome(\"label\", e);\n  }\n  get linearUnit() {\n    return this.viewModel.linearUnit;\n  }\n  set linearUnit(e) {\n    this.viewModel.linearUnit = e;\n  }\n  get view() {\n    return this.viewModel.view;\n  }\n  set view(e) {\n    this.viewModel.view = e;\n  }\n  render() {\n    const {\n        activeWidget: e\n      } = this,\n      t = e && !e.destroyed ? e.render() : null;\n    return l(\"div\", {\n      class: d.base\n    }, t);\n  }\n  clear() {\n    this.activeTool = null, this._destroyWidgets();\n  }\n  startMeasurement() {\n    const {\n      activeViewModel: e\n    } = this.viewModel;\n    e && t(e.start());\n  }\n  async _createWidget(e) {\n    const {\n      areaUnit: t,\n      linearUnit: i,\n      view: s\n    } = this;\n    if (!s) return null;\n    switch (e) {\n      case \"area\":\n        {\n          const {\n            type: i\n          } = s;\n          switch (i) {\n            case \"2d\":\n              return new (0, (await import(\"./AreaMeasurement2D.js\")).default)({\n                view: s,\n                unit: t,\n                uiStrings: this._createUIStringsForWidget(e)\n              });\n            case \"3d\":\n              return new (0, (await import(\"./AreaMeasurement3D.js\")).default)({\n                view: s,\n                unit: t,\n                uiStrings: this._createUIStringsForWidget(e)\n              });\n            default:\n              return null;\n          }\n        }\n      case \"distance\":\n        {\n          const {\n            type: t\n          } = s;\n          if (\"2d\" === t) {\n            return new (0, (await import(\"./DistanceMeasurement2D.js\")).default)({\n              view: s,\n              unit: i,\n              uiStrings: this._createUIStringsForWidget(e)\n            });\n          }\n          return null;\n        }\n      case \"direct-line\":\n        {\n          const {\n            type: t\n          } = s;\n          if (\"3d\" === t) {\n            return new (0, (await import(\"./DirectLineMeasurement3D.js\")).default)({\n              view: s,\n              unit: i,\n              uiStrings: this._createUIStringsForWidget(e)\n            });\n          }\n          return null;\n        }\n      default:\n        return null;\n    }\n  }\n  _destroyWidgets() {\n    this._widgets.forEach(e => e.destroy()), this._widgets.clear();\n  }\n  async _getActiveWidget() {\n    const {\n      activeTool: e,\n      view: t\n    } = this;\n    if (!t || !e) return null;\n    let i = null;\n    if (this._widgets.has(e)) i = this._widgets.get(e), i.visible = !0;else {\n      if (i = await this._createWidget(e), !i) return null;\n      await i.viewModel.start(), this._widgets.set(e, i);\n    }\n    return i;\n  }\n  _createUIStringsForWidget(e) {\n    if (!this.uiStrings) return;\n    const t = e + \"-\" + this.view?.type;\n    return this.uiStrings[t];\n  }\n  _updateSubWidgetProperties() {\n    this._widgets.forEach((e, t) => {\n      const {\n        areaUnit: i,\n        linearUnit: s\n      } = this;\n      e.unit = u(e) ? i : s, e.uiStrings = this._createUIStringsForWidget(t);\n    });\n  }\n};\ne([s()], c.prototype, \"activeTool\", null), e([s({\n  readOnly: !0\n})], c.prototype, \"activeWidget\", void 0), e([s()], c.prototype, \"areaUnit\", null), e([s()], c.prototype, \"icon\", null), e([s()], c.prototype, \"label\", null), e([s()], c.prototype, \"linearUnit\", null), e([s(), n(\"esri/widgets/Measurement/t9n/Measurement\")], c.prototype, \"messages\", void 0), e([s()], c.prototype, \"uiStrings\", void 0), e([s()], c.prototype, \"view\", null), e([s({\n  type: a\n})], c.prototype, \"viewModel\", void 0), c = e([r(\"esri.widgets.Measurement\")], c);\nconst g = c;\nexport { g as default };"],
  "mappings": "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",
  "names": ["n", "e", "d", "e", "i", "t"]
}
