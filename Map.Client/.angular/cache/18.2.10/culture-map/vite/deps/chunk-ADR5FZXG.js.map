{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/layers/GroupLayerView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../core/Collection.js\";\nimport { referenceSetter as s, castForReferenceSetter as r } from \"../../core/collectionUtils.js\";\nimport { watch as t, sync as l } from \"../../core/reactiveUtils.js\";\nimport { property as a } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as y } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport o from \"./LayerView.js\";\nlet h = class extends o {\n  constructor(i) {\n    super(i), this.type = \"group\", this.layerViews = new e();\n  }\n  destroy() {\n    this.layerViews.length = 0;\n  }\n  _allLayerViewVisibility(i) {\n    this.layerViews.forEach(e => {\n      e.visible = i;\n    });\n  }\n  initialize() {\n    this.addHandles([this.layerViews.on(\"change\", i => this._layerViewsChangeHandler(i)), t(() => this.layer?.visibilityMode, () => {\n      this.layer && this._applyVisibility(() => this._allLayerViewVisibility(this.visible), () => this._applyExclusiveVisibility(null));\n    }, l), t(() => this.visible, i => {\n      this._applyVisibility(() => this._allLayerViewVisibility(i), () => {});\n    }, l)], \"grouplayerview\"), this._layerViewsChangeHandler({\n      target: null,\n      added: this.layerViews.toArray(),\n      removed: [],\n      moved: []\n    });\n  }\n  get creatingLayerViews() {\n    return this.view?.layerViewManager?.isCreatingLayerViewsForLayer(this.layer) ?? !1;\n  }\n  set layerViews(i) {\n    this._set(\"layerViews\", s(i, this._get(\"layerViews\")));\n  }\n  get updatingProgress() {\n    return 0 === this.layerViews.length ? 1 : this.layerViews.reduce((i, e) => i + e.updatingProgress, 0) / this.layerViews.length;\n  }\n  isUpdating() {\n    return this.creatingLayerViews || this.layerViews.some(i => i.updating);\n  }\n  _hasLayerViewVisibleOverrides() {\n    return this.layerViews.some(i => i._isOverridden(\"visible\"));\n  }\n  _findLayerViewForLayer(i) {\n    return i && this.layerViews.find(e => e.layer === i);\n  }\n  _firstVisibleOnLayerOrder() {\n    const i = this.layer.layers.find(i => {\n      const e = this._findLayerViewForLayer(i);\n      return !!e?.visible;\n    });\n    return i && this._findLayerViewForLayer(i);\n  }\n  _applyExclusiveVisibility(i) {\n    null == i && null == (i = this._firstVisibleOnLayerOrder()) && this.layerViews.length > 0 && (i = this._findLayerViewForLayer(this.layer.layers.at(0))), this.layerViews.forEach(e => {\n      e.visible = e === i;\n    });\n  }\n  _layerViewsChangeHandler(i) {\n    this.removeHandles(\"grouplayerview:visible\"), this.addHandles(this.layerViews.map(i => t(() => i.visible, e => this._applyVisibility(() => {\n      e !== this.visible && (i.visible = this.visible);\n    }, () => this._applyExclusiveVisibility(e ? i : null)), l)).toArray(), \"grouplayerview:visible\");\n    const e = i.added[i.added.length - 1];\n    this._applyVisibility(() => this._allLayerViewVisibility(this.visible), () => this._applyExclusiveVisibility(e?.visible ? e : null));\n  }\n  _applyVisibility(i, e) {\n    this._hasLayerViewVisibleOverrides() && (\"inherited\" === this.layer?.visibilityMode ? i() : \"exclusive\" === this.layer?.visibilityMode && e());\n  }\n};\ni([a({\n  readOnly: !0\n})], h.prototype, \"creatingLayerViews\", null), i([a({\n  cast: r\n})], h.prototype, \"layerViews\", null), i([a({\n  readOnly: !0\n})], h.prototype, \"updatingProgress\", null), i([a()], h.prototype, \"view\", void 0), h = i([y(\"esri.views.layers.GroupLayerView\")], h);\nconst n = h;\nexport { n as default };"],
  "mappings": "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",
  "names": ["y", "e", "i", "n"]
}
