{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { estimateAttributesObjectSize as e } from \"../../core/byteSizeEstimations.js\";\nimport \"../../core/has.js\";\nimport { estimateSize as t } from \"../../core/typedArrayUtil.js\";\nimport { generateUID as s } from \"../../core/uid.js\";\nimport r from \"../../geometry/SpatialReference.js\";\nimport { empty as n, expandWithNestedArray as i } from \"../../geometry/support/aaBoundingBox.js\";\nimport { empty as o, expandWithNestedArray as a } from \"../../geometry/support/aaBoundingRect.js\";\nimport { unquantizePolyline as l, unquantizePolygon as u, unquantizeMultipoint as p, unquantizePoint as c } from \"../../geometry/support/quantizationUtils.js\";\nimport { featureGeometryTypeKebabDictionary as m } from \"../../geometry/support/typeUtils.js\";\nimport h from \"../support/Field.js\";\nexport { equals } from \"./dehydratedFeatureComparison.js\";\nclass f {\n  constructor(e, t, s) {\n    this.uid = e, this.geometry = t, this.attributes = s, this.visible = !0, this.objectId = null, this.centroid = null;\n  }\n}\nfunction y(e) {\n  return null != e.geometry;\n}\nclass g {\n  constructor() {\n    this.exceededTransferLimit = !1, this.features = [], this.fields = [], this.hasM = !1, this.hasZ = !1, this.geometryType = null, this.objectIdFieldName = null, this.globalIdFieldName = null, this.geometryProperties = null, this.geohashFieldName = null, this.spatialReference = null, this.transform = null;\n  }\n}\nfunction b(e, t) {\n  const s = m.fromJSON(e.geometryType),\n    n = r.fromJSON(e.spatialReference),\n    i = e.transform,\n    o = e.objectIdFieldName,\n    a = t?.maxStringAttributeLength,\n    f = t?.maxStringAttributeFields;\n  let y;\n  const g = e.features.map(t => {\n    const r = d(t, s, n, e.objectIdFieldName),\n      m = r.geometry;\n    if (z(r.attributes, f, a, e => {\n      y ??= [];\n      const t = M(r, o);\n      null != t && y.push({\n        objectId: t,\n        attribute: e\n      });\n    }), null != m && i) switch (m.type) {\n      case \"point\":\n        r.geometry = c(i, m, m);\n        break;\n      case \"multipoint\":\n        r.geometry = p(i, m, m);\n        break;\n      case \"polygon\":\n        r.geometry = u(i, m, m);\n        break;\n      case \"polyline\":\n        r.geometry = l(i, m, m);\n        break;\n      case \"extent\":\n      case \"mesh\":\n        r.geometry = m;\n    }\n    return r;\n  });\n  return {\n    geometryType: s,\n    features: g,\n    spatialReference: n,\n    fields: e.fields?.map(e => h.fromJSON(e)) ?? [],\n    objectIdFieldName: e.objectIdFieldName,\n    globalIdFieldName: e.globalIdFieldName,\n    geohashFieldName: e.geohashFieldName,\n    geometryProperties: e.geometryProperties,\n    hasZ: e.hasZ,\n    hasM: e.hasM,\n    exceededTransferLimit: e.exceededTransferLimit,\n    transform: null,\n    missingAttributes: y\n  };\n}\nfunction d(e, t, r, n) {\n  return {\n    uid: s(),\n    objectId: n && e.attributes ? e.attributes[n] : null,\n    attributes: e.attributes,\n    geometry: x(e.geometry, t, r),\n    visible: !0\n  };\n}\nfunction x(e, t, s) {\n  if (null == e) return null;\n  switch (t) {\n    case \"point\":\n      {\n        const t = e;\n        return {\n          x: t.x,\n          y: t.y,\n          z: t.z,\n          m: t.m,\n          hasZ: null != t.z,\n          hasM: null != t.m,\n          type: \"point\",\n          spatialReference: s\n        };\n      }\n    case \"polyline\":\n      {\n        const t = e;\n        return {\n          paths: t.paths,\n          hasZ: !!t.hasZ,\n          hasM: !!t.hasM,\n          type: \"polyline\",\n          spatialReference: s\n        };\n      }\n    case \"polygon\":\n      {\n        const t = e;\n        return {\n          rings: t.rings,\n          hasZ: !!t.hasZ,\n          hasM: !!t.hasM,\n          type: \"polygon\",\n          spatialReference: s\n        };\n      }\n    case \"multipoint\":\n      {\n        const t = e;\n        return {\n          points: t.points,\n          hasZ: !!t.hasZ,\n          hasM: !!t.hasM,\n          type: \"multipoint\",\n          spatialReference: s\n        };\n      }\n  }\n}\nfunction j(e) {\n  if (null == e) return 0;\n  let s = 32;\n  switch (e.type) {\n    case \"point\":\n      s += 42;\n      break;\n    case \"polyline\":\n    case \"polygon\":\n      {\n        let t = 0;\n        const r = 2 + (e.hasZ ? 1 : 0) + (e.hasM ? 1 : 0),\n          n = \"polyline\" === e.type ? e.paths : e.rings;\n        for (const e of n) t += e.length;\n        s += 8 * t * r + 64, s += 128 * t, s += 34, s += 32 * (n.length + 1);\n        break;\n      }\n    case \"multipoint\":\n      {\n        const t = 2 + (e.hasZ ? 1 : 0) + (e.hasM ? 1 : 0),\n          r = e.points.length;\n        s += 8 * r * t + 64, s += 128 * r, s += 34, s += 32;\n        break;\n      }\n    case \"extent\":\n      s += 98, e.hasM && (s += 32), e.hasZ && (s += 32);\n      break;\n    case \"mesh\":\n      s += t(e.vertexAttributes.position, e.vertexAttributes.normal, e.vertexAttributes.uv, e.vertexAttributes.tangent);\n  }\n  return s;\n}\nfunction Z(t) {\n  let s = 32;\n  return s += e(t.attributes), s += 3, s += 8 + j(t.geometry), s;\n}\nfunction k(e) {\n  if (null == e) return 0;\n  switch (e.type) {\n    case \"point\":\n      return 1;\n    case \"polyline\":\n      {\n        let t = 0;\n        for (const s of e.paths) t += s.length;\n        return t;\n      }\n    case \"polygon\":\n      {\n        let t = 0;\n        for (const s of e.rings) t += s.length;\n        return t;\n      }\n    case \"multipoint\":\n      return e.points.length;\n    case \"extent\":\n      return 2;\n    case \"mesh\":\n      {\n        const t = e.vertexAttributes && e.vertexAttributes.position;\n        return t ? t.length / 3 : 0;\n      }\n    default:\n      return;\n  }\n}\nfunction N(e) {\n  if (null == e) return !1;\n  switch (e.type) {\n    case \"extent\":\n    case \"point\":\n      return !0;\n    case \"polyline\":\n      for (const t of e.paths) if (t.length > 0) return !0;\n      return !1;\n    case \"polygon\":\n      for (const t of e.rings) if (t.length > 0) return !0;\n      return !1;\n    case \"multipoint\":\n      return e.points.length > 0;\n    case \"mesh\":\n      return !e.loaded || e.vertexAttributes.position.length > 0;\n  }\n}\nfunction F(e, t) {\n  switch (n(t), \"mesh\" === e.type && (e = e.extent), e.type) {\n    case \"point\":\n      t[0] = t[3] = e.x, t[1] = t[4] = e.y, e.hasZ && (t[2] = t[5] = e.z);\n      break;\n    case \"polyline\":\n      for (let s = 0; s < e.paths.length; s++) i(t, e.paths[s], !!e.hasZ);\n      break;\n    case \"polygon\":\n      for (let s = 0; s < e.rings.length; s++) i(t, e.rings[s], !!e.hasZ);\n      break;\n    case \"multipoint\":\n      i(t, e.points, !!e.hasZ);\n      break;\n    case \"extent\":\n      t[0] = e.xmin, t[1] = e.ymin, t[3] = e.xmax, t[4] = e.ymax, null != e.zmin && (t[2] = e.zmin), null != e.zmax && (t[5] = e.zmax);\n  }\n}\nfunction I(e, t) {\n  switch (o(t), \"mesh\" === e.type && (e = e.extent), e.type) {\n    case \"point\":\n      t[0] = t[2] = e.x, t[1] = t[3] = e.y;\n      break;\n    case \"polyline\":\n      for (let s = 0; s < e.paths.length; s++) a(t, e.paths[s]);\n      break;\n    case \"polygon\":\n      for (let s = 0; s < e.rings.length; s++) a(t, e.rings[s]);\n      break;\n    case \"multipoint\":\n      a(t, e.points);\n      break;\n    case \"extent\":\n      t[0] = e.xmin, t[1] = e.ymin, t[2] = e.xmax, t[3] = e.ymax;\n  }\n}\nfunction M(e, t) {\n  return null != e.objectId ? e.objectId : e.attributes && t ? e.attributes[t] : null;\n}\nfunction z(e, t, s, r) {\n  if (t?.size && null != s && e) for (const n in e) {\n    if (!t.has(n)) continue;\n    const i = e[n];\n    \"string\" == typeof i && i.length > s && (r(n), e[n] = \"\");\n  }\n}\nexport { f as DehydratedFeatureClass, g as DehydratedFeatureSetClass, F as computeAABB, I as computeAABR, j as estimateGeometryObjectSize, Z as estimateSize, b as fromFeatureSetJSON, x as fromJSONGeometry, M as getObjectId, y as hasGeometry, N as hasVertices, k as numVertices, z as removeLargeStringAttributes };"],
  "mappings": "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",
  "names": ["f", "e", "t", "y", "o", "g", "D", "x"]
}
