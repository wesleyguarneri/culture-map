{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/environment/SimpleAtmosphereTechniqueConfiguration.js", "../../../../../../node_modules/@arcgis/core/chunks/SimpleAtmosphere.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport { parameter as n } from \"../webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { DefaultTechniqueConfiguration as o } from \"../webgl-engine/materials/DefaultTechniqueConfiguration.js\";\nvar r;\n!function (e) {\n  e[e.Cone = 0] = \"Cone\", e[e.Cylinder = 1] = \"Cylinder\", e[e.Underground = 2] = \"Underground\", e[e.COUNT = 3] = \"COUNT\";\n}(r || (r = {}));\nclass i extends o {\n  constructor() {\n    super(...arguments), this.geometry = r.Cone;\n  }\n}\ne([n({\n  count: r.COUNT\n})], i.prototype, \"geometry\", void 0);\nexport { r as SimpleAtmosphereGeometry, i as SimpleAtmosphereTechniqueConfiguration };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as e } from \"../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { create as o } from \"../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { SimpleAtmosphereGeometry as i } from \"../views/3d/environment/SimpleAtmosphereTechniqueConfiguration.js\";\nimport { Transform as r } from \"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";\nimport { addMainLightDirection as t } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";\nimport { Float2PassUniform as n } from \"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";\nimport { Float3PassUniform as s } from \"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";\nimport { FloatPassUniform as a } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { NoParameters as l, glsl as d } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { Matrix4PassUniform as c } from \"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";\nimport { ShaderBuilder as m } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as f } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nimport { VertexAttribute as g } from \"../views/3d/webgl-engine/lib/VertexAttribute.js\";\nclass p extends l {\n  constructor() {\n    super(...arguments), this.texV = e(), this.altitudeFade = 0, this.innerScale = 0, this.undergroundFadeAlpha = 0, this.silhouette = new u();\n  }\n}\nclass u {\n  constructor() {\n    this.center = o(), this.v1 = o(), this.v2 = o();\n  }\n}\nfunction v(e) {\n  const o = new m(),\n    {\n      vertex: l,\n      fragment: p\n    } = o;\n  if (t(l), e.geometry === i.Underground) o.attributes.add(g.POSITION, \"vec2\"), o.varyings.add(\"color\", \"vec4\"), l.uniforms.add(new s(\"cameraPosition\", (e, o) => o.camera.eye), new a(\"undergroundFadeAlpha\", e => e.undergroundFadeAlpha)), l.code.add(d`void main(void) {\nfloat ndotl = dot(normalize(cameraPosition), mainLightDirection);\nfloat lighting = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\ncolor = vec4(vec3(lighting), undergroundFadeAlpha);\ngl_Position = vec4(position.xy, 1.0, 1.0);\n}`), p.code.add(d`void main() {\nfragColor = color;\n}`);else {\n    o.include(r, e), o.attributes.add(g.POSITION, \"vec3\"), o.varyings.add(\"vtc\", \"vec2\"), o.varyings.add(\"falloff\", \"float\");\n    const t = e.geometry === i.Cylinder;\n    l.uniforms.add(new c(\"proj\", (e, o) => o.camera.projectionMatrix), new c(\"view\", (e, o) => o.camera.viewMatrix)), t || (o.varyings.add(\"innerFactor\", \"float\"), l.uniforms.add(new s(\"silCircleCenter\", e => e.silhouette.center)), l.uniforms.add(new s(\"silCircleV1\", e => e.silhouette.v1)), l.uniforms.add(new s(\"silCircleV2\", e => e.silhouette.v2)), l.uniforms.add(new n(\"texV\", e => e.texV)), l.uniforms.add(new a(\"innerScale\", e => e.innerScale)));\n    const m = 6.2831853,\n      u = 1 / 128;\n    l.code.add(d`\n\t\tvoid main(void) {\n      ${t ? d`\n      vec3 pos = position;\n      float ndotl = mainLightDirection.z;\n      vtc = vec2(0.0, position.z + 0.05);` : d`\n      innerFactor = clamp(-position.z, 0.0, 1.0);\n      float scale = position.y * (1.0 + innerFactor * innerScale);\n      float phi = position.x * ${d.float(m * u)} + 1.0;\n      vec3 pos =  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;\n      float ndotl = dot(normalize(position.y > 0.0 ? pos: silCircleCenter), mainLightDirection);\n      vtc.x = position.x  * ${d.float(u)};\n      vtc.y = texV.x * (1.0 - position.z) + texV.y * position.z;\n      `}\n      falloff = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n\n\t\t  gl_Position = transformPosition(proj, view, pos);\n\t\t  gl_Position.z = gl_Position.w; // project atmosphere onto the far plane\n    }\n\t  `), p.uniforms.add(new f(\"tex\", e => e.texture)), t || p.uniforms.add(new a(\"altitudeFade\", e => e.altitudeFade)), p.code.add(d`\n\t\tvoid main() {\n\t\t\tvec4 atmosphereColor = texture(tex, vtc) * falloff;\n      ${t ? d`fragColor = atmosphereColor;` : d`\n\t\t\tvec4 innerColor = vec4(atmosphereColor.rgb, 1.0 - altitudeFade);\n\t\t\tfragColor = mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));\n      `}\n    }`);\n  }\n  return o;\n}\nconst h = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  SilhouetteCircle: u,\n  SimpleAtmospherePassParameters: p,\n  build: v\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { p as S, h as a, u as b, v as c };"],
  "mappings": "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",
  "names": ["r", "e", "t", "n", "e", "o", "p", "r", "t", "u"]
}
