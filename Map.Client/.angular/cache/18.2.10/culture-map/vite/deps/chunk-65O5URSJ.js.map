{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/layers/WMSLayerView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Error.js\";\nimport { destroyMaybe as r } from \"../../core/maybe.js\";\nimport { throwIfAborted as o } from \"../../core/promiseUtils.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { ExportWMSImageParameters as p } from \"../../layers/support/ExportWMSImageParameters.js\";\nimport { combineTimeExtent as i } from \"../../layers/support/timeSupport.js\";\nconst m = m => {\n  let n = class extends m {\n    initialize() {\n      this.exportImageParameters = new p({\n        layer: this.layer\n      });\n    }\n    destroy() {\n      this.exportImageParameters = r(this.exportImageParameters);\n    }\n    get exportImageVersion() {\n      return this.exportImageParameters?.commitProperty(\"version\"), this.commitProperty(\"timeExtent\"), (this._get(\"exportImageVersion\") || 0) + 1;\n    }\n    get timeExtent() {\n      return i(this.layer, this.view?.timeExtent, this._get(\"timeExtent\"));\n    }\n    async fetchPopupFeaturesAtLocation(e, r) {\n      const {\n        layer: s\n      } = this;\n      if (!e) throw new t(\"wmslayerview:fetchPopupFeatures\", \"Nothing to fetch without area\", {\n        layer: s\n      });\n      const {\n        popupEnabled: a\n      } = s;\n      if (!a) throw new t(\"wmslayerview:fetchPopupFeatures\", \"popupEnabled should be true\", {\n        popupEnabled: a\n      });\n      const p = this.createFetchPopupFeaturesQuery(e);\n      if (!p) return [];\n      const {\n        extent: i,\n        width: m,\n        height: n,\n        x: c,\n        y: u\n      } = p;\n      if (!(i && m && n)) throw new t(\"wmslayerview:fetchPopupFeatures\", \"WMSLayer does not support fetching features.\", {\n        extent: i,\n        width: m,\n        height: n\n      });\n      const h = await s.fetchFeatureInfo(i, m, n, c, u);\n      return o(r), h;\n    }\n  };\n  return e([s()], n.prototype, \"exportImageParameters\", void 0), e([s({\n    readOnly: !0\n  })], n.prototype, \"exportImageVersion\", null), e([s()], n.prototype, \"layer\", void 0), e([s({\n    readOnly: !0\n  })], n.prototype, \"timeExtent\", null), n = e([a(\"esri.views.layers.WMSLayerView\")], n), n;\n};\nexport { m as default };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA,IAAM,IAAI,CAAAA,OAAK;AACb,MAAI,IAAI,cAAcA,GAAE;AAAA,IACtB,aAAa;AACX,WAAK,wBAAwB,IAAIC,GAAE;AAAA,QACjC,OAAO,KAAK;AAAA,MACd,CAAC;AAAA,IACH;AAAA,IACA,UAAU;AACR,WAAK,wBAAwB,EAAE,KAAK,qBAAqB;AAAA,IAC3D;AAAA,IACA,IAAI,qBAAqB;AACvB,aAAO,KAAK,uBAAuB,eAAe,SAAS,GAAG,KAAK,eAAe,YAAY,IAAI,KAAK,KAAK,oBAAoB,KAAK,KAAK;AAAA,IAC5I;AAAA,IACA,IAAI,aAAa;AACf,aAAO,EAAE,KAAK,OAAO,KAAK,MAAM,YAAY,KAAK,KAAK,YAAY,CAAC;AAAA,IACrE;AAAA,IACM,6BAA6BC,IAAG,GAAG;AAAA;AACvC,cAAM;AAAA,UACJ,OAAOC;AAAA,QACT,IAAI;AACJ,YAAI,CAACD,GAAG,OAAM,IAAI,EAAE,mCAAmC,iCAAiC;AAAA,UACtF,OAAOC;AAAA,QACT,CAAC;AACD,cAAM;AAAA,UACJ,cAAcF;AAAA,QAChB,IAAIE;AACJ,YAAI,CAACF,GAAG,OAAM,IAAI,EAAE,mCAAmC,+BAA+B;AAAA,UACpF,cAAcA;AAAA,QAChB,CAAC;AACD,cAAM,IAAI,KAAK,8BAA8BC,EAAC;AAC9C,YAAI,CAAC,EAAG,QAAO,CAAC;AAChB,cAAM;AAAA,UACJ,QAAQE;AAAA,UACR,OAAOJ;AAAA,UACP,QAAQK;AAAA,UACR,GAAG;AAAA,UACH,GAAGC;AAAA,QACL,IAAI;AACJ,YAAI,EAAEF,MAAKJ,MAAKK,IAAI,OAAM,IAAI,EAAE,mCAAmC,gDAAgD;AAAA,UACjH,QAAQD;AAAA,UACR,OAAOJ;AAAA,UACP,QAAQK;AAAA,QACV,CAAC;AACD,cAAM,IAAI,MAAMF,GAAE,iBAAiBC,IAAGJ,IAAGK,IAAG,GAAGC,EAAC;AAChD,eAAOH,GAAE,CAAC,GAAG;AAAA,MACf;AAAA;AAAA,EACF;AACA,SAAO,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,yBAAyB,MAAM,GAAG,EAAE,CAAC,EAAE;AAAA,IAClE,UAAU;AAAA,EACZ,CAAC,CAAC,GAAG,EAAE,WAAW,sBAAsB,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,SAAS,MAAM,GAAG,EAAE,CAAC,EAAE;AAAA,IAC1F,UAAU;AAAA,EACZ,CAAC,CAAC,GAAG,EAAE,WAAW,cAAc,IAAI,GAAG,IAAI,EAAE,CAAC,EAAE,gCAAgC,CAAC,GAAG,CAAC,GAAG;AAC1F;",
  "names": ["m", "a", "e", "s", "i", "n", "u"]
}
