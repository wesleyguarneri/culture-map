{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/2d/interactive/SnappingVisualizer2D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../geometry.js\";\nimport e from \"../../../Graphic.js\";\nimport \"../../../symbols.js\";\nimport { makeHandle as t } from \"../../../core/handleUtils.js\";\nimport { px2pt as r } from \"../../../core/screenUtils.js\";\nimport { subtract as i, cross as o } from \"../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as n } from \"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { create as a } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { LineCapStyle as l, LineJoinStyle as s } from \"../../../symbols/cim/enums.js\";\nimport { asVec2 as m } from \"../../interactive/sketch/normalizedPoint.js\";\nimport { defaults as c } from \"../../interactive/snapping/Settings.js\";\nimport { SnappingVisualizer as p } from \"../../interactive/snapping/SnappingVisualizer.js\";\nimport y from \"../../../geometry/Point.js\";\nimport g from \"../../../geometry/Polyline.js\";\nimport b from \"../../../symbols/CIMSymbol.js\";\nimport h from \"../../../symbols/SimpleMarkerSymbol.js\";\nimport S from \"../../../symbols/SimpleLineSymbol.js\";\nclass f extends p {\n  constructor(e) {\n    super(), this._graphicsLayer = e, this._symbolPairingsByType = new Map();\n  }\n  visualizeIntersectionPoint(e, t) {\n    return this._visualizeSnappingIndicator(new y({\n      x: e.intersectionPoint[0],\n      y: e.intersectionPoint[1],\n      spatialReference: t.spatialReference\n    }), this._getOrCreateSymbol(\"intersectionPoint\", t.view.effectiveTheme.accentColor));\n  }\n  visualizePoint(e, t) {\n    return this._visualizeSnappingIndicator(new y({\n      x: e.point[0],\n      y: e.point[1],\n      spatialReference: t.spatialReference\n    }), this._getOrCreateSymbol(\"point\", t.view.effectiveTheme.accentColor));\n  }\n  visualizeLine(e, t) {\n    return this._visualizeSnappingIndicator(new g({\n      paths: [[e.lineStart, e.lineEnd]],\n      spatialReference: t.spatialReference\n    }), this._getOrCreateSymbol(\"line\", t.view.effectiveTheme.accentColor));\n  }\n  visualizeParallelSign(e, t) {\n    return this._visualizeSnappingIndicator(new g({\n      paths: [[e.lineStart, e.lineEnd]],\n      spatialReference: t.spatialReference\n    }), this._getOrCreateSymbol(\"parallelSign\", t.view.effectiveTheme.accentColor));\n  }\n  visualizeRightAngleQuad(e, t) {\n    const r = n(),\n      l = n(),\n      s = a();\n    i(r, m(e.centerVertex), m(e.previousVertex)), i(l, m(e.nextVertex), m(e.previousVertex)), o(s, r, l);\n    const c = `rightAngleQuad${s[2] < 0 ? 45 : 225}`;\n    return this._visualizeSnappingIndicator(new g({\n      paths: [[e.previousVertex, e.centerVertex, e.nextVertex]],\n      spatialReference: t.spatialReference\n    }), this._getOrCreateSymbol(c, t.view.effectiveTheme.accentColor));\n  }\n  _visualizeSnappingIndicator(r, i) {\n    const o = new e({\n      geometry: r,\n      symbol: i\n    });\n    return this._graphicsLayer.add(o), t(() => {\n      this._graphicsLayer.remove(o);\n    });\n  }\n  _getOrCreateSymbol(e, t) {\n    const r = this._symbolPairingsByType;\n    return r.get(e)?.color !== t && r.set(e, {\n      color: t,\n      symbol: u(e, t)\n    }), r.get(e).symbol;\n  }\n}\nfunction u(e, t) {\n  const i = [...t.toRgb(), 255 * t.a];\n  switch (e) {\n    case \"point\":\n      return new h({\n        outline: {\n          width: .5,\n          color: [0, 0, 0, 1]\n        },\n        size: 10,\n        color: t\n      });\n    case \"intersectionPoint\":\n      return new h({\n        outline: new S({\n          width: 1.5,\n          color: t\n        }),\n        size: 15,\n        color: [0, 0, 0, 0]\n      });\n    case \"line\":\n      return new b({\n        data: {\n          type: \"CIMSymbolReference\",\n          symbol: {\n            type: \"CIMLineSymbol\",\n            symbolLayers: [{\n              type: \"CIMSolidStroke\",\n              enable: !0,\n              capStyle: l.Butt,\n              joinStyle: s.Round,\n              miterLimit: 10,\n              width: r(c.lineHintWidthTarget),\n              color: i\n            }]\n          }\n        }\n      });\n    case \"parallelSign\":\n      return new b({\n        data: {\n          type: \"CIMSymbolReference\",\n          symbol: {\n            type: \"CIMLineSymbol\",\n            symbolLayers: [{\n              type: \"CIMVectorMarker\",\n              enable: !0,\n              anchorPoint: {\n                x: 0,\n                y: -1,\n                z: 0\n              },\n              anchorPointUnits: \"Relative\",\n              size: 5,\n              markerPlacement: {\n                type: \"CIMMarkerPlacementOnLine\",\n                placePerPart: !0,\n                angleToLine: !0,\n                relativeTo: \"LineMiddle\"\n              },\n              frame: {\n                xmin: -5,\n                ymin: -1.5,\n                xmax: 5,\n                ymax: 1.5\n              },\n              markerGraphics: [{\n                type: \"CIMMarkerGraphic\",\n                geometry: {\n                  rings: [[[7, 0], [-7, 0], [-7, 1.5], [7, 1.5]]]\n                },\n                symbol: {\n                  type: \"CIMPolygonSymbol\",\n                  symbolLayers: [{\n                    type: \"CIMSolidFill\",\n                    enable: !0,\n                    color: i\n                  }]\n                }\n              }],\n              scaleSymbolsProportionally: !0,\n              respectFrame: !0\n            }, {\n              type: \"CIMVectorMarker\",\n              enable: !0,\n              anchorPoint: {\n                x: 0,\n                y: 1,\n                z: 0\n              },\n              anchorPointUnits: \"Relative\",\n              size: 5,\n              markerPlacement: {\n                type: \"CIMMarkerPlacementOnLine\",\n                placePerPart: !0,\n                angleToLine: !0,\n                relativeTo: \"LineMiddle\"\n              },\n              frame: {\n                xmin: -5,\n                ymin: -1.5,\n                xmax: 5,\n                ymax: 1.5\n              },\n              markerGraphics: [{\n                type: \"CIMMarkerGraphic\",\n                geometry: {\n                  rings: [[[7, 0], [-7, 0], [-7, -1.5], [7, -1.5]]]\n                },\n                symbol: {\n                  type: \"CIMPolygonSymbol\",\n                  symbolLayers: [{\n                    type: \"CIMSolidFill\",\n                    enable: !0,\n                    color: i\n                  }]\n                }\n              }],\n              scaleSymbolsProportionally: !0,\n              respectFrame: !0\n            }]\n          }\n        }\n      });\n    case \"rightAngleQuad45\":\n    case \"rightAngleQuad225\":\n      {\n        const o = \"rightAngleQuad45\" === e ? 45 : 225;\n        return new b({\n          data: {\n            type: \"CIMSymbolReference\",\n            symbol: {\n              type: \"CIMLineSymbol\",\n              symbolLayers: [{\n                type: \"CIMVectorMarker\",\n                enable: !0,\n                anchorPoint: {\n                  x: .5,\n                  y: .5,\n                  z: 0\n                },\n                anchorPointUnits: \"Relative\",\n                size: r(c.rightAngleHintSize),\n                rotation: o,\n                markerPlacement: {\n                  type: \"CIMMarkerPlacementOnVertices\",\n                  placePerPart: !0,\n                  angleToLine: !0,\n                  placeOnEndPoints: !1\n                },\n                frame: {\n                  xmin: -5,\n                  ymin: -5,\n                  xmax: 5,\n                  ymax: 5\n                },\n                markerGraphics: [{\n                  type: \"CIMMarkerGraphic\",\n                  geometry: {\n                    paths: [[[5, -5], [-5, -5], [-5, 5], [5, 5], [5, -5]]]\n                  },\n                  symbol: {\n                    type: \"CIMLineSymbol\",\n                    symbolLayers: [{\n                      type: \"CIMSolidStroke\",\n                      enable: !0,\n                      capStyle: \"Butt\",\n                      joinStyle: \"Round\",\n                      miterLimit: 10,\n                      width: r(c.rightAngleHintOutlineSize),\n                      color: i\n                    }, {\n                      type: \"CIMSolidFill\",\n                      enable: !0,\n                      color: [...t.toRgb(), 255 * t.a * .4]\n                    }]\n                  }\n                }],\n                scaleSymbolsProportionally: !0,\n                respectFrame: !0\n              }]\n            }\n          }\n        });\n      }\n  }\n}\nexport { f as SnappingVisualizer2D };"],
  "mappings": "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",
  "names": ["e", "r", "n", "s", "y", "d"]
}
