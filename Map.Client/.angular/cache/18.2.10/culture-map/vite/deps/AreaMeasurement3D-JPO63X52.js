import {
  u as u4
} from "./chunk-C7UJY5SO.js";
import {
  u as u3
} from "./chunk-64ZF7LAW.js";
import "./chunk-MFDTVFVG.js";
import {
  M
} from "./chunk-6A46RADT.js";
import {
  e as e6
} from "./chunk-4YFNKQX7.js";
import "./chunk-PPQDPHZN.js";
import {
  t as t2
} from "./chunk-72NV56FN.js";
import {
  R
} from "./chunk-UNG626D3.js";
import {
  p as p3
} from "./chunk-OZB3UTFI.js";
import {
  f as f2
} from "./chunk-FW2XFDFF.js";
import "./chunk-B4LRUYYJ.js";
import {
  e as e5
} from "./chunk-6VVHYTZ7.js";
import "./chunk-UOKMPU6Y.js";
import "./chunk-RK23OHNG.js";
import "./chunk-QXRVL2BR.js";
import {
  q,
  z
} from "./chunk-SR7MLPR2.js";
import "./chunk-2SHZAJ7S.js";
import {
  a as a2
} from "./chunk-23XRL5UO.js";
import "./chunk-STVIJ4IV.js";
import "./chunk-QRVAQWLH.js";
import "./chunk-TMPIWG43.js";
import "./chunk-EU7GCI2A.js";
import "./chunk-WE6VW4MG.js";
import {
  o
} from "./chunk-KEZPVBFI.js";
import "./chunk-HKVPB4XN.js";
import {
  c as c2
} from "./chunk-DC55WDRO.js";
import {
  e as e4,
  ee,
  f
} from "./chunk-ZYJAXFRJ.js";
import {
  i,
  p as p2
} from "./chunk-VRZ6RXNW.js";
import "./chunk-GN4ES4ZM.js";
import "./chunk-T35SJNQV.js";
import "./chunk-2CPAIFT3.js";
import {
  E2 as E,
  P,
  p
} from "./chunk-Q666VSL3.js";
import {
  t
} from "./chunk-P3B4Y6UN.js";
import "./chunk-5QM72RFD.js";
import "./chunk-TJIA4U42.js";
import "./chunk-WQXGIEVZ.js";
import {
  N
} from "./chunk-T3EGKTN6.js";
import "./chunk-ZFPMGEAK.js";
import "./chunk-4SCJM64G.js";
import "./chunk-DABQKFI5.js";
import "./chunk-67V5AGVJ.js";
import "./chunk-2CASBEEF.js";
import "./chunk-NYQFHEZN.js";
import "./chunk-AV4NBVPL.js";
import "./chunk-UHYV4RE2.js";
import "./chunk-NEPAFG4J.js";
import "./chunk-E7VVOB2F.js";
import "./chunk-DOYOAB3G.js";
import "./chunk-DDIAZD6H.js";
import "./chunk-7YXVUZL6.js";
import "./chunk-6YVA5E7L.js";
import "./chunk-4KGPH7OX.js";
import {
  x
} from "./chunk-TLAW3ACJ.js";
import "./chunk-GFPWBDCO.js";
import "./chunk-TKHURHLF.js";
import "./chunk-U7YHNT5S.js";
import "./chunk-UW23RIEM.js";
import "./chunk-R6CAUNOR.js";
import "./chunk-6BPYXCCQ.js";
import "./chunk-TMIIQZKR.js";
import "./chunk-ROVEMBDA.js";
import "./chunk-ZIDRXKSJ.js";
import "./chunk-DBK2ELNZ.js";
import "./chunk-JMV2M56E.js";
import "./chunk-S2UCXOWF.js";
import "./chunk-VI6HLZLR.js";
import "./chunk-MYKOM3G6.js";
import "./chunk-6FZS4YUQ.js";
import "./chunk-JRZPZOI3.js";
import "./chunk-GW7WMRYJ.js";
import "./chunk-Z52R7W33.js";
import {
  st
} from "./chunk-O7OCS6XP.js";
import "./chunk-BFWLPS7M.js";
import "./chunk-67LE7VNQ.js";
import "./chunk-ZVEHH7XL.js";
import "./chunk-BJM7H6OC.js";
import "./chunk-5MM5MT6Q.js";
import "./chunk-SCLVG2SO.js";
import "./chunk-557LD7Q2.js";
import "./chunk-B64VDY5O.js";
import "./chunk-MAG65NGG.js";
import "./chunk-X5UPCJEP.js";
import "./chunk-2ONAF54K.js";
import {
  n as n4
} from "./chunk-FLWLBYXO.js";
import "./chunk-F2TT4B6M.js";
import "./chunk-2ERGO64O.js";
import "./chunk-RP2GKJCD.js";
import "./chunk-B6VSQC7C.js";
import "./chunk-6YA72G7G.js";
import "./chunk-QL5HR3YL.js";
import "./chunk-D3AKDIJC.js";
import "./chunk-IIVUY2T7.js";
import {
  e as e3
} from "./chunk-HBMA4SRU.js";
import "./chunk-5NCKEQLF.js";
import "./chunk-GHUJU3NS.js";
import "./chunk-7HBD4CJ3.js";
import "./chunk-K2LTET4M.js";
import "./chunk-WG5JLPNN.js";
import "./chunk-25PMMPR7.js";
import "./chunk-7XAWCQ7R.js";
import "./chunk-RASN5P76.js";
import "./chunk-5L3YXBNN.js";
import "./chunk-IFUKJDOU.js";
import "./chunk-LD5YIQXD.js";
import "./chunk-J7KF6IEI.js";
import "./chunk-GOKBAMCG.js";
import "./chunk-E3P3LIVT.js";
import "./chunk-HUX6Y26H.js";
import "./chunk-LN4EMOLP.js";
import "./chunk-A6XTYETO.js";
import "./chunk-4TJAOUC3.js";
import "./chunk-CILAEMQM.js";
import "./chunk-TEOUFCJA.js";
import "./chunk-GTZOXRB5.js";
import "./chunk-3WPOFZBT.js";
import "./chunk-PPMHRAOP.js";
import "./chunk-75N5YDQB.js";
import "./chunk-XGDLE7WK.js";
import "./chunk-QMUS26QM.js";
import "./chunk-GDEAPZ64.js";
import "./chunk-TCQSUQ7Y.js";
import "./chunk-GOOZVNO4.js";
import "./chunk-JUTKZ3GO.js";
import "./chunk-5RHKQDDL.js";
import "./chunk-BG32AOSQ.js";
import "./chunk-PEZTN5WV.js";
import "./chunk-FHW2TG7X.js";
import "./chunk-33LKI2Y7.js";
import "./chunk-YCQXFVJL.js";
import "./chunk-ZAP7ZEWR.js";
import "./chunk-YAGNWBGU.js";
import "./chunk-DE6MQ5XE.js";
import "./chunk-LQTSBE7P.js";
import "./chunk-GCFUJXGH.js";
import "./chunk-MBMY7SS6.js";
import "./chunk-ICUHXX2J.js";
import "./chunk-VIIVMRRO.js";
import "./chunk-ZKSEQXDM.js";
import "./chunk-675UQNXB.js";
import "./chunk-DXGCBLDW.js";
import "./chunk-Z3FHX4FD.js";
import "./chunk-SUUOAZQT.js";
import "./chunk-TGHJVD7I.js";
import "./chunk-OZG2NNUW.js";
import "./chunk-KTRZHJ2M.js";
import "./chunk-KOIKSJSQ.js";
import "./chunk-VUVXW4AC.js";
import "./chunk-LKHUGH5W.js";
import "./chunk-QZVEEM53.js";
import "./chunk-ACZYDHB3.js";
import "./chunk-JXVDTUGR.js";
import "./chunk-HAO4WCNW.js";
import "./chunk-X2OAE75B.js";
import "./chunk-UCPBGEQD.js";
import "./chunk-SIZK72CP.js";
import "./chunk-SLCHZ6DD.js";
import {
  c
} from "./chunk-CQRPND5N.js";
import "./chunk-6A3XUATG.js";
import "./chunk-ZVFENZUF.js";
import "./chunk-N3S77FRG.js";
import "./chunk-YYETZJJB.js";
import "./chunk-MD2IQSSQ.js";
import "./chunk-YZBHNRVB.js";
import "./chunk-C7VF4AR2.js";
import "./chunk-P7OSFLIX.js";
import "./chunk-ZDC4PV4Y.js";
import "./chunk-DLRYNII2.js";
import "./chunk-66QAJ2MI.js";
import "./chunk-WN3YAMRZ.js";
import "./chunk-NWICVENM.js";
import "./chunk-A4RKV2C7.js";
import "./chunk-WU7FVYT7.js";
import "./chunk-SYYDVGKY.js";
import "./chunk-6HBAAUBO.js";
import "./chunk-YLE5AYZV.js";
import "./chunk-CZQYBYHB.js";
import "./chunk-Q5ZRUB2Y.js";
import "./chunk-62WUYJJN.js";
import "./chunk-JNWMZ6EJ.js";
import "./chunk-VS26W5Y5.js";
import {
  h as h2
} from "./chunk-PVO5NM6Q.js";
import "./chunk-YFQ32AQX.js";
import "./chunk-L4AYSXFJ.js";
import "./chunk-POQ3T5EH.js";
import "./chunk-DM4WHMQY.js";
import "./chunk-6MR4UDDL.js";
import "./chunk-XQCKIDQO.js";
import "./chunk-KE2YMCJC.js";
import "./chunk-L7ZKWTWL.js";
import "./chunk-O2DTA3XK.js";
import "./chunk-3UOXF3CT.js";
import "./chunk-PA7WZX2U.js";
import "./chunk-GPUGMSHU.js";
import "./chunk-AIS5CSUZ.js";
import "./chunk-52UEU7LG.js";
import "./chunk-WJKYGQOY.js";
import "./chunk-GY52WOQZ.js";
import "./chunk-GAYJ4YPJ.js";
import "./chunk-PPMDUJ4E.js";
import "./chunk-ZTT6ENBS.js";
import "./chunk-MFZTGYUJ.js";
import "./chunk-R5ZE5A4K.js";
import "./chunk-24CN3HDP.js";
import "./chunk-SZWWBMQN.js";
import "./chunk-ZE47C44H.js";
import "./chunk-5GIS2C3K.js";
import "./chunk-XCOHDMBF.js";
import "./chunk-HOH445RO.js";
import "./chunk-R3F4JMNC.js";
import "./chunk-7B5YPLFX.js";
import "./chunk-RDQF44TE.js";
import "./chunk-KKD7A2GN.js";
import "./chunk-ZWCV4HKG.js";
import "./chunk-N4KQPPPI.js";
import "./chunk-4OGGMTIH.js";
import "./chunk-NQVBBKAN.js";
import {
  F,
  G,
  I
} from "./chunk-TCPN7AEH.js";
import "./chunk-4MMTPKY4.js";
import "./chunk-DY7FJHTG.js";
import "./chunk-Q4KYZS3X.js";
import "./chunk-KVKFHRJ3.js";
import "./chunk-VWML4J2J.js";
import "./chunk-JYODC3YQ.js";
import "./chunk-BQZBOYBD.js";
import "./chunk-TYQXPPSP.js";
import "./chunk-TRSGUVSM.js";
import "./chunk-U3MA63JX.js";
import "./chunk-WYKKCLBI.js";
import "./chunk-PFMGJTQM.js";
import "./chunk-SWPHGZYB.js";
import "./chunk-DWASPXVI.js";
import "./chunk-HD65DNIO.js";
import "./chunk-4KWLMXIA.js";
import "./chunk-BIUXKPKA.js";
import "./chunk-N6TJI25E.js";
import "./chunk-634JLXD4.js";
import "./chunk-Y3EDGYWG.js";
import "./chunk-UF6JOUSJ.js";
import "./chunk-T5JGQSO3.js";
import "./chunk-CIW3KHOW.js";
import "./chunk-J55F4AC2.js";
import "./chunk-IQLBZKUD.js";
import "./chunk-7MZZCQ64.js";
import "./chunk-IMVP5ADD.js";
import "./chunk-H7WPOTQH.js";
import "./chunk-6A7CWJED.js";
import "./chunk-DUTZNK67.js";
import "./chunk-IN6BQCWS.js";
import "./chunk-JM7HAEY6.js";
import "./chunk-3RRMLFFN.js";
import "./chunk-DR5TVNEL.js";
import "./chunk-HT2T6PUB.js";
import "./chunk-K64AAM77.js";
import "./chunk-6EUVKE22.js";
import "./chunk-OKJHJ3CY.js";
import "./chunk-XTVPEVHA.js";
import "./chunk-DTUSTSEJ.js";
import "./chunk-JCWFGRHQ.js";
import "./chunk-JILEJ6R2.js";
import "./chunk-GAW5JHG4.js";
import "./chunk-OEKKQXBD.js";
import "./chunk-S3IO7V4Q.js";
import "./chunk-DZALMCYL.js";
import {
  u as u2
} from "./chunk-K226GFDN.js";
import "./chunk-4ZZRP4MA.js";
import {
  d as d3
} from "./chunk-7ZJ6P7J7.js";
import "./chunk-FPFZQCEQ.js";
import {
  B,
  e2
} from "./chunk-WYMXVOAT.js";
import {
  n as n2
} from "./chunk-K7TO5IIO.js";
import "./chunk-A4VVDRCH.js";
import "./chunk-CQDYITZC.js";
import "./chunk-5I6J67HP.js";
import "./chunk-YVULORT6.js";
import "./chunk-PB33BAI3.js";
import "./chunk-CVB43GGP.js";
import "./chunk-LLDOZWVV.js";
import "./chunk-7XMEZQ34.js";
import "./chunk-BDM2D6IC.js";
import "./chunk-U2ZVAEKG.js";
import "./chunk-EDSMXTFO.js";
import "./chunk-MNLT652N.js";
import "./chunk-OGZAGPIO.js";
import "./chunk-HJJIIYFF.js";
import "./chunk-ONPREQKF.js";
import "./chunk-7RMVJCDW.js";
import "./chunk-GTY5NXA4.js";
import {
  j
} from "./chunk-T6GCUITX.js";
import "./chunk-TUIGM7TV.js";
import "./chunk-IHVSZYZS.js";
import "./chunk-6CA6K3O7.js";
import "./chunk-NYQ5CYNR.js";
import {
  _
} from "./chunk-O7UDKFOW.js";
import "./chunk-TKPMIAIW.js";
import "./chunk-NQOJNTB3.js";
import "./chunk-MFOQYQFG.js";
import "./chunk-NKCPFCP3.js";
import "./chunk-3ZXOUEQG.js";
import "./chunk-AXVPJBVW.js";
import {
  n as n3
} from "./chunk-OXEPWRM7.js";
import "./chunk-POILQGXA.js";
import {
  w2 as w
} from "./chunk-JJS7PR2U.js";
import "./chunk-L5YS4GSA.js";
import "./chunk-PRREDSOB.js";
import "./chunk-V5C6HSAM.js";
import "./chunk-SYATLP3H.js";
import "./chunk-V6AMQYXE.js";
import {
  A,
  C,
  d as d2
} from "./chunk-6WHTZNUH.js";
import "./chunk-EITGQLII.js";
import "./chunk-TIVJXVMN.js";
import "./chunk-XNUH25NY.js";
import "./chunk-WGAPNV7F.js";
import "./chunk-BXQGM56A.js";
import {
  e
} from "./chunk-4Z5SGKRM.js";
import "./chunk-YPWMP2VK.js";
import "./chunk-23E6RT3O.js";
import "./chunk-RCBGISRX.js";
import "./chunk-2P72IR2Y.js";
import {
  r
} from "./chunk-ANKOCGE2.js";
import {
  y
} from "./chunk-7CJXZOFG.js";
import "./chunk-IRGZKO7V.js";
import "./chunk-5SELS7VU.js";
import {
  a3 as a
} from "./chunk-DDYVXG4F.js";
import "./chunk-ANP42J2U.js";
import {
  d
} from "./chunk-HJY2YILU.js";
import "./chunk-7DA6A5LD.js";
import {
  u
} from "./chunk-2MMLMOWS.js";
import "./chunk-4323ZVPF.js";
import {
  n2 as n
} from "./chunk-WYIDUUN2.js";
import {
  h
} from "./chunk-DXLOWWK7.js";
import {
  __spreadProps,
  __spreadValues
} from "./chunk-JWIQHGQB.js";

// ../../../node_modules/@arcgis/core/analysis/AreaMeasurementAnalysis.js
var p4 = class extends c {
  constructor(e7) {
    super(e7), this.type = "area-measurement", this.unit = null;
  }
  set geometry(e7) {
    null != e7 ? (e7.rings.length > 1 && n.getLogger(this).warn("Measuring polygons with multiple rings is not supported."), this._set("geometry", e7.clone())) : this._set("geometry", null);
  }
  get requiredPropertiesForEditing() {
    if (null != this.geometry && 1 === this.geometry.rings.length) {
      const e7 = this.geometry.rings[0];
      if (e7.length <= 2 || !h(e7[0], e7[e7.length - 1])) return [null];
    }
    return [this.geometry];
  }
  clear() {
    this.geometry = null;
  }
};
e([y({
  type: ["area-measurement"]
})], p4.prototype, "type", void 0), e([y({
  value: null,
  type: j
})], p4.prototype, "geometry", null), e([y({
  type: w,
  value: null
})], p4.prototype, "unit", void 0), e([y({
  readOnly: true
})], p4.prototype, "requiredPropertiesForEditing", null), p4 = e([a("esri.analysis.AreaMeasurementAnalysis")], p4);
var m = p4;

// ../../../node_modules/@arcgis/core/views/3d/interactive/measurementTools/support/PickRequest.js
var s = class {
  constructor(s2, t4 = null) {
    this.screenPoint = s2, this.result = t4;
  }
};
var t3 = class {
  constructor(s2, t4) {
    this.scenePoint = s2, this.mapPoint = t4;
  }
};

// ../../../node_modules/@arcgis/core/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DView.js
var y2 = class {
  constructor(t4) {
    this.vertexManipulators = [], this._destroyed = false, this._isManipulatorsOwner = true, this._visible = true, this._listenerHandles = null, this._tempHandlePosition = n3();
    const {
      analysisViewData: e7,
      manipulators: i2,
      toolState: s2,
      view: a3,
      visible: r2
    } = t4;
    this._analysisViewData = e7, this._toolState = s2, null != i2 ? (this._manipulators = i2, this._isManipulatorsOwner = false) : this._manipulators = new i(), this._view = a3, this._intersector = t2(a3.state.viewingMode);
    const o2 = f(this._handleColor), n5 = [new e4(st(o2, 1, 32, 32))], l = new ee({
      view: a3,
      renderObjects: n5
    });
    l.available = false, l.radius = D, l.interactive = false, this._manipulators.add(l), this._cursorManipulator = l, this._cursorManipulatorMaterial = o2, this._laserLine = new c2({
      view: a3,
      attached: true,
      style: {
        glowWidth: V,
        glowFalloff: M2,
        innerWidth: b
      },
      isDecoration: true
    }), this._updateVisibility(r2 ?? true);
  }
  destroy() {
    this._listenerHandles = u(this._listenerHandles), this._isManipulatorsOwner ? this._manipulators = u(this._manipulators) : this._manipulators = null, this._laserLine = u(this._laserLine), this._destroyed = true;
  }
  get destroyed() {
    return this._destroyed;
  }
  get visible() {
    return this._visible;
  }
  set visible(t4) {
    t4 ? this.show() : this.hide();
  }
  get testData() {
  }
  show() {
    this._setVisibility(true);
  }
  hide() {
    this._setVisibility(false);
  }
  _setVisibility(t4) {
    this._destroyed || this._visible === t4 || this._updateVisibility(t4);
  }
  _updateVisibility(t4) {
    this._visible = t4, this._laserLine.visible = t4, t4 ? (this._initializeListeners(), this._updateAll()) : (this._destroyListeners(), this.vertexManipulators.forEach(({
      manipulator: t5
    }) => this._removeVertexManipulator(t5)), this.vertexManipulators = [], this._view.cursor = null);
  }
  vertexHandleAt(t4, e7) {
    const i2 = this._manipulators.intersect(t4, e7);
    return i2?.metadata;
  }
  pick(t4) {
    const e7 = this._view.spatialReference, i2 = d3(t4.screenPoint);
    this._view.sceneIntersectionHelper.intersectToolIntersectorScreen(i2, this._intersector);
    const s2 = this._intersector.results.min, a3 = n3();
    if (!s2.getIntersectionPoint(a3)) return null;
    const r2 = this._view.renderCoordsHelper.fromRenderCoords(a3, new _({
      spatialReference: e7
    }));
    return null == r2 ? null : new t3(a3, r2);
  }
  _updateAll() {
    this._visible && (this._updateVertexManipulators(), this._updateLaserLine());
  }
  _createVertexManipulator() {
    const t4 = f(this._handleColor), e7 = [new e4(st(t4, 1, 32, 32))], i2 = new ee({
      view: this._view,
      renderObjects: e7
    });
    return i2.radius = D, this._manipulators.add(i2), {
      manipulator: i2,
      material: t4
    };
  }
  _removeVertexManipulator(t4) {
    this._manipulators.remove(t4);
  }
  _updateVertexManipulators() {
    const {
      viewData: t4
    } = this._analysisViewData, e7 = this._analysisViewData.path ? this._analysisViewData.path.vertices : [], i2 = this.vertexManipulators;
    f3(i2, e7.length, () => this._createVertexManipulator(), ({
      manipulator: t5
    }) => this._removeVertexManipulator(t5)), i2.forEach(({
      manipulator: i3
    }, s2) => {
      i3.metadata = e7[s2], i3.renderLocation = t4.positionsRender[s2], i3.cursor = 0 === s2 && "drawing" === this._toolState.polygonState ? "crosshair" : null;
    }), "drawing" === this._toolState.polygonState && null != this._analysisViewData.stagedPoint ? (this._cursorManipulator.available = true, this._cursorManipulator.location = this._analysisViewData.stagedPoint) : this._cursorManipulator.available = false;
  }
  get _handleColor() {
    return F(this._view.effectiveTheme.accentColor, 0.5);
  }
  _getFocusPoint() {
    const {
      lastDraggedVertex: t4
    } = this._analysisViewData;
    switch (this._toolState.polygonState) {
      case "drawing":
        return null != this._analysisViewData.stagedPoint ? this._analysisViewData.stagedPoint : null != t4 ? this._analysisViewData.path.getVertexPositionAsPoint(t4) : this._analysisViewData.path.lastPoint;
      case "editing":
        return null != t4 ? this._analysisViewData.path.getVertexPositionAsPoint(t4) : null;
      default:
        return this._analysisViewData.stagedPoint;
    }
  }
  _updateLaserLine() {
    const t4 = "measured" !== this._toolState.polygonState && this._toolState.active, e7 = this._getFocusPoint();
    if (t4 && null != e7) {
      const t5 = this._tempHandlePosition;
      this._view.renderCoordsHelper.toRenderCoords(e7, t5), this._laserLine.heightManifoldTarget = t5;
    } else this._laserLine.heightManifoldTarget = null;
  }
  _initializeListeners() {
    this._listenerHandles = new r(), this._listenerHandles.add([d2(() => this._toolState.polygonState, () => this._updateLaserLine()), d2(() => this._analysisViewData.viewData, () => this._updateAll(), C), d2(() => ({
      lastDraggedVertex: this._analysisViewData.lastDraggedVertex,
      cursorPoint: this._analysisViewData.stagedPoint
    }), () => this._updateLaserLine()), d2(() => this._toolState.active, () => this._updateAll()), d2(() => this._view.effectiveTheme.accentColor, (i2) => {
      const a3 = F(i2, 0.5);
      for (const {
        material: t4
      } of this.vertexManipulators) t4.setParameters({
        color: a3
      });
      this._cursorManipulatorMaterial.setParameters({
        color: a3
      });
      const r2 = u2.toUnitRGB(i2), o2 = u2.toUnitRGB(G(i2)), n5 = 0.75 * i2.a, l = this._laserLine, h3 = l.style;
      l.style = __spreadProps(__spreadValues({}, h3), {
        glowColor: r2,
        innerColor: o2,
        globalAlpha: n5
      });
    }, {
      initial: true,
      equals: I
    })]);
  }
  _destroyListeners() {
    this._listenerHandles = u(this._listenerHandles);
  }
};
function f3(t4, e7, i2, s2) {
  for (; t4.length < e7; ) t4.push(i2());
  if (s2) for (; t4.length > e7; ) {
    s2(t4.pop());
  }
  else t4.length = e7;
}
var V = 8;
var M2 = 8;
var b = 1;
var D = 5;

// ../../../node_modules/@arcgis/core/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DTool.js
var b2 = class extends o {
  constructor(t4) {
    super(t4), this._updatingHandles = new h2(), this.polygonState = "initial", this.manipulators = new i(), this._getSnappingContext = t((t5) => new e5({
      elevationInfo: {
        mode: "absolute-height",
        offset: 0
      },
      pointer: t5,
      editGeometryOperations: new E(new p("point", P(true, false, this.view.spatialReference)), this.view.state.viewingMode),
      visualizer: new R()
    }));
  }
  initialize() {
    const {
      view: t4,
      analysisViewData: e7,
      manipulators: i2,
      visible: o2
    } = this;
    this.measurementView = new y2({
      view: t4,
      analysisViewData: e7,
      toolState: this,
      manipulators: i2,
      visible: o2
    });
    const r2 = a2(t4);
    this._snappingManagerResult = r2, this.addHandles(r2), this._snappingOperation = new p3({
      view: t4
    }), this._updatingHandles.add(() => this.stagedPoint, (t5) => {
      this.analysisViewData.stagedPoint = null != t5 ? x(t5, new _()) : null;
    }, A), N(this, () => {
      const t5 = this.view.inputManager.latestPointerType ?? "mouse", e8 = this._getSnappingContext(t5);
      this._updatingHandles.addPromise(d(this._snappingOperation.snapAgainNearPreviousMapPoint(this._snappingManager, e8)));
    }), this._setupManipulators(), this.addHandles([d2(() => this.state, (t5) => {
      "measured" === t5 && this.finishToolCreation();
    }, A), this.analysisViewData.path.on("change", () => {
      const t5 = this.analysisViewData.path;
      "initial" !== this.polygonState || t5.isEmptyPolygon || (t5.isValidPolygon ? this.polygonState = "measured" : this.polygonState = "drawing");
    })]);
  }
  destroy() {
    this.measurementView.destroy(), this._set("measurementView", null), this._updatingHandles = u(this._updatingHandles);
  }
  get _snappingManager() {
    return this._snappingManagerResult.snappingManager;
  }
  get state() {
    return 0 === this.analysisViewData.path.numVertices ? "ready" : this.analysisViewData.path.isValidPolygon && "editing" !== this.polygonState ? "measured" : "measuring";
  }
  get cursor() {
    return "ready" === this.state || "drawing" === this.polygonState ? "crosshair" : null;
  }
  get updating() {
    return this._updatingHandles.updating || this._snappingManager.updating;
  }
  get stagedPoint() {
    return this._snappingOperation.stagedPoint;
  }
  set stagedPoint(t4) {
    this._snappingOperation.stagedPoint = t4;
  }
  get snappingOptions() {
    return this._snappingManager.options;
  }
  finishMeasurement() {
    const {
      path: t4
    } = this.analysisViewData;
    t4.numVertices < 3 ? (t4.clear(), this.polygonState = "initial") : (t4.close(), this.polygonState = "measured"), this._resetSnappingState();
  }
  onShow() {
    this.measurementView.show();
  }
  onHide() {
    this.measurementView.hide();
  }
  onDeactivate() {
    this._resetSnappingState();
  }
  onInputEvent(t4) {
    switch (t4.type) {
      case "immediate-double-click":
        this._handleImmediateDoubleClick(t4);
        break;
      case "immediate-click":
        this._handleImmediateClick(t4);
        break;
      case "pointer-move":
        this._handlePointerMove(t4);
        break;
      case "drag":
        this._handleDrag(t4);
        break;
      case "key-down":
        this._handleKeyDown(t4);
    }
  }
  _setupManipulators() {
    const t4 = (t5) => t5.events.on("grab-changed", () => {
      if (this.analysisViewData.path.isValidPolygon) {
        const t6 = this.manipulators.some((t7) => t7.manipulator.grabbing);
        this.polygonState = t6 ? "editing" : "measured";
      }
    }), e7 = (e8) => {
      this.addHandles([p2(e8, (t5, e9, i2, a3) => {
        const n5 = q(t5), s2 = t5.metadata, o2 = this._snappingManager, r2 = this._getSnappingContext(a3), p6 = this._updatingHandles, {
          snappingStep: l,
          cancelSnapping: h3
        } = f2({
          snappingManager: o2,
          snappingContext: r2,
          updatingHandles: p6
        });
        i2 = i2.next(n5).next((e10) => (this.analysisViewData.lastDraggedVertex = null, this.analysisViewData.path.setVertexPosition(s2, d6), t5.location = d6, e10)).next(h3), e9.next(n5).next(z(this.view)).next(...l).next((e10) => {
          t5.location = e10.mapEnd, this.analysisViewData.lastDraggedVertex = "end" === e10.action ? null : s2, this.analysisViewData.path.setVertexPosition(s2, x(e10.mapEnd));
        });
        const d6 = x(this.analysisViewData.path.getVertexPositionAsPoint(s2));
      }), t4(e8)], e8);
    };
    this.manipulators.forEach(({
      manipulator: t5
    }) => {
      e7(t5);
    }), this.addHandles([this.manipulators.on("after-add", ({
      item: {
        manipulator: t5
      }
    }) => {
      e7(t5);
    }), this.manipulators.on("after-remove", ({
      item: {
        manipulator: t5
      }
    }) => this.removeHandles(t5))]);
  }
  _handleImmediateDoubleClick(t4) {
    M(t4) && ("drawing" === this.polygonState && this.finishMeasurement(), t4.stopPropagation());
  }
  _handleDrag(t4) {
    "editing" === this.polygonState && t4.stopPropagation();
  }
  _handleImmediateClick(t4) {
    if (!M(t4)) return;
    const e7 = n4(t4), {
      pointerType: i2
    } = t4;
    if (this.active) switch (this.polygonState) {
      case "initial":
        if (this._addVertexAt(e7, i2)) return this.stagedPoint = null, this.polygonState = "drawing", void t4.stopPropagation();
        break;
      case "drawing": {
        const a3 = this.measurementView.vertexHandleAt(e7, i2);
        if (null == a3) {
          if (this._addVertexAt(e7, i2)) return this.stagedPoint = null, void t4.stopPropagation();
        } else 0 === a3.index && (this.finishMeasurement(), t4.stopPropagation());
        break;
      }
    }
    "mouse" === t4.pointerType && this._hoverAt(e7);
  }
  _handlePointerMove(t4) {
    if ("mouse" === t4.pointerType) {
      const e7 = n4(t4);
      this._hoverAt(e7);
    }
  }
  _handleKeyDown(t4) {
    const {
      path: e7
    } = this.analysisViewData;
    "Enter" === t4.key && "drawing" === this.polygonState && e7.numVertices >= 3 && (this.stagedPoint = null, this.finishMeasurement(), t4.stopPropagation());
  }
  _hoverAt(t4) {
    const {
      polygonState: e7
    } = this;
    if (this.active && ("initial" === e7 || "drawing" === e7)) {
      const e8 = this._pick(t4);
      if (null != e8?.mapPoint) {
        const t5 = this._getSnappingContext("mouse");
        this._updatingHandles.addPromise(d(this._snappingOperation.snap({
          point: e8.mapPoint
        }, this._snappingManager, t5)));
      }
    } else this.stagedPoint = null;
  }
  _addVertexAt(t4, e7) {
    const i2 = this._pick(t4);
    if (null != i2?.mapPoint) {
      const {
        mapPoint: t5
      } = i2, a3 = this._getSnappingContext(e7), n5 = this._snappingOperation.update({
        point: t5
      }, this._snappingManager, a3), s2 = x(n5, new _());
      return this.analysisViewData.path.add(s2), true;
    }
    return false;
  }
  _pick(t4) {
    const e7 = new s(t4);
    return this.measurementView.pick(e7);
  }
  _resetSnappingState() {
    this._snappingManager.doneSnapping(), this._snappingOperation.abort(), this._snappingOperation.stagedPoint = null;
  }
  get test() {
  }
};
e([y({
  readOnly: true
})], b2.prototype, "state", null), e([y()], b2.prototype, "polygonState", void 0), e([y({
  readOnly: true
})], b2.prototype, "cursor", null), e([y()], b2.prototype, "measurementView", void 0), e([y({
  constructOnly: true
})], b2.prototype, "view", void 0), e([y({
  constructOnly: true
})], b2.prototype, "analysis", void 0), e([y({
  constructOnly: true
})], b2.prototype, "analysisViewData", void 0), e([y({
  readOnly: true
})], b2.prototype, "manipulators", void 0), e([y()], b2.prototype, "updating", null), e([y()], b2.prototype, "stagedPoint", null), e([y()], b2.prototype, "snappingOptions", null), b2 = e([a("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DTool")], b2);
var O = b2;

// ../../../node_modules/@arcgis/core/widgets/AreaMeasurement3D/AreaMeasurement3DViewModel.js
var p5 = class extends u4 {
  constructor(t4) {
    super(t4), this.analysis = null, this.supportedViewType = "3d", this.unsupportedErrorMessage = "AreaMeasurement3DViewModel is only supported in 3D views.", this._userUnitOptions = null, this._userUnit = null;
  }
  initialize() {
    this.addHandles(d2(() => ({
      analysis: this.analysis,
      unit: this.unit
    }), ({
      analysis: t4,
      unit: e7
    }) => {
      null != t4 && (t4.unit = e7);
    }, A));
  }
  get state() {
    return this.disabled || !this.ready ? "disabled" : null == this.tool ? "ready" : this.tool.state;
  }
  get measurement() {
    if (null == this.tool || this.disabled || this.tool.destroyed) return null;
    const {
      analysisView: t4
    } = this;
    if (null == t4) return null;
    const e7 = t4.analysisVisualization, i2 = e7.viewData, s2 = i2.validMeasurement, n5 = "euclidean" === i2.mode, r2 = 0 === i2.intersectingSegments.size, l = r2 ? s2 ? "available" : "unavailable" : "invalid";
    return {
      mode: n5 ? "euclidean" : "geodesic",
      area: {
        text: r2 && s2 ? e7.areaLabel : null,
        state: l
      },
      perimeterLength: {
        text: r2 && s2 ? e7.perimeterLengthLabel : null,
        state: l
      }
    };
  }
  set unitOptions(t4) {
    this._userUnitOptions = t4, this._set("unitOptions", this._filteredOrAllUnits(this._userUnitOptions));
  }
  get unitOptions() {
    return this._filteredOrAllUnits(this._userUnitOptions);
  }
  set unit(t4) {
    this._userUnit = t4 ? this._findSelectableUnit(t4, this._userUnit) : null;
  }
  get unit() {
    return null != this._userUnit ? (this._userUnit = this._findSelectableUnit(this._userUnit, this.defaultUnit), this._userUnit) : this._findSelectableUnit(this.defaultUnit);
  }
  constructAnalysis() {
    return new m();
  }
  constructTool() {
    return new O({
      view: this.view,
      analysis: this.analysis,
      analysisViewData: this.analysisView,
      visible: this.visible
    });
  }
  _findSelectableUnit(t4, e7) {
    const {
      unitOptions: i2
    } = this;
    return i2.includes(t4) ? t4 : null != e7 ? this._findSelectableUnit(e7) : i2[0];
  }
  _filteredOrAllUnits(t4) {
    if (null == t4) return w.slice();
    const e7 = t4.filter((t5) => w.includes(t5));
    return 0 === e7.length ? w.slice() : e7;
  }
};
e([y({
  type: m
})], p5.prototype, "analysis", void 0), e([y({
  readOnly: true
})], p5.prototype, "state", null), e([y({
  readOnly: true
})], p5.prototype, "measurement", null), e([y()], p5.prototype, "unitOptions", null), e([y()], p5.prototype, "unit", null), e([y(e6)], p5.prototype, "defaultUnit", void 0), e([y()], p5.prototype, "_userUnit", void 0), p5 = e([a("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel")], p5);
var d4 = p5;

// ../../../node_modules/@arcgis/core/widgets/AreaMeasurement3D.js
var u5 = "esri-area-measurement-3d";
var m2 = {
  base: u5,
  newMeasurementButton: `${u5}__clear-button`
};
var d5 = class extends B {
  constructor(e7, t4) {
    super(e7, t4), this.messages = null, this.messagesCommon = null, this.messagesUnits = null, this.viewModel = new d4();
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e7) {
    this.viewModel.view = e7;
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(e7) {
    this.viewModel.visible = e7;
  }
  get active() {
    return this.viewModel.active;
  }
  get analysis() {
    return this.viewModel.analysis;
  }
  set analysis(e7) {
    this.viewModel.analysis = e7;
  }
  get icon() {
    return "measure-area";
  }
  set icon(e7) {
    this._overrideIfSome("icon", e7);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e7) {
    this._overrideIfSome("label", e7);
  }
  get unitOptions() {
    return this.viewModel.unitOptions;
  }
  set unitOptions(e7) {
    this.viewModel.unitOptions = e7;
  }
  get unit() {
    return this.viewModel.unit;
  }
  set unit(e7) {
    this.viewModel.unit = e7;
  }
  render() {
    const {
      messages: e7,
      messagesCommon: s2,
      messagesUnits: i2,
      unit: o2,
      unitOptions: r2,
      viewModel: l
    } = this, {
      active: u6,
      measurement: d6,
      state: v2,
      supported: g
    } = l;
    return n2("div", {
      "aria-label": this.messages.widgetLabel,
      class: this.classes(m2.base, e3.widget, e3.panel),
      key: this,
      role: "presentation"
    }, this.visible ? n2(u3, {
      active: u6,
      measurementItems: [{
        key: "direct",
        title: i2.measures.area,
        value: c3(d6?.area)
      }, {
        key: "perimeter",
        title: e7.perimeterLength,
        value: c3(d6?.perimeterLength)
      }],
      messages: __spreadProps(__spreadValues({}, e7), {
        notApplicable: s2.notApplicable
      }),
      newMeasurementButtonClass: m2.newMeasurementButton,
      state: v2,
      supported: g,
      unit: o2,
      unitOptions: r2,
      onNewMeasurementClick: () => {
        d(this.viewModel.start());
      },
      onUnitChange: (e8) => {
        this.unit = e8;
      }
    }) : null);
  }
};
function c3(e7) {
  return "available" === e7?.state ? e7.text : null;
}
e([y()], d5.prototype, "view", null), e([y()], d5.prototype, "visible", null), e([y()], d5.prototype, "active", null), e([y({
  constructOnly: true,
  nonNullable: true
})], d5.prototype, "analysis", null), e([y()], d5.prototype, "icon", null), e([y()], d5.prototype, "label", null), e([y(), e2("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")], d5.prototype, "messages", void 0), e([y(), e2("esri/t9n/common")], d5.prototype, "messagesCommon", void 0), e([y(), e2("esri/core/t9n/Units")], d5.prototype, "messagesUnits", void 0), e([y()], d5.prototype, "uiStrings", void 0), e([y({
  type: d4
})], d5.prototype, "viewModel", void 0), e([y()], d5.prototype, "unitOptions", null), e([y()], d5.prototype, "unit", null), d5 = e([a("esri.widgets.AreaMeasurement3D")], d5);
var v = d5;
export {
  v as default
};
//# sourceMappingURL=AreaMeasurement3D-JPO63X52.js.map
