{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { Float3PassUniform as e } from \"../../shaderModules/Float3PassUniform.js\";\nimport { Float4sPassUniform as o } from \"../../shaderModules/Float4sPassUniform.js\";\nimport { FloatsPassUniform as r } from \"../../shaderModules/FloatsPassUniform.js\";\nimport { glsl as v } from \"../../shaderModules/interfaces.js\";\nimport { Matrix3PassUniform as t } from \"../../shaderModules/Matrix3PassUniform.js\";\nimport { VertexAttribute as a } from \"../../../lib/VertexAttribute.js\";\nimport { vvColorNumber as i } from \"../../../materials/VisualVariablePassParameters.js\";\nfunction l(l, n) {\n  const {\n    vertex: s,\n    attributes: u\n  } = l;\n  n.hasVvInstancing && (n.vvSize || n.vvColor) && u.add(a.INSTANCEFEATUREATTRIBUTE, \"vec4\"), n.vvSize ? (s.uniforms.add(new e(\"vvSizeMinSize\", e => e.vvSize.minSize)), s.uniforms.add(new e(\"vvSizeMaxSize\", e => e.vvSize.maxSize)), s.uniforms.add(new e(\"vvSizeOffset\", e => e.vvSize.offset)), s.uniforms.add(new e(\"vvSizeFactor\", e => e.vvSize.factor)), s.uniforms.add(new t(\"vvSymbolRotationMatrix\", e => e.vvSymbolRotationMatrix)), s.uniforms.add(new e(\"vvSymbolAnchor\", e => e.vvSymbolAnchor)), s.code.add(v`vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}`), s.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${n.hasVvInstancing ? v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }` : \"\"}\n    `)) : s.code.add(v`vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`), n.vvColor ? (s.constants.add(\"vvColorNumber\", \"int\", i), s.uniforms.add(new r(\"vvColorValues\", e => e.vvColor.values, i), new o(\"vvColorColors\", e => e.vvColor.colors, i)), s.code.add(v`\n      vec4 interpolateVVColor(float value) {\n        if (value <= vvColorValues[0]) {\n          return vvColorColors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (vvColorValues[i] >= value) {\n            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n            return mix(vvColorColors[i-1], vvColorColors[i], f);\n          }\n        }\n        return vvColorColors[vvColorNumber - 1];\n      }\n\n      vec4 vvGetColor(vec4 featureAttribute) {\n        return interpolateVVColor(featureAttribute.y);\n      }\n\n      ${n.hasVvInstancing ? v`\n            vec4 vvColor() {\n              return vvGetColor(instanceFeatureAttribute);\n            }` : \"vec4 vvColor() { return vec4(1.0); }\"}\n    `)) : s.code.add(v`vec4 vvColor() { return vec4(1.0); }`);\n}\nexport { l as VisualVariables };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAWA,SAAS,EAAEA,IAAG,GAAG;AACf,QAAM;AAAA,IACJ,QAAQ;AAAA,IACR,YAAY;AAAA,EACd,IAAIA;AACJ,IAAE,oBAAoB,EAAE,UAAU,EAAE,YAAY,EAAE,IAAI,EAAE,0BAA0B,MAAM,GAAG,EAAE,UAAU,EAAE,SAAS,IAAI,IAAIC,GAAE,iBAAiB,CAAAA,OAAKA,GAAE,OAAO,OAAO,CAAC,GAAG,EAAE,SAAS,IAAI,IAAIA,GAAE,iBAAiB,CAAAA,OAAKA,GAAE,OAAO,OAAO,CAAC,GAAG,EAAE,SAAS,IAAI,IAAIA,GAAE,gBAAgB,CAAAA,OAAKA,GAAE,OAAO,MAAM,CAAC,GAAG,EAAE,SAAS,IAAI,IAAIA,GAAE,gBAAgB,CAAAA,OAAKA,GAAE,OAAO,MAAM,CAAC,GAAG,EAAE,SAAS,IAAI,IAAIA,GAAE,0BAA0B,CAAAA,OAAKA,GAAE,sBAAsB,CAAC,GAAG,EAAE,SAAS,IAAI,IAAIA,GAAE,kBAAkB,CAAAA,OAAKA,GAAE,cAAc,CAAC,GAAG,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,EAK1f,GAAG,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOR,EAAE,kBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAOjB,EAAE;AAAA,KACR,KAAK,EAAE,KAAK,IAAI;AAAA,gEAC2C,GAAG,EAAE,WAAW,EAAE,UAAU,IAAI,iBAAiB,OAAOA,EAAC,GAAG,EAAE,SAAS,IAAI,IAAIC,GAAE,iBAAiB,CAAAD,OAAKA,GAAE,QAAQ,QAAQA,EAAC,GAAG,IAAIA,GAAE,iBAAiB,CAAAA,OAAKA,GAAE,QAAQ,QAAQA,EAAC,CAAC,GAAG,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAmBnP,EAAE,kBAAkB;AAAA;AAAA;AAAA,iBAGX,sCAAsC;AAAA,KAClD,KAAK,EAAE,KAAK,IAAI,uCAAuC;AAC5D;",
  "names": ["l", "e", "o"]
}
