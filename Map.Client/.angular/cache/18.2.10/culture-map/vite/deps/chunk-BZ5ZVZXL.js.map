{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/draw/support/createUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../geometry.js\";\nimport { equals as t, isSome as e } from \"../../../core/arrayUtils.js\";\nimport { clone as o } from \"../../../core/lang.js\";\nimport { getMetersPerUnitForSR as n } from \"../../../core/unitUtils.js\";\nimport { o as r } from \"../../../chunks/vec32.js\";\nimport { create as a } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport l from \"../../../geometry/Circle.js\";\nimport { simplify as s, distance as i } from \"../../../geometry/geometryEngine.js\";\nimport { unnormalizeGeometryOnDatelineCrossing as c, isClockwise as y, unnormalizeVerticesOnDatelineCrossing as p } from \"../../../geometry/support/coordsUtils.js\";\nimport { isValid as u } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { makeSurfacePoint as m } from \"./surfaceCoordinateSystems.js\";\nimport f from \"../../../geometry/Point.js\";\nimport x from \"../../../geometry/Multipoint.js\";\nimport h from \"../../../geometry/Polyline.js\";\nimport M from \"../../../geometry/Polygon.js\";\nfunction g(t, e) {\n  const o = new f({\n    x: t[0],\n    y: t[1],\n    spatialReference: e\n  });\n  return t.length > 2 && (o.z = t[2]), o;\n}\nfunction d(t, e) {\n  return new x({\n    points: t,\n    spatialReference: e\n  });\n}\nfunction R(t, e, o) {\n  const n = new h({\n    paths: t,\n    spatialReference: e\n  });\n  return o && c(n), n;\n}\nfunction j(e, n, r, a = !0) {\n  const l = o(e);\n  l.forEach(e => {\n    const o = e[0],\n      n = e[e.length - 1];\n    t(o, n) && 1 !== e.length || e.push(e[0]);\n  });\n  let i = new M({\n    rings: l,\n    spatialReference: n\n  });\n  return i.rings.forEach(t => {\n    y(t) || t.reverse();\n  }), r && c(i), a && i.isSelfIntersecting && u(n) && (i = s(i)), i;\n}\nfunction T(t, o, n) {\n  const r = o.mapToLocalMultiple(t),\n    a = [],\n    l = {\n      x: r[0].x,\n      y: r[0].y\n    },\n    s = {\n      x: r[1].x,\n      y: r[1].y\n    },\n    i = Math.round(s.x - l.x),\n    c = Math.round(s.y - l.y),\n    y = Math.max(Math.abs(i), Math.abs(c));\n  if (n) {\n    const t = {\n        x: l.x + y,\n        y: l.y + y\n      },\n      e = {\n        x: l.x - y,\n        y: l.y - y\n      };\n    a.push(m(t.x, e.y), m(e.x, e.y), m(e.x, t.y), m(t.x, t.y));\n  } else {\n    const t = {\n      x: i > 0 ? l.x + y : l.x - y,\n      y: c > 0 ? l.y + y : l.y - y\n    };\n    a.push(m(l.x, l.y), m(t.x, l.y), m(t.x, t.y), m(l.x, t.y));\n  }\n  return U(j([a.map(t => o.localToMap(t)).filter(e)], o.spatialReference, o.doUnnormalization, !0), a, o);\n}\nfunction b(t, o, n) {\n  let r = o.mapToLocalMultiple(t);\n  if (1 === r.length) {\n    const t = 48,\n      e = r[0];\n    r = [m(e.x - t, e.y + t), m(e.x + t, e.y - t), m(e.x + t, e.y - t), m(e.x - t, e.y + t)];\n  }\n  const a = [],\n    l = {\n      x: r[0].x,\n      y: r[0].y\n    },\n    s = {\n      x: r[1].x,\n      y: r[1].y\n    };\n  if (n) {\n    const t = Math.round(s.x - l.x),\n      e = Math.round(s.y - l.y);\n    a.push(m(l.x - t, l.y - e), m(s.x, l.y - e), m(s.x, s.y), m(l.x - t, s.y));\n  } else a.push(m(l.x, l.y), m(s.x, l.y), m(s.x, s.y), m(l.x, s.y));\n  return U(j([a.map(t => o.localToMap(t)).filter(e)], o.spatialReference, o.doUnnormalization, !0), a, o);\n}\nfunction U(t, e, o) {\n  const n = P(e[3], e[2], o),\n    r = P(e[1], e[2], o),\n    a = P(e[0], e[1], o),\n    l = P(e[0], e[3], o);\n  return {\n    geometry: t,\n    midpoints: null != n && null != r && null != a && null != l ? {\n      top: n,\n      right: r,\n      bottom: a,\n      left: l\n    } : null\n  };\n}\nfunction P(t, e, o) {\n  w[0] = t.x, w[1] = t.y, w[2] = 0, I[0] = e.x, I[1] = e.y, I[2] = 0, r(w, w, I, .5), z.x = w[0], z.y = I[1], z.z = I[2];\n  const n = o.localToMap(z);\n  return null != n ? g(n, o.spatialReference) : null;\n}\nconst z = m(0, 0, 0),\n  w = a(),\n  I = a();\nfunction L(t, e, o, r) {\n  const a = e.mapToLocalMultiple(t);\n  let s = null,\n    c = null;\n  if (o) s = a[0], c = a[1];else {\n    const t = a[0],\n      e = a[1],\n      o = Math.round(e.x - t.x),\n      n = Math.round(e.y - t.y),\n      r = Math.max(Math.abs(o), Math.abs(n));\n    s = m(o > 0 ? t.x + r / 2 : t.x - r / 2, n > 0 ? t.y + r / 2 : t.y - r / 2), c = m(Math.abs(o) > Math.abs(n) ? s.x - r / 2 : s.x, Math.abs(o) > Math.abs(n) ? s.y : s.y - r / 2);\n  }\n  const y = e.localToMap(s),\n    f = e.localToMap(c);\n  if (null == y || null == f) return null;\n  e.doUnnormalization && p([[y, f]], e.spatialReference);\n  const x = g(y, e.spatialReference),\n    h = g(f, e.spatialReference),\n    M = n(e.spatialReference);\n  let d = 0;\n  if (u(e.spatialReference)) d = M * i(x, h, null);else {\n    const t = s.x - c.x,\n      e = s.y - c.y;\n    d = M * Math.sqrt(t * t + e * e) * (r || 1);\n  }\n  const R = new l({\n    center: x,\n    radius: d,\n    radiusUnit: \"meters\",\n    spatialReference: e.spatialReference\n  });\n  return {\n    geometry: j(R.rings, R.spatialReference, !1),\n    center: x,\n    edge: h\n  };\n}\nfunction v(t, o, n) {\n  const r = o.mapToLocalMultiple(t),\n    a = r[0],\n    l = r[1],\n    s = Math.round(l.x - a.x),\n    i = Math.round(l.y - a.y),\n    c = m(n ? a.x : a.x + s / 2, n ? a.y : a.y + i / 2),\n    y = n ? s : s / 2,\n    p = n ? i : i / 2,\n    u = 60,\n    f = [],\n    x = 2 * Math.PI / u;\n  function h(t) {\n    const e = Math.cos(t),\n      o = Math.sin(t);\n    return m(y * e + c.x, p * o + c.y);\n  }\n  for (let e = 0; e < u; e++) f.push(h(e * x));\n  f.push(f[0]);\n  const {\n      spatialReference: M,\n      doUnnormalization: d\n    } = o,\n    R = j([f.map(t => o.localToMap(t)).filter(e)], M, d, !1),\n    T = o.localToMap(h(Math.PI / 2)),\n    b = o.localToMap(h(0)),\n    U = o.localToMap(h(-Math.PI / 2)),\n    P = o.localToMap(h(Math.PI));\n  return {\n    geometry: R,\n    midpoints: null != T && null != b && null != U && null != P ? {\n      top: g(T, M),\n      right: g(b, M),\n      bottom: g(U, M),\n      left: g(P, M)\n    } : null\n  };\n}\nexport { L as createCircle, v as createEllipse, d as createMultipoint, g as createPoint, j as createPolygon, R as createPolyline, b as createRectangle, T as createSquare };"],
  "mappings": "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",
  "names": ["n", "j", "a", "e", "t", "w", "b", "z", "o", "r", "f", "h", "M", "d", "R", "u", "T", "U", "P"]
}
