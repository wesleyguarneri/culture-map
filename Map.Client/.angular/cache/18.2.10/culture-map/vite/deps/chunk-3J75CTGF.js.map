{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ViewshedFaceCamera.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ViewshedShadowMap.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ViewshedTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ViewshedTechniqueConfiguration.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Viewshed.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport { rad2deg as s, deg2rad as o } from \"../../../../core/mathUtils.js\";\nimport { property as e } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as r } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { mul as i, fromTranslation as n, fromScaling as a } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as c } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { create as l, fromArray as p } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport m from \"../../webgl/RenderCamera.js\";\nimport { assert as h } from \"./Util.js\";\nlet g = class extends m {\n  constructor() {\n    super(...arguments), this.sectionAngles = l();\n  }\n  get sectionAnglesDeg() {\n    return p(this.sectionAngles.map(t => s(t)));\n  }\n  set sectionAnglesDeg(t) {\n    this.sectionAngles = p(t.map(t => o(t)));\n  }\n  get projectionMatrix() {\n    const t = c();\n    return i(t, this.sectionMatrix, this._projectionMatrixInternal);\n  }\n  get sectionMatrix() {\n    const t = this.sectionAngles[0],\n      s = this.sectionAngles[1],\n      o = this.sectionAngles[2],\n      e = this.sectionAngles[3];\n    h(t <= s), h(o <= e);\n    const r = 2 * Math.tan(this.fovX / 2),\n      l = 2 * Math.tan(this.fovY / 2),\n      p = Math.tan(t),\n      m = Math.tan(s),\n      g = Math.tan(o),\n      f = m - p,\n      M = Math.tan(e) - g,\n      j = r / f,\n      u = l / M,\n      A = -(p + f / 2) / r * 2,\n      x = -(g + M / 2) / l * 2,\n      b = c();\n    n(b, [A, x, 0]);\n    const d = c();\n    a(d, [j, u, 1]);\n    const v = c();\n    return i(v, d, b);\n  }\n  get _sectionRatioX() {\n    const t = Math.tan(this.sectionAngles[0]),\n      s = Math.tan(this.sectionAngles[1]),\n      o = 2 * Math.tan(this.fovX / 2);\n    return Math.min(1, (s - t) / o);\n  }\n  setViewport(t, s) {\n    const o = s * this._sectionRatioX;\n    return this.viewport = [t[0], t[1], o, s], o;\n  }\n};\nt([e()], g.prototype, \"sectionAngles\", void 0), t([e()], g.prototype, \"sectionAnglesDeg\", null), t([e()], g.prototype, \"projectionMatrix\", null), t([e()], g.prototype, \"sectionMatrix\", null), t([e()], g.prototype, \"_sectionRatioX\", null), g = t([r(\"esri.views.3d.webgl-engine.lib.ViewshedFaceCamera\")], g);\nexport { g as ViewshedFaceCamera };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from \"../../../../core/has.js\";\nimport { clamp as t } from \"../../../../core/mathUtils.js\";\nimport { releaseMaybe as e } from \"../../../../core/maybe.js\";\nimport { fromRotation as i } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as s } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { z as r, g as a, k as o, h } from \"../../../../chunks/vec32.js\";\nimport { create as n } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { ColorFormat as c, DepthFormat as u } from \"../../webgl/formats.js\";\nimport { applyTextureResizeModulo as l, applyTextureResizeFloorModulo as f } from \"./textureUtils.js\";\nimport { ViewshedFaceCamera as d } from \"./ViewshedFaceCamera.js\";\nimport { ClearBufferBit as m } from \"../../../webgl/enums.js\";\nclass x {\n  constructor() {\n    this.textureSizeModHighQuality = 1.3, this.textureSizeModLowQuality = .9, this.textureSizeMultiple = 128, this.toleranceSides = 5, this.toleranceBottomTop = 10;\n  }\n  textureSizeModifier(t) {\n    return t ? this.textureSizeModHighQuality : this.textureSizeModLowQuality;\n  }\n  textureResizeModulo(t) {\n    return Math.ceil(t / this.textureSizeMultiple) * this.textureSizeMultiple;\n  }\n}\nconst p = [\"front\", \"left\", \"right\", \"back\", \"top\", \"bottom\"];\nfunction _(t) {\n  return ![\"top\", \"bottom\"].includes(t);\n}\nclass g {\n  constructor(t) {\n    this._fbos = t, this._enabled = !1, this._faces = {}, this._textureWidth = 0, this._textureHeight = 0, this.settings = new x(), this._maxTextureWidth = Math.min(has(\"esri-mobile\") ? 4096 : 16384, t.rctx.parameters.maxTextureSize);\n  }\n  get depthTexture() {\n    return this._handle?.getTexture();\n  }\n  get enabled() {\n    return this._enabled;\n  }\n  set enabled(t) {\n    this._enabled = t, t || this.disposeOffscreenBuffers();\n  }\n  get isTextureZero() {\n    return 0 === this._textureWidth || 0 === this._textureHeight;\n  }\n  get nearFar() {\n    const t = this.faces;\n    return 0 === t.length ? null : t[0].nearFar;\n  }\n  get numActiveFaces() {\n    const t = this._faces;\n    let e = 0;\n    return Object.keys(t).forEach(i => {\n      t[i] && (e += 1);\n    }), e;\n  }\n  get faces() {\n    const t = this._faces,\n      e = [];\n    for (const i of p) {\n      const s = t[i];\n      s && e.push(s);\n    }\n    return e;\n  }\n  get atlasRegions() {\n    return this.faces.map(t => [t.x / this._textureWidth, (t.x + t.width) / this._textureWidth, t.y / this._textureHeight, (t.y + t.height) / this._textureHeight]);\n  }\n  get viewshedProjectionMatrices() {\n    return this.faces.map(t => t.projectionMatrix);\n  }\n  get viewshedViewMatrices() {\n    return this.faces.map(t => t.viewMatrix);\n  }\n  _setupFaceCamera(e, c, u, l) {\n    const {\n        observerRenderSpace: f,\n        tiltedUpVector: m,\n        targetRenderSpace: x,\n        farDistanceRenderSpace: p,\n        horizontalFieldOfView: g,\n        verticalFieldOfView: b\n      } = c,\n      M = n();\n    r(M, x, f);\n    const F = n(),\n      w = n(),\n      B = (t, e) => {\n        const r = n(),\n          o = s();\n        return i(o, t, e), h(r, M, o), a(r, f, r), r;\n      };\n    let T,\n      S = m;\n    const z = Math.min(90, g),\n      O = Math.min(90, Math.max(0, (g - 90) / 2));\n    let j = -45,\n      v = 45,\n      R = -45,\n      k = 45;\n    if (_(e)) {\n      const e = e => t(e, -45, 45);\n      R = e(-b / 2) - this.settings.toleranceBottomTop, k = e(+b / 2) + this.settings.toleranceBottomTop;\n    }\n    switch (e) {\n      case \"front\":\n        T = x, j = -z / 2, v = z / 2;\n        break;\n      case \"left\":\n        T = B(Math.PI / 2, m), j = 45 - O;\n        break;\n      case \"right\":\n        T = B(-Math.PI / 2, m), v = -45 + O;\n        break;\n      case \"top\":\n        T = a(F, f, m), S = o(w, M);\n        break;\n      case \"bottom\":\n        T = r(F, f, m), S = M;\n        break;\n      case \"back\":\n        T = B(Math.PI, m);\n    }\n    const H = new d({\n      center: T,\n      eye: f,\n      up: S,\n      far: p\n    });\n    H.sectionAnglesDeg = [j - this.settings.toleranceSides, v + this.settings.toleranceSides, R, k], H.fovY = Math.PI / 2;\n    const y = H.setViewport(u, l);\n    return this._faces[e] = H, y;\n  }\n  _bindFBO() {\n    const t = this._fbos.rctx;\n    t.unbindTexture(this.depthTexture), t.bindFramebuffer(this._handle?.fbo);\n  }\n  _computeActiveFaces(t) {\n    const e = new Set(),\n      {\n        horizontalFieldOfView: i,\n        verticalFieldOfView: s\n      } = t,\n      r = -s / 2,\n      a = s / 2;\n    return 0 === i || 0 === s || (r <= 45 && a >= -45 && e.add(\"front\"), i > 90 && (e.add(\"left\"), e.add(\"right\")), i > 270 && e.add(\"back\"), a > 45 - this.settings.toleranceBottomTop && e.add(\"top\"), r < -45 + this.settings.toleranceBottomTop && e.add(\"bottom\")), e;\n  }\n  _computeBaseTextureSize(t, e, i, s) {\n    const r = Math.min(window.devicePixelRatio, e) / t.pixelRatio,\n      a = this.settings.textureSizeModifier(i),\n      o = l(Math.floor(Math.max(t.fullWidth, t.fullHeight) * r * a)),\n      h = Math.floor(this._maxTextureWidth / s),\n      n = Math.min(h, o);\n    return f(n);\n  }\n  _ensureFBO() {\n    const t = this._textureWidth,\n      e = this._textureHeight;\n    this._handle?.fbo?.width === t && this._handle?.fbo?.height === e || (this._handle?.release(), this._handle = this._fbos.acquire(t, e, \"viewshed shadow map\", c.RGBA4)), this._handle.acquireDepth(u.DEPTH16_BUFFER);\n  }\n  clearFBO() {\n    const t = this._fbos.rctx;\n    this._ensureFBO(), this._bindFBO(), t.setClearColor(1, 1, 1, 1), t.clear(m.COLOR_BUFFER_BIT | m.DEPTH_BUFFER_BIT);\n  }\n  dispose() {\n    this.enabled = !1, this.disposeOffscreenBuffers();\n  }\n  disposeOffscreenBuffers() {\n    this._handle = e(this._handle);\n  }\n  start(t, e, i, s) {\n    if (this._faces = {}, !this.enabled) return !1;\n    const r = this._computeActiveFaces(e),\n      a = r.size;\n    if (0 === a) return !1;\n    const o = this._computeBaseTextureSize(t, s, i, a);\n    if (0 === o) return !1;\n    let h = 0,\n      n = 0,\n      c = 0;\n    return p.filter(t => r.has(t)).forEach(t => {\n      const i = b(t, a);\n      i > n && (c = Math.max(c, h), h = 0), n = i;\n      const s = i * o;\n      h += this._setupFaceCamera(t, e, [h, s], o);\n    }), c = Math.max(c, h), this._textureWidth = this.settings.textureResizeModulo(c), this._textureHeight = M(a) * o, this.clearFBO(), !0;\n  }\n  finish() {\n    this._handle?.detachDepth();\n  }\n  get test() {\n    return {\n      faces: this._faces,\n      faceTypes: p\n    };\n  }\n}\nfunction b(t, e) {\n  if (e < 4) return 0;\n  const i = \"front\" === t || \"left\" === t;\n  return 4 === e ? i ? 0 : 1 : i || \"right\" === t ? 0 : 1;\n}\nfunction M(t) {\n  return t < 4 ? 1 : 2;\n}\nexport { g as ViewshedShadowMap };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ReloadableShaderModule as e } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as r } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { Default3D as i } from \"../lib/DefaultVertexAttributeLocations.js\";\nimport { blendingDefault as o } from \"../lib/OrderIndependentTransparency.js\";\nimport { Program as t } from \"../lib/Program.js\";\nimport { a as s } from \"../../../../chunks/Viewshed.glsl.js\";\nimport { makePipelineState as n, defaultColorWriteParams as a } from \"../../../webgl/renderState.js\";\nclass l extends r {\n  initializeProgram(e) {\n    return new t(e.rctx, l.shader.get().build(this.configuration), i);\n  }\n  initializePipeline() {\n    return n({\n      colorWrite: a,\n      blending: o\n    });\n  }\n}\nl.shader = new e(s, () => import(\"./Viewshed.glsl.js\"));\nexport { l as ViewshedTechnique };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { ShaderTechniqueConfiguration as o, parameter as r } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nclass s extends o {\n  constructor() {\n    super(...arguments), this.useNormalMap = !0;\n  }\n}\ne([r()], s.prototype, \"useNormalMap\", void 0);\nexport { s as ViewshedTechniqueConfiguration };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Collection.js\";\nimport { deg2rad as i } from \"../../../../core/mathUtils.js\";\nimport { destroyMaybe as s } from \"../../../../core/maybe.js\";\nimport { watch as r, syncAndInitial as o } from \"../../../../core/reactiveUtils.js\";\nimport { property as a } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { translate as h, fromTranslation as d, scale as c, mul as l } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as u } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { z as p } from \"../../../../chunks/vec32.js\";\nimport { create as m, fromValues as w } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { ShaderOutput as f } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { SyncRenderPlugin as _, ConsumesDepth as v, ConsumesNone as g } from \"../effects/RenderPlugin.js\";\nimport { RenderSlot as x } from \"./RenderSlot.js\";\nimport { ViewshedShadowMap as b } from \"./ViewshedShadowMap.js\";\nimport { V as j } from \"../../../../chunks/Viewshed.glsl.js\";\nimport { ViewshedTechnique as M } from \"../shaders/ViewshedTechnique.js\";\nimport { ViewshedTechniqueConfiguration as S } from \"../shaders/ViewshedTechniqueConfiguration.js\";\nlet C = class extends _ {\n  get viewshedShadowMap() {\n    return this._viewshedShadowMap;\n  }\n  get enabled() {\n    return this._viewsheds.length > 0;\n  }\n  constructor(e, i) {\n    super(e), this._pluginContext = null, this.renderHighQuality = !1, this._parameters = new j(), this._configuration = new S(), this._viewsheds = new t(), this.produces = new Map([[x.VIEWSHED, () => !0]]), this._renderShadowMap = i;\n  }\n  initialize() {\n    this.addHandles(r(() => this.view.qualitySettings.maximumPixelRatio, e => this._maximumPixelRatio = e, o));\n  }\n  destroy() {\n    this.uninitializeRenderContext();\n  }\n  consumes() {\n    return this.enabled ? v : g;\n  }\n  initializeRenderContext(e) {\n    this._pluginContext = e, this._viewshedShadowMap = new b(this.fboCache), this._viewshedShadowMap.enabled = !0;\n  }\n  renderNode(e, t, i) {\n    const {\n      bindParameters: s,\n      rctx: r\n    } = e;\n    if (!this.enabled || !s.depth || null == i) return;\n    const o = this._setupNormals(i);\n    if (null != this._technique && this._configuration.useNormalMap === o || (this._configuration.useNormalMap = o, this._technique = this._pluginContext?.techniques.acquire(M, this._configuration)), this._technique?.compiled) for (const a of this._viewsheds) {\n      const t = e.rctx.getBoundFramebufferObject(),\n        i = this._renderViewshedShadowCubeMap(s, a),\n        o = this._viewshedShadowMap;\n      i && null != o.depthTexture && !o.isTextureZero && (this._setPassParameters(a), e.rctx.bindFramebuffer(t), r.bindTechnique(this._technique, s, this._parameters), r.screen.draw());\n    } else this._pluginContext?.requestRender();\n  }\n  uninitializeRenderContext() {\n    this._pluginContext = null, this._viewshedShadowMap.dispose(), this._technique = s(this._technique);\n  }\n  updateViewsheds(e) {\n    const i = e.removes;\n    null != i && (t.isCollection(i) ? this._viewsheds.removeMany(i) : this._viewsheds.remove(i));\n    const s = e.adds;\n    if (null != s) if (t.isCollection(s)) {\n      const e = s.filter(e => !this._viewsheds.includes(e));\n      this._viewsheds.addMany(e);\n    } else this._viewsheds.includes(s) || this._viewsheds.add(s);\n  }\n  _renderViewshedShadowCubeMap(e, t) {\n    const i = this._viewshedShadowMap;\n    if (!i.enabled) return !1;\n    const s = i.start(e.camera, t, this.renderHighQuality, this._maximumPixelRatio);\n    if (s) for (const r of i.faces) this._renderShadowMap(e, r, f.ViewshedShadow);\n    return i.finish(), s;\n  }\n  _setPassParameters(e) {\n    const t = this._parameters,\n      s = this._viewshedShadowMap,\n      r = e.observerRenderSpace;\n    t.localOrigin = r, t.fovs = [i(e.horizontalFieldOfView), i(e.verticalFieldOfView)], t.headingAndTilt = [i(e.heading), i(e.tiltParallelToSurface)], t.upVector = e.tiltedUpVector;\n    const o = V(e.targetRenderSpace, r);\n    t.targetVector = o, t.shadowMap = s;\n    const a = [],\n      n = [];\n    for (let i = 0; i < s.numActiveFaces; i++) h(y, s.viewshedViewMatrices[i], r), a.push(...y.flat()), q(s.viewshedProjectionMatrices[i], y, R), n.push(...R.flat());\n    t.viewMatrices = a, t.projectionMatrices = n;\n  }\n  _setupNormals(e) {\n    const t = e.get(\"normals\"),\n      i = t?.getTexture();\n    return this._parameters.normalTexture = i, null != i;\n  }\n  get test() {\n    return {\n      viewsheds: this._viewsheds\n    };\n  }\n};\nfunction V(e, t) {\n  const i = m();\n  return p(i, e, t);\n}\nfunction q(e, t, i) {\n  const s = w(.5, .5, .5);\n  return d(i, s), c(i, i, s), l(i, i, e), l(i, i, t), i;\n}\ne([a()], C.prototype, \"_pluginContext\", void 0), e([a()], C.prototype, \"fboCache\", void 0), e([a()], C.prototype, \"view\", void 0), e([a()], C.prototype, \"viewshedShadowMap\", null), C = e([n(\"esri.views.3d.webgl-engine.lib.Viewshed\")], C);\nconst y = u(),\n  R = u();\nexport { C as Viewshed };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,IAAI,IAAI,cAAc,GAAE;AAAA,EACtB,cAAc;AACZ,UAAM,GAAG,SAAS,GAAG,KAAK,gBAAgBA,GAAE;AAAA,EAC9C;AAAA,EACA,IAAI,mBAAmB;AACrB,WAAOC,GAAE,KAAK,cAAc,IAAI,CAAAC,OAAK,EAAEA,EAAC,CAAC,CAAC;AAAA,EAC5C;AAAA,EACA,IAAI,iBAAiBA,IAAG;AACtB,SAAK,gBAAgBD,GAAEC,GAAE,IAAI,CAAAA,OAAK,EAAEA,EAAC,CAAC,CAAC;AAAA,EACzC;AAAA,EACA,IAAI,mBAAmB;AACrB,UAAMA,KAAID,GAAE;AACZ,WAAO,EAAEC,IAAG,KAAK,eAAe,KAAK,yBAAyB;AAAA,EAChE;AAAA,EACA,IAAI,gBAAgB;AAClB,UAAMA,KAAI,KAAK,cAAc,CAAC,GAC5BC,KAAI,KAAK,cAAc,CAAC,GACxBC,KAAI,KAAK,cAAc,CAAC,GACxBH,KAAI,KAAK,cAAc,CAAC;AAC1B,MAAEC,MAAKC,EAAC,GAAG,EAAEC,MAAKH,EAAC;AACnB,UAAMI,KAAI,IAAI,KAAK,IAAI,KAAK,OAAO,CAAC,GAClCC,KAAI,IAAI,KAAK,IAAI,KAAK,OAAO,CAAC,GAC9BC,KAAI,KAAK,IAAIL,EAAC,GACd,IAAI,KAAK,IAAIC,EAAC,GACdK,KAAI,KAAK,IAAIJ,EAAC,GACdK,KAAI,IAAIF,IACRG,KAAI,KAAK,IAAIT,EAAC,IAAIO,IAClBG,KAAIN,KAAII,IACRG,KAAIN,KAAII,IACRG,KAAI,EAAEN,KAAIE,KAAI,KAAKJ,KAAI,GACvBS,KAAI,EAAEN,KAAIE,KAAI,KAAKJ,KAAI,GACvBS,KAAId,GAAE;AACR,MAAEc,IAAG,CAACF,IAAGC,IAAG,CAAC,CAAC;AACd,UAAME,KAAIf,GAAE;AACZ,IAAAe,GAAEA,IAAG,CAACL,IAAGC,IAAG,CAAC,CAAC;AACd,UAAM,IAAIX,GAAE;AACZ,WAAO,EAAE,GAAGe,IAAGD,EAAC;AAAA,EAClB;AAAA,EACA,IAAI,iBAAiB;AACnB,UAAMb,KAAI,KAAK,IAAI,KAAK,cAAc,CAAC,CAAC,GACtCC,KAAI,KAAK,IAAI,KAAK,cAAc,CAAC,CAAC,GAClCC,KAAI,IAAI,KAAK,IAAI,KAAK,OAAO,CAAC;AAChC,WAAO,KAAK,IAAI,IAAID,KAAID,MAAKE,EAAC;AAAA,EAChC;AAAA,EACA,YAAYF,IAAGC,IAAG;AAChB,UAAMC,KAAID,KAAI,KAAK;AACnB,WAAO,KAAK,WAAW,CAACD,GAAE,CAAC,GAAGA,GAAE,CAAC,GAAGE,IAAGD,EAAC,GAAGC;AAAA,EAC7C;AACF;AACA,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,iBAAiB,MAAM,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,oBAAoB,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,oBAAoB,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,iBAAiB,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,kBAAkB,IAAI,GAAG,IAAI,EAAE,CAAC,EAAE,mDAAmD,CAAC,GAAG,CAAC;;;AClDhT,IAAMa,KAAN,MAAQ;AAAA,EACN,cAAc;AACZ,SAAK,4BAA4B,KAAK,KAAK,2BAA2B,KAAI,KAAK,sBAAsB,KAAK,KAAK,iBAAiB,GAAG,KAAK,qBAAqB;AAAA,EAC/J;AAAA,EACA,oBAAoBC,IAAG;AACrB,WAAOA,KAAI,KAAK,4BAA4B,KAAK;AAAA,EACnD;AAAA,EACA,oBAAoBA,IAAG;AACrB,WAAO,KAAK,KAAKA,KAAI,KAAK,mBAAmB,IAAI,KAAK;AAAA,EACxD;AACF;AACA,IAAMC,KAAI,CAAC,SAAS,QAAQ,SAAS,QAAQ,OAAO,QAAQ;AAC5D,SAASC,GAAEF,IAAG;AACZ,SAAO,CAAC,CAAC,OAAO,QAAQ,EAAE,SAASA,EAAC;AACtC;AACA,IAAMG,KAAN,MAAQ;AAAA,EACN,YAAYH,IAAG;AACb,SAAK,QAAQA,IAAG,KAAK,WAAW,OAAI,KAAK,SAAS,CAAC,GAAG,KAAK,gBAAgB,GAAG,KAAK,iBAAiB,GAAG,KAAK,WAAW,IAAID,GAAE,GAAG,KAAK,mBAAmB,KAAK,IAAI,IAAI,aAAa,IAAI,OAAO,OAAOC,GAAE,KAAK,WAAW,cAAc;AAAA,EACtO;AAAA,EACA,IAAI,eAAe;AACjB,WAAO,KAAK,SAAS,WAAW;AAAA,EAClC;AAAA,EACA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EACA,IAAI,QAAQA,IAAG;AACb,SAAK,WAAWA,IAAGA,MAAK,KAAK,wBAAwB;AAAA,EACvD;AAAA,EACA,IAAI,gBAAgB;AAClB,WAAO,MAAM,KAAK,iBAAiB,MAAM,KAAK;AAAA,EAChD;AAAA,EACA,IAAI,UAAU;AACZ,UAAMA,KAAI,KAAK;AACf,WAAO,MAAMA,GAAE,SAAS,OAAOA,GAAE,CAAC,EAAE;AAAA,EACtC;AAAA,EACA,IAAI,iBAAiB;AACnB,UAAMA,KAAI,KAAK;AACf,QAAII,KAAI;AACR,WAAO,OAAO,KAAKJ,EAAC,EAAE,QAAQ,CAAAK,OAAK;AACjC,MAAAL,GAAEK,EAAC,MAAMD,MAAK;AAAA,IAChB,CAAC,GAAGA;AAAA,EACN;AAAA,EACA,IAAI,QAAQ;AACV,UAAMJ,KAAI,KAAK,QACbI,KAAI,CAAC;AACP,eAAWC,MAAKJ,IAAG;AACjB,YAAMK,KAAIN,GAAEK,EAAC;AACb,MAAAC,MAAKF,GAAE,KAAKE,EAAC;AAAA,IACf;AACA,WAAOF;AAAA,EACT;AAAA,EACA,IAAI,eAAe;AACjB,WAAO,KAAK,MAAM,IAAI,CAAAJ,OAAK,CAACA,GAAE,IAAI,KAAK,gBAAgBA,GAAE,IAAIA,GAAE,SAAS,KAAK,eAAeA,GAAE,IAAI,KAAK,iBAAiBA,GAAE,IAAIA,GAAE,UAAU,KAAK,cAAc,CAAC;AAAA,EAChK;AAAA,EACA,IAAI,6BAA6B;AAC/B,WAAO,KAAK,MAAM,IAAI,CAAAA,OAAKA,GAAE,gBAAgB;AAAA,EAC/C;AAAA,EACA,IAAI,uBAAuB;AACzB,WAAO,KAAK,MAAM,IAAI,CAAAA,OAAKA,GAAE,UAAU;AAAA,EACzC;AAAA,EACA,iBAAiBI,IAAG,GAAGG,IAAGC,IAAG;AAC3B,UAAM;AAAA,MACF,qBAAqBC;AAAA,MACrB,gBAAgB;AAAA,MAChB,mBAAmBV;AAAA,MACnB,wBAAwBE;AAAA,MACxB,uBAAuBE;AAAA,MACvB,qBAAqBO;AAAA,IACvB,IAAI,GACJC,KAAI,EAAE;AACR,MAAEA,IAAGZ,IAAGU,EAAC;AACT,UAAM,IAAI,EAAE,GACV,IAAI,EAAE,GACN,IAAI,CAACT,IAAGI,OAAM;AACZ,YAAMQ,KAAI,EAAE,GACVC,KAAIT,GAAE;AACR,aAAO,EAAES,IAAGb,IAAGI,EAAC,GAAG,EAAEQ,IAAGD,IAAGE,EAAC,GAAGN,GAAEK,IAAGH,IAAGG,EAAC,GAAGA;AAAA,IAC7C;AACF,QAAI,GACFE,KAAI;AACN,UAAM,IAAI,KAAK,IAAI,IAAIX,EAAC,GACtBY,KAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAIZ,KAAI,MAAM,CAAC,CAAC;AAC5C,QAAIa,KAAI,KACN,IAAI,IACJC,KAAI,KACJ,IAAI;AACN,QAAIf,GAAEE,EAAC,GAAG;AACR,YAAMA,KAAI,CAAAA,OAAKA,GAAEA,IAAG,KAAK,EAAE;AAC3B,MAAAa,KAAIb,GAAE,CAACM,KAAI,CAAC,IAAI,KAAK,SAAS,oBAAoB,IAAIN,GAAE,CAACM,KAAI,CAAC,IAAI,KAAK,SAAS;AAAA,IAClF;AACA,YAAQN,IAAG;AAAA,MACT,KAAK;AACH,YAAIL,IAAGiB,KAAI,CAAC,IAAI,GAAG,IAAI,IAAI;AAC3B;AAAA,MACF,KAAK;AACH,YAAI,EAAE,KAAK,KAAK,GAAG,CAAC,GAAGA,KAAI,KAAKD;AAChC;AAAA,MACF,KAAK;AACH,YAAI,EAAE,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,MAAMA;AAClC;AAAA,MACF,KAAK;AACH,YAAIR,GAAE,GAAGE,IAAG,CAAC,GAAGK,KAAI,EAAE,GAAGH,EAAC;AAC1B;AAAA,MACF,KAAK;AACH,YAAI,EAAE,GAAGF,IAAG,CAAC,GAAGK,KAAIH;AACpB;AAAA,MACF,KAAK;AACH,YAAI,EAAE,KAAK,IAAI,CAAC;AAAA,IACpB;AACA,UAAM,IAAI,IAAI,EAAE;AAAA,MACd,QAAQ;AAAA,MACR,KAAKF;AAAA,MACL,IAAIK;AAAA,MACJ,KAAKb;AAAA,IACP,CAAC;AACD,MAAE,mBAAmB,CAACe,KAAI,KAAK,SAAS,gBAAgB,IAAI,KAAK,SAAS,gBAAgBC,IAAG,CAAC,GAAG,EAAE,OAAO,KAAK,KAAK;AACpH,UAAMC,KAAI,EAAE,YAAYX,IAAGC,EAAC;AAC5B,WAAO,KAAK,OAAOJ,EAAC,IAAI,GAAGc;AAAA,EAC7B;AAAA,EACA,WAAW;AACT,UAAMlB,KAAI,KAAK,MAAM;AACrB,IAAAA,GAAE,cAAc,KAAK,YAAY,GAAGA,GAAE,gBAAgB,KAAK,SAAS,GAAG;AAAA,EACzE;AAAA,EACA,oBAAoBA,IAAG;AACrB,UAAMI,KAAI,oBAAI,IAAI,GAChB;AAAA,MACE,uBAAuBC;AAAA,MACvB,qBAAqBC;AAAA,IACvB,IAAIN,IACJY,KAAI,CAACN,KAAI,GACTa,KAAIb,KAAI;AACV,WAAO,MAAMD,MAAK,MAAMC,OAAMM,MAAK,MAAMO,MAAK,OAAOf,GAAE,IAAI,OAAO,GAAGC,KAAI,OAAOD,GAAE,IAAI,MAAM,GAAGA,GAAE,IAAI,OAAO,IAAIC,KAAI,OAAOD,GAAE,IAAI,MAAM,GAAGe,KAAI,KAAK,KAAK,SAAS,sBAAsBf,GAAE,IAAI,KAAK,GAAGQ,KAAI,MAAM,KAAK,SAAS,sBAAsBR,GAAE,IAAI,QAAQ,IAAIA;AAAA,EACvQ;AAAA,EACA,wBAAwBJ,IAAGI,IAAGC,IAAGC,IAAG;AAClC,UAAMM,KAAI,KAAK,IAAI,OAAO,kBAAkBR,EAAC,IAAIJ,GAAE,YACjDmB,KAAI,KAAK,SAAS,oBAAoBd,EAAC,GACvCQ,KAAIO,GAAE,KAAK,MAAM,KAAK,IAAIpB,GAAE,WAAWA,GAAE,UAAU,IAAIY,KAAIO,EAAC,CAAC,GAC7DE,KAAI,KAAK,MAAM,KAAK,mBAAmBf,EAAC,GACxCc,KAAI,KAAK,IAAIC,IAAGR,EAAC;AACnB,WAAOR,GAAEe,EAAC;AAAA,EACZ;AAAA,EACA,aAAa;AACX,UAAMpB,KAAI,KAAK,eACbI,KAAI,KAAK;AACX,SAAK,SAAS,KAAK,UAAUJ,MAAK,KAAK,SAAS,KAAK,WAAWI,OAAM,KAAK,SAAS,QAAQ,GAAG,KAAK,UAAU,KAAK,MAAM,QAAQJ,IAAGI,IAAG,uBAAuB,EAAE,KAAK,IAAI,KAAK,QAAQ,aAAakB,GAAE,cAAc;AAAA,EACrN;AAAA,EACA,WAAW;AACT,UAAMtB,KAAI,KAAK,MAAM;AACrB,SAAK,WAAW,GAAG,KAAK,SAAS,GAAGA,GAAE,cAAc,GAAG,GAAG,GAAG,CAAC,GAAGA,GAAE,MAAM,EAAE,mBAAmB,EAAE,gBAAgB;AAAA,EAClH;AAAA,EACA,UAAU;AACR,SAAK,UAAU,OAAI,KAAK,wBAAwB;AAAA,EAClD;AAAA,EACA,0BAA0B;AACxB,SAAK,UAAU,EAAE,KAAK,OAAO;AAAA,EAC/B;AAAA,EACA,MAAMA,IAAGI,IAAGC,IAAGC,IAAG;AAChB,QAAI,KAAK,SAAS,CAAC,GAAG,CAAC,KAAK,QAAS,QAAO;AAC5C,UAAMM,KAAI,KAAK,oBAAoBR,EAAC,GAClCe,KAAIP,GAAE;AACR,QAAI,MAAMO,GAAG,QAAO;AACpB,UAAMN,KAAI,KAAK,wBAAwBb,IAAGM,IAAGD,IAAGc,EAAC;AACjD,QAAI,MAAMN,GAAG,QAAO;AACpB,QAAIQ,KAAI,GACND,KAAI,GACJ,IAAI;AACN,WAAOnB,GAAE,OAAO,CAAAD,OAAKY,GAAE,IAAIZ,EAAC,CAAC,EAAE,QAAQ,CAAAA,OAAK;AAC1C,YAAMK,KAAI,EAAEL,IAAGmB,EAAC;AAChB,MAAAd,KAAIe,OAAM,IAAI,KAAK,IAAI,GAAGC,EAAC,GAAGA,KAAI,IAAID,KAAIf;AAC1C,YAAMC,KAAID,KAAIQ;AACd,MAAAQ,MAAK,KAAK,iBAAiBrB,IAAGI,IAAG,CAACiB,IAAGf,EAAC,GAAGO,EAAC;AAAA,IAC5C,CAAC,GAAG,IAAI,KAAK,IAAI,GAAGQ,EAAC,GAAG,KAAK,gBAAgB,KAAK,SAAS,oBAAoB,CAAC,GAAG,KAAK,iBAAiBV,GAAEQ,EAAC,IAAIN,IAAG,KAAK,SAAS,GAAG;AAAA,EACtI;AAAA,EACA,SAAS;AACP,SAAK,SAAS,YAAY;AAAA,EAC5B;AAAA,EACA,IAAI,OAAO;AACT,WAAO;AAAA,MACL,OAAO,KAAK;AAAA,MACZ,WAAWZ;AAAA,IACb;AAAA,EACF;AACF;AACA,SAAS,EAAED,IAAGI,IAAG;AACf,MAAIA,KAAI,EAAG,QAAO;AAClB,QAAMC,KAAI,YAAYL,MAAK,WAAWA;AACtC,SAAO,MAAMI,KAAIC,KAAI,IAAI,IAAIA,MAAK,YAAYL,KAAI,IAAI;AACxD;AACA,SAASW,GAAEX,IAAG;AACZ,SAAOA,KAAI,IAAI,IAAI;AACrB;;;AClMA,IAAM,IAAN,MAAM,WAAUuB,GAAE;AAAA,EAChB,kBAAkBC,IAAG;AACnB,WAAO,IAAID,GAAEC,GAAE,MAAM,GAAE,OAAO,IAAI,EAAE,MAAM,KAAK,aAAa,GAAGC,EAAC;AAAA,EAClE;AAAA,EACA,qBAAqB;AACnB,WAAO,EAAE;AAAA,MACP,YAAYC;AAAA,MACZ,UAAUC;AAAA,IACZ,CAAC;AAAA,EACH;AACF;AACA,EAAE,SAAS,IAAIC,GAAE,GAAG,MAAM,OAAO,6BAAoB,CAAC;;;AChBtD,IAAMC,KAAN,cAAgBC,GAAE;AAAA,EAChB,cAAc;AACZ,UAAM,GAAG,SAAS,GAAG,KAAK,eAAe;AAAA,EAC3C;AACF;AACA,EAAE,CAACC,GAAE,CAAC,GAAGF,GAAE,WAAW,gBAAgB,MAAM;;;ACc5C,IAAI,IAAI,cAAcG,GAAE;AAAA,EACtB,IAAI,oBAAoB;AACtB,WAAO,KAAK;AAAA,EACd;AAAA,EACA,IAAI,UAAU;AACZ,WAAO,KAAK,WAAW,SAAS;AAAA,EAClC;AAAA,EACA,YAAYC,IAAGC,IAAG;AAChB,UAAMD,EAAC,GAAG,KAAK,iBAAiB,MAAM,KAAK,oBAAoB,OAAI,KAAK,cAAc,IAAI,EAAE,GAAG,KAAK,iBAAiB,IAAIE,GAAE,GAAG,KAAK,aAAa,IAAI,EAAE,GAAG,KAAK,WAAW,oBAAI,IAAI,CAAC,CAAC,EAAE,UAAU,MAAM,IAAE,CAAC,CAAC,GAAG,KAAK,mBAAmBD;AAAA,EACtO;AAAA,EACA,aAAa;AACX,SAAK,WAAW,EAAE,MAAM,KAAK,KAAK,gBAAgB,mBAAmB,CAAAD,OAAK,KAAK,qBAAqBA,IAAG,CAAC,CAAC;AAAA,EAC3G;AAAA,EACA,UAAU;AACR,SAAK,0BAA0B;AAAA,EACjC;AAAA,EACA,WAAW;AACT,WAAO,KAAK,UAAUG,KAAIC;AAAA,EAC5B;AAAA,EACA,wBAAwBJ,IAAG;AACzB,SAAK,iBAAiBA,IAAG,KAAK,qBAAqB,IAAIK,GAAE,KAAK,QAAQ,GAAG,KAAK,mBAAmB,UAAU;AAAA,EAC7G;AAAA,EACA,WAAWL,IAAGI,IAAGH,IAAG;AAClB,UAAM;AAAA,MACJ,gBAAgBC;AAAA,MAChB,MAAMI;AAAA,IACR,IAAIN;AACJ,QAAI,CAAC,KAAK,WAAW,CAACE,GAAE,SAAS,QAAQD,GAAG;AAC5C,UAAMM,KAAI,KAAK,cAAcN,EAAC;AAC9B,QAAI,QAAQ,KAAK,cAAc,KAAK,eAAe,iBAAiBM,OAAM,KAAK,eAAe,eAAeA,IAAG,KAAK,aAAa,KAAK,gBAAgB,WAAW,QAAQ,GAAG,KAAK,cAAc,IAAI,KAAK,YAAY,SAAU,YAAWC,MAAK,KAAK,YAAY;AAC9P,YAAMJ,KAAIJ,GAAE,KAAK,0BAA0B,GACzCC,KAAI,KAAK,6BAA6BC,IAAGM,EAAC,GAC1CD,KAAI,KAAK;AACX,MAAAN,MAAK,QAAQM,GAAE,gBAAgB,CAACA,GAAE,kBAAkB,KAAK,mBAAmBC,EAAC,GAAGR,GAAE,KAAK,gBAAgBI,EAAC,GAAGE,GAAE,cAAc,KAAK,YAAYJ,IAAG,KAAK,WAAW,GAAGI,GAAE,OAAO,KAAK;AAAA,IAClL;AAAA,QAAO,MAAK,gBAAgB,cAAc;AAAA,EAC5C;AAAA,EACA,4BAA4B;AAC1B,SAAK,iBAAiB,MAAM,KAAK,mBAAmB,QAAQ,GAAG,KAAK,aAAa,EAAE,KAAK,UAAU;AAAA,EACpG;AAAA,EACA,gBAAgBN,IAAG;AACjB,UAAMC,KAAID,GAAE;AACZ,YAAQC,OAAM,EAAE,aAAaA,EAAC,IAAI,KAAK,WAAW,WAAWA,EAAC,IAAI,KAAK,WAAW,OAAOA,EAAC;AAC1F,UAAMC,KAAIF,GAAE;AACZ,QAAI,QAAQE,GAAG,KAAI,EAAE,aAAaA,EAAC,GAAG;AACpC,YAAMF,KAAIE,GAAE,OAAO,CAAAF,OAAK,CAAC,KAAK,WAAW,SAASA,EAAC,CAAC;AACpD,WAAK,WAAW,QAAQA,EAAC;AAAA,IAC3B,MAAO,MAAK,WAAW,SAASE,EAAC,KAAK,KAAK,WAAW,IAAIA,EAAC;AAAA,EAC7D;AAAA,EACA,6BAA6BF,IAAGI,IAAG;AACjC,UAAMH,KAAI,KAAK;AACf,QAAI,CAACA,GAAE,QAAS,QAAO;AACvB,UAAMC,KAAID,GAAE,MAAMD,GAAE,QAAQI,IAAG,KAAK,mBAAmB,KAAK,kBAAkB;AAC9E,QAAIF,GAAG,YAAWI,MAAKL,GAAE,MAAO,MAAK,iBAAiBD,IAAGM,IAAG,EAAE,cAAc;AAC5E,WAAOL,GAAE,OAAO,GAAGC;AAAA,EACrB;AAAA,EACA,mBAAmBF,IAAG;AACpB,UAAMI,KAAI,KAAK,aACbF,KAAI,KAAK,oBACTI,KAAIN,GAAE;AACR,IAAAI,GAAE,cAAcE,IAAGF,GAAE,OAAO,CAAC,EAAEJ,GAAE,qBAAqB,GAAG,EAAEA,GAAE,mBAAmB,CAAC,GAAGI,GAAE,iBAAiB,CAAC,EAAEJ,GAAE,OAAO,GAAG,EAAEA,GAAE,qBAAqB,CAAC,GAAGI,GAAE,WAAWJ,GAAE;AAClK,UAAMO,KAAIE,GAAET,GAAE,mBAAmBM,EAAC;AAClC,IAAAF,GAAE,eAAeG,IAAGH,GAAE,YAAYF;AAClC,UAAMM,KAAI,CAAC,GACTL,KAAI,CAAC;AACP,aAASF,KAAI,GAAGA,KAAIC,GAAE,gBAAgBD,KAAK,GAAES,IAAGR,GAAE,qBAAqBD,EAAC,GAAGK,EAAC,GAAGE,GAAE,KAAK,GAAGE,GAAE,KAAK,CAAC,GAAGC,GAAET,GAAE,2BAA2BD,EAAC,GAAGS,IAAGE,EAAC,GAAGT,GAAE,KAAK,GAAGS,GAAE,KAAK,CAAC;AAChK,IAAAR,GAAE,eAAeI,IAAGJ,GAAE,qBAAqBD;AAAA,EAC7C;AAAA,EACA,cAAcH,IAAG;AACf,UAAMI,KAAIJ,GAAE,IAAI,SAAS,GACvBC,KAAIG,IAAG,WAAW;AACpB,WAAO,KAAK,YAAY,gBAAgBH,IAAG,QAAQA;AAAA,EACrD;AAAA,EACA,IAAI,OAAO;AACT,WAAO;AAAA,MACL,WAAW,KAAK;AAAA,IAClB;AAAA,EACF;AACF;AACA,SAASQ,GAAET,IAAGI,IAAG;AACf,QAAMH,KAAI,EAAE;AACZ,SAAO,EAAEA,IAAGD,IAAGI,EAAC;AAClB;AACA,SAASO,GAAEX,IAAGI,IAAGH,IAAG;AAClB,QAAMC,KAAI,EAAE,KAAI,KAAI,GAAE;AACtB,SAAO,EAAED,IAAGC,EAAC,GAAG,EAAED,IAAGA,IAAGC,EAAC,GAAG,EAAED,IAAGA,IAAGD,EAAC,GAAG,EAAEC,IAAGA,IAAGG,EAAC,GAAGH;AACtD;AACA,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,kBAAkB,MAAM,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,YAAY,MAAM,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,QAAQ,MAAM,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,qBAAqB,IAAI,GAAG,IAAI,EAAE,CAAC,EAAE,yCAAyC,CAAC,GAAG,CAAC;AAC5O,IAAMS,KAAIV,GAAE;AAAZ,IACEY,KAAIZ,GAAE;",
  "names": ["n", "e", "t", "s", "o", "r", "l", "p", "g", "f", "M", "j", "u", "A", "x", "b", "d", "x", "t", "p", "_", "g", "e", "i", "s", "u", "l", "f", "b", "M", "r", "o", "S", "O", "j", "R", "y", "a", "n", "h", "E", "r", "e", "O", "_", "A", "t", "s", "t", "r", "u", "e", "i", "s", "n", "t", "g", "r", "o", "a", "V", "y", "q", "R"]
}
