{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/layers/support/ElevationSampler.js", "../../../../../../node_modules/@arcgis/core/layers/support/ElevationSamplerData.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../geometry.js\";\nimport \"../../core/has.js\";\nimport { makeHandle as e } from \"../../core/handleUtils.js\";\nimport t from \"../../core/Logger.js\";\nimport { getMetersPerUnitForSR as n } from \"../../core/unitUtils.js\";\nimport { toExtent as s, containsXY as i, create as o } from \"../../geometry/support/aaBoundingRect.js\";\nimport { project as a } from \"../../geometry/support/webMercatorUtils.js\";\nimport r from \"../../geometry/Point.js\";\nconst l = () => t.getLogger(\"esri.layers.support.ElevationSampler\");\nclass m {\n  queryElevation(e) {\n    return p(e.clone(), this);\n  }\n  on() {\n    return e();\n  }\n  projectIfRequired(e, t) {\n    return h(e, t);\n  }\n}\nclass c extends m {\n  get spatialReference() {\n    return this.extent.spatialReference;\n  }\n  constructor(e, t, i) {\n    super(), this.tile = e, this.noDataValue = i;\n    const o = e.tile.extent;\n    this.extent = s(o, t.spatialReference), this.extent.zmin = e.zmin, this.extent.zmax = e.zmax, this._aaExtent = o;\n    const a = n(t.spatialReference),\n      r = t.lodAt(e.tile.level).resolution * a;\n    this.demResolution = {\n      min: r,\n      max: r\n    };\n  }\n  contains(e) {\n    const t = this.projectIfRequired(e, this.spatialReference);\n    return null != t && this.containsAt(t.x, t.y);\n  }\n  containsAt(e, t) {\n    return i(this._aaExtent, e, t);\n  }\n  elevationAt(e, t) {\n    if (!this.containsAt(e, t)) {\n      const n = this.extent,\n        s = `${n.xmin}, ${n.ymin}, ${n.xmax}, ${n.ymax}`;\n      return l().warn(\"#elevationAt()\", `Point used to sample elevation (${e}, ${t}) is outside of the sampler extent (${s})`), this.noDataValue;\n    }\n    return this.tile.sample(e, t) ?? this.noDataValue;\n  }\n}\nclass u extends m {\n  get spatialReference() {\n    return this.extent.spatialReference;\n  }\n  constructor(e, t, n) {\n    let i;\n    super(), \"number\" == typeof t ? (this.noDataValue = t, i = null) : (i = t, this.noDataValue = n), this.samplers = i ? e.map(e => new c(e, i, this.noDataValue)) : e;\n    const a = this.samplers[0];\n    if (a) {\n      this.extent = a.extent.clone();\n      const {\n        min: e,\n        max: t\n      } = a.demResolution;\n      this.demResolution = {\n        min: e,\n        max: t\n      };\n      for (let n = 1; n < this.samplers.length; n++) {\n        const e = this.samplers[n];\n        this.extent.union(e.extent), this.demResolution.min = Math.min(this.demResolution.min, e.demResolution.min), this.demResolution.max = Math.max(this.demResolution.max, e.demResolution.max);\n      }\n    } else this.extent = s(o(), i.spatialReference), this.demResolution = {\n      min: 0,\n      max: 0\n    };\n  }\n  elevationAt(e, t) {\n    let n,\n      s = !1;\n    for (const i of this.samplers) if (i.containsAt(e, t) && (s = !0, n = i.elevationAt(e, t), n !== i.noDataValue)) return n;\n    return null != n ? n : (s || l().warn(\"#elevationAt()\", `Point used to sample elevation (${e}, ${t}) is outside of the sampler`), this.noDataValue);\n  }\n}\nfunction p(e, t) {\n  const n = h(e, t.spatialReference);\n  if (!n) return null;\n  switch (e.type) {\n    case \"point\":\n      f(e, n, t);\n      break;\n    case \"polyline\":\n      x(e, n, t);\n      break;\n    case \"multipoint\":\n      R(e, n, t);\n  }\n  return e;\n}\nfunction h(e, t) {\n  if (null == e) return null;\n  const n = e.spatialReference;\n  if (n.equals(t)) return e;\n  const s = a(e, t);\n  return s || l().error(`Cannot project geometry spatial reference (wkid:${n.wkid}) to elevation sampler spatial reference (wkid:${t.wkid})`), s;\n}\nfunction f(e, t, n) {\n  e.z = n.elevationAt(t.x, t.y);\n}\nfunction x(e, t, n) {\n  d.spatialReference = t.spatialReference;\n  const s = e.hasM && !e.hasZ;\n  for (let i = 0; i < e.paths.length; i++) {\n    const o = e.paths[i],\n      a = t.paths[i];\n    for (let e = 0; e < o.length; e++) {\n      const t = o[e],\n        i = a[e];\n      d.x = i[0], d.y = i[1], s && (t[3] = t[2]), t[2] = n.elevationAt(d.x, d.y);\n    }\n  }\n  e.hasZ = !0;\n}\nfunction R(e, t, n) {\n  d.spatialReference = t.spatialReference;\n  const s = e.hasM && !e.hasZ;\n  for (let i = 0; i < e.points.length; i++) {\n    const o = e.points[i],\n      a = t.points[i];\n    d.x = a[0], d.y = a[1], s && (o[3] = o[2]), o[2] = n.elevationAt(d.x, d.y);\n  }\n  e.hasZ = !0;\n}\nconst d = new r();\nexport { m as ElevationSamplerBase, u as MultiTileElevationSampler, c as TileElevationSampler, p as updateGeometryElevation };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t {\n  constructor(t, h) {\n    this.data = t, this.safeWidth = .99999999 * (t.width - 1), this.dx = (t.width - 1) / (h[2] - h[0]), this.dy = (t.width - 1) / (h[3] - h[1]), this.x0 = h[0], this.y1 = h[3];\n  }\n}\nexport { t as ElevationSamplerData };"],
  "mappings": "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",
  "names": ["e", "t", "c", "n", "u", "i", "t", "h"]
}
