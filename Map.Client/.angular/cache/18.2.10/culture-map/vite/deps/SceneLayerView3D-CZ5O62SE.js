import {
  a as a2,
  d as d4,
  f,
  i as i2,
  i2 as i3,
  u as u5,
  w
} from "./chunk-OJZQSS6S.js";
import {
  i
} from "./chunk-U46JKVZ5.js";
import {
  P as P2,
  d as d3,
  h,
  o as o3
} from "./chunk-JOFSRLM6.js";
import {
  t2,
  u2 as u4
} from "./chunk-UKXHREMM.js";
import {
  At,
  n as n3,
  u as u3
} from "./chunk-33OC6OD3.js";
import "./chunk-WB2PLZ2R.js";
import {
  G
} from "./chunk-JCGHSOIP.js";
import "./chunk-PA5PVFOE.js";
import "./chunk-XVYR2JNI.js";
import "./chunk-LC4TAVYF.js";
import "./chunk-6HNAQ6T3.js";
import "./chunk-KGPFLNKT.js";
import "./chunk-M66N34RL.js";
import "./chunk-UJF7LPVD.js";
import "./chunk-4E3ADDPV.js";
import "./chunk-TOQG323X.js";
import "./chunk-K7KZCCPZ.js";
import "./chunk-5A6MLLPH.js";
import "./chunk-2WSNLRTZ.js";
import "./chunk-IIXY5BBS.js";
import "./chunk-SB6NP2J2.js";
import "./chunk-AXXQSWHU.js";
import "./chunk-PPMYY5TL.js";
import "./chunk-ONNA6736.js";
import "./chunk-ZEJV2HHS.js";
import "./chunk-7RD4KVUX.js";
import "./chunk-S2OEQYU7.js";
import "./chunk-UAMCUBIO.js";
import "./chunk-PR6QK2UX.js";
import "./chunk-HHHY7K7M.js";
import "./chunk-PRMR227H.js";
import "./chunk-APWDCJIJ.js";
import "./chunk-NEPAFG4J.js";
import "./chunk-E7VVOB2F.js";
import "./chunk-DOYOAB3G.js";
import "./chunk-DDIAZD6H.js";
import "./chunk-7YXVUZL6.js";
import "./chunk-6YVA5E7L.js";
import "./chunk-4KGPH7OX.js";
import "./chunk-TLAW3ACJ.js";
import "./chunk-GFPWBDCO.js";
import "./chunk-MQUE5HQL.js";
import "./chunk-TKHURHLF.js";
import "./chunk-U7YHNT5S.js";
import "./chunk-UW23RIEM.js";
import "./chunk-R6CAUNOR.js";
import "./chunk-6BPYXCCQ.js";
import "./chunk-TMIIQZKR.js";
import "./chunk-ROVEMBDA.js";
import "./chunk-ZIDRXKSJ.js";
import "./chunk-DBK2ELNZ.js";
import "./chunk-S2GZKKIE.js";
import "./chunk-JMV2M56E.js";
import "./chunk-ZQYSUMPX.js";
import "./chunk-CZLVBJSQ.js";
import "./chunk-S2UCXOWF.js";
import "./chunk-VI6HLZLR.js";
import "./chunk-MYKOM3G6.js";
import "./chunk-6FZS4YUQ.js";
import "./chunk-JRZPZOI3.js";
import "./chunk-TP2RTSHJ.js";
import "./chunk-RDOYE3NP.js";
import "./chunk-DXJZ22ZH.js";
import "./chunk-LVYRNWV6.js";
import "./chunk-GW7WMRYJ.js";
import "./chunk-LWAFK7Z6.js";
import "./chunk-Z52R7W33.js";
import "./chunk-O7OCS6XP.js";
import "./chunk-BFWLPS7M.js";
import "./chunk-67LE7VNQ.js";
import "./chunk-ENI3KAZB.js";
import "./chunk-ZVEHH7XL.js";
import "./chunk-BJM7H6OC.js";
import "./chunk-5MM5MT6Q.js";
import "./chunk-SCLVG2SO.js";
import "./chunk-557LD7Q2.js";
import "./chunk-B64VDY5O.js";
import "./chunk-MAG65NGG.js";
import "./chunk-X5UPCJEP.js";
import "./chunk-6R6EEJ3E.js";
import "./chunk-2ONAF54K.js";
import "./chunk-K74MUOGN.js";
import "./chunk-I6P6ZEQ2.js";
import "./chunk-NLEBYD5G.js";
import {
  t
} from "./chunk-MOCGEINB.js";
import "./chunk-NSSWLGUQ.js";
import {
  l
} from "./chunk-CITBGG5A.js";
import "./chunk-6HTAUV5K.js";
import "./chunk-PFFFLPSP.js";
import "./chunk-EOYCWFZW.js";
import "./chunk-IJVQCMOT.js";
import "./chunk-UQMQLPLV.js";
import "./chunk-5JJ6GBOU.js";
import "./chunk-RP2GKJCD.js";
import "./chunk-KM65NCZ2.js";
import "./chunk-6YA72G7G.js";
import "./chunk-D4LAF4TH.js";
import "./chunk-QL5HR3YL.js";
import "./chunk-37FUJHR2.js";
import {
  s
} from "./chunk-UOIZXQPU.js";
import {
  c
} from "./chunk-D3AKDIJC.js";
import "./chunk-IM5W3NWZ.js";
import "./chunk-WVEBK4ZV.js";
import {
  o as o2
} from "./chunk-5NCKEQLF.js";
import "./chunk-ATQ5GYTB.js";
import "./chunk-ZUHJZKEM.js";
import "./chunk-B4EEJXBQ.js";
import "./chunk-HMUNABEN.js";
import "./chunk-6PFH6TN3.js";
import "./chunk-Q7ENCKPJ.js";
import "./chunk-JA2C7MTO.js";
import "./chunk-74INNEIP.js";
import "./chunk-7HBD4CJ3.js";
import "./chunk-K2LTET4M.js";
import "./chunk-WG5JLPNN.js";
import "./chunk-25PMMPR7.js";
import "./chunk-7XAWCQ7R.js";
import "./chunk-RASN5P76.js";
import "./chunk-5L3YXBNN.js";
import "./chunk-IFUKJDOU.js";
import "./chunk-LD5YIQXD.js";
import "./chunk-J7KF6IEI.js";
import "./chunk-GOKBAMCG.js";
import "./chunk-E3P3LIVT.js";
import "./chunk-HUX6Y26H.js";
import "./chunk-LN4EMOLP.js";
import "./chunk-PDYGQYJC.js";
import "./chunk-JS5N3Y4L.js";
import "./chunk-PO7V7AQE.js";
import "./chunk-JO42C6R3.js";
import "./chunk-PZH3N2FW.js";
import "./chunk-U4WO2GC4.js";
import "./chunk-JO76LYW5.js";
import "./chunk-A6XTYETO.js";
import "./chunk-EKCE56CG.js";
import "./chunk-4TJAOUC3.js";
import "./chunk-CILAEMQM.js";
import "./chunk-WRHEXEG3.js";
import "./chunk-3HAZL2RZ.js";
import "./chunk-XUAPJ5BK.js";
import "./chunk-TEOUFCJA.js";
import "./chunk-GTZOXRB5.js";
import "./chunk-3WPOFZBT.js";
import "./chunk-PPMHRAOP.js";
import "./chunk-75N5YDQB.js";
import "./chunk-3MNGTHM3.js";
import "./chunk-XGDLE7WK.js";
import "./chunk-QMUS26QM.js";
import "./chunk-GDEAPZ64.js";
import "./chunk-TCQSUQ7Y.js";
import "./chunk-GOOZVNO4.js";
import "./chunk-JUTKZ3GO.js";
import "./chunk-5RHKQDDL.js";
import "./chunk-BG32AOSQ.js";
import "./chunk-PEZTN5WV.js";
import "./chunk-FHW2TG7X.js";
import "./chunk-33LKI2Y7.js";
import "./chunk-YCQXFVJL.js";
import "./chunk-ZAP7ZEWR.js";
import "./chunk-YAGNWBGU.js";
import "./chunk-DE6MQ5XE.js";
import "./chunk-LQTSBE7P.js";
import "./chunk-GCFUJXGH.js";
import "./chunk-MBMY7SS6.js";
import "./chunk-ICUHXX2J.js";
import "./chunk-VIIVMRRO.js";
import "./chunk-ZKSEQXDM.js";
import "./chunk-675UQNXB.js";
import "./chunk-DXGCBLDW.js";
import "./chunk-Z3FHX4FD.js";
import "./chunk-SUUOAZQT.js";
import "./chunk-TGHJVD7I.js";
import "./chunk-OZG2NNUW.js";
import "./chunk-KTRZHJ2M.js";
import "./chunk-KOIKSJSQ.js";
import "./chunk-VUVXW4AC.js";
import "./chunk-LKHUGH5W.js";
import "./chunk-ODLAAWPY.js";
import "./chunk-VWVZLPC3.js";
import "./chunk-P2MXQ2EV.js";
import "./chunk-QZVEEM53.js";
import "./chunk-ACZYDHB3.js";
import "./chunk-JXVDTUGR.js";
import "./chunk-HAO4WCNW.js";
import "./chunk-X2OAE75B.js";
import "./chunk-UCPBGEQD.js";
import "./chunk-SIZK72CP.js";
import "./chunk-Y37SHKPH.js";
import "./chunk-Z3XBAPJ2.js";
import "./chunk-EUVN3KSV.js";
import "./chunk-WBOVDU4O.js";
import "./chunk-TQYVLRAH.js";
import "./chunk-6A3XUATG.js";
import "./chunk-WX42XBL6.js";
import "./chunk-WBUJP5OW.js";
import "./chunk-L64P7DHA.js";
import "./chunk-EYYHTDAX.js";
import "./chunk-TVV62TZG.js";
import "./chunk-ZNDAVKXT.js";
import "./chunk-5XOZP4XS.js";
import "./chunk-ZVFENZUF.js";
import "./chunk-C2NHN5LF.js";
import "./chunk-OHXCVJMH.js";
import "./chunk-N3S77FRG.js";
import "./chunk-YYETZJJB.js";
import "./chunk-MD2IQSSQ.js";
import "./chunk-VERD3NGR.js";
import {
  o
} from "./chunk-H6HXZTAS.js";
import "./chunk-VHERB2HE.js";
import "./chunk-Z6Z2SY6R.js";
import "./chunk-YZBHNRVB.js";
import "./chunk-O6UMOA7Q.js";
import "./chunk-EXODD7PD.js";
import "./chunk-C7VF4AR2.js";
import "./chunk-EU7HJNZD.js";
import "./chunk-4HODTCAO.js";
import "./chunk-RSQ7FJBQ.js";
import "./chunk-EK3IKAMF.js";
import "./chunk-IJVN5N2Q.js";
import "./chunk-JCWQ2LOQ.js";
import "./chunk-P7OSFLIX.js";
import "./chunk-ZDC4PV4Y.js";
import "./chunk-O7ZVERIH.js";
import "./chunk-IIZFTYAL.js";
import "./chunk-YSIUOTSV.js";
import "./chunk-NQEXQAS7.js";
import "./chunk-R4DKV4UN.js";
import "./chunk-SNHPS7NU.js";
import "./chunk-L3F4XA4B.js";
import "./chunk-DLRYNII2.js";
import "./chunk-ENQEWBGS.js";
import "./chunk-66QAJ2MI.js";
import "./chunk-WN3YAMRZ.js";
import "./chunk-NWICVENM.js";
import "./chunk-OUP4PSAG.js";
import "./chunk-A4RKV2C7.js";
import "./chunk-WU7FVYT7.js";
import "./chunk-SYYDVGKY.js";
import "./chunk-6HBAAUBO.js";
import "./chunk-YLE5AYZV.js";
import "./chunk-6V5NKLIC.js";
import "./chunk-CZQYBYHB.js";
import "./chunk-Q5ZRUB2Y.js";
import "./chunk-2XI572KI.js";
import "./chunk-R4P4UBKU.js";
import "./chunk-62WUYJJN.js";
import "./chunk-AWJPQWYU.js";
import "./chunk-JNWMZ6EJ.js";
import "./chunk-VS26W5Y5.js";
import "./chunk-LM2N2I5R.js";
import "./chunk-PVO5NM6Q.js";
import "./chunk-ZQ57XGAE.js";
import "./chunk-UXW277HY.js";
import "./chunk-OR5F5ACQ.js";
import "./chunk-E2WAKNLZ.js";
import "./chunk-ROATEOHC.js";
import "./chunk-BIWDYV6F.js";
import "./chunk-4MXR7W7N.js";
import "./chunk-6UYQMUGI.js";
import "./chunk-D3XZUGMN.js";
import {
  I
} from "./chunk-YFQ32AQX.js";
import "./chunk-L4AYSXFJ.js";
import "./chunk-POQ3T5EH.js";
import "./chunk-LPEFONL3.js";
import "./chunk-SSMSHZ2C.js";
import "./chunk-DM4WHMQY.js";
import "./chunk-DON3YPGT.js";
import "./chunk-C7NRYPDG.js";
import "./chunk-Z3GMSC63.js";
import "./chunk-F35MWZH7.js";
import "./chunk-ED7UGR2X.js";
import "./chunk-YA5CTHMT.js";
import "./chunk-4QBFFLOC.js";
import "./chunk-O437BSYE.js";
import "./chunk-YZNT6QWD.js";
import "./chunk-YVOGHYE3.js";
import "./chunk-IBOZJLSO.js";
import "./chunk-JDUU4ZDX.js";
import "./chunk-TT5ZTQDR.js";
import {
  u as u2
} from "./chunk-2N3BR7QT.js";
import "./chunk-6MR4UDDL.js";
import "./chunk-N3IR233K.js";
import "./chunk-KQDYTHCF.js";
import "./chunk-3AY5EJVP.js";
import {
  d as d2
} from "./chunk-XQCKIDQO.js";
import "./chunk-YFOAET4H.js";
import "./chunk-5U4TBXYS.js";
import "./chunk-6WG22V46.js";
import "./chunk-OOGIXDXG.js";
import "./chunk-KDJZAYOF.js";
import "./chunk-HCFDI7IX.js";
import "./chunk-AQJS6F3O.js";
import "./chunk-WUB6LJVL.js";
import "./chunk-QXSES7JX.js";
import "./chunk-5YIMTGEC.js";
import "./chunk-UFVMJL32.js";
import "./chunk-2SMFPIRI.js";
import {
  W,
  Y,
  Z
} from "./chunk-VCFSVEDB.js";
import "./chunk-XCVOKQAA.js";
import "./chunk-3WQXHRJE.js";
import "./chunk-EBLQZUPS.js";
import "./chunk-URWREU3E.js";
import "./chunk-KE2YMCJC.js";
import "./chunk-L7ZKWTWL.js";
import "./chunk-O2DTA3XK.js";
import "./chunk-3UOXF3CT.js";
import "./chunk-WDDCGJTI.js";
import "./chunk-PA7WZX2U.js";
import "./chunk-GPUGMSHU.js";
import "./chunk-AIS5CSUZ.js";
import "./chunk-52UEU7LG.js";
import "./chunk-WJKYGQOY.js";
import "./chunk-GY52WOQZ.js";
import "./chunk-GAYJ4YPJ.js";
import "./chunk-PPMDUJ4E.js";
import "./chunk-ZTT6ENBS.js";
import "./chunk-MFZTGYUJ.js";
import "./chunk-R5ZE5A4K.js";
import "./chunk-24CN3HDP.js";
import "./chunk-SZWWBMQN.js";
import "./chunk-ZE47C44H.js";
import "./chunk-5GIS2C3K.js";
import "./chunk-XCOHDMBF.js";
import "./chunk-2GMKFOCL.js";
import "./chunk-ZR5BOILP.js";
import "./chunk-QCBC3RJX.js";
import "./chunk-6XGV55XZ.js";
import "./chunk-HOH445RO.js";
import "./chunk-R3F4JMNC.js";
import "./chunk-63QCTVYB.js";
import "./chunk-W5ERGD4Y.js";
import "./chunk-7B5YPLFX.js";
import "./chunk-RDQF44TE.js";
import "./chunk-KKD7A2GN.js";
import "./chunk-ZWCV4HKG.js";
import "./chunk-N4KQPPPI.js";
import "./chunk-4OGGMTIH.js";
import "./chunk-NQVBBKAN.js";
import "./chunk-U74WRHVJ.js";
import "./chunk-TCPN7AEH.js";
import "./chunk-4MMTPKY4.js";
import "./chunk-DY7FJHTG.js";
import "./chunk-Q4KYZS3X.js";
import "./chunk-KVKFHRJ3.js";
import "./chunk-VWML4J2J.js";
import "./chunk-JYODC3YQ.js";
import "./chunk-BQZBOYBD.js";
import "./chunk-TYQXPPSP.js";
import "./chunk-W2IRSMFY.js";
import {
  b
} from "./chunk-TRSGUVSM.js";
import "./chunk-U3MA63JX.js";
import "./chunk-WYKKCLBI.js";
import "./chunk-PFMGJTQM.js";
import "./chunk-Q7SRMLJZ.js";
import "./chunk-PQ4T66BG.js";
import "./chunk-SWPHGZYB.js";
import "./chunk-DWASPXVI.js";
import {
  n as n2
} from "./chunk-TNWXOQKO.js";
import "./chunk-MAO5BVLA.js";
import "./chunk-T2S5VXNP.js";
import "./chunk-4U5GUJRA.js";
import "./chunk-7KRERHHR.js";
import "./chunk-T4AP6CTC.js";
import {
  d
} from "./chunk-HD65DNIO.js";
import "./chunk-4KWLMXIA.js";
import "./chunk-BIUXKPKA.js";
import "./chunk-N6TJI25E.js";
import "./chunk-634JLXD4.js";
import "./chunk-Y3EDGYWG.js";
import "./chunk-UF6JOUSJ.js";
import "./chunk-T5JGQSO3.js";
import "./chunk-CIW3KHOW.js";
import "./chunk-J55F4AC2.js";
import "./chunk-IQLBZKUD.js";
import "./chunk-7MZZCQ64.js";
import "./chunk-LNRZHZOQ.js";
import "./chunk-DI6VABAK.js";
import "./chunk-5EBAJR7X.js";
import "./chunk-5JA2JHV3.js";
import "./chunk-FUKSTKFU.js";
import "./chunk-MIQZ6UDY.js";
import "./chunk-JOJZ6YC5.js";
import "./chunk-L4TOCXR5.js";
import "./chunk-IMVP5ADD.js";
import "./chunk-H7WPOTQH.js";
import "./chunk-7WP676SE.js";
import "./chunk-HEWCRCJC.js";
import "./chunk-WPPFJVPN.js";
import "./chunk-SGSUM5YO.js";
import "./chunk-SG5TCCCK.js";
import "./chunk-6A7CWJED.js";
import "./chunk-DUTZNK67.js";
import "./chunk-IN6BQCWS.js";
import "./chunk-CRNUMTSV.js";
import "./chunk-JM7HAEY6.js";
import "./chunk-LJEOBI2I.js";
import "./chunk-2OMCGIU4.js";
import "./chunk-V5RMUGJJ.js";
import "./chunk-D2NB6D6N.js";
import "./chunk-M2NS3MSU.js";
import "./chunk-3RRMLFFN.js";
import "./chunk-DR5TVNEL.js";
import "./chunk-HT2T6PUB.js";
import "./chunk-K64AAM77.js";
import "./chunk-6EUVKE22.js";
import "./chunk-A3NNJ7XA.js";
import "./chunk-OKJHJ3CY.js";
import "./chunk-XTVPEVHA.js";
import "./chunk-DTUSTSEJ.js";
import "./chunk-JCWFGRHQ.js";
import "./chunk-JILEJ6R2.js";
import "./chunk-GAW5JHG4.js";
import "./chunk-OEKKQXBD.js";
import "./chunk-S3IO7V4Q.js";
import "./chunk-DZALMCYL.js";
import "./chunk-K226GFDN.js";
import "./chunk-4ZZRP4MA.js";
import "./chunk-7ZJ6P7J7.js";
import "./chunk-FPFZQCEQ.js";
import "./chunk-5I6J67HP.js";
import "./chunk-YVULORT6.js";
import "./chunk-PB33BAI3.js";
import "./chunk-CVB43GGP.js";
import {
  O
} from "./chunk-XWXBNAOW.js";
import "./chunk-GWC3DAGP.js";
import "./chunk-EODIWR2E.js";
import "./chunk-LLDOZWVV.js";
import "./chunk-FYAEQPUY.js";
import "./chunk-7XMEZQ34.js";
import "./chunk-BDM2D6IC.js";
import "./chunk-U2ZVAEKG.js";
import "./chunk-EDSMXTFO.js";
import "./chunk-MNLT652N.js";
import "./chunk-OGZAGPIO.js";
import "./chunk-HJJIIYFF.js";
import "./chunk-7RMVJCDW.js";
import "./chunk-T6GCUITX.js";
import "./chunk-TUIGM7TV.js";
import "./chunk-IHVSZYZS.js";
import "./chunk-6CA6K3O7.js";
import "./chunk-NYQ5CYNR.js";
import "./chunk-O7UDKFOW.js";
import "./chunk-TKPMIAIW.js";
import "./chunk-NQOJNTB3.js";
import "./chunk-MFOQYQFG.js";
import "./chunk-NKCPFCP3.js";
import "./chunk-3ZXOUEQG.js";
import "./chunk-AXVPJBVW.js";
import "./chunk-OXEPWRM7.js";
import "./chunk-POILQGXA.js";
import "./chunk-JJS7PR2U.js";
import "./chunk-L5YS4GSA.js";
import "./chunk-PRREDSOB.js";
import "./chunk-V5C6HSAM.js";
import "./chunk-SYATLP3H.js";
import "./chunk-V6AMQYXE.js";
import {
  P
} from "./chunk-6WHTZNUH.js";
import "./chunk-EITGQLII.js";
import "./chunk-TIVJXVMN.js";
import "./chunk-XNUH25NY.js";
import "./chunk-WGAPNV7F.js";
import "./chunk-BXQGM56A.js";
import {
  e
} from "./chunk-4Z5SGKRM.js";
import "./chunk-ANKOCGE2.js";
import {
  y
} from "./chunk-7CJXZOFG.js";
import "./chunk-IRGZKO7V.js";
import "./chunk-5SELS7VU.js";
import {
  a3 as a
} from "./chunk-DDYVXG4F.js";
import "./chunk-ANP42J2U.js";
import "./chunk-HJY2YILU.js";
import "./chunk-7DA6A5LD.js";
import {
  u
} from "./chunk-2MMLMOWS.js";
import "./chunk-4323ZVPF.js";
import {
  n2 as n
} from "./chunk-WYIDUUN2.js";
import "./chunk-DXLOWWK7.js";
import {
  __async
} from "./chunk-JWIQHGQB.js";

// ../../../node_modules/@arcgis/core/views/3d/layers/SceneLayerView3D.js
var P3 = i3();
var M = class extends At(u4(t2(i(l(w))))) {
  constructor() {
    super(...arguments), this.type = "scene-layer-3d", this._setVisibilityHiddenObjectIds = new s(), this.progressiveLoadFactor = 1, this._elevationContext = "scene", this._isIntegratedMesh = false, this._supportsLabeling = true, this._pendingEditsQueue = Promise.resolve(), this._interactiveEditingSessions = /* @__PURE__ */ new Map(), this._queryEngine = null;
  }
  get i3slayer() {
    return this.layer;
  }
  tryRecycleWith(e2, t3) {
    return e2.url === this.layer.url && this.i3sOverrides.isEmpty ? e2.load(t3).then(() => {
      Y(this.layer, e2, this.i3sOverrides), this.layer = e2, this.i3sOverrides.destroy();
      const t4 = this.view.resourceController?.memoryController;
      this.i3sOverrides = new G({
        view: this.view,
        layer: e2,
        memoryController: t4
      }), this.resetHighlights();
    }) : null;
  }
  get layerPopupEnabledAndHasTemplate() {
    return this.layer.popupEnabled && u2(this.layer, this.view.popup?.defaultPopupTemplateEnabled);
  }
  get filter() {
    return this._get("filter");
  }
  set filter(e2) {
    this._set("filter", P2.checkSupport(e2) ? e2 : null);
  }
  get viewFilter() {
    const e2 = this.mergedFilter, t3 = this.layerFilter;
    if (null == e2 && null == t3) return null;
    const i4 = this._get("viewFilter");
    return null == i4 ? new P2({
      layerFilter: t3,
      viewFilter: e2,
      layerFieldsIndex: this.layer.fieldsIndex,
      loadAsyncModule: (e3) => this._loadAsyncModule(e3),
      addSqlFilter: (e3, t4) => this.addSqlFilter(e3, t4, this.logError),
      addTimeFilter: (e3, t4) => this.addTimeFilter(e3, t4)
    }) : (i4.viewFilter = e2, i4.layerFilter = t3, i4);
  }
  get requiredFields() {
    return this._fieldsHelper?.requiredFields ?? [];
  }
  get _floorFilterClause() {
    const e2 = o2(this);
    return null != e2 ? O.create(e2, this.layer.fieldsIndex) : null;
  }
  get _excludeObjectIdsSorted() {
    const e2 = this.layer.excludeObjectIds.toArray();
    return e2.length ? e2.sort((e3, t3) => e3 - t3) : null;
  }
  get _setVisibilityHiddenObjectIdsSorted() {
    return this._setVisibilityHiddenObjectIds.size ? Array.from(this._setVisibilityHiddenObjectIds).sort((e2, t3) => e2 - t3) : null;
  }
  get lodFactor() {
    return this.view?.qualitySettings?.sceneService?.object?.lodFactor ?? 1;
  }
  get lodCrossfadeUncoveredDuration() {
    return this.view?.qualitySettings?.fadeDuration ?? 0;
  }
  get updatingProgressValue() {
    return this._controller?.updatingProgress ?? 0;
  }
  get visibleAtCurrentScale() {
    return c(this.i3slayer.effectiveScaleRange, this.view.terrainScale);
  }
  initialize() {
    this._fieldsHelper = new a2({
      layerView: this
    }), this._updatingHandles.add(() => this.layer.rangeInfos, (e3) => this._rangeInfosChanged(e3), P), this._updatingHandles.add(() => this.layer.renderer, (e3) => this._updatingHandles.addPromise(this._rendererChange(e3)), P);
    const e2 = () => this._filterChange();
    this._updatingHandles.add(() => this.parsedDefinitionExpression, e2), this._updatingHandles.add(() => this.mergedFilter, e2), this._updatingHandles.add(() => this._floorFilterClause, e2), this._updatingHandles.add(() => this._excludeObjectIdsSorted, e2), this._updatingHandles.add(() => this._setVisibilityHiddenObjectIdsSorted, e2), this._updatingHandles.add(() => this.viewFilter?.sortedObjectIds, e2), this._updatingHandles.add(() => this.viewFilter?.parsedWhereClause, e2), this._updatingHandles.add(() => this.getTimeFilterDependencies(), e2), this._updatingHandles.add(() => [this.viewFilter?.parsedGeometry, this.mergedFilter?.spatialRelationship, this.layer.filter?.spatialRelationship], () => this._geometryFilterChange()), n2() && this.i3sOverrides.is3DOFL && this._updatingHandles.add(() => this.i3sOverrides.sortedGeometryChangedObjectIds, e2), this.addHandles(this.layer.on("apply-edits", (e3) => this._updatingHandles.addPromise(e3.result))), this.addHandles(this.layer.on("edits", (e3) => {
      const t3 = this._pendingEditsQueue.then(() => this._handleEdits(e3)).then();
      this._pendingEditsQueue = t3, this._updatingHandles.addPromise(t3);
    }));
  }
  destroy() {
    this._fieldsHelper = u(this._fieldsHelper);
  }
  _rangeInfosChanged(e2) {
    null != e2 && e2.length > 0 && n.getLogger(this).warn("Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.");
  }
  createQuery() {
    const e2 = {
      outFields: ["*"],
      returnGeometry: false,
      outSpatialReference: this.view.spatialReference
    };
    return this.mergedFilter?.createQuery(e2) ?? new b(e2);
  }
  queryExtent(e2, t3) {
    return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e2), t3?.signal);
  }
  queryFeatureCount(e2, t3) {
    return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e2), t3?.signal);
  }
  queryFeatures(e2, t3) {
    return this._ensureQueryEngine().executeQuery(this._ensureQuery(e2), t3?.signal).then((e3) => {
      if (!e3?.features) return e3;
      const t4 = this.layer;
      for (const i4 of e3.features) i4.layer = t4, i4.sourceLayer = t4;
      return e3;
    });
  }
  queryObjectIds(e2, t3) {
    return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e2), t3?.signal);
  }
  _ensureQueryEngine() {
    return this._queryEngine || (this._queryEngine = this._createQueryEngine()), this._queryEngine;
  }
  _createQueryEngine() {
    const e2 = u3(this.view.spatialReference, this.view.renderSpatialReference, this._collection);
    return new d3({
      layerView: this,
      priority: I.FEATURE_QUERY_ENGINE,
      spatialIndex: new h({
        featureAdapter: new o3({
          objectIdField: this.layer.objectIdField,
          attributeStorageInfo: this.layer.attributeStorageInfo ?? [],
          getFeatureExtent: e2
        }),
        forAllFeatures: (e3, t3) => this._forAllFeatures((t4, i4, r) => e3({
          id: t4,
          index: i4,
          meta: r
        }), t3, n3.QUERYABLE),
        getFeatureExtent: e2,
        sourceSpatialReference: Z(this.layer),
        viewSpatialReference: this.view.spatialReference
      })
    });
  }
  highlight(e2) {
    const t3 = this._highlights;
    if (e2 instanceof b) {
      const {
        set: i4,
        handle: r
      } = t3.acquireSet();
      return this.queryObjectIds(e2).then((e3) => t3.setFeatureIds(i4, e3)), r;
    }
    return super.highlight(e2);
  }
  createInteractiveEditSession(e2) {
    return i2(this._attributeEditingContext, e2);
  }
  _createLayerGraphic(e2) {
    return new d({
      attributes: e2,
      layer: this.layer,
      sourceLayer: this.layer
    });
  }
  getFilters() {
    const e2 = super.getFilters();
    n2() && this.i3sOverrides.is3DOFL && this.i3sOverrides.sortedGeometryChangedObjectIds.length > 0 && e2.push((e3, t4) => {
      t4.node.index >= 0 && W(this.i3sOverrides.sortedGeometryChangedObjectIds, false, e3);
    });
    const t3 = this._setVisibilityHiddenObjectIdsSorted;
    null != t3 && e2.push((e3) => W(t3, false, e3));
    const i4 = this._excludeObjectIdsSorted;
    return null != i4 && e2.push((e3) => W(i4, false, e3)), this._floorFilterClause && this.addSqlFilter(e2, this._floorFilterClause, this.logError), this.addSqlFilter(e2, this.parsedDefinitionExpression, this.logError), null != this.viewFilter && this.viewFilter.addFilters(e2, this.view, this._controller.crsIndex, this._collection), e2;
  }
  setVisibility(e2, t3) {
    t3 ? this._setVisibilityHiddenObjectIds.delete(e2) : this._setVisibilityHiddenObjectIds.add(e2);
  }
  isUpdating() {
    return super.isUpdating() || this.layerFilterUpdating || null != this.viewFilter && this.viewFilter.updating || null != this.i3sOverrides && this.i3sOverrides.updating;
  }
  _ensureQuery(e2) {
    return this._addDefinitionExpressionToQuery(null == e2 ? this.createQuery() : b.from(e2));
  }
  get _attributeEditingContext() {
    return {
      sessions: this._interactiveEditingSessions,
      fieldsIndex: this.layer.fieldsIndex,
      objectIdField: this._getObjectIdField(),
      globalIdField: this._getGlobalIdField(),
      forEachNode: (e2) => this._forAllNodes((t3) => null != t3 ? e2(t3.node, t3.featureIds) : null),
      attributeStorageInfo: this.i3slayer.attributeStorageInfo ?? [],
      i3sOverrides: this.i3sOverrides,
      getAttributeData: (e2) => this.getAttributeData(e2),
      setAttributeData: (e2, t3) => this.setAttributeData(e2, t3),
      clearMemCache: () => this.clearMemCache()
    };
  }
  _handleEdits(e2) {
    return __async(this, null, function* () {
      const t3 = n2(), i4 = this._attributeEditingContext, r = yield u5(i4, e2);
      t3 && d4(i4, r), f(i4, r);
    });
  }
  get hasGeometryFilter() {
    const e2 = this.viewFilter;
    return null != e2?.parsedGeometry;
  }
  computeNodeFiltering(e2) {
    const t3 = this.viewFilter;
    return null == t3 || !this.view.spatialReference || t3.isMBSGeometryVisible(e2, this.view.spatialReference, this._controller.crsIndex) ? o.Unmodified : o.Culled;
  }
};
e([y()], M.prototype, "i3slayer", null), e([y(t)], M.prototype, "updatingProgress", void 0), e([y({
  type: d2
})], M.prototype, "filter", null), e([y({
  readOnly: true
})], M.prototype, "viewFilter", null), e([y(P3.requiredFields)], M.prototype, "requiredFields", null), e([y(P3.availableFields)], M.prototype, "availableFields", void 0), e([y()], M.prototype, "_fieldsHelper", void 0), e([y()], M.prototype, "_floorFilterClause", null), e([y()], M.prototype, "_excludeObjectIdsSorted", null), e([y()], M.prototype, "_setVisibilityHiddenObjectIds", void 0), e([y()], M.prototype, "_setVisibilityHiddenObjectIdsSorted", null), e([y()], M.prototype, "lodFactor", null), e([y()], M.prototype, "updatingProgressValue", null), e([y({
  readOnly: true
})], M.prototype, "visibleAtCurrentScale", null), M = e([a("esri.views.3d.layers.SceneLayerView3D")], M);
var T = M;
export {
  T as default
};
//# sourceMappingURL=SceneLayerView3D-CZ5O62SE.js.map
