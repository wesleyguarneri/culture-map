import {
  i as i3
} from "./chunk-42OQETJL.js";
import {
  g
} from "./chunk-UHMXQYZT.js";
import {
  e as e6
} from "./chunk-73Y7XDLH.js";
import {
  w as w2
} from "./chunk-VWML4J2J.js";
import {
  i as i2,
  u
} from "./chunk-JYODC3YQ.js";
import {
  e as e5,
  t as t2
} from "./chunk-TYQXPPSP.js";
import {
  i
} from "./chunk-CIW3KHOW.js";
import {
  d as d2
} from "./chunk-CRNUMTSV.js";
import {
  l
} from "./chunk-OUKUASAF.js";
import "./chunk-V5RMUGJJ.js";
import "./chunk-D2NB6D6N.js";
import {
  t
} from "./chunk-UWJIHV6Q.js";
import {
  p
} from "./chunk-DSEUCBVP.js";
import "./chunk-UPDWQH75.js";
import {
  S as S3
} from "./chunk-RXWBJSJ5.js";
import {
  f as f3
} from "./chunk-M2NS3MSU.js";
import "./chunk-HMNBB7ED.js";
import "./chunk-3RRMLFFN.js";
import "./chunk-DR5TVNEL.js";
import "./chunk-HT2T6PUB.js";
import "./chunk-K64AAM77.js";
import "./chunk-6EUVKE22.js";
import "./chunk-A3NNJ7XA.js";
import "./chunk-OKJHJ3CY.js";
import "./chunk-XTVPEVHA.js";
import "./chunk-DTUSTSEJ.js";
import "./chunk-JCWFGRHQ.js";
import "./chunk-JILEJ6R2.js";
import "./chunk-GAW5JHG4.js";
import "./chunk-OEKKQXBD.js";
import "./chunk-S3IO7V4Q.js";
import "./chunk-7ZJ6P7J7.js";
import "./chunk-FPFZQCEQ.js";
import "./chunk-YVULORT6.js";
import "./chunk-PB33BAI3.js";
import "./chunk-CVB43GGP.js";
import "./chunk-LLDOZWVV.js";
import "./chunk-BDM2D6IC.js";
import "./chunk-U2ZVAEKG.js";
import "./chunk-EDSMXTFO.js";
import "./chunk-MNLT652N.js";
import {
  n as n3
} from "./chunk-OGZAGPIO.js";
import "./chunk-HJJIIYFF.js";
import {
  e as e2,
  o as o2
} from "./chunk-7RMVJCDW.js";
import {
  j,
  m2
} from "./chunk-T6GCUITX.js";
import "./chunk-TUIGM7TV.js";
import "./chunk-IHVSZYZS.js";
import "./chunk-6CA6K3O7.js";
import {
  w
} from "./chunk-NYQ5CYNR.js";
import {
  _
} from "./chunk-O7UDKFOW.js";
import {
  f as f2
} from "./chunk-TKPMIAIW.js";
import {
  o
} from "./chunk-NQOJNTB3.js";
import {
  r
} from "./chunk-MFOQYQFG.js";
import "./chunk-NKCPFCP3.js";
import {
  e as e4
} from "./chunk-3ZXOUEQG.js";
import {
  P as P2,
  S as S2,
  e as e3,
  q
} from "./chunk-AXVPJBVW.js";
import {
  n as n2,
  r as r2
} from "./chunk-OXEPWRM7.js";
import "./chunk-POILQGXA.js";
import "./chunk-JJS7PR2U.js";
import {
  s as s2
} from "./chunk-L5YS4GSA.js";
import "./chunk-PRREDSOB.js";
import "./chunk-V5C6HSAM.js";
import {
  U,
  m2 as m
} from "./chunk-SYATLP3H.js";
import {
  f
} from "./chunk-V6AMQYXE.js";
import {
  P,
  d,
  v
} from "./chunk-6WHTZNUH.js";
import "./chunk-EITGQLII.js";
import "./chunk-TIVJXVMN.js";
import "./chunk-XNUH25NY.js";
import "./chunk-WGAPNV7F.js";
import "./chunk-BXQGM56A.js";
import {
  e
} from "./chunk-4Z5SGKRM.js";
import {
  S
} from "./chunk-ANKOCGE2.js";
import {
  y
} from "./chunk-7CJXZOFG.js";
import "./chunk-IRGZKO7V.js";
import "./chunk-5SELS7VU.js";
import {
  a3 as a
} from "./chunk-DDYVXG4F.js";
import "./chunk-ANP42J2U.js";
import "./chunk-HJY2YILU.js";
import "./chunk-7DA6A5LD.js";
import "./chunk-2MMLMOWS.js";
import "./chunk-4323ZVPF.js";
import {
  n2 as n,
  s2 as s
} from "./chunk-WYIDUUN2.js";
import "./chunk-DXLOWWK7.js";
import {
  __async,
  __spreadValues
} from "./chunk-JWIQHGQB.js";

// ../../../node_modules/@arcgis/core/layers/support/PlaybackInfo.js
var s3 = class extends i(f) {
  constructor(o4) {
    super(o4), this.framerate = null, this.containerFormat = null, this.gop = null, this.aspectRatio = null, this.klv = null;
  }
};
e([y({
  type: String
})], s3.prototype, "framerate", void 0), e([y({
  type: String
})], s3.prototype, "containerFormat", void 0), e([y({
  type: Number
})], s3.prototype, "gop", void 0), e([y({
  type: String
})], s3.prototype, "aspectRatio", void 0), e([y({
  type: Object
})], s3.prototype, "klv", void 0), s3 = e([a("esri.layers.support.PlaybackInfo")], s3);
var a2 = s3;

// ../../../node_modules/@arcgis/core/layers/support/TelemetryData.js
var l2 = class extends i(f) {
  constructor(o4) {
    super(o4), this.frameCenter = null, this.frameOutline = null, this.lineOfSight = null, this.sensorLocation = null, this.sensorTrail = null;
  }
};
e([y({
  type: _
})], l2.prototype, "frameCenter", void 0), e([y({
  type: j
})], l2.prototype, "frameOutline", void 0), e([y({
  type: m2
})], l2.prototype, "lineOfSight", void 0), e([y({
  type: _
})], l2.prototype, "sensorLocation", void 0), e([y({
  type: m2
})], l2.prototype, "sensorTrail", void 0), l2 = e([a("esri.layers.support.TelemetryData")], l2);
var n4 = l2;

// ../../../node_modules/@arcgis/core/layers/support/VideoFrame.js
var l3 = class extends S {
  constructor() {
    super(...arguments), this.sourcePoint = null, this.mapPoint = null;
  }
};
function m3(o4) {
  return null != o4?.sourcePoint && null != o4.mapPoint;
}
e([y()], l3.prototype, "sourcePoint", void 0), e([y({
  type: _
})], l3.prototype, "mapPoint", void 0), l3 = e([a("esri.layers.support.VideoFrame.ControlPoint")], l3);
var a3 = class extends i(f) {
  constructor(o4) {
    super(o4), this.frame = null, this.controlPoints = null;
  }
  readControlPoints(o4) {
    return o4.map((o5) => ({
      sourcePoint: {
        x: o5.frameX,
        y: o5.frameY
      },
      mapPoint: new _(o5.point)
    }));
  }
  writeControlPoints(o4, r3) {
    null != o4 && m3(o4[0]) && (r3.controlPoints = o4.map((o5) => {
      const r4 = o5.sourcePoint, t3 = o5.mapPoint;
      return {
        frameX: r4.x,
        frameY: r4.y,
        point: t3.toJSON()
      };
    }));
  }
};
e([y({
  type: String
})], a3.prototype, "frame", void 0), e([y({
  type: [l3],
  json: {
    write: {
      allowNull: false,
      isRequired: true
    }
  }
})], a3.prototype, "controlPoints", void 0), e([o("controlPoints")], a3.prototype, "readControlPoints", null), e([r("controlPoints")], a3.prototype, "writeControlPoints", null), a3 = e([a("esri.layers.support.VideoFrame")], a3);
var u2 = a3;

// ../../../node_modules/@arcgis/core/core/XHRAdapter.js
var s4 = class extends EventTarget {
  constructor() {
    super(...arguments), this._readyState = 0, this._responseType = "", this.timeout = 0, this._withCredentials = false, this.onabort = null, this.onerror = null, this.onload = null, this.onloadend = null, this.onloadstart = null, this.onprogress = null, this.ontimeout = null, this.onreadystatechange = null, this.UNSENT = 0, this.OPENED = 1, this.HEADERS_RECEIVED = 2, this.LOADING = 3, this.DONE = 4, this._abortController = null, this._error = null, this._options = {}, this._response = null, this._sendFlag = false, this._url = "";
  }
  get readyState() {
    return this._readyState;
  }
  get response() {
    return "" === this.responseType || "text" === this.responseType ? this.responseText : this.readyState !== this.DONE || this._error || !this._response ? null : this._response.data;
  }
  get responseText() {
    return "" !== this.responseType && "text" !== this.responseType && this._throwDOMException(), this.readyState !== this.DONE ? "" : this._response ? this._response.data : null != this._error?.raw ? "string" == typeof this._error.raw ? this._error.raw : JSON.stringify(this._error.raw) : "";
  }
  get responseType() {
    return this._responseType;
  }
  set responseType(t3) {
    ("document" !== t3 || globalThis instanceof Window) && (this.readyState !== this.LOADING && this.readyState !== this.DONE || this._throwDOMException(), this._responseType = t3);
  }
  get responseURL() {
    return (this._response || this._error)?.url ?? "";
  }
  get responseXML() {
    return "" !== this.responseType && "document" !== this.responseType && this._throwDOMException(), this.readyState !== this.DONE ? null : this._response?.data ?? null;
  }
  get status() {
    return (this._response || this._error)?.httpStatus ?? 0;
  }
  get statusText() {
    return "";
  }
  get upload() {
    return console.warn("upload not implemented"), null;
  }
  get withCredentials() {
    return this._withCredentials;
  }
  set withCredentials(t3) {
    this.readyState !== this.UNSENT && this.readyState !== this.OPENED && this._throwDOMException(), this._withCredentials = t3;
  }
  abort() {
    this.readyState === this.OPENED && this._sendFlag || this.readyState === this.HEADERS_RECEIVED || this.readyState === this.LOADING ? (this._sendFlag = false, this._error = null, this._response = null, this._abortController?.abort(), this._updateReadyState(this.DONE), this._dispatchProgressEvent("abort"), this._dispatchProgressEvent("loadend")) : this.readyState === this.DONE && this._updateReadyState(this.UNSENT);
  }
  getAllResponseHeaders() {
    let t3 = "";
    const e12 = (this._response || this._error)?.getAllHeaders?.();
    if (e12) for (const [s6, r3] of e12) t3 += `${s6}: ${r3}\r
`;
    return t3;
  }
  getResponseHeader(t3) {
    return (this._response || this._error)?.getHeader?.(t3) ?? null;
  }
  open(t3, e12) {
    switch (this._sendFlag = false, this._options = {}, t3) {
      case "GET":
        this._options.method = "auto";
        break;
      case "POST":
        this._options.method = "post";
        break;
      case "HEAD":
        this._options.method = "head";
        break;
      case "DELETE":
        this._options.method = "delete";
        break;
      case "PUT":
        this._options.method = "put";
    }
    this._url = e12, this._error = null, this._response = null, this._abortController = new AbortController(), this._updateReadyState(this.OPENED);
  }
  overrideMimeType(t3) {
    throw new Error("overrideMimeType not implemented");
  }
  send(s6) {
    (this.readyState !== this.OPENED || this._sendFlag) && this._throwDOMException(), this._sendFlag = true, this._updateReadyState(this.LOADING), this._dispatchProgressEvent("loadstart");
    const r3 = this._options;
    s6 instanceof URLSearchParams ? r3.body = s6.toString() : r3.body = s6, r3.responseType = "" === this.responseType ? "text" : "arraybuffer" === this.responseType ? "array-buffer" : this.responseType, r3.signal = this._abortController?.signal, this.timeout && (r3.timeout = this.timeout), this.withCredentials && (r3.withCredentials = true), U(this._url, r3).then((t3) => {
      this._response = t3, this._updateReadyState(this.DONE), this._dispatchProgressEvent("load");
    }).catch((t3) => {
      this._sendFlag && (this._error = t3.details, this._updateReadyState(this.DONE), m(t3) ? this._dispatchProgressEvent("timeout") : "AbortError" === t3.name ? this._dispatchProgressEvent("abort") : this._dispatchProgressEvent("error"));
    }).finally(() => {
      this._sendFlag && this._dispatchProgressEvent("loadend");
    });
  }
  setRequestHeader(t3, e12) {
    (this.readyState !== this.OPENED || this._sendFlag) && this._throwDOMException(), this._options.headers ??= {}, this._options.headers[t3] = e12;
  }
  _dispatchProgressEvent(t3) {
    const e12 = new ProgressEvent(t3, {
      loaded: 0,
      total: 0
    });
    this.dispatchEvent(e12), this[`on${t3}`]?.(e12);
  }
  _throwDOMException() {
    throw new DOMException("", "InvalidStateError");
  }
  _updateReadyState(t3) {
    if (this._readyState !== t3 && (this._readyState = t3, t3 !== this.UNSENT)) {
      const t4 = new Event("readystatechange");
      this.dispatchEvent(t4), this.onreadystatechange?.(t4);
    }
  }
};
s4.UNSENT = 0, s4.OPENED = 1, s4.HEADERS_RECEIVED = 2, s4.LOADING = 3, s4.DONE = 4;

// ../../../node_modules/@arcgis/core/layers/support/VideoTimeExtent.js
var n5 = class extends i(f) {
  constructor(t3) {
    super(t3), this.duration = null, this.end = null, this.start = null, this.timezone = "UTC";
  }
  readEnd(t3, r3) {
    return null != r3.end ? new Date(r3.end) : null;
  }
  writeEnd(t3, r3) {
    r3.end = t3 ? t3.getTime() : null;
  }
  readStart(t3, r3) {
    return null != r3.start ? new Date(r3.start) : null;
  }
  writeStart(t3, r3) {
    r3.start = t3 ? t3.getTime() : null;
  }
};
e([y({
  type: Number,
  json: {
    write: {
      allowNull: true
    }
  }
})], n5.prototype, "duration", void 0), e([y({
  type: Date,
  json: {
    write: {
      allowNull: true
    }
  }
})], n5.prototype, "end", void 0), e([o("end")], n5.prototype, "readEnd", null), e([r("end")], n5.prototype, "writeEnd", null), e([y({
  type: Date,
  json: {
    write: {
      allowNull: true
    }
  }
})], n5.prototype, "start", void 0), e([o("start")], n5.prototype, "readStart", null), e([r("start")], n5.prototype, "writeStart", null), e([y({
  type: String
})], n5.prototype, "timezone", void 0), n5 = e([a("esri.layers.support.VideoTimeExtent")], n5);
var a4 = n5;

// ../../../node_modules/@arcgis/core/layers/video/videoUtils.js
var o3 = {
  UASDatalinkLocalSet: 1e4,
  PrecisionTimeStamp: 10002,
  MissionId: 10003,
  PlatformTailNumber: 10004,
  PlatformHeadingAngle: 10005,
  PlatformPitchAngle: 10006,
  PlatformRollAngle: 10007,
  PlatformTrueAirspeed: 10008,
  PlatformIndicatedAirspeed: 10009,
  PlatformDesignation: 10010,
  ImageSourceSensor: 10011,
  ImageCoordinateSystem: 10012,
  SensorLatitude: 10013,
  SensorLongitude: 10014,
  SensorTrueAltitude: 10015,
  SensorHorizontalFOV: 10016,
  SensorVerticalFOV: 10017,
  SensorAzimuthAngle: 10018,
  SensorElevationAngle: 10019,
  SensorRollAngle: 10020,
  PlatformSlantRange: 10021,
  TargetWidth: 10022,
  FrameCenterLatitude: 10023,
  FrameCenterLongitude: 10024,
  FrameCenterElevation: 10025,
  OffsetCorner1Latitude: 10026,
  OffsetCorner1Longitude: 10027,
  OffsetCorner2Latitude: 10028,
  OffsetCorner2Longitude: 10029,
  OffsetCorner3Latitude: 10030,
  OffsetCorner3Longitude: 10031,
  OffsetCorner4Latitude: 10032,
  OffsetCorner4Longitude: 10033,
  TargetLocationLatitude: 10040,
  TargetLocationLongitude: 10041,
  TargetLocationElevation: 10042,
  TargetTrackGateWidth: 10043,
  TargetTrackGateHeight: 10044,
  TargetErrorEstimateHorizontal: 10045,
  TargetErrorEstimateLateral: 10046,
  GenericFlagData: 10047,
  PlatformGroundSpeed: 10056,
  PlatformGroundRange: 10057,
  PlatformRemainingFuel: 10058,
  PlatformCallSign: 10059,
  SensorFOVName: 10063,
  PlatformMagneticHeading: 10064,
  LDSVersionNumber: 10065,
  AlternatePlatformName: 10070,
  EventStartTimeUTC: 10072,
  VMTIDataSet: 10074,
  SensorEllipsoidHeight: 10075,
  OperationalMode: 10077,
  CornerLatitudePoint1: 10082,
  CornerLongitudePoint1: 10083,
  CornerLatitudePoint2: 10084,
  CornerLongitudePoint2: 10085,
  CornerLatitudePoint3: 10086,
  CornerLongitudePoint3: 10087,
  CornerLatitudePoint4: 10088,
  CornerLongitudePoint4: 10089,
  SARMotionImageryMetadata: 10095,
  SecurityClassification: 20001,
  SecurityClassifyingAuthority: 20002,
  SecurityClassifyingCountry: 20003,
  SecuritySCI: 20004,
  SecurityCaveats: 20005,
  SecurityReleaseInstructions: 20006,
  SecurityLDSVersion: 20022,
  EsriVideoWidth: 90001,
  EsriVideoHeight: 90002,
  EsriFrameCenterLatitude: 90050,
  EsriFrameCenterLongitude: 90051,
  EsriCornerLatitudePt1: 90052,
  EsriCornerLongitudePt1: 90053,
  EsriCornerLatitudePt2: 90054,
  EsriCornerLongitudePt2: 90055,
  EsriCornerLatitudePt3: 90056,
  EsriCornerLongitudePt3: 90057,
  EsriCornerLatitudePt4: 90058,
  EsriCornerLongitudePt4: 90059,
  EsriFrameOutline: 90060,
  EsriSensorPosition: 90061,
  EsriHorizonPixelPack: 90063,
  EsriGroundControlPoints: 90064
};
function a5(e12) {
  const {
    duration: t3,
    end: r3,
    start: n6,
    timezone: o4 = "UTC"
  } = e12 || {};
  return "number" != typeof t3 ? null : new a4({
    duration: t3 || null,
    end: "number" == typeof r3 ? new Date(r3) : null,
    start: "number" == typeof n6 ? new Date(n6) : null,
    timezone: o4
  });
}
function u3(e12, t3) {
  const r3 = [...t3], n6 = r3.findIndex((t4) => t4.equals(e12));
  return n6 > -1 && r3.splice(n6), r3.push(e12), r3;
}
function s5(e12) {
  if (!e12?.size) return new n4();
  const t3 = c(e12), r3 = g2(e12), i4 = L(e12), o4 = E(t3, r3);
  return new n4({
    frameCenter: r3,
    frameOutline: i4,
    lineOfSight: o4,
    sensorLocation: t3
  });
}
function l4(e12) {
  if (!e12?.size) return null;
  return e12.get(o3.EsriGroundControlPoints)?.value ?? null ?? null;
}
function d3(e12) {
  return e12?.size ? e12.get(o3.EsriHorizonPixelPack)?.value ?? null : null;
}
function g2(e12) {
  return f4(e12) ?? C(e12);
}
function f4(t3) {
  return t3 && t3.has(o3.EsriFrameCenterLatitude) && t3.has(o3.EsriFrameCenterLongitude) ? new _({
    x: t3.get(o3.EsriFrameCenterLongitude).value,
    y: t3.get(o3.EsriFrameCenterLatitude).value,
    z: t3.get(o3.FrameCenterElevation).value
  }) : null;
}
function C(t3) {
  return t3 && t3.has(o3.FrameCenterLatitude) && t3.has(o3.FrameCenterLongitude) ? new _({
    x: t3.get(o3.FrameCenterLongitude)?.value,
    y: t3.get(o3.FrameCenterLatitude)?.value,
    z: t3.get(o3.FrameCenterElevation)?.value
  }) : null;
}
function L(e12) {
  if (!e12) return null;
  const r3 = e12.get(o3.EsriFrameOutline)?.value;
  return r3 ? j.fromJSON(r3.geometry) : m4(e12) ?? P3(e12);
}
function m4(e12) {
  if (!(e12.has(o3.EsriCornerLatitudePt1) && e12.has(o3.EsriCornerLongitudePt1) && e12.has(o3.EsriCornerLatitudePt2) && e12.has(o3.EsriCornerLongitudePt2) && e12.has(o3.EsriCornerLatitudePt3) && e12.has(o3.EsriCornerLongitudePt3) && e12.has(o3.EsriCornerLatitudePt4) && e12.has(o3.EsriCornerLongitudePt4))) return null;
  const r3 = [e12.get(o3.EsriCornerLongitudePt1)?.value, e12.get(o3.EsriCornerLatitudePt1)?.value], n6 = [e12.get(o3.EsriCornerLongitudePt2)?.value, e12.get(o3.EsriCornerLatitudePt2)?.value], i4 = [e12.get(o3.EsriCornerLongitudePt3)?.value, e12.get(o3.EsriCornerLatitudePt3)?.value], a6 = [e12.get(o3.EsriCornerLongitudePt4)?.value, e12.get(o3.EsriCornerLatitudePt4)?.value];
  return new j({
    rings: [[r3, n6, i4, a6]]
  });
}
function P3(e12) {
  if (!(e12.has(o3.OffsetCorner1Latitude) && e12.has(o3.OffsetCorner1Longitude) && e12.has(o3.OffsetCorner2Latitude) && e12.has(o3.OffsetCorner2Longitude) && e12.has(o3.OffsetCorner3Latitude) && e12.has(o3.OffsetCorner3Longitude) && e12.has(o3.OffsetCorner4Latitude) && e12.has(o3.OffsetCorner4Longitude) && e12.has(o3.FrameCenterLatitude) && e12.has(o3.FrameCenterLongitude))) return null;
  const r3 = e12.get(o3.FrameCenterLatitude)?.value, n6 = e12.get(o3.FrameCenterLongitude)?.value, i4 = r3 + e12.get(o3.OffsetCorner1Latitude)?.value, a6 = n6 + e12.get(o3.OffsetCorner1Longitude)?.value, u4 = r3 + e12.get(o3.OffsetCorner2Latitude)?.value, s6 = n6 + e12.get(o3.OffsetCorner2Longitude)?.value, l5 = r3 + e12.get(o3.OffsetCorner3Latitude)?.value, d4 = n6 + e12.get(o3.OffsetCorner3Longitude)?.value, g4 = r3 + e12.get(o3.OffsetCorner4Latitude)?.value, f6 = n6 + e12.get(o3.OffsetCorner4Longitude)?.value;
  return new j({
    rings: [[[a6, i4], [s6, u4], [d4, l5], [f6, g4]]]
  });
}
function E(e12, t3) {
  if (!e12 || !t3) return null;
  const n6 = [e12.x, e12.y, e12.z], i4 = [t3.x, t3.y, t3.z];
  return new m2({
    paths: [[n6, i4]]
  });
}
function c(t3) {
  if (!t3?.size) return null;
  if (t3.has(o3.EsriSensorPosition)) {
    const r3 = t3.get(o3.EsriSensorPosition)?.value;
    if (r3) return _.fromJSON(r3.geometry);
  }
  return t3.has(o3.SensorLongitude) && t3.has(o3.SensorLatitude) && t3.has(o3.SensorTrueAltitude) ? new _({
    x: t3.get(o3.SensorLongitude)?.value,
    y: t3.get(o3.SensorLatitude)?.value,
    z: t3.get(o3.SensorTrueAltitude)?.value
  }) : null;
}

// ../../../node_modules/@arcgis/core/layers/video/VideoCameraSensorModel.js
var M = Math.PI / 180;
var V = class extends S {
  constructor(t3) {
    super(), this.averageElevation = 0, this.imageHeight = 0, this.imageWidth = 0, this.metadataSupportsTransforms = false, this.platformHeadingAngle = 0, this.platformPitchAngle = 0, this.platformRollAngle = 0, this.sensorHeadingAngle = 0, this.sensorAltitude = 0, this.sensorHorizontalFieldOfView = 0, this.sensorLatitude = 0, this.sensorLongitude = 0, this.sensorPitchAngle = 0, this.sensorRollAngle = 0, this.sensorVerticalFieldOfView = 0, this.vttMetadata = /* @__PURE__ */ new Map(), this._createMat3FromValues = (t4) => {
      const e13 = t4[0], o4 = t4[1], s6 = t4[2];
      return t2(e13[0], o4[0], s6[0], e13[1], o4[1], s6[1], e13[2], o4[2], s6[2]);
    }, this._multiplyMat3 = (t4, e13) => {
      const o4 = e5();
      return i2(o4, t4, e13), o4;
    }, this._transposeMat3 = (t4) => {
      const e13 = e5();
      return u(e13, t4), e13;
    }, this._calculateCameraFovForward = () => this._createMat3FromValues([[0, 0, 1], [Math.tan(0.5 * this.sensorHorizontalFieldOfView * M), 0, 0], [0, Math.tan(0.5 * this.sensorVerticalFieldOfView * M), 0]]), this._calculateCameraFovReverse = () => this._createMat3FromValues([[0, 1 / Math.tan(0.5 * this.sensorHorizontalFieldOfView * M), 0], [0, 0, 1 / Math.tan(0.5 * this.sensorVerticalFieldOfView * M)], [1, 0, 0]]), this._calculateCameraLook = () => this._getRotationMatrixZYX(this.sensorHeadingAngle * M, this.sensorPitchAngle * M, this.sensorRollAngle * M), this._calculateImageDimensionsForward = () => this._createMat3FromValues([[2 / this.imageWidth, 0, -1], [0, -2 / this.imageHeight, -1], [0, 0, 1]]), this._calculateImageDimensionsReverse = () => this._createMat3FromValues([[this.imageWidth / 2, 0, this.imageWidth / 2], [0, -this.imageHeight / 2, -this.imageHeight / 2], [0, 0, 1]]), this._calculatePlatformPositionMatrix = () => {
      const t4 = Math.sin(this.sensorLatitude * M), e13 = Math.cos(this.sensorLatitude * M), o4 = Math.sin(this.sensorLongitude * M), s6 = Math.cos(this.sensorLongitude * M);
      return this._createMat3FromValues([[-t4 * s6, -o4, -e13 * s6], [-t4 * o4, s6, -e13 * o4], [e13, 0, -t4]]);
    }, this._calculatePlatformOrientation = () => this._getRotationMatrixZYX(this.platformHeadingAngle * M, this.platformPitchAngle * M, this.platformRollAngle * M), this._extractValues = (t4) => {
      this.imageWidth = t4.get(o3.EsriVideoWidth)?.value, this.imageHeight = t4.get(o3.EsriVideoHeight)?.value;
      const e13 = t4.get(o3.SensorEllipsoidHeight)?.value;
      this.sensorAltitude = e13 ?? t4.get(o3.SensorTrueAltitude)?.value, this.sensorLatitude = t4.get(o3.SensorLatitude)?.value, this.sensorLongitude = t4.get(o3.SensorLongitude)?.value, this.sensorHeadingAngle = t4.get(o3.SensorAzimuthAngle)?.value, this.sensorPitchAngle = t4.get(o3.SensorElevationAngle)?.value, this.sensorRollAngle = t4.get(o3.SensorRollAngle)?.value, this.sensorHorizontalFieldOfView = t4.get(o3.SensorHorizontalFOV)?.value, this.sensorVerticalFieldOfView = t4.get(o3.SensorVerticalFOV)?.value, this.platformHeadingAngle = t4.get(o3.PlatformHeadingAngle)?.value, this.platformPitchAngle = t4.get(o3.PlatformPitchAngle)?.value, this.platformRollAngle = t4.get(o3.PlatformRollAngle)?.value, this.averageElevation = t4.get(o3.FrameCenterElevation)?.value || 0;
    }, this._getRotationMatrixZYX = (t4, e13, o4) => {
      const s6 = Math.cos(t4), i4 = Math.sin(t4), a6 = Math.cos(e13), r3 = Math.sin(e13), l5 = Math.cos(o4), n6 = Math.sin(o4);
      return this._createMat3FromValues([[s6 * a6, s6 * r3 * n6 - l5 * i4, i4 * n6 + s6 * l5 * r3], [a6 * i4, s6 * l5 + i4 * r3 * n6, l5 * i4 * r3 - s6 * n6], [-r3, a6 * n6, a6 * l5]]);
    }, this._initCameraSensor = () => {
      const t4 = this._calculateCameraFovForward(), e13 = this._calculateCameraFovReverse(), o4 = this._calculateCameraLook(), s6 = this._calculateImageDimensionsForward(), i4 = this._calculateImageDimensionsReverse(), a6 = this._calculatePlatformPositionMatrix(), r3 = this._calculatePlatformOrientation(), l5 = this._multiplyMat3(this._multiplyMat3(a6, r3), o4);
      this._imageToEarthTransform = this._multiplyMat3(this._multiplyMat3(l5, t4), s6);
      const n6 = this._multiplyMat3(i4, e13);
      this._earthToImageTransform = this._multiplyMat3(n6, this._transposeMat3(l5)), this._platformPositionEcef = this._projectPointToECEF(this.sensorLongitude, this.sensorLatitude, this.sensorAltitude || this.averageElevation);
    }, this._metadataSupportsTransforms = (t4) => {
      if (!t4?.size) return false;
      const e13 = t4.get(o3.EsriVideoWidth)?.value ?? 0, o4 = t4.get(o3.EsriVideoHeight)?.value ?? 0;
      if (e13 <= 0 || o4 <= 0) return false;
      const s6 = t4.get(o3.SensorEllipsoidHeight)?.value, i4 = t4.get(o3.SensorTrueAltitude)?.value, a6 = t4.get(o3.SensorLatitude)?.value, r3 = t4.get(o3.SensorLongitude)?.value;
      if (null == s6 && null == i4 || null == a6 || null == r3) return false;
      const l5 = t4.get(o3.PlatformHeadingAngle)?.value, n6 = t4.get(o3.PlatformPitchAngle)?.value, h = t4.get(o3.PlatformRollAngle)?.value;
      if (null == l5 || null == n6 || null == h) return false;
      const m6 = t4.get(o3.SensorHorizontalFOV)?.value, g4 = t4.get(o3.SensorVerticalFOV)?.value;
      if (null == m6 || null == g4) return false;
      const u4 = t4.get(o3.SensorAzimuthAngle)?.value, c2 = t4.get(o3.SensorElevationAngle)?.value, p2 = t4.get(o3.SensorRollAngle)?.value;
      return null != u4 && null != c2 && null != p2;
    }, this._projectPointToECEF = (t4, e13, o4) => {
      const s6 = [];
      return n3([t4, e13, o4], f2.WGS84, 0, s6, w2, 0, 1), new _({
        x: s6[0],
        y: s6[1],
        z: s6[2],
        spatialReference: w2
      });
    }, this._projectImageVectorToEllipsoid = (t4, e13) => {
      const o4 = s2.semiMajorAxis + e13, s6 = s2.semiMinorAxis + e13, i4 = s6 / o4, a6 = o4 / s6, {
        x: n6,
        y: h,
        z: u4
      } = this._platformPositionEcef, c2 = u4 ?? this.averageElevation, p2 = r2(n6, h, a6 * c2), d4 = P2(t4, t4), f6 = P2(t4, p2), v3 = P2(p2, p2) - o4 * o4, A2 = (-f6 - Math.sqrt(f6 * f6 - d4 * v3)) / d4;
      if (A2 < 0) return [NaN, NaN, NaN];
      const M3 = n2();
      return q(M3, p2, t4, A2), M3[2] = M3[2] * i4, M3;
    };
    const e12 = t3?.videoMetadata;
    this._set("metadataSupportsTransforms", this._metadataSupportsTransforms(e12)), this.metadataSupportsTransforms && (this._extractValues(e12), this._initCameraSensor());
  }
  transformGeoToImage(t3, e12, o4) {
    const s6 = this._platformPositionEcef;
    if (!s6) return [0, 0];
    const {
      x: i4,
      y: a6,
      z: n6
    } = s6, h = r2(i4, a6, n6), m6 = this._projectPointToECEF(t3, e12, o4 || this.averageElevation), g4 = n2(), p2 = r2(m6.x, m6.y, m6.z);
    e3(g4, p2, h), S2(g4, g4, this._earthToImageTransform);
    const d4 = g4[0], f6 = g4[1], v3 = g4[2];
    let _3 = r2(NaN, NaN, NaN);
    return isNaN(v3) || (_3 = r2(d4 / v3, f6 / v3, v3 / v3)), [_3[0], _3[1]];
  }
  transformImageToGeo(t3, e12) {
    const o4 = r2(t3, e12, 1), s6 = n2();
    S2(s6, o4, this._imageToEarthTransform);
    const i4 = this._projectImageVectorToEllipsoid(s6, this.averageElevation);
    let a6;
    if (!isNaN(i4[0])) {
      const t4 = [];
      n3([i4[0], i4[1], i4[2]], w2, 0, t4, f2.WGS84, 0, 1), a6 = new _({
        x: t4[0],
        y: t4[1],
        z: t4[2],
        spatialReference: f2.WGS84
      });
    }
    return a6;
  }
};
e([y()], V.prototype, "averageElevation", void 0), e([y()], V.prototype, "imageHeight", void 0), e([y()], V.prototype, "imageWidth", void 0), e([y({
  readOnly: true
})], V.prototype, "metadataSupportsTransforms", void 0), e([y()], V.prototype, "platformHeadingAngle", void 0), e([y()], V.prototype, "platformPitchAngle", void 0), e([y()], V.prototype, "platformRollAngle", void 0), e([y()], V.prototype, "sensorHeadingAngle", void 0), e([y()], V.prototype, "sensorAltitude", void 0), e([y()], V.prototype, "sensorHorizontalFieldOfView", void 0), e([y()], V.prototype, "sensorLatitude", void 0), e([y()], V.prototype, "sensorLongitude", void 0), e([y()], V.prototype, "sensorPitchAngle", void 0), e([y()], V.prototype, "sensorRollAngle", void 0), e([y()], V.prototype, "sensorVerticalFieldOfView", void 0), e([y()], V.prototype, "vttMetadata", void 0), V = e([a("esri.layers.video.VideoCameraSensorModel")], V);
var y2 = V;

// ../../../node_modules/@arcgis/core/layers/video/VideoController.js
var m5 = "undefined" != typeof window ? window : void 0 !== e2 ? e2 : "undefined" != typeof self ? self : {};
var g3 = o2(m5);
var f5 = Array.prototype.slice;
var y3 = _2;
function _2(e12, t3) {
  "length" in e12 || (e12 = [e12]), e12 = f5.call(e12);
  for (; e12.length; ) {
    var i4 = e12.shift(), s6 = t3(i4);
    if (s6) return s6;
    i4.childNodes && i4.childNodes.length && (e12 = f5.call(i4.childNodes).concat(e12));
  }
}
var v2 = b;
function b(e12, t3) {
  if (!(this instanceof b)) return new b(e12, t3);
  this.data = e12, this.nodeValue = e12, this.length = e12.length, this.ownerDocument = t3 || null;
}
b.prototype.nodeType = 8, b.prototype.nodeName = "#comment", b.prototype.toString = function() {
  return "[object Comment]";
};
var T = S4;
function S4(e12, t3) {
  if (!(this instanceof S4)) return new S4(e12);
  this.data = e12 || "", this.length = this.data.length, this.ownerDocument = t3 || null;
}
S4.prototype.type = "DOMTextNode", S4.prototype.nodeType = 3, S4.prototype.nodeName = "#text", S4.prototype.toString = function() {
  return this.data;
}, S4.prototype.replaceData = function(e12, t3, i4) {
  var s6 = this.data, n6 = s6.substring(0, e12), r3 = s6.substring(e12 + t3, s6.length);
  this.data = n6 + i4 + r3, this.length = this.data.length;
};
var E2 = w3;
function w3(e12) {
  var t3 = this, i4 = e12.type;
  e12.target || (e12.target = t3), t3.listeners || (t3.listeners = {});
  var s6 = t3.listeners[i4];
  if (s6) return s6.forEach(function(i5) {
    e12.currentTarget = t3, "function" == typeof i5 ? i5(e12) : i5.handleEvent(e12);
  });
  t3.parentNode && t3.parentNode.dispatchEvent(e12);
}
var C2 = k;
function k(e12, t3) {
  var i4 = this;
  i4.listeners || (i4.listeners = {}), i4.listeners[e12] || (i4.listeners[e12] = []), -1 === i4.listeners[e12].indexOf(t3) && i4.listeners[e12].push(t3);
}
var x = I;
function I(e12, t3) {
  var i4 = this;
  if (i4.listeners && i4.listeners[e12]) {
    var s6 = i4.listeners[e12], n6 = s6.indexOf(t3);
    -1 !== n6 && s6.splice(n6, 1);
  }
}
var A = ["area", "base", "br", "col", "embed", "hr", "img", "input", "keygen", "link", "menuitem", "meta", "param", "source", "track", "wbr"];
function D(e12) {
  switch (e12.nodeType) {
    case 3:
      return U2(e12.data);
    case 8:
      return "<!--" + e12.data + "-->";
    default:
      return P4(e12);
  }
}
function P4(e12) {
  var t3 = [], i4 = e12.tagName;
  return "http://www.w3.org/1999/xhtml" === e12.namespaceURI && (i4 = i4.toLowerCase()), t3.push("<" + i4 + M2(e12) + N(e12)), A.indexOf(i4) > -1 ? t3.push(" />") : (t3.push(">"), e12.childNodes.length ? t3.push.apply(t3, e12.childNodes.map(D)) : e12.textContent || e12.innerText ? t3.push(U2(e12.textContent || e12.innerText)) : e12.innerHTML && t3.push(e12.innerHTML), t3.push("</" + i4 + ">")), t3.join("");
}
function L2(e12, t3) {
  var i4 = typeof e12[t3];
  return "style" === t3 && Object.keys(e12.style).length > 0 || e12.hasOwnProperty(t3) && ("string" === i4 || "boolean" === i4 || "number" === i4) && "nodeName" !== t3 && "className" !== t3 && "tagName" !== t3 && "textContent" !== t3 && "innerText" !== t3 && "namespaceURI" !== t3 && "innerHTML" !== t3;
}
function O(e12) {
  if ("string" == typeof e12) return e12;
  var t3 = "";
  return Object.keys(e12).forEach(function(i4) {
    var s6 = e12[i4];
    i4 = i4.replace(/[A-Z]/g, function(e13) {
      return "-" + e13.toLowerCase();
    }), t3 += i4 + ":" + s6 + ";";
  }), t3;
}
function N(e12) {
  var t3 = e12.dataset, i4 = [];
  for (var s6 in t3) i4.push({
    name: "data-" + s6,
    value: t3[s6]
  });
  return i4.length ? R(i4) : "";
}
function R(e12) {
  var t3 = [];
  return e12.forEach(function(e13) {
    var i4 = e13.name, s6 = e13.value;
    "style" === i4 && (s6 = O(s6)), t3.push(i4 + '="' + B(s6) + '"');
  }), t3.length ? " " + t3.join(" ") : "";
}
function M2(e12) {
  var t3 = [];
  for (var i4 in e12) L2(e12, i4) && t3.push({
    name: i4,
    value: e12[i4]
  });
  for (var s6 in e12._attributes) for (var n6 in e12._attributes[s6]) {
    var r3 = e12._attributes[s6][n6], a6 = (r3.prefix ? r3.prefix + ":" : "") + n6;
    t3.push({
      name: a6,
      value: r3.value
    });
  }
  return e12.className && t3.push({
    name: "class",
    value: e12.className
  }), t3.length ? R(t3) : "";
}
function U2(e12) {
  var t3 = "";
  return "string" == typeof e12 ? t3 = e12 : e12 && (t3 = e12.toString()), t3.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
}
function B(e12) {
  return U2(e12).replace(/"/g, "&quot;");
}
var F = y3;
var q2 = E2;
var j2 = C2;
var $ = x;
var H = D;
var V2 = "http://www.w3.org/1999/xhtml";
var z = W;
function W(e12, t3, i4) {
  if (!(this instanceof W)) return new W(e12);
  var s6 = void 0 === i4 ? V2 : i4 || null;
  this.tagName = s6 === V2 ? String(e12).toUpperCase() : e12, this.nodeName = this.tagName, this.className = "", this.dataset = {}, this.childNodes = [], this.parentNode = null, this.style = {}, this.ownerDocument = t3 || null, this.namespaceURI = s6, this._attributes = {}, "INPUT" === this.tagName && (this.type = "text");
}
W.prototype.type = "DOMElement", W.prototype.nodeType = 1, W.prototype.appendChild = function(e12) {
  return e12.parentNode && e12.parentNode.removeChild(e12), this.childNodes.push(e12), e12.parentNode = this, e12;
}, W.prototype.replaceChild = function(e12, t3) {
  e12.parentNode && e12.parentNode.removeChild(e12);
  var i4 = this.childNodes.indexOf(t3);
  return t3.parentNode = null, this.childNodes[i4] = e12, e12.parentNode = this, t3;
}, W.prototype.removeChild = function(e12) {
  var t3 = this.childNodes.indexOf(e12);
  return this.childNodes.splice(t3, 1), e12.parentNode = null, e12;
}, W.prototype.insertBefore = function(e12, t3) {
  e12.parentNode && e12.parentNode.removeChild(e12);
  var i4 = null == t3 ? -1 : this.childNodes.indexOf(t3);
  return i4 > -1 ? this.childNodes.splice(i4, 0, e12) : this.childNodes.push(e12), e12.parentNode = this, e12;
}, W.prototype.setAttributeNS = function(e12, t3, i4) {
  var s6 = null, n6 = t3, r3 = t3.indexOf(":");
  (r3 > -1 && (s6 = t3.substr(0, r3), n6 = t3.substr(r3 + 1)), "INPUT" === this.tagName && "type" === t3) ? this.type = i4 : (this._attributes[e12] || (this._attributes[e12] = {}))[n6] = {
    value: i4,
    prefix: s6
  };
}, W.prototype.getAttributeNS = function(e12, t3) {
  var i4 = this._attributes[e12], s6 = i4 && i4[t3] && i4[t3].value;
  return "INPUT" === this.tagName && "type" === t3 ? this.type : "string" != typeof s6 ? null : s6;
}, W.prototype.removeAttributeNS = function(e12, t3) {
  var i4 = this._attributes[e12];
  i4 && delete i4[t3];
}, W.prototype.hasAttributeNS = function(e12, t3) {
  var i4 = this._attributes[e12];
  return !!i4 && t3 in i4;
}, W.prototype.setAttribute = function(e12, t3) {
  return this.setAttributeNS(null, e12, t3);
}, W.prototype.getAttribute = function(e12) {
  return this.getAttributeNS(null, e12);
}, W.prototype.removeAttribute = function(e12) {
  return this.removeAttributeNS(null, e12);
}, W.prototype.hasAttribute = function(e12) {
  return this.hasAttributeNS(null, e12);
}, W.prototype.removeEventListener = $, W.prototype.addEventListener = j2, W.prototype.dispatchEvent = q2, W.prototype.focus = function() {
}, W.prototype.toString = function() {
  return H(this);
}, W.prototype.getElementsByClassName = function(e12) {
  var t3 = e12.split(" "), i4 = [];
  return F(this, function(e13) {
    if (1 === e13.nodeType) {
      var s6 = (e13.className || "").split(" ");
      t3.every(function(e14) {
        return -1 !== s6.indexOf(e14);
      }) && i4.push(e13);
    }
  }), i4;
}, W.prototype.getElementsByTagName = function(e12) {
  e12 = e12.toLowerCase();
  var t3 = [];
  return F(this.childNodes, function(i4) {
    1 !== i4.nodeType || "*" !== e12 && i4.tagName.toLowerCase() !== e12 || t3.push(i4);
  }), t3;
}, W.prototype.contains = function(e12) {
  return F(this, function(t3) {
    return e12 === t3;
  }) || false;
};
var G = z;
var X = K;
function K(e12) {
  if (!(this instanceof K)) return new K();
  this.childNodes = [], this.parentNode = null, this.ownerDocument = e12 || null;
}
K.prototype.type = "DocumentFragment", K.prototype.nodeType = 11, K.prototype.nodeName = "#document-fragment", K.prototype.appendChild = G.prototype.appendChild, K.prototype.replaceChild = G.prototype.replaceChild, K.prototype.removeChild = G.prototype.removeChild, K.prototype.toString = function() {
  return this.childNodes.map(function(e12) {
    return String(e12);
  }).join("");
};
var Y = Q;
function Q(e12) {
}
Q.prototype.initEvent = function(e12, t3, i4) {
  this.type = e12, this.bubbles = t3, this.cancelable = i4;
}, Q.prototype.preventDefault = function() {
};
var J = y3;
var Z = v2;
var ee = T;
var te = z;
var ie = X;
var se = Y;
var ne = E2;
var re = C2;
var ae = x;
var oe = le;
function le() {
  if (!(this instanceof le)) return new le();
  this.head = this.createElement("head"), this.body = this.createElement("body"), this.documentElement = this.createElement("html"), this.documentElement.appendChild(this.head), this.documentElement.appendChild(this.body), this.childNodes = [this.documentElement], this.nodeType = 9;
}
var he = le.prototype;
he.createTextNode = function(e12) {
  return new ee(e12, this);
}, he.createElementNS = function(e12, t3) {
  var i4 = null === e12 ? null : String(e12);
  return new te(t3, this, i4);
}, he.createElement = function(e12) {
  return new te(e12, this);
}, he.createDocumentFragment = function() {
  return new ie(this);
}, he.createEvent = function(e12) {
  return new se();
}, he.createComment = function(e12) {
  return new Z(e12, this);
}, he.getElementById = function(e12) {
  return e12 = String(e12), J(this.childNodes, function(t3) {
    if (String(t3.id) === e12) return t3;
  }) || null;
}, he.getElementsByClassName = te.prototype.getElementsByClassName, he.getElementsByTagName = te.prototype.getElementsByTagName, he.contains = te.prototype.contains, he.removeEventListener = ae, he.addEventListener = re, he.dispatchEvent = ne;
var de;
var ue = new oe();
var ce = void 0 !== e2 ? e2 : "undefined" != typeof window ? window : {};
var pe = ue;
"undefined" != typeof document ? de = document : (de = ce["__GLOBAL_DOCUMENT_CACHE@4"]) || (de = ce["__GLOBAL_DOCUMENT_CACHE@4"] = pe);
var me = de;
var ge = o2(me);
var fe = {
  exports: {}
};
!function(e12, t3) {
  function i4(e13) {
    if (e13 && "object" == typeof e13) {
      var t4 = e13.which || e13.keyCode || e13.charCode;
      t4 && (e13 = t4);
    }
    if ("number" == typeof e13) return a6[e13];
    var i5, r4 = String(e13);
    return (i5 = s6[r4.toLowerCase()]) ? i5 : (i5 = n6[r4.toLowerCase()]) || (1 === r4.length ? r4.charCodeAt(0) : void 0);
  }
  i4.isEventKey = function(e13, t4) {
    if (e13 && "object" == typeof e13) {
      var i5 = e13.which || e13.keyCode || e13.charCode;
      if (null == i5) return false;
      if ("string" == typeof t4) {
        var r4;
        if (r4 = s6[t4.toLowerCase()]) return r4 === i5;
        if (r4 = n6[t4.toLowerCase()]) return r4 === i5;
      } else if ("number" == typeof t4) return t4 === i5;
      return false;
    }
  };
  var s6 = (t3 = e12.exports = i4).code = t3.codes = {
    backspace: 8,
    tab: 9,
    enter: 13,
    shift: 16,
    ctrl: 17,
    alt: 18,
    "pause/break": 19,
    "caps lock": 20,
    esc: 27,
    space: 32,
    "page up": 33,
    "page down": 34,
    end: 35,
    home: 36,
    left: 37,
    up: 38,
    right: 39,
    down: 40,
    insert: 45,
    delete: 46,
    command: 91,
    "left command": 91,
    "right command": 93,
    "numpad *": 106,
    "numpad +": 107,
    "numpad -": 109,
    "numpad .": 110,
    "numpad /": 111,
    "num lock": 144,
    "scroll lock": 145,
    "my computer": 182,
    "my calculator": 183,
    ";": 186,
    "=": 187,
    ",": 188,
    "-": 189,
    ".": 190,
    "/": 191,
    "`": 192,
    "[": 219,
    "\\": 220,
    "]": 221,
    "'": 222
  }, n6 = t3.aliases = {
    windows: 91,
    "⇧": 16,
    "⌥": 18,
    "⌃": 17,
    "⌘": 91,
    ctl: 17,
    control: 17,
    option: 18,
    pause: 19,
    break: 19,
    caps: 20,
    return: 13,
    escape: 27,
    spc: 32,
    spacebar: 32,
    pgup: 33,
    pgdn: 34,
    ins: 45,
    del: 46,
    cmd: 91
  };
  for (r3 = 97; r3 < 123; r3++) s6[String.fromCharCode(r3)] = r3 - 32;
  for (var r3 = 48; r3 < 58; r3++) s6[r3 - 48] = r3;
  for (r3 = 1; r3 < 13; r3++) s6["f" + r3] = r3 + 111;
  for (r3 = 0; r3 < 10; r3++) s6["numpad " + r3] = r3 + 96;
  var a6 = t3.names = t3.title = {};
  for (r3 in s6) a6[s6[r3]] = r3;
  for (var o4 in n6) s6[o4] = n6[o4];
}(fe, fe.exports);
var ye = o2(fe.exports);
function _e(e12, t3) {
  var i4, s6 = null;
  try {
    i4 = JSON.parse(e12, t3);
  } catch (n6) {
    s6 = n6;
  }
  return [s6, i4];
}
var ve = o2(_e);
var be = {
  exports: {}
};
var Te = {
  exports: {}
};
!function(e12) {
  function t3() {
    return e12.exports = t3 = Object.assign ? Object.assign.bind() : function(e13) {
      for (var t4 = 1; t4 < arguments.length; t4++) {
        var i4 = arguments[t4];
        for (var s6 in i4) Object.prototype.hasOwnProperty.call(i4, s6) && (e13[s6] = i4[s6]);
      }
      return e13;
    }, e12.exports.__esModule = true, e12.exports.default = e12.exports, t3.apply(this, arguments);
  }
  e12.exports = t3, e12.exports.__esModule = true, e12.exports.default = e12.exports;
}(Te);
var Se = Te.exports;
var Ee = Ce;
var we = Object.prototype.toString;
function Ce(e12) {
  if (!e12) return false;
  var t3 = we.call(e12);
  return "[object Function]" === t3 || "function" == typeof e12 && "[object RegExp]" !== t3 || "undefined" != typeof window && (e12 === window.setTimeout || e12 === window.alert || e12 === window.confirm || e12 === window.prompt);
}
var ke = m5;
function xe(e12) {
  return void 0 === e12 && (e12 = ""), e12.toLowerCase().split(";").reduce(function(e13, t3) {
    var i4 = t3.split("="), s6 = i4[0], n6 = i4[1];
    return "charset" === s6.trim() ? n6.trim() : e13;
  }, "utf-8");
}
var Ie = function(e12, t3) {
  return void 0 === t3 && (t3 = false), function(i4, s6, n6) {
    if (i4) e12(i4);
    else if (s6.statusCode >= 400 && s6.statusCode <= 599) {
      var r3 = n6;
      if (t3) if (ke.TextDecoder) {
        var a6 = xe(s6.headers && s6.headers["content-type"]);
        try {
          r3 = new TextDecoder(a6).decode(n6);
        } catch (o4) {
        }
      } else r3 = String.fromCharCode.apply(null, new Uint8Array(n6));
      e12({
        cause: r3
      });
    } else e12(null, n6);
  };
};
var Ae = m5;
var De = Se;
var Pe = Ee;
Me.httpHandler = Ie;
var Le = function(e12) {
  var t3 = {};
  return e12 ? (e12.trim().split("\n").forEach(function(e13) {
    var i4 = e13.indexOf(":"), s6 = e13.slice(0, i4).trim().toLowerCase(), n6 = e13.slice(i4 + 1).trim();
    void 0 === t3[s6] ? t3[s6] = n6 : Array.isArray(t3[s6]) ? t3[s6].push(n6) : t3[s6] = [t3[s6], n6];
  }), t3) : t3;
};
function Oe(e12, t3) {
  for (var i4 = 0; i4 < e12.length; i4++) t3(e12[i4]);
}
function Ne(e12) {
  for (var t3 in e12) if (e12.hasOwnProperty(t3)) return false;
  return true;
}
function Re(e12, t3, i4) {
  var s6 = e12;
  return Pe(t3) ? (i4 = t3, "string" == typeof e12 && (s6 = {
    uri: e12
  })) : s6 = De({}, t3, {
    uri: e12
  }), s6.callback = i4, s6;
}
function Me(e12, t3, i4) {
  return Ue(t3 = Re(e12, t3, i4));
}
function Ue(e12) {
  if (void 0 === e12.callback) throw new Error("callback argument missing");
  var t3 = false, i4 = function(i5, s7, n7) {
    t3 || (t3 = true, e12.callback(i5, s7, n7));
  };
  function s6() {
    4 === h.readyState && setTimeout(a6, 0);
  }
  function n6() {
    var e13 = void 0;
    if (e13 = h.response ? h.response : h.responseText || Be(h), f6) try {
      e13 = JSON.parse(e13);
    } catch (t4) {
    }
    return e13;
  }
  function r3(e13) {
    return clearTimeout(d4), e13 instanceof Error || (e13 = new Error("" + (e13 || "Unknown XMLHttpRequest Error"))), e13.statusCode = 0, i4(e13, y4);
  }
  function a6() {
    if (!l5) {
      var t4;
      clearTimeout(d4), t4 = e12.useXDR && void 0 === h.status ? 200 : 1223 === h.status ? 204 : h.status;
      var s7 = y4, r4 = null;
      return 0 !== t4 ? (s7 = {
        body: n6(),
        statusCode: t4,
        method: c2,
        headers: {},
        url: u4,
        rawRequest: h
      }, h.getAllResponseHeaders && (s7.headers = Le(h.getAllResponseHeaders()))) : r4 = new Error("Internal XMLHttpRequest Error"), i4(r4, s7, s7.body);
    }
  }
  var o4, l5, h = e12.xhr || null;
  h || (h = e12.cors || e12.useXDR ? new Me.XDomainRequest() : new Me.XMLHttpRequest());
  var d4, u4 = h.url = e12.uri || e12.url, c2 = h.method = e12.method || "GET", p2 = e12.body || e12.data, m6 = h.headers = e12.headers || {}, g4 = !!e12.sync, f6 = false, y4 = {
    body: void 0,
    headers: {},
    statusCode: 0,
    method: c2,
    url: u4,
    rawRequest: h
  };
  if ("json" in e12 && false !== e12.json && (f6 = true, m6.accept || m6.Accept || (m6.Accept = "application/json"), "GET" !== c2 && "HEAD" !== c2 && (m6["content-type"] || m6["Content-Type"] || (m6["Content-Type"] = "application/json"), p2 = JSON.stringify(true === e12.json ? p2 : e12.json))), h.onreadystatechange = s6, h.onload = a6, h.onerror = r3, h.onprogress = function() {
  }, h.onabort = function() {
    l5 = true;
  }, h.ontimeout = r3, h.open(c2, u4, !g4, e12.username, e12.password), g4 || (h.withCredentials = !!e12.withCredentials), !g4 && e12.timeout > 0 && (d4 = setTimeout(function() {
    if (!l5) {
      l5 = true, h.abort("timeout");
      var e13 = new Error("XMLHttpRequest timeout");
      e13.code = "ETIMEDOUT", r3(e13);
    }
  }, e12.timeout)), h.setRequestHeader) for (o4 in m6) m6.hasOwnProperty(o4) && h.setRequestHeader(o4, m6[o4]);
  else if (e12.headers && !Ne(e12.headers)) throw new Error("Headers cannot be set on an XDomainRequest object");
  return "responseType" in e12 && (h.responseType = e12.responseType), "beforeSend" in e12 && "function" == typeof e12.beforeSend && e12.beforeSend(h), h.send(p2 || null), h;
}
function Be(e12) {
  try {
    if ("document" === e12.responseType) return e12.responseXML;
    var t3 = e12.responseXML && "parsererror" === e12.responseXML.documentElement.nodeName;
    if ("" === e12.responseType && !t3) return e12.responseXML;
  } catch (i4) {
  }
  return null;
}
function Fe() {
}
be.exports = Me, be.exports.default = Me, Me.XMLHttpRequest = Ae.XMLHttpRequest || Fe, Me.XDomainRequest = "withCredentials" in new Me.XMLHttpRequest() ? Me.XMLHttpRequest : Ae.XDomainRequest, Oe(["get", "put", "post", "patch", "head", "delete"], function(e12) {
  Me["delete" === e12 ? "del" : e12] = function(t3, i4, s6) {
    return (i4 = Re(t3, i4, s6)).method = e12.toUpperCase(), Ue(i4);
  };
});
var qe = o2(be.exports);
var je = {
  exports: {}
};
var $e = me;
var He = Object.create || /* @__PURE__ */ function() {
  function e12() {
  }
  return function(t3) {
    if (1 !== arguments.length) throw new Error("Object.create shim only accepts one parameter.");
    return e12.prototype = t3, new e12();
  };
}();
function Ve(e12, t3) {
  this.name = "ParsingError", this.code = e12.code, this.message = t3 || e12.message;
}
function ze(e12) {
  function t3(e13, t4, i5, s6) {
    return 3600 * (0 | e13) + 60 * (0 | t4) + (0 | i5) + (0 | s6) / 1e3;
  }
  var i4 = e12.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);
  return i4 ? i4[3] ? t3(i4[1], i4[2], i4[3].replace(":", ""), i4[4]) : i4[1] > 59 ? t3(i4[1], i4[2], 0, i4[4]) : t3(0, i4[1], i4[2], i4[4]) : null;
}
function We() {
  this.values = He(null);
}
function Ge(e12, t3, i4, s6) {
  var n6 = s6 ? e12.split(s6) : [e12];
  for (var r3 in n6) if ("string" == typeof n6[r3]) {
    var a6 = n6[r3].split(i4);
    if (2 === a6.length) t3(a6[0].trim(), a6[1].trim());
  }
}
function Xe(e12, t3, i4) {
  var s6 = e12;
  function n6() {
    var t4 = ze(e12);
    if (null === t4) throw new Ve(Ve.Errors.BadTimeStamp, "Malformed timestamp: " + s6);
    return e12 = e12.replace(/^[^\sa-zA-Z-]+/, ""), t4;
  }
  function r3(e13, t4) {
    var s7 = new We();
    Ge(e13, function(e14, t5) {
      switch (e14) {
        case "region":
          for (var n7 = i4.length - 1; n7 >= 0; n7--) if (i4[n7].id === t5) {
            s7.set(e14, i4[n7].region);
            break;
          }
          break;
        case "vertical":
          s7.alt(e14, t5, ["rl", "lr"]);
          break;
        case "line":
          var r4 = t5.split(","), a7 = r4[0];
          s7.integer(e14, a7), s7.percent(e14, a7) && s7.set("snapToLines", false), s7.alt(e14, a7, ["auto"]), 2 === r4.length && s7.alt("lineAlign", r4[1], ["start", "center", "end"]);
          break;
        case "position":
          r4 = t5.split(","), s7.percent(e14, r4[0]), 2 === r4.length && s7.alt("positionAlign", r4[1], ["start", "center", "end"]);
          break;
        case "size":
          s7.percent(e14, t5);
          break;
        case "align":
          s7.alt(e14, t5, ["start", "center", "end", "left", "right"]);
      }
    }, /:/, /\s/), t4.region = s7.get("region", null), t4.vertical = s7.get("vertical", "");
    try {
      t4.line = s7.get("line", "auto");
    } catch (n7) {
    }
    t4.lineAlign = s7.get("lineAlign", "start"), t4.snapToLines = s7.get("snapToLines", true), t4.size = s7.get("size", 100);
    try {
      t4.align = s7.get("align", "center");
    } catch (n7) {
      t4.align = s7.get("align", "middle");
    }
    try {
      t4.position = s7.get("position", "auto");
    } catch (n7) {
      t4.position = s7.get("position", {
        start: 0,
        left: 0,
        center: 50,
        middle: 50,
        end: 100,
        right: 100
      }, t4.align);
    }
    t4.positionAlign = s7.get("positionAlign", {
      start: "start",
      left: "start",
      center: "center",
      middle: "center",
      end: "end",
      right: "end"
    }, t4.align);
  }
  function a6() {
    e12 = e12.replace(/^\s+/, "");
  }
  if (a6(), t3.startTime = n6(), a6(), "-->" !== e12.substr(0, 3)) throw new Ve(Ve.Errors.BadTimeStamp, "Malformed time stamp (time stamps must be separated by '-->'): " + s6);
  e12 = e12.substr(3), a6(), t3.endTime = n6(), a6(), r3(e12, t3);
}
Ve.prototype = He(Error.prototype), Ve.prototype.constructor = Ve, Ve.Errors = {
  BadSignature: {
    code: 0,
    message: "Malformed WebVTT signature."
  },
  BadTimeStamp: {
    code: 1,
    message: "Malformed time stamp."
  }
}, We.prototype = {
  set: function(e12, t3) {
    this.get(e12) || "" === t3 || (this.values[e12] = t3);
  },
  get: function(e12, t3, i4) {
    return i4 ? this.has(e12) ? this.values[e12] : t3[i4] : this.has(e12) ? this.values[e12] : t3;
  },
  has: function(e12) {
    return e12 in this.values;
  },
  alt: function(e12, t3, i4) {
    for (var s6 = 0; s6 < i4.length; ++s6) if (t3 === i4[s6]) {
      this.set(e12, t3);
      break;
    }
  },
  integer: function(e12, t3) {
    /^-?\d+$/.test(t3) && this.set(e12, parseInt(t3, 10));
  },
  percent: function(e12, t3) {
    return !!(t3.match(/^([\d]{1,3})(\.[\d]*)?%$/) && (t3 = parseFloat(t3)) >= 0 && t3 <= 100) && (this.set(e12, t3), true);
  }
};
var Ke = $e.createElement && $e.createElement("textarea");
var Ye = {
  c: "span",
  i: "i",
  b: "b",
  u: "u",
  ruby: "ruby",
  rt: "rt",
  v: "span",
  lang: "span"
};
var Qe = {
  white: "rgba(255,255,255,1)",
  lime: "rgba(0,255,0,1)",
  cyan: "rgba(0,255,255,1)",
  red: "rgba(255,0,0,1)",
  yellow: "rgba(255,255,0,1)",
  magenta: "rgba(255,0,255,1)",
  blue: "rgba(0,0,255,1)",
  black: "rgba(0,0,0,1)"
};
var Je = {
  v: "title",
  lang: "lang"
};
var Ze = {
  rt: "ruby"
};
function et(e12, t3) {
  function i4() {
    if (!t3) return null;
    function e13(e14) {
      return t3 = t3.substr(e14.length), e14;
    }
    var i5 = t3.match(/^([^<]*)(<[^>]*>?)?/);
    return e13(i5[1] ? i5[1] : i5[2]);
  }
  function s6(e13) {
    return Ke.innerHTML = e13, e13 = Ke.textContent, Ke.textContent = "", e13;
  }
  function n6(e13, t4) {
    return !Ze[t4.localName] || Ze[t4.localName] === e13.localName;
  }
  function r3(t4, i5) {
    var s7 = Ye[t4];
    if (!s7) return null;
    var n7 = e12.document.createElement(s7), r4 = Je[t4];
    return r4 && i5 && (n7[r4] = i5.trim()), n7;
  }
  for (var a6, o4 = e12.document.createElement("div"), l5 = o4, h = []; null !== (a6 = i4()); ) if ("<" !== a6[0]) l5.appendChild(e12.document.createTextNode(s6(a6)));
  else {
    if ("/" === a6[1]) {
      h.length && h[h.length - 1] === a6.substr(2).replace(">", "") && (h.pop(), l5 = l5.parentNode);
      continue;
    }
    var d4, u4 = ze(a6.substr(1, a6.length - 2));
    if (u4) {
      d4 = e12.document.createProcessingInstruction("timestamp", u4), l5.appendChild(d4);
      continue;
    }
    var c2 = a6.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);
    if (!c2) continue;
    if (!(d4 = r3(c2[1], c2[3]))) continue;
    if (!n6(l5, d4)) continue;
    if (c2[2]) {
      var p2 = c2[2].split(".");
      p2.forEach(function(e13) {
        var t4 = /^bg_/.test(e13), i5 = t4 ? e13.slice(3) : e13;
        if (Qe.hasOwnProperty(i5)) {
          var s7 = t4 ? "background-color" : "color", n7 = Qe[i5];
          d4.style[s7] = n7;
        }
      }), d4.className = p2.join(" ");
    }
    h.push(c2[1]), l5.appendChild(d4), l5 = d4;
  }
  return o4;
}
var tt = [[1470, 1470], [1472, 1472], [1475, 1475], [1478, 1478], [1488, 1514], [1520, 1524], [1544, 1544], [1547, 1547], [1549, 1549], [1563, 1563], [1566, 1610], [1645, 1647], [1649, 1749], [1765, 1766], [1774, 1775], [1786, 1805], [1807, 1808], [1810, 1839], [1869, 1957], [1969, 1969], [1984, 2026], [2036, 2037], [2042, 2042], [2048, 2069], [2074, 2074], [2084, 2084], [2088, 2088], [2096, 2110], [2112, 2136], [2142, 2142], [2208, 2208], [2210, 2220], [8207, 8207], [64285, 64285], [64287, 64296], [64298, 64310], [64312, 64316], [64318, 64318], [64320, 64321], [64323, 64324], [64326, 64449], [64467, 64829], [64848, 64911], [64914, 64967], [65008, 65020], [65136, 65140], [65142, 65276], [67584, 67589], [67592, 67592], [67594, 67637], [67639, 67640], [67644, 67644], [67647, 67669], [67671, 67679], [67840, 67867], [67872, 67897], [67903, 67903], [67968, 68023], [68030, 68031], [68096, 68096], [68112, 68115], [68117, 68119], [68121, 68147], [68160, 68167], [68176, 68184], [68192, 68223], [68352, 68405], [68416, 68437], [68440, 68466], [68472, 68479], [68608, 68680], [126464, 126467], [126469, 126495], [126497, 126498], [126500, 126500], [126503, 126503], [126505, 126514], [126516, 126519], [126521, 126521], [126523, 126523], [126530, 126530], [126535, 126535], [126537, 126537], [126539, 126539], [126541, 126543], [126545, 126546], [126548, 126548], [126551, 126551], [126553, 126553], [126555, 126555], [126557, 126557], [126559, 126559], [126561, 126562], [126564, 126564], [126567, 126570], [126572, 126578], [126580, 126583], [126585, 126588], [126590, 126590], [126592, 126601], [126603, 126619], [126625, 126627], [126629, 126633], [126635, 126651], [1114109, 1114109]];
function it(e12) {
  for (var t3 = 0; t3 < tt.length; t3++) {
    var i4 = tt[t3];
    if (e12 >= i4[0] && e12 <= i4[1]) return true;
  }
  return false;
}
function st(e12) {
  var t3 = [], i4 = "";
  if (!e12 || !e12.childNodes) return "ltr";
  function s6(e13, t4) {
    for (var i5 = t4.childNodes.length - 1; i5 >= 0; i5--) e13.push(t4.childNodes[i5]);
  }
  function n6(e13) {
    if (!e13 || !e13.length) return null;
    var t4 = e13.pop(), i5 = t4.textContent || t4.innerText;
    if (i5) {
      var r4 = i5.match(/^.*(\n|\r)/);
      return r4 ? (e13.length = 0, r4[0]) : i5;
    }
    return "ruby" === t4.tagName ? n6(e13) : t4.childNodes ? (s6(e13, t4), n6(e13)) : void 0;
  }
  for (s6(t3, e12); i4 = n6(t3); ) for (var r3 = 0; r3 < i4.length; r3++) if (it(i4.charCodeAt(r3))) return "rtl";
  return "ltr";
}
function nt(e12) {
  if ("number" == typeof e12.line && (e12.snapToLines || e12.line >= 0 && e12.line <= 100)) return e12.line;
  if (!e12.track || !e12.track.textTrackList || !e12.track.textTrackList.mediaElement) return -1;
  for (var t3 = e12.track, i4 = t3.textTrackList, s6 = 0, n6 = 0; n6 < i4.length && i4[n6] !== t3; n6++) "showing" === i4[n6].mode && s6++;
  return -1 * ++s6;
}
function rt() {
}
function at(e12, t3, i4) {
  rt.call(this), this.cue = t3, this.cueDiv = et(e12, t3.text);
  var s6 = {
    color: "rgba(255, 255, 255, 1)",
    backgroundColor: "rgba(0, 0, 0, 0.8)",
    position: "relative",
    left: 0,
    right: 0,
    top: 0,
    bottom: 0,
    display: "inline",
    writingMode: "" === t3.vertical ? "horizontal-tb" : "lr" === t3.vertical ? "vertical-lr" : "vertical-rl",
    unicodeBidi: "plaintext"
  };
  this.applyStyles(s6, this.cueDiv), this.div = e12.document.createElement("div"), s6 = {
    direction: st(this.cueDiv),
    writingMode: "" === t3.vertical ? "horizontal-tb" : "lr" === t3.vertical ? "vertical-lr" : "vertical-rl",
    unicodeBidi: "plaintext",
    textAlign: "middle" === t3.align ? "center" : t3.align,
    font: i4.font,
    whiteSpace: "pre-line",
    position: "absolute"
  }, this.applyStyles(s6), this.div.appendChild(this.cueDiv);
  var n6 = 0;
  switch (t3.positionAlign) {
    case "start":
    case "line-left":
      n6 = t3.position;
      break;
    case "center":
      n6 = t3.position - t3.size / 2;
      break;
    case "end":
    case "line-right":
      n6 = t3.position - t3.size;
  }
  "" === t3.vertical ? this.applyStyles({
    left: this.formatStyle(n6, "%"),
    width: this.formatStyle(t3.size, "%")
  }) : this.applyStyles({
    top: this.formatStyle(n6, "%"),
    height: this.formatStyle(t3.size, "%")
  }), this.move = function(e13) {
    this.applyStyles({
      top: this.formatStyle(e13.top, "px"),
      bottom: this.formatStyle(e13.bottom, "px"),
      left: this.formatStyle(e13.left, "px"),
      right: this.formatStyle(e13.right, "px"),
      height: this.formatStyle(e13.height, "px"),
      width: this.formatStyle(e13.width, "px")
    });
  };
}
function ot(e12) {
  var t3, i4, s6, n6;
  if (e12.div) {
    i4 = e12.div.offsetHeight, s6 = e12.div.offsetWidth, n6 = e12.div.offsetTop;
    var r3 = (r3 = e12.div.childNodes) && (r3 = r3[0]) && r3.getClientRects && r3.getClientRects();
    e12 = e12.div.getBoundingClientRect(), t3 = r3 ? Math.max(r3[0] && r3[0].height || 0, e12.height / r3.length) : 0;
  }
  this.left = e12.left, this.right = e12.right, this.top = e12.top || n6, this.height = e12.height || i4, this.bottom = e12.bottom || n6 + (e12.height || i4), this.width = e12.width || s6, this.lineHeight = void 0 !== t3 ? t3 : e12.lineHeight;
}
function lt(e12, t3, i4, s6) {
  function n6(e13, t4) {
    for (var n7, r4 = new ot(e13), a7 = 1, o5 = 0; o5 < t4.length; o5++) {
      for (; e13.overlapsOppositeAxis(i4, t4[o5]) || e13.within(i4) && e13.overlapsAny(s6); ) e13.move(t4[o5]);
      if (e13.within(i4)) return e13;
      var l6 = e13.intersectPercentage(i4);
      a7 > l6 && (n7 = new ot(e13), a7 = l6), e13 = new ot(r4);
    }
    return n7 || r4;
  }
  var r3 = new ot(t3), a6 = t3.cue, o4 = nt(a6), l5 = [];
  if (a6.snapToLines) {
    var h;
    switch (a6.vertical) {
      case "":
        l5 = ["+y", "-y"], h = "height";
        break;
      case "rl":
        l5 = ["+x", "-x"], h = "width";
        break;
      case "lr":
        l5 = ["-x", "+x"], h = "width";
    }
    var d4 = r3.lineHeight, u4 = d4 * Math.round(o4), c2 = i4[h] + d4, p2 = l5[0];
    Math.abs(u4) > c2 && (u4 = u4 < 0 ? -1 : 1, u4 *= Math.ceil(c2 / d4) * d4), o4 < 0 && (u4 += "" === a6.vertical ? i4.height : i4.width, l5 = l5.reverse()), r3.move(p2, u4);
  } else {
    var m6 = r3.lineHeight / i4.height * 100;
    switch (a6.lineAlign) {
      case "center":
        o4 -= m6 / 2;
        break;
      case "end":
        o4 -= m6;
    }
    switch (a6.vertical) {
      case "":
        t3.applyStyles({
          top: t3.formatStyle(o4, "%")
        });
        break;
      case "rl":
        t3.applyStyles({
          left: t3.formatStyle(o4, "%")
        });
        break;
      case "lr":
        t3.applyStyles({
          right: t3.formatStyle(o4, "%")
        });
    }
    l5 = ["+y", "-x", "+x", "-y"], r3 = new ot(t3);
  }
  var g4 = n6(r3, l5);
  t3.move(g4.toCSSCompatValues(i4));
}
function ht() {
}
rt.prototype.applyStyles = function(e12, t3) {
  for (var i4 in t3 = t3 || this.div, e12) e12.hasOwnProperty(i4) && (t3.style[i4] = e12[i4]);
}, rt.prototype.formatStyle = function(e12, t3) {
  return 0 === e12 ? 0 : e12 + t3;
}, at.prototype = He(rt.prototype), at.prototype.constructor = at, ot.prototype.move = function(e12, t3) {
  switch (t3 = void 0 !== t3 ? t3 : this.lineHeight, e12) {
    case "+x":
      this.left += t3, this.right += t3;
      break;
    case "-x":
      this.left -= t3, this.right -= t3;
      break;
    case "+y":
      this.top += t3, this.bottom += t3;
      break;
    case "-y":
      this.top -= t3, this.bottom -= t3;
  }
}, ot.prototype.overlaps = function(e12) {
  return this.left < e12.right && this.right > e12.left && this.top < e12.bottom && this.bottom > e12.top;
}, ot.prototype.overlapsAny = function(e12) {
  for (var t3 = 0; t3 < e12.length; t3++) if (this.overlaps(e12[t3])) return true;
  return false;
}, ot.prototype.within = function(e12) {
  return this.top >= e12.top && this.bottom <= e12.bottom && this.left >= e12.left && this.right <= e12.right;
}, ot.prototype.overlapsOppositeAxis = function(e12, t3) {
  switch (t3) {
    case "+x":
      return this.left < e12.left;
    case "-x":
      return this.right > e12.right;
    case "+y":
      return this.top < e12.top;
    case "-y":
      return this.bottom > e12.bottom;
  }
}, ot.prototype.intersectPercentage = function(e12) {
  return Math.max(0, Math.min(this.right, e12.right) - Math.max(this.left, e12.left)) * Math.max(0, Math.min(this.bottom, e12.bottom) - Math.max(this.top, e12.top)) / (this.height * this.width);
}, ot.prototype.toCSSCompatValues = function(e12) {
  return {
    top: this.top - e12.top,
    bottom: e12.bottom - this.bottom,
    left: this.left - e12.left,
    right: e12.right - this.right,
    height: this.height,
    width: this.width
  };
}, ot.getSimpleBoxPosition = function(e12) {
  var t3 = e12.div ? e12.div.offsetHeight : e12.tagName ? e12.offsetHeight : 0, i4 = e12.div ? e12.div.offsetWidth : e12.tagName ? e12.offsetWidth : 0, s6 = e12.div ? e12.div.offsetTop : e12.tagName ? e12.offsetTop : 0;
  return {
    left: (e12 = e12.div ? e12.div.getBoundingClientRect() : e12.tagName ? e12.getBoundingClientRect() : e12).left,
    right: e12.right,
    top: e12.top || s6,
    height: e12.height || t3,
    bottom: e12.bottom || s6 + (e12.height || t3),
    width: e12.width || i4
  };
}, ht.StringDecoder = function() {
  return {
    decode: function(e12) {
      if (!e12) return "";
      if ("string" != typeof e12) throw new Error("Error - expected string data.");
      return decodeURIComponent(encodeURIComponent(e12));
    }
  };
}, ht.convertCueToDOMTree = function(e12, t3) {
  return e12 && t3 ? et(e12, t3) : null;
};
var dt = 0.05;
var ut = "sans-serif";
var ct = "1.5%";
ht.processCues = function(e12, t3, i4) {
  if (!e12 || !t3 || !i4) return null;
  for (; i4.firstChild; ) i4.removeChild(i4.firstChild);
  var s6 = e12.document.createElement("div");
  function n6(e13) {
    for (var t4 = 0; t4 < e13.length; t4++) if (e13[t4].hasBeenReset || !e13[t4].displayState) return true;
    return false;
  }
  if (s6.style.position = "absolute", s6.style.left = "0", s6.style.right = "0", s6.style.top = "0", s6.style.bottom = "0", s6.style.margin = ct, i4.appendChild(s6), n6(t3)) {
    var r3 = [], a6 = ot.getSimpleBoxPosition(s6), o4 = {
      font: Math.round(a6.height * dt * 100) / 100 + "px " + ut
    };
    !function() {
      for (var i5, n7, l6 = 0; l6 < t3.length; l6++) n7 = t3[l6], i5 = new at(e12, n7, o4), s6.appendChild(i5.div), lt(e12, i5, a6, r3), n7.displayState = i5.div, r3.push(ot.getSimpleBoxPosition(i5));
    }();
  } else for (var l5 = 0; l5 < t3.length; l5++) s6.appendChild(t3[l5].displayState);
}, ht.Parser = function(e12, t3, i4) {
  i4 || (i4 = t3, t3 = {}), t3 || (t3 = {}), this.window = e12, this.vttjs = t3, this.state = "INITIAL", this.buffer = "", this.decoder = i4 || new TextDecoder("utf8"), this.regionList = [];
}, ht.Parser.prototype = {
  reportOrThrowError: function(e12) {
    if (!(e12 instanceof Ve)) throw e12;
    this.onparsingerror && this.onparsingerror(e12);
  },
  parse: function(e12) {
    var t3 = this;
    function i4() {
      for (var e13 = t3.buffer, i5 = 0; i5 < e13.length && "\r" !== e13[i5] && "\n" !== e13[i5]; ) ++i5;
      var s7 = e13.substr(0, i5);
      return "\r" === e13[i5] && ++i5, "\n" === e13[i5] && ++i5, t3.buffer = e13.substr(i5), s7;
    }
    function s6(e13) {
      var i5 = new We();
      if (Ge(e13, function(e14, t4) {
        switch (e14) {
          case "id":
            i5.set(e14, t4);
            break;
          case "width":
            i5.percent(e14, t4);
            break;
          case "lines":
            i5.integer(e14, t4);
            break;
          case "regionanchor":
          case "viewportanchor":
            var s8 = t4.split(",");
            if (2 !== s8.length) break;
            var n7 = new We();
            if (n7.percent("x", s8[0]), n7.percent("y", s8[1]), !n7.has("x") || !n7.has("y")) break;
            i5.set(e14 + "X", n7.get("x")), i5.set(e14 + "Y", n7.get("y"));
            break;
          case "scroll":
            i5.alt(e14, t4, ["up"]);
        }
      }, /=/, /\s/), i5.has("id")) {
        var s7 = new (t3.vttjs.VTTRegion || t3.window.VTTRegion)();
        s7.width = i5.get("width", 100), s7.lines = i5.get("lines", 3), s7.regionAnchorX = i5.get("regionanchorX", 0), s7.regionAnchorY = i5.get("regionanchorY", 100), s7.viewportAnchorX = i5.get("viewportanchorX", 0), s7.viewportAnchorY = i5.get("viewportanchorY", 100), s7.scroll = i5.get("scroll", ""), t3.onregion && t3.onregion(s7), t3.regionList.push({
          id: i5.get("id"),
          region: s7
        });
      }
    }
    function n6(e13) {
      var i5 = new We();
      Ge(e13, function(e14, t4) {
        switch (e14) {
          case "MPEGT":
            i5.integer(e14 + "S", t4);
            break;
          case "LOCA":
            i5.set(e14 + "L", ze(t4));
        }
      }, /[^\d]:/, /,/), t3.ontimestampmap && t3.ontimestampmap({
        MPEGTS: i5.get("MPEGTS"),
        LOCAL: i5.get("LOCAL")
      });
    }
    function r3(e13) {
      e13.match(/X-TIMESTAMP-MAP/) ? Ge(e13, function(e14, t4) {
        if ("X-TIMESTAMP-MAP" === e14) n6(t4);
      }, /=/) : Ge(e13, function(e14, t4) {
        if ("Region" === e14) s6(t4);
      }, /:/);
    }
    e12 && (t3.buffer += t3.decoder.decode(e12, {
      stream: true
    }));
    try {
      var a6;
      if ("INITIAL" === t3.state) {
        if (!/\r\n|\n/.test(t3.buffer)) return this;
        var o4 = (a6 = i4()).match(/^WEBVTT([ \t].*)?$/);
        if (!o4 || !o4[0]) throw new Ve(Ve.Errors.BadSignature);
        t3.state = "HEADER";
      }
      for (var l5 = false; t3.buffer; ) {
        if (!/\r\n|\n/.test(t3.buffer)) return this;
        switch (l5 ? l5 = false : a6 = i4(), t3.state) {
          case "HEADER":
            /:/.test(a6) ? r3(a6) : a6 || (t3.state = "ID");
            continue;
          case "NOTE":
            a6 || (t3.state = "ID");
            continue;
          case "ID":
            if (/^NOTE($|[ \t])/.test(a6)) {
              t3.state = "NOTE";
              break;
            }
            if (!a6) continue;
            t3.cue = new (t3.vttjs.VTTCue || t3.window.VTTCue)(0, 0, "");
            try {
              t3.cue.align = "center";
            } catch (d4) {
              t3.cue.align = "middle";
            }
            if (t3.state = "CUE", -1 === a6.indexOf("-->")) {
              t3.cue.id = a6;
              continue;
            }
          case "CUE":
            try {
              Xe(a6, t3.cue, t3.regionList);
            } catch (d4) {
              t3.reportOrThrowError(d4), t3.cue = null, t3.state = "BADCUE";
              continue;
            }
            t3.state = "CUETEXT";
            continue;
          case "CUETEXT":
            var h = -1 !== a6.indexOf("-->");
            if (!a6 || h && (l5 = true)) {
              t3.oncue && t3.oncue(t3.cue), t3.cue = null, t3.state = "ID";
              continue;
            }
            t3.cue.text && (t3.cue.text += "\n"), t3.cue.text += a6.replace(/\u2028/g, "\n").replace(/u2029/g, "\n");
            continue;
          case "BADCUE":
            a6 || (t3.state = "ID");
            continue;
        }
      }
    } catch (d4) {
      t3.reportOrThrowError(d4), "CUETEXT" === t3.state && t3.cue && t3.oncue && t3.oncue(t3.cue), t3.cue = null, t3.state = "INITIAL" === t3.state ? "BADWEBVTT" : "BADCUE";
    }
    return this;
  },
  flush: function() {
    var e12 = this;
    try {
      if (e12.buffer += e12.decoder.decode(), (e12.cue || "HEADER" === e12.state) && (e12.buffer += "\n\n", e12.parse()), "INITIAL" === e12.state) throw new Ve(Ve.Errors.BadSignature);
    } catch (t3) {
      e12.reportOrThrowError(t3);
    }
    return e12.onflush && e12.onflush(), this;
  }
};
var pt = ht;
var mt = "auto";
var gt = {
  "": 1,
  lr: 1,
  rl: 1
};
var ft = {
  start: 1,
  center: 1,
  end: 1,
  left: 1,
  right: 1,
  auto: 1,
  "line-left": 1,
  "line-right": 1
};
function yt(e12) {
  return "string" == typeof e12 && !!gt[e12.toLowerCase()] && e12.toLowerCase();
}
function _t(e12) {
  return "string" == typeof e12 && !!ft[e12.toLowerCase()] && e12.toLowerCase();
}
function vt(e12, t3, i4) {
  this.hasBeenReset = false;
  var s6 = "", n6 = false, r3 = e12, a6 = t3, o4 = i4, l5 = null, h = "", d4 = true, u4 = "auto", c2 = "start", p2 = "auto", m6 = "auto", g4 = 100, f6 = "center";
  Object.defineProperties(this, {
    id: {
      enumerable: true,
      get: function() {
        return s6;
      },
      set: function(e13) {
        s6 = "" + e13;
      }
    },
    pauseOnExit: {
      enumerable: true,
      get: function() {
        return n6;
      },
      set: function(e13) {
        n6 = !!e13;
      }
    },
    startTime: {
      enumerable: true,
      get: function() {
        return r3;
      },
      set: function(e13) {
        if ("number" != typeof e13) throw new TypeError("Start time must be set to a number.");
        r3 = e13, this.hasBeenReset = true;
      }
    },
    endTime: {
      enumerable: true,
      get: function() {
        return a6;
      },
      set: function(e13) {
        if ("number" != typeof e13) throw new TypeError("End time must be set to a number.");
        a6 = e13, this.hasBeenReset = true;
      }
    },
    text: {
      enumerable: true,
      get: function() {
        return o4;
      },
      set: function(e13) {
        o4 = "" + e13, this.hasBeenReset = true;
      }
    },
    region: {
      enumerable: true,
      get: function() {
        return l5;
      },
      set: function(e13) {
        l5 = e13, this.hasBeenReset = true;
      }
    },
    vertical: {
      enumerable: true,
      get: function() {
        return h;
      },
      set: function(e13) {
        var t4 = yt(e13);
        if (false === t4) throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");
        h = t4, this.hasBeenReset = true;
      }
    },
    snapToLines: {
      enumerable: true,
      get: function() {
        return d4;
      },
      set: function(e13) {
        d4 = !!e13, this.hasBeenReset = true;
      }
    },
    line: {
      enumerable: true,
      get: function() {
        return u4;
      },
      set: function(e13) {
        if ("number" != typeof e13 && e13 !== mt) throw new SyntaxError("Line: an invalid number or illegal string was specified.");
        u4 = e13, this.hasBeenReset = true;
      }
    },
    lineAlign: {
      enumerable: true,
      get: function() {
        return c2;
      },
      set: function(e13) {
        var t4 = _t(e13);
        t4 ? (c2 = t4, this.hasBeenReset = true) : console.warn("lineAlign: an invalid or illegal string was specified.");
      }
    },
    position: {
      enumerable: true,
      get: function() {
        return p2;
      },
      set: function(e13) {
        if (e13 < 0 || e13 > 100) throw new Error("Position must be between 0 and 100.");
        p2 = e13, this.hasBeenReset = true;
      }
    },
    positionAlign: {
      enumerable: true,
      get: function() {
        return m6;
      },
      set: function(e13) {
        var t4 = _t(e13);
        t4 ? (m6 = t4, this.hasBeenReset = true) : console.warn("positionAlign: an invalid or illegal string was specified.");
      }
    },
    size: {
      enumerable: true,
      get: function() {
        return g4;
      },
      set: function(e13) {
        if (e13 < 0 || e13 > 100) throw new Error("Size must be between 0 and 100.");
        g4 = e13, this.hasBeenReset = true;
      }
    },
    align: {
      enumerable: true,
      get: function() {
        return f6;
      },
      set: function(e13) {
        var t4 = _t(e13);
        if (!t4) throw new SyntaxError("align: an invalid or illegal alignment string was specified.");
        f6 = t4, this.hasBeenReset = true;
      }
    }
  }), this.displayState = void 0;
}
vt.prototype.getCueAsHTML = function() {
  return WebVTT.convertCueToDOMTree(window, this.text);
};
var bt = vt;
var Tt = {
  "": true,
  up: true
};
function St(e12) {
  return "string" == typeof e12 && !!Tt[e12.toLowerCase()] && e12.toLowerCase();
}
function Et(e12) {
  return "number" == typeof e12 && e12 >= 0 && e12 <= 100;
}
function wt() {
  var e12 = 100, t3 = 3, i4 = 0, s6 = 100, n6 = 0, r3 = 100, a6 = "";
  Object.defineProperties(this, {
    width: {
      enumerable: true,
      get: function() {
        return e12;
      },
      set: function(t4) {
        if (!Et(t4)) throw new Error("Width must be between 0 and 100.");
        e12 = t4;
      }
    },
    lines: {
      enumerable: true,
      get: function() {
        return t3;
      },
      set: function(e13) {
        if ("number" != typeof e13) throw new TypeError("Lines must be set to a number.");
        t3 = e13;
      }
    },
    regionAnchorY: {
      enumerable: true,
      get: function() {
        return s6;
      },
      set: function(e13) {
        if (!Et(e13)) throw new Error("RegionAnchorX must be between 0 and 100.");
        s6 = e13;
      }
    },
    regionAnchorX: {
      enumerable: true,
      get: function() {
        return i4;
      },
      set: function(e13) {
        if (!Et(e13)) throw new Error("RegionAnchorY must be between 0 and 100.");
        i4 = e13;
      }
    },
    viewportAnchorY: {
      enumerable: true,
      get: function() {
        return r3;
      },
      set: function(e13) {
        if (!Et(e13)) throw new Error("ViewportAnchorY must be between 0 and 100.");
        r3 = e13;
      }
    },
    viewportAnchorX: {
      enumerable: true,
      get: function() {
        return n6;
      },
      set: function(e13) {
        if (!Et(e13)) throw new Error("ViewportAnchorX must be between 0 and 100.");
        n6 = e13;
      }
    },
    scroll: {
      enumerable: true,
      get: function() {
        return a6;
      },
      set: function(e13) {
        var t4 = St(e13);
        false === t4 ? console.warn("Scroll: an invalid or illegal string was specified.") : a6 = t4;
      }
    }
  });
}
var Ct = wt;
var kt = m5;
var xt = je.exports = {
  WebVTT: pt,
  VTTCue: bt,
  VTTRegion: Ct
};
kt.vttjs = xt, kt.WebVTT = xt.WebVTT;
var It = xt.VTTCue;
var At = xt.VTTRegion;
var Dt = kt.VTTCue;
var Pt = kt.VTTRegion;
xt.shim = function() {
  kt.VTTCue = It, kt.VTTRegion = At;
}, xt.restore = function() {
  kt.VTTCue = Dt, kt.VTTRegion = Pt;
}, kt.VTTCue || xt.shim();
var Lt = o2(je.exports);
function Ot() {
  return Ot = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t3 = 1; t3 < arguments.length; t3++) {
      var i4 = arguments[t3];
      for (var s6 in i4) Object.prototype.hasOwnProperty.call(i4, s6) && (e12[s6] = i4[s6]);
    }
    return e12;
  }, Ot.apply(this, arguments);
}
var Nt;
var Rt = {
  exports: {}
};
Nt = Rt, function(e12) {
  var t3 = /^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/, i4 = /^(?=([^\/?#]*))\1([^]*)$/, s6 = /(?:\/|^)\.(?=\/)/g, n6 = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g, r3 = {
    buildAbsoluteURL: function(e13, t4, s7) {
      if (s7 = s7 || {}, e13 = e13.trim(), !(t4 = t4.trim())) {
        if (!s7.alwaysNormalize) return e13;
        var n7 = r3.parseURL(e13);
        if (!n7) throw new Error("Error trying to parse base URL.");
        return n7.path = r3.normalizePath(n7.path), r3.buildURLFromParts(n7);
      }
      var a6 = r3.parseURL(t4);
      if (!a6) throw new Error("Error trying to parse relative URL.");
      if (a6.scheme) return s7.alwaysNormalize ? (a6.path = r3.normalizePath(a6.path), r3.buildURLFromParts(a6)) : t4;
      var o4 = r3.parseURL(e13);
      if (!o4) throw new Error("Error trying to parse base URL.");
      if (!o4.netLoc && o4.path && "/" !== o4.path[0]) {
        var l5 = i4.exec(o4.path);
        o4.netLoc = l5[1], o4.path = l5[2];
      }
      o4.netLoc && !o4.path && (o4.path = "/");
      var h = {
        scheme: o4.scheme,
        netLoc: a6.netLoc,
        path: null,
        params: a6.params,
        query: a6.query,
        fragment: a6.fragment
      };
      if (!a6.netLoc && (h.netLoc = o4.netLoc, "/" !== a6.path[0])) if (a6.path) {
        var d4 = o4.path, u4 = d4.substring(0, d4.lastIndexOf("/") + 1) + a6.path;
        h.path = r3.normalizePath(u4);
      } else h.path = o4.path, a6.params || (h.params = o4.params, a6.query || (h.query = o4.query));
      return null === h.path && (h.path = s7.alwaysNormalize ? r3.normalizePath(a6.path) : a6.path), r3.buildURLFromParts(h);
    },
    parseURL: function(e13) {
      var i5 = t3.exec(e13);
      return i5 ? {
        scheme: i5[1] || "",
        netLoc: i5[2] || "",
        path: i5[3] || "",
        params: i5[4] || "",
        query: i5[5] || "",
        fragment: i5[6] || ""
      } : null;
    },
    normalizePath: function(e13) {
      for (e13 = e13.split("").reverse().join("").replace(s6, ""); e13.length !== (e13 = e13.replace(n6, "")).length; ) ;
      return e13.split("").reverse().join("");
    },
    buildURLFromParts: function(e13) {
      return e13.scheme + e13.netLoc + e13.path + e13.params + e13.query + e13.fragment;
    }
  };
  Nt.exports = r3;
}();
var Mt = o2(Rt.exports);
var Ut = "http://example.com";
var Bt = function(e12, t3) {
  if (/^[a-z]+:/i.test(t3)) return t3;
  /^data:/.test(e12) && (e12 = g3.location && g3.location.href || "");
  var i4 = "function" == typeof g3.URL, s6 = /^\/\//.test(e12), n6 = !g3.location && !/\/\//i.test(e12);
  if (i4 ? e12 = new g3.URL(e12, g3.location || Ut) : /\/\//i.test(e12) || (e12 = Mt.buildAbsoluteURL(g3.location && g3.location.href || "", e12)), i4) {
    var r3 = new URL(t3, e12);
    return n6 ? r3.href.slice(Ut.length) : s6 ? r3.href.slice(r3.protocol.length) : r3.href;
  }
  return Mt.buildAbsoluteURL(e12, t3);
};
var Ft = function() {
  function e12() {
    this.listeners = {};
  }
  var t3 = e12.prototype;
  return t3.on = function(e13, t4) {
    this.listeners[e13] || (this.listeners[e13] = []), this.listeners[e13].push(t4);
  }, t3.off = function(e13, t4) {
    if (!this.listeners[e13]) return false;
    var i4 = this.listeners[e13].indexOf(t4);
    return this.listeners[e13] = this.listeners[e13].slice(0), this.listeners[e13].splice(i4, 1), i4 > -1;
  }, t3.trigger = function(e13) {
    var t4 = this.listeners[e13];
    if (t4) if (2 === arguments.length) for (var i4 = t4.length, s6 = 0; s6 < i4; ++s6) t4[s6].call(this, arguments[1]);
    else for (var n6 = Array.prototype.slice.call(arguments, 1), r3 = t4.length, a6 = 0; a6 < r3; ++a6) t4[a6].apply(this, n6);
  }, t3.dispose = function() {
    this.listeners = {};
  }, t3.pipe = function(e13) {
    this.on("data", function(t4) {
      e13.push(t4);
    });
  }, e12;
}();
var qt = function(e12) {
  return g3.atob ? g3.atob(e12) : Buffer.from(e12, "base64").toString("binary");
};
function jt(e12) {
  for (var t3 = qt(e12), i4 = new Uint8Array(t3.length), s6 = 0; s6 < t3.length; s6++) i4[s6] = t3.charCodeAt(s6);
  return i4;
}
var $t = class extends Ft {
  constructor() {
    super(), this.buffer = "";
  }
  push(e12) {
    let t3;
    for (this.buffer += e12, t3 = this.buffer.indexOf("\n"); t3 > -1; t3 = this.buffer.indexOf("\n")) this.trigger("data", this.buffer.substring(0, t3)), this.buffer = this.buffer.substring(t3 + 1);
  }
};
var Ht = String.fromCharCode(9);
var Vt = function(e12) {
  const t3 = /([0-9.]*)?@?([0-9.]*)?/.exec(e12 || ""), i4 = {};
  return t3[1] && (i4.length = parseInt(t3[1], 10)), t3[2] && (i4.offset = parseInt(t3[2], 10)), i4;
};
var zt = function() {
  return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))');
};
var Wt = function(e12) {
  const t3 = {};
  if (!e12) return t3;
  const i4 = e12.split(zt());
  let s6, n6 = i4.length;
  for (; n6--; ) "" !== i4[n6] && (s6 = /([^=]*)=(.*)/.exec(i4[n6]).slice(1), s6[0] = s6[0].replace(/^\s+|\s+$/g, ""), s6[1] = s6[1].replace(/^\s+|\s+$/g, ""), s6[1] = s6[1].replace(/^['"](.*)['"]$/g, "$1"), t3[s6[0]] = s6[1]);
  return t3;
};
var Gt = class extends Ft {
  constructor() {
    super(), this.customParsers = [], this.tagMappers = [];
  }
  push(e12) {
    let t3, i4;
    if (0 === (e12 = e12.trim()).length) return;
    if ("#" !== e12[0]) return void this.trigger("data", {
      type: "uri",
      uri: e12
    });
    this.tagMappers.reduce((t4, i5) => {
      const s6 = i5(e12);
      return s6 === e12 ? t4 : t4.concat([s6]);
    }, [e12]).forEach((e13) => {
      for (let t4 = 0; t4 < this.customParsers.length; t4++) if (this.customParsers[t4].call(this, e13)) return;
      if (0 === e13.indexOf("#EXT")) {
        if (e13 = e13.replace("\r", ""), t3 = /^#EXTM3U/.exec(e13), t3) this.trigger("data", {
          type: "tag",
          tagType: "m3u"
        });
        else {
          if (t3 = /^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e13), t3) return i4 = {
            type: "tag",
            tagType: "inf"
          }, t3[1] && (i4.duration = parseFloat(t3[1])), t3[2] && (i4.title = t3[2]), void this.trigger("data", i4);
          if (t3 = /^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e13), t3) return i4 = {
            type: "tag",
            tagType: "targetduration"
          }, t3[1] && (i4.duration = parseInt(t3[1], 10)), void this.trigger("data", i4);
          if (t3 = /^#EXT-X-VERSION:([0-9.]*)?/.exec(e13), t3) return i4 = {
            type: "tag",
            tagType: "version"
          }, t3[1] && (i4.version = parseInt(t3[1], 10)), void this.trigger("data", i4);
          if (t3 = /^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e13), t3) return i4 = {
            type: "tag",
            tagType: "media-sequence"
          }, t3[1] && (i4.number = parseInt(t3[1], 10)), void this.trigger("data", i4);
          if (t3 = /^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e13), t3) return i4 = {
            type: "tag",
            tagType: "discontinuity-sequence"
          }, t3[1] && (i4.number = parseInt(t3[1], 10)), void this.trigger("data", i4);
          if (t3 = /^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e13), t3) return i4 = {
            type: "tag",
            tagType: "playlist-type"
          }, t3[1] && (i4.playlistType = t3[1]), void this.trigger("data", i4);
          if (t3 = /^#EXT-X-BYTERANGE:(.*)?$/.exec(e13), t3) return i4 = Ot(Vt(t3[1]), {
            type: "tag",
            tagType: "byterange"
          }), void this.trigger("data", i4);
          if (t3 = /^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e13), t3) return i4 = {
            type: "tag",
            tagType: "allow-cache"
          }, t3[1] && (i4.allowed = !/NO/.test(t3[1])), void this.trigger("data", i4);
          if (t3 = /^#EXT-X-MAP:(.*)$/.exec(e13), t3) {
            if (i4 = {
              type: "tag",
              tagType: "map"
            }, t3[1]) {
              const e14 = Wt(t3[1]);
              e14.URI && (i4.uri = e14.URI), e14.BYTERANGE && (i4.byterange = Vt(e14.BYTERANGE));
            }
            this.trigger("data", i4);
          } else if (t3 = /^#EXT-X-STREAM-INF:(.*)$/.exec(e13), t3) {
            if (i4 = {
              type: "tag",
              tagType: "stream-inf"
            }, t3[1]) {
              if (i4.attributes = Wt(t3[1]), i4.attributes.RESOLUTION) {
                const e14 = i4.attributes.RESOLUTION.split("x"), t4 = {};
                e14[0] && (t4.width = parseInt(e14[0], 10)), e14[1] && (t4.height = parseInt(e14[1], 10)), i4.attributes.RESOLUTION = t4;
              }
              i4.attributes.BANDWIDTH && (i4.attributes.BANDWIDTH = parseInt(i4.attributes.BANDWIDTH, 10)), i4.attributes["FRAME-RATE"] && (i4.attributes["FRAME-RATE"] = parseFloat(i4.attributes["FRAME-RATE"])), i4.attributes["PROGRAM-ID"] && (i4.attributes["PROGRAM-ID"] = parseInt(i4.attributes["PROGRAM-ID"], 10));
            }
            this.trigger("data", i4);
          } else {
            if (t3 = /^#EXT-X-MEDIA:(.*)$/.exec(e13), t3) return i4 = {
              type: "tag",
              tagType: "media"
            }, t3[1] && (i4.attributes = Wt(t3[1])), void this.trigger("data", i4);
            if (t3 = /^#EXT-X-ENDLIST/.exec(e13), t3) this.trigger("data", {
              type: "tag",
              tagType: "endlist"
            });
            else if (t3 = /^#EXT-X-DISCONTINUITY/.exec(e13), t3) this.trigger("data", {
              type: "tag",
              tagType: "discontinuity"
            });
            else {
              if (t3 = /^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e13), t3) return i4 = {
                type: "tag",
                tagType: "program-date-time"
              }, t3[1] && (i4.dateTimeString = t3[1], i4.dateTimeObject = new Date(t3[1])), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-KEY:(.*)$/.exec(e13), t3) return i4 = {
                type: "tag",
                tagType: "key"
              }, t3[1] && (i4.attributes = Wt(t3[1]), i4.attributes.IV && ("0x" === i4.attributes.IV.substring(0, 2).toLowerCase() && (i4.attributes.IV = i4.attributes.IV.substring(2)), i4.attributes.IV = i4.attributes.IV.match(/.{8}/g), i4.attributes.IV[0] = parseInt(i4.attributes.IV[0], 16), i4.attributes.IV[1] = parseInt(i4.attributes.IV[1], 16), i4.attributes.IV[2] = parseInt(i4.attributes.IV[2], 16), i4.attributes.IV[3] = parseInt(i4.attributes.IV[3], 16), i4.attributes.IV = new Uint32Array(i4.attributes.IV))), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-START:(.*)$/.exec(e13), t3) return i4 = {
                type: "tag",
                tagType: "start"
              }, t3[1] && (i4.attributes = Wt(t3[1]), i4.attributes["TIME-OFFSET"] = parseFloat(i4.attributes["TIME-OFFSET"]), i4.attributes.PRECISE = /YES/.test(i4.attributes.PRECISE)), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e13), t3) return i4 = {
                type: "tag",
                tagType: "cue-out-cont"
              }, t3[1] ? i4.data = t3[1] : i4.data = "", void this.trigger("data", i4);
              if (t3 = /^#EXT-X-CUE-OUT:(.*)?$/.exec(e13), t3) return i4 = {
                type: "tag",
                tagType: "cue-out"
              }, t3[1] ? i4.data = t3[1] : i4.data = "", void this.trigger("data", i4);
              if (t3 = /^#EXT-X-CUE-IN:(.*)?$/.exec(e13), t3) return i4 = {
                type: "tag",
                tagType: "cue-in"
              }, t3[1] ? i4.data = t3[1] : i4.data = "", void this.trigger("data", i4);
              if (t3 = /^#EXT-X-SKIP:(.*)$/.exec(e13), t3 && t3[1]) return i4 = {
                type: "tag",
                tagType: "skip"
              }, i4.attributes = Wt(t3[1]), i4.attributes.hasOwnProperty("SKIPPED-SEGMENTS") && (i4.attributes["SKIPPED-SEGMENTS"] = parseInt(i4.attributes["SKIPPED-SEGMENTS"], 10)), i4.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES") && (i4.attributes["RECENTLY-REMOVED-DATERANGES"] = i4.attributes["RECENTLY-REMOVED-DATERANGES"].split(Ht)), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-PART:(.*)$/.exec(e13), t3 && t3[1]) return i4 = {
                type: "tag",
                tagType: "part"
              }, i4.attributes = Wt(t3[1]), ["DURATION"].forEach(function(e14) {
                i4.attributes.hasOwnProperty(e14) && (i4.attributes[e14] = parseFloat(i4.attributes[e14]));
              }), ["INDEPENDENT", "GAP"].forEach(function(e14) {
                i4.attributes.hasOwnProperty(e14) && (i4.attributes[e14] = /YES/.test(i4.attributes[e14]));
              }), i4.attributes.hasOwnProperty("BYTERANGE") && (i4.attributes.byterange = Vt(i4.attributes.BYTERANGE)), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e13), t3 && t3[1]) return i4 = {
                type: "tag",
                tagType: "server-control"
              }, i4.attributes = Wt(t3[1]), ["CAN-SKIP-UNTIL", "PART-HOLD-BACK", "HOLD-BACK"].forEach(function(e14) {
                i4.attributes.hasOwnProperty(e14) && (i4.attributes[e14] = parseFloat(i4.attributes[e14]));
              }), ["CAN-SKIP-DATERANGES", "CAN-BLOCK-RELOAD"].forEach(function(e14) {
                i4.attributes.hasOwnProperty(e14) && (i4.attributes[e14] = /YES/.test(i4.attributes[e14]));
              }), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-PART-INF:(.*)$/.exec(e13), t3 && t3[1]) return i4 = {
                type: "tag",
                tagType: "part-inf"
              }, i4.attributes = Wt(t3[1]), ["PART-TARGET"].forEach(function(e14) {
                i4.attributes.hasOwnProperty(e14) && (i4.attributes[e14] = parseFloat(i4.attributes[e14]));
              }), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e13), t3 && t3[1]) return i4 = {
                type: "tag",
                tagType: "preload-hint"
              }, i4.attributes = Wt(t3[1]), ["BYTERANGE-START", "BYTERANGE-LENGTH"].forEach(function(e14) {
                if (i4.attributes.hasOwnProperty(e14)) {
                  i4.attributes[e14] = parseInt(i4.attributes[e14], 10);
                  const t4 = "BYTERANGE-LENGTH" === e14 ? "length" : "offset";
                  i4.attributes.byterange = i4.attributes.byterange || {}, i4.attributes.byterange[t4] = i4.attributes[e14], delete i4.attributes[e14];
                }
              }), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e13), t3 && t3[1]) return i4 = {
                type: "tag",
                tagType: "rendition-report"
              }, i4.attributes = Wt(t3[1]), ["LAST-MSN", "LAST-PART"].forEach(function(e14) {
                i4.attributes.hasOwnProperty(e14) && (i4.attributes[e14] = parseInt(i4.attributes[e14], 10));
              }), void this.trigger("data", i4);
              if (t3 = /^#EXT-X-DATERANGE:(.*)$/.exec(e13), t3 && t3[1]) {
                i4 = {
                  type: "tag",
                  tagType: "daterange"
                }, i4.attributes = Wt(t3[1]), ["ID", "CLASS"].forEach(function(e15) {
                  i4.attributes.hasOwnProperty(e15) && (i4.attributes[e15] = String(i4.attributes[e15]));
                }), ["START-DATE", "END-DATE"].forEach(function(e15) {
                  i4.attributes.hasOwnProperty(e15) && (i4.attributes[e15] = new Date(i4.attributes[e15]));
                }), ["DURATION", "PLANNED-DURATION"].forEach(function(e15) {
                  i4.attributes.hasOwnProperty(e15) && (i4.attributes[e15] = parseFloat(i4.attributes[e15]));
                }), ["END-ON-NEXT"].forEach(function(e15) {
                  i4.attributes.hasOwnProperty(e15) && (i4.attributes[e15] = /YES/i.test(i4.attributes[e15]));
                }), ["SCTE35-CMD", " SCTE35-OUT", "SCTE35-IN"].forEach(function(e15) {
                  i4.attributes.hasOwnProperty(e15) && (i4.attributes[e15] = i4.attributes[e15].toString(16));
                });
                const e14 = /^X-([A-Z]+-)+[A-Z]+$/;
                for (const t4 in i4.attributes) {
                  if (!e14.test(t4)) continue;
                  const s6 = /[0-9A-Fa-f]{6}/g.test(i4.attributes[t4]), n6 = /^\d+(\.\d+)?$/.test(i4.attributes[t4]);
                  i4.attributes[t4] = s6 ? i4.attributes[t4].toString(16) : n6 ? parseFloat(i4.attributes[t4]) : String(i4.attributes[t4]);
                }
                this.trigger("data", i4);
              } else if (t3 = /^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e13), t3) this.trigger("data", {
                type: "tag",
                tagType: "independent-segments"
              });
              else {
                if (t3 = /^#EXT-X-CONTENT-STEERING:(.*)$/.exec(e13), t3) return i4 = {
                  type: "tag",
                  tagType: "content-steering"
                }, i4.attributes = Wt(t3[1]), void this.trigger("data", i4);
                this.trigger("data", {
                  type: "tag",
                  data: e13.slice(4)
                });
              }
            }
          }
        }
      } else this.trigger("data", {
        type: "comment",
        text: e13.slice(1)
      });
    });
  }
  addParser({
    expression: e12,
    customType: t3,
    dataParser: i4,
    segment: s6
  }) {
    "function" != typeof i4 && (i4 = (e13) => e13), this.customParsers.push((n6) => {
      if (e12.exec(n6)) return this.trigger("data", {
        type: "custom",
        data: i4(n6),
        customType: t3,
        segment: s6
      }), true;
    });
  }
  addTagMapper({
    expression: e12,
    map: t3
  }) {
    const i4 = (i5) => e12.test(i5) ? t3(i5) : i5;
    this.tagMappers.push(i4);
  }
};
var Xt = (e12) => e12.toLowerCase().replace(/-(\w)/g, (e13) => e13[1].toUpperCase());
var Kt = function(e12) {
  const t3 = {};
  return Object.keys(e12).forEach(function(i4) {
    t3[Xt(i4)] = e12[i4];
  }), t3;
};
var Yt = function(e12) {
  const {
    serverControl: t3,
    targetDuration: i4,
    partTargetDuration: s6
  } = e12;
  if (!t3) return;
  const n6 = "#EXT-X-SERVER-CONTROL", r3 = "holdBack", a6 = "partHoldBack", o4 = i4 && 3 * i4, l5 = s6 && 2 * s6;
  i4 && !t3.hasOwnProperty(r3) && (t3[r3] = o4, this.trigger("info", {
    message: `${n6} defaulting HOLD-BACK to targetDuration * 3 (${o4}).`
  })), o4 && t3[r3] < o4 && (this.trigger("warn", {
    message: `${n6} clamping HOLD-BACK (${t3[r3]}) to targetDuration * 3 (${o4})`
  }), t3[r3] = o4), s6 && !t3.hasOwnProperty(a6) && (t3[a6] = 3 * s6, this.trigger("info", {
    message: `${n6} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t3[a6]}).`
  })), s6 && t3[a6] < l5 && (this.trigger("warn", {
    message: `${n6} clamping PART-HOLD-BACK (${t3[a6]}) to partTargetDuration * 2 (${l5}).`
  }), t3[a6] = l5);
};
var Qt = class extends Ft {
  constructor() {
    super(), this.lineStream = new $t(), this.parseStream = new Gt(), this.lineStream.pipe(this.parseStream), this.lastProgramDateTime = null;
    const e12 = this, t3 = [];
    let i4, s6, n6 = {}, r3 = false;
    const a6 = function() {
    }, o4 = {
      AUDIO: {},
      VIDEO: {},
      "CLOSED-CAPTIONS": {},
      SUBTITLES: {}
    }, l5 = "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";
    let h = 0;
    this.manifest = {
      allowCache: true,
      discontinuityStarts: [],
      dateRanges: [],
      segments: []
    };
    let d4 = 0, u4 = 0;
    const c2 = {};
    this.on("end", () => {
      n6.uri || !n6.parts && !n6.preloadHints || (!n6.map && i4 && (n6.map = i4), !n6.key && s6 && (n6.key = s6), n6.timeline || "number" != typeof h || (n6.timeline = h), this.manifest.preloadSegment = n6);
    }), this.parseStream.on("data", function(p2) {
      let m6, g4;
      ({
        tag() {
          ({
            version() {
              p2.version && (this.manifest.version = p2.version);
            },
            "allow-cache"() {
              this.manifest.allowCache = p2.allowed, "allowed" in p2 || (this.trigger("info", {
                message: "defaulting allowCache to YES"
              }), this.manifest.allowCache = true);
            },
            byterange() {
              const e13 = {};
              "length" in p2 && (n6.byterange = e13, e13.length = p2.length, "offset" in p2 || (p2.offset = d4)), "offset" in p2 && (n6.byterange = e13, e13.offset = p2.offset), d4 = e13.offset + e13.length;
            },
            endlist() {
              this.manifest.endList = true;
            },
            inf() {
              "mediaSequence" in this.manifest || (this.manifest.mediaSequence = 0, this.trigger("info", {
                message: "defaulting media sequence to zero"
              })), "discontinuitySequence" in this.manifest || (this.manifest.discontinuitySequence = 0, this.trigger("info", {
                message: "defaulting discontinuity sequence to zero"
              })), p2.title && (n6.title = p2.title), p2.duration > 0 && (n6.duration = p2.duration), 0 === p2.duration && (n6.duration = 0.01, this.trigger("info", {
                message: "updating zero segment duration to a small value"
              })), this.manifest.segments = t3;
            },
            key() {
              if (p2.attributes) {
                if ("NONE" !== p2.attributes.METHOD) {
                  if (p2.attributes.URI) {
                    if ("com.apple.streamingkeydelivery" === p2.attributes.KEYFORMAT) return this.manifest.contentProtection = this.manifest.contentProtection || {}, void (this.manifest.contentProtection["com.apple.fps.1_0"] = {
                      attributes: p2.attributes
                    });
                    if ("com.microsoft.playready" === p2.attributes.KEYFORMAT) return this.manifest.contentProtection = this.manifest.contentProtection || {}, void (this.manifest.contentProtection["com.microsoft.playready"] = {
                      uri: p2.attributes.URI
                    });
                    if (p2.attributes.KEYFORMAT === l5) {
                      return -1 === ["SAMPLE-AES", "SAMPLE-AES-CTR", "SAMPLE-AES-CENC"].indexOf(p2.attributes.METHOD) ? void this.trigger("warn", {
                        message: "invalid key method provided for Widevine"
                      }) : ("SAMPLE-AES-CENC" === p2.attributes.METHOD && this.trigger("warn", {
                        message: "SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"
                      }), "data:text/plain;base64," !== p2.attributes.URI.substring(0, 23) ? void this.trigger("warn", {
                        message: "invalid key URI provided for Widevine"
                      }) : p2.attributes.KEYID && "0x" === p2.attributes.KEYID.substring(0, 2) ? (this.manifest.contentProtection = this.manifest.contentProtection || {}, void (this.manifest.contentProtection["com.widevine.alpha"] = {
                        attributes: {
                          schemeIdUri: p2.attributes.KEYFORMAT,
                          keyId: p2.attributes.KEYID.substring(2)
                        },
                        pssh: jt(p2.attributes.URI.split(",")[1])
                      })) : void this.trigger("warn", {
                        message: "invalid key ID provided for Widevine"
                      }));
                    }
                    p2.attributes.METHOD || this.trigger("warn", {
                      message: "defaulting key method to AES-128"
                    }), s6 = {
                      method: p2.attributes.METHOD || "AES-128",
                      uri: p2.attributes.URI
                    }, void 0 !== p2.attributes.IV && (s6.iv = p2.attributes.IV);
                  } else this.trigger("warn", {
                    message: "ignoring key declaration without URI"
                  });
                } else s6 = null;
              } else this.trigger("warn", {
                message: "ignoring key declaration without attribute list"
              });
            },
            "media-sequence"() {
              isFinite(p2.number) ? this.manifest.mediaSequence = p2.number : this.trigger("warn", {
                message: "ignoring invalid media sequence: " + p2.number
              });
            },
            "discontinuity-sequence"() {
              isFinite(p2.number) ? (this.manifest.discontinuitySequence = p2.number, h = p2.number) : this.trigger("warn", {
                message: "ignoring invalid discontinuity sequence: " + p2.number
              });
            },
            "playlist-type"() {
              /VOD|EVENT/.test(p2.playlistType) ? this.manifest.playlistType = p2.playlistType : this.trigger("warn", {
                message: "ignoring unknown playlist type: " + p2.playlist
              });
            },
            map() {
              i4 = {}, p2.uri && (i4.uri = p2.uri), p2.byterange && (i4.byterange = p2.byterange), s6 && (i4.key = s6);
            },
            "stream-inf"() {
              this.manifest.playlists = t3, this.manifest.mediaGroups = this.manifest.mediaGroups || o4, p2.attributes ? (n6.attributes || (n6.attributes = {}), Ot(n6.attributes, p2.attributes)) : this.trigger("warn", {
                message: "ignoring empty stream-inf attributes"
              });
            },
            media() {
              if (this.manifest.mediaGroups = this.manifest.mediaGroups || o4, !(p2.attributes && p2.attributes.TYPE && p2.attributes["GROUP-ID"] && p2.attributes.NAME)) return void this.trigger("warn", {
                message: "ignoring incomplete or missing media group"
              });
              const e13 = this.manifest.mediaGroups[p2.attributes.TYPE];
              e13[p2.attributes["GROUP-ID"]] = e13[p2.attributes["GROUP-ID"]] || {}, m6 = e13[p2.attributes["GROUP-ID"]], g4 = {
                default: /yes/i.test(p2.attributes.DEFAULT)
              }, g4.default ? g4.autoselect = true : g4.autoselect = /yes/i.test(p2.attributes.AUTOSELECT), p2.attributes.LANGUAGE && (g4.language = p2.attributes.LANGUAGE), p2.attributes.URI && (g4.uri = p2.attributes.URI), p2.attributes["INSTREAM-ID"] && (g4.instreamId = p2.attributes["INSTREAM-ID"]), p2.attributes.CHARACTERISTICS && (g4.characteristics = p2.attributes.CHARACTERISTICS), p2.attributes.FORCED && (g4.forced = /yes/i.test(p2.attributes.FORCED)), m6[p2.attributes.NAME] = g4;
            },
            discontinuity() {
              h += 1, n6.discontinuity = true, this.manifest.discontinuityStarts.push(t3.length);
            },
            "program-date-time"() {
              void 0 === this.manifest.dateTimeString && (this.manifest.dateTimeString = p2.dateTimeString, this.manifest.dateTimeObject = p2.dateTimeObject), n6.dateTimeString = p2.dateTimeString, n6.dateTimeObject = p2.dateTimeObject;
              const {
                lastProgramDateTime: e13
              } = this;
              this.lastProgramDateTime = new Date(p2.dateTimeString).getTime(), null === e13 && this.manifest.segments.reduceRight((e14, t4) => (t4.programDateTime = e14 - 1e3 * t4.duration, t4.programDateTime), this.lastProgramDateTime);
            },
            targetduration() {
              !isFinite(p2.duration) || p2.duration < 0 ? this.trigger("warn", {
                message: "ignoring invalid target duration: " + p2.duration
              }) : (this.manifest.targetDuration = p2.duration, Yt.call(this, this.manifest));
            },
            start() {
              p2.attributes && !isNaN(p2.attributes["TIME-OFFSET"]) ? this.manifest.start = {
                timeOffset: p2.attributes["TIME-OFFSET"],
                precise: p2.attributes.PRECISE
              } : this.trigger("warn", {
                message: "ignoring start declaration without appropriate attribute list"
              });
            },
            "cue-out"() {
              n6.cueOut = p2.data;
            },
            "cue-out-cont"() {
              n6.cueOutCont = p2.data;
            },
            "cue-in"() {
              n6.cueIn = p2.data;
            },
            skip() {
              this.manifest.skip = Kt(p2.attributes), this.warnOnMissingAttributes_("#EXT-X-SKIP", p2.attributes, ["SKIPPED-SEGMENTS"]);
            },
            part() {
              r3 = true;
              const e13 = this.manifest.segments.length, t4 = Kt(p2.attributes);
              n6.parts = n6.parts || [], n6.parts.push(t4), t4.byterange && (t4.byterange.hasOwnProperty("offset") || (t4.byterange.offset = u4), u4 = t4.byterange.offset + t4.byterange.length);
              const i5 = n6.parts.length - 1;
              this.warnOnMissingAttributes_(`#EXT-X-PART #${i5} for segment #${e13}`, p2.attributes, ["URI", "DURATION"]), this.manifest.renditionReports && this.manifest.renditionReports.forEach((e14, t5) => {
                e14.hasOwnProperty("lastPart") || this.trigger("warn", {
                  message: `#EXT-X-RENDITION-REPORT #${t5} lacks required attribute(s): LAST-PART`
                });
              });
            },
            "server-control"() {
              const e13 = this.manifest.serverControl = Kt(p2.attributes);
              e13.hasOwnProperty("canBlockReload") || (e13.canBlockReload = false, this.trigger("info", {
                message: "#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"
              })), Yt.call(this, this.manifest), e13.canSkipDateranges && !e13.hasOwnProperty("canSkipUntil") && this.trigger("warn", {
                message: "#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"
              });
            },
            "preload-hint"() {
              const e13 = this.manifest.segments.length, t4 = Kt(p2.attributes), i5 = t4.type && "PART" === t4.type;
              n6.preloadHints = n6.preloadHints || [], n6.preloadHints.push(t4), t4.byterange && (t4.byterange.hasOwnProperty("offset") || (t4.byterange.offset = i5 ? u4 : 0, i5 && (u4 = t4.byterange.offset + t4.byterange.length)));
              const s7 = n6.preloadHints.length - 1;
              if (this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${s7} for segment #${e13}`, p2.attributes, ["TYPE", "URI"]), t4.type) for (let r4 = 0; r4 < n6.preloadHints.length - 1; r4++) {
                const i6 = n6.preloadHints[r4];
                i6.type && i6.type === t4.type && this.trigger("warn", {
                  message: `#EXT-X-PRELOAD-HINT #${s7} for segment #${e13} has the same TYPE ${t4.type} as preload hint #${r4}`
                });
              }
            },
            "rendition-report"() {
              const e13 = Kt(p2.attributes);
              this.manifest.renditionReports = this.manifest.renditionReports || [], this.manifest.renditionReports.push(e13);
              const t4 = this.manifest.renditionReports.length - 1, i5 = ["LAST-MSN", "URI"];
              r3 && i5.push("LAST-PART"), this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${t4}`, p2.attributes, i5);
            },
            "part-inf"() {
              this.manifest.partInf = Kt(p2.attributes), this.warnOnMissingAttributes_("#EXT-X-PART-INF", p2.attributes, ["PART-TARGET"]), this.manifest.partInf.partTarget && (this.manifest.partTargetDuration = this.manifest.partInf.partTarget), Yt.call(this, this.manifest);
            },
            daterange() {
              this.manifest.dateRanges.push(Kt(p2.attributes));
              const e13 = this.manifest.dateRanges.length - 1;
              this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${e13}`, p2.attributes, ["ID", "START-DATE"]);
              const t4 = this.manifest.dateRanges[e13];
              t4.endDate && t4.startDate && new Date(t4.endDate) < new Date(t4.startDate) && this.trigger("warn", {
                message: "EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"
              }), t4.duration && t4.duration < 0 && this.trigger("warn", {
                message: "EXT-X-DATERANGE DURATION must not be negative"
              }), t4.plannedDuration && t4.plannedDuration < 0 && this.trigger("warn", {
                message: "EXT-X-DATERANGE PLANNED-DURATION must not be negative"
              });
              const i5 = !!t4.endOnNext;
              if (i5 && !t4.class && this.trigger("warn", {
                message: "EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"
              }), i5 && (t4.duration || t4.endDate) && this.trigger("warn", {
                message: "EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"
              }), t4.duration && t4.endDate) {
                const i6 = t4.startDate.getTime() + 1e3 * t4.duration;
                this.manifest.dateRanges[e13].endDate = new Date(i6);
              }
              if (c2[t4.id]) {
                for (const i6 in c2[t4.id]) if (t4[i6] && JSON.stringify(c2[t4.id][i6]) !== JSON.stringify(t4[i6])) {
                  this.trigger("warn", {
                    message: "EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"
                  });
                  break;
                }
                const e14 = this.manifest.dateRanges.findIndex((e15) => e15.id === t4.id);
                this.manifest.dateRanges[e14] = Ot(this.manifest.dateRanges[e14], t4), c2[t4.id] = Ot(c2[t4.id], t4), this.manifest.dateRanges.pop();
              } else c2[t4.id] = t4;
            },
            "independent-segments"() {
              this.manifest.independentSegments = true;
            },
            "content-steering"() {
              this.manifest.contentSteering = Kt(p2.attributes), this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING", p2.attributes, ["SERVER-URI"]);
            }
          }[p2.tagType] || a6).call(e12);
        },
        uri() {
          n6.uri = p2.uri, t3.push(n6), this.manifest.targetDuration && !("duration" in n6) && (this.trigger("warn", {
            message: "defaulting segment duration to the target duration"
          }), n6.duration = this.manifest.targetDuration), s6 && (n6.key = s6), n6.timeline = h, i4 && (n6.map = i4), u4 = 0, null !== this.lastProgramDateTime && (n6.programDateTime = this.lastProgramDateTime, this.lastProgramDateTime += 1e3 * n6.duration), n6 = {};
        },
        comment() {
        },
        custom() {
          p2.segment ? (n6.custom = n6.custom || {}, n6.custom[p2.customType] = p2.data) : (this.manifest.custom = this.manifest.custom || {}, this.manifest.custom[p2.customType] = p2.data);
        }
      })[p2.type].call(e12);
    });
  }
  warnOnMissingAttributes_(e12, t3, i4) {
    const s6 = [];
    i4.forEach(function(e13) {
      t3.hasOwnProperty(e13) || s6.push(e13);
    }), s6.length && this.trigger("warn", {
      message: `${e12} lacks required attribute(s): ${s6.join(", ")}`
    });
  }
  push(e12) {
    this.lineStream.push(e12);
  }
  end() {
    this.lineStream.push("\n"), this.manifest.dateRanges.length && null === this.lastProgramDateTime && this.trigger("warn", {
      message: "A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"
    }), this.lastProgramDateTime = null, this.trigger("end");
  }
  addParser(e12) {
    this.parseStream.addParser(e12);
  }
  addTagMapper(e12) {
    this.parseStream.addTagMapper(e12);
  }
};
var Jt;
var Zt;
var ei = {
  mp4: /^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,
  webm: /^(vp0?[89]|av0?1|opus|vorbis)/,
  ogg: /^(vp0?[89]|theora|flac|opus|vorbis)/,
  video: /^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,
  audio: /^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,
  text: /^(stpp.ttml.im1t)/,
  muxerVideo: /^(avc0?1)/,
  muxerAudio: /^(mp4a)/,
  muxerText: /a^/
};
var ti = ["video", "audio", "text"];
var ii = ["Video", "Audio", "Text"];
var si = function(e12) {
  return e12 ? e12.replace(/avc1\.(\d+)\.(\d+)/i, function(e13, t3, i4) {
    return "avc1." + ("00" + Number(t3).toString(16)).slice(-2) + "00" + ("00" + Number(i4).toString(16)).slice(-2);
  }) : e12;
};
var ni = function(e12) {
  void 0 === e12 && (e12 = "");
  var t3 = e12.split(","), i4 = [];
  return t3.forEach(function(e13) {
    var t4;
    e13 = e13.trim(), ti.forEach(function(s6) {
      var n6 = ei[s6].exec(e13.toLowerCase());
      if (n6 && !(n6.length <= 1)) {
        t4 = s6;
        var r3 = e13.substring(0, n6[1].length), a6 = e13.replace(r3, "");
        i4.push({
          type: r3,
          details: a6,
          mediaType: s6
        });
      }
    }), t4 || i4.push({
      type: e13,
      details: "",
      mediaType: "unknown"
    });
  }), i4;
};
var ri = function(e12, t3) {
  if (!e12.mediaGroups.AUDIO || !t3) return null;
  var i4 = e12.mediaGroups.AUDIO[t3];
  if (!i4) return null;
  for (var s6 in i4) {
    var n6 = i4[s6];
    if (n6.default && n6.playlists) return ni(n6.playlists[0].attributes.CODECS);
  }
  return null;
};
var ai = function(e12) {
  return void 0 === e12 && (e12 = ""), ei.audio.test(e12.trim().toLowerCase());
};
var oi = function(e12) {
  return void 0 === e12 && (e12 = ""), ei.text.test(e12.trim().toLowerCase());
};
var li = function(e12) {
  if (e12 && "string" == typeof e12) {
    var t3 = e12.toLowerCase().split(",").map(function(e13) {
      return si(e13.trim());
    }), i4 = "video";
    1 === t3.length && ai(t3[0]) ? i4 = "audio" : 1 === t3.length && oi(t3[0]) && (i4 = "application");
    var s6 = "mp4";
    return t3.every(function(e13) {
      return ei.mp4.test(e13);
    }) ? s6 = "mp4" : t3.every(function(e13) {
      return ei.webm.test(e13);
    }) ? s6 = "webm" : t3.every(function(e13) {
      return ei.ogg.test(e13);
    }) && (s6 = "ogg"), i4 + "/" + s6 + ';codecs="' + e12 + '"';
  }
};
var hi = function(e12) {
  return void 0 === e12 && (e12 = ""), g3.MediaSource && g3.MediaSource.isTypeSupported && g3.MediaSource.isTypeSupported(li(e12)) || false;
};
var di = function(e12) {
  return void 0 === e12 && (e12 = ""), e12.toLowerCase().split(",").every(function(e13) {
    e13 = e13.trim();
    for (var t3 = 0; t3 < ii.length; t3++) {
      var i4 = ii[t3];
      if (ei["muxer" + i4].test(e13)) return true;
    }
    return false;
  });
};
var ui = "mp4a.40.2";
var ci = "avc1.4d400d";
var pi = /^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;
var mi = /^application\/dash\+xml/i;
var gi = function(e12) {
  return pi.test(e12) ? "hls" : mi.test(e12) ? "dash" : "application/vnd.videojs.vhs+json" === e12 ? "vhs-json" : null;
};
var fi = function(e12) {
  return e12.toString(2).length;
};
var yi = function(e12) {
  return Math.ceil(fi(e12) / 8);
};
var _i = function(e12) {
  return "function" === ArrayBuffer.isView ? ArrayBuffer.isView(e12) : e12 && e12.buffer instanceof ArrayBuffer;
};
var vi = function(e12) {
  return _i(e12);
};
var bi = function(e12) {
  return e12 instanceof Uint8Array ? e12 : (Array.isArray(e12) || vi(e12) || e12 instanceof ArrayBuffer || (e12 = "number" != typeof e12 || "number" == typeof e12 && e12 != e12 ? 0 : [e12]), new Uint8Array(e12 && e12.buffer || e12, e12 && e12.byteOffset || 0, e12 && e12.byteLength || 0));
};
var Ti = g3.BigInt || Number;
var Si = [Ti("0x1"), Ti("0x100"), Ti("0x10000"), Ti("0x1000000"), Ti("0x100000000"), Ti("0x10000000000"), Ti("0x1000000000000"), Ti("0x100000000000000"), Ti("0x10000000000000000")];
Jt = new Uint16Array([65484]), 255 === (Zt = new Uint8Array(Jt.buffer, Jt.byteOffset, Jt.byteLength))[0] || Zt[0];
var Ei = function(e12, t3) {
  var i4 = void 0 === t3 ? {} : t3, s6 = i4.signed, n6 = void 0 !== s6 && s6, r3 = i4.le, a6 = void 0 !== r3 && r3;
  e12 = bi(e12);
  var o4 = a6 ? "reduce" : "reduceRight", l5 = (e12[o4] ? e12[o4] : Array.prototype[o4]).call(e12, function(t4, i5, s7) {
    var n7 = a6 ? s7 : Math.abs(s7 + 1 - e12.length);
    return t4 + Ti(i5) * Si[n7];
  }, Ti(0));
  if (n6) {
    var h = Si[e12.length] / Ti(2) - Ti(1);
    (l5 = Ti(l5)) > h && (l5 -= h, l5 -= h, l5 -= Ti(2));
  }
  return Number(l5);
};
var wi = function(e12, t3) {
  var i4 = {}.le, s6 = void 0 !== i4 && i4;
  ("bigint" != typeof e12 && "number" != typeof e12 || "number" == typeof e12 && e12 != e12) && (e12 = 0), e12 = Ti(e12);
  for (var n6 = yi(e12), r3 = new Uint8Array(new ArrayBuffer(n6)), a6 = 0; a6 < n6; a6++) {
    var o4 = s6 ? a6 : Math.abs(a6 + 1 - r3.length);
    r3[o4] = Number(e12 / Si[a6] & Ti(255)), e12 < 0 && (r3[o4] = Math.abs(~r3[o4]), r3[o4] -= 0 === a6 ? 1 : 2);
  }
  return r3;
};
var Ci = function(e12, t3) {
  if ("string" != typeof e12 && e12 && "function" == typeof e12.toString && (e12 = e12.toString()), "string" != typeof e12) return new Uint8Array();
  t3 || (e12 = unescape(encodeURIComponent(e12)));
  for (var i4 = new Uint8Array(e12.length), s6 = 0; s6 < e12.length; s6++) i4[s6] = e12.charCodeAt(s6);
  return i4;
};
var ki = function() {
  for (var e12 = arguments.length, t3 = new Array(e12), i4 = 0; i4 < e12; i4++) t3[i4] = arguments[i4];
  if (t3 = t3.filter(function(e13) {
    return e13 && (e13.byteLength || e13.length) && "string" != typeof e13;
  }), t3.length <= 1) return bi(t3[0]);
  var s6 = t3.reduce(function(e13, t4, i5) {
    return e13 + (t4.byteLength || t4.length);
  }, 0), n6 = new Uint8Array(s6), r3 = 0;
  return t3.forEach(function(e13) {
    e13 = bi(e13), n6.set(e13, r3), r3 += e13.byteLength;
  }), n6;
};
var xi = function(e12, t3, i4) {
  var s6 = void 0 === i4 ? {} : i4, n6 = s6.offset, r3 = void 0 === n6 ? 0 : n6, a6 = s6.mask, o4 = void 0 === a6 ? [] : a6;
  e12 = bi(e12);
  var l5 = (t3 = bi(t3)).every ? t3.every : Array.prototype.every;
  return t3.length && e12.length - r3 >= t3.length && l5.call(t3, function(t4, i5) {
    return t4 === (o4[i5] ? o4[i5] & e12[r3 + i5] : e12[r3 + i5]);
  });
};
var Ii = function(e12, t3, i4) {
  t3.forEach(function(t4) {
    for (var s6 in e12.mediaGroups[t4]) for (var n6 in e12.mediaGroups[t4][s6]) {
      var r3 = e12.mediaGroups[t4][s6][n6];
      i4(r3, t4, s6, n6);
    }
  });
};
var Ai = function(e12) {
  return g3.atob ? g3.atob(e12) : Buffer.from(e12, "base64").toString("binary");
};
function Di(e12) {
  for (var t3 = Ai(e12), i4 = new Uint8Array(t3.length), s6 = 0; s6 < t3.length; s6++) i4[s6] = t3.charCodeAt(s6);
  return i4;
}
var Pi = {};
var Li = {};
function Oi(e12, t3, i4) {
  if (void 0 === i4 && (i4 = Array.prototype), e12 && "function" == typeof i4.find) return i4.find.call(e12, t3);
  for (var s6 = 0; s6 < e12.length; s6++) if (Object.prototype.hasOwnProperty.call(e12, s6)) {
    var n6 = e12[s6];
    if (t3.call(void 0, n6, s6, e12)) return n6;
  }
}
function Ni(e12, t3) {
  return void 0 === t3 && (t3 = Object), t3 && "function" == typeof t3.freeze ? t3.freeze(e12) : e12;
}
function Ri(e12, t3) {
  if (null === e12 || "object" != typeof e12) throw new TypeError("target is not an object");
  for (var i4 in t3) Object.prototype.hasOwnProperty.call(t3, i4) && (e12[i4] = t3[i4]);
  return e12;
}
var Mi = Ni({
  HTML: "text/html",
  isHTML: function(e12) {
    return e12 === Mi.HTML;
  },
  XML_APPLICATION: "application/xml",
  XML_TEXT: "text/xml",
  XML_XHTML_APPLICATION: "application/xhtml+xml",
  XML_SVG_IMAGE: "image/svg+xml"
});
var Ui = Ni({
  HTML: "http://www.w3.org/1999/xhtml",
  isHTML: function(e12) {
    return e12 === Ui.HTML;
  },
  SVG: "http://www.w3.org/2000/svg",
  XML: "http://www.w3.org/XML/1998/namespace",
  XMLNS: "http://www.w3.org/2000/xmlns/"
});
Li.assign = Ri, Li.find = Oi, Li.freeze = Ni, Li.MIME_TYPE = Mi, Li.NAMESPACE = Ui;
var Bi = Li;
var Fi = Bi.find;
var qi = Bi.NAMESPACE;
function ji(e12) {
  return "" !== e12;
}
function $i(e12) {
  return e12 ? e12.split(/[\t\n\f\r ]+/).filter(ji) : [];
}
function Hi(e12, t3) {
  return e12.hasOwnProperty(t3) || (e12[t3] = true), e12;
}
function Vi(e12) {
  if (!e12) return [];
  var t3 = $i(e12);
  return Object.keys(t3.reduce(Hi, {}));
}
function zi(e12) {
  return function(t3) {
    return e12 && -1 !== e12.indexOf(t3);
  };
}
function Wi(e12, t3) {
  for (var i4 in e12) Object.prototype.hasOwnProperty.call(e12, i4) && (t3[i4] = e12[i4]);
}
function Gi(e12, t3) {
  var i4 = e12.prototype;
  if (!(i4 instanceof t3)) {
    let s6 = function() {
    };
    s6.prototype = t3.prototype, Wi(i4, s6 = new s6()), e12.prototype = i4 = s6;
  }
  i4.constructor != e12 && ("function" != typeof e12 && console.error("unknown Class:" + e12), i4.constructor = e12);
}
var Xi = {};
var Ki = Xi.ELEMENT_NODE = 1;
var Yi = Xi.ATTRIBUTE_NODE = 2;
var Qi = Xi.TEXT_NODE = 3;
var Ji = Xi.CDATA_SECTION_NODE = 4;
var Zi = Xi.ENTITY_REFERENCE_NODE = 5;
var es = Xi.ENTITY_NODE = 6;
var ts = Xi.PROCESSING_INSTRUCTION_NODE = 7;
var is = Xi.COMMENT_NODE = 8;
var ss = Xi.DOCUMENT_NODE = 9;
var ns = Xi.DOCUMENT_TYPE_NODE = 10;
var rs = Xi.DOCUMENT_FRAGMENT_NODE = 11;
var as = Xi.NOTATION_NODE = 12;
var os = {};
var ls = {};
os.INDEX_SIZE_ERR = (ls[1] = "Index size error", 1), os.DOMSTRING_SIZE_ERR = (ls[2] = "DOMString size error", 2);
var hs = os.HIERARCHY_REQUEST_ERR = (ls[3] = "Hierarchy request error", 3);
os.WRONG_DOCUMENT_ERR = (ls[4] = "Wrong document", 4), os.INVALID_CHARACTER_ERR = (ls[5] = "Invalid character", 5), os.NO_DATA_ALLOWED_ERR = (ls[6] = "No data allowed", 6), os.NO_MODIFICATION_ALLOWED_ERR = (ls[7] = "No modification allowed", 7);
var ds = os.NOT_FOUND_ERR = (ls[8] = "Not found", 8);
os.NOT_SUPPORTED_ERR = (ls[9] = "Not supported", 9);
var us = os.INUSE_ATTRIBUTE_ERR = (ls[10] = "Attribute in use", 10);
function cs(e12, t3) {
  if (t3 instanceof Error) var i4 = t3;
  else i4 = this, Error.call(this, ls[e12]), this.message = ls[e12], Error.captureStackTrace && Error.captureStackTrace(this, cs);
  return i4.code = e12, t3 && (this.message = this.message + ": " + t3), i4;
}
function ps() {
}
function ms(e12, t3) {
  this._node = e12, this._refresh = t3, gs(this);
}
function gs(e12) {
  var t3 = e12._node._inc || e12._node.ownerDocument._inc;
  if (e12._inc !== t3) {
    var i4 = e12._refresh(e12._node);
    if (on(e12, "length", i4.length), !e12.$$length || i4.length < e12.$$length) for (var s6 = i4.length; s6 in e12; s6++) Object.prototype.hasOwnProperty.call(e12, s6) && delete e12[s6];
    Wi(i4, e12), e12._inc = t3;
  }
}
function fs() {
}
function ys(e12, t3) {
  for (var i4 = e12.length; i4--; ) if (e12[i4] === t3) return i4;
}
function _s(e12, t3, i4, s6) {
  if (s6 ? t3[ys(t3, s6)] = i4 : t3[t3.length++] = i4, e12) {
    i4.ownerElement = e12;
    var n6 = e12.ownerDocument;
    n6 && (s6 && ks(n6, e12, s6), Cs(n6, e12, i4));
  }
}
function vs(e12, t3, i4) {
  var s6 = ys(t3, i4);
  if (!(s6 >= 0)) throw new cs(ds, new Error(e12.tagName + "@" + i4));
  for (var n6 = t3.length - 1; s6 < n6; ) t3[s6] = t3[++s6];
  if (t3.length = n6, e12) {
    var r3 = e12.ownerDocument;
    r3 && (ks(r3, e12, i4), i4.ownerElement = null);
  }
}
function bs() {
}
function Ts() {
}
function Ss(e12) {
  return ("<" == e12 ? "&lt;" : ">" == e12 && "&gt;") || "&" == e12 && "&amp;" || '"' == e12 && "&quot;" || "&#" + e12.charCodeAt() + ";";
}
function Es(e12, t3) {
  if (t3(e12)) return true;
  if (e12 = e12.firstChild) do {
    if (Es(e12, t3)) return true;
  } while (e12 = e12.nextSibling);
}
function ws() {
  this.ownerDocument = this;
}
function Cs(e12, t3, i4) {
  e12 && e12._inc++, i4.namespaceURI === qi.XMLNS && (t3._nsMap[i4.prefix ? i4.localName : ""] = i4.value);
}
function ks(e12, t3, i4, s6) {
  e12 && e12._inc++, i4.namespaceURI === qi.XMLNS && delete t3._nsMap[i4.prefix ? i4.localName : ""];
}
function xs(e12, t3, i4) {
  if (e12 && e12._inc) {
    e12._inc++;
    var s6 = t3.childNodes;
    if (i4) s6[s6.length++] = i4;
    else {
      for (var n6 = t3.firstChild, r3 = 0; n6; ) s6[r3++] = n6, n6 = n6.nextSibling;
      s6.length = r3, delete s6[s6.length];
    }
  }
}
function Is(e12, t3) {
  var i4 = t3.previousSibling, s6 = t3.nextSibling;
  return i4 ? i4.nextSibling = s6 : e12.firstChild = s6, s6 ? s6.previousSibling = i4 : e12.lastChild = i4, t3.parentNode = null, t3.previousSibling = null, t3.nextSibling = null, xs(e12.ownerDocument, e12), t3;
}
function As(e12) {
  return e12 && (e12.nodeType === Ts.DOCUMENT_NODE || e12.nodeType === Ts.DOCUMENT_FRAGMENT_NODE || e12.nodeType === Ts.ELEMENT_NODE);
}
function Ds(e12) {
  return e12 && (Ls(e12) || Os(e12) || Ps(e12) || e12.nodeType === Ts.DOCUMENT_FRAGMENT_NODE || e12.nodeType === Ts.COMMENT_NODE || e12.nodeType === Ts.PROCESSING_INSTRUCTION_NODE);
}
function Ps(e12) {
  return e12 && e12.nodeType === Ts.DOCUMENT_TYPE_NODE;
}
function Ls(e12) {
  return e12 && e12.nodeType === Ts.ELEMENT_NODE;
}
function Os(e12) {
  return e12 && e12.nodeType === Ts.TEXT_NODE;
}
function Ns(e12, t3) {
  var i4 = e12.childNodes || [];
  if (Fi(i4, Ls) || Ps(t3)) return false;
  var s6 = Fi(i4, Ps);
  return !(t3 && s6 && i4.indexOf(s6) > i4.indexOf(t3));
}
function Rs(e12, t3) {
  var i4 = e12.childNodes || [];
  function s6(e13) {
    return Ls(e13) && e13 !== t3;
  }
  if (Fi(i4, s6)) return false;
  var n6 = Fi(i4, Ps);
  return !(t3 && n6 && i4.indexOf(n6) > i4.indexOf(t3));
}
function Ms(e12, t3, i4) {
  if (!As(e12)) throw new cs(hs, "Unexpected parent node type " + e12.nodeType);
  if (i4 && i4.parentNode !== e12) throw new cs(ds, "child not in parent");
  if (!Ds(t3) || Ps(t3) && e12.nodeType !== Ts.DOCUMENT_NODE) throw new cs(hs, "Unexpected node type " + t3.nodeType + " for parent node type " + e12.nodeType);
}
function Us(e12, t3, i4) {
  var s6 = e12.childNodes || [], n6 = t3.childNodes || [];
  if (t3.nodeType === Ts.DOCUMENT_FRAGMENT_NODE) {
    var r3 = n6.filter(Ls);
    if (r3.length > 1 || Fi(n6, Os)) throw new cs(hs, "More than one element or text in fragment");
    if (1 === r3.length && !Ns(e12, i4)) throw new cs(hs, "Element in fragment can not be inserted before doctype");
  }
  if (Ls(t3) && !Ns(e12, i4)) throw new cs(hs, "Only one element can be added and only after doctype");
  if (Ps(t3)) {
    if (Fi(s6, Ps)) throw new cs(hs, "Only one doctype is allowed");
    var a6 = Fi(s6, Ls);
    if (i4 && s6.indexOf(a6) < s6.indexOf(i4)) throw new cs(hs, "Doctype can only be inserted before an element");
    if (!i4 && a6) throw new cs(hs, "Doctype can not be appended since element is present");
  }
}
function Bs(e12, t3, i4) {
  var s6 = e12.childNodes || [], n6 = t3.childNodes || [];
  if (t3.nodeType === Ts.DOCUMENT_FRAGMENT_NODE) {
    var r3 = n6.filter(Ls);
    if (r3.length > 1 || Fi(n6, Os)) throw new cs(hs, "More than one element or text in fragment");
    if (1 === r3.length && !Rs(e12, i4)) throw new cs(hs, "Element in fragment can not be inserted before doctype");
  }
  if (Ls(t3) && !Rs(e12, i4)) throw new cs(hs, "Only one element can be added and only after doctype");
  if (Ps(t3)) {
    let o4 = function(e13) {
      return Ps(e13) && e13 !== i4;
    };
    if (Fi(s6, o4)) throw new cs(hs, "Only one doctype is allowed");
    var a6 = Fi(s6, Ls);
    if (i4 && s6.indexOf(a6) < s6.indexOf(i4)) throw new cs(hs, "Doctype can only be inserted before an element");
  }
}
function Fs(e12, t3, i4, s6) {
  Ms(e12, t3, i4), e12.nodeType === Ts.DOCUMENT_NODE && (s6 || Us)(e12, t3, i4);
  var n6 = t3.parentNode;
  if (n6 && n6.removeChild(t3), t3.nodeType === rs) {
    var r3 = t3.firstChild;
    if (null == r3) return t3;
    var a6 = t3.lastChild;
  } else r3 = a6 = t3;
  var o4 = i4 ? i4.previousSibling : e12.lastChild;
  r3.previousSibling = o4, a6.nextSibling = i4, o4 ? o4.nextSibling = r3 : e12.firstChild = r3, null == i4 ? e12.lastChild = a6 : i4.previousSibling = a6;
  do {
    r3.parentNode = e12;
  } while (r3 !== a6 && (r3 = r3.nextSibling));
  return xs(e12.ownerDocument || e12, e12), t3.nodeType == rs && (t3.firstChild = t3.lastChild = null), t3;
}
function qs(e12, t3) {
  return t3.parentNode && t3.parentNode.removeChild(t3), t3.parentNode = e12, t3.previousSibling = e12.lastChild, t3.nextSibling = null, t3.previousSibling ? t3.previousSibling.nextSibling = t3 : e12.firstChild = t3, e12.lastChild = t3, xs(e12.ownerDocument, e12, t3), t3;
}
function js() {
  this._nsMap = {};
}
function $s() {
}
function Hs() {
}
function Vs() {
}
function zs() {
}
function Ws() {
}
function Gs() {
}
function Xs() {
}
function Ks() {
}
function Ys() {
}
function Qs() {
}
function Js() {
}
function Zs() {
}
function en(e12, t3) {
  var i4 = [], s6 = 9 == this.nodeType && this.documentElement || this, n6 = s6.prefix, r3 = s6.namespaceURI;
  if (r3 && null == n6 && null == (n6 = s6.lookupPrefix(r3))) var a6 = [{
    namespace: r3,
    prefix: null
  }];
  return nn(this, i4, e12, t3, a6), i4.join("");
}
function tn(e12, t3, i4) {
  var s6 = e12.prefix || "", n6 = e12.namespaceURI;
  if (!n6) return false;
  if ("xml" === s6 && n6 === qi.XML || n6 === qi.XMLNS) return false;
  for (var r3 = i4.length; r3--; ) {
    var a6 = i4[r3];
    if (a6.prefix === s6) return a6.namespace !== n6;
  }
  return true;
}
function sn(e12, t3, i4) {
  e12.push(" ", t3, '="', i4.replace(/[<>&"\t\n\r]/g, Ss), '"');
}
function nn(e12, t3, i4, s6, n6) {
  if (n6 || (n6 = []), s6) {
    if (!(e12 = s6(e12))) return;
    if ("string" == typeof e12) return void t3.push(e12);
  }
  switch (e12.nodeType) {
    case Ki:
      var r3 = e12.attributes, a6 = r3.length, o4 = e12.firstChild, l5 = e12.tagName, h = l5;
      if (!(i4 = qi.isHTML(e12.namespaceURI) || i4) && !e12.prefix && e12.namespaceURI) {
        for (var d4, u4 = 0; u4 < r3.length; u4++) if ("xmlns" === r3.item(u4).name) {
          d4 = r3.item(u4).value;
          break;
        }
        if (!d4) for (var c2 = n6.length - 1; c2 >= 0; c2--) {
          if ("" === (p2 = n6[c2]).prefix && p2.namespace === e12.namespaceURI) {
            d4 = p2.namespace;
            break;
          }
        }
        if (d4 !== e12.namespaceURI) for (c2 = n6.length - 1; c2 >= 0; c2--) {
          var p2;
          if ((p2 = n6[c2]).namespace === e12.namespaceURI) {
            p2.prefix && (h = p2.prefix + ":" + l5);
            break;
          }
        }
      }
      t3.push("<", h);
      for (var m6 = 0; m6 < a6; m6++) {
        "xmlns" == (g4 = r3.item(m6)).prefix ? n6.push({
          prefix: g4.localName,
          namespace: g4.value
        }) : "xmlns" == g4.nodeName && n6.push({
          prefix: "",
          namespace: g4.value
        });
      }
      for (m6 = 0; m6 < a6; m6++) {
        var g4, f6, y4;
        if (tn(g4 = r3.item(m6), i4, n6)) sn(t3, (f6 = g4.prefix || "") ? "xmlns:" + f6 : "xmlns", y4 = g4.namespaceURI), n6.push({
          prefix: f6,
          namespace: y4
        });
        nn(g4, t3, i4, s6, n6);
      }
      if (l5 === h && tn(e12, i4, n6)) sn(t3, (f6 = e12.prefix || "") ? "xmlns:" + f6 : "xmlns", y4 = e12.namespaceURI), n6.push({
        prefix: f6,
        namespace: y4
      });
      if (o4 || i4 && !/^(?:meta|link|img|br|hr|input)$/i.test(l5)) {
        if (t3.push(">"), i4 && /^script$/i.test(l5)) for (; o4; ) o4.data ? t3.push(o4.data) : nn(o4, t3, i4, s6, n6.slice()), o4 = o4.nextSibling;
        else for (; o4; ) nn(o4, t3, i4, s6, n6.slice()), o4 = o4.nextSibling;
        t3.push("</", h, ">");
      } else t3.push("/>");
      return;
    case ss:
    case rs:
      for (o4 = e12.firstChild; o4; ) nn(o4, t3, i4, s6, n6.slice()), o4 = o4.nextSibling;
      return;
    case Yi:
      return sn(t3, e12.name, e12.value);
    case Qi:
      return t3.push(e12.data.replace(/[<&>]/g, Ss));
    case Ji:
      return t3.push("<![CDATA[", e12.data, "]]>");
    case is:
      return t3.push("<!--", e12.data, "-->");
    case ns:
      var _3 = e12.publicId, v3 = e12.systemId;
      if (t3.push("<!DOCTYPE ", e12.name), _3) t3.push(" PUBLIC ", _3), v3 && "." != v3 && t3.push(" ", v3), t3.push(">");
      else if (v3 && "." != v3) t3.push(" SYSTEM ", v3, ">");
      else {
        var b2 = e12.internalSubset;
        b2 && t3.push(" [", b2, "]"), t3.push(">");
      }
      return;
    case ts:
      return t3.push("<?", e12.target, " ", e12.data, "?>");
    case Zi:
      return t3.push("&", e12.nodeName, ";");
    default:
      t3.push("??", e12.nodeName);
  }
}
function rn(e12, t3, i4) {
  var s6;
  switch (t3.nodeType) {
    case Ki:
      (s6 = t3.cloneNode(false)).ownerDocument = e12;
    case rs:
      break;
    case Yi:
      i4 = true;
  }
  if (s6 || (s6 = t3.cloneNode(false)), s6.ownerDocument = e12, s6.parentNode = null, i4) for (var n6 = t3.firstChild; n6; ) s6.appendChild(rn(e12, n6, i4)), n6 = n6.nextSibling;
  return s6;
}
function an(e12, t3, i4) {
  var s6 = new t3.constructor();
  for (var n6 in t3) if (Object.prototype.hasOwnProperty.call(t3, n6)) {
    var r3 = t3[n6];
    "object" != typeof r3 && r3 != s6[n6] && (s6[n6] = r3);
  }
  switch (t3.childNodes && (s6.childNodes = new ps()), s6.ownerDocument = e12, s6.nodeType) {
    case Ki:
      var a6 = t3.attributes, o4 = s6.attributes = new fs(), l5 = a6.length;
      o4._ownerElement = s6;
      for (var h = 0; h < l5; h++) s6.setAttributeNode(an(e12, a6.item(h), true));
      break;
    case Yi:
      i4 = true;
  }
  if (i4) for (var d4 = t3.firstChild; d4; ) s6.appendChild(an(e12, d4, i4)), d4 = d4.nextSibling;
  return s6;
}
function on(e12, t3, i4) {
  e12[t3] = i4;
}
os.INVALID_STATE_ERR = (ls[11] = "Invalid state", 11), os.SYNTAX_ERR = (ls[12] = "Syntax error", 12), os.INVALID_MODIFICATION_ERR = (ls[13] = "Invalid modification", 13), os.NAMESPACE_ERR = (ls[14] = "Invalid namespace", 14), os.INVALID_ACCESS_ERR = (ls[15] = "Invalid access", 15), cs.prototype = Error.prototype, Wi(os, cs), ps.prototype = {
  length: 0,
  item: function(e12) {
    return e12 >= 0 && e12 < this.length ? this[e12] : null;
  },
  toString: function(e12, t3) {
    for (var i4 = [], s6 = 0; s6 < this.length; s6++) nn(this[s6], i4, e12, t3);
    return i4.join("");
  },
  filter: function(e12) {
    return Array.prototype.filter.call(this, e12);
  },
  indexOf: function(e12) {
    return Array.prototype.indexOf.call(this, e12);
  }
}, ms.prototype.item = function(e12) {
  return gs(this), this[e12] || null;
}, Gi(ms, ps), fs.prototype = {
  length: 0,
  item: ps.prototype.item,
  getNamedItem: function(e12) {
    for (var t3 = this.length; t3--; ) {
      var i4 = this[t3];
      if (i4.nodeName == e12) return i4;
    }
  },
  setNamedItem: function(e12) {
    var t3 = e12.ownerElement;
    if (t3 && t3 != this._ownerElement) throw new cs(us);
    var i4 = this.getNamedItem(e12.nodeName);
    return _s(this._ownerElement, this, e12, i4), i4;
  },
  setNamedItemNS: function(e12) {
    var t3, i4 = e12.ownerElement;
    if (i4 && i4 != this._ownerElement) throw new cs(us);
    return t3 = this.getNamedItemNS(e12.namespaceURI, e12.localName), _s(this._ownerElement, this, e12, t3), t3;
  },
  removeNamedItem: function(e12) {
    var t3 = this.getNamedItem(e12);
    return vs(this._ownerElement, this, t3), t3;
  },
  removeNamedItemNS: function(e12, t3) {
    var i4 = this.getNamedItemNS(e12, t3);
    return vs(this._ownerElement, this, i4), i4;
  },
  getNamedItemNS: function(e12, t3) {
    for (var i4 = this.length; i4--; ) {
      var s6 = this[i4];
      if (s6.localName == t3 && s6.namespaceURI == e12) return s6;
    }
    return null;
  }
}, bs.prototype = {
  hasFeature: function(e12, t3) {
    return true;
  },
  createDocument: function(e12, t3, i4) {
    var s6 = new ws();
    if (s6.implementation = this, s6.childNodes = new ps(), s6.doctype = i4 || null, i4 && s6.appendChild(i4), t3) {
      var n6 = s6.createElementNS(e12, t3);
      s6.appendChild(n6);
    }
    return s6;
  },
  createDocumentType: function(e12, t3, i4) {
    var s6 = new Gs();
    return s6.name = e12, s6.nodeName = e12, s6.publicId = t3 || "", s6.systemId = i4 || "", s6;
  }
}, Ts.prototype = {
  firstChild: null,
  lastChild: null,
  previousSibling: null,
  nextSibling: null,
  attributes: null,
  parentNode: null,
  childNodes: null,
  ownerDocument: null,
  nodeValue: null,
  namespaceURI: null,
  prefix: null,
  localName: null,
  insertBefore: function(e12, t3) {
    return Fs(this, e12, t3);
  },
  replaceChild: function(e12, t3) {
    Fs(this, e12, t3, Bs), t3 && this.removeChild(t3);
  },
  removeChild: function(e12) {
    return Is(this, e12);
  },
  appendChild: function(e12) {
    return this.insertBefore(e12, null);
  },
  hasChildNodes: function() {
    return null != this.firstChild;
  },
  cloneNode: function(e12) {
    return an(this.ownerDocument || this, this, e12);
  },
  normalize: function() {
    for (var e12 = this.firstChild; e12; ) {
      var t3 = e12.nextSibling;
      t3 && t3.nodeType == Qi && e12.nodeType == Qi ? (this.removeChild(t3), e12.appendData(t3.data)) : (e12.normalize(), e12 = t3);
    }
  },
  isSupported: function(e12, t3) {
    return this.ownerDocument.implementation.hasFeature(e12, t3);
  },
  hasAttributes: function() {
    return this.attributes.length > 0;
  },
  lookupPrefix: function(e12) {
    for (var t3 = this; t3; ) {
      var i4 = t3._nsMap;
      if (i4) {
        for (var s6 in i4) if (Object.prototype.hasOwnProperty.call(i4, s6) && i4[s6] === e12) return s6;
      }
      t3 = t3.nodeType == Yi ? t3.ownerDocument : t3.parentNode;
    }
    return null;
  },
  lookupNamespaceURI: function(e12) {
    for (var t3 = this; t3; ) {
      var i4 = t3._nsMap;
      if (i4 && Object.prototype.hasOwnProperty.call(i4, e12)) return i4[e12];
      t3 = t3.nodeType == Yi ? t3.ownerDocument : t3.parentNode;
    }
    return null;
  },
  isDefaultNamespace: function(e12) {
    return null == this.lookupPrefix(e12);
  }
}, Wi(Xi, Ts), Wi(Xi, Ts.prototype), ws.prototype = {
  nodeName: "#document",
  nodeType: ss,
  doctype: null,
  documentElement: null,
  _inc: 1,
  insertBefore: function(e12, t3) {
    if (e12.nodeType == rs) {
      for (var i4 = e12.firstChild; i4; ) {
        var s6 = i4.nextSibling;
        this.insertBefore(i4, t3), i4 = s6;
      }
      return e12;
    }
    return Fs(this, e12, t3), e12.ownerDocument = this, null === this.documentElement && e12.nodeType === Ki && (this.documentElement = e12), e12;
  },
  removeChild: function(e12) {
    return this.documentElement == e12 && (this.documentElement = null), Is(this, e12);
  },
  replaceChild: function(e12, t3) {
    Fs(this, e12, t3, Bs), e12.ownerDocument = this, t3 && this.removeChild(t3), Ls(e12) && (this.documentElement = e12);
  },
  importNode: function(e12, t3) {
    return rn(this, e12, t3);
  },
  getElementById: function(e12) {
    var t3 = null;
    return Es(this.documentElement, function(i4) {
      if (i4.nodeType == Ki && i4.getAttribute("id") == e12) return t3 = i4, true;
    }), t3;
  },
  getElementsByClassName: function(e12) {
    var t3 = Vi(e12);
    return new ms(this, function(i4) {
      var s6 = [];
      return t3.length > 0 && Es(i4.documentElement, function(n6) {
        if (n6 !== i4 && n6.nodeType === Ki) {
          var r3 = n6.getAttribute("class");
          if (r3) {
            var a6 = e12 === r3;
            if (!a6) {
              var o4 = Vi(r3);
              a6 = t3.every(zi(o4));
            }
            a6 && s6.push(n6);
          }
        }
      }), s6;
    });
  },
  createElement: function(e12) {
    var t3 = new js();
    return t3.ownerDocument = this, t3.nodeName = e12, t3.tagName = e12, t3.localName = e12, t3.childNodes = new ps(), (t3.attributes = new fs())._ownerElement = t3, t3;
  },
  createDocumentFragment: function() {
    var e12 = new Qs();
    return e12.ownerDocument = this, e12.childNodes = new ps(), e12;
  },
  createTextNode: function(e12) {
    var t3 = new Vs();
    return t3.ownerDocument = this, t3.appendData(e12), t3;
  },
  createComment: function(e12) {
    var t3 = new zs();
    return t3.ownerDocument = this, t3.appendData(e12), t3;
  },
  createCDATASection: function(e12) {
    var t3 = new Ws();
    return t3.ownerDocument = this, t3.appendData(e12), t3;
  },
  createProcessingInstruction: function(e12, t3) {
    var i4 = new Js();
    return i4.ownerDocument = this, i4.tagName = i4.nodeName = i4.target = e12, i4.nodeValue = i4.data = t3, i4;
  },
  createAttribute: function(e12) {
    var t3 = new $s();
    return t3.ownerDocument = this, t3.name = e12, t3.nodeName = e12, t3.localName = e12, t3.specified = true, t3;
  },
  createEntityReference: function(e12) {
    var t3 = new Ys();
    return t3.ownerDocument = this, t3.nodeName = e12, t3;
  },
  createElementNS: function(e12, t3) {
    var i4 = new js(), s6 = t3.split(":"), n6 = i4.attributes = new fs();
    return i4.childNodes = new ps(), i4.ownerDocument = this, i4.nodeName = t3, i4.tagName = t3, i4.namespaceURI = e12, 2 == s6.length ? (i4.prefix = s6[0], i4.localName = s6[1]) : i4.localName = t3, n6._ownerElement = i4, i4;
  },
  createAttributeNS: function(e12, t3) {
    var i4 = new $s(), s6 = t3.split(":");
    return i4.ownerDocument = this, i4.nodeName = t3, i4.name = t3, i4.namespaceURI = e12, i4.specified = true, 2 == s6.length ? (i4.prefix = s6[0], i4.localName = s6[1]) : i4.localName = t3, i4;
  }
}, Gi(ws, Ts), js.prototype = {
  nodeType: Ki,
  hasAttribute: function(e12) {
    return null != this.getAttributeNode(e12);
  },
  getAttribute: function(e12) {
    var t3 = this.getAttributeNode(e12);
    return t3 && t3.value || "";
  },
  getAttributeNode: function(e12) {
    return this.attributes.getNamedItem(e12);
  },
  setAttribute: function(e12, t3) {
    var i4 = this.ownerDocument.createAttribute(e12);
    i4.value = i4.nodeValue = "" + t3, this.setAttributeNode(i4);
  },
  removeAttribute: function(e12) {
    var t3 = this.getAttributeNode(e12);
    t3 && this.removeAttributeNode(t3);
  },
  appendChild: function(e12) {
    return e12.nodeType === rs ? this.insertBefore(e12, null) : qs(this, e12);
  },
  setAttributeNode: function(e12) {
    return this.attributes.setNamedItem(e12);
  },
  setAttributeNodeNS: function(e12) {
    return this.attributes.setNamedItemNS(e12);
  },
  removeAttributeNode: function(e12) {
    return this.attributes.removeNamedItem(e12.nodeName);
  },
  removeAttributeNS: function(e12, t3) {
    var i4 = this.getAttributeNodeNS(e12, t3);
    i4 && this.removeAttributeNode(i4);
  },
  hasAttributeNS: function(e12, t3) {
    return null != this.getAttributeNodeNS(e12, t3);
  },
  getAttributeNS: function(e12, t3) {
    var i4 = this.getAttributeNodeNS(e12, t3);
    return i4 && i4.value || "";
  },
  setAttributeNS: function(e12, t3, i4) {
    var s6 = this.ownerDocument.createAttributeNS(e12, t3);
    s6.value = s6.nodeValue = "" + i4, this.setAttributeNode(s6);
  },
  getAttributeNodeNS: function(e12, t3) {
    return this.attributes.getNamedItemNS(e12, t3);
  },
  getElementsByTagName: function(e12) {
    return new ms(this, function(t3) {
      var i4 = [];
      return Es(t3, function(s6) {
        s6 === t3 || s6.nodeType != Ki || "*" !== e12 && s6.tagName != e12 || i4.push(s6);
      }), i4;
    });
  },
  getElementsByTagNameNS: function(e12, t3) {
    return new ms(this, function(i4) {
      var s6 = [];
      return Es(i4, function(n6) {
        n6 === i4 || n6.nodeType !== Ki || "*" !== e12 && n6.namespaceURI !== e12 || "*" !== t3 && n6.localName != t3 || s6.push(n6);
      }), s6;
    });
  }
}, ws.prototype.getElementsByTagName = js.prototype.getElementsByTagName, ws.prototype.getElementsByTagNameNS = js.prototype.getElementsByTagNameNS, Gi(js, Ts), $s.prototype.nodeType = Yi, Gi($s, Ts), Hs.prototype = {
  data: "",
  substringData: function(e12, t3) {
    return this.data.substring(e12, e12 + t3);
  },
  appendData: function(e12) {
    e12 = this.data + e12, this.nodeValue = this.data = e12, this.length = e12.length;
  },
  insertData: function(e12, t3) {
    this.replaceData(e12, 0, t3);
  },
  appendChild: function(e12) {
    throw new Error(ls[hs]);
  },
  deleteData: function(e12, t3) {
    this.replaceData(e12, t3, "");
  },
  replaceData: function(e12, t3, i4) {
    i4 = this.data.substring(0, e12) + i4 + this.data.substring(e12 + t3), this.nodeValue = this.data = i4, this.length = i4.length;
  }
}, Gi(Hs, Ts), Vs.prototype = {
  nodeName: "#text",
  nodeType: Qi,
  splitText: function(e12) {
    var t3 = this.data, i4 = t3.substring(e12);
    t3 = t3.substring(0, e12), this.data = this.nodeValue = t3, this.length = t3.length;
    var s6 = this.ownerDocument.createTextNode(i4);
    return this.parentNode && this.parentNode.insertBefore(s6, this.nextSibling), s6;
  }
}, Gi(Vs, Hs), zs.prototype = {
  nodeName: "#comment",
  nodeType: is
}, Gi(zs, Hs), Ws.prototype = {
  nodeName: "#cdata-section",
  nodeType: Ji
}, Gi(Ws, Hs), Gs.prototype.nodeType = ns, Gi(Gs, Ts), Xs.prototype.nodeType = as, Gi(Xs, Ts), Ks.prototype.nodeType = es, Gi(Ks, Ts), Ys.prototype.nodeType = Zi, Gi(Ys, Ts), Qs.prototype.nodeName = "#document-fragment", Qs.prototype.nodeType = rs, Gi(Qs, Ts), Js.prototype.nodeType = ts, Gi(Js, Ts), Zs.prototype.serializeToString = function(e12, t3, i4) {
  return en.call(e12, t3, i4);
}, Ts.prototype.toString = en;
try {
  if (Object.defineProperty) {
    let h_ = function(e12) {
      switch (e12.nodeType) {
        case Ki:
        case rs:
          var t3 = [];
          for (e12 = e12.firstChild; e12; ) 7 !== e12.nodeType && 8 !== e12.nodeType && t3.push(h_(e12)), e12 = e12.nextSibling;
          return t3.join("");
        default:
          return e12.nodeValue;
      }
    };
    Object.defineProperty(ms.prototype, "length", {
      get: function() {
        return gs(this), this.$$length;
      }
    }), Object.defineProperty(Ts.prototype, "textContent", {
      get: function() {
        return h_(this);
      },
      set: function(e12) {
        switch (this.nodeType) {
          case Ki:
          case rs:
            for (; this.firstChild; ) this.removeChild(this.firstChild);
            (e12 || String(e12)) && this.appendChild(this.ownerDocument.createTextNode(e12));
            break;
          default:
            this.data = e12, this.value = e12, this.nodeValue = e12;
        }
      }
    }), on = function(e12, t3, i4) {
      e12["$$" + t3] = i4;
    };
  }
} catch (l_) {
}
Pi.DocumentType = Gs, Pi.DOMException = cs, Pi.DOMImplementation = bs, Pi.Element = js, Pi.Node = Ts, Pi.NodeList = ps, Pi.XMLSerializer = Zs;
var ln = {};
var hn = {};
!function(e12) {
  var t3 = Li.freeze;
  e12.XML_ENTITIES = t3({
    amp: "&",
    apos: "'",
    gt: ">",
    lt: "<",
    quot: '"'
  }), e12.HTML_ENTITIES = t3({
    Aacute: "Á",
    aacute: "á",
    Abreve: "Ă",
    abreve: "ă",
    ac: "∾",
    acd: "∿",
    acE: "∾̳",
    Acirc: "Â",
    acirc: "â",
    acute: "´",
    Acy: "А",
    acy: "а",
    AElig: "Æ",
    aelig: "æ",
    af: "⁡",
    Afr: "𝔄",
    afr: "𝔞",
    Agrave: "À",
    agrave: "à",
    alefsym: "ℵ",
    aleph: "ℵ",
    Alpha: "Α",
    alpha: "α",
    Amacr: "Ā",
    amacr: "ā",
    amalg: "⨿",
    AMP: "&",
    amp: "&",
    And: "⩓",
    and: "∧",
    andand: "⩕",
    andd: "⩜",
    andslope: "⩘",
    andv: "⩚",
    ang: "∠",
    ange: "⦤",
    angle: "∠",
    angmsd: "∡",
    angmsdaa: "⦨",
    angmsdab: "⦩",
    angmsdac: "⦪",
    angmsdad: "⦫",
    angmsdae: "⦬",
    angmsdaf: "⦭",
    angmsdag: "⦮",
    angmsdah: "⦯",
    angrt: "∟",
    angrtvb: "⊾",
    angrtvbd: "⦝",
    angsph: "∢",
    angst: "Å",
    angzarr: "⍼",
    Aogon: "Ą",
    aogon: "ą",
    Aopf: "𝔸",
    aopf: "𝕒",
    ap: "≈",
    apacir: "⩯",
    apE: "⩰",
    ape: "≊",
    apid: "≋",
    apos: "'",
    ApplyFunction: "⁡",
    approx: "≈",
    approxeq: "≊",
    Aring: "Å",
    aring: "å",
    Ascr: "𝒜",
    ascr: "𝒶",
    Assign: "≔",
    ast: "*",
    asymp: "≈",
    asympeq: "≍",
    Atilde: "Ã",
    atilde: "ã",
    Auml: "Ä",
    auml: "ä",
    awconint: "∳",
    awint: "⨑",
    backcong: "≌",
    backepsilon: "϶",
    backprime: "‵",
    backsim: "∽",
    backsimeq: "⋍",
    Backslash: "∖",
    Barv: "⫧",
    barvee: "⊽",
    Barwed: "⌆",
    barwed: "⌅",
    barwedge: "⌅",
    bbrk: "⎵",
    bbrktbrk: "⎶",
    bcong: "≌",
    Bcy: "Б",
    bcy: "б",
    bdquo: "„",
    becaus: "∵",
    Because: "∵",
    because: "∵",
    bemptyv: "⦰",
    bepsi: "϶",
    bernou: "ℬ",
    Bernoullis: "ℬ",
    Beta: "Β",
    beta: "β",
    beth: "ℶ",
    between: "≬",
    Bfr: "𝔅",
    bfr: "𝔟",
    bigcap: "⋂",
    bigcirc: "◯",
    bigcup: "⋃",
    bigodot: "⨀",
    bigoplus: "⨁",
    bigotimes: "⨂",
    bigsqcup: "⨆",
    bigstar: "★",
    bigtriangledown: "▽",
    bigtriangleup: "△",
    biguplus: "⨄",
    bigvee: "⋁",
    bigwedge: "⋀",
    bkarow: "⤍",
    blacklozenge: "⧫",
    blacksquare: "▪",
    blacktriangle: "▴",
    blacktriangledown: "▾",
    blacktriangleleft: "◂",
    blacktriangleright: "▸",
    blank: "␣",
    blk12: "▒",
    blk14: "░",
    blk34: "▓",
    block: "█",
    bne: "=⃥",
    bnequiv: "≡⃥",
    bNot: "⫭",
    bnot: "⌐",
    Bopf: "𝔹",
    bopf: "𝕓",
    bot: "⊥",
    bottom: "⊥",
    bowtie: "⋈",
    boxbox: "⧉",
    boxDL: "╗",
    boxDl: "╖",
    boxdL: "╕",
    boxdl: "┐",
    boxDR: "╔",
    boxDr: "╓",
    boxdR: "╒",
    boxdr: "┌",
    boxH: "═",
    boxh: "─",
    boxHD: "╦",
    boxHd: "╤",
    boxhD: "╥",
    boxhd: "┬",
    boxHU: "╩",
    boxHu: "╧",
    boxhU: "╨",
    boxhu: "┴",
    boxminus: "⊟",
    boxplus: "⊞",
    boxtimes: "⊠",
    boxUL: "╝",
    boxUl: "╜",
    boxuL: "╛",
    boxul: "┘",
    boxUR: "╚",
    boxUr: "╙",
    boxuR: "╘",
    boxur: "└",
    boxV: "║",
    boxv: "│",
    boxVH: "╬",
    boxVh: "╫",
    boxvH: "╪",
    boxvh: "┼",
    boxVL: "╣",
    boxVl: "╢",
    boxvL: "╡",
    boxvl: "┤",
    boxVR: "╠",
    boxVr: "╟",
    boxvR: "╞",
    boxvr: "├",
    bprime: "‵",
    Breve: "˘",
    breve: "˘",
    brvbar: "¦",
    Bscr: "ℬ",
    bscr: "𝒷",
    bsemi: "⁏",
    bsim: "∽",
    bsime: "⋍",
    bsol: "\\",
    bsolb: "⧅",
    bsolhsub: "⟈",
    bull: "•",
    bullet: "•",
    bump: "≎",
    bumpE: "⪮",
    bumpe: "≏",
    Bumpeq: "≎",
    bumpeq: "≏",
    Cacute: "Ć",
    cacute: "ć",
    Cap: "⋒",
    cap: "∩",
    capand: "⩄",
    capbrcup: "⩉",
    capcap: "⩋",
    capcup: "⩇",
    capdot: "⩀",
    CapitalDifferentialD: "ⅅ",
    caps: "∩︀",
    caret: "⁁",
    caron: "ˇ",
    Cayleys: "ℭ",
    ccaps: "⩍",
    Ccaron: "Č",
    ccaron: "č",
    Ccedil: "Ç",
    ccedil: "ç",
    Ccirc: "Ĉ",
    ccirc: "ĉ",
    Cconint: "∰",
    ccups: "⩌",
    ccupssm: "⩐",
    Cdot: "Ċ",
    cdot: "ċ",
    cedil: "¸",
    Cedilla: "¸",
    cemptyv: "⦲",
    cent: "¢",
    CenterDot: "·",
    centerdot: "·",
    Cfr: "ℭ",
    cfr: "𝔠",
    CHcy: "Ч",
    chcy: "ч",
    check: "✓",
    checkmark: "✓",
    Chi: "Χ",
    chi: "χ",
    cir: "○",
    circ: "ˆ",
    circeq: "≗",
    circlearrowleft: "↺",
    circlearrowright: "↻",
    circledast: "⊛",
    circledcirc: "⊚",
    circleddash: "⊝",
    CircleDot: "⊙",
    circledR: "®",
    circledS: "Ⓢ",
    CircleMinus: "⊖",
    CirclePlus: "⊕",
    CircleTimes: "⊗",
    cirE: "⧃",
    cire: "≗",
    cirfnint: "⨐",
    cirmid: "⫯",
    cirscir: "⧂",
    ClockwiseContourIntegral: "∲",
    CloseCurlyDoubleQuote: "”",
    CloseCurlyQuote: "’",
    clubs: "♣",
    clubsuit: "♣",
    Colon: "∷",
    colon: ":",
    Colone: "⩴",
    colone: "≔",
    coloneq: "≔",
    comma: ",",
    commat: "@",
    comp: "∁",
    compfn: "∘",
    complement: "∁",
    complexes: "ℂ",
    cong: "≅",
    congdot: "⩭",
    Congruent: "≡",
    Conint: "∯",
    conint: "∮",
    ContourIntegral: "∮",
    Copf: "ℂ",
    copf: "𝕔",
    coprod: "∐",
    Coproduct: "∐",
    COPY: "©",
    copy: "©",
    copysr: "℗",
    CounterClockwiseContourIntegral: "∳",
    crarr: "↵",
    Cross: "⨯",
    cross: "✗",
    Cscr: "𝒞",
    cscr: "𝒸",
    csub: "⫏",
    csube: "⫑",
    csup: "⫐",
    csupe: "⫒",
    ctdot: "⋯",
    cudarrl: "⤸",
    cudarrr: "⤵",
    cuepr: "⋞",
    cuesc: "⋟",
    cularr: "↶",
    cularrp: "⤽",
    Cup: "⋓",
    cup: "∪",
    cupbrcap: "⩈",
    CupCap: "≍",
    cupcap: "⩆",
    cupcup: "⩊",
    cupdot: "⊍",
    cupor: "⩅",
    cups: "∪︀",
    curarr: "↷",
    curarrm: "⤼",
    curlyeqprec: "⋞",
    curlyeqsucc: "⋟",
    curlyvee: "⋎",
    curlywedge: "⋏",
    curren: "¤",
    curvearrowleft: "↶",
    curvearrowright: "↷",
    cuvee: "⋎",
    cuwed: "⋏",
    cwconint: "∲",
    cwint: "∱",
    cylcty: "⌭",
    Dagger: "‡",
    dagger: "†",
    daleth: "ℸ",
    Darr: "↡",
    dArr: "⇓",
    darr: "↓",
    dash: "‐",
    Dashv: "⫤",
    dashv: "⊣",
    dbkarow: "⤏",
    dblac: "˝",
    Dcaron: "Ď",
    dcaron: "ď",
    Dcy: "Д",
    dcy: "д",
    DD: "ⅅ",
    dd: "ⅆ",
    ddagger: "‡",
    ddarr: "⇊",
    DDotrahd: "⤑",
    ddotseq: "⩷",
    deg: "°",
    Del: "∇",
    Delta: "Δ",
    delta: "δ",
    demptyv: "⦱",
    dfisht: "⥿",
    Dfr: "𝔇",
    dfr: "𝔡",
    dHar: "⥥",
    dharl: "⇃",
    dharr: "⇂",
    DiacriticalAcute: "´",
    DiacriticalDot: "˙",
    DiacriticalDoubleAcute: "˝",
    DiacriticalGrave: "`",
    DiacriticalTilde: "˜",
    diam: "⋄",
    Diamond: "⋄",
    diamond: "⋄",
    diamondsuit: "♦",
    diams: "♦",
    die: "¨",
    DifferentialD: "ⅆ",
    digamma: "ϝ",
    disin: "⋲",
    div: "÷",
    divide: "÷",
    divideontimes: "⋇",
    divonx: "⋇",
    DJcy: "Ђ",
    djcy: "ђ",
    dlcorn: "⌞",
    dlcrop: "⌍",
    dollar: "$",
    Dopf: "𝔻",
    dopf: "𝕕",
    Dot: "¨",
    dot: "˙",
    DotDot: "⃜",
    doteq: "≐",
    doteqdot: "≑",
    DotEqual: "≐",
    dotminus: "∸",
    dotplus: "∔",
    dotsquare: "⊡",
    doublebarwedge: "⌆",
    DoubleContourIntegral: "∯",
    DoubleDot: "¨",
    DoubleDownArrow: "⇓",
    DoubleLeftArrow: "⇐",
    DoubleLeftRightArrow: "⇔",
    DoubleLeftTee: "⫤",
    DoubleLongLeftArrow: "⟸",
    DoubleLongLeftRightArrow: "⟺",
    DoubleLongRightArrow: "⟹",
    DoubleRightArrow: "⇒",
    DoubleRightTee: "⊨",
    DoubleUpArrow: "⇑",
    DoubleUpDownArrow: "⇕",
    DoubleVerticalBar: "∥",
    DownArrow: "↓",
    Downarrow: "⇓",
    downarrow: "↓",
    DownArrowBar: "⤓",
    DownArrowUpArrow: "⇵",
    DownBreve: "̑",
    downdownarrows: "⇊",
    downharpoonleft: "⇃",
    downharpoonright: "⇂",
    DownLeftRightVector: "⥐",
    DownLeftTeeVector: "⥞",
    DownLeftVector: "↽",
    DownLeftVectorBar: "⥖",
    DownRightTeeVector: "⥟",
    DownRightVector: "⇁",
    DownRightVectorBar: "⥗",
    DownTee: "⊤",
    DownTeeArrow: "↧",
    drbkarow: "⤐",
    drcorn: "⌟",
    drcrop: "⌌",
    Dscr: "𝒟",
    dscr: "𝒹",
    DScy: "Ѕ",
    dscy: "ѕ",
    dsol: "⧶",
    Dstrok: "Đ",
    dstrok: "đ",
    dtdot: "⋱",
    dtri: "▿",
    dtrif: "▾",
    duarr: "⇵",
    duhar: "⥯",
    dwangle: "⦦",
    DZcy: "Џ",
    dzcy: "џ",
    dzigrarr: "⟿",
    Eacute: "É",
    eacute: "é",
    easter: "⩮",
    Ecaron: "Ě",
    ecaron: "ě",
    ecir: "≖",
    Ecirc: "Ê",
    ecirc: "ê",
    ecolon: "≕",
    Ecy: "Э",
    ecy: "э",
    eDDot: "⩷",
    Edot: "Ė",
    eDot: "≑",
    edot: "ė",
    ee: "ⅇ",
    efDot: "≒",
    Efr: "𝔈",
    efr: "𝔢",
    eg: "⪚",
    Egrave: "È",
    egrave: "è",
    egs: "⪖",
    egsdot: "⪘",
    el: "⪙",
    Element: "∈",
    elinters: "⏧",
    ell: "ℓ",
    els: "⪕",
    elsdot: "⪗",
    Emacr: "Ē",
    emacr: "ē",
    empty: "∅",
    emptyset: "∅",
    EmptySmallSquare: "◻",
    emptyv: "∅",
    EmptyVerySmallSquare: "▫",
    emsp: " ",
    emsp13: " ",
    emsp14: " ",
    ENG: "Ŋ",
    eng: "ŋ",
    ensp: " ",
    Eogon: "Ę",
    eogon: "ę",
    Eopf: "𝔼",
    eopf: "𝕖",
    epar: "⋕",
    eparsl: "⧣",
    eplus: "⩱",
    epsi: "ε",
    Epsilon: "Ε",
    epsilon: "ε",
    epsiv: "ϵ",
    eqcirc: "≖",
    eqcolon: "≕",
    eqsim: "≂",
    eqslantgtr: "⪖",
    eqslantless: "⪕",
    Equal: "⩵",
    equals: "=",
    EqualTilde: "≂",
    equest: "≟",
    Equilibrium: "⇌",
    equiv: "≡",
    equivDD: "⩸",
    eqvparsl: "⧥",
    erarr: "⥱",
    erDot: "≓",
    Escr: "ℰ",
    escr: "ℯ",
    esdot: "≐",
    Esim: "⩳",
    esim: "≂",
    Eta: "Η",
    eta: "η",
    ETH: "Ð",
    eth: "ð",
    Euml: "Ë",
    euml: "ë",
    euro: "€",
    excl: "!",
    exist: "∃",
    Exists: "∃",
    expectation: "ℰ",
    ExponentialE: "ⅇ",
    exponentiale: "ⅇ",
    fallingdotseq: "≒",
    Fcy: "Ф",
    fcy: "ф",
    female: "♀",
    ffilig: "ﬃ",
    fflig: "ﬀ",
    ffllig: "ﬄ",
    Ffr: "𝔉",
    ffr: "𝔣",
    filig: "ﬁ",
    FilledSmallSquare: "◼",
    FilledVerySmallSquare: "▪",
    fjlig: "fj",
    flat: "♭",
    fllig: "ﬂ",
    fltns: "▱",
    fnof: "ƒ",
    Fopf: "𝔽",
    fopf: "𝕗",
    ForAll: "∀",
    forall: "∀",
    fork: "⋔",
    forkv: "⫙",
    Fouriertrf: "ℱ",
    fpartint: "⨍",
    frac12: "½",
    frac13: "⅓",
    frac14: "¼",
    frac15: "⅕",
    frac16: "⅙",
    frac18: "⅛",
    frac23: "⅔",
    frac25: "⅖",
    frac34: "¾",
    frac35: "⅗",
    frac38: "⅜",
    frac45: "⅘",
    frac56: "⅚",
    frac58: "⅝",
    frac78: "⅞",
    frasl: "⁄",
    frown: "⌢",
    Fscr: "ℱ",
    fscr: "𝒻",
    gacute: "ǵ",
    Gamma: "Γ",
    gamma: "γ",
    Gammad: "Ϝ",
    gammad: "ϝ",
    gap: "⪆",
    Gbreve: "Ğ",
    gbreve: "ğ",
    Gcedil: "Ģ",
    Gcirc: "Ĝ",
    gcirc: "ĝ",
    Gcy: "Г",
    gcy: "г",
    Gdot: "Ġ",
    gdot: "ġ",
    gE: "≧",
    ge: "≥",
    gEl: "⪌",
    gel: "⋛",
    geq: "≥",
    geqq: "≧",
    geqslant: "⩾",
    ges: "⩾",
    gescc: "⪩",
    gesdot: "⪀",
    gesdoto: "⪂",
    gesdotol: "⪄",
    gesl: "⋛︀",
    gesles: "⪔",
    Gfr: "𝔊",
    gfr: "𝔤",
    Gg: "⋙",
    gg: "≫",
    ggg: "⋙",
    gimel: "ℷ",
    GJcy: "Ѓ",
    gjcy: "ѓ",
    gl: "≷",
    gla: "⪥",
    glE: "⪒",
    glj: "⪤",
    gnap: "⪊",
    gnapprox: "⪊",
    gnE: "≩",
    gne: "⪈",
    gneq: "⪈",
    gneqq: "≩",
    gnsim: "⋧",
    Gopf: "𝔾",
    gopf: "𝕘",
    grave: "`",
    GreaterEqual: "≥",
    GreaterEqualLess: "⋛",
    GreaterFullEqual: "≧",
    GreaterGreater: "⪢",
    GreaterLess: "≷",
    GreaterSlantEqual: "⩾",
    GreaterTilde: "≳",
    Gscr: "𝒢",
    gscr: "ℊ",
    gsim: "≳",
    gsime: "⪎",
    gsiml: "⪐",
    Gt: "≫",
    GT: ">",
    gt: ">",
    gtcc: "⪧",
    gtcir: "⩺",
    gtdot: "⋗",
    gtlPar: "⦕",
    gtquest: "⩼",
    gtrapprox: "⪆",
    gtrarr: "⥸",
    gtrdot: "⋗",
    gtreqless: "⋛",
    gtreqqless: "⪌",
    gtrless: "≷",
    gtrsim: "≳",
    gvertneqq: "≩︀",
    gvnE: "≩︀",
    Hacek: "ˇ",
    hairsp: " ",
    half: "½",
    hamilt: "ℋ",
    HARDcy: "Ъ",
    hardcy: "ъ",
    hArr: "⇔",
    harr: "↔",
    harrcir: "⥈",
    harrw: "↭",
    Hat: "^",
    hbar: "ℏ",
    Hcirc: "Ĥ",
    hcirc: "ĥ",
    hearts: "♥",
    heartsuit: "♥",
    hellip: "…",
    hercon: "⊹",
    Hfr: "ℌ",
    hfr: "𝔥",
    HilbertSpace: "ℋ",
    hksearow: "⤥",
    hkswarow: "⤦",
    hoarr: "⇿",
    homtht: "∻",
    hookleftarrow: "↩",
    hookrightarrow: "↪",
    Hopf: "ℍ",
    hopf: "𝕙",
    horbar: "―",
    HorizontalLine: "─",
    Hscr: "ℋ",
    hscr: "𝒽",
    hslash: "ℏ",
    Hstrok: "Ħ",
    hstrok: "ħ",
    HumpDownHump: "≎",
    HumpEqual: "≏",
    hybull: "⁃",
    hyphen: "‐",
    Iacute: "Í",
    iacute: "í",
    ic: "⁣",
    Icirc: "Î",
    icirc: "î",
    Icy: "И",
    icy: "и",
    Idot: "İ",
    IEcy: "Е",
    iecy: "е",
    iexcl: "¡",
    iff: "⇔",
    Ifr: "ℑ",
    ifr: "𝔦",
    Igrave: "Ì",
    igrave: "ì",
    ii: "ⅈ",
    iiiint: "⨌",
    iiint: "∭",
    iinfin: "⧜",
    iiota: "℩",
    IJlig: "Ĳ",
    ijlig: "ĳ",
    Im: "ℑ",
    Imacr: "Ī",
    imacr: "ī",
    image: "ℑ",
    ImaginaryI: "ⅈ",
    imagline: "ℐ",
    imagpart: "ℑ",
    imath: "ı",
    imof: "⊷",
    imped: "Ƶ",
    Implies: "⇒",
    in: "∈",
    incare: "℅",
    infin: "∞",
    infintie: "⧝",
    inodot: "ı",
    Int: "∬",
    int: "∫",
    intcal: "⊺",
    integers: "ℤ",
    Integral: "∫",
    intercal: "⊺",
    Intersection: "⋂",
    intlarhk: "⨗",
    intprod: "⨼",
    InvisibleComma: "⁣",
    InvisibleTimes: "⁢",
    IOcy: "Ё",
    iocy: "ё",
    Iogon: "Į",
    iogon: "į",
    Iopf: "𝕀",
    iopf: "𝕚",
    Iota: "Ι",
    iota: "ι",
    iprod: "⨼",
    iquest: "¿",
    Iscr: "ℐ",
    iscr: "𝒾",
    isin: "∈",
    isindot: "⋵",
    isinE: "⋹",
    isins: "⋴",
    isinsv: "⋳",
    isinv: "∈",
    it: "⁢",
    Itilde: "Ĩ",
    itilde: "ĩ",
    Iukcy: "І",
    iukcy: "і",
    Iuml: "Ï",
    iuml: "ï",
    Jcirc: "Ĵ",
    jcirc: "ĵ",
    Jcy: "Й",
    jcy: "й",
    Jfr: "𝔍",
    jfr: "𝔧",
    jmath: "ȷ",
    Jopf: "𝕁",
    jopf: "𝕛",
    Jscr: "𝒥",
    jscr: "𝒿",
    Jsercy: "Ј",
    jsercy: "ј",
    Jukcy: "Є",
    jukcy: "є",
    Kappa: "Κ",
    kappa: "κ",
    kappav: "ϰ",
    Kcedil: "Ķ",
    kcedil: "ķ",
    Kcy: "К",
    kcy: "к",
    Kfr: "𝔎",
    kfr: "𝔨",
    kgreen: "ĸ",
    KHcy: "Х",
    khcy: "х",
    KJcy: "Ќ",
    kjcy: "ќ",
    Kopf: "𝕂",
    kopf: "𝕜",
    Kscr: "𝒦",
    kscr: "𝓀",
    lAarr: "⇚",
    Lacute: "Ĺ",
    lacute: "ĺ",
    laemptyv: "⦴",
    lagran: "ℒ",
    Lambda: "Λ",
    lambda: "λ",
    Lang: "⟪",
    lang: "⟨",
    langd: "⦑",
    langle: "⟨",
    lap: "⪅",
    Laplacetrf: "ℒ",
    laquo: "«",
    Larr: "↞",
    lArr: "⇐",
    larr: "←",
    larrb: "⇤",
    larrbfs: "⤟",
    larrfs: "⤝",
    larrhk: "↩",
    larrlp: "↫",
    larrpl: "⤹",
    larrsim: "⥳",
    larrtl: "↢",
    lat: "⪫",
    lAtail: "⤛",
    latail: "⤙",
    late: "⪭",
    lates: "⪭︀",
    lBarr: "⤎",
    lbarr: "⤌",
    lbbrk: "❲",
    lbrace: "{",
    lbrack: "[",
    lbrke: "⦋",
    lbrksld: "⦏",
    lbrkslu: "⦍",
    Lcaron: "Ľ",
    lcaron: "ľ",
    Lcedil: "Ļ",
    lcedil: "ļ",
    lceil: "⌈",
    lcub: "{",
    Lcy: "Л",
    lcy: "л",
    ldca: "⤶",
    ldquo: "“",
    ldquor: "„",
    ldrdhar: "⥧",
    ldrushar: "⥋",
    ldsh: "↲",
    lE: "≦",
    le: "≤",
    LeftAngleBracket: "⟨",
    LeftArrow: "←",
    Leftarrow: "⇐",
    leftarrow: "←",
    LeftArrowBar: "⇤",
    LeftArrowRightArrow: "⇆",
    leftarrowtail: "↢",
    LeftCeiling: "⌈",
    LeftDoubleBracket: "⟦",
    LeftDownTeeVector: "⥡",
    LeftDownVector: "⇃",
    LeftDownVectorBar: "⥙",
    LeftFloor: "⌊",
    leftharpoondown: "↽",
    leftharpoonup: "↼",
    leftleftarrows: "⇇",
    LeftRightArrow: "↔",
    Leftrightarrow: "⇔",
    leftrightarrow: "↔",
    leftrightarrows: "⇆",
    leftrightharpoons: "⇋",
    leftrightsquigarrow: "↭",
    LeftRightVector: "⥎",
    LeftTee: "⊣",
    LeftTeeArrow: "↤",
    LeftTeeVector: "⥚",
    leftthreetimes: "⋋",
    LeftTriangle: "⊲",
    LeftTriangleBar: "⧏",
    LeftTriangleEqual: "⊴",
    LeftUpDownVector: "⥑",
    LeftUpTeeVector: "⥠",
    LeftUpVector: "↿",
    LeftUpVectorBar: "⥘",
    LeftVector: "↼",
    LeftVectorBar: "⥒",
    lEg: "⪋",
    leg: "⋚",
    leq: "≤",
    leqq: "≦",
    leqslant: "⩽",
    les: "⩽",
    lescc: "⪨",
    lesdot: "⩿",
    lesdoto: "⪁",
    lesdotor: "⪃",
    lesg: "⋚︀",
    lesges: "⪓",
    lessapprox: "⪅",
    lessdot: "⋖",
    lesseqgtr: "⋚",
    lesseqqgtr: "⪋",
    LessEqualGreater: "⋚",
    LessFullEqual: "≦",
    LessGreater: "≶",
    lessgtr: "≶",
    LessLess: "⪡",
    lesssim: "≲",
    LessSlantEqual: "⩽",
    LessTilde: "≲",
    lfisht: "⥼",
    lfloor: "⌊",
    Lfr: "𝔏",
    lfr: "𝔩",
    lg: "≶",
    lgE: "⪑",
    lHar: "⥢",
    lhard: "↽",
    lharu: "↼",
    lharul: "⥪",
    lhblk: "▄",
    LJcy: "Љ",
    ljcy: "љ",
    Ll: "⋘",
    ll: "≪",
    llarr: "⇇",
    llcorner: "⌞",
    Lleftarrow: "⇚",
    llhard: "⥫",
    lltri: "◺",
    Lmidot: "Ŀ",
    lmidot: "ŀ",
    lmoust: "⎰",
    lmoustache: "⎰",
    lnap: "⪉",
    lnapprox: "⪉",
    lnE: "≨",
    lne: "⪇",
    lneq: "⪇",
    lneqq: "≨",
    lnsim: "⋦",
    loang: "⟬",
    loarr: "⇽",
    lobrk: "⟦",
    LongLeftArrow: "⟵",
    Longleftarrow: "⟸",
    longleftarrow: "⟵",
    LongLeftRightArrow: "⟷",
    Longleftrightarrow: "⟺",
    longleftrightarrow: "⟷",
    longmapsto: "⟼",
    LongRightArrow: "⟶",
    Longrightarrow: "⟹",
    longrightarrow: "⟶",
    looparrowleft: "↫",
    looparrowright: "↬",
    lopar: "⦅",
    Lopf: "𝕃",
    lopf: "𝕝",
    loplus: "⨭",
    lotimes: "⨴",
    lowast: "∗",
    lowbar: "_",
    LowerLeftArrow: "↙",
    LowerRightArrow: "↘",
    loz: "◊",
    lozenge: "◊",
    lozf: "⧫",
    lpar: "(",
    lparlt: "⦓",
    lrarr: "⇆",
    lrcorner: "⌟",
    lrhar: "⇋",
    lrhard: "⥭",
    lrm: "‎",
    lrtri: "⊿",
    lsaquo: "‹",
    Lscr: "ℒ",
    lscr: "𝓁",
    Lsh: "↰",
    lsh: "↰",
    lsim: "≲",
    lsime: "⪍",
    lsimg: "⪏",
    lsqb: "[",
    lsquo: "‘",
    lsquor: "‚",
    Lstrok: "Ł",
    lstrok: "ł",
    Lt: "≪",
    LT: "<",
    lt: "<",
    ltcc: "⪦",
    ltcir: "⩹",
    ltdot: "⋖",
    lthree: "⋋",
    ltimes: "⋉",
    ltlarr: "⥶",
    ltquest: "⩻",
    ltri: "◃",
    ltrie: "⊴",
    ltrif: "◂",
    ltrPar: "⦖",
    lurdshar: "⥊",
    luruhar: "⥦",
    lvertneqq: "≨︀",
    lvnE: "≨︀",
    macr: "¯",
    male: "♂",
    malt: "✠",
    maltese: "✠",
    Map: "⤅",
    map: "↦",
    mapsto: "↦",
    mapstodown: "↧",
    mapstoleft: "↤",
    mapstoup: "↥",
    marker: "▮",
    mcomma: "⨩",
    Mcy: "М",
    mcy: "м",
    mdash: "—",
    mDDot: "∺",
    measuredangle: "∡",
    MediumSpace: " ",
    Mellintrf: "ℳ",
    Mfr: "𝔐",
    mfr: "𝔪",
    mho: "℧",
    micro: "µ",
    mid: "∣",
    midast: "*",
    midcir: "⫰",
    middot: "·",
    minus: "−",
    minusb: "⊟",
    minusd: "∸",
    minusdu: "⨪",
    MinusPlus: "∓",
    mlcp: "⫛",
    mldr: "…",
    mnplus: "∓",
    models: "⊧",
    Mopf: "𝕄",
    mopf: "𝕞",
    mp: "∓",
    Mscr: "ℳ",
    mscr: "𝓂",
    mstpos: "∾",
    Mu: "Μ",
    mu: "μ",
    multimap: "⊸",
    mumap: "⊸",
    nabla: "∇",
    Nacute: "Ń",
    nacute: "ń",
    nang: "∠⃒",
    nap: "≉",
    napE: "⩰̸",
    napid: "≋̸",
    napos: "ŉ",
    napprox: "≉",
    natur: "♮",
    natural: "♮",
    naturals: "ℕ",
    nbsp: " ",
    nbump: "≎̸",
    nbumpe: "≏̸",
    ncap: "⩃",
    Ncaron: "Ň",
    ncaron: "ň",
    Ncedil: "Ņ",
    ncedil: "ņ",
    ncong: "≇",
    ncongdot: "⩭̸",
    ncup: "⩂",
    Ncy: "Н",
    ncy: "н",
    ndash: "–",
    ne: "≠",
    nearhk: "⤤",
    neArr: "⇗",
    nearr: "↗",
    nearrow: "↗",
    nedot: "≐̸",
    NegativeMediumSpace: "​",
    NegativeThickSpace: "​",
    NegativeThinSpace: "​",
    NegativeVeryThinSpace: "​",
    nequiv: "≢",
    nesear: "⤨",
    nesim: "≂̸",
    NestedGreaterGreater: "≫",
    NestedLessLess: "≪",
    NewLine: "\n",
    nexist: "∄",
    nexists: "∄",
    Nfr: "𝔑",
    nfr: "𝔫",
    ngE: "≧̸",
    nge: "≱",
    ngeq: "≱",
    ngeqq: "≧̸",
    ngeqslant: "⩾̸",
    nges: "⩾̸",
    nGg: "⋙̸",
    ngsim: "≵",
    nGt: "≫⃒",
    ngt: "≯",
    ngtr: "≯",
    nGtv: "≫̸",
    nhArr: "⇎",
    nharr: "↮",
    nhpar: "⫲",
    ni: "∋",
    nis: "⋼",
    nisd: "⋺",
    niv: "∋",
    NJcy: "Њ",
    njcy: "њ",
    nlArr: "⇍",
    nlarr: "↚",
    nldr: "‥",
    nlE: "≦̸",
    nle: "≰",
    nLeftarrow: "⇍",
    nleftarrow: "↚",
    nLeftrightarrow: "⇎",
    nleftrightarrow: "↮",
    nleq: "≰",
    nleqq: "≦̸",
    nleqslant: "⩽̸",
    nles: "⩽̸",
    nless: "≮",
    nLl: "⋘̸",
    nlsim: "≴",
    nLt: "≪⃒",
    nlt: "≮",
    nltri: "⋪",
    nltrie: "⋬",
    nLtv: "≪̸",
    nmid: "∤",
    NoBreak: "⁠",
    NonBreakingSpace: " ",
    Nopf: "ℕ",
    nopf: "𝕟",
    Not: "⫬",
    not: "¬",
    NotCongruent: "≢",
    NotCupCap: "≭",
    NotDoubleVerticalBar: "∦",
    NotElement: "∉",
    NotEqual: "≠",
    NotEqualTilde: "≂̸",
    NotExists: "∄",
    NotGreater: "≯",
    NotGreaterEqual: "≱",
    NotGreaterFullEqual: "≧̸",
    NotGreaterGreater: "≫̸",
    NotGreaterLess: "≹",
    NotGreaterSlantEqual: "⩾̸",
    NotGreaterTilde: "≵",
    NotHumpDownHump: "≎̸",
    NotHumpEqual: "≏̸",
    notin: "∉",
    notindot: "⋵̸",
    notinE: "⋹̸",
    notinva: "∉",
    notinvb: "⋷",
    notinvc: "⋶",
    NotLeftTriangle: "⋪",
    NotLeftTriangleBar: "⧏̸",
    NotLeftTriangleEqual: "⋬",
    NotLess: "≮",
    NotLessEqual: "≰",
    NotLessGreater: "≸",
    NotLessLess: "≪̸",
    NotLessSlantEqual: "⩽̸",
    NotLessTilde: "≴",
    NotNestedGreaterGreater: "⪢̸",
    NotNestedLessLess: "⪡̸",
    notni: "∌",
    notniva: "∌",
    notnivb: "⋾",
    notnivc: "⋽",
    NotPrecedes: "⊀",
    NotPrecedesEqual: "⪯̸",
    NotPrecedesSlantEqual: "⋠",
    NotReverseElement: "∌",
    NotRightTriangle: "⋫",
    NotRightTriangleBar: "⧐̸",
    NotRightTriangleEqual: "⋭",
    NotSquareSubset: "⊏̸",
    NotSquareSubsetEqual: "⋢",
    NotSquareSuperset: "⊐̸",
    NotSquareSupersetEqual: "⋣",
    NotSubset: "⊂⃒",
    NotSubsetEqual: "⊈",
    NotSucceeds: "⊁",
    NotSucceedsEqual: "⪰̸",
    NotSucceedsSlantEqual: "⋡",
    NotSucceedsTilde: "≿̸",
    NotSuperset: "⊃⃒",
    NotSupersetEqual: "⊉",
    NotTilde: "≁",
    NotTildeEqual: "≄",
    NotTildeFullEqual: "≇",
    NotTildeTilde: "≉",
    NotVerticalBar: "∤",
    npar: "∦",
    nparallel: "∦",
    nparsl: "⫽⃥",
    npart: "∂̸",
    npolint: "⨔",
    npr: "⊀",
    nprcue: "⋠",
    npre: "⪯̸",
    nprec: "⊀",
    npreceq: "⪯̸",
    nrArr: "⇏",
    nrarr: "↛",
    nrarrc: "⤳̸",
    nrarrw: "↝̸",
    nRightarrow: "⇏",
    nrightarrow: "↛",
    nrtri: "⋫",
    nrtrie: "⋭",
    nsc: "⊁",
    nsccue: "⋡",
    nsce: "⪰̸",
    Nscr: "𝒩",
    nscr: "𝓃",
    nshortmid: "∤",
    nshortparallel: "∦",
    nsim: "≁",
    nsime: "≄",
    nsimeq: "≄",
    nsmid: "∤",
    nspar: "∦",
    nsqsube: "⋢",
    nsqsupe: "⋣",
    nsub: "⊄",
    nsubE: "⫅̸",
    nsube: "⊈",
    nsubset: "⊂⃒",
    nsubseteq: "⊈",
    nsubseteqq: "⫅̸",
    nsucc: "⊁",
    nsucceq: "⪰̸",
    nsup: "⊅",
    nsupE: "⫆̸",
    nsupe: "⊉",
    nsupset: "⊃⃒",
    nsupseteq: "⊉",
    nsupseteqq: "⫆̸",
    ntgl: "≹",
    Ntilde: "Ñ",
    ntilde: "ñ",
    ntlg: "≸",
    ntriangleleft: "⋪",
    ntrianglelefteq: "⋬",
    ntriangleright: "⋫",
    ntrianglerighteq: "⋭",
    Nu: "Ν",
    nu: "ν",
    num: "#",
    numero: "№",
    numsp: " ",
    nvap: "≍⃒",
    nVDash: "⊯",
    nVdash: "⊮",
    nvDash: "⊭",
    nvdash: "⊬",
    nvge: "≥⃒",
    nvgt: ">⃒",
    nvHarr: "⤄",
    nvinfin: "⧞",
    nvlArr: "⤂",
    nvle: "≤⃒",
    nvlt: "<⃒",
    nvltrie: "⊴⃒",
    nvrArr: "⤃",
    nvrtrie: "⊵⃒",
    nvsim: "∼⃒",
    nwarhk: "⤣",
    nwArr: "⇖",
    nwarr: "↖",
    nwarrow: "↖",
    nwnear: "⤧",
    Oacute: "Ó",
    oacute: "ó",
    oast: "⊛",
    ocir: "⊚",
    Ocirc: "Ô",
    ocirc: "ô",
    Ocy: "О",
    ocy: "о",
    odash: "⊝",
    Odblac: "Ő",
    odblac: "ő",
    odiv: "⨸",
    odot: "⊙",
    odsold: "⦼",
    OElig: "Œ",
    oelig: "œ",
    ofcir: "⦿",
    Ofr: "𝔒",
    ofr: "𝔬",
    ogon: "˛",
    Ograve: "Ò",
    ograve: "ò",
    ogt: "⧁",
    ohbar: "⦵",
    ohm: "Ω",
    oint: "∮",
    olarr: "↺",
    olcir: "⦾",
    olcross: "⦻",
    oline: "‾",
    olt: "⧀",
    Omacr: "Ō",
    omacr: "ō",
    Omega: "Ω",
    omega: "ω",
    Omicron: "Ο",
    omicron: "ο",
    omid: "⦶",
    ominus: "⊖",
    Oopf: "𝕆",
    oopf: "𝕠",
    opar: "⦷",
    OpenCurlyDoubleQuote: "“",
    OpenCurlyQuote: "‘",
    operp: "⦹",
    oplus: "⊕",
    Or: "⩔",
    or: "∨",
    orarr: "↻",
    ord: "⩝",
    order: "ℴ",
    orderof: "ℴ",
    ordf: "ª",
    ordm: "º",
    origof: "⊶",
    oror: "⩖",
    orslope: "⩗",
    orv: "⩛",
    oS: "Ⓢ",
    Oscr: "𝒪",
    oscr: "ℴ",
    Oslash: "Ø",
    oslash: "ø",
    osol: "⊘",
    Otilde: "Õ",
    otilde: "õ",
    Otimes: "⨷",
    otimes: "⊗",
    otimesas: "⨶",
    Ouml: "Ö",
    ouml: "ö",
    ovbar: "⌽",
    OverBar: "‾",
    OverBrace: "⏞",
    OverBracket: "⎴",
    OverParenthesis: "⏜",
    par: "∥",
    para: "¶",
    parallel: "∥",
    parsim: "⫳",
    parsl: "⫽",
    part: "∂",
    PartialD: "∂",
    Pcy: "П",
    pcy: "п",
    percnt: "%",
    period: ".",
    permil: "‰",
    perp: "⊥",
    pertenk: "‱",
    Pfr: "𝔓",
    pfr: "𝔭",
    Phi: "Φ",
    phi: "φ",
    phiv: "ϕ",
    phmmat: "ℳ",
    phone: "☎",
    Pi: "Π",
    pi: "π",
    pitchfork: "⋔",
    piv: "ϖ",
    planck: "ℏ",
    planckh: "ℎ",
    plankv: "ℏ",
    plus: "+",
    plusacir: "⨣",
    plusb: "⊞",
    pluscir: "⨢",
    plusdo: "∔",
    plusdu: "⨥",
    pluse: "⩲",
    PlusMinus: "±",
    plusmn: "±",
    plussim: "⨦",
    plustwo: "⨧",
    pm: "±",
    Poincareplane: "ℌ",
    pointint: "⨕",
    Popf: "ℙ",
    popf: "𝕡",
    pound: "£",
    Pr: "⪻",
    pr: "≺",
    prap: "⪷",
    prcue: "≼",
    prE: "⪳",
    pre: "⪯",
    prec: "≺",
    precapprox: "⪷",
    preccurlyeq: "≼",
    Precedes: "≺",
    PrecedesEqual: "⪯",
    PrecedesSlantEqual: "≼",
    PrecedesTilde: "≾",
    preceq: "⪯",
    precnapprox: "⪹",
    precneqq: "⪵",
    precnsim: "⋨",
    precsim: "≾",
    Prime: "″",
    prime: "′",
    primes: "ℙ",
    prnap: "⪹",
    prnE: "⪵",
    prnsim: "⋨",
    prod: "∏",
    Product: "∏",
    profalar: "⌮",
    profline: "⌒",
    profsurf: "⌓",
    prop: "∝",
    Proportion: "∷",
    Proportional: "∝",
    propto: "∝",
    prsim: "≾",
    prurel: "⊰",
    Pscr: "𝒫",
    pscr: "𝓅",
    Psi: "Ψ",
    psi: "ψ",
    puncsp: " ",
    Qfr: "𝔔",
    qfr: "𝔮",
    qint: "⨌",
    Qopf: "ℚ",
    qopf: "𝕢",
    qprime: "⁗",
    Qscr: "𝒬",
    qscr: "𝓆",
    quaternions: "ℍ",
    quatint: "⨖",
    quest: "?",
    questeq: "≟",
    QUOT: '"',
    quot: '"',
    rAarr: "⇛",
    race: "∽̱",
    Racute: "Ŕ",
    racute: "ŕ",
    radic: "√",
    raemptyv: "⦳",
    Rang: "⟫",
    rang: "⟩",
    rangd: "⦒",
    range: "⦥",
    rangle: "⟩",
    raquo: "»",
    Rarr: "↠",
    rArr: "⇒",
    rarr: "→",
    rarrap: "⥵",
    rarrb: "⇥",
    rarrbfs: "⤠",
    rarrc: "⤳",
    rarrfs: "⤞",
    rarrhk: "↪",
    rarrlp: "↬",
    rarrpl: "⥅",
    rarrsim: "⥴",
    Rarrtl: "⤖",
    rarrtl: "↣",
    rarrw: "↝",
    rAtail: "⤜",
    ratail: "⤚",
    ratio: "∶",
    rationals: "ℚ",
    RBarr: "⤐",
    rBarr: "⤏",
    rbarr: "⤍",
    rbbrk: "❳",
    rbrace: "}",
    rbrack: "]",
    rbrke: "⦌",
    rbrksld: "⦎",
    rbrkslu: "⦐",
    Rcaron: "Ř",
    rcaron: "ř",
    Rcedil: "Ŗ",
    rcedil: "ŗ",
    rceil: "⌉",
    rcub: "}",
    Rcy: "Р",
    rcy: "р",
    rdca: "⤷",
    rdldhar: "⥩",
    rdquo: "”",
    rdquor: "”",
    rdsh: "↳",
    Re: "ℜ",
    real: "ℜ",
    realine: "ℛ",
    realpart: "ℜ",
    reals: "ℝ",
    rect: "▭",
    REG: "®",
    reg: "®",
    ReverseElement: "∋",
    ReverseEquilibrium: "⇋",
    ReverseUpEquilibrium: "⥯",
    rfisht: "⥽",
    rfloor: "⌋",
    Rfr: "ℜ",
    rfr: "𝔯",
    rHar: "⥤",
    rhard: "⇁",
    rharu: "⇀",
    rharul: "⥬",
    Rho: "Ρ",
    rho: "ρ",
    rhov: "ϱ",
    RightAngleBracket: "⟩",
    RightArrow: "→",
    Rightarrow: "⇒",
    rightarrow: "→",
    RightArrowBar: "⇥",
    RightArrowLeftArrow: "⇄",
    rightarrowtail: "↣",
    RightCeiling: "⌉",
    RightDoubleBracket: "⟧",
    RightDownTeeVector: "⥝",
    RightDownVector: "⇂",
    RightDownVectorBar: "⥕",
    RightFloor: "⌋",
    rightharpoondown: "⇁",
    rightharpoonup: "⇀",
    rightleftarrows: "⇄",
    rightleftharpoons: "⇌",
    rightrightarrows: "⇉",
    rightsquigarrow: "↝",
    RightTee: "⊢",
    RightTeeArrow: "↦",
    RightTeeVector: "⥛",
    rightthreetimes: "⋌",
    RightTriangle: "⊳",
    RightTriangleBar: "⧐",
    RightTriangleEqual: "⊵",
    RightUpDownVector: "⥏",
    RightUpTeeVector: "⥜",
    RightUpVector: "↾",
    RightUpVectorBar: "⥔",
    RightVector: "⇀",
    RightVectorBar: "⥓",
    ring: "˚",
    risingdotseq: "≓",
    rlarr: "⇄",
    rlhar: "⇌",
    rlm: "‏",
    rmoust: "⎱",
    rmoustache: "⎱",
    rnmid: "⫮",
    roang: "⟭",
    roarr: "⇾",
    robrk: "⟧",
    ropar: "⦆",
    Ropf: "ℝ",
    ropf: "𝕣",
    roplus: "⨮",
    rotimes: "⨵",
    RoundImplies: "⥰",
    rpar: ")",
    rpargt: "⦔",
    rppolint: "⨒",
    rrarr: "⇉",
    Rrightarrow: "⇛",
    rsaquo: "›",
    Rscr: "ℛ",
    rscr: "𝓇",
    Rsh: "↱",
    rsh: "↱",
    rsqb: "]",
    rsquo: "’",
    rsquor: "’",
    rthree: "⋌",
    rtimes: "⋊",
    rtri: "▹",
    rtrie: "⊵",
    rtrif: "▸",
    rtriltri: "⧎",
    RuleDelayed: "⧴",
    ruluhar: "⥨",
    rx: "℞",
    Sacute: "Ś",
    sacute: "ś",
    sbquo: "‚",
    Sc: "⪼",
    sc: "≻",
    scap: "⪸",
    Scaron: "Š",
    scaron: "š",
    sccue: "≽",
    scE: "⪴",
    sce: "⪰",
    Scedil: "Ş",
    scedil: "ş",
    Scirc: "Ŝ",
    scirc: "ŝ",
    scnap: "⪺",
    scnE: "⪶",
    scnsim: "⋩",
    scpolint: "⨓",
    scsim: "≿",
    Scy: "С",
    scy: "с",
    sdot: "⋅",
    sdotb: "⊡",
    sdote: "⩦",
    searhk: "⤥",
    seArr: "⇘",
    searr: "↘",
    searrow: "↘",
    sect: "§",
    semi: ";",
    seswar: "⤩",
    setminus: "∖",
    setmn: "∖",
    sext: "✶",
    Sfr: "𝔖",
    sfr: "𝔰",
    sfrown: "⌢",
    sharp: "♯",
    SHCHcy: "Щ",
    shchcy: "щ",
    SHcy: "Ш",
    shcy: "ш",
    ShortDownArrow: "↓",
    ShortLeftArrow: "←",
    shortmid: "∣",
    shortparallel: "∥",
    ShortRightArrow: "→",
    ShortUpArrow: "↑",
    shy: "­",
    Sigma: "Σ",
    sigma: "σ",
    sigmaf: "ς",
    sigmav: "ς",
    sim: "∼",
    simdot: "⩪",
    sime: "≃",
    simeq: "≃",
    simg: "⪞",
    simgE: "⪠",
    siml: "⪝",
    simlE: "⪟",
    simne: "≆",
    simplus: "⨤",
    simrarr: "⥲",
    slarr: "←",
    SmallCircle: "∘",
    smallsetminus: "∖",
    smashp: "⨳",
    smeparsl: "⧤",
    smid: "∣",
    smile: "⌣",
    smt: "⪪",
    smte: "⪬",
    smtes: "⪬︀",
    SOFTcy: "Ь",
    softcy: "ь",
    sol: "/",
    solb: "⧄",
    solbar: "⌿",
    Sopf: "𝕊",
    sopf: "𝕤",
    spades: "♠",
    spadesuit: "♠",
    spar: "∥",
    sqcap: "⊓",
    sqcaps: "⊓︀",
    sqcup: "⊔",
    sqcups: "⊔︀",
    Sqrt: "√",
    sqsub: "⊏",
    sqsube: "⊑",
    sqsubset: "⊏",
    sqsubseteq: "⊑",
    sqsup: "⊐",
    sqsupe: "⊒",
    sqsupset: "⊐",
    sqsupseteq: "⊒",
    squ: "□",
    Square: "□",
    square: "□",
    SquareIntersection: "⊓",
    SquareSubset: "⊏",
    SquareSubsetEqual: "⊑",
    SquareSuperset: "⊐",
    SquareSupersetEqual: "⊒",
    SquareUnion: "⊔",
    squarf: "▪",
    squf: "▪",
    srarr: "→",
    Sscr: "𝒮",
    sscr: "𝓈",
    ssetmn: "∖",
    ssmile: "⌣",
    sstarf: "⋆",
    Star: "⋆",
    star: "☆",
    starf: "★",
    straightepsilon: "ϵ",
    straightphi: "ϕ",
    strns: "¯",
    Sub: "⋐",
    sub: "⊂",
    subdot: "⪽",
    subE: "⫅",
    sube: "⊆",
    subedot: "⫃",
    submult: "⫁",
    subnE: "⫋",
    subne: "⊊",
    subplus: "⪿",
    subrarr: "⥹",
    Subset: "⋐",
    subset: "⊂",
    subseteq: "⊆",
    subseteqq: "⫅",
    SubsetEqual: "⊆",
    subsetneq: "⊊",
    subsetneqq: "⫋",
    subsim: "⫇",
    subsub: "⫕",
    subsup: "⫓",
    succ: "≻",
    succapprox: "⪸",
    succcurlyeq: "≽",
    Succeeds: "≻",
    SucceedsEqual: "⪰",
    SucceedsSlantEqual: "≽",
    SucceedsTilde: "≿",
    succeq: "⪰",
    succnapprox: "⪺",
    succneqq: "⪶",
    succnsim: "⋩",
    succsim: "≿",
    SuchThat: "∋",
    Sum: "∑",
    sum: "∑",
    sung: "♪",
    Sup: "⋑",
    sup: "⊃",
    sup1: "¹",
    sup2: "²",
    sup3: "³",
    supdot: "⪾",
    supdsub: "⫘",
    supE: "⫆",
    supe: "⊇",
    supedot: "⫄",
    Superset: "⊃",
    SupersetEqual: "⊇",
    suphsol: "⟉",
    suphsub: "⫗",
    suplarr: "⥻",
    supmult: "⫂",
    supnE: "⫌",
    supne: "⊋",
    supplus: "⫀",
    Supset: "⋑",
    supset: "⊃",
    supseteq: "⊇",
    supseteqq: "⫆",
    supsetneq: "⊋",
    supsetneqq: "⫌",
    supsim: "⫈",
    supsub: "⫔",
    supsup: "⫖",
    swarhk: "⤦",
    swArr: "⇙",
    swarr: "↙",
    swarrow: "↙",
    swnwar: "⤪",
    szlig: "ß",
    Tab: "	",
    target: "⌖",
    Tau: "Τ",
    tau: "τ",
    tbrk: "⎴",
    Tcaron: "Ť",
    tcaron: "ť",
    Tcedil: "Ţ",
    tcedil: "ţ",
    Tcy: "Т",
    tcy: "т",
    tdot: "⃛",
    telrec: "⌕",
    Tfr: "𝔗",
    tfr: "𝔱",
    there4: "∴",
    Therefore: "∴",
    therefore: "∴",
    Theta: "Θ",
    theta: "θ",
    thetasym: "ϑ",
    thetav: "ϑ",
    thickapprox: "≈",
    thicksim: "∼",
    ThickSpace: "  ",
    thinsp: " ",
    ThinSpace: " ",
    thkap: "≈",
    thksim: "∼",
    THORN: "Þ",
    thorn: "þ",
    Tilde: "∼",
    tilde: "˜",
    TildeEqual: "≃",
    TildeFullEqual: "≅",
    TildeTilde: "≈",
    times: "×",
    timesb: "⊠",
    timesbar: "⨱",
    timesd: "⨰",
    tint: "∭",
    toea: "⤨",
    top: "⊤",
    topbot: "⌶",
    topcir: "⫱",
    Topf: "𝕋",
    topf: "𝕥",
    topfork: "⫚",
    tosa: "⤩",
    tprime: "‴",
    TRADE: "™",
    trade: "™",
    triangle: "▵",
    triangledown: "▿",
    triangleleft: "◃",
    trianglelefteq: "⊴",
    triangleq: "≜",
    triangleright: "▹",
    trianglerighteq: "⊵",
    tridot: "◬",
    trie: "≜",
    triminus: "⨺",
    TripleDot: "⃛",
    triplus: "⨹",
    trisb: "⧍",
    tritime: "⨻",
    trpezium: "⏢",
    Tscr: "𝒯",
    tscr: "𝓉",
    TScy: "Ц",
    tscy: "ц",
    TSHcy: "Ћ",
    tshcy: "ћ",
    Tstrok: "Ŧ",
    tstrok: "ŧ",
    twixt: "≬",
    twoheadleftarrow: "↞",
    twoheadrightarrow: "↠",
    Uacute: "Ú",
    uacute: "ú",
    Uarr: "↟",
    uArr: "⇑",
    uarr: "↑",
    Uarrocir: "⥉",
    Ubrcy: "Ў",
    ubrcy: "ў",
    Ubreve: "Ŭ",
    ubreve: "ŭ",
    Ucirc: "Û",
    ucirc: "û",
    Ucy: "У",
    ucy: "у",
    udarr: "⇅",
    Udblac: "Ű",
    udblac: "ű",
    udhar: "⥮",
    ufisht: "⥾",
    Ufr: "𝔘",
    ufr: "𝔲",
    Ugrave: "Ù",
    ugrave: "ù",
    uHar: "⥣",
    uharl: "↿",
    uharr: "↾",
    uhblk: "▀",
    ulcorn: "⌜",
    ulcorner: "⌜",
    ulcrop: "⌏",
    ultri: "◸",
    Umacr: "Ū",
    umacr: "ū",
    uml: "¨",
    UnderBar: "_",
    UnderBrace: "⏟",
    UnderBracket: "⎵",
    UnderParenthesis: "⏝",
    Union: "⋃",
    UnionPlus: "⊎",
    Uogon: "Ų",
    uogon: "ų",
    Uopf: "𝕌",
    uopf: "𝕦",
    UpArrow: "↑",
    Uparrow: "⇑",
    uparrow: "↑",
    UpArrowBar: "⤒",
    UpArrowDownArrow: "⇅",
    UpDownArrow: "↕",
    Updownarrow: "⇕",
    updownarrow: "↕",
    UpEquilibrium: "⥮",
    upharpoonleft: "↿",
    upharpoonright: "↾",
    uplus: "⊎",
    UpperLeftArrow: "↖",
    UpperRightArrow: "↗",
    Upsi: "ϒ",
    upsi: "υ",
    upsih: "ϒ",
    Upsilon: "Υ",
    upsilon: "υ",
    UpTee: "⊥",
    UpTeeArrow: "↥",
    upuparrows: "⇈",
    urcorn: "⌝",
    urcorner: "⌝",
    urcrop: "⌎",
    Uring: "Ů",
    uring: "ů",
    urtri: "◹",
    Uscr: "𝒰",
    uscr: "𝓊",
    utdot: "⋰",
    Utilde: "Ũ",
    utilde: "ũ",
    utri: "▵",
    utrif: "▴",
    uuarr: "⇈",
    Uuml: "Ü",
    uuml: "ü",
    uwangle: "⦧",
    vangrt: "⦜",
    varepsilon: "ϵ",
    varkappa: "ϰ",
    varnothing: "∅",
    varphi: "ϕ",
    varpi: "ϖ",
    varpropto: "∝",
    vArr: "⇕",
    varr: "↕",
    varrho: "ϱ",
    varsigma: "ς",
    varsubsetneq: "⊊︀",
    varsubsetneqq: "⫋︀",
    varsupsetneq: "⊋︀",
    varsupsetneqq: "⫌︀",
    vartheta: "ϑ",
    vartriangleleft: "⊲",
    vartriangleright: "⊳",
    Vbar: "⫫",
    vBar: "⫨",
    vBarv: "⫩",
    Vcy: "В",
    vcy: "в",
    VDash: "⊫",
    Vdash: "⊩",
    vDash: "⊨",
    vdash: "⊢",
    Vdashl: "⫦",
    Vee: "⋁",
    vee: "∨",
    veebar: "⊻",
    veeeq: "≚",
    vellip: "⋮",
    Verbar: "‖",
    verbar: "|",
    Vert: "‖",
    vert: "|",
    VerticalBar: "∣",
    VerticalLine: "|",
    VerticalSeparator: "❘",
    VerticalTilde: "≀",
    VeryThinSpace: " ",
    Vfr: "𝔙",
    vfr: "𝔳",
    vltri: "⊲",
    vnsub: "⊂⃒",
    vnsup: "⊃⃒",
    Vopf: "𝕍",
    vopf: "𝕧",
    vprop: "∝",
    vrtri: "⊳",
    Vscr: "𝒱",
    vscr: "𝓋",
    vsubnE: "⫋︀",
    vsubne: "⊊︀",
    vsupnE: "⫌︀",
    vsupne: "⊋︀",
    Vvdash: "⊪",
    vzigzag: "⦚",
    Wcirc: "Ŵ",
    wcirc: "ŵ",
    wedbar: "⩟",
    Wedge: "⋀",
    wedge: "∧",
    wedgeq: "≙",
    weierp: "℘",
    Wfr: "𝔚",
    wfr: "𝔴",
    Wopf: "𝕎",
    wopf: "𝕨",
    wp: "℘",
    wr: "≀",
    wreath: "≀",
    Wscr: "𝒲",
    wscr: "𝓌",
    xcap: "⋂",
    xcirc: "◯",
    xcup: "⋃",
    xdtri: "▽",
    Xfr: "𝔛",
    xfr: "𝔵",
    xhArr: "⟺",
    xharr: "⟷",
    Xi: "Ξ",
    xi: "ξ",
    xlArr: "⟸",
    xlarr: "⟵",
    xmap: "⟼",
    xnis: "⋻",
    xodot: "⨀",
    Xopf: "𝕏",
    xopf: "𝕩",
    xoplus: "⨁",
    xotime: "⨂",
    xrArr: "⟹",
    xrarr: "⟶",
    Xscr: "𝒳",
    xscr: "𝓍",
    xsqcup: "⨆",
    xuplus: "⨄",
    xutri: "△",
    xvee: "⋁",
    xwedge: "⋀",
    Yacute: "Ý",
    yacute: "ý",
    YAcy: "Я",
    yacy: "я",
    Ycirc: "Ŷ",
    ycirc: "ŷ",
    Ycy: "Ы",
    ycy: "ы",
    yen: "¥",
    Yfr: "𝔜",
    yfr: "𝔶",
    YIcy: "Ї",
    yicy: "ї",
    Yopf: "𝕐",
    yopf: "𝕪",
    Yscr: "𝒴",
    yscr: "𝓎",
    YUcy: "Ю",
    yucy: "ю",
    Yuml: "Ÿ",
    yuml: "ÿ",
    Zacute: "Ź",
    zacute: "ź",
    Zcaron: "Ž",
    zcaron: "ž",
    Zcy: "З",
    zcy: "з",
    Zdot: "Ż",
    zdot: "ż",
    zeetrf: "ℨ",
    ZeroWidthSpace: "​",
    Zeta: "Ζ",
    zeta: "ζ",
    Zfr: "ℨ",
    zfr: "𝔷",
    ZHcy: "Ж",
    zhcy: "ж",
    zigrarr: "⇝",
    Zopf: "ℤ",
    zopf: "𝕫",
    Zscr: "𝒵",
    zscr: "𝓏",
    zwj: "‍",
    zwnj: "‌"
  }), e12.entityMap = e12.HTML_ENTITIES;
}(hn);
var dn = {};
var un = Li.NAMESPACE;
var cn = /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;
var pn = new RegExp("[\\-\\.0-9" + cn.source.slice(1, -1) + "\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");
var mn = new RegExp("^" + cn.source + pn.source + "*(?::" + cn.source + pn.source + "*)?$");
var gn = 0;
var fn = 1;
var yn = 2;
var _n = 3;
var vn = 4;
var bn = 5;
var Tn = 6;
var Sn = 7;
function En(e12, t3) {
  this.message = e12, this.locator = t3, Error.captureStackTrace && Error.captureStackTrace(this, En);
}
function wn() {
}
function Cn(e12, t3, i4, s6, n6) {
  function r3(e13) {
    if (e13 > 65535) {
      var t4 = 55296 + ((e13 -= 65536) >> 10), i5 = 56320 + (1023 & e13);
      return String.fromCharCode(t4, i5);
    }
    return String.fromCharCode(e13);
  }
  function a6(e13) {
    var t4 = e13.slice(1, -1);
    return Object.hasOwnProperty.call(i4, t4) ? i4[t4] : "#" === t4.charAt(0) ? r3(parseInt(t4.substr(1).replace("x", "0x"))) : (n6.error("entity not found:" + e13), e13);
  }
  function o4(t4) {
    if (t4 > g4) {
      var i5 = e12.substring(g4, t4).replace(/&#?\w+;/g, a6);
      c2 && l5(g4), s6.characters(i5, 0, t4 - g4), g4 = t4;
    }
  }
  function l5(t4, i5) {
    for (; t4 >= d4 && (i5 = u4.exec(e12)); ) h = i5.index, d4 = h + i5[0].length, c2.lineNumber++;
    c2.columnNumber = t4 - h + 1;
  }
  for (var h = 0, d4 = 0, u4 = /.*(?:\r\n?|\n)|.*$/g, c2 = s6.locator, p2 = [{
    currentNSMap: t3
  }], m6 = {}, g4 = 0; ; ) {
    try {
      var f6 = e12.indexOf("<", g4);
      if (f6 < 0) {
        if (!e12.substr(g4).match(/^\s*$/)) {
          var y4 = s6.doc, _3 = y4.createTextNode(e12.substr(g4));
          y4.appendChild(_3), s6.currentElement = _3;
        }
        return;
      }
      switch (f6 > g4 && o4(f6), e12.charAt(f6 + 1)) {
        case "/":
          var v3 = e12.indexOf(">", f6 + 3), b2 = e12.substring(f6 + 2, v3).replace(/[ \t\n\r]+$/g, ""), T2 = p2.pop();
          v3 < 0 ? (b2 = e12.substring(f6 + 2).replace(/[\s<].*/, ""), n6.error("end tag name: " + b2 + " is not complete:" + T2.tagName), v3 = f6 + 1 + b2.length) : b2.match(/\s</) && (b2 = b2.replace(/[\s<].*/, ""), n6.error("end tag name: " + b2 + " maybe not complete"), v3 = f6 + 1 + b2.length);
          var S5 = T2.localNSMap, E4 = T2.tagName == b2;
          if (E4 || T2.tagName && T2.tagName.toLowerCase() == b2.toLowerCase()) {
            if (s6.endElement(T2.uri, T2.localName, b2), S5) for (var w4 in S5) Object.prototype.hasOwnProperty.call(S5, w4) && s6.endPrefixMapping(w4);
            E4 || n6.fatalError("end tag name: " + b2 + " is not match the current start tagName:" + T2.tagName);
          } else p2.push(T2);
          v3++;
          break;
        case "?":
          c2 && l5(f6), v3 = On(e12, f6, s6);
          break;
        case "!":
          c2 && l5(f6), v3 = Ln(e12, f6, s6, n6);
          break;
        default:
          c2 && l5(f6);
          var C3 = new Nn(), k2 = p2[p2.length - 1].currentNSMap, x2 = (v3 = xn(e12, f6, C3, k2, a6, n6), C3.length);
          if (!C3.closed && Dn(e12, v3, C3.tagName, m6) && (C3.closed = true, i4.nbsp || n6.warning("unclosed xml attribute")), c2 && x2) {
            for (var I2 = kn(c2, {}), A2 = 0; A2 < x2; A2++) {
              var D2 = C3[A2];
              l5(D2.offset), D2.locator = kn(c2, {});
            }
            s6.locator = I2, In(C3, s6, k2) && p2.push(C3), s6.locator = c2;
          } else In(C3, s6, k2) && p2.push(C3);
          un.isHTML(C3.uri) && !C3.closed ? v3 = An(e12, v3, C3.tagName, a6, s6) : v3++;
      }
    } catch (l_) {
      if (l_ instanceof En) throw l_;
      n6.error("element parse error: " + l_), v3 = -1;
    }
    v3 > g4 ? g4 = v3 : o4(Math.max(f6, g4) + 1);
  }
}
function kn(e12, t3) {
  return t3.lineNumber = e12.lineNumber, t3.columnNumber = e12.columnNumber, t3;
}
function xn(e12, t3, i4, s6, n6, r3) {
  function a6(e13, t4, s7) {
    i4.attributeNames.hasOwnProperty(e13) && r3.fatalError("Attribute " + e13 + " redefined"), i4.addValue(e13, t4.replace(/[\t\n\r]/g, " ").replace(/&#?\w+;/g, n6), s7);
  }
  for (var o4, l5 = ++t3, h = gn; ; ) {
    var d4 = e12.charAt(l5);
    switch (d4) {
      case "=":
        if (h === fn) o4 = e12.slice(t3, l5), h = _n;
        else {
          if (h !== yn) throw new Error("attribute equal must after attrName");
          h = _n;
        }
        break;
      case "'":
      case '"':
        if (h === _n || h === fn) {
          if (h === fn && (r3.warning('attribute value must after "="'), o4 = e12.slice(t3, l5)), t3 = l5 + 1, !((l5 = e12.indexOf(d4, t3)) > 0)) throw new Error("attribute value no end '" + d4 + "' match");
          a6(o4, u4 = e12.slice(t3, l5), t3 - 1), h = bn;
        } else {
          if (h != vn) throw new Error('attribute value must after "="');
          a6(o4, u4 = e12.slice(t3, l5), t3), r3.warning('attribute "' + o4 + '" missed start quot(' + d4 + ")!!"), t3 = l5 + 1, h = bn;
        }
        break;
      case "/":
        switch (h) {
          case gn:
            i4.setTagName(e12.slice(t3, l5));
          case bn:
          case Tn:
          case Sn:
            h = Sn, i4.closed = true;
          case vn:
          case fn:
            break;
          case yn:
            i4.closed = true;
            break;
          default:
            throw new Error("attribute invalid close char('/')");
        }
        break;
      case "":
        return r3.error("unexpected end of input"), h == gn && i4.setTagName(e12.slice(t3, l5)), l5;
      case ">":
        switch (h) {
          case gn:
            i4.setTagName(e12.slice(t3, l5));
          case bn:
          case Tn:
          case Sn:
            break;
          case vn:
          case fn:
            "/" === (u4 = e12.slice(t3, l5)).slice(-1) && (i4.closed = true, u4 = u4.slice(0, -1));
          case yn:
            h === yn && (u4 = o4), h == vn ? (r3.warning('attribute "' + u4 + '" missed quot(")!'), a6(o4, u4, t3)) : (un.isHTML(s6[""]) && u4.match(/^(?:disabled|checked|selected)$/i) || r3.warning('attribute "' + u4 + '" missed value!! "' + u4 + '" instead!!'), a6(u4, u4, t3));
            break;
          case _n:
            throw new Error("attribute value missed!!");
        }
        return l5;
      case "":
        d4 = " ";
      default:
        if (d4 <= " ") switch (h) {
          case gn:
            i4.setTagName(e12.slice(t3, l5)), h = Tn;
            break;
          case fn:
            o4 = e12.slice(t3, l5), h = yn;
            break;
          case vn:
            var u4 = e12.slice(t3, l5);
            r3.warning('attribute "' + u4 + '" missed quot(")!!'), a6(o4, u4, t3);
          case bn:
            h = Tn;
        }
        else switch (h) {
          case yn:
            i4.tagName, un.isHTML(s6[""]) && o4.match(/^(?:disabled|checked|selected)$/i) || r3.warning('attribute "' + o4 + '" missed value!! "' + o4 + '" instead2!!'), a6(o4, o4, t3), t3 = l5, h = fn;
            break;
          case bn:
            r3.warning('attribute space is required"' + o4 + '"!!');
          case Tn:
            h = fn, t3 = l5;
            break;
          case _n:
            h = vn, t3 = l5;
            break;
          case Sn:
            throw new Error("elements closed character '/' and '>' must be connected to");
        }
    }
    l5++;
  }
}
function In(e12, t3, i4) {
  for (var s6 = e12.tagName, n6 = null, r3 = e12.length; r3--; ) {
    var a6 = e12[r3], o4 = a6.qName, l5 = a6.value;
    if ((c2 = o4.indexOf(":")) > 0) var h = a6.prefix = o4.slice(0, c2), d4 = o4.slice(c2 + 1), u4 = "xmlns" === h && d4;
    else d4 = o4, h = null, u4 = "xmlns" === o4 && "";
    a6.localName = d4, false !== u4 && (null == n6 && (n6 = {}, Pn(i4, i4 = {})), i4[u4] = n6[u4] = l5, a6.uri = un.XMLNS, t3.startPrefixMapping(u4, l5));
  }
  for (r3 = e12.length; r3--; ) {
    (h = (a6 = e12[r3]).prefix) && ("xml" === h && (a6.uri = un.XML), "xmlns" !== h && (a6.uri = i4[h || ""]));
  }
  var c2;
  (c2 = s6.indexOf(":")) > 0 ? (h = e12.prefix = s6.slice(0, c2), d4 = e12.localName = s6.slice(c2 + 1)) : (h = null, d4 = e12.localName = s6);
  var p2 = e12.uri = i4[h || ""];
  if (t3.startElement(p2, d4, s6, e12), !e12.closed) return e12.currentNSMap = i4, e12.localNSMap = n6, true;
  if (t3.endElement(p2, d4, s6), n6) for (h in n6) Object.prototype.hasOwnProperty.call(n6, h) && t3.endPrefixMapping(h);
}
function An(e12, t3, i4, s6, n6) {
  if (/^(?:script|textarea)$/i.test(i4)) {
    var r3 = e12.indexOf("</" + i4 + ">", t3), a6 = e12.substring(t3 + 1, r3);
    if (/[&<]/.test(a6)) return /^script$/i.test(i4) ? (n6.characters(a6, 0, a6.length), r3) : (a6 = a6.replace(/&#?\w+;/g, s6), n6.characters(a6, 0, a6.length), r3);
  }
  return t3 + 1;
}
function Dn(e12, t3, i4, s6) {
  var n6 = s6[i4];
  return null == n6 && ((n6 = e12.lastIndexOf("</" + i4 + ">")) < t3 && (n6 = e12.lastIndexOf("</" + i4)), s6[i4] = n6), n6 < t3;
}
function Pn(e12, t3) {
  for (var i4 in e12) Object.prototype.hasOwnProperty.call(e12, i4) && (t3[i4] = e12[i4]);
}
function Ln(e12, t3, i4, s6) {
  if ("-" === e12.charAt(t3 + 2)) return "-" === e12.charAt(t3 + 3) ? (n6 = e12.indexOf("-->", t3 + 4)) > t3 ? (i4.comment(e12, t3 + 4, n6 - t3 - 4), n6 + 3) : (s6.error("Unclosed comment"), -1) : -1;
  if ("CDATA[" == e12.substr(t3 + 3, 6)) {
    var n6 = e12.indexOf("]]>", t3 + 9);
    return i4.startCDATA(), i4.characters(e12, t3 + 9, n6 - t3 - 9), i4.endCDATA(), n6 + 3;
  }
  var r3 = Rn(e12, t3), a6 = r3.length;
  if (a6 > 1 && /!doctype/i.test(r3[0][0])) {
    var o4 = r3[1][0], l5 = false, h = false;
    a6 > 3 && (/^public$/i.test(r3[2][0]) ? (l5 = r3[3][0], h = a6 > 4 && r3[4][0]) : /^system$/i.test(r3[2][0]) && (h = r3[3][0]));
    var d4 = r3[a6 - 1];
    return i4.startDTD(o4, l5, h), i4.endDTD(), d4.index + d4[0].length;
  }
  return -1;
}
function On(e12, t3, i4) {
  var s6 = e12.indexOf("?>", t3);
  if (s6) {
    var n6 = e12.substring(t3, s6).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
    return n6 ? (n6[0].length, i4.processingInstruction(n6[1], n6[2]), s6 + 2) : -1;
  }
  return -1;
}
function Nn() {
  this.attributeNames = {};
}
function Rn(e12, t3) {
  var i4, s6 = [], n6 = /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
  for (n6.lastIndex = t3, n6.exec(e12); i4 = n6.exec(e12); ) if (s6.push(i4), i4[1]) return s6;
}
En.prototype = new Error(), En.prototype.name = En.name, wn.prototype = {
  parse: function(e12, t3, i4) {
    var s6 = this.domBuilder;
    s6.startDocument(), Pn(t3, t3 = {}), Cn(e12, t3, i4, s6, this.errorHandler), s6.endDocument();
  }
}, Nn.prototype = {
  setTagName: function(e12) {
    if (!mn.test(e12)) throw new Error("invalid tagName:" + e12);
    this.tagName = e12;
  },
  addValue: function(e12, t3, i4) {
    if (!mn.test(e12)) throw new Error("invalid attribute:" + e12);
    this.attributeNames[e12] = this.length, this[this.length++] = {
      qName: e12,
      value: t3,
      offset: i4
    };
  },
  length: 0,
  getLocalName: function(e12) {
    return this[e12].localName;
  },
  getLocator: function(e12) {
    return this[e12].locator;
  },
  getQName: function(e12) {
    return this[e12].qName;
  },
  getURI: function(e12) {
    return this[e12].uri;
  },
  getValue: function(e12) {
    return this[e12].value;
  }
}, dn.XMLReader = wn, dn.ParseError = En;
var Mn = Li;
var Un = hn;
var Bn = dn;
var Fn = Pi.DOMImplementation;
var qn = Mn.NAMESPACE;
var jn = Bn.ParseError;
var $n = Bn.XMLReader;
function Hn(e12) {
  return e12.replace(/\r[\n\u0085]/g, "\n").replace(/[\r\u0085\u2028]/g, "\n");
}
function Vn(e12) {
  this.options = e12 || {
    locator: {}
  };
}
function zn(e12, t3, i4) {
  if (!e12) {
    if (t3 instanceof Wn) return t3;
    e12 = t3;
  }
  var s6 = {}, n6 = e12 instanceof Function;
  function r3(t4) {
    var r4 = e12[t4];
    !r4 && n6 && (r4 = 2 == e12.length ? function(i5) {
      e12(t4, i5);
    } : e12), s6[t4] = r4 && function(e13) {
      r4("[xmldom " + t4 + "]	" + e13 + Xn(i4));
    } || function() {
    };
  }
  return i4 = i4 || {}, r3("warning"), r3("error"), r3("fatalError"), s6;
}
function Wn() {
  this.cdata = false;
}
function Gn(e12, t3) {
  t3.lineNumber = e12.lineNumber, t3.columnNumber = e12.columnNumber;
}
function Xn(e12) {
  if (e12) return "\n@" + (e12.systemId || "") + "#[line:" + e12.lineNumber + ",col:" + e12.columnNumber + "]";
}
function Kn(e12, t3, i4) {
  return "string" == typeof e12 ? e12.substr(t3, i4) : e12.length >= t3 + i4 || t3 ? new java.lang.String(e12, t3, i4) + "" : e12;
}
function Yn(e12, t3) {
  e12.currentElement ? e12.currentElement.appendChild(t3) : e12.doc.appendChild(t3);
}
Vn.prototype.parseFromString = function(e12, t3) {
  var i4 = this.options, s6 = new $n(), n6 = i4.domBuilder || new Wn(), r3 = i4.errorHandler, a6 = i4.locator, o4 = i4.xmlns || {}, l5 = /\/x?html?$/.test(t3), h = l5 ? Un.HTML_ENTITIES : Un.XML_ENTITIES;
  a6 && n6.setDocumentLocator(a6), s6.errorHandler = zn(r3, n6, a6), s6.domBuilder = i4.domBuilder || n6, l5 && (o4[""] = qn.HTML), o4.xml = o4.xml || qn.XML;
  var d4 = i4.normalizeLineEndings || Hn;
  return e12 && "string" == typeof e12 ? s6.parse(d4(e12), o4, h) : s6.errorHandler.error("invalid doc source"), n6.doc;
}, Wn.prototype = {
  startDocument: function() {
    this.doc = new Fn().createDocument(null, null, null), this.locator && (this.doc.documentURI = this.locator.systemId);
  },
  startElement: function(e12, t3, i4, s6) {
    var n6 = this.doc, r3 = n6.createElementNS(e12, i4 || t3), a6 = s6.length;
    Yn(this, r3), this.currentElement = r3, this.locator && Gn(this.locator, r3);
    for (var o4 = 0; o4 < a6; o4++) {
      e12 = s6.getURI(o4);
      var l5 = s6.getValue(o4), h = (i4 = s6.getQName(o4), n6.createAttributeNS(e12, i4));
      this.locator && Gn(s6.getLocator(o4), h), h.value = h.nodeValue = l5, r3.setAttributeNode(h);
    }
  },
  endElement: function(e12, t3, i4) {
    var s6 = this.currentElement;
    s6.tagName, this.currentElement = s6.parentNode;
  },
  startPrefixMapping: function(e12, t3) {
  },
  endPrefixMapping: function(e12) {
  },
  processingInstruction: function(e12, t3) {
    var i4 = this.doc.createProcessingInstruction(e12, t3);
    this.locator && Gn(this.locator, i4), Yn(this, i4);
  },
  ignorableWhitespace: function(e12, t3, i4) {
  },
  characters: function(e12, t3, i4) {
    if (e12 = Kn.apply(this, arguments)) {
      if (this.cdata) var s6 = this.doc.createCDATASection(e12);
      else s6 = this.doc.createTextNode(e12);
      this.currentElement ? this.currentElement.appendChild(s6) : /^\s*$/.test(e12) && this.doc.appendChild(s6), this.locator && Gn(this.locator, s6);
    }
  },
  skippedEntity: function(e12) {
  },
  endDocument: function() {
    this.doc.normalize();
  },
  setDocumentLocator: function(e12) {
    (this.locator = e12) && (e12.lineNumber = 0);
  },
  comment: function(e12, t3, i4) {
    e12 = Kn.apply(this, arguments);
    var s6 = this.doc.createComment(e12);
    this.locator && Gn(this.locator, s6), Yn(this, s6);
  },
  startCDATA: function() {
    this.cdata = true;
  },
  endCDATA: function() {
    this.cdata = false;
  },
  startDTD: function(e12, t3, i4) {
    var s6 = this.doc.implementation;
    if (s6 && s6.createDocumentType) {
      var n6 = s6.createDocumentType(e12, t3, i4);
      this.locator && Gn(this.locator, n6), Yn(this, n6), this.doc.doctype = n6;
    }
  },
  warning: function(e12) {
    console.warn("[xmldom warning]	" + e12, Xn(this.locator));
  },
  error: function(e12) {
    console.error("[xmldom error]	" + e12, Xn(this.locator));
  },
  fatalError: function(e12) {
    throw new jn(e12, this.locator);
  }
}, "endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g, function(e12) {
  Wn.prototype[e12] = function() {
    return null;
  };
}), ln.__DOMHandler = Wn, ln.normalizeLineEndings = Hn, ln.DOMParser = Vn;
var Qn = ln.DOMParser;
var Jn = (e12) => !!e12 && "object" == typeof e12;
var Zn = (...e12) => e12.reduce((e13, t3) => ("object" != typeof t3 || Object.keys(t3).forEach((i4) => {
  Array.isArray(e13[i4]) && Array.isArray(t3[i4]) ? e13[i4] = e13[i4].concat(t3[i4]) : Jn(e13[i4]) && Jn(t3[i4]) ? e13[i4] = Zn(e13[i4], t3[i4]) : e13[i4] = t3[i4];
}), e13), {});
var er = (e12) => Object.keys(e12).map((t3) => e12[t3]);
var tr = (e12, t3) => {
  const i4 = [];
  for (let s6 = e12; s6 < t3; s6++) i4.push(s6);
  return i4;
};
var ir = (e12) => e12.reduce((e13, t3) => e13.concat(t3), []);
var sr = (e12) => {
  if (!e12.length) return [];
  const t3 = [];
  for (let i4 = 0; i4 < e12.length; i4++) t3.push(e12[i4]);
  return t3;
};
var nr = (e12, t3) => e12.reduce((e13, i4, s6) => (i4[t3] && e13.push(s6), e13), []);
var rr = (e12, t3) => er(e12.reduce((e13, i4) => (i4.forEach((i5) => {
  e13[t3(i5)] = i5;
}), e13), {}));
var ar = {
  INVALID_NUMBER_OF_PERIOD: "INVALID_NUMBER_OF_PERIOD",
  INVALID_NUMBER_OF_CONTENT_STEERING: "INVALID_NUMBER_OF_CONTENT_STEERING",
  DASH_EMPTY_MANIFEST: "DASH_EMPTY_MANIFEST",
  DASH_INVALID_XML: "DASH_INVALID_XML",
  NO_BASE_URL: "NO_BASE_URL",
  MISSING_SEGMENT_INFORMATION: "MISSING_SEGMENT_INFORMATION",
  SEGMENT_TIME_UNSPECIFIED: "SEGMENT_TIME_UNSPECIFIED",
  UNSUPPORTED_UTC_TIMING_SCHEME: "UNSUPPORTED_UTC_TIMING_SCHEME"
};
var or = ({
  baseUrl: e12 = "",
  source: t3 = "",
  range: i4 = "",
  indexRange: s6 = ""
}) => {
  const n6 = {
    uri: t3,
    resolvedUri: Bt(e12 || "", t3)
  };
  if (i4 || s6) {
    const e13 = (i4 || s6).split("-");
    let t4, r3 = g3.BigInt ? g3.BigInt(e13[0]) : parseInt(e13[0], 10), a6 = g3.BigInt ? g3.BigInt(e13[1]) : parseInt(e13[1], 10);
    r3 < Number.MAX_SAFE_INTEGER && "bigint" == typeof r3 && (r3 = Number(r3)), a6 < Number.MAX_SAFE_INTEGER && "bigint" == typeof a6 && (a6 = Number(a6)), t4 = "bigint" == typeof a6 || "bigint" == typeof r3 ? g3.BigInt(a6) - g3.BigInt(r3) + g3.BigInt(1) : a6 - r3 + 1, "bigint" == typeof t4 && t4 < Number.MAX_SAFE_INTEGER && (t4 = Number(t4)), n6.byterange = {
      length: t4,
      offset: r3
    };
  }
  return n6;
};
var lr = (e12) => {
  let t3;
  return t3 = "bigint" == typeof e12.offset || "bigint" == typeof e12.length ? g3.BigInt(e12.offset) + g3.BigInt(e12.length) - g3.BigInt(1) : e12.offset + e12.length - 1, `${e12.offset}-${t3}`;
};
var hr = (e12) => (e12 && "number" != typeof e12 && (e12 = parseInt(e12, 10)), isNaN(e12) ? null : e12);
var dr = {
  static(e12) {
    const {
      duration: t3,
      timescale: i4 = 1,
      sourceDuration: s6,
      periodDuration: n6
    } = e12, r3 = hr(e12.endNumber), a6 = t3 / i4;
    return "number" == typeof r3 ? {
      start: 0,
      end: r3
    } : "number" == typeof n6 ? {
      start: 0,
      end: n6 / a6
    } : {
      start: 0,
      end: s6 / a6
    };
  },
  dynamic(e12) {
    const {
      NOW: t3,
      clientOffset: i4,
      availabilityStartTime: s6,
      timescale: n6 = 1,
      duration: r3,
      periodStart: a6 = 0,
      minimumUpdatePeriod: o4 = 0,
      timeShiftBufferDepth: l5 = 1 / 0
    } = e12, h = hr(e12.endNumber), d4 = (t3 + i4) / 1e3, u4 = s6 + a6, c2 = d4 + o4 - u4, p2 = Math.ceil(c2 * n6 / r3), m6 = Math.floor((d4 - u4 - l5) * n6 / r3), g4 = Math.floor((d4 - u4) * n6 / r3);
    return {
      start: Math.max(0, m6),
      end: "number" == typeof h ? h : Math.min(p2, g4)
    };
  }
};
var ur = (e12) => (t3) => {
  const {
    duration: i4,
    timescale: s6 = 1,
    periodStart: n6,
    startNumber: r3 = 1
  } = e12;
  return {
    number: r3 + t3,
    duration: i4 / s6,
    timeline: n6,
    time: t3 * i4
  };
};
var cr = (e12) => {
  const {
    type: t3,
    duration: i4,
    timescale: s6 = 1,
    periodDuration: n6,
    sourceDuration: r3
  } = e12, {
    start: a6,
    end: o4
  } = dr[t3](e12), l5 = tr(a6, o4).map(ur(e12));
  if ("static" === t3) {
    const e13 = l5.length - 1, t4 = "number" == typeof n6 ? n6 : r3;
    l5[e13].duration = t4 - i4 / s6 * e13;
  }
  return l5;
};
var pr = (e12) => {
  const {
    baseUrl: t3,
    initialization: i4 = {},
    sourceDuration: s6,
    indexRange: n6 = "",
    periodStart: r3,
    presentationTime: a6,
    number: o4 = 0,
    duration: l5
  } = e12;
  if (!t3) throw new Error(ar.NO_BASE_URL);
  const h = or({
    baseUrl: t3,
    source: i4.sourceURL,
    range: i4.range
  }), d4 = or({
    baseUrl: t3,
    source: t3,
    indexRange: n6
  });
  if (d4.map = h, l5) {
    const t4 = cr(e12);
    t4.length && (d4.duration = t4[0].duration, d4.timeline = t4[0].timeline);
  } else s6 && (d4.duration = s6, d4.timeline = r3);
  return d4.presentationTime = a6 || r3, d4.number = o4, [d4];
};
var mr = (e12, t3, i4) => {
  const s6 = e12.sidx.map ? e12.sidx.map : null, n6 = e12.sidx.duration, r3 = e12.timeline || 0, a6 = e12.sidx.byterange, o4 = a6.offset + a6.length, l5 = t3.timescale, h = t3.references.filter((e13) => 1 !== e13.referenceType), d4 = [], u4 = e12.endList ? "static" : "dynamic", c2 = e12.sidx.timeline;
  let p2, m6 = c2, f6 = e12.mediaSequence || 0;
  p2 = "bigint" == typeof t3.firstOffset ? g3.BigInt(o4) + t3.firstOffset : o4 + t3.firstOffset;
  for (let y4 = 0; y4 < h.length; y4++) {
    const e13 = t3.references[y4], a7 = e13.referencedSize, o5 = e13.subsegmentDuration;
    let h2;
    h2 = "bigint" == typeof p2 ? p2 + g3.BigInt(a7) - g3.BigInt(1) : p2 + a7 - 1;
    const _3 = pr({
      baseUrl: i4,
      timescale: l5,
      timeline: r3,
      periodStart: c2,
      presentationTime: m6,
      number: f6,
      duration: o5,
      sourceDuration: n6,
      indexRange: `${p2}-${h2}`,
      type: u4
    })[0];
    s6 && (_3.map = s6), d4.push(_3), p2 += "bigint" == typeof p2 ? g3.BigInt(a7) : a7, m6 += o5 / l5, f6++;
  }
  return e12.segments = d4, e12;
};
var gr = ["AUDIO", "SUBTITLES"];
var fr = 1 / 60;
var yr = (e12) => rr(e12, ({
  timeline: e13
}) => e13).sort((e13, t3) => e13.timeline > t3.timeline ? 1 : -1);
var _r = (e12, t3) => {
  for (let i4 = 0; i4 < e12.length; i4++) if (e12[i4].attributes.NAME === t3) return e12[i4];
  return null;
};
var vr = (e12) => {
  let t3 = [];
  return Ii(e12, gr, (e13, i4, s6, n6) => {
    t3 = t3.concat(e13.playlists || []);
  }), t3;
};
var br = ({
  playlist: e12,
  mediaSequence: t3
}) => {
  e12.mediaSequence = t3, e12.segments.forEach((t4, i4) => {
    t4.number = e12.mediaSequence + i4;
  });
};
var Tr = ({
  oldPlaylists: e12,
  newPlaylists: t3,
  timelineStarts: i4
}) => {
  t3.forEach((t4) => {
    t4.discontinuitySequence = i4.findIndex(function({
      timeline: e13
    }) {
      return e13 === t4.timeline;
    });
    const s6 = _r(e12, t4.attributes.NAME);
    if (!s6) return;
    if (t4.sidx) return;
    const n6 = t4.segments[0], r3 = s6.segments.findIndex(function(e13) {
      return Math.abs(e13.presentationTime - n6.presentationTime) < fr;
    });
    if (-1 === r3) return br({
      playlist: t4,
      mediaSequence: s6.mediaSequence + s6.segments.length
    }), t4.segments[0].discontinuity = true, t4.discontinuityStarts.unshift(0), void ((!s6.segments.length && t4.timeline > s6.timeline || s6.segments.length && t4.timeline > s6.segments[s6.segments.length - 1].timeline) && t4.discontinuitySequence--);
    s6.segments[r3].discontinuity && !n6.discontinuity && (n6.discontinuity = true, t4.discontinuityStarts.unshift(0), t4.discontinuitySequence--), br({
      playlist: t4,
      mediaSequence: s6.segments[r3].number
    });
  });
};
var Sr = ({
  oldManifest: e12,
  newManifest: t3
}) => {
  const i4 = e12.playlists.concat(vr(e12)), s6 = t3.playlists.concat(vr(t3));
  return t3.timelineStarts = yr([e12.timelineStarts, t3.timelineStarts]), Tr({
    oldPlaylists: i4,
    newPlaylists: s6,
    timelineStarts: t3.timelineStarts
  }), t3;
};
var Er = (e12) => e12 && e12.uri + "-" + lr(e12.byterange);
var wr = (e12) => {
  const t3 = e12.reduce(function(e13, t4) {
    return e13[t4.attributes.baseUrl] || (e13[t4.attributes.baseUrl] = []), e13[t4.attributes.baseUrl].push(t4), e13;
  }, {});
  let i4 = [];
  return Object.values(t3).forEach((e13) => {
    const t4 = er(e13.reduce((e14, t5) => {
      const i5 = t5.attributes.id + (t5.attributes.lang || "");
      return e14[i5] ? (t5.segments && (t5.segments[0] && (t5.segments[0].discontinuity = true), e14[i5].segments.push(...t5.segments)), t5.attributes.contentProtection && (e14[i5].attributes.contentProtection = t5.attributes.contentProtection)) : (e14[i5] = t5, e14[i5].attributes.timelineStarts = []), e14[i5].attributes.timelineStarts.push({
        start: t5.attributes.periodStart,
        timeline: t5.attributes.periodStart
      }), e14;
    }, {}));
    i4 = i4.concat(t4);
  }), i4.map((e13) => (e13.discontinuityStarts = nr(e13.segments || [], "discontinuity"), e13));
};
var Cr = (e12, t3) => {
  const i4 = Er(e12.sidx), s6 = i4 && t3[i4] && t3[i4].sidx;
  return s6 && mr(e12, s6, e12.sidx.resolvedUri), e12;
};
var kr = (e12, t3 = {}) => {
  if (!Object.keys(t3).length) return e12;
  for (const i4 in e12) e12[i4] = Cr(e12[i4], t3);
  return e12;
};
var xr = ({
  attributes: e12,
  segments: t3,
  sidx: i4,
  mediaSequence: s6,
  discontinuitySequence: n6,
  discontinuityStarts: r3
}, a6) => {
  const o4 = {
    attributes: {
      NAME: e12.id,
      BANDWIDTH: e12.bandwidth,
      CODECS: e12.codecs,
      "PROGRAM-ID": 1
    },
    uri: "",
    endList: "static" === e12.type,
    timeline: e12.periodStart,
    resolvedUri: e12.baseUrl || "",
    targetDuration: e12.duration,
    discontinuitySequence: n6,
    discontinuityStarts: r3,
    timelineStarts: e12.timelineStarts,
    mediaSequence: s6,
    segments: t3
  };
  return e12.contentProtection && (o4.contentProtection = e12.contentProtection), e12.serviceLocation && (o4.attributes.serviceLocation = e12.serviceLocation), i4 && (o4.sidx = i4), a6 && (o4.attributes.AUDIO = "audio", o4.attributes.SUBTITLES = "subs"), o4;
};
var Ir = ({
  attributes: e12,
  segments: t3,
  mediaSequence: i4,
  discontinuityStarts: s6,
  discontinuitySequence: n6
}) => {
  void 0 === t3 && (t3 = [{
    uri: e12.baseUrl,
    timeline: e12.periodStart,
    resolvedUri: e12.baseUrl || "",
    duration: e12.sourceDuration,
    number: 0
  }], e12.duration = e12.sourceDuration);
  const r3 = {
    NAME: e12.id,
    BANDWIDTH: e12.bandwidth,
    "PROGRAM-ID": 1
  };
  e12.codecs && (r3.CODECS = e12.codecs);
  const a6 = {
    attributes: r3,
    uri: "",
    endList: "static" === e12.type,
    timeline: e12.periodStart,
    resolvedUri: e12.baseUrl || "",
    targetDuration: e12.duration,
    timelineStarts: e12.timelineStarts,
    discontinuityStarts: s6,
    discontinuitySequence: n6,
    mediaSequence: i4,
    segments: t3
  };
  return e12.serviceLocation && (a6.attributes.serviceLocation = e12.serviceLocation), a6;
};
var Ar = (e12, t3 = {}, i4 = false) => {
  let s6;
  const n6 = e12.reduce((e13, n7) => {
    const r3 = n7.attributes.role && n7.attributes.role.value || "", a6 = n7.attributes.lang || "";
    let o4 = n7.attributes.label || "main";
    if (a6 && !n7.attributes.label) {
      const e14 = r3 ? ` (${r3})` : "";
      o4 = `${n7.attributes.lang}${e14}`;
    }
    e13[o4] || (e13[o4] = {
      language: a6,
      autoselect: true,
      default: "main" === r3,
      playlists: [],
      uri: ""
    });
    const l5 = Cr(xr(n7, i4), t3);
    return e13[o4].playlists.push(l5), void 0 === s6 && "main" === r3 && (s6 = n7, s6.default = true), e13;
  }, {});
  if (!s6) {
    n6[Object.keys(n6)[0]].default = true;
  }
  return n6;
};
var Dr = (e12, t3 = {}) => e12.reduce((e13, i4) => {
  const s6 = i4.attributes.label || i4.attributes.lang || "text";
  return e13[s6] || (e13[s6] = {
    language: s6,
    default: false,
    autoselect: false,
    playlists: [],
    uri: ""
  }), e13[s6].playlists.push(Cr(Ir(i4), t3)), e13;
}, {});
var Pr = (e12) => e12.reduce((e13, t3) => t3 ? (t3.forEach((t4) => {
  const {
    channel: i4,
    language: s6
  } = t4;
  e13[s6] = {
    autoselect: false,
    default: false,
    instreamId: i4,
    language: s6
  }, t4.hasOwnProperty("aspectRatio") && (e13[s6].aspectRatio = t4.aspectRatio), t4.hasOwnProperty("easyReader") && (e13[s6].easyReader = t4.easyReader), t4.hasOwnProperty("3D") && (e13[s6]["3D"] = t4["3D"]);
}), e13) : e13, {});
var Lr = ({
  attributes: e12,
  segments: t3,
  sidx: i4,
  discontinuityStarts: s6
}) => {
  const n6 = {
    attributes: {
      NAME: e12.id,
      AUDIO: "audio",
      SUBTITLES: "subs",
      RESOLUTION: {
        width: e12.width,
        height: e12.height
      },
      CODECS: e12.codecs,
      BANDWIDTH: e12.bandwidth,
      "PROGRAM-ID": 1
    },
    uri: "",
    endList: "static" === e12.type,
    timeline: e12.periodStart,
    resolvedUri: e12.baseUrl || "",
    targetDuration: e12.duration,
    discontinuityStarts: s6,
    timelineStarts: e12.timelineStarts,
    segments: t3
  };
  return e12.frameRate && (n6.attributes["FRAME-RATE"] = e12.frameRate), e12.contentProtection && (n6.contentProtection = e12.contentProtection), e12.serviceLocation && (n6.attributes.serviceLocation = e12.serviceLocation), i4 && (n6.sidx = i4), n6;
};
var Or = ({
  attributes: e12
}) => "video/mp4" === e12.mimeType || "video/webm" === e12.mimeType || "video" === e12.contentType;
var Nr = ({
  attributes: e12
}) => "audio/mp4" === e12.mimeType || "audio/webm" === e12.mimeType || "audio" === e12.contentType;
var Rr = ({
  attributes: e12
}) => "text/vtt" === e12.mimeType || "text" === e12.contentType;
var Mr = (e12, t3) => {
  e12.forEach((e13) => {
    e13.mediaSequence = 0, e13.discontinuitySequence = t3.findIndex(function({
      timeline: t4
    }) {
      return t4 === e13.timeline;
    }), e13.segments && e13.segments.forEach((e14, t4) => {
      e14.number = t4;
    });
  });
};
var Ur = (e12) => e12 ? Object.keys(e12).reduce((t3, i4) => {
  const s6 = e12[i4];
  return t3.concat(s6.playlists);
}, []) : [];
var Br = ({
  dashPlaylists: e12,
  locations: t3,
  contentSteering: i4,
  sidxMapping: s6 = {},
  previousManifest: n6,
  eventStream: r3
}) => {
  if (!e12.length) return {};
  const {
    sourceDuration: a6,
    type: o4,
    suggestedPresentationDelay: l5,
    minimumUpdatePeriod: h
  } = e12[0].attributes, d4 = wr(e12.filter(Or)).map(Lr), u4 = wr(e12.filter(Nr)), c2 = wr(e12.filter(Rr)), p2 = e12.map((e13) => e13.attributes.captionServices).filter(Boolean), m6 = {
    allowCache: true,
    discontinuityStarts: [],
    segments: [],
    endList: true,
    mediaGroups: {
      AUDIO: {},
      VIDEO: {},
      "CLOSED-CAPTIONS": {},
      SUBTITLES: {}
    },
    uri: "",
    duration: a6,
    playlists: kr(d4, s6)
  };
  h >= 0 && (m6.minimumUpdatePeriod = 1e3 * h), t3 && (m6.locations = t3), i4 && (m6.contentSteering = i4), "dynamic" === o4 && (m6.suggestedPresentationDelay = l5), r3 && r3.length > 0 && (m6.eventStream = r3);
  const g4 = 0 === m6.playlists.length, f6 = u4.length ? Ar(u4, s6, g4) : null, y4 = c2.length ? Dr(c2, s6) : null, _3 = d4.concat(Ur(f6), Ur(y4)), v3 = _3.map(({
    timelineStarts: e13
  }) => e13);
  return m6.timelineStarts = yr(v3), Mr(_3, m6.timelineStarts), f6 && (m6.mediaGroups.AUDIO.audio = f6), y4 && (m6.mediaGroups.SUBTITLES.subs = y4), p2.length && (m6.mediaGroups["CLOSED-CAPTIONS"].cc = Pr(p2)), n6 ? Sr({
    oldManifest: n6,
    newManifest: m6
  }) : m6;
};
var Fr = (e12, t3, i4) => {
  const {
    NOW: s6,
    clientOffset: n6,
    availabilityStartTime: r3,
    timescale: a6 = 1,
    periodStart: o4 = 0,
    minimumUpdatePeriod: l5 = 0
  } = e12, h = (s6 + n6) / 1e3 + l5 - (r3 + o4);
  return Math.ceil((h * a6 - t3) / i4);
};
var qr = (e12, t3) => {
  const {
    type: i4,
    minimumUpdatePeriod: s6 = 0,
    media: n6 = "",
    sourceDuration: r3,
    timescale: a6 = 1,
    startNumber: o4 = 1,
    periodStart: l5
  } = e12, h = [];
  let d4 = -1;
  for (let u4 = 0; u4 < t3.length; u4++) {
    const c2 = t3[u4], p2 = c2.d, m6 = c2.r || 0, g4 = c2.t || 0;
    let f6;
    if (d4 < 0 && (d4 = g4), g4 && g4 > d4 && (d4 = g4), m6 < 0) {
      const o5 = u4 + 1;
      f6 = o5 === t3.length ? "dynamic" === i4 && s6 > 0 && n6.indexOf("$Number$") > 0 ? Fr(e12, d4, p2) : (r3 * a6 - d4) / p2 : (t3[o5].t - d4) / p2;
    } else f6 = m6 + 1;
    const y4 = o4 + h.length + f6;
    let _3 = o4 + h.length;
    for (; _3 < y4; ) h.push({
      number: _3,
      duration: p2 / a6,
      time: d4,
      timeline: l5
    }), d4 += p2, _3++;
  }
  return h;
};
var jr = /\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;
var $r = (e12) => (t3, i4, s6, n6) => {
  if ("$$" === t3) return "$";
  if (void 0 === e12[i4]) return t3;
  const r3 = "" + e12[i4];
  return "RepresentationID" === i4 ? r3 : (n6 = s6 ? parseInt(n6, 10) : 1, r3.length >= n6 ? r3 : `${new Array(n6 - r3.length + 1).join("0")}${r3}`);
};
var Hr = (e12, t3) => e12.replace(jr, $r(t3));
var Vr = (e12, t3) => e12.duration || t3 ? e12.duration ? cr(e12) : qr(e12, t3) : [{
  number: e12.startNumber || 1,
  duration: e12.sourceDuration,
  time: 0,
  timeline: e12.periodStart
}];
var zr = (e12, t3) => {
  const i4 = {
    RepresentationID: e12.id,
    Bandwidth: e12.bandwidth || 0
  }, {
    initialization: s6 = {
      sourceURL: "",
      range: ""
    }
  } = e12, n6 = or({
    baseUrl: e12.baseUrl,
    source: Hr(s6.sourceURL, i4),
    range: s6.range
  });
  return Vr(e12, t3).map((t4) => {
    i4.Number = t4.number, i4.Time = t4.time;
    const s7 = Hr(e12.media || "", i4), r3 = e12.timescale || 1, a6 = e12.presentationTimeOffset || 0, o4 = e12.periodStart + (t4.time - a6) / r3;
    return {
      uri: s7,
      timeline: t4.timeline,
      duration: t4.duration,
      resolvedUri: Bt(e12.baseUrl || "", s7),
      map: n6,
      number: t4.number,
      presentationTime: o4
    };
  });
};
var Wr = (e12, t3) => {
  const {
    baseUrl: i4,
    initialization: s6 = {}
  } = e12, n6 = or({
    baseUrl: i4,
    source: s6.sourceURL,
    range: s6.range
  }), r3 = or({
    baseUrl: i4,
    source: t3.media,
    range: t3.mediaRange
  });
  return r3.map = n6, r3;
};
var Gr = (e12, t3) => {
  const {
    duration: i4,
    segmentUrls: s6 = [],
    periodStart: n6
  } = e12;
  if (!i4 && !t3 || i4 && t3) throw new Error(ar.SEGMENT_TIME_UNSPECIFIED);
  const r3 = s6.map((t4) => Wr(e12, t4));
  let a6;
  i4 && (a6 = cr(e12)), t3 && (a6 = qr(e12, t3));
  return a6.map((t4, i5) => {
    if (r3[i5]) {
      const s7 = r3[i5], a7 = e12.timescale || 1, o4 = e12.presentationTimeOffset || 0;
      return s7.timeline = t4.timeline, s7.duration = t4.duration, s7.number = t4.number, s7.presentationTime = n6 + (t4.time - o4) / a7, s7;
    }
  }).filter((e13) => e13);
};
var Xr = ({
  attributes: e12,
  segmentInfo: t3
}) => {
  let i4, s6;
  t3.template ? (s6 = zr, i4 = Zn(e12, t3.template)) : t3.base ? (s6 = pr, i4 = Zn(e12, t3.base)) : t3.list && (s6 = Gr, i4 = Zn(e12, t3.list));
  const n6 = {
    attributes: e12
  };
  if (!s6) return n6;
  const r3 = s6(i4, t3.segmentTimeline);
  if (i4.duration) {
    const {
      duration: e13,
      timescale: t4 = 1
    } = i4;
    i4.duration = e13 / t4;
  } else r3.length ? i4.duration = r3.reduce((e13, t4) => Math.max(e13, Math.ceil(t4.duration)), 0) : i4.duration = 0;
  return n6.attributes = i4, n6.segments = r3, t3.base && i4.indexRange && (n6.sidx = r3[0], n6.segments = []), n6;
};
var Kr = (e12) => e12.map(Xr);
var Yr = (e12, t3) => sr(e12.childNodes).filter(({
  tagName: e13
}) => e13 === t3);
var Qr = (e12) => e12.textContent.trim();
var Jr = (e12) => parseFloat(e12.split("/").reduce((e13, t3) => e13 / t3));
var Zr = (e12) => {
  const t3 = 31536e3, i4 = 2592e3, s6 = 86400, n6 = 3600, r3 = 60, a6 = /P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e12);
  if (!a6) return 0;
  const [o4, l5, h, d4, u4, c2] = a6.slice(1);
  return parseFloat(o4 || 0) * t3 + parseFloat(l5 || 0) * i4 + parseFloat(h || 0) * s6 + parseFloat(d4 || 0) * n6 + parseFloat(u4 || 0) * r3 + parseFloat(c2 || 0);
};
var ea = (e12) => (/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e12) && (e12 += "Z"), Date.parse(e12));
var ta = {
  mediaPresentationDuration: (e12) => Zr(e12),
  availabilityStartTime: (e12) => ea(e12) / 1e3,
  minimumUpdatePeriod: (e12) => Zr(e12),
  suggestedPresentationDelay: (e12) => Zr(e12),
  type: (e12) => e12,
  timeShiftBufferDepth: (e12) => Zr(e12),
  start: (e12) => Zr(e12),
  width: (e12) => parseInt(e12, 10),
  height: (e12) => parseInt(e12, 10),
  bandwidth: (e12) => parseInt(e12, 10),
  frameRate: (e12) => Jr(e12),
  startNumber: (e12) => parseInt(e12, 10),
  timescale: (e12) => parseInt(e12, 10),
  presentationTimeOffset: (e12) => parseInt(e12, 10),
  duration(e12) {
    const t3 = parseInt(e12, 10);
    return isNaN(t3) ? Zr(e12) : t3;
  },
  d: (e12) => parseInt(e12, 10),
  t: (e12) => parseInt(e12, 10),
  r: (e12) => parseInt(e12, 10),
  presentationTime: (e12) => parseInt(e12, 10),
  DEFAULT: (e12) => e12
};
var ia = (e12) => e12 && e12.attributes ? sr(e12.attributes).reduce((e13, t3) => {
  const i4 = ta[t3.name] || ta.DEFAULT;
  return e13[t3.name] = i4(t3.value), e13;
}, {}) : {};
var sa = {
  "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
  "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
  "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
  "urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb": "com.adobe.primetime",
  "urn:mpeg:dash:mp4protection:2011": "mp4protection"
};
var na = (e12, t3) => t3.length ? ir(e12.map(function(e13) {
  return t3.map(function(t4) {
    const i4 = Qr(t4), s6 = Bt(e13.baseUrl, i4), n6 = Zn(ia(t4), {
      baseUrl: s6
    });
    return s6 !== i4 && !n6.serviceLocation && e13.serviceLocation && (n6.serviceLocation = e13.serviceLocation), n6;
  });
})) : e12;
var ra = (e12) => {
  const t3 = Yr(e12, "SegmentTemplate")[0], i4 = Yr(e12, "SegmentList")[0], s6 = i4 && Yr(i4, "SegmentURL").map((e13) => Zn({
    tag: "SegmentURL"
  }, ia(e13))), n6 = Yr(e12, "SegmentBase")[0], r3 = i4 || t3, a6 = r3 && Yr(r3, "SegmentTimeline")[0], o4 = i4 || n6 || t3, l5 = o4 && Yr(o4, "Initialization")[0], h = t3 && ia(t3);
  h && l5 ? h.initialization = l5 && ia(l5) : h && h.initialization && (h.initialization = {
    sourceURL: h.initialization
  });
  const d4 = {
    template: h,
    segmentTimeline: a6 && Yr(a6, "S").map((e13) => ia(e13)),
    list: i4 && Zn(ia(i4), {
      segmentUrls: s6,
      initialization: ia(l5)
    }),
    base: n6 && Zn(ia(n6), {
      initialization: ia(l5)
    })
  };
  return Object.keys(d4).forEach((e13) => {
    d4[e13] || delete d4[e13];
  }), d4;
};
var aa = (e12, t3, i4) => (s6) => {
  const n6 = Yr(s6, "BaseURL"), r3 = na(t3, n6), a6 = Zn(e12, ia(s6)), o4 = ra(s6);
  return r3.map((e13) => ({
    segmentInfo: Zn(i4, o4),
    attributes: Zn(a6, e13)
  }));
};
var oa = (e12) => e12.reduce((e13, t3) => {
  const i4 = ia(t3);
  i4.schemeIdUri && (i4.schemeIdUri = i4.schemeIdUri.toLowerCase());
  const s6 = sa[i4.schemeIdUri];
  if (s6) {
    e13[s6] = {
      attributes: i4
    };
    const n6 = Yr(t3, "cenc:pssh")[0];
    if (n6) {
      const t4 = Qr(n6);
      e13[s6].pssh = t4 && Di(t4);
    }
  }
  return e13;
}, {});
var la = (e12) => {
  if ("urn:scte:dash:cc:cea-608:2015" === e12.schemeIdUri) {
    return ("string" != typeof e12.value ? [] : e12.value.split(";")).map((e13) => {
      let t3, i4;
      return i4 = e13, /^CC\d=/.test(e13) ? [t3, i4] = e13.split("=") : /^CC\d$/.test(e13) && (t3 = e13), {
        channel: t3,
        language: i4
      };
    });
  }
  if ("urn:scte:dash:cc:cea-708:2015" === e12.schemeIdUri) {
    return ("string" != typeof e12.value ? [] : e12.value.split(";")).map((e13) => {
      const t3 = {
        channel: void 0,
        language: void 0,
        aspectRatio: 1,
        easyReader: 0,
        "3D": 0
      };
      if (/=/.test(e13)) {
        const [i4, s6 = ""] = e13.split("=");
        t3.channel = i4, t3.language = e13, s6.split(",").forEach((e14) => {
          const [i5, s7] = e14.split(":");
          "lang" === i5 ? t3.language = s7 : "er" === i5 ? t3.easyReader = Number(s7) : "war" === i5 ? t3.aspectRatio = Number(s7) : "3D" === i5 && (t3["3D"] = Number(s7));
        });
      } else t3.language = e13;
      return t3.channel && (t3.channel = "SERVICE" + t3.channel), t3;
    });
  }
};
var ha = (e12) => ir(Yr(e12.node, "EventStream").map((t3) => {
  const i4 = ia(t3), s6 = i4.schemeIdUri;
  return Yr(t3, "Event").map((t4) => {
    const n6 = ia(t4), r3 = n6.presentationTime || 0, a6 = i4.timescale || 1, o4 = n6.duration || 0, l5 = r3 / a6 + e12.attributes.start;
    return {
      schemeIdUri: s6,
      value: i4.value,
      id: n6.id,
      start: l5,
      end: l5 + o4 / a6,
      messageData: Qr(t4) || n6.messageData,
      contentEncoding: i4.contentEncoding,
      presentationTimeOffset: i4.presentationTimeOffset || 0
    };
  });
}));
var da = (e12, t3, i4) => (s6) => {
  const n6 = ia(s6), r3 = na(t3, Yr(s6, "BaseURL")), a6 = Yr(s6, "Role")[0], o4 = {
    role: ia(a6)
  };
  let l5 = Zn(e12, n6, o4);
  const h = Yr(s6, "Accessibility")[0], d4 = la(ia(h));
  d4 && (l5 = Zn(l5, {
    captionServices: d4
  }));
  const u4 = Yr(s6, "Label")[0];
  if (u4 && u4.childNodes.length) {
    const e13 = u4.childNodes[0].nodeValue.trim();
    l5 = Zn(l5, {
      label: e13
    });
  }
  const c2 = oa(Yr(s6, "ContentProtection"));
  Object.keys(c2).length && (l5 = Zn(l5, {
    contentProtection: c2
  }));
  const p2 = ra(s6), m6 = Yr(s6, "Representation"), g4 = Zn(i4, p2);
  return ir(m6.map(aa(l5, r3, g4)));
};
var ua = (e12, t3) => (i4, s6) => {
  const n6 = na(t3, Yr(i4.node, "BaseURL")), r3 = Zn(e12, {
    periodStart: i4.attributes.start
  });
  "number" == typeof i4.attributes.duration && (r3.periodDuration = i4.attributes.duration);
  const a6 = Yr(i4.node, "AdaptationSet"), o4 = ra(i4.node);
  return ir(a6.map(da(r3, n6, o4)));
};
var ca = (e12, t3) => {
  if (e12.length > 1 && t3({
    type: "warn",
    message: "The MPD manifest should contain no more than one ContentSteering tag"
  }), !e12.length) return null;
  const i4 = Zn({
    serverURL: Qr(e12[0])
  }, ia(e12[0]));
  return i4.queryBeforeStart = "true" === i4.queryBeforeStart, i4;
};
var pa = ({
  attributes: e12,
  priorPeriodAttributes: t3,
  mpdType: i4
}) => "number" == typeof e12.start ? e12.start : t3 && "number" == typeof t3.start && "number" == typeof t3.duration ? t3.start + t3.duration : t3 || "static" !== i4 ? null : 0;
var ma = (e12, t3 = {}) => {
  const {
    manifestUri: i4 = "",
    NOW: s6 = Date.now(),
    clientOffset: n6 = 0,
    eventHandler: r3 = function() {
    }
  } = t3, a6 = Yr(e12, "Period");
  if (!a6.length) throw new Error(ar.INVALID_NUMBER_OF_PERIOD);
  const o4 = Yr(e12, "Location"), l5 = ia(e12), h = na([{
    baseUrl: i4
  }], Yr(e12, "BaseURL")), d4 = Yr(e12, "ContentSteering");
  l5.type = l5.type || "static", l5.sourceDuration = l5.mediaPresentationDuration || 0, l5.NOW = s6, l5.clientOffset = n6, o4.length && (l5.locations = o4.map(Qr));
  const u4 = [];
  return a6.forEach((e13, t4) => {
    const i5 = ia(e13), s7 = u4[t4 - 1];
    i5.start = pa({
      attributes: i5,
      priorPeriodAttributes: s7 ? s7.attributes : null,
      mpdType: l5.type
    }), u4.push({
      node: e13,
      attributes: i5
    });
  }), {
    locations: l5.locations,
    contentSteeringInfo: ca(d4, r3),
    representationInfo: ir(u4.map(ua(l5, h))),
    eventStream: ir(u4.map(ha))
  };
};
var ga = (e12) => {
  if ("" === e12) throw new Error(ar.DASH_EMPTY_MANIFEST);
  const t3 = new Qn();
  let i4, s6;
  try {
    i4 = t3.parseFromString(e12, "application/xml"), s6 = i4 && "MPD" === i4.documentElement.tagName ? i4.documentElement : null;
  } catch (l_) {
  }
  if (!s6 || s6 && s6.getElementsByTagName("parsererror").length > 0) throw new Error(ar.DASH_INVALID_XML);
  return s6;
};
var fa = (e12) => {
  const t3 = Yr(e12, "UTCTiming")[0];
  if (!t3) return null;
  const i4 = ia(t3);
  switch (i4.schemeIdUri) {
    case "urn:mpeg:dash:utc:http-head:2014":
    case "urn:mpeg:dash:utc:http-head:2012":
      i4.method = "HEAD";
      break;
    case "urn:mpeg:dash:utc:http-xsdate:2014":
    case "urn:mpeg:dash:utc:http-iso:2014":
    case "urn:mpeg:dash:utc:http-xsdate:2012":
    case "urn:mpeg:dash:utc:http-iso:2012":
      i4.method = "GET";
      break;
    case "urn:mpeg:dash:utc:direct:2014":
    case "urn:mpeg:dash:utc:direct:2012":
      i4.method = "DIRECT", i4.value = Date.parse(i4.value);
      break;
    default:
      throw new Error(ar.UNSUPPORTED_UTC_TIMING_SCHEME);
  }
  return i4;
};
var ya = (e12, t3 = {}) => {
  const i4 = ma(ga(e12), t3), s6 = Kr(i4.representationInfo);
  return Br({
    dashPlaylists: s6,
    locations: i4.locations,
    contentSteering: i4.contentSteeringInfo,
    sidxMapping: t3.sidxMapping,
    previousManifest: t3.previousManifest,
    eventStream: i4.eventStream
  });
};
var _a = (e12) => fa(ga(e12));
var va = Math.pow(2, 32);
var ba = {
  getUint64: function(e12) {
    var t3, i4 = new DataView(e12.buffer, e12.byteOffset, e12.byteLength);
    return i4.getBigUint64 ? (t3 = i4.getBigUint64(0)) < Number.MAX_SAFE_INTEGER ? Number(t3) : t3 : i4.getUint32(0) * va + i4.getUint32(4);
  },
  MAX_UINT32: va
}.getUint64;
var Ta = o2(function(e12) {
  var t3 = new DataView(e12.buffer, e12.byteOffset, e12.byteLength), i4 = {
    version: e12[0],
    flags: new Uint8Array(e12.subarray(1, 4)),
    references: [],
    referenceId: t3.getUint32(4),
    timescale: t3.getUint32(8)
  }, s6 = 12;
  0 === i4.version ? (i4.earliestPresentationTime = t3.getUint32(s6), i4.firstOffset = t3.getUint32(s6 + 4), s6 += 8) : (i4.earliestPresentationTime = ba(e12.subarray(s6)), i4.firstOffset = ba(e12.subarray(s6 + 8)), s6 += 16), s6 += 2;
  var n6 = t3.getUint16(s6);
  for (s6 += 2; n6 > 0; s6 += 12, n6--) i4.references.push({
    referenceType: (128 & e12[s6]) >>> 7,
    referencedSize: 2147483647 & t3.getUint32(s6),
    subsegmentDuration: t3.getUint32(s6 + 4),
    startsWithSap: !!(128 & e12[s6 + 8]),
    sapType: (112 & e12[s6 + 8]) >>> 4,
    sapDeltaTime: 268435455 & t3.getUint32(s6 + 8)
  });
  return i4;
});
var Sa = bi([73, 68, 51]);
var Ea = function(e12, t3) {
  void 0 === t3 && (t3 = 0);
  var i4 = (e12 = bi(e12))[t3 + 5], s6 = e12[t3 + 6] << 21 | e12[t3 + 7] << 14 | e12[t3 + 8] << 7 | e12[t3 + 9];
  return (16 & i4) >> 4 ? s6 + 20 : s6 + 10;
};
var wa = function e7(t3, i4) {
  return void 0 === i4 && (i4 = 0), (t3 = bi(t3)).length - i4 < 10 || !xi(t3, Sa, {
    offset: i4
  }) ? i4 : e7(t3, i4 += Ea(t3, i4));
};
var Ca = function(e12) {
  return "string" == typeof e12 ? Ci(e12) : e12;
};
var ka = function(e12) {
  return Array.isArray(e12) ? e12.map(function(e13) {
    return Ca(e13);
  }) : [Ca(e12)];
};
var xa = function e8(t3, i4, s6) {
  void 0 === s6 && (s6 = false), i4 = ka(i4), t3 = bi(t3);
  var n6 = [];
  if (!i4.length) return n6;
  for (var r3 = 0; r3 < t3.length; ) {
    var a6 = (t3[r3] << 24 | t3[r3 + 1] << 16 | t3[r3 + 2] << 8 | t3[r3 + 3]) >>> 0, o4 = t3.subarray(r3 + 4, r3 + 8);
    if (0 === a6) break;
    var l5 = r3 + a6;
    if (l5 > t3.length) {
      if (s6) break;
      l5 = t3.length;
    }
    var h = t3.subarray(r3 + 8, l5);
    xi(o4, i4[0]) && (1 === i4.length ? n6.push(h) : n6.push.apply(n6, e8(h, i4.slice(1), s6))), r3 = l5;
  }
  return n6;
};
var Ia = {
  EBML: bi([26, 69, 223, 163]),
  DocType: bi([66, 130]),
  Segment: bi([24, 83, 128, 103]),
  SegmentInfo: bi([21, 73, 169, 102]),
  Tracks: bi([22, 84, 174, 107]),
  Track: bi([174]),
  TrackNumber: bi([215]),
  DefaultDuration: bi([35, 227, 131]),
  TrackEntry: bi([174]),
  TrackType: bi([131]),
  FlagDefault: bi([136]),
  CodecID: bi([134]),
  CodecPrivate: bi([99, 162]),
  VideoTrack: bi([224]),
  AudioTrack: bi([225]),
  Cluster: bi([31, 67, 182, 117]),
  Timestamp: bi([231]),
  TimestampScale: bi([42, 215, 177]),
  BlockGroup: bi([160]),
  BlockDuration: bi([155]),
  Block: bi([161]),
  SimpleBlock: bi([163])
};
var Aa = [128, 64, 32, 16, 8, 4, 2, 1];
var Da = function(e12) {
  for (var t3 = 1, i4 = 0; i4 < Aa.length && !(e12 & Aa[i4]); i4++) t3++;
  return t3;
};
var Pa = function(e12, t3, i4, s6) {
  void 0 === i4 && (i4 = true), void 0 === s6 && (s6 = false);
  var n6 = Da(e12[t3]), r3 = e12.subarray(t3, t3 + n6);
  return i4 && ((r3 = Array.prototype.slice.call(e12, t3, t3 + n6))[0] ^= Aa[n6 - 1]), {
    length: n6,
    value: Ei(r3, {
      signed: s6
    }),
    bytes: r3
  };
};
var La = function e9(t3) {
  return "string" == typeof t3 ? t3.match(/.{1,2}/g).map(function(t4) {
    return e9(t4);
  }) : "number" == typeof t3 ? wi(t3) : t3;
};
var Oa = function(e12) {
  return Array.isArray(e12) ? e12.map(function(e13) {
    return La(e13);
  }) : [La(e12)];
};
var Na = function e10(t3, i4, s6) {
  if (s6 >= i4.length) return i4.length;
  var n6 = Pa(i4, s6, false);
  if (xi(t3.bytes, n6.bytes)) return s6;
  var r3 = Pa(i4, s6 + n6.length);
  return e10(t3, i4, s6 + r3.length + r3.value + n6.length);
};
var Ra = function e11(t3, i4) {
  i4 = Oa(i4), t3 = bi(t3);
  var s6 = [];
  if (!i4.length) return s6;
  for (var n6 = 0; n6 < t3.length; ) {
    var r3 = Pa(t3, n6, false), a6 = Pa(t3, n6 + r3.length), o4 = n6 + r3.length + a6.length;
    127 === a6.value && (a6.value = Na(r3, t3, o4), a6.value !== t3.length && (a6.value -= o4));
    var l5 = o4 + a6.value > t3.length ? t3.length : o4 + a6.value, h = t3.subarray(o4, l5);
    xi(i4[0], r3.bytes) && (1 === i4.length ? s6.push(h) : s6 = s6.concat(e11(h, i4.slice(1)))), n6 += r3.length + a6.length + h.length;
  }
  return s6;
};
var Ma = bi([0, 0, 0, 1]);
var Ua = bi([0, 0, 1]);
var Ba = bi([0, 0, 3]);
var Fa = function(e12) {
  for (var t3 = [], i4 = 1; i4 < e12.length - 2; ) xi(e12.subarray(i4, i4 + 3), Ba) && (t3.push(i4 + 2), i4++), i4++;
  if (0 === t3.length) return e12;
  var s6 = e12.length - t3.length, n6 = new Uint8Array(s6), r3 = 0;
  for (i4 = 0; i4 < s6; r3++, i4++) r3 === t3[0] && (r3++, t3.shift()), n6[i4] = e12[r3];
  return n6;
};
var qa = function(e12, t3, i4, s6) {
  e12 = bi(e12), i4 = [].concat(i4);
  for (var n6, r3 = 0, a6 = 0; r3 < e12.length && (a6 < s6 || n6); ) {
    var o4 = void 0;
    if (xi(e12.subarray(r3), Ma) ? o4 = 4 : xi(e12.subarray(r3), Ua) && (o4 = 3), o4) {
      if (a6++, n6) return Fa(e12.subarray(n6, r3));
      var l5 = void 0;
      "h264" === t3 ? l5 = 31 & e12[r3 + o4] : "h265" === t3 && (l5 = e12[r3 + o4] >> 1 & 63), -1 !== i4.indexOf(l5) && (n6 = r3 + o4), r3 += o4 + ("h264" === t3 ? 1 : 2);
    } else r3++;
  }
  return e12.subarray(0, 0);
};
var ja = function(e12, t3, i4) {
  return qa(e12, "h264", t3, i4);
};
var $a = function(e12, t3, i4) {
  return qa(e12, "h265", t3, i4);
};
var Ha = {
  webm: bi([119, 101, 98, 109]),
  matroska: bi([109, 97, 116, 114, 111, 115, 107, 97]),
  flac: bi([102, 76, 97, 67]),
  ogg: bi([79, 103, 103, 83]),
  ac3: bi([11, 119]),
  riff: bi([82, 73, 70, 70]),
  avi: bi([65, 86, 73]),
  wav: bi([87, 65, 86, 69]),
  "3gp": bi([102, 116, 121, 112, 51, 103]),
  mp4: bi([102, 116, 121, 112]),
  fmp4: bi([115, 116, 121, 112]),
  mov: bi([102, 116, 121, 112, 113, 116]),
  moov: bi([109, 111, 111, 118]),
  moof: bi([109, 111, 111, 102])
};
var Va = {
  aac: function(e12) {
    var t3 = wa(e12);
    return xi(e12, [255, 16], {
      offset: t3,
      mask: [255, 22]
    });
  },
  mp3: function(e12) {
    var t3 = wa(e12);
    return xi(e12, [255, 2], {
      offset: t3,
      mask: [255, 6]
    });
  },
  webm: function(e12) {
    var t3 = Ra(e12, [Ia.EBML, Ia.DocType])[0];
    return xi(t3, Ha.webm);
  },
  mkv: function(e12) {
    var t3 = Ra(e12, [Ia.EBML, Ia.DocType])[0];
    return xi(t3, Ha.matroska);
  },
  mp4: function(e12) {
    return !Va["3gp"](e12) && !Va.mov(e12) && (!(!xi(e12, Ha.mp4, {
      offset: 4
    }) && !xi(e12, Ha.fmp4, {
      offset: 4
    })) || !(!xi(e12, Ha.moof, {
      offset: 4
    }) && !xi(e12, Ha.moov, {
      offset: 4
    })) || void 0);
  },
  mov: function(e12) {
    return xi(e12, Ha.mov, {
      offset: 4
    });
  },
  "3gp": function(e12) {
    return xi(e12, Ha["3gp"], {
      offset: 4
    });
  },
  ac3: function(e12) {
    var t3 = wa(e12);
    return xi(e12, Ha.ac3, {
      offset: t3
    });
  },
  ts: function(e12) {
    if (e12.length < 189 && e12.length >= 1) return 71 === e12[0];
    for (var t3 = 0; t3 + 188 < e12.length && t3 < 188; ) {
      if (71 === e12[t3] && 71 === e12[t3 + 188]) return true;
      t3 += 1;
    }
    return false;
  },
  flac: function(e12) {
    var t3 = wa(e12);
    return xi(e12, Ha.flac, {
      offset: t3
    });
  },
  ogg: function(e12) {
    return xi(e12, Ha.ogg);
  },
  avi: function(e12) {
    return xi(e12, Ha.riff) && xi(e12, Ha.avi, {
      offset: 8
    });
  },
  wav: function(e12) {
    return xi(e12, Ha.riff) && xi(e12, Ha.wav, {
      offset: 8
    });
  },
  h264: function(e12) {
    return ja(e12, 7, 3).length;
  },
  h265: function(e12) {
    return $a(e12, [32, 33], 3).length;
  }
};
var za = Object.keys(Va).filter(function(e12) {
  return "ts" !== e12 && "h264" !== e12 && "h265" !== e12;
}).concat(["ts", "h264", "h265"]);
za.forEach(function(e12) {
  var t3 = Va[e12];
  Va[e12] = function(e13) {
    return t3(bi(e13));
  };
});
var Wa;
var Ga;
var Xa;
var Ka;
var Ya;
var Qa;
var Ja;
var Za = Va;
var eo = function(e12) {
  e12 = bi(e12);
  for (var t3 = 0; t3 < za.length; t3++) {
    var i4 = za[t3];
    if (Za[i4](e12)) return i4;
  }
  return "";
};
var to = function(e12) {
  return xa(e12, ["moof"]).length > 0;
};
var io = 9e4;
Ya = function(e12, t3) {
  return Wa(Ka(e12, t3));
}, Qa = function(e12, t3) {
  return Ga(Xa(e12), t3);
}, Ja = function(e12, t3, i4) {
  return Xa(i4 ? e12 : e12 - t3);
};
var so = {
  ONE_SECOND_IN_TS: io,
  secondsToVideoTs: Wa = function(e12) {
    return e12 * io;
  },
  secondsToAudioTs: Ga = function(e12, t3) {
    return e12 * t3;
  },
  videoTsToSeconds: Xa = function(e12) {
    return e12 / io;
  },
  audioTsToSeconds: Ka = function(e12, t3) {
    return e12 / t3;
  },
  audioTsToVideoTs: Ya,
  videoTsToAudioTs: Qa,
  metadataTsToSeconds: Ja
};
var no = "8.12.0";
var ro = {};
var ao = function(e12, t3) {
  return ro[e12] = ro[e12] || [], t3 && (ro[e12] = ro[e12].concat(t3)), ro[e12];
};
var oo = function(e12, t3) {
  ao(e12, t3);
};
var lo = function(e12, t3) {
  const i4 = ao(e12).indexOf(t3);
  return !(i4 <= -1) && (ro[e12] = ro[e12].slice(), ro[e12].splice(i4, 1), true);
};
var ho = function(e12, t3) {
  ao(e12, [].concat(t3).map((t4) => {
    const i4 = (...s6) => (lo(e12, i4), t4(...s6));
    return i4;
  }));
};
var uo = {
  prefixed: true
};
var co = [["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror", "fullscreen"], ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror", "-webkit-full-screen"]];
var po = co[0];
var mo;
for (let d_ = 0; d_ < co.length; d_++) if (co[d_][1] in ge) {
  mo = co[d_];
  break;
}
if (mo) {
  for (let u_ = 0; u_ < mo.length; u_++) uo[po[u_]] = mo[u_];
  uo.prefixed = mo[0] !== po[0];
}
var go = [];
var fo = (e12, t3, i4) => (s6, n6, r3) => {
  const a6 = t3.levels[n6], o4 = new RegExp(`^(${a6})$`);
  let l5 = e12;
  if ("log" !== s6 && r3.unshift(s6.toUpperCase() + ":"), i4 && (l5 = `%c${e12}`, r3.unshift(i4)), r3.unshift(l5 + ":"), go) {
    go.push([].concat(r3));
    const e13 = go.length - 1e3;
    go.splice(0, e13 > 0 ? e13 : 0);
  }
  if (!g3.console) return;
  let h = g3.console[s6];
  h || "debug" !== s6 || (h = g3.console.info || g3.console.log), h && a6 && o4.test(s6) && h[Array.isArray(r3) ? "apply" : "call"](g3.console, r3);
};
function yo(e12, t3 = ":", i4 = "") {
  let s6, n6 = "info";
  const r3 = function(...e13) {
    s6("log", n6, e13);
  };
  return s6 = fo(e12, r3, i4), r3.createLogger = (s7, n7, r4) => {
    const a6 = void 0 !== n7 ? n7 : t3;
    return yo(`${e12} ${a6} ${s7}`, a6, void 0 !== r4 ? r4 : i4);
  }, r3.createNewLogger = (e13, t4, i5) => yo(e13, t4, i5), r3.levels = {
    all: "debug|log|warn|error",
    off: "",
    debug: "debug|log|warn|error",
    info: "log|warn|error",
    warn: "warn|error",
    error: "error",
    DEFAULT: n6
  }, r3.level = (e13) => {
    if ("string" == typeof e13) {
      if (!r3.levels.hasOwnProperty(e13)) throw new Error(`"${e13}" in not a valid log level`);
      n6 = e13;
    }
    return n6;
  }, r3.history = () => go ? [].concat(go) : [], r3.history.filter = (e13) => (go || []).filter((t4) => new RegExp(`.*${e13}.*`).test(t4[0])), r3.history.clear = () => {
    go && (go.length = 0);
  }, r3.history.disable = () => {
    null !== go && (go.length = 0, go = null);
  }, r3.history.enable = () => {
    null === go && (go = []);
  }, r3.error = (...e13) => s6("error", n6, e13), r3.warn = (...e13) => s6("warn", n6, e13), r3.debug = (...e13) => s6("debug", n6, e13), r3;
}
var _o = yo("VIDEOJS");
var vo = _o.createLogger;
var bo = Object.prototype.toString;
var To = function(e12) {
  return wo(e12) ? Object.keys(e12) : [];
};
function So(e12, t3) {
  To(e12).forEach((i4) => t3(e12[i4], i4));
}
function Eo(e12, t3, i4 = 0) {
  return To(e12).reduce((i5, s6) => t3(i5, e12[s6], s6), i4);
}
function wo(e12) {
  return !!e12 && "object" == typeof e12;
}
function Co(e12) {
  return wo(e12) && "[object Object]" === bo.call(e12) && e12.constructor === Object;
}
function ko(...e12) {
  const t3 = {};
  return e12.forEach((e13) => {
    e13 && So(e13, (e14, i4) => {
      Co(e14) ? (Co(t3[i4]) || (t3[i4] = {}), t3[i4] = ko(t3[i4], e14)) : t3[i4] = e14;
    });
  }), t3;
}
function xo(e12 = {}) {
  const t3 = [];
  for (const i4 in e12) if (e12.hasOwnProperty(i4)) {
    const s6 = e12[i4];
    t3.push(s6);
  }
  return t3;
}
function Io(e12, t3, i4, s6 = true) {
  const n6 = (i5) => Object.defineProperty(e12, t3, {
    value: i5,
    enumerable: true,
    writable: true
  }), r3 = {
    configurable: true,
    enumerable: true,
    get() {
      const e13 = i4();
      return n6(e13), e13;
    }
  };
  return s6 && (r3.set = n6), Object.defineProperty(e12, t3, r3);
}
var Ao = Object.freeze({
  __proto__: null,
  each: So,
  reduce: Eo,
  isObject: wo,
  isPlain: Co,
  merge: ko,
  values: xo,
  defineLazyProperty: Io
});
var Do;
var Po = false;
var Lo = null;
var Oo = false;
var No = false;
var Ro = false;
var Mo = false;
var Uo = false;
var Bo = null;
var Fo = null;
var qo = null;
var jo = false;
var $o = false;
var Ho = false;
var Vo = false;
var zo = false;
var Wo = false;
var Go = false;
var Xo = Boolean(tl() && ("ontouchstart" in g3 || g3.navigator.maxTouchPoints || g3.DocumentTouch && g3.document instanceof g3.DocumentTouch));
var Ko = g3.navigator && g3.navigator.userAgentData;
if (Ko && Ko.platform && Ko.brands && (Oo = "Android" === Ko.platform, Ro = Boolean(Ko.brands.find((e12) => "Microsoft Edge" === e12.brand)), Mo = Boolean(Ko.brands.find((e12) => "Chromium" === e12.brand)), Uo = !Ro && Mo, Bo = Fo = (Ko.brands.find((e12) => "Chromium" === e12.brand) || {}).version || null, $o = "Windows" === Ko.platform), !Mo) {
  const c_ = g3.navigator && g3.navigator.userAgent || "";
  Po = /iPod/i.test(c_), Lo = function() {
    const e12 = c_.match(/OS (\d+)_/i);
    return e12 && e12[1] ? e12[1] : null;
  }(), Oo = /Android/i.test(c_), Do = function() {
    const e12 = c_.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
    if (!e12) return null;
    const t3 = e12[1] && parseFloat(e12[1]), i4 = e12[2] && parseFloat(e12[2]);
    return t3 && i4 ? parseFloat(e12[1] + "." + e12[2]) : t3 || null;
  }(), No = /Firefox/i.test(c_), Ro = /Edg/i.test(c_), Mo = /Chrome/i.test(c_) || /CriOS/i.test(c_), Uo = !Ro && Mo, Bo = Fo = function() {
    const e12 = c_.match(/(Chrome|CriOS)\/(\d+)/);
    return e12 && e12[2] ? parseFloat(e12[2]) : null;
  }(), qo = function() {
    const e12 = /MSIE\s(\d+)\.\d/.exec(c_);
    let t3 = e12 && parseFloat(e12[1]);
    return !t3 && /Trident\/7.0/i.test(c_) && /rv:11.0/.test(c_) && (t3 = 11), t3;
  }(), zo = /Tizen/i.test(c_), Wo = /Web0S/i.test(c_), Go = zo || Wo, jo = /Safari/i.test(c_) && !Uo && !Oo && !Ro && !Go, $o = /Windows/i.test(c_), Ho = /iPad/i.test(c_) || jo && Xo && !/iPhone/i.test(c_), Vo = /iPhone/i.test(c_) && !Ho;
}
var Yo = Vo || Ho || Po;
var Qo = (jo || Yo) && !Uo;
var Jo = Object.freeze({
  __proto__: null,
  get IS_IPOD() {
    return Po;
  },
  get IOS_VERSION() {
    return Lo;
  },
  get IS_ANDROID() {
    return Oo;
  },
  get ANDROID_VERSION() {
    return Do;
  },
  get IS_FIREFOX() {
    return No;
  },
  get IS_EDGE() {
    return Ro;
  },
  get IS_CHROMIUM() {
    return Mo;
  },
  get IS_CHROME() {
    return Uo;
  },
  get CHROMIUM_VERSION() {
    return Bo;
  },
  get CHROME_VERSION() {
    return Fo;
  },
  get IE_VERSION() {
    return qo;
  },
  get IS_SAFARI() {
    return jo;
  },
  get IS_WINDOWS() {
    return $o;
  },
  get IS_IPAD() {
    return Ho;
  },
  get IS_IPHONE() {
    return Vo;
  },
  get IS_TIZEN() {
    return zo;
  },
  get IS_WEBOS() {
    return Wo;
  },
  get IS_SMART_TV() {
    return Go;
  },
  TOUCH_ENABLED: Xo,
  IS_IOS: Yo,
  IS_ANY_SAFARI: Qo
});
function Zo(e12) {
  return "string" == typeof e12 && Boolean(e12.trim());
}
function el(e12) {
  if (e12.indexOf(" ") >= 0) throw new Error("class has illegal whitespace characters");
}
function tl() {
  return ge === g3.document;
}
function il(e12) {
  return wo(e12) && 1 === e12.nodeType;
}
function sl() {
  try {
    return g3.parent !== g3.self;
  } catch (e12) {
    return true;
  }
}
function nl(e12) {
  return function(t3, i4) {
    if (!Zo(t3)) return ge[e12](null);
    Zo(i4) && (i4 = ge.querySelector(i4));
    const s6 = il(i4) ? i4 : ge;
    return s6[e12] && s6[e12](t3);
  };
}
function rl(e12 = "div", t3 = {}, i4 = {}, s6) {
  const n6 = ge.createElement(e12);
  return Object.getOwnPropertyNames(t3).forEach(function(e13) {
    const i5 = t3[e13];
    "textContent" === e13 ? al(n6, i5) : n6[e13] === i5 && "tabIndex" !== e13 || (n6[e13] = i5);
  }), Object.getOwnPropertyNames(i4).forEach(function(e13) {
    n6.setAttribute(e13, i4[e13]);
  }), s6 && Cl(n6, s6), n6;
}
function al(e12, t3) {
  return void 0 === e12.textContent ? e12.innerText = t3 : e12.textContent = t3, e12;
}
function ol(e12, t3) {
  t3.firstChild ? t3.insertBefore(e12, t3.firstChild) : t3.appendChild(e12);
}
function ll(e12, t3) {
  return el(t3), e12.classList.contains(t3);
}
function hl(e12, ...t3) {
  return e12.classList.add(...t3.reduce((e13, t4) => e13.concat(t4.split(/\s+/)), [])), e12;
}
function dl(e12, ...t3) {
  return e12 ? (e12.classList.remove(...t3.reduce((e13, t4) => e13.concat(t4.split(/\s+/)), [])), e12) : (_o.warn("removeClass was called with an element that doesn't exist"), null);
}
function ul(e12, t3, i4) {
  return "function" == typeof i4 && (i4 = i4(e12, t3)), "boolean" != typeof i4 && (i4 = void 0), t3.split(/\s+/).forEach((t4) => e12.classList.toggle(t4, i4)), e12;
}
function cl(e12, t3) {
  Object.getOwnPropertyNames(t3).forEach(function(i4) {
    const s6 = t3[i4];
    null == s6 || false === s6 ? e12.removeAttribute(i4) : e12.setAttribute(i4, true === s6 ? "" : s6);
  });
}
function pl(e12) {
  const t3 = {}, i4 = ["autoplay", "controls", "playsinline", "loop", "muted", "default", "defaultMuted"];
  if (e12 && e12.attributes && e12.attributes.length > 0) {
    const s6 = e12.attributes;
    for (let e13 = s6.length - 1; e13 >= 0; e13--) {
      const n6 = s6[e13].name;
      let r3 = s6[e13].value;
      i4.includes(n6) && (r3 = null !== r3), t3[n6] = r3;
    }
  }
  return t3;
}
function ml(e12, t3) {
  return e12.getAttribute(t3);
}
function gl(e12, t3, i4) {
  e12.setAttribute(t3, i4);
}
function fl(e12, t3) {
  e12.removeAttribute(t3);
}
function yl() {
  ge.body.focus(), ge.onselectstart = function() {
    return false;
  };
}
function _l() {
  ge.onselectstart = function() {
    return true;
  };
}
function vl(e12) {
  if (e12 && e12.getBoundingClientRect && e12.parentNode) {
    const t3 = e12.getBoundingClientRect(), i4 = {};
    return ["bottom", "height", "left", "right", "top", "width"].forEach((e13) => {
      void 0 !== t3[e13] && (i4[e13] = t3[e13]);
    }), i4.height || (i4.height = parseFloat(Dl(e12, "height"))), i4.width || (i4.width = parseFloat(Dl(e12, "width"))), i4;
  }
}
function bl(e12) {
  if (!e12 || e12 && !e12.offsetParent) return {
    left: 0,
    top: 0,
    width: 0,
    height: 0
  };
  const t3 = e12.offsetWidth, i4 = e12.offsetHeight;
  let s6 = 0, n6 = 0;
  for (; e12.offsetParent && e12 !== ge[uo.fullscreenElement]; ) s6 += e12.offsetLeft, n6 += e12.offsetTop, e12 = e12.offsetParent;
  return {
    left: s6,
    top: n6,
    width: t3,
    height: i4
  };
}
function Tl(e12, t3) {
  const i4 = {
    x: 0,
    y: 0
  };
  if (Yo) {
    let t4 = e12;
    for (; t4 && "html" !== t4.nodeName.toLowerCase(); ) {
      const e13 = Dl(t4, "transform");
      if (/^matrix/.test(e13)) {
        const t5 = e13.slice(7, -1).split(/,\s/).map(Number);
        i4.x += t5[4], i4.y += t5[5];
      } else if (/^matrix3d/.test(e13)) {
        const t5 = e13.slice(9, -1).split(/,\s/).map(Number);
        i4.x += t5[12], i4.y += t5[13];
      }
      t4 = t4.parentNode;
    }
  }
  const s6 = {}, n6 = bl(t3.target), r3 = bl(e12), a6 = r3.width, o4 = r3.height;
  let l5 = t3.offsetY - (r3.top - n6.top), h = t3.offsetX - (r3.left - n6.left);
  return t3.changedTouches && (h = t3.changedTouches[0].pageX - r3.left, l5 = t3.changedTouches[0].pageY + r3.top, Yo && (h -= i4.x, l5 -= i4.y)), s6.y = 1 - Math.max(0, Math.min(1, l5 / o4)), s6.x = Math.max(0, Math.min(1, h / a6)), s6;
}
function Sl(e12) {
  return wo(e12) && 3 === e12.nodeType;
}
function El(e12) {
  for (; e12.firstChild; ) e12.removeChild(e12.firstChild);
  return e12;
}
function wl(e12) {
  return "function" == typeof e12 && (e12 = e12()), (Array.isArray(e12) ? e12 : [e12]).map((e13) => ("function" == typeof e13 && (e13 = e13()), il(e13) || Sl(e13) ? e13 : "string" == typeof e13 && /\S/.test(e13) ? ge.createTextNode(e13) : void 0)).filter((e13) => e13);
}
function Cl(e12, t3) {
  return wl(t3).forEach((t4) => e12.appendChild(t4)), e12;
}
function kl(e12, t3) {
  return Cl(El(e12), t3);
}
function xl(e12) {
  return void 0 === e12.button && void 0 === e12.buttons || 0 === e12.button && void 0 === e12.buttons || "mouseup" === e12.type && 0 === e12.button && 0 === e12.buttons || 0 === e12.button && 1 === e12.buttons;
}
var Il = nl("querySelector");
var Al = nl("querySelectorAll");
function Dl(e12, t3) {
  if (!e12 || !t3) return "";
  if ("function" == typeof g3.getComputedStyle) {
    let i4;
    try {
      i4 = g3.getComputedStyle(e12);
    } catch (l_) {
      return "";
    }
    return i4 ? i4.getPropertyValue(t3) || i4[t3] : "";
  }
  return "";
}
function Pl(e12) {
  [...ge.styleSheets].forEach((t3) => {
    try {
      const i4 = [...t3.cssRules].map((e13) => e13.cssText).join(""), s6 = ge.createElement("style");
      s6.textContent = i4, e12.document.head.appendChild(s6);
    } catch (l_) {
      const s6 = ge.createElement("link");
      s6.rel = "stylesheet", s6.type = t3.type, s6.media = t3.media.mediaText, s6.href = t3.href, e12.document.head.appendChild(s6);
    }
  });
}
var Ll = Object.freeze({
  __proto__: null,
  isReal: tl,
  isEl: il,
  isInFrame: sl,
  createEl: rl,
  textContent: al,
  prependTo: ol,
  hasClass: ll,
  addClass: hl,
  removeClass: dl,
  toggleClass: ul,
  setAttributes: cl,
  getAttributes: pl,
  getAttribute: ml,
  setAttribute: gl,
  removeAttribute: fl,
  blockTextSelection: yl,
  unblockTextSelection: _l,
  getBoundingClientRect: vl,
  findPosition: bl,
  getPointerPosition: Tl,
  isTextNode: Sl,
  emptyEl: El,
  normalizeContent: wl,
  appendContent: Cl,
  insertContent: kl,
  isSingleLeftClick: xl,
  $: Il,
  $$: Al,
  computedStyle: Dl,
  copyStyleSheetsToWindow: Pl
});
var Ol;
var Nl = false;
var Rl = function() {
  if (false === Ol.options.autoSetup) return;
  const e12 = Array.prototype.slice.call(ge.getElementsByTagName("video")), t3 = Array.prototype.slice.call(ge.getElementsByTagName("audio")), i4 = Array.prototype.slice.call(ge.getElementsByTagName("video-js")), s6 = e12.concat(t3, i4);
  if (s6 && s6.length > 0) for (let n6 = 0, r3 = s6.length; n6 < r3; n6++) {
    const e13 = s6[n6];
    if (!e13 || !e13.getAttribute) {
      Ml(1);
      break;
    }
    if (void 0 === e13.player) {
      null !== e13.getAttribute("data-setup") && Ol(e13);
    }
  }
  else Nl || Ml(1);
};
function Ml(e12, t3) {
  tl() && (t3 && (Ol = t3), g3.setTimeout(Rl, e12));
}
function Ul() {
  Nl = true, g3.removeEventListener("load", Ul);
}
tl() && ("complete" === ge.readyState ? Ul() : g3.addEventListener("load", Ul));
var Bl = function(e12) {
  const t3 = ge.createElement("style");
  return t3.className = e12, t3;
};
var Fl = function(e12, t3) {
  e12.styleSheet ? e12.styleSheet.cssText = t3 : e12.textContent = t3;
};
var ql = /* @__PURE__ */ new WeakMap();
var jl;
var $l = 3;
function Hl() {
  return $l++;
}
function Vl(e12, t3) {
  if (!ql.has(e12)) return;
  const i4 = ql.get(e12);
  0 === i4.handlers[t3].length && (delete i4.handlers[t3], e12.removeEventListener ? e12.removeEventListener(t3, i4.dispatcher, false) : e12.detachEvent && e12.detachEvent("on" + t3, i4.dispatcher)), Object.getOwnPropertyNames(i4.handlers).length <= 0 && (delete i4.handlers, delete i4.dispatcher, delete i4.disabled), 0 === Object.getOwnPropertyNames(i4).length && ql.delete(e12);
}
function zl(e12, t3, i4, s6) {
  i4.forEach(function(i5) {
    e12(t3, i5, s6);
  });
}
function Wl(e12) {
  if (e12.fixed_) return e12;
  function t3() {
    return true;
  }
  function i4() {
    return false;
  }
  if (!e12 || !e12.isPropagationStopped || !e12.isImmediatePropagationStopped) {
    const s6 = e12 || g3.event;
    e12 = {};
    for (const t4 in s6) "layerX" !== t4 && "layerY" !== t4 && "keyLocation" !== t4 && "webkitMovementX" !== t4 && "webkitMovementY" !== t4 && "path" !== t4 && ("returnValue" === t4 && s6.preventDefault || (e12[t4] = s6[t4]));
    if (e12.target || (e12.target = e12.srcElement || ge), e12.relatedTarget || (e12.relatedTarget = e12.fromElement === e12.target ? e12.toElement : e12.fromElement), e12.preventDefault = function() {
      s6.preventDefault && s6.preventDefault(), e12.returnValue = false, s6.returnValue = false, e12.defaultPrevented = true;
    }, e12.defaultPrevented = false, e12.stopPropagation = function() {
      s6.stopPropagation && s6.stopPropagation(), e12.cancelBubble = true, s6.cancelBubble = true, e12.isPropagationStopped = t3;
    }, e12.isPropagationStopped = i4, e12.stopImmediatePropagation = function() {
      s6.stopImmediatePropagation && s6.stopImmediatePropagation(), e12.isImmediatePropagationStopped = t3, e12.stopPropagation();
    }, e12.isImmediatePropagationStopped = i4, null !== e12.clientX && void 0 !== e12.clientX) {
      const t4 = ge.documentElement, i5 = ge.body;
      e12.pageX = e12.clientX + (t4 && t4.scrollLeft || i5 && i5.scrollLeft || 0) - (t4 && t4.clientLeft || i5 && i5.clientLeft || 0), e12.pageY = e12.clientY + (t4 && t4.scrollTop || i5 && i5.scrollTop || 0) - (t4 && t4.clientTop || i5 && i5.clientTop || 0);
    }
    e12.which = e12.charCode || e12.keyCode, null !== e12.button && void 0 !== e12.button && (e12.button = 1 & e12.button ? 0 : 4 & e12.button ? 1 : 2 & e12.button ? 2 : 0);
  }
  return e12.fixed_ = true, e12;
}
var Gl = function() {
  if ("boolean" != typeof jl) {
    jl = false;
    try {
      const e12 = Object.defineProperty({}, "passive", {
        get() {
          jl = true;
        }
      });
      g3.addEventListener("test", null, e12), g3.removeEventListener("test", null, e12);
    } catch (l_) {
    }
  }
  return jl;
};
var Xl = ["touchstart", "touchmove"];
function Kl(e12, t3, i4) {
  if (Array.isArray(t3)) return zl(Kl, e12, t3, i4);
  ql.has(e12) || ql.set(e12, {});
  const s6 = ql.get(e12);
  if (s6.handlers || (s6.handlers = {}), s6.handlers[t3] || (s6.handlers[t3] = []), i4.guid || (i4.guid = Hl()), s6.handlers[t3].push(i4), s6.dispatcher || (s6.disabled = false, s6.dispatcher = function(t4, i5) {
    if (s6.disabled) return;
    t4 = Wl(t4);
    const n6 = s6.handlers[t4.type];
    if (n6) {
      const s7 = n6.slice(0);
      for (let n7 = 0, r3 = s7.length; n7 < r3 && !t4.isImmediatePropagationStopped(); n7++) try {
        s7[n7].call(e12, t4, i5);
      } catch (l_) {
        _o.error(l_);
      }
    }
  }), 1 === s6.handlers[t3].length) if (e12.addEventListener) {
    let i5 = false;
    Gl() && Xl.indexOf(t3) > -1 && (i5 = {
      passive: true
    }), e12.addEventListener(t3, s6.dispatcher, i5);
  } else e12.attachEvent && e12.attachEvent("on" + t3, s6.dispatcher);
}
function Yl(e12, t3, i4) {
  if (!ql.has(e12)) return;
  const s6 = ql.get(e12);
  if (!s6.handlers) return;
  if (Array.isArray(t3)) return zl(Yl, e12, t3, i4);
  const n6 = function(e13, t4) {
    s6.handlers[t4] = [], Vl(e13, t4);
  };
  if (void 0 === t3) {
    for (const t4 in s6.handlers) Object.prototype.hasOwnProperty.call(s6.handlers || {}, t4) && n6(e12, t4);
    return;
  }
  const r3 = s6.handlers[t3];
  if (r3) if (i4) {
    if (i4.guid) for (let e13 = 0; e13 < r3.length; e13++) r3[e13].guid === i4.guid && r3.splice(e13--, 1);
    Vl(e12, t3);
  } else n6(e12, t3);
}
function Ql(e12, t3, i4) {
  const s6 = ql.has(e12) ? ql.get(e12) : {}, n6 = e12.parentNode || e12.ownerDocument;
  if ("string" == typeof t3 ? t3 = {
    type: t3,
    target: e12
  } : t3.target || (t3.target = e12), t3 = Wl(t3), s6.dispatcher && s6.dispatcher.call(e12, t3, i4), n6 && !t3.isPropagationStopped() && true === t3.bubbles) Ql.call(null, n6, t3, i4);
  else if (!n6 && !t3.defaultPrevented && t3.target && t3.target[t3.type]) {
    ql.has(t3.target) || ql.set(t3.target, {});
    const e13 = ql.get(t3.target);
    t3.target[t3.type] && (e13.disabled = true, "function" == typeof t3.target[t3.type] && t3.target[t3.type](), e13.disabled = false);
  }
  return !t3.defaultPrevented;
}
function Jl(e12, t3, i4) {
  if (Array.isArray(t3)) return zl(Jl, e12, t3, i4);
  const s6 = function() {
    Yl(e12, t3, s6), i4.apply(this, arguments);
  };
  s6.guid = i4.guid = i4.guid || Hl(), Kl(e12, t3, s6);
}
function Zl(e12, t3, i4) {
  const s6 = function() {
    Yl(e12, t3, s6), i4.apply(this, arguments);
  };
  s6.guid = i4.guid = i4.guid || Hl(), Kl(e12, t3, s6);
}
var eh = Object.freeze({
  __proto__: null,
  fixEvent: Wl,
  on: Kl,
  off: Yl,
  trigger: Ql,
  one: Jl,
  any: Zl
});
var th = 30;
var ih = function(e12, t3, i4) {
  t3.guid || (t3.guid = Hl());
  const s6 = t3.bind(e12);
  return s6.guid = i4 ? i4 + "_" + t3.guid : t3.guid, s6;
};
var sh = function(e12, t3) {
  let i4 = g3.performance.now();
  return function(...s6) {
    const n6 = g3.performance.now();
    n6 - i4 >= t3 && (e12(...s6), i4 = n6);
  };
};
var nh = function(e12, t3, i4, s6 = g3) {
  let n6;
  const r3 = () => {
    s6.clearTimeout(n6), n6 = null;
  }, a6 = function() {
    const r4 = this, a7 = arguments;
    let o4 = function() {
      n6 = null, o4 = null, i4 || e12.apply(r4, a7);
    };
    !n6 && i4 && e12.apply(r4, a7), s6.clearTimeout(n6), n6 = s6.setTimeout(o4, t3);
  };
  return a6.cancel = r3, a6;
};
var rh = Object.freeze({
  __proto__: null,
  UPDATE_REFRESH_INTERVAL: th,
  bind_: ih,
  throttle: sh,
  debounce: nh
});
var ah;
var oh = class {
  on(e12, t3) {
    const i4 = this.addEventListener;
    this.addEventListener = () => {
    }, Kl(this, e12, t3), this.addEventListener = i4;
  }
  off(e12, t3) {
    Yl(this, e12, t3);
  }
  one(e12, t3) {
    const i4 = this.addEventListener;
    this.addEventListener = () => {
    }, Jl(this, e12, t3), this.addEventListener = i4;
  }
  any(e12, t3) {
    const i4 = this.addEventListener;
    this.addEventListener = () => {
    }, Zl(this, e12, t3), this.addEventListener = i4;
  }
  trigger(e12) {
    const t3 = e12.type || e12;
    "string" == typeof e12 && (e12 = {
      type: t3
    }), e12 = Wl(e12), this.allowedEvents_[t3] && this["on" + t3] && this["on" + t3](e12), Ql(this, e12);
  }
  queueTrigger(e12) {
    ah || (ah = /* @__PURE__ */ new Map());
    const t3 = e12.type || e12;
    let i4 = ah.get(this);
    i4 || (i4 = /* @__PURE__ */ new Map(), ah.set(this, i4));
    const s6 = i4.get(t3);
    i4.delete(t3), g3.clearTimeout(s6);
    const n6 = g3.setTimeout(() => {
      i4.delete(t3), 0 === i4.size && (i4 = null, ah.delete(this)), this.trigger(e12);
    }, 0);
    i4.set(t3, n6);
  }
};
oh.prototype.allowedEvents_ = {}, oh.prototype.addEventListener = oh.prototype.on, oh.prototype.removeEventListener = oh.prototype.off, oh.prototype.dispatchEvent = oh.prototype.trigger;
var lh = (e12) => "function" == typeof e12.name ? e12.name() : "string" == typeof e12.name ? e12.name : e12.name_ ? e12.name_ : e12.constructor && e12.constructor.name ? e12.constructor.name : typeof e12;
var hh = (e12) => e12 instanceof oh || !!e12.eventBusEl_ && ["on", "one", "off", "trigger"].every((t3) => "function" == typeof e12[t3]);
var dh = (e12, t3) => {
  hh(e12) ? t3() : (e12.eventedCallbacks || (e12.eventedCallbacks = []), e12.eventedCallbacks.push(t3));
};
var uh = (e12) => "string" == typeof e12 && /\S/.test(e12) || Array.isArray(e12) && !!e12.length;
var ch = (e12, t3, i4) => {
  if (!e12 || !e12.nodeName && !hh(e12)) throw new Error(`Invalid target for ${lh(t3)}#${i4}; must be a DOM node or evented object.`);
};
var ph = (e12, t3, i4) => {
  if (!uh(e12)) throw new Error(`Invalid event type for ${lh(t3)}#${i4}; must be a non-empty string or array.`);
};
var mh = (e12, t3, i4) => {
  if ("function" != typeof e12) throw new Error(`Invalid listener for ${lh(t3)}#${i4}; must be a function.`);
};
var gh = (e12, t3, i4) => {
  const s6 = t3.length < 3 || t3[0] === e12 || t3[0] === e12.eventBusEl_;
  let n6, r3, a6;
  return s6 ? (n6 = e12.eventBusEl_, t3.length >= 3 && t3.shift(), [r3, a6] = t3) : [n6, r3, a6] = t3, ch(n6, e12, i4), ph(r3, e12, i4), mh(a6, e12, i4), a6 = ih(e12, a6), {
    isTargetingSelf: s6,
    target: n6,
    type: r3,
    listener: a6
  };
};
var fh = (e12, t3, i4, s6) => {
  ch(e12, e12, t3), e12.nodeName ? eh[t3](e12, i4, s6) : e12[t3](i4, s6);
};
var yh = {
  on(...e12) {
    const {
      isTargetingSelf: t3,
      target: i4,
      type: s6,
      listener: n6
    } = gh(this, e12, "on");
    if (fh(i4, "on", s6, n6), !t3) {
      const e13 = () => this.off(i4, s6, n6);
      e13.guid = n6.guid;
      const t4 = () => this.off("dispose", e13);
      t4.guid = n6.guid, fh(this, "on", "dispose", e13), fh(i4, "on", "dispose", t4);
    }
  },
  one(...e12) {
    const {
      isTargetingSelf: t3,
      target: i4,
      type: s6,
      listener: n6
    } = gh(this, e12, "one");
    if (t3) fh(i4, "one", s6, n6);
    else {
      const e13 = (...t4) => {
        this.off(i4, s6, e13), n6.apply(null, t4);
      };
      e13.guid = n6.guid, fh(i4, "one", s6, e13);
    }
  },
  any(...e12) {
    const {
      isTargetingSelf: t3,
      target: i4,
      type: s6,
      listener: n6
    } = gh(this, e12, "any");
    if (t3) fh(i4, "any", s6, n6);
    else {
      const e13 = (...t4) => {
        this.off(i4, s6, e13), n6.apply(null, t4);
      };
      e13.guid = n6.guid, fh(i4, "any", s6, e13);
    }
  },
  off(e12, t3, i4) {
    if (!e12 || uh(e12)) Yl(this.eventBusEl_, e12, t3);
    else {
      const s6 = e12, n6 = t3;
      ch(s6, this, "off"), ph(n6, this, "off"), mh(i4, this, "off"), i4 = ih(this, i4), this.off("dispose", i4), s6.nodeName ? (Yl(s6, n6, i4), Yl(s6, "dispose", i4)) : hh(s6) && (s6.off(n6, i4), s6.off("dispose", i4));
    }
  },
  trigger(e12, t3) {
    ch(this.eventBusEl_, this, "trigger");
    const i4 = e12 && "string" != typeof e12 ? e12.type : e12;
    if (!uh(i4)) throw new Error(`Invalid event type for ${lh(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);
    return Ql(this.eventBusEl_, e12, t3);
  }
};
function _h(e12, t3 = {}) {
  const {
    eventBusKey: i4
  } = t3;
  if (i4) {
    if (!e12[i4].nodeName) throw new Error(`The eventBusKey "${i4}" does not refer to an element.`);
    e12.eventBusEl_ = e12[i4];
  } else e12.eventBusEl_ = rl("span", {
    className: "vjs-event-bus"
  });
  return Object.assign(e12, yh), e12.eventedCallbacks && e12.eventedCallbacks.forEach((e13) => {
    e13();
  }), e12.on("dispose", () => {
    e12.off(), [e12, e12.el_, e12.eventBusEl_].forEach(function(e13) {
      e13 && ql.has(e13) && ql.delete(e13);
    }), g3.setTimeout(() => {
      e12.eventBusEl_ = null;
    }, 0);
  }), e12;
}
var vh = {
  state: {},
  setState(e12) {
    let t3;
    return "function" == typeof e12 && (e12 = e12()), So(e12, (e13, i4) => {
      this.state[i4] !== e13 && (t3 = t3 || {}, t3[i4] = {
        from: this.state[i4],
        to: e13
      }), this.state[i4] = e13;
    }), t3 && hh(this) && this.trigger({
      changes: t3,
      type: "statechanged"
    }), t3;
  }
};
function bh(e12, t3) {
  return Object.assign(e12, vh), e12.state = Object.assign({}, e12.state, t3), "function" == typeof e12.handleStateChanged && hh(e12) && e12.on("statechanged", e12.handleStateChanged), e12;
}
var Th = function(e12) {
  return "string" != typeof e12 ? e12 : e12.replace(/./, (e13) => e13.toLowerCase());
};
var Sh = function(e12) {
  return "string" != typeof e12 ? e12 : e12.replace(/./, (e13) => e13.toUpperCase());
};
var Eh = function(e12, t3) {
  return Sh(e12) === Sh(t3);
};
var wh = Object.freeze({
  __proto__: null,
  toLowerCase: Th,
  toTitleCase: Sh,
  titleCaseEquals: Eh
});
var Ch = class _Ch {
  constructor(e12, t3, i4) {
    if (!e12 && this.play ? this.player_ = e12 = this : this.player_ = e12, this.isDisposed_ = false, this.parentComponent_ = null, this.options_ = ko({}, this.options_), t3 = this.options_ = ko(this.options_, t3), this.id_ = t3.id || t3.el && t3.el.id, !this.id_) {
      const t4 = e12 && e12.id && e12.id() || "no_player";
      this.id_ = `${t4}_component_${Hl()}`;
    }
    this.name_ = t3.name || null, t3.el ? this.el_ = t3.el : false !== t3.createEl && (this.el_ = this.createEl()), t3.className && this.el_ && t3.className.split(" ").forEach((e13) => this.addClass(e13)), ["on", "off", "one", "any", "trigger"].forEach((e13) => {
      this[e13] = void 0;
    }), false !== t3.evented && (_h(this, {
      eventBusKey: this.el_ ? "el_" : null
    }), this.handleLanguagechange = this.handleLanguagechange.bind(this), this.on(this.player_, "languagechange", this.handleLanguagechange)), bh(this, this.constructor.defaultState), this.children_ = [], this.childIndex_ = {}, this.childNameIndex_ = {}, this.setTimeoutIds_ = /* @__PURE__ */ new Set(), this.setIntervalIds_ = /* @__PURE__ */ new Set(), this.rafIds_ = /* @__PURE__ */ new Set(), this.namedRafs_ = /* @__PURE__ */ new Map(), this.clearingTimersOnDispose_ = false, false !== t3.initChildren && this.initChildren(), this.ready(i4), false !== t3.reportTouchActivity && this.enableTouchActivity();
  }
  on(e12, t3) {
  }
  off(e12, t3) {
  }
  one(e12, t3) {
  }
  any(e12, t3) {
  }
  trigger(e12, t3) {
  }
  dispose(e12 = {}) {
    if (!this.isDisposed_) {
      if (this.readyQueue_ && (this.readyQueue_.length = 0), this.trigger({
        type: "dispose",
        bubbles: false
      }), this.isDisposed_ = true, this.children_) for (let e13 = this.children_.length - 1; e13 >= 0; e13--) this.children_[e13].dispose && this.children_[e13].dispose();
      this.children_ = null, this.childIndex_ = null, this.childNameIndex_ = null, this.parentComponent_ = null, this.el_ && (this.el_.parentNode && (e12.restoreEl ? this.el_.parentNode.replaceChild(e12.restoreEl, this.el_) : this.el_.parentNode.removeChild(this.el_)), this.el_ = null), this.player_ = null;
    }
  }
  isDisposed() {
    return Boolean(this.isDisposed_);
  }
  player() {
    return this.player_;
  }
  options(e12) {
    return e12 ? (this.options_ = ko(this.options_, e12), this.options_) : this.options_;
  }
  el() {
    return this.el_;
  }
  createEl(e12, t3, i4) {
    return rl(e12, t3, i4);
  }
  localize(e12, t3, i4 = e12) {
    const s6 = this.player_.language && this.player_.language(), n6 = this.player_.languages && this.player_.languages(), r3 = n6 && n6[s6], a6 = s6 && s6.split("-")[0], o4 = n6 && n6[a6];
    let l5 = i4;
    return r3 && r3[e12] ? l5 = r3[e12] : o4 && o4[e12] && (l5 = o4[e12]), t3 && (l5 = l5.replace(/\{(\d+)\}/g, function(e13, i5) {
      const s7 = t3[i5 - 1];
      let n7 = s7;
      return void 0 === s7 && (n7 = e13), n7;
    })), l5;
  }
  handleLanguagechange() {
  }
  contentEl() {
    return this.contentEl_ || this.el_;
  }
  id() {
    return this.id_;
  }
  name() {
    return this.name_;
  }
  children() {
    return this.children_;
  }
  getChildById(e12) {
    return this.childIndex_[e12];
  }
  getChild(e12) {
    if (e12) return this.childNameIndex_[e12];
  }
  getDescendant(...e12) {
    e12 = e12.reduce((e13, t4) => e13.concat(t4), []);
    let t3 = this;
    for (let i4 = 0; i4 < e12.length; i4++) if (t3 = t3.getChild(e12[i4]), !t3 || !t3.getChild) return;
    return t3;
  }
  setIcon(e12, t3 = this.el()) {
    if (!this.player_.options_.experimentalSvgIcons) return;
    const i4 = "http://www.w3.org/2000/svg", s6 = rl("span", {
      className: "vjs-icon-placeholder vjs-svg-icon"
    }, {
      "aria-hidden": "true"
    }), n6 = ge.createElementNS(i4, "svg");
    n6.setAttributeNS(null, "viewBox", "0 0 512 512");
    const r3 = ge.createElementNS(i4, "use");
    return n6.appendChild(r3), r3.setAttributeNS(null, "href", `#vjs-icon-${e12}`), s6.appendChild(n6), this.iconIsSet_ ? t3.replaceChild(s6, t3.querySelector(".vjs-icon-placeholder")) : t3.appendChild(s6), this.iconIsSet_ = true, s6;
  }
  addChild(e12, t3 = {}, i4 = this.children_.length) {
    let s6, n6;
    if ("string" == typeof e12) {
      n6 = Sh(e12);
      const i5 = t3.componentClass || n6;
      t3.name = n6;
      const r3 = _Ch.getComponent(i5);
      if (!r3) throw new Error(`Component ${i5} does not exist`);
      if ("function" != typeof r3) return null;
      s6 = new r3(this.player_ || this, t3);
    } else s6 = e12;
    if (s6.parentComponent_ && s6.parentComponent_.removeChild(s6), this.children_.splice(i4, 0, s6), s6.parentComponent_ = this, "function" == typeof s6.id && (this.childIndex_[s6.id()] = s6), n6 = n6 || s6.name && Sh(s6.name()), n6 && (this.childNameIndex_[n6] = s6, this.childNameIndex_[Th(n6)] = s6), "function" == typeof s6.el && s6.el()) {
      let e13 = null;
      this.children_[i4 + 1] && (this.children_[i4 + 1].el_ ? e13 = this.children_[i4 + 1].el_ : il(this.children_[i4 + 1]) && (e13 = this.children_[i4 + 1])), this.contentEl().insertBefore(s6.el(), e13);
    }
    return s6;
  }
  removeChild(e12) {
    if ("string" == typeof e12 && (e12 = this.getChild(e12)), !e12 || !this.children_) return;
    let t3 = false;
    for (let s6 = this.children_.length - 1; s6 >= 0; s6--) if (this.children_[s6] === e12) {
      t3 = true, this.children_.splice(s6, 1);
      break;
    }
    if (!t3) return;
    e12.parentComponent_ = null, this.childIndex_[e12.id()] = null, this.childNameIndex_[Sh(e12.name())] = null, this.childNameIndex_[Th(e12.name())] = null;
    const i4 = e12.el();
    i4 && i4.parentNode === this.contentEl() && this.contentEl().removeChild(e12.el());
  }
  initChildren() {
    const e12 = this.options_.children;
    if (e12) {
      const t3 = this.options_, i4 = (e13) => {
        const i5 = e13.name;
        let s7 = e13.opts;
        if (void 0 !== t3[i5] && (s7 = t3[i5]), false === s7) return;
        true === s7 && (s7 = {}), s7.playerOptions = this.options_.playerOptions;
        const n7 = this.addChild(i5, s7);
        n7 && (this[i5] = n7);
      };
      let s6;
      const n6 = _Ch.getComponent("Tech");
      s6 = Array.isArray(e12) ? e12 : Object.keys(e12), s6.concat(Object.keys(this.options_).filter(function(e13) {
        return !s6.some(function(t4) {
          return "string" == typeof t4 ? e13 === t4 : e13 === t4.name;
        });
      })).map((t4) => {
        let i5, s7;
        return "string" == typeof t4 ? (i5 = t4, s7 = e12[i5] || this.options_[i5] || {}) : (i5 = t4.name, s7 = t4), {
          name: i5,
          opts: s7
        };
      }).filter((e13) => {
        const t4 = _Ch.getComponent(e13.opts.componentClass || Sh(e13.name));
        return t4 && !n6.isTech(t4);
      }).forEach(i4);
    }
  }
  buildCSSClass() {
    return "";
  }
  ready(e12, t3 = false) {
    if (e12) return this.isReady_ ? void (t3 ? e12.call(this) : this.setTimeout(e12, 1)) : (this.readyQueue_ = this.readyQueue_ || [], void this.readyQueue_.push(e12));
  }
  triggerReady() {
    this.isReady_ = true, this.setTimeout(function() {
      const e12 = this.readyQueue_;
      this.readyQueue_ = [], e12 && e12.length > 0 && e12.forEach(function(e13) {
        e13.call(this);
      }, this), this.trigger("ready");
    }, 1);
  }
  $(e12, t3) {
    return Il(e12, t3 || this.contentEl());
  }
  $$(e12, t3) {
    return Al(e12, t3 || this.contentEl());
  }
  hasClass(e12) {
    return ll(this.el_, e12);
  }
  addClass(...e12) {
    hl(this.el_, ...e12);
  }
  removeClass(...e12) {
    dl(this.el_, ...e12);
  }
  toggleClass(e12, t3) {
    ul(this.el_, e12, t3);
  }
  show() {
    this.removeClass("vjs-hidden");
  }
  hide() {
    this.addClass("vjs-hidden");
  }
  lockShowing() {
    this.addClass("vjs-lock-showing");
  }
  unlockShowing() {
    this.removeClass("vjs-lock-showing");
  }
  getAttribute(e12) {
    return ml(this.el_, e12);
  }
  setAttribute(e12, t3) {
    gl(this.el_, e12, t3);
  }
  removeAttribute(e12) {
    fl(this.el_, e12);
  }
  width(e12, t3) {
    return this.dimension("width", e12, t3);
  }
  height(e12, t3) {
    return this.dimension("height", e12, t3);
  }
  dimensions(e12, t3) {
    this.width(e12, true), this.height(t3);
  }
  dimension(e12, t3, i4) {
    if (void 0 !== t3) return null !== t3 && t3 == t3 || (t3 = 0), -1 !== ("" + t3).indexOf("%") || -1 !== ("" + t3).indexOf("px") ? this.el_.style[e12] = t3 : this.el_.style[e12] = "auto" === t3 ? "" : t3 + "px", void (i4 || this.trigger("componentresize"));
    if (!this.el_) return 0;
    const s6 = this.el_.style[e12], n6 = s6.indexOf("px");
    return -1 !== n6 ? parseInt(s6.slice(0, n6), 10) : parseInt(this.el_["offset" + Sh(e12)], 10);
  }
  currentDimension(e12) {
    let t3 = 0;
    if ("width" !== e12 && "height" !== e12) throw new Error("currentDimension only accepts width or height value");
    if (t3 = Dl(this.el_, e12), t3 = parseFloat(t3), 0 === t3 || isNaN(t3)) {
      const i4 = `offset${Sh(e12)}`;
      t3 = this.el_[i4];
    }
    return t3;
  }
  currentDimensions() {
    return {
      width: this.currentDimension("width"),
      height: this.currentDimension("height")
    };
  }
  currentWidth() {
    return this.currentDimension("width");
  }
  currentHeight() {
    return this.currentDimension("height");
  }
  focus() {
    this.el_.focus();
  }
  blur() {
    this.el_.blur();
  }
  handleKeyDown(e12) {
    this.player_ && (ye.isEventKey(e12, "Tab") || e12.stopPropagation(), this.player_.handleKeyDown(e12));
  }
  handleKeyPress(e12) {
    this.handleKeyDown(e12);
  }
  emitTapEvents() {
    let e12 = 0, t3 = null;
    const i4 = 10, s6 = 200;
    let n6;
    this.on("touchstart", function(i5) {
      1 === i5.touches.length && (t3 = {
        pageX: i5.touches[0].pageX,
        pageY: i5.touches[0].pageY
      }, e12 = g3.performance.now(), n6 = true);
    }), this.on("touchmove", function(e13) {
      if (e13.touches.length > 1) n6 = false;
      else if (t3) {
        const s7 = e13.touches[0].pageX - t3.pageX, r4 = e13.touches[0].pageY - t3.pageY;
        Math.sqrt(s7 * s7 + r4 * r4) > i4 && (n6 = false);
      }
    });
    const r3 = function() {
      n6 = false;
    };
    this.on("touchleave", r3), this.on("touchcancel", r3), this.on("touchend", function(i5) {
      if (t3 = null, true === n6) {
        g3.performance.now() - e12 < s6 && (i5.preventDefault(), this.trigger("tap"));
      }
    });
  }
  enableTouchActivity() {
    if (!this.player() || !this.player().reportUserActivity) return;
    const e12 = ih(this.player(), this.player().reportUserActivity);
    let t3;
    this.on("touchstart", function() {
      e12(), this.clearInterval(t3), t3 = this.setInterval(e12, 250);
    });
    const i4 = function(i5) {
      e12(), this.clearInterval(t3);
    };
    this.on("touchmove", e12), this.on("touchend", i4), this.on("touchcancel", i4);
  }
  setTimeout(e12, t3) {
    var i4;
    return e12 = ih(this, e12), this.clearTimersOnDispose_(), i4 = g3.setTimeout(() => {
      this.setTimeoutIds_.has(i4) && this.setTimeoutIds_.delete(i4), e12();
    }, t3), this.setTimeoutIds_.add(i4), i4;
  }
  clearTimeout(e12) {
    return this.setTimeoutIds_.has(e12) && (this.setTimeoutIds_.delete(e12), g3.clearTimeout(e12)), e12;
  }
  setInterval(e12, t3) {
    e12 = ih(this, e12), this.clearTimersOnDispose_();
    const i4 = g3.setInterval(e12, t3);
    return this.setIntervalIds_.add(i4), i4;
  }
  clearInterval(e12) {
    return this.setIntervalIds_.has(e12) && (this.setIntervalIds_.delete(e12), g3.clearInterval(e12)), e12;
  }
  requestAnimationFrame(e12) {
    var t3;
    return this.clearTimersOnDispose_(), e12 = ih(this, e12), t3 = g3.requestAnimationFrame(() => {
      this.rafIds_.has(t3) && this.rafIds_.delete(t3), e12();
    }), this.rafIds_.add(t3), t3;
  }
  requestNamedAnimationFrame(e12, t3) {
    if (this.namedRafs_.has(e12)) return;
    this.clearTimersOnDispose_(), t3 = ih(this, t3);
    const i4 = this.requestAnimationFrame(() => {
      t3(), this.namedRafs_.has(e12) && this.namedRafs_.delete(e12);
    });
    return this.namedRafs_.set(e12, i4), e12;
  }
  cancelNamedAnimationFrame(e12) {
    this.namedRafs_.has(e12) && (this.cancelAnimationFrame(this.namedRafs_.get(e12)), this.namedRafs_.delete(e12));
  }
  cancelAnimationFrame(e12) {
    return this.rafIds_.has(e12) && (this.rafIds_.delete(e12), g3.cancelAnimationFrame(e12)), e12;
  }
  clearTimersOnDispose_() {
    this.clearingTimersOnDispose_ || (this.clearingTimersOnDispose_ = true, this.one("dispose", () => {
      [["namedRafs_", "cancelNamedAnimationFrame"], ["rafIds_", "cancelAnimationFrame"], ["setTimeoutIds_", "clearTimeout"], ["setIntervalIds_", "clearInterval"]].forEach(([e12, t3]) => {
        this[e12].forEach((e13, i4) => this[t3](i4));
      }), this.clearingTimersOnDispose_ = false;
    }));
  }
  static registerComponent(e12, t3) {
    if ("string" != typeof e12 || !e12) throw new Error(`Illegal component name, "${e12}"; must be a non-empty string.`);
    const i4 = _Ch.getComponent("Tech"), s6 = i4 && i4.isTech(t3), n6 = _Ch === t3 || _Ch.prototype.isPrototypeOf(t3.prototype);
    if (s6 || !n6) {
      let t4;
      throw t4 = s6 ? "techs must be registered using Tech.registerTech()" : "must be a Component subclass", new Error(`Illegal component, "${e12}"; ${t4}.`);
    }
    e12 = Sh(e12), _Ch.components_ || (_Ch.components_ = {});
    const r3 = _Ch.getComponent("Player");
    if ("Player" === e12 && r3 && r3.players) {
      const e13 = r3.players, t4 = Object.keys(e13);
      if (e13 && t4.length > 0 && t4.map((t5) => e13[t5]).every(Boolean)) throw new Error("Can not register Player component after player has been created.");
    }
    return _Ch.components_[e12] = t3, _Ch.components_[Th(e12)] = t3, t3;
  }
  static getComponent(e12) {
    if (e12 && _Ch.components_) return _Ch.components_[e12];
  }
};
function kh(e12, t3, i4) {
  if ("number" != typeof t3 || t3 < 0 || t3 > i4) throw new Error(`Failed to execute '${e12}' on 'TimeRanges': The index provided (${t3}) is non-numeric or out of bounds (0-${i4}).`);
}
function xh(e12, t3, i4, s6) {
  return kh(e12, s6, i4.length - 1), i4[s6][t3];
}
function Ih(e12) {
  let t3;
  return t3 = void 0 === e12 || 0 === e12.length ? {
    length: 0,
    start() {
      throw new Error("This TimeRanges object is empty");
    },
    end() {
      throw new Error("This TimeRanges object is empty");
    }
  } : {
    length: e12.length,
    start: xh.bind(null, "start", 0, e12),
    end: xh.bind(null, "end", 1, e12)
  }, g3.Symbol && g3.Symbol.iterator && (t3[g3.Symbol.iterator] = () => (e12 || []).values()), t3;
}
function Ah(e12, t3) {
  return Array.isArray(e12) ? Ih(e12) : void 0 === e12 || void 0 === t3 ? Ih() : Ih([[e12, t3]]);
}
Ch.registerComponent("Component", Ch);
var Dh = function(e12, t3) {
  e12 = e12 < 0 ? 0 : e12;
  let i4 = Math.floor(e12 % 60), s6 = Math.floor(e12 / 60 % 60), n6 = Math.floor(e12 / 3600);
  const r3 = Math.floor(t3 / 60 % 60), a6 = Math.floor(t3 / 3600);
  return (isNaN(e12) || e12 === 1 / 0) && (n6 = s6 = i4 = "-"), n6 = n6 > 0 || a6 > 0 ? n6 + ":" : "", s6 = ((n6 || r3 >= 10) && s6 < 10 ? "0" + s6 : s6) + ":", i4 = i4 < 10 ? "0" + i4 : i4, n6 + s6 + i4;
};
var Ph = Dh;
function Lh(e12) {
  Ph = e12;
}
function Oh() {
  Ph = Dh;
}
function Nh(e12, t3 = e12) {
  return Ph(e12, t3);
}
var Rh = Object.freeze({
  __proto__: null,
  createTimeRanges: Ah,
  createTimeRange: Ah,
  setFormatTime: Lh,
  resetFormatTime: Oh,
  formatTime: Nh
});
function Mh(e12, t3) {
  let i4, s6, n6 = 0;
  if (!t3) return 0;
  e12 && e12.length || (e12 = Ah(0, 0));
  for (let r3 = 0; r3 < e12.length; r3++) i4 = e12.start(r3), s6 = e12.end(r3), s6 > t3 && (s6 = t3), n6 += s6 - i4;
  return n6 / t3;
}
function Uh(e12) {
  if (e12 instanceof Uh) return e12;
  "number" == typeof e12 ? this.code = e12 : "string" == typeof e12 ? this.message = e12 : wo(e12) && ("number" == typeof e12.code && (this.code = e12.code), Object.assign(this, e12)), this.message || (this.message = Uh.defaultMessages[this.code] || "");
}
function Bh(e12) {
  return null != e12 && "function" == typeof e12.then;
}
function Fh(e12) {
  Bh(e12) && e12.then(null, (e13) => {
  });
}
Uh.prototype.code = 0, Uh.prototype.message = "", Uh.prototype.status = null, Uh.prototype.metadata = null, Uh.errorTypes = ["MEDIA_ERR_CUSTOM", "MEDIA_ERR_ABORTED", "MEDIA_ERR_NETWORK", "MEDIA_ERR_DECODE", "MEDIA_ERR_SRC_NOT_SUPPORTED", "MEDIA_ERR_ENCRYPTED"], Uh.defaultMessages = {
  1: "You aborted the media playback",
  2: "A network error caused the media download to fail part-way.",
  3: "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
  4: "The media could not be loaded, either because the server or network failed or because the format is not supported.",
  5: "The media is encrypted and we do not have the keys to decrypt it."
}, Uh.MEDIA_ERR_CUSTOM = 0, Uh.prototype.MEDIA_ERR_CUSTOM = 0, Uh.MEDIA_ERR_ABORTED = 1, Uh.prototype.MEDIA_ERR_ABORTED = 1, Uh.MEDIA_ERR_NETWORK = 2, Uh.prototype.MEDIA_ERR_NETWORK = 2, Uh.MEDIA_ERR_DECODE = 3, Uh.prototype.MEDIA_ERR_DECODE = 3, Uh.MEDIA_ERR_SRC_NOT_SUPPORTED = 4, Uh.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED = 4, Uh.MEDIA_ERR_ENCRYPTED = 5, Uh.prototype.MEDIA_ERR_ENCRYPTED = 5;
var qh = function(e12) {
  return ["kind", "label", "language", "id", "inBandMetadataTrackDispatchType", "mode", "src"].reduce((t3, i4, s6) => (e12[i4] && (t3[i4] = e12[i4]), t3), {
    cues: e12.cues && Array.prototype.map.call(e12.cues, function(e13) {
      return {
        startTime: e13.startTime,
        endTime: e13.endTime,
        text: e13.text,
        id: e13.id
      };
    })
  });
};
var jh = {
  textTracksToJson: function(e12) {
    const t3 = e12.$$("track"), i4 = Array.prototype.map.call(t3, (e13) => e13.track);
    return Array.prototype.map.call(t3, function(e13) {
      const t4 = qh(e13.track);
      return e13.src && (t4.src = e13.src), t4;
    }).concat(Array.prototype.filter.call(e12.textTracks(), function(e13) {
      return -1 === i4.indexOf(e13);
    }).map(qh));
  },
  jsonToTextTracks: function(e12, t3) {
    return e12.forEach(function(e13) {
      const i4 = t3.addRemoteTextTrack(e13).track;
      !e13.src && e13.cues && e13.cues.forEach((e14) => i4.addCue(e14));
    }), t3.textTracks();
  },
  trackToJson_: qh
};
var $h = "vjs-modal-dialog";
var Hh = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.handleKeyDown_ = (e13) => this.handleKeyDown(e13), this.close_ = (e13) => this.close(e13), this.opened_ = this.hasBeenOpened_ = this.hasBeenFilled_ = false, this.closeable(!this.options_.uncloseable), this.content(this.options_.content), this.contentEl_ = rl("div", {
      className: `${$h}-content`
    }, {
      role: "document"
    }), this.descEl_ = rl("p", {
      className: `${$h}-description vjs-control-text`,
      id: this.el().getAttribute("aria-describedby")
    }), al(this.descEl_, this.description()), this.el_.appendChild(this.descEl_), this.el_.appendChild(this.contentEl_);
  }
  createEl() {
    return super.createEl("div", {
      className: this.buildCSSClass(),
      tabIndex: -1
    }, {
      "aria-describedby": `${this.id()}_description`,
      "aria-hidden": "true",
      "aria-label": this.label(),
      role: "dialog",
      "aria-live": "polite"
    });
  }
  dispose() {
    this.contentEl_ = null, this.descEl_ = null, this.previouslyActiveEl_ = null, super.dispose();
  }
  buildCSSClass() {
    return `${$h} vjs-hidden ${super.buildCSSClass()}`;
  }
  label() {
    return this.localize(this.options_.label || "Modal Window");
  }
  description() {
    let e12 = this.options_.description || this.localize("This is a modal window.");
    return this.closeable() && (e12 += " " + this.localize("This modal can be closed by pressing the Escape key or activating the close button.")), e12;
  }
  open() {
    if (this.opened_) return void (this.options_.fillAlways && this.fill());
    const e12 = this.player();
    this.trigger("beforemodalopen"), this.opened_ = true, (this.options_.fillAlways || !this.hasBeenOpened_ && !this.hasBeenFilled_) && this.fill(), this.wasPlaying_ = !e12.paused(), this.options_.pauseOnOpen && this.wasPlaying_ && e12.pause(), this.on("keydown", this.handleKeyDown_), this.hadControls_ = e12.controls(), e12.controls(false), this.show(), this.conditionalFocus_(), this.el().setAttribute("aria-hidden", "false"), this.trigger("modalopen"), this.hasBeenOpened_ = true;
  }
  opened(e12) {
    return "boolean" == typeof e12 && this[e12 ? "open" : "close"](), this.opened_;
  }
  close() {
    if (!this.opened_) return;
    const e12 = this.player();
    this.trigger("beforemodalclose"), this.opened_ = false, this.wasPlaying_ && this.options_.pauseOnOpen && e12.play(), this.off("keydown", this.handleKeyDown_), this.hadControls_ && e12.controls(true), this.hide(), this.el().setAttribute("aria-hidden", "true"), this.trigger("modalclose"), this.conditionalBlur_(), this.options_.temporary && this.dispose();
  }
  closeable(e12) {
    if ("boolean" == typeof e12) {
      const t3 = this.closeable_ = !!e12;
      let i4 = this.getChild("closeButton");
      if (t3 && !i4) {
        const e13 = this.contentEl_;
        this.contentEl_ = this.el_, i4 = this.addChild("closeButton", {
          controlText: "Close Modal Dialog"
        }), this.contentEl_ = e13, this.on(i4, "close", this.close_);
      }
      !t3 && i4 && (this.off(i4, "close", this.close_), this.removeChild(i4), i4.dispose());
    }
    return this.closeable_;
  }
  fill() {
    this.fillWith(this.content());
  }
  fillWith(e12) {
    const t3 = this.contentEl(), i4 = t3.parentNode, s6 = t3.nextSibling;
    this.trigger("beforemodalfill"), this.hasBeenFilled_ = true, i4.removeChild(t3), this.empty(), kl(t3, e12), this.trigger("modalfill"), s6 ? i4.insertBefore(t3, s6) : i4.appendChild(t3);
    const n6 = this.getChild("closeButton");
    n6 && i4.appendChild(n6.el_);
  }
  empty() {
    this.trigger("beforemodalempty"), El(this.contentEl()), this.trigger("modalempty");
  }
  content(e12) {
    return void 0 !== e12 && (this.content_ = e12), this.content_;
  }
  conditionalFocus_() {
    const e12 = ge.activeElement, t3 = this.player_.el_;
    this.previouslyActiveEl_ = null, (t3.contains(e12) || t3 === e12) && (this.previouslyActiveEl_ = e12, this.focus());
  }
  conditionalBlur_() {
    this.previouslyActiveEl_ && (this.previouslyActiveEl_.focus(), this.previouslyActiveEl_ = null);
  }
  handleKeyDown(e12) {
    if (e12.stopPropagation(), ye.isEventKey(e12, "Escape") && this.closeable()) return e12.preventDefault(), void this.close();
    if (!ye.isEventKey(e12, "Tab")) return;
    const t3 = this.focusableEls_(), i4 = this.el_.querySelector(":focus");
    let s6;
    for (let n6 = 0; n6 < t3.length; n6++) if (i4 === t3[n6]) {
      s6 = n6;
      break;
    }
    ge.activeElement === this.el_ && (s6 = 0), e12.shiftKey && 0 === s6 ? (t3[t3.length - 1].focus(), e12.preventDefault()) : e12.shiftKey || s6 !== t3.length - 1 || (t3[0].focus(), e12.preventDefault());
  }
  focusableEls_() {
    const e12 = this.el_.querySelectorAll("*");
    return Array.prototype.filter.call(e12, (e13) => (e13 instanceof g3.HTMLAnchorElement || e13 instanceof g3.HTMLAreaElement) && e13.hasAttribute("href") || (e13 instanceof g3.HTMLInputElement || e13 instanceof g3.HTMLSelectElement || e13 instanceof g3.HTMLTextAreaElement || e13 instanceof g3.HTMLButtonElement) && !e13.hasAttribute("disabled") || e13 instanceof g3.HTMLIFrameElement || e13 instanceof g3.HTMLObjectElement || e13 instanceof g3.HTMLEmbedElement || e13.hasAttribute("tabindex") && -1 !== e13.getAttribute("tabindex") || e13.hasAttribute("contenteditable"));
  }
};
Hh.prototype.options_ = {
  pauseOnOpen: true,
  temporary: true
}, Ch.registerComponent("ModalDialog", Hh);
var Vh = class extends oh {
  constructor(e12 = []) {
    super(), this.tracks_ = [], Object.defineProperty(this, "length", {
      get() {
        return this.tracks_.length;
      }
    });
    for (let t3 = 0; t3 < e12.length; t3++) this.addTrack(e12[t3]);
  }
  addTrack(e12) {
    const t3 = this.tracks_.length;
    "" + t3 in this || Object.defineProperty(this, t3, {
      get() {
        return this.tracks_[t3];
      }
    }), -1 === this.tracks_.indexOf(e12) && (this.tracks_.push(e12), this.trigger({
      track: e12,
      type: "addtrack",
      target: this
    })), e12.labelchange_ = () => {
      this.trigger({
        track: e12,
        type: "labelchange",
        target: this
      });
    }, hh(e12) && e12.addEventListener("labelchange", e12.labelchange_);
  }
  removeTrack(e12) {
    let t3;
    for (let i4 = 0, s6 = this.length; i4 < s6; i4++) if (this[i4] === e12) {
      t3 = this[i4], t3.off && t3.off(), this.tracks_.splice(i4, 1);
      break;
    }
    t3 && this.trigger({
      track: t3,
      type: "removetrack",
      target: this
    });
  }
  getTrackById(e12) {
    let t3 = null;
    for (let i4 = 0, s6 = this.length; i4 < s6; i4++) {
      const s7 = this[i4];
      if (s7.id === e12) {
        t3 = s7;
        break;
      }
    }
    return t3;
  }
};
Vh.prototype.allowedEvents_ = {
  change: "change",
  addtrack: "addtrack",
  removetrack: "removetrack",
  labelchange: "labelchange"
};
for (const p_ in Vh.prototype.allowedEvents_) Vh.prototype["on" + p_] = null;
var zh = function(e12, t3) {
  for (let i4 = 0; i4 < e12.length; i4++) Object.keys(e12[i4]).length && t3.id !== e12[i4].id && (e12[i4].enabled = false);
};
var Wh = class extends Vh {
  constructor(e12 = []) {
    for (let t3 = e12.length - 1; t3 >= 0; t3--) if (e12[t3].enabled) {
      zh(e12, e12[t3]);
      break;
    }
    super(e12), this.changing_ = false;
  }
  addTrack(e12) {
    e12.enabled && zh(this, e12), super.addTrack(e12), e12.addEventListener && (e12.enabledChange_ = () => {
      this.changing_ || (this.changing_ = true, zh(this, e12), this.changing_ = false, this.trigger("change"));
    }, e12.addEventListener("enabledchange", e12.enabledChange_));
  }
  removeTrack(e12) {
    super.removeTrack(e12), e12.removeEventListener && e12.enabledChange_ && (e12.removeEventListener("enabledchange", e12.enabledChange_), e12.enabledChange_ = null);
  }
};
var Gh = function(e12, t3) {
  for (let i4 = 0; i4 < e12.length; i4++) Object.keys(e12[i4]).length && t3.id !== e12[i4].id && (e12[i4].selected = false);
};
var Xh = class extends Vh {
  constructor(e12 = []) {
    for (let t3 = e12.length - 1; t3 >= 0; t3--) if (e12[t3].selected) {
      Gh(e12, e12[t3]);
      break;
    }
    super(e12), this.changing_ = false, Object.defineProperty(this, "selectedIndex", {
      get() {
        for (let e13 = 0; e13 < this.length; e13++) if (this[e13].selected) return e13;
        return -1;
      },
      set() {
      }
    });
  }
  addTrack(e12) {
    e12.selected && Gh(this, e12), super.addTrack(e12), e12.addEventListener && (e12.selectedChange_ = () => {
      this.changing_ || (this.changing_ = true, Gh(this, e12), this.changing_ = false, this.trigger("change"));
    }, e12.addEventListener("selectedchange", e12.selectedChange_));
  }
  removeTrack(e12) {
    super.removeTrack(e12), e12.removeEventListener && e12.selectedChange_ && (e12.removeEventListener("selectedchange", e12.selectedChange_), e12.selectedChange_ = null);
  }
};
var Kh = class extends Vh {
  addTrack(e12) {
    super.addTrack(e12), this.queueChange_ || (this.queueChange_ = () => this.queueTrigger("change")), this.triggerSelectedlanguagechange || (this.triggerSelectedlanguagechange_ = () => this.trigger("selectedlanguagechange")), e12.addEventListener("modechange", this.queueChange_);
    -1 === ["metadata", "chapters"].indexOf(e12.kind) && e12.addEventListener("modechange", this.triggerSelectedlanguagechange_);
  }
  removeTrack(e12) {
    super.removeTrack(e12), e12.removeEventListener && (this.queueChange_ && e12.removeEventListener("modechange", this.queueChange_), this.selectedlanguagechange_ && e12.removeEventListener("modechange", this.triggerSelectedlanguagechange_));
  }
};
var Yh = class {
  constructor(e12 = []) {
    this.trackElements_ = [], Object.defineProperty(this, "length", {
      get() {
        return this.trackElements_.length;
      }
    });
    for (let t3 = 0, i4 = e12.length; t3 < i4; t3++) this.addTrackElement_(e12[t3]);
  }
  addTrackElement_(e12) {
    const t3 = this.trackElements_.length;
    "" + t3 in this || Object.defineProperty(this, t3, {
      get() {
        return this.trackElements_[t3];
      }
    }), -1 === this.trackElements_.indexOf(e12) && this.trackElements_.push(e12);
  }
  getTrackElementByTrack_(e12) {
    let t3;
    for (let i4 = 0, s6 = this.trackElements_.length; i4 < s6; i4++) if (e12 === this.trackElements_[i4].track) {
      t3 = this.trackElements_[i4];
      break;
    }
    return t3;
  }
  removeTrackElement_(e12) {
    for (let t3 = 0, i4 = this.trackElements_.length; t3 < i4; t3++) if (e12 === this.trackElements_[t3]) {
      this.trackElements_[t3].track && "function" == typeof this.trackElements_[t3].track.off && this.trackElements_[t3].track.off(), "function" == typeof this.trackElements_[t3].off && this.trackElements_[t3].off(), this.trackElements_.splice(t3, 1);
      break;
    }
  }
};
var Qh = class _Qh {
  constructor(e12) {
    _Qh.prototype.setCues_.call(this, e12), Object.defineProperty(this, "length", {
      get() {
        return this.length_;
      }
    });
  }
  setCues_(e12) {
    const t3 = this.length || 0;
    let i4 = 0;
    const s6 = e12.length;
    this.cues_ = e12, this.length_ = e12.length;
    const n6 = function(e13) {
      "" + e13 in this || Object.defineProperty(this, "" + e13, {
        get() {
          return this.cues_[e13];
        }
      });
    };
    if (t3 < s6) for (i4 = t3; i4 < s6; i4++) n6.call(this, i4);
  }
  getCueById(e12) {
    let t3 = null;
    for (let i4 = 0, s6 = this.length; i4 < s6; i4++) {
      const s7 = this[i4];
      if (s7.id === e12) {
        t3 = s7;
        break;
      }
    }
    return t3;
  }
};
var Jh = {
  alternative: "alternative",
  captions: "captions",
  main: "main",
  sign: "sign",
  subtitles: "subtitles",
  commentary: "commentary"
};
var Zh = {
  alternative: "alternative",
  descriptions: "descriptions",
  main: "main",
  "main-desc": "main-desc",
  translation: "translation",
  commentary: "commentary"
};
var ed = {
  subtitles: "subtitles",
  captions: "captions",
  descriptions: "descriptions",
  chapters: "chapters",
  metadata: "metadata"
};
var td = {
  disabled: "disabled",
  hidden: "hidden",
  showing: "showing"
};
var id = class extends oh {
  constructor(e12 = {}) {
    super();
    const t3 = {
      id: e12.id || "vjs_track_" + Hl(),
      kind: e12.kind || "",
      language: e12.language || ""
    };
    let i4 = e12.label || "";
    for (const s6 in t3) Object.defineProperty(this, s6, {
      get: () => t3[s6],
      set() {
      }
    });
    Object.defineProperty(this, "label", {
      get: () => i4,
      set(e13) {
        e13 !== i4 && (i4 = e13, this.trigger("labelchange"));
      }
    });
  }
};
var sd = function(e12) {
  const t3 = ["protocol", "hostname", "port", "pathname", "search", "hash", "host"], i4 = ge.createElement("a");
  i4.href = e12;
  const s6 = {};
  for (let n6 = 0; n6 < t3.length; n6++) s6[t3[n6]] = i4[t3[n6]];
  return "http:" === s6.protocol && (s6.host = s6.host.replace(/:80$/, "")), "https:" === s6.protocol && (s6.host = s6.host.replace(/:443$/, "")), s6.protocol || (s6.protocol = g3.location.protocol), s6.host || (s6.host = g3.location.host), s6;
};
var nd = function(e12) {
  if (!e12.match(/^https?:\/\//)) {
    const t3 = ge.createElement("a");
    t3.href = e12, e12 = t3.href;
  }
  return e12;
};
var rd = function(e12) {
  if ("string" == typeof e12) {
    const t3 = /^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e12);
    if (t3) return t3.pop().toLowerCase();
  }
  return "";
};
var ad = function(e12, t3 = g3.location) {
  const i4 = sd(e12);
  return (":" === i4.protocol ? t3.protocol : i4.protocol) + i4.host !== t3.protocol + t3.host;
};
var od = Object.freeze({
  __proto__: null,
  parseUrl: sd,
  getAbsoluteURL: nd,
  getFileExtension: rd,
  isCrossOrigin: ad
});
var ld = function(e12, t3) {
  const i4 = new g3.WebVTT.Parser(g3, g3.vttjs, g3.WebVTT.StringDecoder()), s6 = [];
  i4.oncue = function(e13) {
    t3.addCue(e13);
  }, i4.onparsingerror = function(e13) {
    s6.push(e13);
  }, i4.onflush = function() {
    t3.trigger({
      type: "loadeddata",
      target: t3
    });
  }, i4.parse(e12), s6.length > 0 && (g3.console && g3.console.groupCollapsed && g3.console.groupCollapsed(`Text Track parsing errors for ${t3.src}`), s6.forEach((e13) => _o.error(e13)), g3.console && g3.console.groupEnd && g3.console.groupEnd()), i4.flush();
};
var hd = function(e12, t3) {
  const i4 = {
    uri: e12
  }, s6 = ad(e12);
  s6 && (i4.cors = s6);
  const n6 = "use-credentials" === t3.tech_.crossOrigin();
  n6 && (i4.withCredentials = n6), qe(i4, ih(this, function(e13, i5, s7) {
    if (e13) return _o.error(e13, i5);
    t3.loaded_ = true, "function" != typeof g3.WebVTT ? t3.tech_ && t3.tech_.any(["vttjsloaded", "vttjserror"], (e14) => {
      if ("vttjserror" !== e14.type) return ld(s7, t3);
      _o.error(`vttjs failed to load, stopping trying to process ${t3.src}`);
    }) : ld(s7, t3);
  }));
};
var dd = class extends id {
  constructor(e12 = {}) {
    if (!e12.tech) throw new Error("A tech was not provided.");
    const t3 = ko(e12, {
      kind: ed[e12.kind] || "subtitles",
      language: e12.language || e12.srclang || ""
    });
    let i4 = td[t3.mode] || "disabled";
    const s6 = t3.default;
    "metadata" !== t3.kind && "chapters" !== t3.kind || (i4 = "hidden"), super(t3), this.tech_ = t3.tech, this.cues_ = [], this.activeCues_ = [], this.preload_ = false !== this.tech_.preloadTextTracks;
    const n6 = new Qh(this.cues_), r3 = new Qh(this.activeCues_);
    let a6 = false;
    this.timeupdateHandler = ih(this, function(e13 = {}) {
      this.tech_.isDisposed() || (this.tech_.isReady_ ? (this.activeCues = this.activeCues, a6 && (this.trigger("cuechange"), a6 = false), "timeupdate" !== e13.type && (this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler))) : "timeupdate" !== e13.type && (this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));
    });
    const o4 = () => {
      this.stopTracking();
    };
    this.tech_.one("dispose", o4), "disabled" !== i4 && this.startTracking(), Object.defineProperties(this, {
      default: {
        get: () => s6,
        set() {
        }
      },
      mode: {
        get: () => i4,
        set(e13) {
          td[e13] && i4 !== e13 && (i4 = e13, this.preload_ || "disabled" === i4 || 0 !== this.cues.length || hd(this.src, this), this.stopTracking(), "disabled" !== i4 && this.startTracking(), this.trigger("modechange"));
        }
      },
      cues: {
        get() {
          return this.loaded_ ? n6 : null;
        },
        set() {
        }
      },
      activeCues: {
        get() {
          if (!this.loaded_) return null;
          if (0 === this.cues.length) return r3;
          const e13 = this.tech_.currentTime(), t4 = [];
          for (let i5 = 0, s7 = this.cues.length; i5 < s7; i5++) {
            const s8 = this.cues[i5];
            s8.startTime <= e13 && s8.endTime >= e13 && t4.push(s8);
          }
          if (a6 = false, t4.length !== this.activeCues_.length) a6 = true;
          else for (let i5 = 0; i5 < t4.length; i5++) -1 === this.activeCues_.indexOf(t4[i5]) && (a6 = true);
          return this.activeCues_ = t4, r3.setCues_(this.activeCues_), r3;
        },
        set() {
        }
      }
    }), t3.src ? (this.src = t3.src, this.preload_ || (this.loaded_ = true), (this.preload_ || "subtitles" !== t3.kind && "captions" !== t3.kind) && hd(this.src, this)) : this.loaded_ = true;
  }
  startTracking() {
    this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler), this.tech_.on("timeupdate", this.timeupdateHandler);
  }
  stopTracking() {
    this.rvf_ && (this.tech_.cancelVideoFrameCallback(this.rvf_), this.rvf_ = void 0), this.tech_.off("timeupdate", this.timeupdateHandler);
  }
  addCue(e12) {
    let t3 = e12;
    if (!("getCueAsHTML" in t3)) {
      t3 = new g3.vttjs.VTTCue(e12.startTime, e12.endTime, e12.text);
      for (const i5 in e12) i5 in t3 || (t3[i5] = e12[i5]);
      t3.id = e12.id, t3.originalCue_ = e12;
    }
    const i4 = this.tech_.textTracks();
    for (let s6 = 0; s6 < i4.length; s6++) i4[s6] !== this && i4[s6].removeCue(t3);
    this.cues_.push(t3), this.cues.setCues_(this.cues_);
  }
  removeCue(e12) {
    let t3 = this.cues_.length;
    for (; t3--; ) {
      const i4 = this.cues_[t3];
      if (i4 === e12 || i4.originalCue_ && i4.originalCue_ === e12) {
        this.cues_.splice(t3, 1), this.cues.setCues_(this.cues_);
        break;
      }
    }
  }
};
dd.prototype.allowedEvents_ = {
  cuechange: "cuechange"
};
var ud = class extends id {
  constructor(e12 = {}) {
    const t3 = ko(e12, {
      kind: Zh[e12.kind] || ""
    });
    super(t3);
    let i4 = false;
    Object.defineProperty(this, "enabled", {
      get: () => i4,
      set(e13) {
        "boolean" == typeof e13 && e13 !== i4 && (i4 = e13, this.trigger("enabledchange"));
      }
    }), t3.enabled && (this.enabled = t3.enabled), this.loaded_ = true;
  }
};
var cd = class extends id {
  constructor(e12 = {}) {
    const t3 = ko(e12, {
      kind: Jh[e12.kind] || ""
    });
    super(t3);
    let i4 = false;
    Object.defineProperty(this, "selected", {
      get: () => i4,
      set(e13) {
        "boolean" == typeof e13 && e13 !== i4 && (i4 = e13, this.trigger("selectedchange"));
      }
    }), t3.selected && (this.selected = t3.selected);
  }
};
var pd = class _pd extends oh {
  constructor(e12 = {}) {
    let t3;
    super();
    const i4 = new dd(e12);
    this.kind = i4.kind, this.src = i4.src, this.srclang = i4.language, this.label = i4.label, this.default = i4.default, Object.defineProperties(this, {
      readyState: {
        get: () => t3
      },
      track: {
        get: () => i4
      }
    }), t3 = _pd.NONE, i4.addEventListener("loadeddata", () => {
      t3 = _pd.LOADED, this.trigger({
        type: "load",
        target: this
      });
    });
  }
};
pd.prototype.allowedEvents_ = {
  load: "load"
}, pd.NONE = 0, pd.LOADING = 1, pd.LOADED = 2, pd.ERROR = 3;
var md = {
  audio: {
    ListClass: Wh,
    TrackClass: ud,
    capitalName: "Audio"
  },
  video: {
    ListClass: Xh,
    TrackClass: cd,
    capitalName: "Video"
  },
  text: {
    ListClass: Kh,
    TrackClass: dd,
    capitalName: "Text"
  }
};
Object.keys(md).forEach(function(e12) {
  md[e12].getterName = `${e12}Tracks`, md[e12].privateName = `${e12}Tracks_`;
});
var gd = {
  remoteText: {
    ListClass: Kh,
    TrackClass: dd,
    capitalName: "RemoteText",
    getterName: "remoteTextTracks",
    privateName: "remoteTextTracks_"
  },
  remoteTextEl: {
    ListClass: Yh,
    TrackClass: pd,
    capitalName: "RemoteTextTrackEls",
    getterName: "remoteTextTrackEls",
    privateName: "remoteTextTrackEls_"
  }
};
var fd = Object.assign({}, md, gd);
function yd(e12, t3, i4, s6, n6 = {}) {
  const r3 = e12.textTracks();
  n6.kind = t3, i4 && (n6.label = i4), s6 && (n6.language = s6), n6.tech = e12;
  const a6 = new fd.text.TrackClass(n6);
  return r3.addTrack(a6), a6;
}
gd.names = Object.keys(gd), md.names = Object.keys(md), fd.names = [].concat(gd.names).concat(md.names);
var _d = class __d extends Ch {
  constructor(e12 = {}, t3 = function() {
  }) {
    e12.reportTouchActivity = false, super(null, e12, t3), this.onDurationChange_ = (e13) => this.onDurationChange(e13), this.trackProgress_ = (e13) => this.trackProgress(e13), this.trackCurrentTime_ = (e13) => this.trackCurrentTime(e13), this.stopTrackingCurrentTime_ = (e13) => this.stopTrackingCurrentTime(e13), this.disposeSourceHandler_ = (e13) => this.disposeSourceHandler(e13), this.queuedHanders_ = /* @__PURE__ */ new Set(), this.hasStarted_ = false, this.on("playing", function() {
      this.hasStarted_ = true;
    }), this.on("loadstart", function() {
      this.hasStarted_ = false;
    }), fd.names.forEach((t4) => {
      const i4 = fd[t4];
      e12 && e12[i4.getterName] && (this[i4.privateName] = e12[i4.getterName]);
    }), this.featuresProgressEvents || this.manualProgressOn(), this.featuresTimeupdateEvents || this.manualTimeUpdatesOn(), ["Text", "Audio", "Video"].forEach((t4) => {
      false === e12[`native${t4}Tracks`] && (this[`featuresNative${t4}Tracks`] = false);
    }), false === e12.nativeCaptions || false === e12.nativeTextTracks ? this.featuresNativeTextTracks = false : true !== e12.nativeCaptions && true !== e12.nativeTextTracks || (this.featuresNativeTextTracks = true), this.featuresNativeTextTracks || this.emulateTextTracks(), this.preloadTextTracks = false !== e12.preloadTextTracks, this.autoRemoteTextTracks_ = new fd.text.ListClass(), this.initTrackListeners(), e12.nativeControlsForTouch || this.emitTapEvents(), this.constructor && (this.name_ = this.constructor.name || "Unknown Tech");
  }
  triggerSourceset(e12) {
    this.isReady_ || this.one("ready", () => this.setTimeout(() => this.triggerSourceset(e12), 1)), this.trigger({
      src: e12,
      type: "sourceset"
    });
  }
  manualProgressOn() {
    this.on("durationchange", this.onDurationChange_), this.manualProgress = true, this.one("ready", this.trackProgress_);
  }
  manualProgressOff() {
    this.manualProgress = false, this.stopTrackingProgress(), this.off("durationchange", this.onDurationChange_);
  }
  trackProgress(e12) {
    this.stopTrackingProgress(), this.progressInterval = this.setInterval(ih(this, function() {
      const e13 = this.bufferedPercent();
      this.bufferedPercent_ !== e13 && this.trigger("progress"), this.bufferedPercent_ = e13, 1 === e13 && this.stopTrackingProgress();
    }), 500);
  }
  onDurationChange(e12) {
    this.duration_ = this.duration();
  }
  buffered() {
    return Ah(0, 0);
  }
  bufferedPercent() {
    return Mh(this.buffered(), this.duration_);
  }
  stopTrackingProgress() {
    this.clearInterval(this.progressInterval);
  }
  manualTimeUpdatesOn() {
    this.manualTimeUpdates = true, this.on("play", this.trackCurrentTime_), this.on("pause", this.stopTrackingCurrentTime_);
  }
  manualTimeUpdatesOff() {
    this.manualTimeUpdates = false, this.stopTrackingCurrentTime(), this.off("play", this.trackCurrentTime_), this.off("pause", this.stopTrackingCurrentTime_);
  }
  trackCurrentTime() {
    this.currentTimeInterval && this.stopTrackingCurrentTime(), this.currentTimeInterval = this.setInterval(function() {
      this.trigger({
        type: "timeupdate",
        target: this,
        manuallyTriggered: true
      });
    }, 250);
  }
  stopTrackingCurrentTime() {
    this.clearInterval(this.currentTimeInterval), this.trigger({
      type: "timeupdate",
      target: this,
      manuallyTriggered: true
    });
  }
  dispose() {
    this.clearTracks(md.names), this.manualProgress && this.manualProgressOff(), this.manualTimeUpdates && this.manualTimeUpdatesOff(), super.dispose();
  }
  clearTracks(e12) {
    (e12 = [].concat(e12)).forEach((e13) => {
      const t3 = this[`${e13}Tracks`]() || [];
      let i4 = t3.length;
      for (; i4--; ) {
        const s6 = t3[i4];
        "text" === e13 && this.removeRemoteTextTrack(s6), t3.removeTrack(s6);
      }
    });
  }
  cleanupAutoTextTracks() {
    const e12 = this.autoRemoteTextTracks_ || [];
    let t3 = e12.length;
    for (; t3--; ) {
      const i4 = e12[t3];
      this.removeRemoteTextTrack(i4);
    }
  }
  reset() {
  }
  crossOrigin() {
  }
  setCrossOrigin() {
  }
  error(e12) {
    return void 0 !== e12 && (this.error_ = new Uh(e12), this.trigger("error")), this.error_;
  }
  played() {
    return this.hasStarted_ ? Ah(0, 0) : Ah();
  }
  play() {
  }
  setScrubbing(e12) {
  }
  scrubbing() {
  }
  setCurrentTime(e12) {
    this.manualTimeUpdates && this.trigger({
      type: "timeupdate",
      target: this,
      manuallyTriggered: true
    });
  }
  initTrackListeners() {
    md.names.forEach((e12) => {
      const t3 = md[e12], i4 = () => {
        this.trigger(`${e12}trackchange`);
      }, s6 = this[t3.getterName]();
      s6.addEventListener("removetrack", i4), s6.addEventListener("addtrack", i4), this.on("dispose", () => {
        s6.removeEventListener("removetrack", i4), s6.removeEventListener("addtrack", i4);
      });
    });
  }
  addWebVttScript_() {
    if (!g3.WebVTT) if (ge.body.contains(this.el())) {
      if (!this.options_["vtt.js"] && Co(Lt) && Object.keys(Lt).length > 0) return void this.trigger("vttjsloaded");
      const e12 = ge.createElement("script");
      e12.src = this.options_["vtt.js"] || "https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js", e12.onload = () => {
        this.trigger("vttjsloaded");
      }, e12.onerror = () => {
        this.trigger("vttjserror");
      }, this.on("dispose", () => {
        e12.onload = null, e12.onerror = null;
      }), g3.WebVTT = true, this.el().parentNode.appendChild(e12);
    } else this.ready(this.addWebVttScript_);
  }
  emulateTextTracks() {
    const e12 = this.textTracks(), t3 = this.remoteTextTracks(), i4 = (t4) => e12.addTrack(t4.track), s6 = (t4) => e12.removeTrack(t4.track);
    t3.on("addtrack", i4), t3.on("removetrack", s6), this.addWebVttScript_();
    const n6 = () => this.trigger("texttrackchange"), r3 = () => {
      n6();
      for (let t4 = 0; t4 < e12.length; t4++) {
        const i5 = e12[t4];
        i5.removeEventListener("cuechange", n6), "showing" === i5.mode && i5.addEventListener("cuechange", n6);
      }
    };
    r3(), e12.addEventListener("change", r3), e12.addEventListener("addtrack", r3), e12.addEventListener("removetrack", r3), this.on("dispose", function() {
      t3.off("addtrack", i4), t3.off("removetrack", s6), e12.removeEventListener("change", r3), e12.removeEventListener("addtrack", r3), e12.removeEventListener("removetrack", r3);
      for (let t4 = 0; t4 < e12.length; t4++) {
        e12[t4].removeEventListener("cuechange", n6);
      }
    });
  }
  addTextTrack(e12, t3, i4) {
    if (!e12) throw new Error("TextTrack kind is required but was not provided");
    return yd(this, e12, t3, i4);
  }
  createRemoteTextTrack(e12) {
    const t3 = ko(e12, {
      tech: this
    });
    return new gd.remoteTextEl.TrackClass(t3);
  }
  addRemoteTextTrack(e12 = {}, t3) {
    const i4 = this.createRemoteTextTrack(e12);
    return "boolean" != typeof t3 && (t3 = false), this.remoteTextTrackEls().addTrackElement_(i4), this.remoteTextTracks().addTrack(i4.track), false === t3 && this.ready(() => this.autoRemoteTextTracks_.addTrack(i4.track)), i4;
  }
  removeRemoteTextTrack(e12) {
    const t3 = this.remoteTextTrackEls().getTrackElementByTrack_(e12);
    this.remoteTextTrackEls().removeTrackElement_(t3), this.remoteTextTracks().removeTrack(e12), this.autoRemoteTextTracks_.removeTrack(e12);
  }
  getVideoPlaybackQuality() {
    return {};
  }
  requestPictureInPicture() {
    return Promise.reject();
  }
  disablePictureInPicture() {
    return true;
  }
  setDisablePictureInPicture() {
  }
  requestVideoFrameCallback(e12) {
    const t3 = Hl();
    return !this.isReady_ || this.paused() ? (this.queuedHanders_.add(t3), this.one("playing", () => {
      this.queuedHanders_.has(t3) && (this.queuedHanders_.delete(t3), e12());
    })) : this.requestNamedAnimationFrame(t3, e12), t3;
  }
  cancelVideoFrameCallback(e12) {
    this.queuedHanders_.has(e12) ? this.queuedHanders_.delete(e12) : this.cancelNamedAnimationFrame(e12);
  }
  setPoster() {
  }
  playsinline() {
  }
  setPlaysinline() {
  }
  overrideNativeAudioTracks(e12) {
  }
  overrideNativeVideoTracks(e12) {
  }
  canPlayType(e12) {
    return "";
  }
  static canPlayType(e12) {
    return "";
  }
  static canPlaySource(e12, t3) {
    return __d.canPlayType(e12.type);
  }
  static isTech(e12) {
    return e12.prototype instanceof __d || e12 instanceof __d || e12 === __d;
  }
  static registerTech(e12, t3) {
    if (__d.techs_ || (__d.techs_ = {}), !__d.isTech(t3)) throw new Error(`Tech ${e12} must be a Tech`);
    if (!__d.canPlayType) throw new Error("Techs must have a static canPlayType method on them");
    if (!__d.canPlaySource) throw new Error("Techs must have a static canPlaySource method on them");
    return e12 = Sh(e12), __d.techs_[e12] = t3, __d.techs_[Th(e12)] = t3, "Tech" !== e12 && __d.defaultTechOrder_.push(e12), t3;
  }
  static getTech(e12) {
    if (e12) return __d.techs_ && __d.techs_[e12] ? __d.techs_[e12] : (e12 = Sh(e12), g3 && g3.videojs && g3.videojs[e12] ? (_o.warn(`The ${e12} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`), g3.videojs[e12]) : void 0);
  }
};
fd.names.forEach(function(e12) {
  const t3 = fd[e12];
  _d.prototype[t3.getterName] = function() {
    return this[t3.privateName] = this[t3.privateName] || new t3.ListClass(), this[t3.privateName];
  };
}), _d.prototype.featuresVolumeControl = true, _d.prototype.featuresMuteControl = true, _d.prototype.featuresFullscreenResize = false, _d.prototype.featuresPlaybackRate = false, _d.prototype.featuresProgressEvents = false, _d.prototype.featuresSourceset = false, _d.prototype.featuresTimeupdateEvents = false, _d.prototype.featuresNativeTextTracks = false, _d.prototype.featuresVideoFrameCallback = false, _d.withSourceHandlers = function(e12) {
  e12.registerSourceHandler = function(t3, i4) {
    let s6 = e12.sourceHandlers;
    s6 || (s6 = e12.sourceHandlers = []), void 0 === i4 && (i4 = s6.length), s6.splice(i4, 0, t3);
  }, e12.canPlayType = function(t3) {
    const i4 = e12.sourceHandlers || [];
    let s6;
    for (let e13 = 0; e13 < i4.length; e13++) if (s6 = i4[e13].canPlayType(t3), s6) return s6;
    return "";
  }, e12.selectSourceHandler = function(t3, i4) {
    const s6 = e12.sourceHandlers || [];
    let n6;
    for (let e13 = 0; e13 < s6.length; e13++) if (n6 = s6[e13].canHandleSource(t3, i4), n6) return s6[e13];
    return null;
  }, e12.canPlaySource = function(t3, i4) {
    const s6 = e12.selectSourceHandler(t3, i4);
    return s6 ? s6.canHandleSource(t3, i4) : "";
  };
  ["seekable", "seeking", "duration"].forEach(function(e13) {
    const t3 = this[e13];
    "function" == typeof t3 && (this[e13] = function() {
      return this.sourceHandler_ && this.sourceHandler_[e13] ? this.sourceHandler_[e13].apply(this.sourceHandler_, arguments) : t3.apply(this, arguments);
    });
  }, e12.prototype), e12.prototype.setSource = function(t3) {
    let i4 = e12.selectSourceHandler(t3, this.options_);
    i4 || (e12.nativeSourceHandler ? i4 = e12.nativeSourceHandler : _o.error("No source handler found for the current source.")), this.disposeSourceHandler(), this.off("dispose", this.disposeSourceHandler_), i4 !== e12.nativeSourceHandler && (this.currentSource_ = t3), this.sourceHandler_ = i4.handleSource(t3, this, this.options_), this.one("dispose", this.disposeSourceHandler_);
  }, e12.prototype.disposeSourceHandler = function() {
    this.currentSource_ && (this.clearTracks(["audio", "video"]), this.currentSource_ = null), this.cleanupAutoTextTracks(), this.sourceHandler_ && (this.sourceHandler_.dispose && this.sourceHandler_.dispose(), this.sourceHandler_ = null);
  };
}, Ch.registerComponent("Tech", _d), _d.registerTech("Tech", _d), _d.defaultTechOrder_ = [];
var vd = {};
var bd = {};
var Td = {};
function Sd(e12, t3) {
  vd[e12] = vd[e12] || [], vd[e12].push(t3);
}
function Ed(e12, t3, i4) {
  e12.setTimeout(() => Rd(t3, vd[t3.type], i4, e12), 1);
}
function wd(e12, t3) {
  e12.forEach((e13) => e13.setTech && e13.setTech(t3));
}
function Cd(e12, t3, i4) {
  return e12.reduceRight(Pd(i4), t3[i4]());
}
function kd(e12, t3, i4, s6) {
  return t3[i4](e12.reduce(Pd(i4), s6));
}
function xd(e12, t3, i4, s6 = null) {
  const n6 = "call" + Sh(i4), r3 = e12.reduce(Pd(n6), s6), a6 = r3 === Td, o4 = a6 ? null : t3[i4](r3);
  return Ld(e12, i4, o4, a6), o4;
}
var Id = {
  buffered: 1,
  currentTime: 1,
  duration: 1,
  muted: 1,
  played: 1,
  paused: 1,
  seekable: 1,
  volume: 1,
  ended: 1
};
var Ad = {
  setCurrentTime: 1,
  setMuted: 1,
  setVolume: 1
};
var Dd = {
  play: 1,
  pause: 1
};
function Pd(e12) {
  return (t3, i4) => t3 === Td ? Td : i4[e12] ? i4[e12](t3) : t3;
}
function Ld(e12, t3, i4, s6) {
  for (let n6 = e12.length - 1; n6 >= 0; n6--) {
    const r3 = e12[n6];
    r3[t3] && r3[t3](s6, i4);
  }
}
function Od(e12) {
  bd[e12.id()] = null;
}
function Nd(e12, t3) {
  const i4 = bd[e12.id()];
  let s6 = null;
  if (null == i4) return s6 = t3(e12), bd[e12.id()] = [[t3, s6]], s6;
  for (let n6 = 0; n6 < i4.length; n6++) {
    const [e13, r3] = i4[n6];
    e13 === t3 && (s6 = r3);
  }
  return null === s6 && (s6 = t3(e12), i4.push([t3, s6])), s6;
}
function Rd(e12 = {}, t3 = [], i4, s6, n6 = [], r3 = false) {
  const [a6, ...o4] = t3;
  if ("string" == typeof a6) Rd(e12, vd[a6], i4, s6, n6, r3);
  else if (a6) {
    const t4 = Nd(s6, a6);
    if (!t4.setSource) return n6.push(t4), Rd(e12, o4, i4, s6, n6, r3);
    t4.setSource(Object.assign({}, e12), function(a7, l5) {
      if (a7) return Rd(e12, o4, i4, s6, n6, r3);
      n6.push(t4), Rd(l5, e12.type === l5.type ? o4 : vd[l5.type], i4, s6, n6, r3);
    });
  } else o4.length ? Rd(e12, o4, i4, s6, n6, r3) : r3 ? i4(e12, n6) : Rd(e12, vd["*"], i4, s6, n6, true);
}
var Md = {
  opus: "video/ogg",
  ogv: "video/ogg",
  mp4: "video/mp4",
  mov: "video/mp4",
  m4v: "video/mp4",
  mkv: "video/x-matroska",
  m4a: "audio/mp4",
  mp3: "audio/mpeg",
  aac: "audio/aac",
  caf: "audio/x-caf",
  flac: "audio/flac",
  oga: "audio/ogg",
  wav: "audio/wav",
  m3u8: "application/x-mpegURL",
  mpd: "application/dash+xml",
  jpg: "image/jpeg",
  jpeg: "image/jpeg",
  gif: "image/gif",
  png: "image/png",
  svg: "image/svg+xml",
  webp: "image/webp"
};
var Ud = function(e12 = "") {
  const t3 = rd(e12);
  return Md[t3.toLowerCase()] || "";
};
var Bd = (e12, t3) => {
  if (!t3) return "";
  if (e12.cache_.source.src === t3 && e12.cache_.source.type) return e12.cache_.source.type;
  const i4 = e12.cache_.sources.filter((e13) => e13.src === t3);
  if (i4.length) return i4[0].type;
  const s6 = e12.$$("source");
  for (let n6 = 0; n6 < s6.length; n6++) {
    const e13 = s6[n6];
    if (e13.type && e13.src && e13.src === t3) return e13.type;
  }
  return Ud(t3);
};
var Fd = function(e12) {
  if (Array.isArray(e12)) {
    let t3 = [];
    e12.forEach(function(e13) {
      e13 = Fd(e13), Array.isArray(e13) ? t3 = t3.concat(e13) : wo(e13) && t3.push(e13);
    }), e12 = t3;
  } else e12 = "string" == typeof e12 && e12.trim() ? [qd({
    src: e12
  })] : wo(e12) && "string" == typeof e12.src && e12.src && e12.src.trim() ? [qd(e12)] : [];
  return e12;
};
function qd(e12) {
  if (!e12.type) {
    const t3 = Ud(e12.src);
    t3 && (e12.type = t3);
  }
  return e12;
}
var jd = '<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-twitter">\n      <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>';
var $d = class extends Ch {
  constructor(e12, t3, i4) {
    if (super(e12, ko({
      createEl: false
    }, t3), i4), t3.playerOptions.sources && 0 !== t3.playerOptions.sources.length) e12.src(t3.playerOptions.sources);
    else for (let s6 = 0, n6 = t3.playerOptions.techOrder; s6 < n6.length; s6++) {
      const t4 = Sh(n6[s6]);
      let i5 = _d.getTech(t4);
      if (t4 || (i5 = Ch.getComponent(t4)), i5 && i5.isSupported()) {
        e12.loadTech_(t4);
        break;
      }
    }
  }
};
Ch.registerComponent("MediaLoader", $d);
var Hd = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.options_.controlText && this.controlText(this.options_.controlText), this.handleMouseOver_ = (e13) => this.handleMouseOver(e13), this.handleMouseOut_ = (e13) => this.handleMouseOut(e13), this.handleClick_ = (e13) => this.handleClick(e13), this.handleKeyDown_ = (e13) => this.handleKeyDown(e13), this.emitTapEvents(), this.enable();
  }
  createEl(e12 = "div", t3 = {}, i4 = {}) {
    t3 = Object.assign({
      className: this.buildCSSClass(),
      tabIndex: 0
    }, t3), "button" === e12 && _o.error(`Creating a ClickableComponent with an HTML element of ${e12} is not supported; use a Button instead.`), i4 = Object.assign({
      role: "button"
    }, i4), this.tabIndex_ = t3.tabIndex;
    const s6 = rl(e12, t3, i4);
    return this.player_.options_.experimentalSvgIcons || s6.appendChild(rl("span", {
      className: "vjs-icon-placeholder"
    }, {
      "aria-hidden": true
    })), this.createControlTextEl(s6), s6;
  }
  dispose() {
    this.controlTextEl_ = null, super.dispose();
  }
  createControlTextEl(e12) {
    return this.controlTextEl_ = rl("span", {
      className: "vjs-control-text"
    }, {
      "aria-live": "polite"
    }), e12 && e12.appendChild(this.controlTextEl_), this.controlText(this.controlText_, e12), this.controlTextEl_;
  }
  controlText(e12, t3 = this.el()) {
    if (void 0 === e12) return this.controlText_ || "Need Text";
    const i4 = this.localize(e12);
    this.controlText_ = e12, al(this.controlTextEl_, i4), this.nonIconControl || this.player_.options_.noUITitleAttributes || t3.setAttribute("title", i4);
  }
  buildCSSClass() {
    return `vjs-control vjs-button ${super.buildCSSClass()}`;
  }
  enable() {
    this.enabled_ || (this.enabled_ = true, this.removeClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "false"), void 0 !== this.tabIndex_ && this.el_.setAttribute("tabIndex", this.tabIndex_), this.on(["tap", "click"], this.handleClick_), this.on("keydown", this.handleKeyDown_));
  }
  disable() {
    this.enabled_ = false, this.addClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "true"), void 0 !== this.tabIndex_ && this.el_.removeAttribute("tabIndex"), this.off("mouseover", this.handleMouseOver_), this.off("mouseout", this.handleMouseOut_), this.off(["tap", "click"], this.handleClick_), this.off("keydown", this.handleKeyDown_);
  }
  handleLanguagechange() {
    this.controlText(this.controlText_);
  }
  handleClick(e12) {
    this.options_.clickHandler && this.options_.clickHandler.call(this, arguments);
  }
  handleKeyDown(e12) {
    ye.isEventKey(e12, "Space") || ye.isEventKey(e12, "Enter") ? (e12.preventDefault(), e12.stopPropagation(), this.trigger("click")) : super.handleKeyDown(e12);
  }
};
Ch.registerComponent("ClickableComponent", Hd);
var Vd = class extends Hd {
  constructor(e12, t3) {
    super(e12, t3), this.update(), this.update_ = (e13) => this.update(e13), e12.on("posterchange", this.update_);
  }
  dispose() {
    this.player().off("posterchange", this.update_), super.dispose();
  }
  createEl() {
    return rl("div", {
      className: "vjs-poster"
    });
  }
  crossOrigin(e12) {
    if (void 0 === e12) return this.$("img") ? this.$("img").crossOrigin : this.player_.tech_ && this.player_.tech_.isReady_ ? this.player_.crossOrigin() : this.player_.options_.crossOrigin || this.player_.options_.crossorigin || null;
    null === e12 || "anonymous" === e12 || "use-credentials" === e12 ? this.$("img") && (this.$("img").crossOrigin = e12) : this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e12}"`);
  }
  update(e12) {
    const t3 = this.player().poster();
    this.setSrc(t3), t3 ? this.show() : this.hide();
  }
  setSrc(e12) {
    e12 ? (this.$("img") || this.el_.appendChild(rl("picture", {
      className: "vjs-poster",
      tabIndex: -1
    }, {}, rl("img", {
      loading: "lazy",
      crossOrigin: this.crossOrigin()
    }, {
      alt: ""
    }))), this.$("img").src = e12) : this.el_.textContent = "";
  }
  handleClick(e12) {
    this.player_.controls() && (this.player_.tech(true) && this.player_.tech(true).focus(), this.player_.paused() ? Fh(this.player_.play()) : this.player_.pause());
  }
};
Vd.prototype.crossorigin = Vd.prototype.crossOrigin, Ch.registerComponent("PosterImage", Vd);
var zd = "#222";
var Wd = "#ccc";
var Gd = {
  monospace: "monospace",
  sansSerif: "sans-serif",
  serif: "serif",
  monospaceSansSerif: '"Andale Mono", "Lucida Console", monospace',
  monospaceSerif: '"Courier New", monospace',
  proportionalSansSerif: "sans-serif",
  proportionalSerif: "serif",
  casual: '"Comic Sans MS", Impact, fantasy',
  script: '"Monotype Corsiva", cursive',
  smallcaps: '"Andale Mono", "Lucida Console", monospace, sans-serif'
};
function Xd(e12, t3) {
  let i4;
  if (4 === e12.length) i4 = e12[1] + e12[1] + e12[2] + e12[2] + e12[3] + e12[3];
  else {
    if (7 !== e12.length) throw new Error("Invalid color code provided, " + e12 + "; must be formatted as e.g. #f0e or #f604e2.");
    i4 = e12.slice(1);
  }
  return "rgba(" + parseInt(i4.slice(0, 2), 16) + "," + parseInt(i4.slice(2, 4), 16) + "," + parseInt(i4.slice(4, 6), 16) + "," + t3 + ")";
}
function Kd(e12, t3, i4) {
  try {
    e12.style[t3] = i4;
  } catch (l_) {
    return;
  }
}
function Yd(e12) {
  return e12 ? `${e12}px` : "";
}
var Qd = class extends Ch {
  constructor(e12, t3, i4) {
    super(e12, t3, i4);
    const s6 = (e13) => this.updateDisplay(e13), n6 = (e13) => {
      this.updateDisplayOverlay(), this.updateDisplay(e13);
    };
    e12.on("loadstart", (e13) => this.toggleDisplay(e13)), e12.on("texttrackchange", s6), e12.on("loadedmetadata", (e13) => {
      this.updateDisplayOverlay(), this.preselectTrack(e13);
    }), e12.ready(ih(this, function() {
      if (e12.tech_ && e12.tech_.featuresNativeTextTracks) return void this.hide();
      e12.on("fullscreenchange", n6), e12.on("playerresize", n6);
      const t4 = g3.screen.orientation || g3, i5 = g3.screen.orientation ? "change" : "orientationchange";
      t4.addEventListener(i5, n6), e12.on("dispose", () => t4.removeEventListener(i5, n6));
      const s7 = this.options_.playerOptions.tracks || [];
      for (let e13 = 0; e13 < s7.length; e13++) this.player_.addRemoteTextTrack(s7[e13], true);
      this.preselectTrack();
    }));
  }
  preselectTrack() {
    const e12 = {
      captions: 1,
      subtitles: 1
    }, t3 = this.player_.textTracks(), i4 = this.player_.cache_.selectedLanguage;
    let s6, n6, r3;
    for (let a6 = 0; a6 < t3.length; a6++) {
      const o4 = t3[a6];
      i4 && i4.enabled && i4.language && i4.language === o4.language && o4.kind in e12 ? o4.kind === i4.kind ? r3 = o4 : r3 || (r3 = o4) : i4 && !i4.enabled ? (r3 = null, s6 = null, n6 = null) : o4.default && ("descriptions" !== o4.kind || s6 ? o4.kind in e12 && !n6 && (n6 = o4) : s6 = o4);
    }
    r3 ? r3.mode = "showing" : n6 ? n6.mode = "showing" : s6 && (s6.mode = "showing");
  }
  toggleDisplay() {
    this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks ? this.hide() : this.show();
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-text-track-display"
    }, {
      translate: "yes",
      "aria-live": "off",
      "aria-atomic": "true"
    });
  }
  clearDisplay() {
    "function" == typeof g3.WebVTT && g3.WebVTT.processCues(g3, [], this.el_);
  }
  updateDisplay() {
    const e12 = this.player_.textTracks(), t3 = this.options_.allowMultipleShowingTracks;
    if (this.clearDisplay(), t3) {
      const t4 = [];
      for (let i5 = 0; i5 < e12.length; ++i5) {
        const s7 = e12[i5];
        "showing" === s7.mode && t4.push(s7);
      }
      return void this.updateForTrack(t4);
    }
    let i4 = null, s6 = null, n6 = e12.length;
    for (; n6--; ) {
      const t4 = e12[n6];
      "showing" === t4.mode && ("descriptions" === t4.kind ? i4 = t4 : s6 = t4);
    }
    s6 ? ("off" !== this.getAttribute("aria-live") && this.setAttribute("aria-live", "off"), this.updateForTrack(s6)) : i4 && ("assertive" !== this.getAttribute("aria-live") && this.setAttribute("aria-live", "assertive"), this.updateForTrack(i4));
  }
  updateDisplayOverlay() {
    if (!this.player_.videoHeight() || !g3.CSS.supports("inset-inline: 10px")) return;
    const e12 = this.player_.currentWidth(), t3 = this.player_.currentHeight(), i4 = e12 / t3, s6 = this.player_.videoWidth() / this.player_.videoHeight();
    let n6 = 0, r3 = 0;
    Math.abs(i4 - s6) > 0.1 && (i4 > s6 ? n6 = Math.round((e12 - t3 * s6) / 2) : r3 = Math.round((t3 - e12 / s6) / 2)), Kd(this.el_, "insetInline", Yd(n6)), Kd(this.el_, "insetBlock", Yd(r3));
  }
  updateDisplayState(e12) {
    const t3 = this.player_.textTrackSettings.getValues(), i4 = e12.activeCues;
    let s6 = i4.length;
    for (; s6--; ) {
      const e13 = i4[s6];
      if (!e13) continue;
      const n6 = e13.displayState;
      if (t3.color && (n6.firstChild.style.color = t3.color), t3.textOpacity && Kd(n6.firstChild, "color", Xd(t3.color || "#fff", t3.textOpacity)), t3.backgroundColor && (n6.firstChild.style.backgroundColor = t3.backgroundColor), t3.backgroundOpacity && Kd(n6.firstChild, "backgroundColor", Xd(t3.backgroundColor || "#000", t3.backgroundOpacity)), t3.windowColor && (t3.windowOpacity ? Kd(n6, "backgroundColor", Xd(t3.windowColor, t3.windowOpacity)) : n6.style.backgroundColor = t3.windowColor), t3.edgeStyle && ("dropshadow" === t3.edgeStyle ? n6.firstChild.style.textShadow = `2px 2px 3px ${zd}, 2px 2px 4px ${zd}, 2px 2px 5px ${zd}` : "raised" === t3.edgeStyle ? n6.firstChild.style.textShadow = `1px 1px ${zd}, 2px 2px ${zd}, 3px 3px ${zd}` : "depressed" === t3.edgeStyle ? n6.firstChild.style.textShadow = `1px 1px ${Wd}, 0 1px ${Wd}, -1px -1px ${zd}, 0 -1px ${zd}` : "uniform" === t3.edgeStyle && (n6.firstChild.style.textShadow = `0 0 4px ${zd}, 0 0 4px ${zd}, 0 0 4px ${zd}, 0 0 4px ${zd}`)), t3.fontPercent && 1 !== t3.fontPercent) {
        const e14 = g3.parseFloat(n6.style.fontSize);
        n6.style.fontSize = e14 * t3.fontPercent + "px", n6.style.height = "auto", n6.style.top = "auto";
      }
      t3.fontFamily && "default" !== t3.fontFamily && ("small-caps" === t3.fontFamily ? n6.firstChild.style.fontVariant = "small-caps" : n6.firstChild.style.fontFamily = Gd[t3.fontFamily]);
    }
  }
  updateForTrack(e12) {
    if (Array.isArray(e12) || (e12 = [e12]), "function" != typeof g3.WebVTT || e12.every((e13) => !e13.activeCues)) return;
    const t3 = [];
    for (let i4 = 0; i4 < e12.length; ++i4) {
      const s6 = e12[i4];
      for (let e13 = 0; e13 < s6.activeCues.length; ++e13) t3.push(s6.activeCues[e13]);
    }
    g3.WebVTT.processCues(g3, t3, this.el_);
    for (let i4 = 0; i4 < e12.length; ++i4) {
      const t4 = e12[i4];
      for (let e13 = 0; e13 < t4.activeCues.length; ++e13) {
        const s6 = t4.activeCues[e13].displayState;
        hl(s6, "vjs-text-track-cue", "vjs-text-track-cue-" + (t4.language ? t4.language : i4)), t4.language && gl(s6, "lang", t4.language);
      }
      this.player_.textTrackSettings && this.updateDisplayState(t4);
    }
  }
};
Ch.registerComponent("TextTrackDisplay", Qd);
var Jd = class extends Ch {
  createEl() {
    const e12 = this.player_.isAudio(), t3 = this.localize(e12 ? "Audio Player" : "Video Player"), i4 = rl("span", {
      className: "vjs-control-text",
      textContent: this.localize("{1} is loading.", [t3])
    }), s6 = super.createEl("div", {
      className: "vjs-loading-spinner",
      dir: "ltr"
    });
    return s6.appendChild(i4), s6;
  }
  handleLanguagechange() {
    this.$(".vjs-control-text").textContent = this.localize("{1} is loading.", [this.player_.isAudio() ? "Audio Player" : "Video Player"]);
  }
};
Ch.registerComponent("LoadingSpinner", Jd);
var Zd = class extends Hd {
  createEl(e12, t3 = {}, i4 = {}) {
    const s6 = rl("button", t3 = Object.assign({
      className: this.buildCSSClass()
    }, t3), i4 = Object.assign({
      type: "button"
    }, i4));
    return this.player_.options_.experimentalSvgIcons || s6.appendChild(rl("span", {
      className: "vjs-icon-placeholder"
    }, {
      "aria-hidden": true
    })), this.createControlTextEl(s6), s6;
  }
  addChild(e12, t3 = {}) {
    const i4 = this.constructor.name;
    return _o.warn(`Adding an actionable (user controllable) child to a Button (${i4}) is not supported; use a ClickableComponent instead.`), Ch.prototype.addChild.call(this, e12, t3);
  }
  enable() {
    super.enable(), this.el_.removeAttribute("disabled");
  }
  disable() {
    super.disable(), this.el_.setAttribute("disabled", "disabled");
  }
  handleKeyDown(e12) {
    ye.isEventKey(e12, "Space") || ye.isEventKey(e12, "Enter") ? e12.stopPropagation() : super.handleKeyDown(e12);
  }
};
Ch.registerComponent("Button", Zd);
var eu = class extends Zd {
  constructor(e12, t3) {
    super(e12, t3), this.mouseused_ = false, this.setIcon("play"), this.on("mousedown", (e13) => this.handleMouseDown(e13));
  }
  buildCSSClass() {
    return "vjs-big-play-button";
  }
  handleClick(e12) {
    const t3 = this.player_.play();
    if (this.mouseused_ && "clientX" in e12 && "clientY" in e12) return Fh(t3), void (this.player_.tech(true) && this.player_.tech(true).focus());
    const i4 = this.player_.getChild("controlBar"), s6 = i4 && i4.getChild("playToggle");
    if (!s6) return void this.player_.tech(true).focus();
    const n6 = () => s6.focus();
    Bh(t3) ? t3.then(n6, () => {
    }) : this.setTimeout(n6, 1);
  }
  handleKeyDown(e12) {
    this.mouseused_ = false, super.handleKeyDown(e12);
  }
  handleMouseDown(e12) {
    this.mouseused_ = true;
  }
};
eu.prototype.controlText_ = "Play Video", Ch.registerComponent("BigPlayButton", eu);
var tu = class extends Zd {
  constructor(e12, t3) {
    super(e12, t3), this.setIcon("cancel"), this.controlText(t3 && t3.controlText || this.localize("Close"));
  }
  buildCSSClass() {
    return `vjs-close-button ${super.buildCSSClass()}`;
  }
  handleClick(e12) {
    this.trigger({
      type: "close",
      bubbles: false
    });
  }
  handleKeyDown(e12) {
    ye.isEventKey(e12, "Esc") ? (e12.preventDefault(), e12.stopPropagation(), this.trigger("click")) : super.handleKeyDown(e12);
  }
};
Ch.registerComponent("CloseButton", tu);
var iu = class extends Zd {
  constructor(e12, t3 = {}) {
    super(e12, t3), t3.replay = void 0 === t3.replay || t3.replay, this.setIcon("play"), this.on(e12, "play", (e13) => this.handlePlay(e13)), this.on(e12, "pause", (e13) => this.handlePause(e13)), t3.replay && this.on(e12, "ended", (e13) => this.handleEnded(e13));
  }
  buildCSSClass() {
    return `vjs-play-control ${super.buildCSSClass()}`;
  }
  handleClick(e12) {
    this.player_.paused() ? Fh(this.player_.play()) : this.player_.pause();
  }
  handleSeeked(e12) {
    this.removeClass("vjs-ended"), this.player_.paused() ? this.handlePause(e12) : this.handlePlay(e12);
  }
  handlePlay(e12) {
    this.removeClass("vjs-ended", "vjs-paused"), this.addClass("vjs-playing"), this.setIcon("pause"), this.controlText("Pause");
  }
  handlePause(e12) {
    this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.setIcon("play"), this.controlText("Play");
  }
  handleEnded(e12) {
    this.removeClass("vjs-playing"), this.addClass("vjs-ended"), this.setIcon("replay"), this.controlText("Replay"), this.one(this.player_, "seeked", (e13) => this.handleSeeked(e13));
  }
};
iu.prototype.controlText_ = "Play", Ch.registerComponent("PlayToggle", iu);
var su = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.on(e12, ["timeupdate", "ended", "seeking"], (e13) => this.update(e13)), this.updateTextNode_();
  }
  createEl() {
    const e12 = this.buildCSSClass(), t3 = super.createEl("div", {
      className: `${e12} vjs-time-control vjs-control`
    }), i4 = rl("span", {
      className: "vjs-control-text",
      textContent: `${this.localize(this.labelText_)} `
    }, {
      role: "presentation"
    });
    return t3.appendChild(i4), this.contentEl_ = rl("span", {
      className: `${e12}-display`
    }, {
      role: "presentation"
    }), t3.appendChild(this.contentEl_), t3;
  }
  dispose() {
    this.contentEl_ = null, this.textNode_ = null, super.dispose();
  }
  update(e12) {
    (this.player_.options_.enableSmoothSeeking || "seeking" !== e12.type) && this.updateContent(e12);
  }
  updateTextNode_(e12 = 0) {
    e12 = Nh(e12), this.formattedTime_ !== e12 && (this.formattedTime_ = e12, this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_", () => {
      if (!this.contentEl_) return;
      let e13 = this.textNode_;
      e13 && this.contentEl_.firstChild !== e13 && (e13 = null, _o.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")), this.textNode_ = ge.createTextNode(this.formattedTime_), this.textNode_ && (e13 ? this.contentEl_.replaceChild(this.textNode_, e13) : this.contentEl_.appendChild(this.textNode_));
    }));
  }
  updateContent(e12) {
  }
};
su.prototype.labelText_ = "Time", su.prototype.controlText_ = "Time", Ch.registerComponent("TimeDisplay", su);
var nu = class extends su {
  buildCSSClass() {
    return "vjs-current-time";
  }
  updateContent(e12) {
    let t3;
    t3 = this.player_.ended() ? this.player_.duration() : this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime(), this.updateTextNode_(t3);
  }
};
nu.prototype.labelText_ = "Current Time", nu.prototype.controlText_ = "Current Time", Ch.registerComponent("CurrentTimeDisplay", nu);
var ru = class extends su {
  constructor(e12, t3) {
    super(e12, t3);
    const i4 = (e13) => this.updateContent(e13);
    this.on(e12, "durationchange", i4), this.on(e12, "loadstart", i4), this.on(e12, "loadedmetadata", i4);
  }
  buildCSSClass() {
    return "vjs-duration";
  }
  updateContent(e12) {
    const t3 = this.player_.duration();
    this.updateTextNode_(t3);
  }
};
ru.prototype.labelText_ = "Duration", ru.prototype.controlText_ = "Duration", Ch.registerComponent("DurationDisplay", ru);
var au = class extends Ch {
  createEl() {
    const e12 = super.createEl("div", {
      className: "vjs-time-control vjs-time-divider"
    }, {
      "aria-hidden": true
    }), t3 = super.createEl("div"), i4 = super.createEl("span", {
      textContent: "/"
    });
    return t3.appendChild(i4), e12.appendChild(t3), e12;
  }
};
Ch.registerComponent("TimeDivider", au);
var ou = class extends su {
  constructor(e12, t3) {
    super(e12, t3), this.on(e12, "durationchange", (e13) => this.updateContent(e13));
  }
  buildCSSClass() {
    return "vjs-remaining-time";
  }
  createEl() {
    const e12 = super.createEl();
    return false !== this.options_.displayNegative && e12.insertBefore(rl("span", {}, {
      "aria-hidden": true
    }, "-"), this.contentEl_), e12;
  }
  updateContent(e12) {
    if ("number" != typeof this.player_.duration()) return;
    let t3;
    t3 = this.player_.ended() ? 0 : this.player_.remainingTimeDisplay ? this.player_.remainingTimeDisplay() : this.player_.remainingTime(), this.updateTextNode_(t3);
  }
};
ou.prototype.labelText_ = "Remaining Time", ou.prototype.controlText_ = "Remaining Time", Ch.registerComponent("RemainingTimeDisplay", ou);
var lu = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.updateShowing(), this.on(this.player(), "durationchange", (e13) => this.updateShowing(e13));
  }
  createEl() {
    const e12 = super.createEl("div", {
      className: "vjs-live-control vjs-control"
    });
    return this.contentEl_ = rl("div", {
      className: "vjs-live-display"
    }, {
      "aria-live": "off"
    }), this.contentEl_.appendChild(rl("span", {
      className: "vjs-control-text",
      textContent: `${this.localize("Stream Type")} `
    })), this.contentEl_.appendChild(ge.createTextNode(this.localize("LIVE"))), e12.appendChild(this.contentEl_), e12;
  }
  dispose() {
    this.contentEl_ = null, super.dispose();
  }
  updateShowing(e12) {
    this.player().duration() === 1 / 0 ? this.show() : this.hide();
  }
};
Ch.registerComponent("LiveDisplay", lu);
var hu = class extends Zd {
  constructor(e12, t3) {
    super(e12, t3), this.updateLiveEdgeStatus(), this.player_.liveTracker && (this.updateLiveEdgeStatusHandler_ = (e13) => this.updateLiveEdgeStatus(e13), this.on(this.player_.liveTracker, "liveedgechange", this.updateLiveEdgeStatusHandler_));
  }
  createEl() {
    const e12 = super.createEl("button", {
      className: "vjs-seek-to-live-control vjs-control"
    });
    return this.setIcon("circle", e12), this.textEl_ = rl("span", {
      className: "vjs-seek-to-live-text",
      textContent: this.localize("LIVE")
    }, {
      "aria-hidden": "true"
    }), e12.appendChild(this.textEl_), e12;
  }
  updateLiveEdgeStatus() {
    !this.player_.liveTracker || this.player_.liveTracker.atLiveEdge() ? (this.setAttribute("aria-disabled", true), this.addClass("vjs-at-live-edge"), this.controlText("Seek to live, currently playing live")) : (this.setAttribute("aria-disabled", false), this.removeClass("vjs-at-live-edge"), this.controlText("Seek to live, currently behind live"));
  }
  handleClick() {
    this.player_.liveTracker.seekToLiveEdge();
  }
  dispose() {
    this.player_.liveTracker && this.off(this.player_.liveTracker, "liveedgechange", this.updateLiveEdgeStatusHandler_), this.textEl_ = null, super.dispose();
  }
};
function du(e12, t3, i4) {
  return e12 = Number(e12), Math.min(i4, Math.max(t3, isNaN(e12) ? t3 : e12));
}
hu.prototype.controlText_ = "Seek to live, currently playing live", Ch.registerComponent("SeekToLive", hu);
var uu = Object.freeze({
  __proto__: null,
  clamp: du
});
var cu = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.handleMouseDown_ = (e13) => this.handleMouseDown(e13), this.handleMouseUp_ = (e13) => this.handleMouseUp(e13), this.handleKeyDown_ = (e13) => this.handleKeyDown(e13), this.handleClick_ = (e13) => this.handleClick(e13), this.handleMouseMove_ = (e13) => this.handleMouseMove(e13), this.update_ = (e13) => this.update(e13), this.bar = this.getChild(this.options_.barName), this.vertical(!!this.options_.vertical), this.enable();
  }
  enabled() {
    return this.enabled_;
  }
  enable() {
    this.enabled() || (this.on("mousedown", this.handleMouseDown_), this.on("touchstart", this.handleMouseDown_), this.on("keydown", this.handleKeyDown_), this.on("click", this.handleClick_), this.on(this.player_, "controlsvisible", this.update), this.playerEvent && this.on(this.player_, this.playerEvent, this.update), this.removeClass("disabled"), this.setAttribute("tabindex", 0), this.enabled_ = true);
  }
  disable() {
    if (!this.enabled()) return;
    const e12 = this.bar.el_.ownerDocument;
    this.off("mousedown", this.handleMouseDown_), this.off("touchstart", this.handleMouseDown_), this.off("keydown", this.handleKeyDown_), this.off("click", this.handleClick_), this.off(this.player_, "controlsvisible", this.update_), this.off(e12, "mousemove", this.handleMouseMove_), this.off(e12, "mouseup", this.handleMouseUp_), this.off(e12, "touchmove", this.handleMouseMove_), this.off(e12, "touchend", this.handleMouseUp_), this.removeAttribute("tabindex"), this.addClass("disabled"), this.playerEvent && this.off(this.player_, this.playerEvent, this.update), this.enabled_ = false;
  }
  createEl(e12, t3 = {}, i4 = {}) {
    return t3.className = t3.className + " vjs-slider", t3 = Object.assign({
      tabIndex: 0
    }, t3), i4 = Object.assign({
      role: "slider",
      "aria-valuenow": 0,
      "aria-valuemin": 0,
      "aria-valuemax": 100
    }, i4), super.createEl(e12, t3, i4);
  }
  handleMouseDown(e12) {
    const t3 = this.bar.el_.ownerDocument;
    "mousedown" === e12.type && e12.preventDefault(), "touchstart" !== e12.type || Uo || e12.preventDefault(), yl(), this.addClass("vjs-sliding"), this.trigger("slideractive"), this.on(t3, "mousemove", this.handleMouseMove_), this.on(t3, "mouseup", this.handleMouseUp_), this.on(t3, "touchmove", this.handleMouseMove_), this.on(t3, "touchend", this.handleMouseUp_), this.handleMouseMove(e12, true);
  }
  handleMouseMove(e12) {
  }
  handleMouseUp(e12) {
    const t3 = this.bar.el_.ownerDocument;
    _l(), this.removeClass("vjs-sliding"), this.trigger("sliderinactive"), this.off(t3, "mousemove", this.handleMouseMove_), this.off(t3, "mouseup", this.handleMouseUp_), this.off(t3, "touchmove", this.handleMouseMove_), this.off(t3, "touchend", this.handleMouseUp_), this.update();
  }
  update() {
    if (!this.el_ || !this.bar) return;
    const e12 = this.getProgress();
    return e12 === this.progress_ || (this.progress_ = e12, this.requestNamedAnimationFrame("Slider#update", () => {
      const t3 = this.vertical() ? "height" : "width";
      this.bar.el().style[t3] = (100 * e12).toFixed(2) + "%";
    })), e12;
  }
  getProgress() {
    return Number(du(this.getPercent(), 0, 1).toFixed(4));
  }
  calculateDistance(e12) {
    const t3 = Tl(this.el_, e12);
    return this.vertical() ? t3.y : t3.x;
  }
  handleKeyDown(e12) {
    ye.isEventKey(e12, "Left") || ye.isEventKey(e12, "Down") ? (e12.preventDefault(), e12.stopPropagation(), this.stepBack()) : ye.isEventKey(e12, "Right") || ye.isEventKey(e12, "Up") ? (e12.preventDefault(), e12.stopPropagation(), this.stepForward()) : super.handleKeyDown(e12);
  }
  handleClick(e12) {
    e12.stopPropagation(), e12.preventDefault();
  }
  vertical(e12) {
    if (void 0 === e12) return this.vertical_ || false;
    this.vertical_ = !!e12, this.vertical_ ? this.addClass("vjs-slider-vertical") : this.addClass("vjs-slider-horizontal");
  }
};
Ch.registerComponent("Slider", cu);
var pu = (e12, t3) => du(e12 / t3 * 100, 0, 100).toFixed(2) + "%";
var mu = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.partEls_ = [], this.on(e12, "progress", (e13) => this.update(e13));
  }
  createEl() {
    const e12 = super.createEl("div", {
      className: "vjs-load-progress"
    }), t3 = rl("span", {
      className: "vjs-control-text"
    }), i4 = rl("span", {
      textContent: this.localize("Loaded")
    }), s6 = ge.createTextNode(": ");
    return this.percentageEl_ = rl("span", {
      className: "vjs-control-text-loaded-percentage",
      textContent: "0%"
    }), e12.appendChild(t3), t3.appendChild(i4), t3.appendChild(s6), t3.appendChild(this.percentageEl_), e12;
  }
  dispose() {
    this.partEls_ = null, this.percentageEl_ = null, super.dispose();
  }
  update(e12) {
    this.requestNamedAnimationFrame("LoadProgressBar#update", () => {
      const e13 = this.player_.liveTracker, t3 = this.player_.buffered(), i4 = e13 && e13.isLive() ? e13.seekableEnd() : this.player_.duration(), s6 = this.player_.bufferedEnd(), n6 = this.partEls_, r3 = pu(s6, i4);
      this.percent_ !== r3 && (this.el_.style.width = r3, al(this.percentageEl_, r3), this.percent_ = r3);
      for (let a6 = 0; a6 < t3.length; a6++) {
        const e14 = t3.start(a6), i5 = t3.end(a6);
        let r4 = n6[a6];
        r4 || (r4 = this.el_.appendChild(rl()), n6[a6] = r4), r4.dataset.start === e14 && r4.dataset.end === i5 || (r4.dataset.start = e14, r4.dataset.end = i5, r4.style.left = pu(e14, s6), r4.style.width = pu(i5 - e14, s6));
      }
      for (let a6 = n6.length; a6 > t3.length; a6--) this.el_.removeChild(n6[a6 - 1]);
      n6.length = t3.length;
    });
  }
};
Ch.registerComponent("LoadProgressBar", mu);
var gu = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.update = sh(ih(this, this.update), th);
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-time-tooltip"
    }, {
      "aria-hidden": "true"
    });
  }
  update(e12, t3, i4) {
    const s6 = bl(this.el_), n6 = vl(this.player_.el()), r3 = e12.width * t3;
    if (!n6 || !s6) return;
    let a6 = e12.left - n6.left + r3, o4 = e12.width - r3 + (n6.right - e12.right);
    o4 || (o4 = e12.width - r3, a6 = r3);
    let l5 = s6.width / 2;
    a6 < l5 ? l5 += l5 - a6 : o4 < l5 && (l5 = o4), l5 < 0 ? l5 = 0 : l5 > s6.width && (l5 = s6.width), l5 = Math.round(l5), this.el_.style.right = `-${l5}px`, this.write(i4);
  }
  write(e12) {
    al(this.el_, e12);
  }
  updateTime(e12, t3, i4, s6) {
    this.requestNamedAnimationFrame("TimeTooltip#updateTime", () => {
      let n6;
      const r3 = this.player_.duration();
      if (this.player_.liveTracker && this.player_.liveTracker.isLive()) {
        const e13 = this.player_.liveTracker.liveWindow(), i5 = e13 - t3 * e13;
        n6 = (i5 < 1 ? "" : "-") + Nh(i5, e13);
      } else n6 = Nh(i4, r3);
      this.update(e12, t3, n6), s6 && s6();
    });
  }
};
Ch.registerComponent("TimeTooltip", gu);
var fu = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.setIcon("circle"), this.update = sh(ih(this, this.update), th);
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-play-progress vjs-slider-bar"
    }, {
      "aria-hidden": "true"
    });
  }
  update(e12, t3) {
    const i4 = this.getChild("timeTooltip");
    if (!i4) return;
    const s6 = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();
    i4.updateTime(e12, t3, s6);
  }
};
fu.prototype.options_ = {
  children: []
}, Yo || Oo || fu.prototype.options_.children.push("timeTooltip"), Ch.registerComponent("PlayProgressBar", fu);
var yu = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.update = sh(ih(this, this.update), th);
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-mouse-display"
    });
  }
  update(e12, t3) {
    const i4 = t3 * this.player_.duration();
    this.getChild("timeTooltip").updateTime(e12, t3, i4, () => {
      this.el_.style.left = e12.width * t3 + "px";
    });
  }
};
yu.prototype.options_ = {
  children: ["timeTooltip"]
}, Ch.registerComponent("MouseTimeDisplay", yu);
var _u = 5;
var vu = 12;
var bu = class extends cu {
  constructor(e12, t3) {
    super(e12, t3), this.setEventHandlers_();
  }
  setEventHandlers_() {
    this.update_ = ih(this, this.update), this.update = sh(this.update_, th), this.on(this.player_, ["ended", "durationchange", "timeupdate"], this.update), this.player_.liveTracker && this.on(this.player_.liveTracker, "liveedgechange", this.update), this.updateInterval = null, this.enableIntervalHandler_ = (e12) => this.enableInterval_(e12), this.disableIntervalHandler_ = (e12) => this.disableInterval_(e12), this.on(this.player_, ["playing"], this.enableIntervalHandler_), this.on(this.player_, ["ended", "pause", "waiting"], this.disableIntervalHandler_), "hidden" in ge && "visibilityState" in ge && this.on(ge, "visibilitychange", this.toggleVisibility_);
  }
  toggleVisibility_(e12) {
    "hidden" === ge.visibilityState ? (this.cancelNamedAnimationFrame("SeekBar#update"), this.cancelNamedAnimationFrame("Slider#update"), this.disableInterval_(e12)) : (this.player_.ended() || this.player_.paused() || this.enableInterval_(), this.update());
  }
  enableInterval_() {
    this.updateInterval || (this.updateInterval = this.setInterval(this.update, th));
  }
  disableInterval_(e12) {
    this.player_.liveTracker && this.player_.liveTracker.isLive() && e12 && "ended" !== e12.type || this.updateInterval && (this.clearInterval(this.updateInterval), this.updateInterval = null);
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-progress-holder"
    }, {
      "aria-label": this.localize("Progress Bar")
    });
  }
  update(e12) {
    if ("hidden" === ge.visibilityState) return;
    const t3 = super.update();
    return this.requestNamedAnimationFrame("SeekBar#update", () => {
      const e13 = this.player_.ended() ? this.player_.duration() : this.getCurrentTime_(), i4 = this.player_.liveTracker;
      let s6 = this.player_.duration();
      i4 && i4.isLive() && (s6 = this.player_.liveTracker.liveCurrentTime()), this.percent_ !== t3 && (this.el_.setAttribute("aria-valuenow", (100 * t3).toFixed(2)), this.percent_ = t3), this.currentTime_ === e13 && this.duration_ === s6 || (this.el_.setAttribute("aria-valuetext", this.localize("progress bar timing: currentTime={1} duration={2}", [Nh(e13, s6), Nh(s6, s6)], "{1} of {2}")), this.currentTime_ = e13, this.duration_ = s6), this.bar && this.bar.update(vl(this.el()), this.getProgress());
    }), t3;
  }
  userSeek_(e12) {
    this.player_.liveTracker && this.player_.liveTracker.isLive() && this.player_.liveTracker.nextSeekedFromUser(), this.player_.currentTime(e12);
  }
  getCurrentTime_() {
    return this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();
  }
  getPercent() {
    const e12 = this.getCurrentTime_();
    let t3;
    const i4 = this.player_.liveTracker;
    return i4 && i4.isLive() ? (t3 = (e12 - i4.seekableStart()) / i4.liveWindow(), i4.atLiveEdge() && (t3 = 1)) : t3 = e12 / this.player_.duration(), t3;
  }
  handleMouseDown(e12) {
    xl(e12) && (e12.stopPropagation(), this.videoWasPlaying = !this.player_.paused(), this.player_.pause(), super.handleMouseDown(e12));
  }
  handleMouseMove(e12, t3 = false) {
    if (!xl(e12) || isNaN(this.player_.duration())) return;
    let i4;
    t3 || this.player_.scrubbing() || this.player_.scrubbing(true);
    const s6 = this.calculateDistance(e12), n6 = this.player_.liveTracker;
    if (n6 && n6.isLive()) {
      if (s6 >= 0.99) return void n6.seekToLiveEdge();
      const e13 = n6.seekableStart(), t4 = n6.liveCurrentTime();
      if (i4 = e13 + s6 * n6.liveWindow(), i4 >= t4 && (i4 = t4), i4 <= e13 && (i4 = e13 + 0.1), i4 === 1 / 0) return;
    } else i4 = s6 * this.player_.duration(), i4 === this.player_.duration() && (i4 -= 0.1);
    this.userSeek_(i4), this.player_.options_.enableSmoothSeeking && this.update();
  }
  enable() {
    super.enable();
    const e12 = this.getChild("mouseTimeDisplay");
    e12 && e12.show();
  }
  disable() {
    super.disable();
    const e12 = this.getChild("mouseTimeDisplay");
    e12 && e12.hide();
  }
  handleMouseUp(e12) {
    super.handleMouseUp(e12), e12 && e12.stopPropagation(), this.player_.scrubbing(false), this.player_.trigger({
      type: "timeupdate",
      target: this,
      manuallyTriggered: true
    }), this.videoWasPlaying ? Fh(this.player_.play()) : this.update_();
  }
  stepForward() {
    this.userSeek_(this.player_.currentTime() + _u);
  }
  stepBack() {
    this.userSeek_(this.player_.currentTime() - _u);
  }
  handleAction(e12) {
    this.player_.paused() ? this.player_.play() : this.player_.pause();
  }
  handleKeyDown(e12) {
    const t3 = this.player_.liveTracker;
    if (ye.isEventKey(e12, "Space") || ye.isEventKey(e12, "Enter")) e12.preventDefault(), e12.stopPropagation(), this.handleAction(e12);
    else if (ye.isEventKey(e12, "Home")) e12.preventDefault(), e12.stopPropagation(), this.userSeek_(0);
    else if (ye.isEventKey(e12, "End")) e12.preventDefault(), e12.stopPropagation(), t3 && t3.isLive() ? this.userSeek_(t3.liveCurrentTime()) : this.userSeek_(this.player_.duration());
    else if (/^[0-9]$/.test(ye(e12))) {
      e12.preventDefault(), e12.stopPropagation();
      const i4 = 10 * (ye.codes[ye(e12)] - ye.codes[0]) / 100;
      t3 && t3.isLive() ? this.userSeek_(t3.seekableStart() + t3.liveWindow() * i4) : this.userSeek_(this.player_.duration() * i4);
    } else ye.isEventKey(e12, "PgDn") ? (e12.preventDefault(), e12.stopPropagation(), this.userSeek_(this.player_.currentTime() - _u * vu)) : ye.isEventKey(e12, "PgUp") ? (e12.preventDefault(), e12.stopPropagation(), this.userSeek_(this.player_.currentTime() + _u * vu)) : super.handleKeyDown(e12);
  }
  dispose() {
    this.disableInterval_(), this.off(this.player_, ["ended", "durationchange", "timeupdate"], this.update), this.player_.liveTracker && this.off(this.player_.liveTracker, "liveedgechange", this.update), this.off(this.player_, ["playing"], this.enableIntervalHandler_), this.off(this.player_, ["ended", "pause", "waiting"], this.disableIntervalHandler_), "hidden" in ge && "visibilityState" in ge && this.off(ge, "visibilitychange", this.toggleVisibility_), super.dispose();
  }
};
bu.prototype.options_ = {
  children: ["loadProgressBar", "playProgressBar"],
  barName: "playProgressBar"
}, Yo || Oo || bu.prototype.options_.children.splice(1, 0, "mouseTimeDisplay"), Ch.registerComponent("SeekBar", bu);
var Tu = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.handleMouseMove = sh(ih(this, this.handleMouseMove), th), this.throttledHandleMouseSeek = sh(ih(this, this.handleMouseSeek), th), this.handleMouseUpHandler_ = (e13) => this.handleMouseUp(e13), this.handleMouseDownHandler_ = (e13) => this.handleMouseDown(e13), this.enable();
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-progress-control vjs-control"
    });
  }
  handleMouseMove(e12) {
    const t3 = this.getChild("seekBar");
    if (!t3) return;
    const i4 = t3.getChild("playProgressBar"), s6 = t3.getChild("mouseTimeDisplay");
    if (!i4 && !s6) return;
    const n6 = t3.el(), r3 = bl(n6);
    let a6 = Tl(n6, e12).x;
    a6 = du(a6, 0, 1), s6 && s6.update(r3, a6), i4 && i4.update(r3, t3.getProgress());
  }
  handleMouseSeek(e12) {
    const t3 = this.getChild("seekBar");
    t3 && t3.handleMouseMove(e12);
  }
  enabled() {
    return this.enabled_;
  }
  disable() {
    if (this.children().forEach((e12) => e12.disable && e12.disable()), this.enabled() && (this.off(["mousedown", "touchstart"], this.handleMouseDownHandler_), this.off(this.el_, "mousemove", this.handleMouseMove), this.removeListenersAddedOnMousedownAndTouchstart(), this.addClass("disabled"), this.enabled_ = false, this.player_.scrubbing())) {
      const e12 = this.getChild("seekBar");
      this.player_.scrubbing(false), e12.videoWasPlaying && Fh(this.player_.play());
    }
  }
  enable() {
    this.children().forEach((e12) => e12.enable && e12.enable()), this.enabled() || (this.on(["mousedown", "touchstart"], this.handleMouseDownHandler_), this.on(this.el_, "mousemove", this.handleMouseMove), this.removeClass("disabled"), this.enabled_ = true);
  }
  removeListenersAddedOnMousedownAndTouchstart() {
    const e12 = this.el_.ownerDocument;
    this.off(e12, "mousemove", this.throttledHandleMouseSeek), this.off(e12, "touchmove", this.throttledHandleMouseSeek), this.off(e12, "mouseup", this.handleMouseUpHandler_), this.off(e12, "touchend", this.handleMouseUpHandler_);
  }
  handleMouseDown(e12) {
    const t3 = this.el_.ownerDocument, i4 = this.getChild("seekBar");
    i4 && i4.handleMouseDown(e12), this.on(t3, "mousemove", this.throttledHandleMouseSeek), this.on(t3, "touchmove", this.throttledHandleMouseSeek), this.on(t3, "mouseup", this.handleMouseUpHandler_), this.on(t3, "touchend", this.handleMouseUpHandler_);
  }
  handleMouseUp(e12) {
    const t3 = this.getChild("seekBar");
    t3 && t3.handleMouseUp(e12), this.removeListenersAddedOnMousedownAndTouchstart();
  }
};
Tu.prototype.options_ = {
  children: ["seekBar"]
}, Ch.registerComponent("ProgressControl", Tu);
var Su = class extends Zd {
  constructor(e12, t3) {
    super(e12, t3), this.setIcon("picture-in-picture-enter"), this.on(e12, ["enterpictureinpicture", "leavepictureinpicture"], (e13) => this.handlePictureInPictureChange(e13)), this.on(e12, ["disablepictureinpicturechanged", "loadedmetadata"], (e13) => this.handlePictureInPictureEnabledChange(e13)), this.on(e12, ["loadedmetadata", "audioonlymodechange", "audiopostermodechange"], () => this.handlePictureInPictureAudioModeChange()), this.disable();
  }
  buildCSSClass() {
    return `vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`;
  }
  handlePictureInPictureAudioModeChange() {
    "audio" === this.player_.currentType().substring(0, 5) || this.player_.audioPosterMode() || this.player_.audioOnlyMode() ? (this.player_.isInPictureInPicture() && this.player_.exitPictureInPicture(), this.hide()) : this.show();
  }
  handlePictureInPictureEnabledChange() {
    ge.pictureInPictureEnabled && false === this.player_.disablePictureInPicture() || this.player_.options_.enableDocumentPictureInPicture && "documentPictureInPicture" in g3 ? this.enable() : this.disable();
  }
  handlePictureInPictureChange(e12) {
    this.player_.isInPictureInPicture() ? (this.setIcon("picture-in-picture-exit"), this.controlText("Exit Picture-in-Picture")) : (this.setIcon("picture-in-picture-enter"), this.controlText("Picture-in-Picture")), this.handlePictureInPictureEnabledChange();
  }
  handleClick(e12) {
    this.player_.isInPictureInPicture() ? this.player_.exitPictureInPicture() : this.player_.requestPictureInPicture();
  }
  show() {
    "function" == typeof ge.exitPictureInPicture && super.show();
  }
};
Su.prototype.controlText_ = "Picture-in-Picture", Ch.registerComponent("PictureInPictureToggle", Su);
var Eu = class extends Zd {
  constructor(e12, t3) {
    super(e12, t3), this.setIcon("fullscreen-enter"), this.on(e12, "fullscreenchange", (e13) => this.handleFullscreenChange(e13)), false === ge[e12.fsApi_.fullscreenEnabled] && this.disable();
  }
  buildCSSClass() {
    return `vjs-fullscreen-control ${super.buildCSSClass()}`;
  }
  handleFullscreenChange(e12) {
    this.player_.isFullscreen() ? (this.controlText("Exit Fullscreen"), this.setIcon("fullscreen-exit")) : (this.controlText("Fullscreen"), this.setIcon("fullscreen-enter"));
  }
  handleClick(e12) {
    this.player_.isFullscreen() ? this.player_.exitFullscreen() : this.player_.requestFullscreen();
  }
};
Eu.prototype.controlText_ = "Fullscreen", Ch.registerComponent("FullscreenToggle", Eu);
var wu = function(e12, t3) {
  t3.tech_ && !t3.tech_.featuresVolumeControl && e12.addClass("vjs-hidden"), e12.on(t3, "loadstart", function() {
    t3.tech_.featuresVolumeControl ? e12.removeClass("vjs-hidden") : e12.addClass("vjs-hidden");
  });
};
var Cu = class extends Ch {
  createEl() {
    const e12 = super.createEl("div", {
      className: "vjs-volume-level"
    });
    return this.setIcon("circle", e12), e12.appendChild(super.createEl("span", {
      className: "vjs-control-text"
    })), e12;
  }
};
Ch.registerComponent("VolumeLevel", Cu);
var ku = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.update = sh(ih(this, this.update), th);
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-volume-tooltip"
    }, {
      "aria-hidden": "true"
    });
  }
  update(e12, t3, i4, s6) {
    if (!i4) {
      const i5 = vl(this.el_), s7 = vl(this.player_.el()), n6 = e12.width * t3;
      if (!s7 || !i5) return;
      const r3 = e12.left - s7.left + n6, a6 = e12.width - n6 + (s7.right - e12.right);
      let o4 = i5.width / 2;
      r3 < o4 ? o4 += o4 - r3 : a6 < o4 && (o4 = a6), o4 < 0 ? o4 = 0 : o4 > i5.width && (o4 = i5.width), this.el_.style.right = `-${o4}px`;
    }
    this.write(`${s6}%`);
  }
  write(e12) {
    al(this.el_, e12);
  }
  updateVolume(e12, t3, i4, s6, n6) {
    this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume", () => {
      this.update(e12, t3, i4, s6.toFixed(0)), n6 && n6();
    });
  }
};
Ch.registerComponent("VolumeLevelTooltip", ku);
var xu = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.update = sh(ih(this, this.update), th);
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-mouse-display"
    });
  }
  update(e12, t3, i4) {
    const s6 = 100 * t3;
    this.getChild("volumeLevelTooltip").updateVolume(e12, t3, i4, s6, () => {
      i4 ? this.el_.style.bottom = e12.height * t3 + "px" : this.el_.style.left = e12.width * t3 + "px";
    });
  }
};
xu.prototype.options_ = {
  children: ["volumeLevelTooltip"]
}, Ch.registerComponent("MouseVolumeLevelDisplay", xu);
var Iu = class extends cu {
  constructor(e12, t3) {
    super(e12, t3), this.on("slideractive", (e13) => this.updateLastVolume_(e13)), this.on(e12, "volumechange", (e13) => this.updateARIAAttributes(e13)), e12.ready(() => this.updateARIAAttributes());
  }
  createEl() {
    return super.createEl("div", {
      className: "vjs-volume-bar vjs-slider-bar"
    }, {
      "aria-label": this.localize("Volume Level"),
      "aria-live": "polite"
    });
  }
  handleMouseDown(e12) {
    xl(e12) && super.handleMouseDown(e12);
  }
  handleMouseMove(e12) {
    const t3 = this.getChild("mouseVolumeLevelDisplay");
    if (t3) {
      const i4 = this.el(), s6 = vl(i4), n6 = this.vertical();
      let r3 = Tl(i4, e12);
      r3 = n6 ? r3.y : r3.x, r3 = du(r3, 0, 1), t3.update(s6, r3, n6);
    }
    xl(e12) && (this.checkMuted(), this.player_.volume(this.calculateDistance(e12)));
  }
  checkMuted() {
    this.player_.muted() && this.player_.muted(false);
  }
  getPercent() {
    return this.player_.muted() ? 0 : this.player_.volume();
  }
  stepForward() {
    this.checkMuted(), this.player_.volume(this.player_.volume() + 0.1);
  }
  stepBack() {
    this.checkMuted(), this.player_.volume(this.player_.volume() - 0.1);
  }
  updateARIAAttributes(e12) {
    const t3 = this.player_.muted() ? 0 : this.volumeAsPercentage_();
    this.el_.setAttribute("aria-valuenow", t3), this.el_.setAttribute("aria-valuetext", t3 + "%");
  }
  volumeAsPercentage_() {
    return Math.round(100 * this.player_.volume());
  }
  updateLastVolume_() {
    const e12 = this.player_.volume();
    this.one("sliderinactive", () => {
      0 === this.player_.volume() && this.player_.lastVolume_(e12);
    });
  }
};
Iu.prototype.options_ = {
  children: ["volumeLevel"],
  barName: "volumeLevel"
}, Yo || Oo || Iu.prototype.options_.children.splice(0, 0, "mouseVolumeLevelDisplay"), Iu.prototype.playerEvent = "volumechange", Ch.registerComponent("VolumeBar", Iu);
var Au = class extends Ch {
  constructor(e12, t3 = {}) {
    t3.vertical = t3.vertical || false, (void 0 === t3.volumeBar || Co(t3.volumeBar)) && (t3.volumeBar = t3.volumeBar || {}, t3.volumeBar.vertical = t3.vertical), super(e12, t3), wu(this, e12), this.throttledHandleMouseMove = sh(ih(this, this.handleMouseMove), th), this.handleMouseUpHandler_ = (e13) => this.handleMouseUp(e13), this.on("mousedown", (e13) => this.handleMouseDown(e13)), this.on("touchstart", (e13) => this.handleMouseDown(e13)), this.on("mousemove", (e13) => this.handleMouseMove(e13)), this.on(this.volumeBar, ["focus", "slideractive"], () => {
      this.volumeBar.addClass("vjs-slider-active"), this.addClass("vjs-slider-active"), this.trigger("slideractive");
    }), this.on(this.volumeBar, ["blur", "sliderinactive"], () => {
      this.volumeBar.removeClass("vjs-slider-active"), this.removeClass("vjs-slider-active"), this.trigger("sliderinactive");
    });
  }
  createEl() {
    let e12 = "vjs-volume-horizontal";
    return this.options_.vertical && (e12 = "vjs-volume-vertical"), super.createEl("div", {
      className: `vjs-volume-control vjs-control ${e12}`
    });
  }
  handleMouseDown(e12) {
    const t3 = this.el_.ownerDocument;
    this.on(t3, "mousemove", this.throttledHandleMouseMove), this.on(t3, "touchmove", this.throttledHandleMouseMove), this.on(t3, "mouseup", this.handleMouseUpHandler_), this.on(t3, "touchend", this.handleMouseUpHandler_);
  }
  handleMouseUp(e12) {
    const t3 = this.el_.ownerDocument;
    this.off(t3, "mousemove", this.throttledHandleMouseMove), this.off(t3, "touchmove", this.throttledHandleMouseMove), this.off(t3, "mouseup", this.handleMouseUpHandler_), this.off(t3, "touchend", this.handleMouseUpHandler_);
  }
  handleMouseMove(e12) {
    this.volumeBar.handleMouseMove(e12);
  }
};
Au.prototype.options_ = {
  children: ["volumeBar"]
}, Ch.registerComponent("VolumeControl", Au);
var Du = function(e12, t3) {
  t3.tech_ && !t3.tech_.featuresMuteControl && e12.addClass("vjs-hidden"), e12.on(t3, "loadstart", function() {
    t3.tech_.featuresMuteControl ? e12.removeClass("vjs-hidden") : e12.addClass("vjs-hidden");
  });
};
var Pu = class extends Zd {
  constructor(e12, t3) {
    super(e12, t3), Du(this, e12), this.on(e12, ["loadstart", "volumechange"], (e13) => this.update(e13));
  }
  buildCSSClass() {
    return `vjs-mute-control ${super.buildCSSClass()}`;
  }
  handleClick(e12) {
    const t3 = this.player_.volume(), i4 = this.player_.lastVolume_();
    if (0 === t3) {
      const e13 = i4 < 0.1 ? 0.1 : i4;
      this.player_.volume(e13), this.player_.muted(false);
    } else this.player_.muted(!this.player_.muted());
  }
  update(e12) {
    this.updateIcon_(), this.updateControlText_();
  }
  updateIcon_() {
    const e12 = this.player_.volume();
    let t3 = 3;
    this.setIcon("volume-high"), Yo && this.player_.tech_ && this.player_.tech_.el_ && this.player_.muted(this.player_.tech_.el_.muted), 0 === e12 || this.player_.muted() ? (this.setIcon("volume-mute"), t3 = 0) : e12 < 0.33 ? (this.setIcon("volume-low"), t3 = 1) : e12 < 0.67 && (this.setIcon("volume-medium"), t3 = 2), dl(this.el_, [0, 1, 2, 3].reduce((e13, t4) => e13 + `${t4 ? " " : ""}vjs-vol-${t4}`, "")), hl(this.el_, `vjs-vol-${t3}`);
  }
  updateControlText_() {
    const e12 = this.player_.muted() || 0 === this.player_.volume() ? "Unmute" : "Mute";
    this.controlText() !== e12 && this.controlText(e12);
  }
};
Pu.prototype.controlText_ = "Mute", Ch.registerComponent("MuteToggle", Pu);
var Lu = class extends Ch {
  constructor(e12, t3 = {}) {
    void 0 !== t3.inline ? t3.inline = t3.inline : t3.inline = true, (void 0 === t3.volumeControl || Co(t3.volumeControl)) && (t3.volumeControl = t3.volumeControl || {}, t3.volumeControl.vertical = !t3.inline), super(e12, t3), this.handleKeyPressHandler_ = (e13) => this.handleKeyPress(e13), this.on(e12, ["loadstart"], (e13) => this.volumePanelState_(e13)), this.on(this.muteToggle, "keyup", (e13) => this.handleKeyPress(e13)), this.on(this.volumeControl, "keyup", (e13) => this.handleVolumeControlKeyUp(e13)), this.on("keydown", (e13) => this.handleKeyPress(e13)), this.on("mouseover", (e13) => this.handleMouseOver(e13)), this.on("mouseout", (e13) => this.handleMouseOut(e13)), this.on(this.volumeControl, ["slideractive"], this.sliderActive_), this.on(this.volumeControl, ["sliderinactive"], this.sliderInactive_);
  }
  sliderActive_() {
    this.addClass("vjs-slider-active");
  }
  sliderInactive_() {
    this.removeClass("vjs-slider-active");
  }
  volumePanelState_() {
    this.volumeControl.hasClass("vjs-hidden") && this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-hidden"), this.volumeControl.hasClass("vjs-hidden") && !this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-mute-toggle-only");
  }
  createEl() {
    let e12 = "vjs-volume-panel-horizontal";
    return this.options_.inline || (e12 = "vjs-volume-panel-vertical"), super.createEl("div", {
      className: `vjs-volume-panel vjs-control ${e12}`
    });
  }
  dispose() {
    this.handleMouseOut(), super.dispose();
  }
  handleVolumeControlKeyUp(e12) {
    ye.isEventKey(e12, "Esc") && this.muteToggle.focus();
  }
  handleMouseOver(e12) {
    this.addClass("vjs-hover"), Kl(ge, "keyup", this.handleKeyPressHandler_);
  }
  handleMouseOut(e12) {
    this.removeClass("vjs-hover"), Yl(ge, "keyup", this.handleKeyPressHandler_);
  }
  handleKeyPress(e12) {
    ye.isEventKey(e12, "Esc") && this.handleMouseOut();
  }
};
Lu.prototype.options_ = {
  children: ["muteToggle", "volumeControl"]
}, Ch.registerComponent("VolumePanel", Lu);
var Ou = class extends Zd {
  constructor(e12, t3) {
    super(e12, t3), this.validOptions = [5, 10, 30], this.skipTime = this.getSkipForwardTime(), this.skipTime && this.validOptions.includes(this.skipTime) ? (this.setIcon(`forward-${this.skipTime}`), this.controlText(this.localize("Skip forward {1} seconds", [this.skipTime.toLocaleString(e12.language())])), this.show()) : this.hide();
  }
  getSkipForwardTime() {
    const e12 = this.options_.playerOptions;
    return e12.controlBar && e12.controlBar.skipButtons && e12.controlBar.skipButtons.forward;
  }
  buildCSSClass() {
    return `vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`;
  }
  handleClick(e12) {
    if (isNaN(this.player_.duration())) return;
    const t3 = this.player_.currentTime(), i4 = this.player_.liveTracker, s6 = i4 && i4.isLive() ? i4.seekableEnd() : this.player_.duration();
    let n6;
    n6 = t3 + this.skipTime <= s6 ? t3 + this.skipTime : s6, this.player_.currentTime(n6);
  }
  handleLanguagechange() {
    this.controlText(this.localize("Skip forward {1} seconds", [this.skipTime]));
  }
};
Ou.prototype.controlText_ = "Skip Forward", Ch.registerComponent("SkipForward", Ou);
var Nu = class extends Zd {
  constructor(e12, t3) {
    super(e12, t3), this.validOptions = [5, 10, 30], this.skipTime = this.getSkipBackwardTime(), this.skipTime && this.validOptions.includes(this.skipTime) ? (this.setIcon(`replay-${this.skipTime}`), this.controlText(this.localize("Skip backward {1} seconds", [this.skipTime.toLocaleString(e12.language())])), this.show()) : this.hide();
  }
  getSkipBackwardTime() {
    const e12 = this.options_.playerOptions;
    return e12.controlBar && e12.controlBar.skipButtons && e12.controlBar.skipButtons.backward;
  }
  buildCSSClass() {
    return `vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`;
  }
  handleClick(e12) {
    const t3 = this.player_.currentTime(), i4 = this.player_.liveTracker, s6 = i4 && i4.isLive() && i4.seekableStart();
    let n6;
    n6 = s6 && t3 - this.skipTime <= s6 ? s6 : t3 >= this.skipTime ? t3 - this.skipTime : 0, this.player_.currentTime(n6);
  }
  handleLanguagechange() {
    this.controlText(this.localize("Skip backward {1} seconds", [this.skipTime]));
  }
};
Nu.prototype.controlText_ = "Skip Backward", Ch.registerComponent("SkipBackward", Nu);
var Ru = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), t3 && (this.menuButton_ = t3.menuButton), this.focusedChild_ = -1, this.on("keydown", (e13) => this.handleKeyDown(e13)), this.boundHandleBlur_ = (e13) => this.handleBlur(e13), this.boundHandleTapClick_ = (e13) => this.handleTapClick(e13);
  }
  addEventListenerForItem(e12) {
    e12 instanceof Ch && (this.on(e12, "blur", this.boundHandleBlur_), this.on(e12, ["tap", "click"], this.boundHandleTapClick_));
  }
  removeEventListenerForItem(e12) {
    e12 instanceof Ch && (this.off(e12, "blur", this.boundHandleBlur_), this.off(e12, ["tap", "click"], this.boundHandleTapClick_));
  }
  removeChild(e12) {
    "string" == typeof e12 && (e12 = this.getChild(e12)), this.removeEventListenerForItem(e12), super.removeChild(e12);
  }
  addItem(e12) {
    const t3 = this.addChild(e12);
    t3 && this.addEventListenerForItem(t3);
  }
  createEl() {
    const e12 = this.options_.contentElType || "ul";
    this.contentEl_ = rl(e12, {
      className: "vjs-menu-content"
    }), this.contentEl_.setAttribute("role", "menu");
    const t3 = super.createEl("div", {
      append: this.contentEl_,
      className: "vjs-menu"
    });
    return t3.appendChild(this.contentEl_), Kl(t3, "click", function(e13) {
      e13.preventDefault(), e13.stopImmediatePropagation();
    }), t3;
  }
  dispose() {
    this.contentEl_ = null, this.boundHandleBlur_ = null, this.boundHandleTapClick_ = null, super.dispose();
  }
  handleBlur(e12) {
    const t3 = e12.relatedTarget || ge.activeElement;
    if (!this.children().some((e13) => e13.el() === t3)) {
      const e13 = this.menuButton_;
      e13 && e13.buttonPressed_ && t3 !== e13.el().firstChild && e13.unpressButton();
    }
  }
  handleTapClick(e12) {
    if (this.menuButton_) {
      this.menuButton_.unpressButton();
      const t3 = this.children();
      if (!Array.isArray(t3)) return;
      const i4 = t3.filter((t4) => t4.el() === e12.target)[0];
      if (!i4) return;
      "CaptionSettingsMenuItem" !== i4.name() && this.menuButton_.focus();
    }
  }
  handleKeyDown(e12) {
    ye.isEventKey(e12, "Left") || ye.isEventKey(e12, "Down") ? (e12.preventDefault(), e12.stopPropagation(), this.stepForward()) : (ye.isEventKey(e12, "Right") || ye.isEventKey(e12, "Up")) && (e12.preventDefault(), e12.stopPropagation(), this.stepBack());
  }
  stepForward() {
    let e12 = 0;
    void 0 !== this.focusedChild_ && (e12 = this.focusedChild_ + 1), this.focus(e12);
  }
  stepBack() {
    let e12 = 0;
    void 0 !== this.focusedChild_ && (e12 = this.focusedChild_ - 1), this.focus(e12);
  }
  focus(e12 = 0) {
    const t3 = this.children().slice();
    t3.length && t3[0].hasClass("vjs-menu-title") && t3.shift(), t3.length > 0 && (e12 < 0 ? e12 = 0 : e12 >= t3.length && (e12 = t3.length - 1), this.focusedChild_ = e12, t3[e12].el_.focus());
  }
};
Ch.registerComponent("Menu", Ru);
var Mu = class extends Ch {
  constructor(e12, t3 = {}) {
    super(e12, t3), this.menuButton_ = new Zd(e12, t3), this.menuButton_.controlText(this.controlText_), this.menuButton_.el_.setAttribute("aria-haspopup", "true");
    const i4 = Zd.prototype.buildCSSClass();
    this.menuButton_.el_.className = this.buildCSSClass() + " " + i4, this.menuButton_.removeClass("vjs-control"), this.addChild(this.menuButton_), this.update(), this.enabled_ = true;
    const s6 = (e13) => this.handleClick(e13);
    this.handleMenuKeyUp_ = (e13) => this.handleMenuKeyUp(e13), this.on(this.menuButton_, "tap", s6), this.on(this.menuButton_, "click", s6), this.on(this.menuButton_, "keydown", (e13) => this.handleKeyDown(e13)), this.on(this.menuButton_, "mouseenter", () => {
      this.addClass("vjs-hover"), this.menu.show(), Kl(ge, "keyup", this.handleMenuKeyUp_);
    }), this.on("mouseleave", (e13) => this.handleMouseLeave(e13)), this.on("keydown", (e13) => this.handleSubmenuKeyDown(e13));
  }
  update() {
    const e12 = this.createMenu();
    this.menu && (this.menu.dispose(), this.removeChild(this.menu)), this.menu = e12, this.addChild(e12), this.buttonPressed_ = false, this.menuButton_.el_.setAttribute("aria-expanded", "false"), this.items && this.items.length <= this.hideThreshold_ ? (this.hide(), this.menu.contentEl_.removeAttribute("role")) : (this.show(), this.menu.contentEl_.setAttribute("role", "menu"));
  }
  createMenu() {
    const e12 = new Ru(this.player_, {
      menuButton: this
    });
    if (this.hideThreshold_ = 0, this.options_.title) {
      const t3 = rl("li", {
        className: "vjs-menu-title",
        textContent: Sh(this.options_.title),
        tabIndex: -1
      }), i4 = new Ch(this.player_, {
        el: t3
      });
      e12.addItem(i4);
    }
    if (this.items = this.createItems(), this.items) for (let t3 = 0; t3 < this.items.length; t3++) e12.addItem(this.items[t3]);
    return e12;
  }
  createItems() {
  }
  createEl() {
    return super.createEl("div", {
      className: this.buildWrapperCSSClass()
    }, {});
  }
  setIcon(e12) {
    super.setIcon(e12, this.menuButton_.el_);
  }
  buildWrapperCSSClass() {
    let e12 = "vjs-menu-button";
    true === this.options_.inline ? e12 += "-inline" : e12 += "-popup";
    return `vjs-menu-button ${e12} ${Zd.prototype.buildCSSClass()} ${super.buildCSSClass()}`;
  }
  buildCSSClass() {
    let e12 = "vjs-menu-button";
    return true === this.options_.inline ? e12 += "-inline" : e12 += "-popup", `vjs-menu-button ${e12} ${super.buildCSSClass()}`;
  }
  controlText(e12, t3 = this.menuButton_.el()) {
    return this.menuButton_.controlText(e12, t3);
  }
  dispose() {
    this.handleMouseLeave(), super.dispose();
  }
  handleClick(e12) {
    this.buttonPressed_ ? this.unpressButton() : this.pressButton();
  }
  handleMouseLeave(e12) {
    this.removeClass("vjs-hover"), Yl(ge, "keyup", this.handleMenuKeyUp_);
  }
  focus() {
    this.menuButton_.focus();
  }
  blur() {
    this.menuButton_.blur();
  }
  handleKeyDown(e12) {
    ye.isEventKey(e12, "Esc") || ye.isEventKey(e12, "Tab") ? (this.buttonPressed_ && this.unpressButton(), ye.isEventKey(e12, "Tab") || (e12.preventDefault(), this.menuButton_.focus())) : (ye.isEventKey(e12, "Up") || ye.isEventKey(e12, "Down")) && (this.buttonPressed_ || (e12.preventDefault(), this.pressButton()));
  }
  handleMenuKeyUp(e12) {
    (ye.isEventKey(e12, "Esc") || ye.isEventKey(e12, "Tab")) && this.removeClass("vjs-hover");
  }
  handleSubmenuKeyPress(e12) {
    this.handleSubmenuKeyDown(e12);
  }
  handleSubmenuKeyDown(e12) {
    (ye.isEventKey(e12, "Esc") || ye.isEventKey(e12, "Tab")) && (this.buttonPressed_ && this.unpressButton(), ye.isEventKey(e12, "Tab") || (e12.preventDefault(), this.menuButton_.focus()));
  }
  pressButton() {
    if (this.enabled_) {
      if (this.buttonPressed_ = true, this.menu.show(), this.menu.lockShowing(), this.menuButton_.el_.setAttribute("aria-expanded", "true"), Yo && sl()) return;
      this.menu.focus();
    }
  }
  unpressButton() {
    this.enabled_ && (this.buttonPressed_ = false, this.menu.unlockShowing(), this.menu.hide(), this.menuButton_.el_.setAttribute("aria-expanded", "false"));
  }
  disable() {
    this.unpressButton(), this.enabled_ = false, this.addClass("vjs-disabled"), this.menuButton_.disable();
  }
  enable() {
    this.enabled_ = true, this.removeClass("vjs-disabled"), this.menuButton_.enable();
  }
};
Ch.registerComponent("MenuButton", Mu);
var Uu = class extends Mu {
  constructor(e12, t3) {
    const i4 = t3.tracks;
    if (super(e12, t3), this.items.length <= 1 && this.hide(), !i4) return;
    const s6 = ih(this, this.update);
    i4.addEventListener("removetrack", s6), i4.addEventListener("addtrack", s6), i4.addEventListener("labelchange", s6), this.player_.on("ready", s6), this.player_.on("dispose", function() {
      i4.removeEventListener("removetrack", s6), i4.removeEventListener("addtrack", s6), i4.removeEventListener("labelchange", s6);
    });
  }
};
Ch.registerComponent("TrackButton", Uu);
var Bu = ["Tab", "Esc", "Up", "Down", "Right", "Left"];
var Fu = class extends Hd {
  constructor(e12, t3) {
    super(e12, t3), this.selectable = t3.selectable, this.isSelected_ = t3.selected || false, this.multiSelectable = t3.multiSelectable, this.selected(this.isSelected_), this.selectable ? this.multiSelectable ? this.el_.setAttribute("role", "menuitemcheckbox") : this.el_.setAttribute("role", "menuitemradio") : this.el_.setAttribute("role", "menuitem");
  }
  createEl(e12, t3, i4) {
    this.nonIconControl = true;
    const s6 = super.createEl("li", Object.assign({
      className: "vjs-menu-item",
      tabIndex: -1
    }, t3), i4), n6 = rl("span", {
      className: "vjs-menu-item-text",
      textContent: this.localize(this.options_.label)
    });
    return this.player_.options_.experimentalSvgIcons ? s6.appendChild(n6) : s6.replaceChild(n6, s6.querySelector(".vjs-icon-placeholder")), s6;
  }
  handleKeyDown(e12) {
    Bu.some((t3) => ye.isEventKey(e12, t3)) || super.handleKeyDown(e12);
  }
  handleClick(e12) {
    this.selected(true);
  }
  selected(e12) {
    this.selectable && (e12 ? (this.addClass("vjs-selected"), this.el_.setAttribute("aria-checked", "true"), this.controlText(", selected"), this.isSelected_ = true) : (this.removeClass("vjs-selected"), this.el_.setAttribute("aria-checked", "false"), this.controlText(""), this.isSelected_ = false));
  }
};
Ch.registerComponent("MenuItem", Fu);
var qu = class extends Fu {
  constructor(e12, t3) {
    const i4 = t3.track, s6 = e12.textTracks();
    t3.label = i4.label || i4.language || "Unknown", t3.selected = "showing" === i4.mode, super(e12, t3), this.track = i4, this.kinds = (t3.kinds || [t3.kind || this.track.kind]).filter(Boolean);
    const n6 = (...e13) => {
      this.handleTracksChange.apply(this, e13);
    }, r3 = (...e13) => {
      this.handleSelectedLanguageChange.apply(this, e13);
    };
    if (e12.on(["loadstart", "texttrackchange"], n6), s6.addEventListener("change", n6), s6.addEventListener("selectedlanguagechange", r3), this.on("dispose", function() {
      e12.off(["loadstart", "texttrackchange"], n6), s6.removeEventListener("change", n6), s6.removeEventListener("selectedlanguagechange", r3);
    }), void 0 === s6.onchange) {
      let e13;
      this.on(["tap", "click"], function() {
        if ("object" != typeof g3.Event) try {
          e13 = new g3.Event("change");
        } catch (t4) {
        }
        e13 || (e13 = ge.createEvent("Event"), e13.initEvent("change", true, true)), s6.dispatchEvent(e13);
      });
    }
    this.handleTracksChange();
  }
  handleClick(e12) {
    const t3 = this.track, i4 = this.player_.textTracks();
    if (super.handleClick(e12), i4) for (let s6 = 0; s6 < i4.length; s6++) {
      const e13 = i4[s6];
      -1 !== this.kinds.indexOf(e13.kind) && (e13 === t3 ? "showing" !== e13.mode && (e13.mode = "showing") : "disabled" !== e13.mode && (e13.mode = "disabled"));
    }
  }
  handleTracksChange(e12) {
    const t3 = "showing" === this.track.mode;
    t3 !== this.isSelected_ && this.selected(t3);
  }
  handleSelectedLanguageChange(e12) {
    if ("showing" === this.track.mode) {
      const e13 = this.player_.cache_.selectedLanguage;
      if (e13 && e13.enabled && e13.language === this.track.language && e13.kind !== this.track.kind) return;
      this.player_.cache_.selectedLanguage = {
        enabled: true,
        language: this.track.language,
        kind: this.track.kind
      };
    }
  }
  dispose() {
    this.track = null, super.dispose();
  }
};
Ch.registerComponent("TextTrackMenuItem", qu);
var ju = class extends qu {
  constructor(e12, t3) {
    t3.track = {
      player: e12,
      kind: t3.kind,
      kinds: t3.kinds,
      default: false,
      mode: "disabled"
    }, t3.kinds || (t3.kinds = [t3.kind]), t3.label ? t3.track.label = t3.label : t3.track.label = t3.kinds.join(" and ") + " off", t3.selectable = true, t3.multiSelectable = false, super(e12, t3);
  }
  handleTracksChange(e12) {
    const t3 = this.player().textTracks();
    let i4 = true;
    for (let s6 = 0, n6 = t3.length; s6 < n6; s6++) {
      const e13 = t3[s6];
      if (this.options_.kinds.indexOf(e13.kind) > -1 && "showing" === e13.mode) {
        i4 = false;
        break;
      }
    }
    i4 !== this.isSelected_ && this.selected(i4);
  }
  handleSelectedLanguageChange(e12) {
    const t3 = this.player().textTracks();
    let i4 = true;
    for (let s6 = 0, n6 = t3.length; s6 < n6; s6++) {
      const e13 = t3[s6];
      if (["captions", "descriptions", "subtitles"].indexOf(e13.kind) > -1 && "showing" === e13.mode) {
        i4 = false;
        break;
      }
    }
    i4 && (this.player_.cache_.selectedLanguage = {
      enabled: false
    });
  }
  handleLanguagechange() {
    this.$(".vjs-menu-item-text").textContent = this.player_.localize(this.options_.label), super.handleLanguagechange();
  }
};
Ch.registerComponent("OffTextTrackMenuItem", ju);
var $u = class extends Uu {
  constructor(e12, t3 = {}) {
    t3.tracks = e12.textTracks(), super(e12, t3);
  }
  createItems(e12 = [], t3 = qu) {
    let i4;
    this.label_ && (i4 = `${this.label_} off`), e12.push(new ju(this.player_, {
      kinds: this.kinds_,
      kind: this.kind_,
      label: i4
    })), this.hideThreshold_ += 1;
    const s6 = this.player_.textTracks();
    Array.isArray(this.kinds_) || (this.kinds_ = [this.kind_]);
    for (let n6 = 0; n6 < s6.length; n6++) {
      const i5 = s6[n6];
      if (this.kinds_.indexOf(i5.kind) > -1) {
        const s7 = new t3(this.player_, {
          track: i5,
          kinds: this.kinds_,
          kind: this.kind_,
          selectable: true,
          multiSelectable: false
        });
        s7.addClass(`vjs-${i5.kind}-menu-item`), e12.push(s7);
      }
    }
    return e12;
  }
};
Ch.registerComponent("TextTrackButton", $u);
var Hu = class extends Fu {
  constructor(e12, t3) {
    const i4 = t3.track, s6 = t3.cue, n6 = e12.currentTime();
    t3.selectable = true, t3.multiSelectable = false, t3.label = s6.text, t3.selected = s6.startTime <= n6 && n6 < s6.endTime, super(e12, t3), this.track = i4, this.cue = s6;
  }
  handleClick(e12) {
    super.handleClick(), this.player_.currentTime(this.cue.startTime);
  }
};
Ch.registerComponent("ChaptersTrackMenuItem", Hu);
var Vu = class extends $u {
  constructor(e12, t3, i4) {
    super(e12, t3, i4), this.setIcon("chapters"), this.selectCurrentItem_ = () => {
      this.items.forEach((e13) => {
        e13.selected(this.track_.activeCues[0] === e13.cue);
      });
    };
  }
  buildCSSClass() {
    return `vjs-chapters-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-chapters-button ${super.buildWrapperCSSClass()}`;
  }
  update(e12) {
    if (e12 && e12.track && "chapters" !== e12.track.kind) return;
    const t3 = this.findChaptersTrack();
    t3 !== this.track_ ? (this.setTrack(t3), super.update()) : (!this.items || t3 && t3.cues && t3.cues.length !== this.items.length) && super.update();
  }
  setTrack(e12) {
    if (this.track_ !== e12) {
      if (this.updateHandler_ || (this.updateHandler_ = this.update.bind(this)), this.track_) {
        const e13 = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
        e13 && e13.removeEventListener("load", this.updateHandler_), this.track_.removeEventListener("cuechange", this.selectCurrentItem_), this.track_ = null;
      }
      if (this.track_ = e12, this.track_) {
        this.track_.mode = "hidden";
        const e13 = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
        e13 && e13.addEventListener("load", this.updateHandler_), this.track_.addEventListener("cuechange", this.selectCurrentItem_);
      }
    }
  }
  findChaptersTrack() {
    const e12 = this.player_.textTracks() || [];
    for (let t3 = e12.length - 1; t3 >= 0; t3--) {
      const i4 = e12[t3];
      if (i4.kind === this.kind_) return i4;
    }
  }
  getMenuCaption() {
    return this.track_ && this.track_.label ? this.track_.label : this.localize(Sh(this.kind_));
  }
  createMenu() {
    return this.options_.title = this.getMenuCaption(), super.createMenu();
  }
  createItems() {
    const e12 = [];
    if (!this.track_) return e12;
    const t3 = this.track_.cues;
    if (!t3) return e12;
    for (let i4 = 0, s6 = t3.length; i4 < s6; i4++) {
      const s7 = t3[i4], n6 = new Hu(this.player_, {
        track: this.track_,
        cue: s7
      });
      e12.push(n6);
    }
    return e12;
  }
};
Vu.prototype.kind_ = "chapters", Vu.prototype.controlText_ = "Chapters", Ch.registerComponent("ChaptersButton", Vu);
var zu = class extends $u {
  constructor(e12, t3, i4) {
    super(e12, t3, i4), this.setIcon("audio-description");
    const s6 = e12.textTracks(), n6 = ih(this, this.handleTracksChange);
    s6.addEventListener("change", n6), this.on("dispose", function() {
      s6.removeEventListener("change", n6);
    });
  }
  handleTracksChange(e12) {
    const t3 = this.player().textTracks();
    let i4 = false;
    for (let s6 = 0, n6 = t3.length; s6 < n6; s6++) {
      const e13 = t3[s6];
      if (e13.kind !== this.kind_ && "showing" === e13.mode) {
        i4 = true;
        break;
      }
    }
    i4 ? this.disable() : this.enable();
  }
  buildCSSClass() {
    return `vjs-descriptions-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-descriptions-button ${super.buildWrapperCSSClass()}`;
  }
};
zu.prototype.kind_ = "descriptions", zu.prototype.controlText_ = "Descriptions", Ch.registerComponent("DescriptionsButton", zu);
var Wu = class extends $u {
  constructor(e12, t3, i4) {
    super(e12, t3, i4), this.setIcon("subtitles");
  }
  buildCSSClass() {
    return `vjs-subtitles-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-subtitles-button ${super.buildWrapperCSSClass()}`;
  }
};
Wu.prototype.kind_ = "subtitles", Wu.prototype.controlText_ = "Subtitles", Ch.registerComponent("SubtitlesButton", Wu);
var Gu = class extends qu {
  constructor(e12, t3) {
    t3.track = {
      player: e12,
      kind: t3.kind,
      label: t3.kind + " settings",
      selectable: false,
      default: false,
      mode: "disabled"
    }, t3.selectable = false, t3.name = "CaptionSettingsMenuItem", super(e12, t3), this.addClass("vjs-texttrack-settings"), this.controlText(", opens " + t3.kind + " settings dialog");
  }
  handleClick(e12) {
    this.player().getChild("textTrackSettings").open();
  }
  handleLanguagechange() {
    this.$(".vjs-menu-item-text").textContent = this.player_.localize(this.options_.kind + " settings"), super.handleLanguagechange();
  }
};
Ch.registerComponent("CaptionSettingsMenuItem", Gu);
var Xu = class extends $u {
  constructor(e12, t3, i4) {
    super(e12, t3, i4), this.setIcon("captions");
  }
  buildCSSClass() {
    return `vjs-captions-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-captions-button ${super.buildWrapperCSSClass()}`;
  }
  createItems() {
    const e12 = [];
    return this.player().tech_ && this.player().tech_.featuresNativeTextTracks || !this.player().getChild("textTrackSettings") || (e12.push(new Gu(this.player_, {
      kind: this.kind_
    })), this.hideThreshold_ += 1), super.createItems(e12);
  }
};
Xu.prototype.kind_ = "captions", Xu.prototype.controlText_ = "Captions", Ch.registerComponent("CaptionsButton", Xu);
var Ku = class extends qu {
  createEl(e12, t3, i4) {
    const s6 = super.createEl(e12, t3, i4), n6 = s6.querySelector(".vjs-menu-item-text");
    return "captions" === this.options_.track.kind && (this.player_.options_.experimentalSvgIcons ? this.setIcon("captions", s6) : n6.appendChild(rl("span", {
      className: "vjs-icon-placeholder"
    }, {
      "aria-hidden": true
    })), n6.appendChild(rl("span", {
      className: "vjs-control-text",
      textContent: ` ${this.localize("Captions")}`
    }))), s6;
  }
};
Ch.registerComponent("SubsCapsMenuItem", Ku);
var Yu = class extends $u {
  constructor(e12, t3 = {}) {
    super(e12, t3), this.label_ = "subtitles", this.setIcon("subtitles"), ["en", "en-us", "en-ca", "fr-ca"].indexOf(this.player_.language_) > -1 && (this.label_ = "captions", this.setIcon("captions")), this.menuButton_.controlText(Sh(this.label_));
  }
  buildCSSClass() {
    return `vjs-subs-caps-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-subs-caps-button ${super.buildWrapperCSSClass()}`;
  }
  createItems() {
    let e12 = [];
    return this.player().tech_ && this.player().tech_.featuresNativeTextTracks || !this.player().getChild("textTrackSettings") || (e12.push(new Gu(this.player_, {
      kind: this.label_
    })), this.hideThreshold_ += 1), e12 = super.createItems(e12, Ku), e12;
  }
};
Yu.prototype.kinds_ = ["captions", "subtitles"], Yu.prototype.controlText_ = "Subtitles", Ch.registerComponent("SubsCapsButton", Yu);
var Qu = class extends Fu {
  constructor(e12, t3) {
    const i4 = t3.track, s6 = e12.audioTracks();
    t3.label = i4.label || i4.language || "Unknown", t3.selected = i4.enabled, super(e12, t3), this.track = i4, this.addClass(`vjs-${i4.kind}-menu-item`);
    const n6 = (...e13) => {
      this.handleTracksChange.apply(this, e13);
    };
    s6.addEventListener("change", n6), this.on("dispose", () => {
      s6.removeEventListener("change", n6);
    });
  }
  createEl(e12, t3, i4) {
    const s6 = super.createEl(e12, t3, i4), n6 = s6.querySelector(".vjs-menu-item-text");
    return ["main-desc", "description"].indexOf(this.options_.track.kind) >= 0 && (n6.appendChild(rl("span", {
      className: "vjs-icon-placeholder"
    }, {
      "aria-hidden": true
    })), n6.appendChild(rl("span", {
      className: "vjs-control-text",
      textContent: " " + this.localize("Descriptions")
    }))), s6;
  }
  handleClick(e12) {
    if (super.handleClick(e12), this.track.enabled = true, this.player_.tech_.featuresNativeAudioTracks) {
      const e13 = this.player_.audioTracks();
      for (let t3 = 0; t3 < e13.length; t3++) {
        const i4 = e13[t3];
        i4 !== this.track && (i4.enabled = i4 === this.track);
      }
    }
  }
  handleTracksChange(e12) {
    this.selected(this.track.enabled);
  }
};
Ch.registerComponent("AudioTrackMenuItem", Qu);
var Ju = class extends Uu {
  constructor(e12, t3 = {}) {
    t3.tracks = e12.audioTracks(), super(e12, t3), this.setIcon("audio");
  }
  buildCSSClass() {
    return `vjs-audio-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-audio-button ${super.buildWrapperCSSClass()}`;
  }
  createItems(e12 = []) {
    this.hideThreshold_ = 1;
    const t3 = this.player_.audioTracks();
    for (let i4 = 0; i4 < t3.length; i4++) {
      const s6 = t3[i4];
      e12.push(new Qu(this.player_, {
        track: s6,
        selectable: true,
        multiSelectable: false
      }));
    }
    return e12;
  }
};
Ju.prototype.controlText_ = "Audio Track", Ch.registerComponent("AudioTrackButton", Ju);
var Zu = class extends Fu {
  constructor(e12, t3) {
    const i4 = t3.rate, s6 = parseFloat(i4, 10);
    t3.label = i4, t3.selected = s6 === e12.playbackRate(), t3.selectable = true, t3.multiSelectable = false, super(e12, t3), this.label = i4, this.rate = s6, this.on(e12, "ratechange", (e13) => this.update(e13));
  }
  handleClick(e12) {
    super.handleClick(), this.player().playbackRate(this.rate);
  }
  update(e12) {
    this.selected(this.player().playbackRate() === this.rate);
  }
};
Zu.prototype.contentElType = "button", Ch.registerComponent("PlaybackRateMenuItem", Zu);
var ec = class extends Mu {
  constructor(e12, t3) {
    super(e12, t3), this.menuButton_.el_.setAttribute("aria-describedby", this.labelElId_), this.updateVisibility(), this.updateLabel(), this.on(e12, "loadstart", (e13) => this.updateVisibility(e13)), this.on(e12, "ratechange", (e13) => this.updateLabel(e13)), this.on(e12, "playbackrateschange", (e13) => this.handlePlaybackRateschange(e13));
  }
  createEl() {
    const e12 = super.createEl();
    return this.labelElId_ = "vjs-playback-rate-value-label-" + this.id_, this.labelEl_ = rl("div", {
      className: "vjs-playback-rate-value",
      id: this.labelElId_,
      textContent: "1x"
    }), e12.appendChild(this.labelEl_), e12;
  }
  dispose() {
    this.labelEl_ = null, super.dispose();
  }
  buildCSSClass() {
    return `vjs-playback-rate ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-playback-rate ${super.buildWrapperCSSClass()}`;
  }
  createItems() {
    const e12 = this.playbackRates(), t3 = [];
    for (let i4 = e12.length - 1; i4 >= 0; i4--) t3.push(new Zu(this.player(), {
      rate: e12[i4] + "x"
    }));
    return t3;
  }
  handlePlaybackRateschange(e12) {
    this.update();
  }
  playbackRates() {
    const e12 = this.player();
    return e12.playbackRates && e12.playbackRates() || [];
  }
  playbackRateSupported() {
    return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0;
  }
  updateVisibility(e12) {
    this.playbackRateSupported() ? this.removeClass("vjs-hidden") : this.addClass("vjs-hidden");
  }
  updateLabel(e12) {
    this.playbackRateSupported() && (this.labelEl_.textContent = this.player().playbackRate() + "x");
  }
};
ec.prototype.controlText_ = "Playback Rate", Ch.registerComponent("PlaybackRateMenuButton", ec);
var tc = class extends Ch {
  buildCSSClass() {
    return `vjs-spacer ${super.buildCSSClass()}`;
  }
  createEl(e12 = "div", t3 = {}, i4 = {}) {
    return t3.className || (t3.className = this.buildCSSClass()), super.createEl(e12, t3, i4);
  }
};
Ch.registerComponent("Spacer", tc);
var ic = class extends tc {
  buildCSSClass() {
    return `vjs-custom-control-spacer ${super.buildCSSClass()}`;
  }
  createEl() {
    return super.createEl("div", {
      className: this.buildCSSClass(),
      textContent: " "
    });
  }
};
Ch.registerComponent("CustomControlSpacer", ic);
var sc = class extends Ch {
  createEl() {
    return super.createEl("div", {
      className: "vjs-control-bar",
      dir: "ltr"
    });
  }
};
sc.prototype.options_ = {
  children: ["playToggle", "skipBackward", "skipForward", "volumePanel", "currentTimeDisplay", "timeDivider", "durationDisplay", "progressControl", "liveDisplay", "seekToLive", "remainingTimeDisplay", "customControlSpacer", "playbackRateMenuButton", "chaptersButton", "descriptionsButton", "subsCapsButton", "audioTrackButton", "pictureInPictureToggle", "fullscreenToggle"]
}, Ch.registerComponent("ControlBar", sc);
var nc = class extends Hh {
  constructor(e12, t3) {
    super(e12, t3), this.on(e12, "error", (e13) => {
      this.open(e13);
    });
  }
  buildCSSClass() {
    return `vjs-error-display ${super.buildCSSClass()}`;
  }
  content() {
    const e12 = this.player().error();
    return e12 ? this.localize(e12.message) : "";
  }
};
nc.prototype.options_ = Object.assign({}, Hh.prototype.options_, {
  pauseOnOpen: false,
  fillAlways: true,
  temporary: false,
  uncloseable: true
}), Ch.registerComponent("ErrorDisplay", nc);
var rc = "vjs-text-track-settings";
var ac = ["#000", "Black"];
var oc = ["#00F", "Blue"];
var lc = ["#0FF", "Cyan"];
var hc = ["#0F0", "Green"];
var dc = ["#F0F", "Magenta"];
var uc = ["#F00", "Red"];
var cc = ["#FFF", "White"];
var pc = ["#FF0", "Yellow"];
var mc = ["1", "Opaque"];
var gc = ["0.5", "Semi-Transparent"];
var fc = ["0", "Transparent"];
var yc = {
  backgroundColor: {
    selector: ".vjs-bg-color > select",
    id: "captions-background-color-%s",
    label: "Color",
    options: [ac, cc, uc, hc, oc, pc, dc, lc]
  },
  backgroundOpacity: {
    selector: ".vjs-bg-opacity > select",
    id: "captions-background-opacity-%s",
    label: "Opacity",
    options: [mc, gc, fc]
  },
  color: {
    selector: ".vjs-text-color > select",
    id: "captions-foreground-color-%s",
    label: "Color",
    options: [cc, ac, uc, hc, oc, pc, dc, lc]
  },
  edgeStyle: {
    selector: ".vjs-edge-style > select",
    id: "%s",
    label: "Text Edge Style",
    options: [["none", "None"], ["raised", "Raised"], ["depressed", "Depressed"], ["uniform", "Uniform"], ["dropshadow", "Drop shadow"]]
  },
  fontFamily: {
    selector: ".vjs-font-family > select",
    id: "captions-font-family-%s",
    label: "Font Family",
    options: [["proportionalSansSerif", "Proportional Sans-Serif"], ["monospaceSansSerif", "Monospace Sans-Serif"], ["proportionalSerif", "Proportional Serif"], ["monospaceSerif", "Monospace Serif"], ["casual", "Casual"], ["script", "Script"], ["small-caps", "Small Caps"]]
  },
  fontPercent: {
    selector: ".vjs-font-percent > select",
    id: "captions-font-size-%s",
    label: "Font Size",
    options: [["0.50", "50%"], ["0.75", "75%"], ["1.00", "100%"], ["1.25", "125%"], ["1.50", "150%"], ["1.75", "175%"], ["2.00", "200%"], ["3.00", "300%"], ["4.00", "400%"]],
    default: 2,
    parser: (e12) => "1.00" === e12 ? null : Number(e12)
  },
  textOpacity: {
    selector: ".vjs-text-opacity > select",
    id: "captions-foreground-opacity-%s",
    label: "Opacity",
    options: [mc, gc]
  },
  windowColor: {
    selector: ".vjs-window-color > select",
    id: "captions-window-color-%s",
    label: "Color"
  },
  windowOpacity: {
    selector: ".vjs-window-opacity > select",
    id: "captions-window-opacity-%s",
    label: "Opacity",
    options: [fc, gc, mc]
  }
};
function _c(e12, t3) {
  if (t3 && (e12 = t3(e12)), e12 && "none" !== e12) return e12;
}
function vc(e12, t3) {
  return _c(e12.options[e12.options.selectedIndex].value, t3);
}
function bc(e12, t3, i4) {
  if (t3) {
    for (let s6 = 0; s6 < e12.options.length; s6++) if (_c(e12.options[s6].value, i4) === t3) {
      e12.selectedIndex = s6;
      break;
    }
  }
}
yc.windowColor.options = yc.backgroundColor.options;
var Tc = class extends Hh {
  constructor(e12, t3) {
    t3.temporary = false, super(e12, t3), this.updateDisplay = this.updateDisplay.bind(this), this.fill(), this.hasBeenOpened_ = this.hasBeenFilled_ = true, this.endDialog = rl("p", {
      className: "vjs-control-text",
      textContent: this.localize("End of dialog window.")
    }), this.el().appendChild(this.endDialog), this.setDefaults(), void 0 === t3.persistTextTrackSettings && (this.options_.persistTextTrackSettings = this.options_.playerOptions.persistTextTrackSettings), this.on(this.$(".vjs-done-button"), "click", () => {
      this.saveSettings(), this.close();
    }), this.on(this.$(".vjs-default-button"), "click", () => {
      this.setDefaults(), this.updateDisplay();
    }), So(yc, (e13) => {
      this.on(this.$(e13.selector), "change", this.updateDisplay);
    }), this.options_.persistTextTrackSettings && this.restoreSettings();
  }
  dispose() {
    this.endDialog = null, super.dispose();
  }
  createElSelect_(e12, t3 = "", i4 = "label") {
    const s6 = yc[e12], n6 = s6.id.replace("%s", this.id_), r3 = [t3, n6].join(" ").trim(), a6 = `vjs_select_${Hl()}`;
    return [`<${i4} id="${n6}"${"label" === i4 ? ` for="${a6}" class="vjs-label"` : ""}>`, this.localize(s6.label), `</${i4}>`, `<select aria-labelledby="${r3}" id="${a6}">`].concat(s6.options.map((e13) => {
      const t4 = n6 + "-" + e13[1].replace(/\W+/g, "");
      return [`<option id="${t4}" value="${e13[0]}" `, `aria-labelledby="${r3} ${t4}">`, this.localize(e13[1]), "</option>"].join("");
    })).concat("</select>").join("");
  }
  createElFgColor_() {
    const e12 = `captions-text-legend-${this.id_}`;
    return ['<fieldset class="vjs-fg vjs-track-setting">', `<legend id="${e12}">`, this.localize("Text"), "</legend>", '<span class="vjs-text-color">', this.createElSelect_("color", e12), "</span>", '<span class="vjs-text-opacity vjs-opacity">', this.createElSelect_("textOpacity", e12), "</span>", "</fieldset>"].join("");
  }
  createElBgColor_() {
    const e12 = `captions-background-${this.id_}`;
    return ['<fieldset class="vjs-bg vjs-track-setting">', `<legend id="${e12}">`, this.localize("Text Background"), "</legend>", '<span class="vjs-bg-color">', this.createElSelect_("backgroundColor", e12), "</span>", '<span class="vjs-bg-opacity vjs-opacity">', this.createElSelect_("backgroundOpacity", e12), "</span>", "</fieldset>"].join("");
  }
  createElWinColor_() {
    const e12 = `captions-window-${this.id_}`;
    return ['<fieldset class="vjs-window vjs-track-setting">', `<legend id="${e12}">`, this.localize("Caption Area Background"), "</legend>", '<span class="vjs-window-color">', this.createElSelect_("windowColor", e12), "</span>", '<span class="vjs-window-opacity vjs-opacity">', this.createElSelect_("windowOpacity", e12), "</span>", "</fieldset>"].join("");
  }
  createElColors_() {
    return rl("div", {
      className: "vjs-track-settings-colors",
      innerHTML: [this.createElFgColor_(), this.createElBgColor_(), this.createElWinColor_()].join("")
    });
  }
  createElFont_() {
    return rl("div", {
      className: "vjs-track-settings-font",
      innerHTML: ['<fieldset class="vjs-font-percent vjs-track-setting">', this.createElSelect_("fontPercent", "", "legend"), "</fieldset>", '<fieldset class="vjs-edge-style vjs-track-setting">', this.createElSelect_("edgeStyle", "", "legend"), "</fieldset>", '<fieldset class="vjs-font-family vjs-track-setting">', this.createElSelect_("fontFamily", "", "legend"), "</fieldset>"].join("")
    });
  }
  createElControls_() {
    const e12 = this.localize("restore all settings to the default values");
    return rl("div", {
      className: "vjs-track-settings-controls",
      innerHTML: [`<button type="button" class="vjs-default-button" title="${e12}">`, this.localize("Reset"), `<span class="vjs-control-text"> ${e12}</span>`, "</button>", `<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")
    });
  }
  content() {
    return [this.createElColors_(), this.createElFont_(), this.createElControls_()];
  }
  label() {
    return this.localize("Caption Settings Dialog");
  }
  description() {
    return this.localize("Beginning of dialog window. Escape will cancel and close the window.");
  }
  buildCSSClass() {
    return super.buildCSSClass() + " vjs-text-track-settings";
  }
  getValues() {
    return Eo(yc, (e12, t3, i4) => {
      const s6 = vc(this.$(t3.selector), t3.parser);
      return void 0 !== s6 && (e12[i4] = s6), e12;
    }, {});
  }
  setValues(e12) {
    So(yc, (t3, i4) => {
      bc(this.$(t3.selector), e12[i4], t3.parser);
    });
  }
  setDefaults() {
    So(yc, (e12) => {
      const t3 = e12.hasOwnProperty("default") ? e12.default : 0;
      this.$(e12.selector).selectedIndex = t3;
    });
  }
  restoreSettings() {
    let e12;
    try {
      e12 = JSON.parse(g3.localStorage.getItem(rc));
    } catch (t3) {
      _o.warn(t3);
    }
    e12 && this.setValues(e12);
  }
  saveSettings() {
    if (!this.options_.persistTextTrackSettings) return;
    const e12 = this.getValues();
    try {
      Object.keys(e12).length ? g3.localStorage.setItem(rc, JSON.stringify(e12)) : g3.localStorage.removeItem(rc);
    } catch (t3) {
      _o.warn(t3);
    }
  }
  updateDisplay() {
    const e12 = this.player_.getChild("textTrackDisplay");
    e12 && e12.updateDisplay();
  }
  conditionalBlur_() {
    this.previouslyActiveEl_ = null;
    const e12 = this.player_.controlBar, t3 = e12 && e12.subsCapsButton, i4 = e12 && e12.captionsButton;
    t3 ? t3.focus() : i4 && i4.focus();
  }
  handleLanguagechange() {
    this.fill();
  }
};
Ch.registerComponent("TextTrackSettings", Tc);
var Sc = class extends Ch {
  constructor(e12, t3) {
    let i4 = t3.ResizeObserver || g3.ResizeObserver;
    null === t3.ResizeObserver && (i4 = false);
    super(e12, ko({
      createEl: !i4,
      reportTouchActivity: false
    }, t3)), this.ResizeObserver = t3.ResizeObserver || g3.ResizeObserver, this.loadListener_ = null, this.resizeObserver_ = null, this.debouncedHandler_ = nh(() => {
      this.resizeHandler();
    }, 100, false, this), i4 ? (this.resizeObserver_ = new this.ResizeObserver(this.debouncedHandler_), this.resizeObserver_.observe(e12.el())) : (this.loadListener_ = () => {
      if (!this.el_ || !this.el_.contentWindow) return;
      const e13 = this.debouncedHandler_;
      let t4 = this.unloadListener_ = function() {
        Yl(this, "resize", e13), Yl(this, "unload", t4), t4 = null;
      };
      Kl(this.el_.contentWindow, "unload", t4), Kl(this.el_.contentWindow, "resize", e13);
    }, this.one("load", this.loadListener_));
  }
  createEl() {
    return super.createEl("iframe", {
      className: "vjs-resize-manager",
      tabIndex: -1,
      title: this.localize("No content")
    }, {
      "aria-hidden": "true"
    });
  }
  resizeHandler() {
    this.player_ && this.player_.trigger && this.player_.trigger("playerresize");
  }
  dispose() {
    this.debouncedHandler_ && this.debouncedHandler_.cancel(), this.resizeObserver_ && (this.player_.el() && this.resizeObserver_.unobserve(this.player_.el()), this.resizeObserver_.disconnect()), this.loadListener_ && this.off("load", this.loadListener_), this.el_ && this.el_.contentWindow && this.unloadListener_ && this.unloadListener_.call(this.el_.contentWindow), this.ResizeObserver = null, this.resizeObserver = null, this.debouncedHandler_ = null, this.loadListener_ = null, super.dispose();
  }
};
Ch.registerComponent("ResizeManager", Sc);
var Ec = {
  trackingThreshold: 20,
  liveTolerance: 15
};
var wc = class extends Ch {
  constructor(e12, t3) {
    super(e12, ko(Ec, t3, {
      createEl: false
    })), this.trackLiveHandler_ = () => this.trackLive_(), this.handlePlay_ = (e13) => this.handlePlay(e13), this.handleFirstTimeupdate_ = (e13) => this.handleFirstTimeupdate(e13), this.handleSeeked_ = (e13) => this.handleSeeked(e13), this.seekToLiveEdge_ = (e13) => this.seekToLiveEdge(e13), this.reset_(), this.on(this.player_, "durationchange", (e13) => this.handleDurationchange(e13)), this.on(this.player_, "canplay", () => this.toggleTracking());
  }
  trackLive_() {
    const e12 = this.player_.seekable();
    if (!e12 || !e12.length) return;
    const t3 = Number(g3.performance.now().toFixed(4)), i4 = -1 === this.lastTime_ ? 0 : (t3 - this.lastTime_) / 1e3;
    this.lastTime_ = t3, this.pastSeekEnd_ = this.pastSeekEnd() + i4;
    const s6 = this.liveCurrentTime(), n6 = this.player_.currentTime();
    let r3 = this.player_.paused() || this.seekedBehindLive_ || Math.abs(s6 - n6) > this.options_.liveTolerance;
    this.timeupdateSeen_ && s6 !== 1 / 0 || (r3 = false), r3 !== this.behindLiveEdge_ && (this.behindLiveEdge_ = r3, this.trigger("liveedgechange"));
  }
  handleDurationchange() {
    this.toggleTracking();
  }
  toggleTracking() {
    this.player_.duration() === 1 / 0 && this.liveWindow() >= this.options_.trackingThreshold ? (this.player_.options_.liveui && this.player_.addClass("vjs-liveui"), this.startTracking()) : (this.player_.removeClass("vjs-liveui"), this.stopTracking());
  }
  startTracking() {
    this.isTracking() || (this.timeupdateSeen_ || (this.timeupdateSeen_ = this.player_.hasStarted()), this.trackingInterval_ = this.setInterval(this.trackLiveHandler_, th), this.trackLive_(), this.on(this.player_, ["play", "pause"], this.trackLiveHandler_), this.timeupdateSeen_ ? this.on(this.player_, "seeked", this.handleSeeked_) : (this.one(this.player_, "play", this.handlePlay_), this.one(this.player_, "timeupdate", this.handleFirstTimeupdate_)));
  }
  handleFirstTimeupdate() {
    this.timeupdateSeen_ = true, this.on(this.player_, "seeked", this.handleSeeked_);
  }
  handleSeeked() {
    const e12 = Math.abs(this.liveCurrentTime() - this.player_.currentTime());
    this.seekedBehindLive_ = this.nextSeekedFromUser_ && e12 > 2, this.nextSeekedFromUser_ = false, this.trackLive_();
  }
  handlePlay() {
    this.one(this.player_, "timeupdate", this.seekToLiveEdge_);
  }
  reset_() {
    this.lastTime_ = -1, this.pastSeekEnd_ = 0, this.lastSeekEnd_ = -1, this.behindLiveEdge_ = true, this.timeupdateSeen_ = false, this.seekedBehindLive_ = false, this.nextSeekedFromUser_ = false, this.clearInterval(this.trackingInterval_), this.trackingInterval_ = null, this.off(this.player_, ["play", "pause"], this.trackLiveHandler_), this.off(this.player_, "seeked", this.handleSeeked_), this.off(this.player_, "play", this.handlePlay_), this.off(this.player_, "timeupdate", this.handleFirstTimeupdate_), this.off(this.player_, "timeupdate", this.seekToLiveEdge_);
  }
  nextSeekedFromUser() {
    this.nextSeekedFromUser_ = true;
  }
  stopTracking() {
    this.isTracking() && (this.reset_(), this.trigger("liveedgechange"));
  }
  seekableEnd() {
    const e12 = this.player_.seekable(), t3 = [];
    let i4 = e12 ? e12.length : 0;
    for (; i4--; ) t3.push(e12.end(i4));
    return t3.length ? t3.sort()[t3.length - 1] : 1 / 0;
  }
  seekableStart() {
    const e12 = this.player_.seekable(), t3 = [];
    let i4 = e12 ? e12.length : 0;
    for (; i4--; ) t3.push(e12.start(i4));
    return t3.length ? t3.sort()[0] : 0;
  }
  liveWindow() {
    const e12 = this.liveCurrentTime();
    return e12 === 1 / 0 ? 0 : e12 - this.seekableStart();
  }
  isLive() {
    return this.isTracking();
  }
  atLiveEdge() {
    return !this.behindLiveEdge();
  }
  liveCurrentTime() {
    return this.pastSeekEnd() + this.seekableEnd();
  }
  pastSeekEnd() {
    const e12 = this.seekableEnd();
    return -1 !== this.lastSeekEnd_ && e12 !== this.lastSeekEnd_ && (this.pastSeekEnd_ = 0), this.lastSeekEnd_ = e12, this.pastSeekEnd_;
  }
  behindLiveEdge() {
    return this.behindLiveEdge_;
  }
  isTracking() {
    return "number" == typeof this.trackingInterval_;
  }
  seekToLiveEdge() {
    this.seekedBehindLive_ = false, this.atLiveEdge() || (this.nextSeekedFromUser_ = false, this.player_.currentTime(this.liveCurrentTime()));
  }
  dispose() {
    this.stopTracking(), super.dispose();
  }
};
Ch.registerComponent("LiveTracker", wc);
var Cc = class extends Ch {
  constructor(e12, t3) {
    super(e12, t3), this.on("statechanged", (e13) => this.updateDom_()), this.updateDom_();
  }
  createEl() {
    return this.els = {
      title: rl("div", {
        className: "vjs-title-bar-title",
        id: `vjs-title-bar-title-${Hl()}`
      }),
      description: rl("div", {
        className: "vjs-title-bar-description",
        id: `vjs-title-bar-description-${Hl()}`
      })
    }, rl("div", {
      className: "vjs-title-bar"
    }, {}, xo(this.els));
  }
  updateDom_() {
    const e12 = this.player_.tech_, t3 = e12 && e12.el_, i4 = {
      title: "aria-labelledby",
      description: "aria-describedby"
    };
    ["title", "description"].forEach((e13) => {
      const s6 = this.state[e13], n6 = this.els[e13], r3 = i4[e13];
      El(n6), s6 && al(n6, s6), t3 && (t3.removeAttribute(r3), s6 && t3.setAttribute(r3, n6.id));
    }), this.state.title || this.state.description ? this.show() : this.hide();
  }
  update(e12) {
    this.setState(e12);
  }
  dispose() {
    const e12 = this.player_.tech_, t3 = e12 && e12.el_;
    t3 && (t3.removeAttribute("aria-labelledby"), t3.removeAttribute("aria-describedby")), super.dispose(), this.els = null;
  }
};
Ch.registerComponent("TitleBar", Cc);
var kc = (e12) => {
  const t3 = e12.el();
  if (t3.hasAttribute("src")) return e12.triggerSourceset(t3.src), true;
  const i4 = e12.$$("source"), s6 = [];
  let n6 = "";
  if (!i4.length) return false;
  for (let r3 = 0; r3 < i4.length; r3++) {
    const e13 = i4[r3].src;
    e13 && -1 === s6.indexOf(e13) && s6.push(e13);
  }
  return !!s6.length && (1 === s6.length && (n6 = s6[0]), e12.triggerSourceset(n6), true);
};
var xc = Object.defineProperty({}, "innerHTML", {
  get() {
    return this.cloneNode(true).innerHTML;
  },
  set(e12) {
    const t3 = ge.createElement(this.nodeName.toLowerCase());
    t3.innerHTML = e12;
    const i4 = ge.createDocumentFragment();
    for (; t3.childNodes.length; ) i4.appendChild(t3.childNodes[0]);
    return this.innerText = "", g3.Element.prototype.appendChild.call(this, i4), this.innerHTML;
  }
});
var Ic = (e12, t3) => {
  let i4 = {};
  for (let s6 = 0; s6 < e12.length && (i4 = Object.getOwnPropertyDescriptor(e12[s6], t3), !(i4 && i4.set && i4.get)); s6++) ;
  return i4.enumerable = true, i4.configurable = true, i4;
};
var Ac = (e12) => Ic([e12.el(), g3.HTMLMediaElement.prototype, g3.Element.prototype, xc], "innerHTML");
var Dc = function(e12) {
  const t3 = e12.el();
  if (t3.resetSourceWatch_) return;
  const i4 = {}, s6 = Ac(e12), n6 = (i5) => (...s7) => {
    const n7 = i5.apply(t3, s7);
    return kc(e12), n7;
  };
  ["append", "appendChild", "insertAdjacentHTML"].forEach((e13) => {
    t3[e13] && (i4[e13] = t3[e13], t3[e13] = n6(i4[e13]));
  }), Object.defineProperty(t3, "innerHTML", ko(s6, {
    set: n6(s6.set)
  })), t3.resetSourceWatch_ = () => {
    t3.resetSourceWatch_ = null, Object.keys(i4).forEach((e13) => {
      t3[e13] = i4[e13];
    }), Object.defineProperty(t3, "innerHTML", s6);
  }, e12.one("sourceset", t3.resetSourceWatch_);
};
var Pc = Object.defineProperty({}, "src", {
  get() {
    return this.hasAttribute("src") ? nd(g3.Element.prototype.getAttribute.call(this, "src")) : "";
  },
  set(e12) {
    return g3.Element.prototype.setAttribute.call(this, "src", e12), e12;
  }
});
var Lc = (e12) => Ic([e12.el(), g3.HTMLMediaElement.prototype, Pc], "src");
var Oc = function(e12) {
  if (!e12.featuresSourceset) return;
  const t3 = e12.el();
  if (t3.resetSourceset_) return;
  const i4 = Lc(e12), s6 = t3.setAttribute, n6 = t3.load;
  Object.defineProperty(t3, "src", ko(i4, {
    set: (s7) => {
      const n7 = i4.set.call(t3, s7);
      return e12.triggerSourceset(t3.src), n7;
    }
  })), t3.setAttribute = (i5, n7) => {
    const r3 = s6.call(t3, i5, n7);
    return /src/i.test(i5) && e12.triggerSourceset(t3.src), r3;
  }, t3.load = () => {
    const i5 = n6.call(t3);
    return kc(e12) || (e12.triggerSourceset(""), Dc(e12)), i5;
  }, t3.currentSrc ? e12.triggerSourceset(t3.currentSrc) : kc(e12) || Dc(e12), t3.resetSourceset_ = () => {
    t3.resetSourceset_ = null, t3.load = n6, t3.setAttribute = s6, Object.defineProperty(t3, "src", i4), t3.resetSourceWatch_ && t3.resetSourceWatch_();
  };
};
var Nc = class _Nc extends _d {
  constructor(e12, t3) {
    super(e12, t3);
    const i4 = e12.source;
    let s6 = false;
    if (this.featuresVideoFrameCallback = this.featuresVideoFrameCallback && "VIDEO" === this.el_.tagName, i4 && (this.el_.currentSrc !== i4.src || e12.tag && 3 === e12.tag.initNetworkState_) ? this.setSource(i4) : this.handleLateInit_(this.el_), e12.enableSourceset && this.setupSourcesetHandling_(), this.isScrubbing_ = false, this.el_.hasChildNodes()) {
      const e13 = this.el_.childNodes;
      let t4 = e13.length;
      const i5 = [];
      for (; t4--; ) {
        const n6 = e13[t4];
        "track" === n6.nodeName.toLowerCase() && (this.featuresNativeTextTracks ? (this.remoteTextTrackEls().addTrackElement_(n6), this.remoteTextTracks().addTrack(n6.track), this.textTracks().addTrack(n6.track), s6 || this.el_.hasAttribute("crossorigin") || !ad(n6.src) || (s6 = true)) : i5.push(n6));
      }
      for (let s7 = 0; s7 < i5.length; s7++) this.el_.removeChild(i5[s7]);
    }
    this.proxyNativeTracks_(), this.featuresNativeTextTracks && s6 && _o.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."), this.restoreMetadataTracksInIOSNativePlayer_(), (Xo || Vo) && true === e12.nativeControlsForTouch && this.setControls(true), this.proxyWebkitFullscreen_(), this.triggerReady();
  }
  dispose() {
    this.el_ && this.el_.resetSourceset_ && this.el_.resetSourceset_(), _Nc.disposeMediaElement(this.el_), this.options_ = null, super.dispose();
  }
  setupSourcesetHandling_() {
    Oc(this);
  }
  restoreMetadataTracksInIOSNativePlayer_() {
    const e12 = this.textTracks();
    let t3;
    const i4 = () => {
      t3 = [];
      for (let i5 = 0; i5 < e12.length; i5++) {
        const s7 = e12[i5];
        "metadata" === s7.kind && t3.push({
          track: s7,
          storedMode: s7.mode
        });
      }
    };
    i4(), e12.addEventListener("change", i4), this.on("dispose", () => e12.removeEventListener("change", i4));
    const s6 = () => {
      for (let e13 = 0; e13 < t3.length; e13++) {
        const i5 = t3[e13];
        "disabled" === i5.track.mode && i5.track.mode !== i5.storedMode && (i5.track.mode = i5.storedMode);
      }
      e12.removeEventListener("change", s6);
    };
    this.on("webkitbeginfullscreen", () => {
      e12.removeEventListener("change", i4), e12.removeEventListener("change", s6), e12.addEventListener("change", s6);
    }), this.on("webkitendfullscreen", () => {
      e12.removeEventListener("change", i4), e12.addEventListener("change", i4), e12.removeEventListener("change", s6);
    });
  }
  overrideNative_(e12, t3) {
    if (t3 !== this[`featuresNative${e12}Tracks`]) return;
    const i4 = e12.toLowerCase();
    this[`${i4}TracksListeners_`] && Object.keys(this[`${i4}TracksListeners_`]).forEach((e13) => {
      this.el()[`${i4}Tracks`].removeEventListener(e13, this[`${i4}TracksListeners_`][e13]);
    }), this[`featuresNative${e12}Tracks`] = !t3, this[`${i4}TracksListeners_`] = null, this.proxyNativeTracksForType_(i4);
  }
  overrideNativeAudioTracks(e12) {
    this.overrideNative_("Audio", e12);
  }
  overrideNativeVideoTracks(e12) {
    this.overrideNative_("Video", e12);
  }
  proxyNativeTracksForType_(e12) {
    const t3 = md[e12], i4 = this.el()[t3.getterName], s6 = this[t3.getterName]();
    if (!this[`featuresNative${t3.capitalName}Tracks`] || !i4 || !i4.addEventListener) return;
    const n6 = {
      change: (t4) => {
        const i5 = {
          type: "change",
          target: s6,
          currentTarget: s6,
          srcElement: s6
        };
        s6.trigger(i5), "text" === e12 && this[gd.remoteText.getterName]().trigger(i5);
      },
      addtrack(e13) {
        s6.addTrack(e13.track);
      },
      removetrack(e13) {
        s6.removeTrack(e13.track);
      }
    }, r3 = function() {
      const e13 = [];
      for (let t4 = 0; t4 < s6.length; t4++) {
        let n7 = false;
        for (let e14 = 0; e14 < i4.length; e14++) if (i4[e14] === s6[t4]) {
          n7 = true;
          break;
        }
        n7 || e13.push(s6[t4]);
      }
      for (; e13.length; ) s6.removeTrack(e13.shift());
    };
    this[t3.getterName + "Listeners_"] = n6, Object.keys(n6).forEach((e13) => {
      const t4 = n6[e13];
      i4.addEventListener(e13, t4), this.on("dispose", (s7) => i4.removeEventListener(e13, t4));
    }), this.on("loadstart", r3), this.on("dispose", (e13) => this.off("loadstart", r3));
  }
  proxyNativeTracks_() {
    md.names.forEach((e12) => {
      this.proxyNativeTracksForType_(e12);
    });
  }
  createEl() {
    let e12 = this.options_.tag;
    if (!e12 || !this.options_.playerElIngest && !this.movingMediaElementInDOM) {
      if (e12) {
        const t4 = e12.cloneNode(true);
        e12.parentNode && e12.parentNode.insertBefore(t4, e12), _Nc.disposeMediaElement(e12), e12 = t4;
      } else {
        e12 = ge.createElement("video");
        const t4 = ko({}, this.options_.tag && pl(this.options_.tag));
        Xo && true === this.options_.nativeControlsForTouch || delete t4.controls, cl(e12, Object.assign(t4, {
          id: this.options_.techId,
          class: "vjs-tech"
        }));
      }
      e12.playerId = this.options_.playerId;
    }
    void 0 !== this.options_.preload && gl(e12, "preload", this.options_.preload), void 0 !== this.options_.disablePictureInPicture && (e12.disablePictureInPicture = this.options_.disablePictureInPicture);
    const t3 = ["loop", "muted", "playsinline", "autoplay"];
    for (let i4 = 0; i4 < t3.length; i4++) {
      const s6 = t3[i4], n6 = this.options_[s6];
      void 0 !== n6 && (n6 ? gl(e12, s6, s6) : fl(e12, s6), e12[s6] = n6);
    }
    return e12;
  }
  handleLateInit_(e12) {
    if (0 === e12.networkState || 3 === e12.networkState) return;
    if (0 === e12.readyState) {
      let e13 = false;
      const t4 = function() {
        e13 = true;
      };
      this.on("loadstart", t4);
      const i4 = function() {
        e13 || this.trigger("loadstart");
      };
      return this.on("loadedmetadata", i4), void this.ready(function() {
        this.off("loadstart", t4), this.off("loadedmetadata", i4), e13 || this.trigger("loadstart");
      });
    }
    const t3 = ["loadstart"];
    t3.push("loadedmetadata"), e12.readyState >= 2 && t3.push("loadeddata"), e12.readyState >= 3 && t3.push("canplay"), e12.readyState >= 4 && t3.push("canplaythrough"), this.ready(function() {
      t3.forEach(function(e13) {
        this.trigger(e13);
      }, this);
    });
  }
  setScrubbing(e12) {
    this.isScrubbing_ = e12;
  }
  scrubbing() {
    return this.isScrubbing_;
  }
  setCurrentTime(e12) {
    try {
      this.isScrubbing_ && this.el_.fastSeek && Qo ? this.el_.fastSeek(e12) : this.el_.currentTime = e12;
    } catch (l_) {
      _o(l_, "Video is not ready. (Video.js)");
    }
  }
  duration() {
    if (this.el_.duration === 1 / 0 && Oo && Uo && 0 === this.el_.currentTime) {
      const e12 = () => {
        this.el_.currentTime > 0 && (this.el_.duration === 1 / 0 && this.trigger("durationchange"), this.off("timeupdate", e12));
      };
      return this.on("timeupdate", e12), NaN;
    }
    return this.el_.duration || NaN;
  }
  width() {
    return this.el_.offsetWidth;
  }
  height() {
    return this.el_.offsetHeight;
  }
  proxyWebkitFullscreen_() {
    if (!("webkitDisplayingFullscreen" in this.el_)) return;
    const e12 = function() {
      this.trigger("fullscreenchange", {
        isFullscreen: false
      }), this.el_.controls && !this.options_.nativeControlsForTouch && this.controls() && (this.el_.controls = false);
    }, t3 = function() {
      "webkitPresentationMode" in this.el_ && "picture-in-picture" !== this.el_.webkitPresentationMode && (this.one("webkitendfullscreen", e12), this.trigger("fullscreenchange", {
        isFullscreen: true,
        nativeIOSFullscreen: true
      }));
    };
    this.on("webkitbeginfullscreen", t3), this.on("dispose", () => {
      this.off("webkitbeginfullscreen", t3), this.off("webkitendfullscreen", e12);
    });
  }
  supportsFullScreen() {
    return "function" == typeof this.el_.webkitEnterFullScreen;
  }
  enterFullScreen() {
    const e12 = this.el_;
    if (e12.paused && e12.networkState <= e12.HAVE_METADATA) Fh(this.el_.play()), this.setTimeout(function() {
      e12.pause();
      try {
        e12.webkitEnterFullScreen();
      } catch (l_) {
        this.trigger("fullscreenerror", l_);
      }
    }, 0);
    else try {
      e12.webkitEnterFullScreen();
    } catch (l_) {
      this.trigger("fullscreenerror", l_);
    }
  }
  exitFullScreen() {
    this.el_.webkitDisplayingFullscreen ? this.el_.webkitExitFullScreen() : this.trigger("fullscreenerror", new Error("The video is not fullscreen"));
  }
  requestPictureInPicture() {
    return this.el_.requestPictureInPicture();
  }
  requestVideoFrameCallback(e12) {
    return this.featuresVideoFrameCallback && !this.el_.webkitKeys ? this.el_.requestVideoFrameCallback(e12) : super.requestVideoFrameCallback(e12);
  }
  cancelVideoFrameCallback(e12) {
    this.featuresVideoFrameCallback && !this.el_.webkitKeys ? this.el_.cancelVideoFrameCallback(e12) : super.cancelVideoFrameCallback(e12);
  }
  src(e12) {
    if (void 0 === e12) return this.el_.src;
    this.setSrc(e12);
  }
  reset() {
    _Nc.resetMediaElement(this.el_);
  }
  currentSrc() {
    return this.currentSource_ ? this.currentSource_.src : this.el_.currentSrc;
  }
  setControls(e12) {
    this.el_.controls = !!e12;
  }
  addTextTrack(e12, t3, i4) {
    return this.featuresNativeTextTracks ? this.el_.addTextTrack(e12, t3, i4) : super.addTextTrack(e12, t3, i4);
  }
  createRemoteTextTrack(e12) {
    if (!this.featuresNativeTextTracks) return super.createRemoteTextTrack(e12);
    const t3 = ge.createElement("track");
    return e12.kind && (t3.kind = e12.kind), e12.label && (t3.label = e12.label), (e12.language || e12.srclang) && (t3.srclang = e12.language || e12.srclang), e12.default && (t3.default = e12.default), e12.id && (t3.id = e12.id), e12.src && (t3.src = e12.src), t3;
  }
  addRemoteTextTrack(e12, t3) {
    const i4 = super.addRemoteTextTrack(e12, t3);
    return this.featuresNativeTextTracks && this.el().appendChild(i4), i4;
  }
  removeRemoteTextTrack(e12) {
    if (super.removeRemoteTextTrack(e12), this.featuresNativeTextTracks) {
      const t3 = this.$$("track");
      let i4 = t3.length;
      for (; i4--; ) e12 !== t3[i4] && e12 !== t3[i4].track || this.el().removeChild(t3[i4]);
    }
  }
  getVideoPlaybackQuality() {
    if ("function" == typeof this.el().getVideoPlaybackQuality) return this.el().getVideoPlaybackQuality();
    const e12 = {};
    return void 0 !== this.el().webkitDroppedFrameCount && void 0 !== this.el().webkitDecodedFrameCount && (e12.droppedVideoFrames = this.el().webkitDroppedFrameCount, e12.totalVideoFrames = this.el().webkitDecodedFrameCount), g3.performance && (e12.creationTime = g3.performance.now()), e12;
  }
};
Io(Nc, "TEST_VID", function() {
  if (!tl()) return;
  const e12 = ge.createElement("video"), t3 = ge.createElement("track");
  return t3.kind = "captions", t3.srclang = "en", t3.label = "English", e12.appendChild(t3), e12;
}), Nc.isSupported = function() {
  try {
    Nc.TEST_VID.volume = 0.5;
  } catch (l_) {
    return false;
  }
  return !(!Nc.TEST_VID || !Nc.TEST_VID.canPlayType);
}, Nc.canPlayType = function(e12) {
  return Nc.TEST_VID.canPlayType(e12);
}, Nc.canPlaySource = function(e12, t3) {
  return Nc.canPlayType(e12.type);
}, Nc.canControlVolume = function() {
  try {
    const e12 = Nc.TEST_VID.volume;
    Nc.TEST_VID.volume = e12 / 2 + 0.1;
    const t3 = e12 !== Nc.TEST_VID.volume;
    return t3 && Yo ? (g3.setTimeout(() => {
      Nc && Nc.prototype && (Nc.prototype.featuresVolumeControl = e12 !== Nc.TEST_VID.volume);
    }), false) : t3;
  } catch (l_) {
    return false;
  }
}, Nc.canMuteVolume = function() {
  try {
    const e12 = Nc.TEST_VID.muted;
    return Nc.TEST_VID.muted = !e12, Nc.TEST_VID.muted ? gl(Nc.TEST_VID, "muted", "muted") : fl(Nc.TEST_VID, "muted", "muted"), e12 !== Nc.TEST_VID.muted;
  } catch (l_) {
    return false;
  }
}, Nc.canControlPlaybackRate = function() {
  if (Oo && Uo && Fo < 58) return false;
  try {
    const e12 = Nc.TEST_VID.playbackRate;
    return Nc.TEST_VID.playbackRate = e12 / 2 + 0.1, e12 !== Nc.TEST_VID.playbackRate;
  } catch (l_) {
    return false;
  }
}, Nc.canOverrideAttributes = function() {
  try {
    const e12 = () => {
    };
    Object.defineProperty(ge.createElement("video"), "src", {
      get: e12,
      set: e12
    }), Object.defineProperty(ge.createElement("audio"), "src", {
      get: e12,
      set: e12
    }), Object.defineProperty(ge.createElement("video"), "innerHTML", {
      get: e12,
      set: e12
    }), Object.defineProperty(ge.createElement("audio"), "innerHTML", {
      get: e12,
      set: e12
    });
  } catch (l_) {
    return false;
  }
  return true;
}, Nc.supportsNativeTextTracks = function() {
  return Qo || Yo && Uo;
}, Nc.supportsNativeVideoTracks = function() {
  return !(!Nc.TEST_VID || !Nc.TEST_VID.videoTracks);
}, Nc.supportsNativeAudioTracks = function() {
  return !(!Nc.TEST_VID || !Nc.TEST_VID.audioTracks);
}, Nc.Events = ["loadstart", "suspend", "abort", "error", "emptied", "stalled", "loadedmetadata", "loadeddata", "canplay", "canplaythrough", "playing", "waiting", "seeking", "seeked", "ended", "durationchange", "timeupdate", "progress", "play", "pause", "ratechange", "resize", "volumechange"], [["featuresMuteControl", "canMuteVolume"], ["featuresPlaybackRate", "canControlPlaybackRate"], ["featuresSourceset", "canOverrideAttributes"], ["featuresNativeTextTracks", "supportsNativeTextTracks"], ["featuresNativeVideoTracks", "supportsNativeVideoTracks"], ["featuresNativeAudioTracks", "supportsNativeAudioTracks"]].forEach(function([e12, t3]) {
  Io(Nc.prototype, e12, () => Nc[t3](), true);
}), Nc.prototype.featuresVolumeControl = Nc.canControlVolume(), Nc.prototype.movingMediaElementInDOM = !Yo, Nc.prototype.featuresFullscreenResize = true, Nc.prototype.featuresProgressEvents = true, Nc.prototype.featuresTimeupdateEvents = true, Nc.prototype.featuresVideoFrameCallback = !(!Nc.TEST_VID || !Nc.TEST_VID.requestVideoFrameCallback), Nc.disposeMediaElement = function(e12) {
  if (e12) {
    for (e12.parentNode && e12.parentNode.removeChild(e12); e12.hasChildNodes(); ) e12.removeChild(e12.firstChild);
    e12.removeAttribute("src"), "function" == typeof e12.load && function() {
      try {
        e12.load();
      } catch (l_) {
      }
    }();
  }
}, Nc.resetMediaElement = function(e12) {
  if (!e12) return;
  const t3 = e12.querySelectorAll("source");
  let i4 = t3.length;
  for (; i4--; ) e12.removeChild(t3[i4]);
  e12.removeAttribute("src"), "function" == typeof e12.load && function() {
    try {
      e12.load();
    } catch (l_) {
    }
  }();
}, ["muted", "defaultMuted", "autoplay", "controls", "loop", "playsinline"].forEach(function(e12) {
  Nc.prototype[e12] = function() {
    return this.el_[e12] || this.el_.hasAttribute(e12);
  };
}), ["muted", "defaultMuted", "autoplay", "loop", "playsinline"].forEach(function(e12) {
  Nc.prototype["set" + Sh(e12)] = function(t3) {
    this.el_[e12] = t3, t3 ? this.el_.setAttribute(e12, e12) : this.el_.removeAttribute(e12);
  };
}), ["paused", "currentTime", "buffered", "volume", "poster", "preload", "error", "seeking", "seekable", "ended", "playbackRate", "defaultPlaybackRate", "disablePictureInPicture", "played", "networkState", "readyState", "videoWidth", "videoHeight", "crossOrigin"].forEach(function(e12) {
  Nc.prototype[e12] = function() {
    return this.el_[e12];
  };
}), ["volume", "src", "poster", "preload", "playbackRate", "defaultPlaybackRate", "disablePictureInPicture", "crossOrigin"].forEach(function(e12) {
  Nc.prototype["set" + Sh(e12)] = function(t3) {
    this.el_[e12] = t3;
  };
}), ["pause", "load", "play"].forEach(function(e12) {
  Nc.prototype[e12] = function() {
    return this.el_[e12]();
  };
}), _d.withSourceHandlers(Nc), Nc.nativeSourceHandler = {}, Nc.nativeSourceHandler.canPlayType = function(e12) {
  try {
    return Nc.TEST_VID.canPlayType(e12);
  } catch (l_) {
    return "";
  }
}, Nc.nativeSourceHandler.canHandleSource = function(e12, t3) {
  if (e12.type) return Nc.nativeSourceHandler.canPlayType(e12.type);
  if (e12.src) {
    const t4 = rd(e12.src);
    return Nc.nativeSourceHandler.canPlayType(`video/${t4}`);
  }
  return "";
}, Nc.nativeSourceHandler.handleSource = function(e12, t3, i4) {
  t3.setSrc(e12.src);
}, Nc.nativeSourceHandler.dispose = function() {
}, Nc.registerSourceHandler(Nc.nativeSourceHandler), _d.registerTech("Html5", Nc);
var Rc = ["progress", "abort", "suspend", "emptied", "stalled", "loadedmetadata", "loadeddata", "timeupdate", "resize", "volumechange", "texttrackchange"];
var Mc = {
  canplay: "CanPlay",
  canplaythrough: "CanPlayThrough",
  playing: "Playing",
  seeked: "Seeked"
};
var Uc = ["tiny", "xsmall", "small", "medium", "large", "xlarge", "huge"];
var Bc = {};
Uc.forEach((e12) => {
  const t3 = "x" === e12.charAt(0) ? `x-${e12.substring(1)}` : e12;
  Bc[e12] = `vjs-layout-${t3}`;
});
var Fc = {
  tiny: 210,
  xsmall: 320,
  small: 425,
  medium: 768,
  large: 1440,
  xlarge: 2560,
  huge: 1 / 0
};
var qc = class _qc extends Ch {
  constructor(e12, t3, i4) {
    if (e12.id = e12.id || t3.id || `vjs_video_${Hl()}`, (t3 = Object.assign(_qc.getTagSettings(e12), t3)).initChildren = false, t3.createEl = false, t3.evented = false, t3.reportTouchActivity = false, !t3.language) {
      const i5 = e12.closest("[lang]");
      i5 && (t3.language = i5.getAttribute("lang"));
    }
    if (super(null, t3, i4), this.boundDocumentFullscreenChange_ = (e13) => this.documentFullscreenChange_(e13), this.boundFullWindowOnEscKey_ = (e13) => this.fullWindowOnEscKey(e13), this.boundUpdateStyleEl_ = (e13) => this.updateStyleEl_(e13), this.boundApplyInitTime_ = (e13) => this.applyInitTime_(e13), this.boundUpdateCurrentBreakpoint_ = (e13) => this.updateCurrentBreakpoint_(e13), this.boundHandleTechClick_ = (e13) => this.handleTechClick_(e13), this.boundHandleTechDoubleClick_ = (e13) => this.handleTechDoubleClick_(e13), this.boundHandleTechTouchStart_ = (e13) => this.handleTechTouchStart_(e13), this.boundHandleTechTouchMove_ = (e13) => this.handleTechTouchMove_(e13), this.boundHandleTechTouchEnd_ = (e13) => this.handleTechTouchEnd_(e13), this.boundHandleTechTap_ = (e13) => this.handleTechTap_(e13), this.isFullscreen_ = false, this.log = vo(this.id_), this.fsApi_ = uo, this.isPosterFromTech_ = false, this.queuedCallbacks_ = [], this.isReady_ = false, this.hasStarted_ = false, this.userActive_ = false, this.debugEnabled_ = false, this.audioOnlyMode_ = false, this.audioPosterMode_ = false, this.audioOnlyCache_ = {
      playerHeight: null,
      hiddenChildren: []
    }, !this.options_ || !this.options_.techOrder || !this.options_.techOrder.length) throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");
    if (this.tag = e12, this.tagAttributes = e12 && pl(e12), this.language(this.options_.language), t3.languages) {
      const e13 = {};
      Object.getOwnPropertyNames(t3.languages).forEach(function(i5) {
        e13[i5.toLowerCase()] = t3.languages[i5];
      }), this.languages_ = e13;
    } else this.languages_ = _qc.prototype.options_.languages;
    this.resetCache_(), this.poster_ = t3.poster || "", this.controls_ = !!t3.controls, e12.controls = false, e12.removeAttribute("controls"), this.changingSrc_ = false, this.playCallbacks_ = [], this.playTerminatedQueue_ = [], e12.hasAttribute("autoplay") ? this.autoplay(true) : this.autoplay(this.options_.autoplay), t3.plugins && Object.keys(t3.plugins).forEach((e13) => {
      if ("function" != typeof this[e13]) throw new Error(`plugin "${e13}" does not exist`);
    }), this.scrubbing_ = false, this.el_ = this.createEl(), _h(this, {
      eventBusKey: "el_"
    }), this.fsApi_.requestFullscreen && (Kl(ge, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_), this.on(this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_)), this.fluid_ && this.on(["playerreset", "resize"], this.boundUpdateStyleEl_);
    const s6 = ko(this.options_);
    if (t3.plugins && Object.keys(t3.plugins).forEach((e13) => {
      this[e13](t3.plugins[e13]);
    }), t3.debug && this.debug(true), this.options_.playerOptions = s6, this.middleware_ = [], this.playbackRates(t3.playbackRates), t3.experimentalSvgIcons) {
      const e13 = new g3.DOMParser().parseFromString(jd, "image/svg+xml");
      if (e13.querySelector("parsererror")) _o.warn("Failed to load SVG Icons. Falling back to Font Icons."), this.options_.experimentalSvgIcons = null;
      else {
        const t4 = e13.documentElement;
        t4.style.display = "none", this.el_.appendChild(t4), this.addClass("vjs-svg-icons-enabled");
      }
    }
    this.initChildren(), this.isAudio("audio" === e12.nodeName.toLowerCase()), this.controls() ? this.addClass("vjs-controls-enabled") : this.addClass("vjs-controls-disabled"), this.el_.setAttribute("role", "region"), this.isAudio() ? this.el_.setAttribute("aria-label", this.localize("Audio Player")) : this.el_.setAttribute("aria-label", this.localize("Video Player")), this.isAudio() && this.addClass("vjs-audio"), Xo && this.addClass("vjs-touch-enabled"), Yo || this.addClass("vjs-workinghover"), _qc.players[this.id_] = this;
    const n6 = no.split(".")[0];
    this.addClass(`vjs-v${n6}`), this.userActive(true), this.reportUserActivity(), this.one("play", (e13) => this.listenForUserActivity_(e13)), this.on("keydown", (e13) => this.handleKeyDown(e13)), this.on("languagechange", (e13) => this.handleLanguagechange(e13)), this.breakpoints(this.options_.breakpoints), this.responsive(this.options_.responsive), this.on("ready", () => {
      this.audioPosterMode(this.options_.audioPosterMode), this.audioOnlyMode(this.options_.audioOnlyMode);
    });
  }
  dispose() {
    this.trigger("dispose"), this.off("dispose"), Yl(ge, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_), Yl(ge, "keydown", this.boundFullWindowOnEscKey_), this.styleEl_ && this.styleEl_.parentNode && (this.styleEl_.parentNode.removeChild(this.styleEl_), this.styleEl_ = null), _qc.players[this.id_] = null, this.tag && this.tag.player && (this.tag.player = null), this.el_ && this.el_.player && (this.el_.player = null), this.tech_ && (this.tech_.dispose(), this.isPosterFromTech_ = false, this.poster_ = ""), this.playerElIngest_ && (this.playerElIngest_ = null), this.tag && (this.tag = null), Od(this), fd.names.forEach((e12) => {
      const t3 = this[fd[e12].getterName]();
      t3 && t3.off && t3.off();
    }), super.dispose({
      restoreEl: this.options_.restoreEl
    });
  }
  createEl() {
    let e12, t3 = this.tag, i4 = this.playerElIngest_ = t3.parentNode && t3.parentNode.hasAttribute && t3.parentNode.hasAttribute("data-vjs-player");
    const s6 = "video-js" === this.tag.tagName.toLowerCase();
    i4 ? e12 = this.el_ = t3.parentNode : s6 || (e12 = this.el_ = super.createEl("div"));
    const n6 = pl(t3);
    if (s6) {
      for (e12 = this.el_ = t3, t3 = this.tag = ge.createElement("video"); e12.children.length; ) t3.appendChild(e12.firstChild);
      ll(e12, "video-js") || hl(e12, "video-js"), e12.appendChild(t3), i4 = this.playerElIngest_ = e12, Object.keys(e12).forEach((i5) => {
        try {
          t3[i5] = e12[i5];
        } catch (l_) {
        }
      });
    }
    t3.setAttribute("tabindex", "-1"), n6.tabindex = "-1", Uo && $o && (t3.setAttribute("role", "application"), n6.role = "application"), t3.removeAttribute("width"), t3.removeAttribute("height"), "width" in n6 && delete n6.width, "height" in n6 && delete n6.height, Object.getOwnPropertyNames(n6).forEach(function(i5) {
      s6 && "class" === i5 || e12.setAttribute(i5, n6[i5]), s6 && t3.setAttribute(i5, n6[i5]);
    }), t3.playerId = t3.id, t3.id += "_html5_api", t3.className = "vjs-tech", t3.player = e12.player = this, this.addClass("vjs-paused");
    const r3 = ["IS_SMART_TV", "IS_TIZEN", "IS_WEBOS", "IS_ANDROID", "IS_IPAD", "IS_IPHONE"].filter((e13) => Jo[e13]).map((e13) => "vjs-device-" + e13.substring(3).toLowerCase().replace(/\_/g, "-"));
    if (this.addClass(...r3), true !== g3.VIDEOJS_NO_DYNAMIC_STYLE) {
      this.styleEl_ = Bl("vjs-styles-dimensions");
      const e13 = Il(".vjs-styles-defaults"), t4 = Il("head");
      t4.insertBefore(this.styleEl_, e13 ? e13.nextSibling : t4.firstChild);
    }
    this.fill_ = false, this.fluid_ = false, this.width(this.options_.width), this.height(this.options_.height), this.fill(this.options_.fill), this.fluid(this.options_.fluid), this.aspectRatio(this.options_.aspectRatio), this.crossOrigin(this.options_.crossOrigin || this.options_.crossorigin);
    const a6 = t3.getElementsByTagName("a");
    for (let o4 = 0; o4 < a6.length; o4++) {
      const e13 = a6.item(o4);
      hl(e13, "vjs-hidden"), e13.setAttribute("hidden", "hidden");
    }
    return t3.initNetworkState_ = t3.networkState, t3.parentNode && !i4 && t3.parentNode.insertBefore(e12, t3), ol(t3, e12), this.children_.unshift(t3), this.el_.setAttribute("lang", this.language_), this.el_.setAttribute("translate", "no"), this.el_ = e12, e12;
  }
  crossOrigin(e12) {
    if (void 0 === e12) return this.techGet_("crossOrigin");
    null === e12 || "anonymous" === e12 || "use-credentials" === e12 ? (this.techCall_("setCrossOrigin", e12), this.posterImage && this.posterImage.crossOrigin(e12)) : _o.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e12}"`);
  }
  width(e12) {
    return this.dimension("width", e12);
  }
  height(e12) {
    return this.dimension("height", e12);
  }
  dimension(e12, t3) {
    const i4 = e12 + "_";
    if (void 0 === t3) return this[i4] || 0;
    if ("" === t3 || "auto" === t3) return this[i4] = void 0, void this.updateStyleEl_();
    const s6 = parseFloat(t3);
    isNaN(s6) ? _o.error(`Improper value "${t3}" supplied for for ${e12}`) : (this[i4] = s6, this.updateStyleEl_());
  }
  fluid(e12) {
    if (void 0 === e12) return !!this.fluid_;
    this.fluid_ = !!e12, hh(this) && this.off(["playerreset", "resize"], this.boundUpdateStyleEl_), e12 ? (this.addClass("vjs-fluid"), this.fill(false), dh(this, () => {
      this.on(["playerreset", "resize"], this.boundUpdateStyleEl_);
    })) : this.removeClass("vjs-fluid"), this.updateStyleEl_();
  }
  fill(e12) {
    if (void 0 === e12) return !!this.fill_;
    this.fill_ = !!e12, e12 ? (this.addClass("vjs-fill"), this.fluid(false)) : this.removeClass("vjs-fill");
  }
  aspectRatio(e12) {
    if (void 0 === e12) return this.aspectRatio_;
    if (!/^\d+\:\d+$/.test(e12)) throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
    this.aspectRatio_ = e12, this.fluid(true), this.updateStyleEl_();
  }
  updateStyleEl_() {
    if (true === g3.VIDEOJS_NO_DYNAMIC_STYLE) {
      const e13 = "number" == typeof this.width_ ? this.width_ : this.options_.width, t4 = "number" == typeof this.height_ ? this.height_ : this.options_.height, i5 = this.tech_ && this.tech_.el();
      return void (i5 && (e13 >= 0 && (i5.width = e13), t4 >= 0 && (i5.height = t4)));
    }
    let e12, t3, i4, s6;
    i4 = void 0 !== this.aspectRatio_ && "auto" !== this.aspectRatio_ ? this.aspectRatio_ : this.videoWidth() > 0 ? this.videoWidth() + ":" + this.videoHeight() : "16:9";
    const n6 = i4.split(":"), r3 = n6[1] / n6[0];
    e12 = void 0 !== this.width_ ? this.width_ : void 0 !== this.height_ ? this.height_ / r3 : this.videoWidth() || 300, t3 = void 0 !== this.height_ ? this.height_ : e12 * r3, s6 = /^[^a-zA-Z]/.test(this.id()) ? "dimensions-" + this.id() : this.id() + "-dimensions", this.addClass(s6), Fl(this.styleEl_, `
      .${s6} {
        width: ${e12}px;
        height: ${t3}px;
      }

      .${s6}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${100 * r3}%;
      }
    `);
  }
  loadTech_(e12, t3) {
    this.tech_ && this.unloadTech_();
    const i4 = Sh(e12), s6 = e12.charAt(0).toLowerCase() + e12.slice(1);
    "Html5" !== i4 && this.tag && (_d.getTech("Html5").disposeMediaElement(this.tag), this.tag.player = null, this.tag = null), this.techName_ = i4, this.isReady_ = false;
    let n6 = this.autoplay();
    ("string" == typeof this.autoplay() || true === this.autoplay() && this.options_.normalizeAutoplay) && (n6 = false);
    const r3 = {
      source: t3,
      autoplay: n6,
      nativeControlsForTouch: this.options_.nativeControlsForTouch,
      playerId: this.id(),
      techId: `${this.id()}_${s6}_api`,
      playsinline: this.options_.playsinline,
      preload: this.options_.preload,
      loop: this.options_.loop,
      disablePictureInPicture: this.options_.disablePictureInPicture,
      muted: this.options_.muted,
      poster: this.poster(),
      language: this.language(),
      playerElIngest: this.playerElIngest_ || false,
      "vtt.js": this.options_["vtt.js"],
      canOverridePoster: !!this.options_.techCanOverridePoster,
      enableSourceset: this.options_.enableSourceset
    };
    fd.names.forEach((e13) => {
      const t4 = fd[e13];
      r3[t4.getterName] = this[t4.privateName];
    }), Object.assign(r3, this.options_[i4]), Object.assign(r3, this.options_[s6]), Object.assign(r3, this.options_[e12.toLowerCase()]), this.tag && (r3.tag = this.tag), t3 && t3.src === this.cache_.src && this.cache_.currentTime > 0 && (r3.startTime = this.cache_.currentTime);
    const a6 = _d.getTech(e12);
    if (!a6) throw new Error(`No Tech named '${i4}' exists! '${i4}' should be registered using videojs.registerTech()'`);
    this.tech_ = new a6(r3), this.tech_.ready(ih(this, this.handleTechReady_), true), jh.jsonToTextTracks(this.textTracksJson_ || [], this.tech_), Rc.forEach((e13) => {
      this.on(this.tech_, e13, (t4) => this[`handleTech${Sh(e13)}_`](t4));
    }), Object.keys(Mc).forEach((e13) => {
      this.on(this.tech_, e13, (t4) => {
        0 === this.tech_.playbackRate() && this.tech_.seeking() ? this.queuedCallbacks_.push({
          callback: this[`handleTech${Mc[e13]}_`].bind(this),
          event: t4
        }) : this[`handleTech${Mc[e13]}_`](t4);
      });
    }), this.on(this.tech_, "loadstart", (e13) => this.handleTechLoadStart_(e13)), this.on(this.tech_, "sourceset", (e13) => this.handleTechSourceset_(e13)), this.on(this.tech_, "waiting", (e13) => this.handleTechWaiting_(e13)), this.on(this.tech_, "ended", (e13) => this.handleTechEnded_(e13)), this.on(this.tech_, "seeking", (e13) => this.handleTechSeeking_(e13)), this.on(this.tech_, "play", (e13) => this.handleTechPlay_(e13)), this.on(this.tech_, "pause", (e13) => this.handleTechPause_(e13)), this.on(this.tech_, "durationchange", (e13) => this.handleTechDurationChange_(e13)), this.on(this.tech_, "fullscreenchange", (e13, t4) => this.handleTechFullscreenChange_(e13, t4)), this.on(this.tech_, "fullscreenerror", (e13, t4) => this.handleTechFullscreenError_(e13, t4)), this.on(this.tech_, "enterpictureinpicture", (e13) => this.handleTechEnterPictureInPicture_(e13)), this.on(this.tech_, "leavepictureinpicture", (e13) => this.handleTechLeavePictureInPicture_(e13)), this.on(this.tech_, "error", (e13) => this.handleTechError_(e13)), this.on(this.tech_, "posterchange", (e13) => this.handleTechPosterChange_(e13)), this.on(this.tech_, "textdata", (e13) => this.handleTechTextData_(e13)), this.on(this.tech_, "ratechange", (e13) => this.handleTechRateChange_(e13)), this.on(this.tech_, "loadedmetadata", this.boundUpdateStyleEl_), this.usingNativeControls(this.techGet_("controls")), this.controls() && !this.usingNativeControls() && this.addTechControlsListeners_(), this.tech_.el().parentNode === this.el() || "Html5" === i4 && this.tag || ol(this.tech_.el(), this.el()), this.tag && (this.tag.player = null, this.tag = null);
  }
  unloadTech_() {
    fd.names.forEach((e12) => {
      const t3 = fd[e12];
      this[t3.privateName] = this[t3.getterName]();
    }), this.textTracksJson_ = jh.textTracksToJson(this.tech_), this.isReady_ = false, this.tech_.dispose(), this.tech_ = false, this.isPosterFromTech_ && (this.poster_ = "", this.trigger("posterchange")), this.isPosterFromTech_ = false;
  }
  tech(e12) {
    return void 0 === e12 && _o.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"), this.tech_;
  }
  version() {
    return {
      "video.js": no
    };
  }
  addTechControlsListeners_() {
    this.removeTechControlsListeners_(), this.on(this.tech_, "click", this.boundHandleTechClick_), this.on(this.tech_, "dblclick", this.boundHandleTechDoubleClick_), this.on(this.tech_, "touchstart", this.boundHandleTechTouchStart_), this.on(this.tech_, "touchmove", this.boundHandleTechTouchMove_), this.on(this.tech_, "touchend", this.boundHandleTechTouchEnd_), this.on(this.tech_, "tap", this.boundHandleTechTap_);
  }
  removeTechControlsListeners_() {
    this.off(this.tech_, "tap", this.boundHandleTechTap_), this.off(this.tech_, "touchstart", this.boundHandleTechTouchStart_), this.off(this.tech_, "touchmove", this.boundHandleTechTouchMove_), this.off(this.tech_, "touchend", this.boundHandleTechTouchEnd_), this.off(this.tech_, "click", this.boundHandleTechClick_), this.off(this.tech_, "dblclick", this.boundHandleTechDoubleClick_);
  }
  handleTechReady_() {
    this.triggerReady(), this.cache_.volume && this.techCall_("setVolume", this.cache_.volume), this.handleTechPosterChange_(), this.handleTechDurationChange_();
  }
  handleTechLoadStart_() {
    this.removeClass("vjs-ended", "vjs-seeking"), this.error(null), this.handleTechDurationChange_(), this.paused() ? (this.hasStarted(false), this.trigger("loadstart")) : this.trigger("loadstart"), this.manualAutoplay_(true === this.autoplay() && this.options_.normalizeAutoplay ? "play" : this.autoplay());
  }
  manualAutoplay_(e12) {
    if (!this.tech_ || "string" != typeof e12) return;
    const t3 = () => {
      const e13 = this.muted();
      this.muted(true);
      const t4 = () => {
        this.muted(e13);
      };
      this.playTerminatedQueue_.push(t4);
      const i5 = this.play();
      if (Bh(i5)) return i5.catch((e14) => {
        throw t4(), new Error(`Rejection at manualAutoplay. Restoring muted value. ${e14 || ""}`);
      });
    };
    let i4;
    return "any" !== e12 || this.muted() ? i4 = "muted" !== e12 || this.muted() ? this.play() : t3() : (i4 = this.play(), Bh(i4) && (i4 = i4.catch(t3))), Bh(i4) ? i4.then(() => {
      this.trigger({
        type: "autoplay-success",
        autoplay: e12
      });
    }).catch(() => {
      this.trigger({
        type: "autoplay-failure",
        autoplay: e12
      });
    }) : void 0;
  }
  updateSourceCaches_(e12 = "") {
    let t3 = e12, i4 = "";
    "string" != typeof t3 && (t3 = e12.src, i4 = e12.type), this.cache_.source = this.cache_.source || {}, this.cache_.sources = this.cache_.sources || [], t3 && !i4 && (i4 = Bd(this, t3)), this.cache_.source = ko({}, e12, {
      src: t3,
      type: i4
    });
    const s6 = this.cache_.sources.filter((e13) => e13.src && e13.src === t3), n6 = [], r3 = this.$$("source"), a6 = [];
    for (let o4 = 0; o4 < r3.length; o4++) {
      const e13 = pl(r3[o4]);
      n6.push(e13), e13.src && e13.src === t3 && a6.push(e13.src);
    }
    a6.length && !s6.length ? this.cache_.sources = n6 : s6.length || (this.cache_.sources = [this.cache_.source]), this.cache_.src = t3;
  }
  handleTechSourceset_(e12) {
    if (!this.changingSrc_) {
      let t3 = (e13) => this.updateSourceCaches_(e13);
      const i4 = this.currentSource().src, s6 = e12.src;
      i4 && !/^blob:/.test(i4) && /^blob:/.test(s6) && (!this.lastSource_ || this.lastSource_.tech !== s6 && this.lastSource_.player !== i4) && (t3 = () => {
      }), t3(s6), e12.src || this.tech_.any(["sourceset", "loadstart"], (e13) => {
        if ("sourceset" === e13.type) return;
        const t4 = this.techGet_("currentSrc");
        this.lastSource_.tech = t4, this.updateSourceCaches_(t4);
      });
    }
    this.lastSource_ = {
      player: this.currentSource().src,
      tech: e12.src
    }, this.trigger({
      src: e12.src,
      type: "sourceset"
    });
  }
  hasStarted(e12) {
    if (void 0 === e12) return this.hasStarted_;
    e12 !== this.hasStarted_ && (this.hasStarted_ = e12, this.hasStarted_ ? this.addClass("vjs-has-started") : this.removeClass("vjs-has-started"));
  }
  handleTechPlay_() {
    this.removeClass("vjs-ended", "vjs-paused"), this.addClass("vjs-playing"), this.hasStarted(true), this.trigger("play");
  }
  handleTechRateChange_() {
    this.tech_.playbackRate() > 0 && 0 === this.cache_.lastPlaybackRate && (this.queuedCallbacks_.forEach((e12) => e12.callback(e12.event)), this.queuedCallbacks_ = []), this.cache_.lastPlaybackRate = this.tech_.playbackRate(), this.trigger("ratechange");
  }
  handleTechWaiting_() {
    this.addClass("vjs-waiting"), this.trigger("waiting");
    const e12 = this.currentTime(), t3 = () => {
      e12 !== this.currentTime() && (this.removeClass("vjs-waiting"), this.off("timeupdate", t3));
    };
    this.on("timeupdate", t3);
  }
  handleTechCanPlay_() {
    this.removeClass("vjs-waiting"), this.trigger("canplay");
  }
  handleTechCanPlayThrough_() {
    this.removeClass("vjs-waiting"), this.trigger("canplaythrough");
  }
  handleTechPlaying_() {
    this.removeClass("vjs-waiting"), this.trigger("playing");
  }
  handleTechSeeking_() {
    this.addClass("vjs-seeking"), this.trigger("seeking");
  }
  handleTechSeeked_() {
    this.removeClass("vjs-seeking", "vjs-ended"), this.trigger("seeked");
  }
  handleTechPause_() {
    this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.trigger("pause");
  }
  handleTechEnded_() {
    this.addClass("vjs-ended"), this.removeClass("vjs-waiting"), this.options_.loop ? (this.currentTime(0), this.play()) : this.paused() || this.pause(), this.trigger("ended");
  }
  handleTechDurationChange_() {
    this.duration(this.techGet_("duration"));
  }
  handleTechClick_(e12) {
    this.controls_ && (void 0 !== this.options_ && void 0 !== this.options_.userActions && void 0 !== this.options_.userActions.click && false === this.options_.userActions.click || (void 0 !== this.options_ && void 0 !== this.options_.userActions && "function" == typeof this.options_.userActions.click ? this.options_.userActions.click.call(this, e12) : this.paused() ? Fh(this.play()) : this.pause()));
  }
  handleTechDoubleClick_(e12) {
    if (!this.controls_) return;
    Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"), (t3) => t3.contains(e12.target)) || void 0 !== this.options_ && void 0 !== this.options_.userActions && void 0 !== this.options_.userActions.doubleClick && false === this.options_.userActions.doubleClick || (void 0 !== this.options_ && void 0 !== this.options_.userActions && "function" == typeof this.options_.userActions.doubleClick ? this.options_.userActions.doubleClick.call(this, e12) : this.isFullscreen() ? this.exitFullscreen() : this.requestFullscreen());
  }
  handleTechTap_() {
    this.userActive(!this.userActive());
  }
  handleTechTouchStart_() {
    this.userWasActive = this.userActive();
  }
  handleTechTouchMove_() {
    this.userWasActive && this.reportUserActivity();
  }
  handleTechTouchEnd_(e12) {
    e12.cancelable && e12.preventDefault();
  }
  toggleFullscreenClass_() {
    this.isFullscreen() ? this.addClass("vjs-fullscreen") : this.removeClass("vjs-fullscreen");
  }
  documentFullscreenChange_(e12) {
    const t3 = e12.target.player;
    if (t3 && t3 !== this) return;
    const i4 = this.el();
    let s6 = ge[this.fsApi_.fullscreenElement] === i4;
    !s6 && i4.matches && (s6 = i4.matches(":" + this.fsApi_.fullscreen)), this.isFullscreen(s6);
  }
  handleTechFullscreenChange_(e12, t3) {
    t3 && (t3.nativeIOSFullscreen && (this.addClass("vjs-ios-native-fs"), this.tech_.one("webkitendfullscreen", () => {
      this.removeClass("vjs-ios-native-fs");
    })), this.isFullscreen(t3.isFullscreen));
  }
  handleTechFullscreenError_(e12, t3) {
    this.trigger("fullscreenerror", t3);
  }
  togglePictureInPictureClass_() {
    this.isInPictureInPicture() ? this.addClass("vjs-picture-in-picture") : this.removeClass("vjs-picture-in-picture");
  }
  handleTechEnterPictureInPicture_(e12) {
    this.isInPictureInPicture(true);
  }
  handleTechLeavePictureInPicture_(e12) {
    this.isInPictureInPicture(false);
  }
  handleTechError_() {
    const e12 = this.tech_.error();
    e12 && this.error(e12);
  }
  handleTechTextData_() {
    let e12 = null;
    arguments.length > 1 && (e12 = arguments[1]), this.trigger("textdata", e12);
  }
  getCache() {
    return this.cache_;
  }
  resetCache_() {
    this.cache_ = {
      currentTime: 0,
      initTime: 0,
      inactivityTimeout: this.options_.inactivityTimeout,
      duration: NaN,
      lastVolume: 1,
      lastPlaybackRate: this.defaultPlaybackRate(),
      media: null,
      src: "",
      source: {},
      sources: [],
      playbackRates: [],
      volume: 1
    };
  }
  techCall_(e12, t3) {
    this.ready(function() {
      if (e12 in Ad) return kd(this.middleware_, this.tech_, e12, t3);
      if (e12 in Dd) return xd(this.middleware_, this.tech_, e12, t3);
      try {
        this.tech_ && this.tech_[e12](t3);
      } catch (l_) {
        throw _o(l_), l_;
      }
    }, true);
  }
  techGet_(e12) {
    if (this.tech_ && this.tech_.isReady_) {
      if (e12 in Id) return Cd(this.middleware_, this.tech_, e12);
      if (e12 in Dd) return xd(this.middleware_, this.tech_, e12);
      try {
        return this.tech_[e12]();
      } catch (l_) {
        if (void 0 === this.tech_[e12]) throw _o(`Video.js: ${e12} method not defined for ${this.techName_} playback technology.`, l_), l_;
        if ("TypeError" === l_.name) throw _o(`Video.js: ${e12} unavailable on ${this.techName_} playback technology element.`, l_), this.tech_.isReady_ = false, l_;
        throw _o(l_), l_;
      }
    }
  }
  play() {
    return new Promise((e12) => {
      this.play_(e12);
    });
  }
  play_(e12 = Fh) {
    this.playCallbacks_.push(e12);
    const t3 = Boolean(!this.changingSrc_ && (this.src() || this.currentSrc())), i4 = Boolean(Qo || Yo);
    if (this.waitToPlay_ && (this.off(["ready", "loadstart"], this.waitToPlay_), this.waitToPlay_ = null), !this.isReady_ || !t3) return this.waitToPlay_ = (e13) => {
      this.play_();
    }, this.one(["ready", "loadstart"], this.waitToPlay_), void (!t3 && i4 && this.load());
    const s6 = this.techGet_("play");
    i4 && this.hasClass("vjs-ended") && this.resetProgressBar_(), null === s6 ? this.runPlayTerminatedQueue_() : this.runPlayCallbacks_(s6);
  }
  runPlayTerminatedQueue_() {
    const e12 = this.playTerminatedQueue_.slice(0);
    this.playTerminatedQueue_ = [], e12.forEach(function(e13) {
      e13();
    });
  }
  runPlayCallbacks_(e12) {
    const t3 = this.playCallbacks_.slice(0);
    this.playCallbacks_ = [], this.playTerminatedQueue_ = [], t3.forEach(function(t4) {
      t4(e12);
    });
  }
  pause() {
    this.techCall_("pause");
  }
  paused() {
    return false !== this.techGet_("paused");
  }
  played() {
    return this.techGet_("played") || Ah(0, 0);
  }
  scrubbing(e12) {
    if (void 0 === e12) return this.scrubbing_;
    this.scrubbing_ = !!e12, this.techCall_("setScrubbing", this.scrubbing_), e12 ? this.addClass("vjs-scrubbing") : this.removeClass("vjs-scrubbing");
  }
  currentTime(e12) {
    return void 0 === e12 ? (this.cache_.currentTime = this.techGet_("currentTime") || 0, this.cache_.currentTime) : (e12 < 0 && (e12 = 0), this.isReady_ && !this.changingSrc_ && this.tech_ && this.tech_.isReady_ ? (this.techCall_("setCurrentTime", e12), this.cache_.initTime = 0, void (isFinite(e12) && (this.cache_.currentTime = Number(e12)))) : (this.cache_.initTime = e12, this.off("canplay", this.boundApplyInitTime_), void this.one("canplay", this.boundApplyInitTime_)));
  }
  applyInitTime_() {
    this.currentTime(this.cache_.initTime);
  }
  duration(e12) {
    if (void 0 === e12) return void 0 !== this.cache_.duration ? this.cache_.duration : NaN;
    (e12 = parseFloat(e12)) < 0 && (e12 = 1 / 0), e12 !== this.cache_.duration && (this.cache_.duration = e12, e12 === 1 / 0 ? this.addClass("vjs-live") : this.removeClass("vjs-live"), isNaN(e12) || this.trigger("durationchange"));
  }
  remainingTime() {
    return this.duration() - this.currentTime();
  }
  remainingTimeDisplay() {
    return Math.floor(this.duration()) - Math.floor(this.currentTime());
  }
  buffered() {
    let e12 = this.techGet_("buffered");
    return e12 && e12.length || (e12 = Ah(0, 0)), e12;
  }
  seekable() {
    let e12 = this.techGet_("seekable");
    return e12 && e12.length || (e12 = Ah(0, 0)), e12;
  }
  seeking() {
    return this.techGet_("seeking");
  }
  ended() {
    return this.techGet_("ended");
  }
  networkState() {
    return this.techGet_("networkState");
  }
  readyState() {
    return this.techGet_("readyState");
  }
  bufferedPercent() {
    return Mh(this.buffered(), this.duration());
  }
  bufferedEnd() {
    const e12 = this.buffered(), t3 = this.duration();
    let i4 = e12.end(e12.length - 1);
    return i4 > t3 && (i4 = t3), i4;
  }
  volume(e12) {
    let t3;
    return void 0 !== e12 ? (t3 = Math.max(0, Math.min(1, e12)), this.cache_.volume = t3, this.techCall_("setVolume", t3), void (t3 > 0 && this.lastVolume_(t3))) : (t3 = parseFloat(this.techGet_("volume")), isNaN(t3) ? 1 : t3);
  }
  muted(e12) {
    if (void 0 === e12) return this.techGet_("muted") || false;
    this.techCall_("setMuted", e12);
  }
  defaultMuted(e12) {
    return void 0 !== e12 && this.techCall_("setDefaultMuted", e12), this.techGet_("defaultMuted") || false;
  }
  lastVolume_(e12) {
    if (void 0 === e12 || 0 === e12) return this.cache_.lastVolume;
    this.cache_.lastVolume = e12;
  }
  supportsFullScreen() {
    return this.techGet_("supportsFullScreen") || false;
  }
  isFullscreen(e12) {
    if (void 0 !== e12) {
      const t3 = this.isFullscreen_;
      return this.isFullscreen_ = Boolean(e12), this.isFullscreen_ !== t3 && this.fsApi_.prefixed && this.trigger("fullscreenchange"), void this.toggleFullscreenClass_();
    }
    return this.isFullscreen_;
  }
  requestFullscreen(e12) {
    this.isInPictureInPicture() && this.exitPictureInPicture();
    const t3 = this;
    return new Promise((i4, s6) => {
      function n6() {
        t3.off("fullscreenerror", a6), t3.off("fullscreenchange", r3);
      }
      function r3() {
        n6(), i4();
      }
      function a6(e13, t4) {
        n6(), s6(t4);
      }
      t3.one("fullscreenchange", r3), t3.one("fullscreenerror", a6);
      const o4 = t3.requestFullscreenHelper_(e12);
      o4 && (o4.then(n6, n6), o4.then(i4, s6));
    });
  }
  requestFullscreenHelper_(e12) {
    let t3;
    if (this.fsApi_.prefixed || (t3 = this.options_.fullscreen && this.options_.fullscreen.options || {}, void 0 !== e12 && (t3 = e12)), this.fsApi_.requestFullscreen) {
      const e13 = this.el_[this.fsApi_.requestFullscreen](t3);
      return e13 && e13.then(() => this.isFullscreen(true), () => this.isFullscreen(false)), e13;
    }
    this.tech_.supportsFullScreen() && true == !this.options_.preferFullWindow ? this.techCall_("enterFullScreen") : this.enterFullWindow();
  }
  exitFullscreen() {
    const e12 = this;
    return new Promise((t3, i4) => {
      function s6() {
        e12.off("fullscreenerror", r3), e12.off("fullscreenchange", n6);
      }
      function n6() {
        s6(), t3();
      }
      function r3(e13, t4) {
        s6(), i4(t4);
      }
      e12.one("fullscreenchange", n6), e12.one("fullscreenerror", r3);
      const a6 = e12.exitFullscreenHelper_();
      a6 && (a6.then(s6, s6), a6.then(t3, i4));
    });
  }
  exitFullscreenHelper_() {
    if (this.fsApi_.requestFullscreen) {
      const e12 = ge[this.fsApi_.exitFullscreen]();
      return e12 && Fh(e12.then(() => this.isFullscreen(false))), e12;
    }
    this.tech_.supportsFullScreen() && true == !this.options_.preferFullWindow ? this.techCall_("exitFullScreen") : this.exitFullWindow();
  }
  enterFullWindow() {
    this.isFullscreen(true), this.isFullWindow = true, this.docOrigOverflow = ge.documentElement.style.overflow, Kl(ge, "keydown", this.boundFullWindowOnEscKey_), ge.documentElement.style.overflow = "hidden", hl(ge.body, "vjs-full-window"), this.trigger("enterFullWindow");
  }
  fullWindowOnEscKey(e12) {
    ye.isEventKey(e12, "Esc") && true === this.isFullscreen() && (this.isFullWindow ? this.exitFullWindow() : this.exitFullscreen());
  }
  exitFullWindow() {
    this.isFullscreen(false), this.isFullWindow = false, Yl(ge, "keydown", this.boundFullWindowOnEscKey_), ge.documentElement.style.overflow = this.docOrigOverflow, dl(ge.body, "vjs-full-window"), this.trigger("exitFullWindow");
  }
  disablePictureInPicture(e12) {
    if (void 0 === e12) return this.techGet_("disablePictureInPicture");
    this.techCall_("setDisablePictureInPicture", e12), this.options_.disablePictureInPicture = e12, this.trigger("disablepictureinpicturechanged");
  }
  isInPictureInPicture(e12) {
    return void 0 !== e12 ? (this.isInPictureInPicture_ = !!e12, void this.togglePictureInPictureClass_()) : !!this.isInPictureInPicture_;
  }
  requestPictureInPicture() {
    if (this.options_.enableDocumentPictureInPicture && g3.documentPictureInPicture) {
      const e12 = ge.createElement(this.el().tagName);
      return e12.classList = this.el().classList, e12.classList.add("vjs-pip-container"), this.posterImage && e12.appendChild(this.posterImage.el().cloneNode(true)), this.titleBar && e12.appendChild(this.titleBar.el().cloneNode(true)), e12.appendChild(rl("p", {
        className: "vjs-pip-text"
      }, {}, this.localize("Playing in picture-in-picture"))), g3.documentPictureInPicture.requestWindow({
        width: this.videoWidth(),
        height: this.videoHeight()
      }).then((t3) => (Pl(t3), this.el_.parentNode.insertBefore(e12, this.el_), t3.document.body.appendChild(this.el_), t3.document.body.classList.add("vjs-pip-window"), this.player_.isInPictureInPicture(true), this.player_.trigger({
        type: "enterpictureinpicture",
        pipWindow: t3
      }), t3.addEventListener("pagehide", (t4) => {
        const i4 = t4.target.querySelector(".video-js");
        e12.parentNode.replaceChild(i4, e12), this.player_.isInPictureInPicture(false), this.player_.trigger("leavepictureinpicture");
      }), t3));
    }
    return "pictureInPictureEnabled" in ge && false === this.disablePictureInPicture() ? this.techGet_("requestPictureInPicture") : Promise.reject("No PiP mode is available");
  }
  exitPictureInPicture() {
    return g3.documentPictureInPicture && g3.documentPictureInPicture.window ? (g3.documentPictureInPicture.window.close(), Promise.resolve()) : "pictureInPictureEnabled" in ge ? ge.exitPictureInPicture() : void 0;
  }
  handleKeyDown(e12) {
    const {
      userActions: t3
    } = this.options_;
    if (!t3 || !t3.hotkeys) return;
    ((e13) => {
      const t4 = e13.tagName.toLowerCase();
      if (e13.isContentEditable) return true;
      if ("input" === t4) return -1 === ["button", "checkbox", "hidden", "radio", "reset", "submit"].indexOf(e13.type);
      return -1 !== ["textarea"].indexOf(t4);
    })(this.el_.ownerDocument.activeElement) || ("function" == typeof t3.hotkeys ? t3.hotkeys.call(this, e12) : this.handleHotkeys(e12));
  }
  handleHotkeys(e12) {
    const t3 = this.options_.userActions ? this.options_.userActions.hotkeys : {}, {
      fullscreenKey: i4 = (e13) => ye.isEventKey(e13, "f"),
      muteKey: s6 = (e13) => ye.isEventKey(e13, "m"),
      playPauseKey: n6 = (e13) => ye.isEventKey(e13, "k") || ye.isEventKey(e13, "Space")
    } = t3;
    if (i4.call(this, e12)) {
      e12.preventDefault(), e12.stopPropagation();
      const t4 = Ch.getComponent("FullscreenToggle");
      false !== ge[this.fsApi_.fullscreenEnabled] && t4.prototype.handleClick.call(this, e12);
    } else if (s6.call(this, e12)) {
      e12.preventDefault(), e12.stopPropagation();
      Ch.getComponent("MuteToggle").prototype.handleClick.call(this, e12);
    } else if (n6.call(this, e12)) {
      e12.preventDefault(), e12.stopPropagation();
      Ch.getComponent("PlayToggle").prototype.handleClick.call(this, e12);
    }
  }
  canPlayType(e12) {
    let t3;
    for (let i4 = 0, s6 = this.options_.techOrder; i4 < s6.length; i4++) {
      const n6 = s6[i4];
      let r3 = _d.getTech(n6);
      if (r3 || (r3 = Ch.getComponent(n6)), r3) {
        if (r3.isSupported() && (t3 = r3.canPlayType(e12), t3)) return t3;
      } else _o.error(`The "${n6}" tech is undefined. Skipped browser support check for that tech.`);
    }
    return "";
  }
  selectSource(e12) {
    const t3 = this.options_.techOrder.map((e13) => [e13, _d.getTech(e13)]).filter(([e13, t4]) => t4 ? t4.isSupported() : (_o.error(`The "${e13}" tech is undefined. Skipped browser support check for that tech.`), false)), i4 = function(e13, t4, i5) {
      let s7;
      return e13.some((e14) => t4.some((t5) => {
        if (s7 = i5(e14, t5), s7) return true;
      })), s7;
    };
    let s6;
    const n6 = (e13) => (t4, i5) => e13(i5, t4), r3 = ([e13, t4], i5) => {
      if (t4.canPlaySource(i5, this.options_[e13.toLowerCase()])) return {
        source: i5,
        tech: e13
      };
    };
    return s6 = this.options_.sourceOrder ? i4(e12, t3, n6(r3)) : i4(t3, e12, r3), s6 || false;
  }
  handleSrc_(e12, t3) {
    if (void 0 === e12) return this.cache_.src || "";
    this.resetRetryOnError_ && this.resetRetryOnError_();
    const i4 = Fd(e12);
    if (i4.length) {
      if (this.changingSrc_ = true, t3 || (this.cache_.sources = i4), this.updateSourceCaches_(i4[0]), Ed(this, i4[0], (e13, s6) => {
        this.middleware_ = s6, t3 || (this.cache_.sources = i4), this.updateSourceCaches_(e13);
        if (this.src_(e13)) return i4.length > 1 ? this.handleSrc_(i4.slice(1)) : (this.changingSrc_ = false, this.setTimeout(function() {
          this.error({
            code: 4,
            message: this.options_.notSupportedMessage
          });
        }, 0), void this.triggerReady());
        wd(s6, this.tech_);
      }), i4.length > 1) {
        const e13 = () => {
          this.error(null), this.handleSrc_(i4.slice(1), true);
        }, t4 = () => {
          this.off("error", e13);
        };
        this.one("error", e13), this.one("playing", t4), this.resetRetryOnError_ = () => {
          this.off("error", e13), this.off("playing", t4);
        };
      }
    } else this.setTimeout(function() {
      this.error({
        code: 4,
        message: this.options_.notSupportedMessage
      });
    }, 0);
  }
  src(e12) {
    return this.handleSrc_(e12, false);
  }
  src_(e12) {
    const t3 = this.selectSource([e12]);
    return !t3 || (Eh(t3.tech, this.techName_) ? (this.ready(function() {
      this.tech_.constructor.prototype.hasOwnProperty("setSource") ? this.techCall_("setSource", e12) : this.techCall_("src", e12.src), this.changingSrc_ = false;
    }, true), false) : (this.changingSrc_ = true, this.loadTech_(t3.tech, t3.source), this.tech_.ready(() => {
      this.changingSrc_ = false;
    }), false));
  }
  load() {
    this.tech_ && this.tech_.vhs ? this.src(this.currentSource()) : this.techCall_("load");
  }
  reset() {
    if (this.paused()) this.doReset_();
    else {
      Fh(this.play().then(() => this.doReset_()));
    }
  }
  doReset_() {
    this.tech_ && this.tech_.clearTracks("text"), this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.resetCache_(), this.poster(""), this.loadTech_(this.options_.techOrder[0], null), this.techCall_("reset"), this.resetControlBarUI_(), this.error(null), this.titleBar && this.titleBar.update({
      title: void 0,
      description: void 0
    }), hh(this) && this.trigger("playerreset");
  }
  resetControlBarUI_() {
    this.resetProgressBar_(), this.resetPlaybackRate_(), this.resetVolumeBar_();
  }
  resetProgressBar_() {
    this.currentTime(0);
    const {
      currentTimeDisplay: e12,
      durationDisplay: t3,
      progressControl: i4,
      remainingTimeDisplay: s6
    } = this.controlBar || {}, {
      seekBar: n6
    } = i4 || {};
    e12 && e12.updateContent(), t3 && t3.updateContent(), s6 && s6.updateContent(), n6 && (n6.update(), n6.loadProgressBar && n6.loadProgressBar.update());
  }
  resetPlaybackRate_() {
    this.playbackRate(this.defaultPlaybackRate()), this.handleTechRateChange_();
  }
  resetVolumeBar_() {
    this.volume(1), this.trigger("volumechange");
  }
  currentSources() {
    const e12 = this.currentSource(), t3 = [];
    return 0 !== Object.keys(e12).length && t3.push(e12), this.cache_.sources || t3;
  }
  currentSource() {
    return this.cache_.source || {};
  }
  currentSrc() {
    return this.currentSource() && this.currentSource().src || "";
  }
  currentType() {
    return this.currentSource() && this.currentSource().type || "";
  }
  preload(e12) {
    return void 0 !== e12 ? (this.techCall_("setPreload", e12), void (this.options_.preload = e12)) : this.techGet_("preload");
  }
  autoplay(e12) {
    if (void 0 === e12) return this.options_.autoplay || false;
    let t3;
    "string" == typeof e12 && /(any|play|muted)/.test(e12) || true === e12 && this.options_.normalizeAutoplay ? (this.options_.autoplay = e12, this.manualAutoplay_("string" == typeof e12 ? e12 : "play"), t3 = false) : this.options_.autoplay = !!e12, t3 = void 0 === t3 ? this.options_.autoplay : t3, this.tech_ && this.techCall_("setAutoplay", t3);
  }
  playsinline(e12) {
    return void 0 !== e12 && (this.techCall_("setPlaysinline", e12), this.options_.playsinline = e12), this.techGet_("playsinline");
  }
  loop(e12) {
    return void 0 !== e12 ? (this.techCall_("setLoop", e12), void (this.options_.loop = e12)) : this.techGet_("loop");
  }
  poster(e12) {
    if (void 0 === e12) return this.poster_;
    e12 || (e12 = ""), e12 !== this.poster_ && (this.poster_ = e12, this.techCall_("setPoster", e12), this.isPosterFromTech_ = false, this.trigger("posterchange"));
  }
  handleTechPosterChange_() {
    if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) {
      const e12 = this.tech_.poster() || "";
      e12 !== this.poster_ && (this.poster_ = e12, this.isPosterFromTech_ = true, this.trigger("posterchange"));
    }
  }
  controls(e12) {
    if (void 0 === e12) return !!this.controls_;
    e12 = !!e12, this.controls_ !== e12 && (this.controls_ = e12, this.usingNativeControls() && this.techCall_("setControls", e12), this.controls_ ? (this.removeClass("vjs-controls-disabled"), this.addClass("vjs-controls-enabled"), this.trigger("controlsenabled"), this.usingNativeControls() || this.addTechControlsListeners_()) : (this.removeClass("vjs-controls-enabled"), this.addClass("vjs-controls-disabled"), this.trigger("controlsdisabled"), this.usingNativeControls() || this.removeTechControlsListeners_()));
  }
  usingNativeControls(e12) {
    if (void 0 === e12) return !!this.usingNativeControls_;
    e12 = !!e12, this.usingNativeControls_ !== e12 && (this.usingNativeControls_ = e12, this.usingNativeControls_ ? (this.addClass("vjs-using-native-controls"), this.trigger("usingnativecontrols")) : (this.removeClass("vjs-using-native-controls"), this.trigger("usingcustomcontrols")));
  }
  error(e12) {
    if (void 0 === e12) return this.error_ || null;
    if (ao("beforeerror").forEach((t3) => {
      const i4 = t3(this, e12);
      wo(i4) && !Array.isArray(i4) || "string" == typeof i4 || "number" == typeof i4 || null === i4 ? e12 = i4 : this.log.error("please return a value that MediaError expects in beforeerror hooks");
    }), this.options_.suppressNotSupportedError && e12 && 4 === e12.code) {
      const t3 = function() {
        this.error(e12);
      };
      return this.options_.suppressNotSupportedError = false, this.any(["click", "touchstart"], t3), void this.one("loadstart", function() {
        this.off(["click", "touchstart"], t3);
      });
    }
    if (null === e12) return this.error_ = null, this.removeClass("vjs-error"), void (this.errorDisplay && this.errorDisplay.close());
    this.error_ = new Uh(e12), this.addClass("vjs-error"), _o.error(`(CODE:${this.error_.code} ${Uh.errorTypes[this.error_.code]})`, this.error_.message, this.error_), this.trigger("error"), ao("error").forEach((e13) => e13(this, this.error_));
  }
  reportUserActivity(e12) {
    this.userActivity_ = true;
  }
  userActive(e12) {
    if (void 0 === e12) return this.userActive_;
    if ((e12 = !!e12) !== this.userActive_) {
      if (this.userActive_ = e12, this.userActive_) return this.userActivity_ = true, this.removeClass("vjs-user-inactive"), this.addClass("vjs-user-active"), void this.trigger("useractive");
      this.tech_ && this.tech_.one("mousemove", function(e13) {
        e13.stopPropagation(), e13.preventDefault();
      }), this.userActivity_ = false, this.removeClass("vjs-user-active"), this.addClass("vjs-user-inactive"), this.trigger("userinactive");
    }
  }
  listenForUserActivity_() {
    let e12, t3, i4;
    const s6 = ih(this, this.reportUserActivity), n6 = function(e13) {
      e13.screenX === t3 && e13.screenY === i4 || (t3 = e13.screenX, i4 = e13.screenY, s6());
    }, r3 = function() {
      s6(), this.clearInterval(e12), e12 = this.setInterval(s6, 250);
    }, a6 = function(t4) {
      s6(), this.clearInterval(e12);
    };
    this.on("mousedown", r3), this.on("mousemove", n6), this.on("mouseup", a6), this.on("mouseleave", a6);
    const o4 = this.getChild("controlBar");
    let l5;
    !o4 || Yo || Oo || (o4.on("mouseenter", function(e13) {
      0 !== this.player().options_.inactivityTimeout && (this.player().cache_.inactivityTimeout = this.player().options_.inactivityTimeout), this.player().options_.inactivityTimeout = 0;
    }), o4.on("mouseleave", function(e13) {
      this.player().options_.inactivityTimeout = this.player().cache_.inactivityTimeout;
    })), this.on("keydown", s6), this.on("keyup", s6);
    const h = function() {
      if (!this.userActivity_) return;
      this.userActivity_ = false, this.userActive(true), this.clearTimeout(l5);
      const e13 = this.options_.inactivityTimeout;
      e13 <= 0 || (l5 = this.setTimeout(function() {
        this.userActivity_ || this.userActive(false);
      }, e13));
    };
    this.setInterval(h, 250);
  }
  playbackRate(e12) {
    if (void 0 === e12) return this.tech_ && this.tech_.featuresPlaybackRate ? this.cache_.lastPlaybackRate || this.techGet_("playbackRate") : 1;
    this.techCall_("setPlaybackRate", e12);
  }
  defaultPlaybackRate(e12) {
    return void 0 !== e12 ? this.techCall_("setDefaultPlaybackRate", e12) : this.tech_ && this.tech_.featuresPlaybackRate ? this.techGet_("defaultPlaybackRate") : 1;
  }
  isAudio(e12) {
    if (void 0 === e12) return !!this.isAudio_;
    this.isAudio_ = !!e12;
  }
  enableAudioOnlyUI_() {
    this.addClass("vjs-audio-only-mode");
    const e12 = this.children(), t3 = this.getChild("ControlBar"), i4 = t3 && t3.currentHeight();
    e12.forEach((e13) => {
      e13 !== t3 && e13.el_ && !e13.hasClass("vjs-hidden") && (e13.hide(), this.audioOnlyCache_.hiddenChildren.push(e13));
    }), this.audioOnlyCache_.playerHeight = this.currentHeight(), this.height(i4), this.trigger("audioonlymodechange");
  }
  disableAudioOnlyUI_() {
    this.removeClass("vjs-audio-only-mode"), this.audioOnlyCache_.hiddenChildren.forEach((e12) => e12.show()), this.height(this.audioOnlyCache_.playerHeight), this.trigger("audioonlymodechange");
  }
  audioOnlyMode(e12) {
    if ("boolean" != typeof e12 || e12 === this.audioOnlyMode_) return this.audioOnlyMode_;
    if (this.audioOnlyMode_ = e12, e12) {
      const e13 = [];
      return this.isInPictureInPicture() && e13.push(this.exitPictureInPicture()), this.isFullscreen() && e13.push(this.exitFullscreen()), this.audioPosterMode() && e13.push(this.audioPosterMode(false)), Promise.all(e13).then(() => this.enableAudioOnlyUI_());
    }
    return Promise.resolve().then(() => this.disableAudioOnlyUI_());
  }
  enablePosterModeUI_() {
    (this.tech_ && this.tech_).hide(), this.addClass("vjs-audio-poster-mode"), this.trigger("audiopostermodechange");
  }
  disablePosterModeUI_() {
    (this.tech_ && this.tech_).show(), this.removeClass("vjs-audio-poster-mode"), this.trigger("audiopostermodechange");
  }
  audioPosterMode(e12) {
    if ("boolean" != typeof e12 || e12 === this.audioPosterMode_) return this.audioPosterMode_;
    if (this.audioPosterMode_ = e12, e12) {
      if (this.audioOnlyMode()) {
        return this.audioOnlyMode(false).then(() => {
          this.enablePosterModeUI_();
        });
      }
      return Promise.resolve().then(() => {
        this.enablePosterModeUI_();
      });
    }
    return Promise.resolve().then(() => {
      this.disablePosterModeUI_();
    });
  }
  addTextTrack(e12, t3, i4) {
    if (this.tech_) return this.tech_.addTextTrack(e12, t3, i4);
  }
  addRemoteTextTrack(e12, t3) {
    if (this.tech_) return this.tech_.addRemoteTextTrack(e12, t3);
  }
  removeRemoteTextTrack(e12 = {}) {
    let {
      track: t3
    } = e12;
    if (t3 || (t3 = e12), this.tech_) return this.tech_.removeRemoteTextTrack(t3);
  }
  getVideoPlaybackQuality() {
    return this.techGet_("getVideoPlaybackQuality");
  }
  videoWidth() {
    return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0;
  }
  videoHeight() {
    return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0;
  }
  language(e12) {
    if (void 0 === e12) return this.language_;
    this.language_ !== String(e12).toLowerCase() && (this.language_ = String(e12).toLowerCase(), hh(this) && this.trigger("languagechange"));
  }
  languages() {
    return ko(_qc.prototype.options_.languages, this.languages_);
  }
  toJSON() {
    const e12 = ko(this.options_), t3 = e12.tracks;
    e12.tracks = [];
    for (let i4 = 0; i4 < t3.length; i4++) {
      let s6 = t3[i4];
      s6 = ko(s6), s6.player = void 0, e12.tracks[i4] = s6;
    }
    return e12;
  }
  createModal(e12, t3) {
    (t3 = t3 || {}).content = e12 || "";
    const i4 = new Hh(this, t3);
    return this.addChild(i4), i4.on("dispose", () => {
      this.removeChild(i4);
    }), i4.open(), i4;
  }
  updateCurrentBreakpoint_() {
    if (!this.responsive()) return;
    const e12 = this.currentBreakpoint(), t3 = this.currentWidth();
    for (let i4 = 0; i4 < Uc.length; i4++) {
      const s6 = Uc[i4];
      if (t3 <= this.breakpoints_[s6]) {
        if (e12 === s6) return;
        e12 && this.removeClass(Bc[e12]), this.addClass(Bc[s6]), this.breakpoint_ = s6;
        break;
      }
    }
  }
  removeCurrentBreakpoint_() {
    const e12 = this.currentBreakpointClass();
    this.breakpoint_ = "", e12 && this.removeClass(e12);
  }
  breakpoints(e12) {
    return void 0 === e12 || (this.breakpoint_ = "", this.breakpoints_ = Object.assign({}, Fc, e12), this.updateCurrentBreakpoint_()), Object.assign(this.breakpoints_);
  }
  responsive(e12) {
    if (void 0 === e12) return this.responsive_;
    return (e12 = Boolean(e12)) !== this.responsive_ ? (this.responsive_ = e12, e12 ? (this.on("playerresize", this.boundUpdateCurrentBreakpoint_), this.updateCurrentBreakpoint_()) : (this.off("playerresize", this.boundUpdateCurrentBreakpoint_), this.removeCurrentBreakpoint_()), e12) : void 0;
  }
  currentBreakpoint() {
    return this.breakpoint_;
  }
  currentBreakpointClass() {
    return Bc[this.breakpoint_] || "";
  }
  loadMedia(e12, t3) {
    if (!e12 || "object" != typeof e12) return;
    const i4 = this.crossOrigin();
    this.reset(), this.cache_.media = ko(e12);
    const {
      artist: s6,
      artwork: n6,
      description: r3,
      poster: a6,
      src: o4,
      textTracks: l5,
      title: h
    } = this.cache_.media;
    !n6 && a6 && (this.cache_.media.artwork = [{
      src: a6,
      type: Ud(a6)
    }]), i4 && this.crossOrigin(i4), o4 && this.src(o4), a6 && this.poster(a6), Array.isArray(l5) && l5.forEach((e13) => this.addRemoteTextTrack(e13, false)), this.titleBar && this.titleBar.update({
      title: h,
      description: r3 || s6 || ""
    }), this.ready(t3);
  }
  getMedia() {
    if (!this.cache_.media) {
      const e12 = this.poster(), t3 = {
        src: this.currentSources(),
        textTracks: Array.prototype.map.call(this.remoteTextTracks(), (e13) => ({
          kind: e13.kind,
          label: e13.label,
          language: e13.language,
          src: e13.src
        }))
      };
      return e12 && (t3.poster = e12, t3.artwork = [{
        src: t3.poster,
        type: Ud(t3.poster)
      }]), t3;
    }
    return ko(this.cache_.media);
  }
  static getTagSettings(e12) {
    const t3 = {
      sources: [],
      tracks: []
    }, i4 = pl(e12), s6 = i4["data-setup"];
    if (ll(e12, "vjs-fill") && (i4.fill = true), ll(e12, "vjs-fluid") && (i4.fluid = true), null !== s6) {
      const [e13, t4] = ve(s6 || "{}");
      e13 && _o.error(e13), Object.assign(i4, t4);
    }
    if (Object.assign(t3, i4), e12.hasChildNodes()) {
      const i5 = e12.childNodes;
      for (let e13 = 0, s7 = i5.length; e13 < s7; e13++) {
        const s8 = i5[e13], n6 = s8.nodeName.toLowerCase();
        "source" === n6 ? t3.sources.push(pl(s8)) : "track" === n6 && t3.tracks.push(pl(s8));
      }
    }
    return t3;
  }
  debug(e12) {
    if (void 0 === e12) return this.debugEnabled_;
    e12 ? (this.trigger("debugon"), this.previousLogLevel_ = this.log.level, this.log.level("debug"), this.debugEnabled_ = true) : (this.trigger("debugoff"), this.log.level(this.previousLogLevel_), this.previousLogLevel_ = void 0, this.debugEnabled_ = false);
  }
  playbackRates(e12) {
    if (void 0 === e12) return this.cache_.playbackRates;
    Array.isArray(e12) && e12.every((e13) => "number" == typeof e13) && (this.cache_.playbackRates = e12, this.trigger("playbackrateschange"));
  }
};
fd.names.forEach(function(e12) {
  const t3 = fd[e12];
  qc.prototype[t3.getterName] = function() {
    return this.tech_ ? this.tech_[t3.getterName]() : (this[t3.privateName] = this[t3.privateName] || new t3.ListClass(), this[t3.privateName]);
  };
}), qc.prototype.crossorigin = qc.prototype.crossOrigin, qc.players = {};
var jc = g3.navigator;
qc.prototype.options_ = {
  techOrder: _d.defaultTechOrder_,
  html5: {},
  enableSourceset: true,
  inactivityTimeout: 2e3,
  playbackRates: [],
  liveui: false,
  children: ["mediaLoader", "posterImage", "titleBar", "textTrackDisplay", "loadingSpinner", "bigPlayButton", "liveTracker", "controlBar", "errorDisplay", "textTrackSettings", "resizeManager"],
  language: jc && (jc.languages && jc.languages[0] || jc.userLanguage || jc.language) || "en",
  languages: {},
  notSupportedMessage: "No compatible source was found for this media.",
  normalizeAutoplay: false,
  fullscreen: {
    options: {
      navigationUI: "hide"
    }
  },
  breakpoints: {},
  responsive: false,
  audioOnlyMode: false,
  audioPosterMode: false,
  enableSmoothSeeking: false
}, Rc.forEach(function(e12) {
  qc.prototype[`handleTech${Sh(e12)}_`] = function() {
    return this.trigger(e12);
  };
}), Ch.registerComponent("Player", qc);
var $c = "plugin";
var Hc = "activePlugins_";
var Vc = {};
var zc = (e12) => Vc.hasOwnProperty(e12);
var Wc = (e12) => zc(e12) ? Vc[e12] : void 0;
var Gc = (e12, t3) => {
  e12[Hc] = e12[Hc] || {}, e12[Hc][t3] = true;
};
var Xc = (e12, t3, i4) => {
  const s6 = (i4 ? "before" : "") + "pluginsetup";
  e12.trigger(s6, t3), e12.trigger(s6 + ":" + t3.name, t3);
};
var Kc = function(e12, t3) {
  const i4 = function() {
    Xc(this, {
      name: e12,
      plugin: t3,
      instance: null
    }, true);
    const i5 = t3.apply(this, arguments);
    return Gc(this, e12), Xc(this, {
      name: e12,
      plugin: t3,
      instance: i5
    }), i5;
  };
  return Object.keys(t3).forEach(function(e13) {
    i4[e13] = t3[e13];
  }), i4;
};
var Yc = (e12, t3) => (t3.prototype.name = e12, function(...i4) {
  Xc(this, {
    name: e12,
    plugin: t3,
    instance: null
  }, true);
  const s6 = new t3(...[this, ...i4]);
  return this[e12] = () => s6, Xc(this, s6.getEventHash()), s6;
});
var Qc = class _Qc {
  constructor(e12) {
    if (this.constructor === _Qc) throw new Error("Plugin must be sub-classed; not directly instantiated.");
    this.player = e12, this.log || (this.log = this.player.log.createLogger(this.name)), _h(this), delete this.trigger, bh(this, this.constructor.defaultState), Gc(e12, this.name), this.dispose = this.dispose.bind(this), e12.on("dispose", this.dispose);
  }
  version() {
    return this.constructor.VERSION;
  }
  getEventHash(e12 = {}) {
    return e12.name = this.name, e12.plugin = this.constructor, e12.instance = this, e12;
  }
  trigger(e12, t3 = {}) {
    return Ql(this.eventBusEl_, e12, this.getEventHash(t3));
  }
  handleStateChanged(e12) {
  }
  dispose() {
    const {
      name: e12,
      player: t3
    } = this;
    this.trigger("dispose"), this.off(), t3.off("dispose", this.dispose), t3[Hc][e12] = false, this.player = this.state = null, t3[e12] = Yc(e12, Vc[e12]);
  }
  static isBasic(e12) {
    const t3 = "string" == typeof e12 ? Wc(e12) : e12;
    return "function" == typeof t3 && !_Qc.prototype.isPrototypeOf(t3.prototype);
  }
  static registerPlugin(e12, t3) {
    if ("string" != typeof e12) throw new Error(`Illegal plugin name, "${e12}", must be a string, was ${typeof e12}.`);
    if (zc(e12)) _o.warn(`A plugin named "${e12}" already exists. You may want to avoid re-registering plugins!`);
    else if (qc.prototype.hasOwnProperty(e12)) throw new Error(`Illegal plugin name, "${e12}", cannot share a name with an existing player method!`);
    if ("function" != typeof t3) throw new Error(`Illegal plugin for "${e12}", must be a function, was ${typeof t3}.`);
    return Vc[e12] = t3, e12 !== $c && (_Qc.isBasic(t3) ? qc.prototype[e12] = Kc(e12, t3) : qc.prototype[e12] = Yc(e12, t3)), t3;
  }
  static deregisterPlugin(e12) {
    if (e12 === $c) throw new Error("Cannot de-register base plugin.");
    zc(e12) && (delete Vc[e12], delete qc.prototype[e12]);
  }
  static getPlugins(e12 = Object.keys(Vc)) {
    let t3;
    return e12.forEach((e13) => {
      const i4 = Wc(e13);
      i4 && (t3 = t3 || {}, t3[e13] = i4);
    }), t3;
  }
  static getPluginVersion(e12) {
    const t3 = Wc(e12);
    return t3 && t3.VERSION || "";
  }
};
function Jc(e12, t3) {
  let i4 = false;
  return function(...s6) {
    return i4 || _o.warn(e12), i4 = true, t3.apply(this, s6);
  };
}
function Zc(e12, t3, i4, s6) {
  return Jc(`${t3} is deprecated and will be removed in ${e12}.0; please use ${i4} instead.`, s6);
}
Qc.getPlugin = Wc, Qc.BASE_PLUGIN_NAME = $c, Qc.registerPlugin($c, Qc), qc.prototype.usingPlugin = function(e12) {
  return !!this[Hc] && true === this[Hc][e12];
}, qc.prototype.hasPlugin = function(e12) {
  return !!zc(e12);
};
var ep = {
  UnsupportedSidxContainer: "unsupported-sidx-container-error",
  DashManifestSidxParsingError: "dash-manifest-sidx-parsing-error",
  HlsPlaylistRequestError: "hls-playlist-request-error",
  SegmentUnsupportedMediaFormat: "segment-unsupported-media-format-error",
  UnsupportedMediaInitialization: "unsupported-media-initialization-error",
  SegmentSwitchError: "segment-switch-error",
  SegmentExceedsSourceBufferQuota: "segment-exceeds-source-buffer-quota-error",
  SegmentAppendError: "segment-append-error",
  VttLoadError: "vtt-load-error",
  VttCueParsingError: "vtt-cue-parsing-error",
  AdsBeforePrerollError: "ads-before-preroll-error",
  AdsPrerollError: "ads-preroll-error",
  AdsMidrollError: "ads-midroll-error",
  AdsPostrollError: "ads-postroll-error",
  AdsMacroReplacementFailed: "ads-macro-replacement-failed",
  AdsResumeContentFailed: "ads-resume-content-failed",
  EMEFailedToRequestMediaKeySystemAccess: "eme-failed-request-media-key-system-access",
  EMEFailedToCreateMediaKeys: "eme-failed-create-media-keys",
  EMEFailedToAttachMediaKeysToVideoElement: "eme-failed-attach-media-keys-to-video",
  EMEFailedToCreateMediaKeySession: "eme-failed-create-media-key-session",
  EMEFailedToSetServerCertificate: "eme-failed-set-server-certificate",
  EMEFailedToGenerateLicenseRequest: "eme-failed-generate-license-request",
  EMEFailedToUpdateSessionWithReceivedLicenseKeys: "eme-failed-update-session",
  EMEFailedToCloseSession: "eme-failed-close-session",
  EMEFailedToRemoveKeysFromSession: "eme-failed-remove-keys",
  EMEFailedToLoadSessionBySessionId: "eme-failed-load-session"
};
var tp = (e12) => 0 === e12.indexOf("#") ? e12.slice(1) : e12;
function ip(e12, t3, i4) {
  let s6 = ip.getPlayer(e12);
  if (s6) return t3 && _o.warn(`Player "${e12}" is already initialised. Options will not be applied.`), i4 && s6.ready(i4), s6;
  const n6 = "string" == typeof e12 ? Il("#" + tp(e12)) : e12;
  if (!il(n6)) throw new TypeError("The element or ID supplied is not valid. (videojs)");
  const r3 = "getRootNode" in n6 && n6.getRootNode() instanceof g3.ShadowRoot ? n6.getRootNode() : n6.ownerDocument.body;
  n6.ownerDocument.defaultView && r3.contains(n6) || _o.warn("The element supplied is not included in the DOM"), true === (t3 = t3 || {}).restoreEl && (t3.restoreEl = (n6.parentNode && n6.parentNode.hasAttribute("data-vjs-player") ? n6.parentNode : n6).cloneNode(true)), ao("beforesetup").forEach((e13) => {
    const i5 = e13(n6, ko(t3));
    wo(i5) && !Array.isArray(i5) ? t3 = ko(t3, i5) : _o.error("please return an object in beforesetup hooks");
  });
  const a6 = Ch.getComponent("Player");
  return s6 = new a6(n6, t3, i4), ao("setup").forEach((e13) => e13(s6)), s6;
}
if (ip.hooks_ = ro, ip.hooks = ao, ip.hook = oo, ip.hookOnce = ho, ip.removeHook = lo, true !== g3.VIDEOJS_NO_DYNAMIC_STYLE && tl()) {
  let m_ = Il(".vjs-styles-defaults");
  if (!m_) {
    m_ = Bl("vjs-styles-defaults");
    const g_ = Il("head");
    g_ && g_.insertBefore(m_, g_.firstChild), Fl(m_, "\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ");
  }
}
Ml(1, ip), ip.VERSION = no, ip.options = qc.prototype.options_, ip.getPlayers = () => qc.players, ip.getPlayer = (e12) => {
  const t3 = qc.players;
  let i4;
  if ("string" == typeof e12) {
    const s6 = tp(e12), n6 = t3[s6];
    if (n6) return n6;
    i4 = Il("#" + s6);
  } else i4 = e12;
  if (il(i4)) {
    const {
      player: e13,
      playerId: s6
    } = i4;
    if (e13 || t3[s6]) return e13 || t3[s6];
  }
}, ip.getAllPlayers = () => Object.keys(qc.players).map((e12) => qc.players[e12]).filter(Boolean), ip.players = qc.players, ip.getComponent = Ch.getComponent, ip.registerComponent = (e12, t3) => (_d.isTech(t3) && _o.warn(`The ${e12} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`), Ch.registerComponent.call(Ch, e12, t3)), ip.getTech = _d.getTech, ip.registerTech = _d.registerTech, ip.use = Sd, Object.defineProperty(ip, "middleware", {
  value: {},
  writeable: false,
  enumerable: true
}), Object.defineProperty(ip.middleware, "TERMINATOR", {
  value: Td,
  writeable: false,
  enumerable: true
}), ip.browser = Jo, ip.obj = Ao, ip.mergeOptions = Zc(9, "videojs.mergeOptions", "videojs.obj.merge", ko), ip.defineLazyProperty = Zc(9, "videojs.defineLazyProperty", "videojs.obj.defineLazyProperty", Io), ip.bind = Zc(9, "videojs.bind", "native Function.prototype.bind", ih), ip.registerPlugin = Qc.registerPlugin, ip.deregisterPlugin = Qc.deregisterPlugin, ip.plugin = (e12, t3) => (_o.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"), Qc.registerPlugin(e12, t3)), ip.getPlugins = Qc.getPlugins, ip.getPlugin = Qc.getPlugin, ip.getPluginVersion = Qc.getPluginVersion, ip.addLanguage = function(e12, t3) {
  return e12 = ("" + e12).toLowerCase(), ip.options.languages = ko(ip.options.languages, {
    [e12]: t3
  }), ip.options.languages[e12];
}, ip.log = _o, ip.createLogger = vo, ip.time = Rh, ip.createTimeRange = Zc(9, "videojs.createTimeRange", "videojs.time.createTimeRanges", Ah), ip.createTimeRanges = Zc(9, "videojs.createTimeRanges", "videojs.time.createTimeRanges", Ah), ip.formatTime = Zc(9, "videojs.formatTime", "videojs.time.formatTime", Nh), ip.setFormatTime = Zc(9, "videojs.setFormatTime", "videojs.time.setFormatTime", Lh), ip.resetFormatTime = Zc(9, "videojs.resetFormatTime", "videojs.time.resetFormatTime", Oh), ip.parseUrl = Zc(9, "videojs.parseUrl", "videojs.url.parseUrl", sd), ip.isCrossOrigin = Zc(9, "videojs.isCrossOrigin", "videojs.url.isCrossOrigin", ad), ip.EventTarget = oh, ip.any = Zl, ip.on = Kl, ip.one = Jl, ip.off = Yl, ip.trigger = Ql, ip.xhr = qe, ip.TextTrack = dd, ip.AudioTrack = ud, ip.VideoTrack = cd, ["isEl", "isTextNode", "createEl", "hasClass", "addClass", "removeClass", "toggleClass", "setAttributes", "getAttributes", "emptyEl", "appendContent", "insertContent"].forEach((e12) => {
  ip[e12] = function() {
    return _o.warn(`videojs.${e12}() is deprecated; use videojs.dom.${e12}() instead`), Ll[e12].apply(null, arguments);
  };
}), ip.computedStyle = Zc(9, "videojs.computedStyle", "videojs.dom.computedStyle", Dl), ip.dom = Ll, ip.fn = rh, ip.num = uu, ip.str = wh, ip.url = od, ip.Error = ep;
var sp = class {
  constructor(e12) {
    let t3 = this;
    return t3.id = e12.id, t3.label = t3.id, t3.width = e12.width, t3.height = e12.height, t3.bitrate = e12.bandwidth, t3.frameRate = e12.frameRate, t3.enabled_ = e12.enabled, Object.defineProperty(t3, "enabled", {
      get: () => t3.enabled_(),
      set(e13) {
        t3.enabled_(e13);
      }
    }), t3;
  }
};
var np = class extends ip.EventTarget {
  constructor() {
    super();
    let e12 = this;
    return e12.levels_ = [], e12.selectedIndex_ = -1, Object.defineProperty(e12, "selectedIndex", {
      get: () => e12.selectedIndex_
    }), Object.defineProperty(e12, "length", {
      get: () => e12.levels_.length
    }), e12[Symbol.iterator] = () => e12.levels_.values(), e12;
  }
  addQualityLevel(e12) {
    let t3 = this.getQualityLevelById(e12.id);
    if (t3) return t3;
    const i4 = this.levels_.length;
    return t3 = new sp(e12), "" + i4 in this || Object.defineProperty(this, i4, {
      get() {
        return this.levels_[i4];
      }
    }), this.levels_.push(t3), this.trigger({
      qualityLevel: t3,
      type: "addqualitylevel"
    }), t3;
  }
  removeQualityLevel(e12) {
    let t3 = null;
    for (let i4 = 0, s6 = this.length; i4 < s6; i4++) if (this[i4] === e12) {
      t3 = this.levels_.splice(i4, 1)[0], this.selectedIndex_ === i4 ? this.selectedIndex_ = -1 : this.selectedIndex_ > i4 && this.selectedIndex_--;
      break;
    }
    return t3 && this.trigger({
      qualityLevel: e12,
      type: "removequalitylevel"
    }), t3;
  }
  getQualityLevelById(e12) {
    for (let t3 = 0, i4 = this.length; t3 < i4; t3++) {
      const i5 = this[t3];
      if (i5.id === e12) return i5;
    }
    return null;
  }
  dispose() {
    this.selectedIndex_ = -1, this.levels_.length = 0;
  }
};
np.prototype.allowedEvents_ = {
  change: "change",
  addqualitylevel: "addqualitylevel",
  removequalitylevel: "removequalitylevel"
};
for (const f_ in np.prototype.allowedEvents_) np.prototype["on" + f_] = null;
var rp = "4.1.0";
var ap = function(e12, t3) {
  const i4 = e12.qualityLevels, s6 = new np(), n6 = function() {
    s6.dispose(), e12.qualityLevels = i4, e12.off("dispose", n6);
  };
  return e12.on("dispose", n6), e12.qualityLevels = () => s6, e12.qualityLevels.VERSION = rp, s6;
};
var op = function(e12) {
  return ap(this, ip.obj.merge({}, e12));
};
ip.registerPlugin("qualityLevels", op), op.VERSION = rp;
var lp = Bt;
var hp = (e12, t3) => t3 && t3.responseURL && e12 !== t3.responseURL ? t3.responseURL : e12;
var dp = (e12) => ip.log.debug ? ip.log.debug.bind(ip, "VHS:", `${e12} >`) : function() {
};
function up(...e12) {
  const t3 = ip.obj || ip;
  return (t3.merge || t3.mergeOptions).apply(t3, e12);
}
function cp(...e12) {
  const t3 = ip.time || ip;
  return (t3.createTimeRanges || t3.createTimeRanges).apply(t3, e12);
}
function pp(e12) {
  if (0 === e12.length) return "Buffered Ranges are empty";
  let t3 = "Buffered Ranges: \n";
  for (let i4 = 0; i4 < e12.length; i4++) {
    const s6 = e12.start(i4), n6 = e12.end(i4);
    t3 += `${s6} --> ${n6}. Duration (${n6 - s6})
`;
  }
  return t3;
}
var mp = 1 / 30;
var gp = 3 * mp;
var fp = function(e12, t3) {
  const i4 = [];
  let s6;
  if (e12 && e12.length) for (s6 = 0; s6 < e12.length; s6++) t3(e12.start(s6), e12.end(s6)) && i4.push([e12.start(s6), e12.end(s6)]);
  return cp(i4);
};
var yp = function(e12, t3) {
  return fp(e12, function(e13, i4) {
    return e13 - gp <= t3 && i4 + gp >= t3;
  });
};
var _p = function(e12, t3) {
  return fp(e12, function(e13) {
    return e13 - mp >= t3;
  });
};
var vp = function(e12) {
  if (e12.length < 2) return cp();
  const t3 = [];
  for (let i4 = 1; i4 < e12.length; i4++) {
    const s6 = e12.end(i4 - 1), n6 = e12.start(i4);
    t3.push([s6, n6]);
  }
  return cp(t3);
};
var bp = function(e12, t3) {
  let i4 = null, s6 = null, n6 = 0;
  const r3 = [], a6 = [];
  if (!(e12 && e12.length && t3 && t3.length)) return cp();
  let o4 = e12.length;
  for (; o4--; ) r3.push({
    time: e12.start(o4),
    type: "start"
  }), r3.push({
    time: e12.end(o4),
    type: "end"
  });
  for (o4 = t3.length; o4--; ) r3.push({
    time: t3.start(o4),
    type: "start"
  }), r3.push({
    time: t3.end(o4),
    type: "end"
  });
  for (r3.sort(function(e13, t4) {
    return e13.time - t4.time;
  }), o4 = 0; o4 < r3.length; o4++) "start" === r3[o4].type ? (n6++, 2 === n6 && (i4 = r3[o4].time)) : "end" === r3[o4].type && (n6--, 1 === n6 && (s6 = r3[o4].time)), null !== i4 && null !== s6 && (a6.push([i4, s6]), i4 = null, s6 = null);
  return cp(a6);
};
var Tp = (e12) => {
  const t3 = [];
  if (!e12 || !e12.length) return "";
  for (let i4 = 0; i4 < e12.length; i4++) t3.push(e12.start(i4) + " => " + e12.end(i4));
  return t3.join(", ");
};
var Sp = function(e12, t3, i4 = 1) {
  return ((e12.length ? e12.end(e12.length - 1) : 0) - t3) / i4;
};
var Ep = (e12) => {
  const t3 = [];
  for (let i4 = 0; i4 < e12.length; i4++) t3.push({
    start: e12.start(i4),
    end: e12.end(i4)
  });
  return t3;
};
var wp = function(e12, t3) {
  if (e12 === t3) return false;
  if (!e12 && t3 || !t3 && e12) return true;
  if (e12.length !== t3.length) return true;
  for (let i4 = 0; i4 < e12.length; i4++) if (e12.start(i4) !== t3.start(i4) || e12.end(i4) !== t3.end(i4)) return true;
  return false;
};
var Cp = function(e12) {
  if (e12 && e12.length && e12.end) return e12.end(e12.length - 1);
};
var kp = function(e12, t3) {
  let i4 = 0;
  if (!e12 || !e12.length) return i4;
  for (let s6 = 0; s6 < e12.length; s6++) {
    const n6 = e12.start(s6), r3 = e12.end(s6);
    t3 > r3 || (i4 += t3 > n6 && t3 <= r3 ? r3 - t3 : r3 - n6);
  }
  return i4;
};
var xp = (e12, t3) => {
  if (!t3.preload) return t3.duration;
  let i4 = 0;
  return (t3.parts || []).forEach(function(e13) {
    i4 += e13.duration;
  }), (t3.preloadHints || []).forEach(function(t4) {
    "PART" === t4.type && (i4 += e12.partTargetDuration);
  }), i4;
};
var Ip = (e12) => (e12.segments || []).reduce((e13, t3, i4) => (t3.parts ? t3.parts.forEach(function(s6, n6) {
  e13.push({
    duration: s6.duration,
    segmentIndex: i4,
    partIndex: n6,
    part: s6,
    segment: t3
  });
}) : e13.push({
  duration: t3.duration,
  segmentIndex: i4,
  partIndex: null,
  segment: t3,
  part: null
}), e13), []);
var Ap = (e12) => {
  const t3 = e12.segments && e12.segments.length && e12.segments[e12.segments.length - 1];
  return t3 && t3.parts || [];
};
var Dp = ({
  preloadSegment: e12
}) => {
  if (!e12) return;
  const {
    parts: t3,
    preloadHints: i4
  } = e12;
  let s6 = (i4 || []).reduce((e13, t4) => e13 + ("PART" === t4.type ? 1 : 0), 0);
  return s6 += t3 && t3.length ? t3.length : 0, s6;
};
var Pp = (e12, t3) => {
  if (t3.endList) return 0;
  if (e12 && e12.suggestedPresentationDelay) return e12.suggestedPresentationDelay;
  const i4 = Ap(t3).length > 0;
  return i4 && t3.serverControl && t3.serverControl.partHoldBack ? t3.serverControl.partHoldBack : i4 && t3.partTargetDuration ? 3 * t3.partTargetDuration : t3.serverControl && t3.serverControl.holdBack ? t3.serverControl.holdBack : t3.targetDuration ? 3 * t3.targetDuration : 0;
};
var Lp = function(e12, t3) {
  let i4 = 0, s6 = t3 - e12.mediaSequence, n6 = e12.segments[s6];
  if (n6) {
    if (void 0 !== n6.start) return {
      result: n6.start,
      precise: true
    };
    if (void 0 !== n6.end) return {
      result: n6.end - n6.duration,
      precise: true
    };
  }
  for (; s6--; ) {
    if (n6 = e12.segments[s6], void 0 !== n6.end) return {
      result: i4 + n6.end,
      precise: true
    };
    if (i4 += xp(e12, n6), void 0 !== n6.start) return {
      result: i4 + n6.start,
      precise: true
    };
  }
  return {
    result: i4,
    precise: false
  };
};
var Op = function(e12, t3) {
  let i4, s6 = 0, n6 = t3 - e12.mediaSequence;
  for (; n6 < e12.segments.length; n6++) {
    if (i4 = e12.segments[n6], void 0 !== i4.start) return {
      result: i4.start - s6,
      precise: true
    };
    if (s6 += xp(e12, i4), void 0 !== i4.end) return {
      result: i4.end - s6,
      precise: true
    };
  }
  return {
    result: -1,
    precise: false
  };
};
var Np = function(e12, t3, i4) {
  if (void 0 === t3 && (t3 = e12.mediaSequence + e12.segments.length), t3 < e12.mediaSequence) return 0;
  const s6 = Lp(e12, t3);
  if (s6.precise) return s6.result;
  const n6 = Op(e12, t3);
  return n6.precise ? n6.result : s6.result + i4;
};
var Rp = function(e12, t3, i4) {
  if (!e12) return 0;
  if ("number" != typeof i4 && (i4 = 0), void 0 === t3) {
    if (e12.totalDuration) return e12.totalDuration;
    if (!e12.endList) return g3.Infinity;
  }
  return Np(e12, t3, i4);
};
var Mp = function({
  defaultDuration: e12,
  durationList: t3,
  startIndex: i4,
  endIndex: s6
}) {
  let n6 = 0;
  if (i4 > s6 && ([i4, s6] = [s6, i4]), i4 < 0) {
    for (let t4 = i4; t4 < Math.min(0, s6); t4++) n6 += e12;
    i4 = 0;
  }
  for (let r3 = i4; r3 < s6; r3++) n6 += t3[r3].duration;
  return n6;
};
var Up = function(e12, t3, i4, s6) {
  if (!e12 || !e12.segments) return null;
  if (e12.endList) return Rp(e12);
  if (null === t3) return null;
  t3 = t3 || 0;
  let n6 = Np(e12, e12.mediaSequence + e12.segments.length, t3);
  return i4 && (n6 -= s6 = "number" == typeof s6 ? s6 : Pp(null, e12)), Math.max(0, n6);
};
var Bp = function(e12) {
  return e12.excludeUntil && e12.excludeUntil > Date.now();
};
var Fp = function(e12) {
  return e12.excludeUntil && e12.excludeUntil === 1 / 0;
};
var qp = function(e12) {
  const t3 = Bp(e12);
  return !e12.disabled && !t3;
};
var jp = function(e12, t3) {
  return t3.attributes && t3.attributes[e12];
};
var $p = function(e12, t3, i4, s6 = 0) {
  if (!jp("BANDWIDTH", i4)) return NaN;
  return (e12 * i4.attributes.BANDWIDTH - 8 * s6) / t3;
};
var Hp = (e12, t3) => {
  if (1 === e12.playlists.length) return true;
  const i4 = t3.attributes.BANDWIDTH || Number.MAX_VALUE;
  return 0 === e12.playlists.filter((e13) => !!qp(e13) && (e13.attributes.BANDWIDTH || 0) < i4).length;
};
var Vp = (e12, t3) => !(!e12 && !t3 || !e12 && t3 || e12 && !t3) && (e12 === t3 || !(!e12.id || !t3.id || e12.id !== t3.id) || !(!e12.resolvedUri || !t3.resolvedUri || e12.resolvedUri !== t3.resolvedUri) || !(!e12.uri || !t3.uri || e12.uri !== t3.uri));
var zp = function(e12, t3) {
  const i4 = e12 && e12.mediaGroups && e12.mediaGroups.AUDIO || {};
  let s6 = false;
  for (const n6 in i4) {
    for (const e13 in i4[n6]) if (s6 = t3(i4[n6][e13]), s6) break;
    if (s6) break;
  }
  return !!s6;
};
var Wp = (e12) => {
  if (!e12 || !e12.playlists || !e12.playlists.length) {
    return zp(e12, (e13) => e13.playlists && e13.playlists.length || e13.uri);
  }
  for (let t3 = 0; t3 < e12.playlists.length; t3++) {
    const i4 = e12.playlists[t3], s6 = i4.attributes && i4.attributes.CODECS;
    if (s6 && s6.split(",").every((e13) => ai(e13))) continue;
    if (!zp(e12, (e13) => Vp(i4, e13))) return false;
  }
  return true;
};
var Gp = {
  liveEdgeDelay: Pp,
  duration: Rp,
  seekable: function(e12, t3, i4) {
    const s6 = t3 || 0;
    let n6 = Up(e12, t3, true, i4);
    return null === n6 ? cp() : (n6 < s6 && (n6 = s6), cp(s6, n6));
  },
  getMediaInfoForTime: function({
    playlist: e12,
    currentTime: t3,
    startingSegmentIndex: i4,
    startingPartIndex: s6,
    startTime: n6,
    exactManifestTimings: r3
  }) {
    let a6 = t3 - n6;
    const o4 = Ip(e12);
    let l5 = 0;
    for (let h = 0; h < o4.length; h++) {
      const e13 = o4[h];
      if (i4 === e13.segmentIndex && ("number" != typeof s6 || "number" != typeof e13.partIndex || s6 === e13.partIndex)) {
        l5 = h;
        break;
      }
    }
    if (a6 < 0) {
      if (l5 > 0) for (let t4 = l5 - 1; t4 >= 0; t4--) {
        const i5 = o4[t4];
        if (a6 += i5.duration, r3) {
          if (a6 < 0) continue;
        } else if (a6 + mp <= 0) continue;
        return {
          partIndex: i5.partIndex,
          segmentIndex: i5.segmentIndex,
          startTime: n6 - Mp({
            defaultDuration: e12.targetDuration,
            durationList: o4,
            startIndex: l5,
            endIndex: t4
          })
        };
      }
      return {
        partIndex: o4[0] && o4[0].partIndex || null,
        segmentIndex: o4[0] && o4[0].segmentIndex || 0,
        startTime: t3
      };
    }
    if (l5 < 0) {
      for (let i5 = l5; i5 < 0; i5++) if (a6 -= e12.targetDuration, a6 < 0) return {
        partIndex: o4[0] && o4[0].partIndex || null,
        segmentIndex: o4[0] && o4[0].segmentIndex || 0,
        startTime: t3
      };
      l5 = 0;
    }
    for (let h = l5; h < o4.length; h++) {
      const t4 = o4[h];
      a6 -= t4.duration;
      const i5 = t4.duration > mp;
      if (!(0 === a6) && !(i5 && a6 + mp >= 0) || h === o4.length - 1) {
        if (r3) {
          if (a6 > 0) continue;
        } else if (a6 - mp >= 0) continue;
        return {
          partIndex: t4.partIndex,
          segmentIndex: t4.segmentIndex,
          startTime: n6 + Mp({
            defaultDuration: e12.targetDuration,
            durationList: o4,
            startIndex: l5,
            endIndex: h
          })
        };
      }
    }
    return {
      segmentIndex: o4[o4.length - 1].segmentIndex,
      partIndex: o4[o4.length - 1].partIndex,
      startTime: t3
    };
  },
  isEnabled: qp,
  isDisabled: function(e12) {
    return e12.disabled;
  },
  isExcluded: Bp,
  isIncompatible: Fp,
  playlistEnd: Up,
  isAes: function(e12) {
    for (let t3 = 0; t3 < e12.segments.length; t3++) if (e12.segments[t3].key) return true;
    return false;
  },
  hasAttribute: jp,
  estimateSegmentRequestTime: $p,
  isLowestEnabledRendition: Hp,
  isAudioOnly: Wp,
  playlistMatch: Vp,
  segmentDurationWithParts: xp
};
var {
  log: Xp
} = ip;
var Kp = (e12, t3) => `${e12}-${t3}`;
var Yp = (e12, t3, i4) => `placeholder-uri-${e12}-${t3}-${i4}`;
var Qp = ({
  onwarn: e12,
  oninfo: t3,
  manifestString: i4,
  customTagParsers: s6 = [],
  customTagMappers: n6 = [],
  llhls: r3
}) => {
  const a6 = new Qt();
  e12 && a6.on("warn", e12), t3 && a6.on("info", t3), s6.forEach((e13) => a6.addParser(e13)), n6.forEach((e13) => a6.addTagMapper(e13)), a6.push(i4), a6.end();
  const o4 = a6.manifest;
  if (r3 || (["preloadSegment", "skip", "serverControl", "renditionReports", "partInf", "partTargetDuration"].forEach(function(e13) {
    o4.hasOwnProperty(e13) && delete o4[e13];
  }), o4.segments && o4.segments.forEach(function(e13) {
    ["parts", "preloadHints"].forEach(function(t4) {
      e13.hasOwnProperty(t4) && delete e13[t4];
    });
  })), !o4.targetDuration) {
    let t4 = 10;
    o4.segments && o4.segments.length && (t4 = o4.segments.reduce((e13, t5) => Math.max(e13, t5.duration), 0)), e12 && e12({
      message: `manifest has no targetDuration defaulting to ${t4}`
    }), o4.targetDuration = t4;
  }
  const l5 = Ap(o4);
  if (l5.length && !o4.partTargetDuration) {
    const t4 = l5.reduce((e13, t5) => Math.max(e13, t5.duration), 0);
    e12 && (e12({
      message: `manifest has no partTargetDuration defaulting to ${t4}`
    }), Xp.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")), o4.partTargetDuration = t4;
  }
  return o4;
};
var Jp = (e12, t3) => {
  e12.mediaGroups && ["AUDIO", "SUBTITLES"].forEach((i4) => {
    if (e12.mediaGroups[i4]) for (const s6 in e12.mediaGroups[i4]) for (const n6 in e12.mediaGroups[i4][s6]) {
      const r3 = e12.mediaGroups[i4][s6][n6];
      t3(r3, i4, s6, n6);
    }
  });
};
var Zp = ({
  playlist: e12,
  uri: t3,
  id: i4
}) => {
  e12.id = i4, e12.playlistErrors_ = 0, t3 && (e12.uri = t3), e12.attributes = e12.attributes || {};
};
var em = (e12) => {
  let t3 = e12.playlists.length;
  for (; t3--; ) {
    const i4 = e12.playlists[t3];
    Zp({
      playlist: i4,
      id: Kp(t3, i4.uri)
    }), i4.resolvedUri = lp(e12.uri, i4.uri), e12.playlists[i4.id] = i4, e12.playlists[i4.uri] = i4, i4.attributes.BANDWIDTH || Xp.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.");
  }
};
var tm = (e12) => {
  Jp(e12, (t3) => {
    t3.uri && (t3.resolvedUri = lp(e12.uri, t3.uri));
  });
};
var im = (e12, t3) => {
  const i4 = Kp(0, t3), s6 = {
    mediaGroups: {
      AUDIO: {},
      VIDEO: {},
      "CLOSED-CAPTIONS": {},
      SUBTITLES: {}
    },
    uri: g3.location.href,
    resolvedUri: g3.location.href,
    playlists: [{
      uri: t3,
      id: i4,
      resolvedUri: t3,
      attributes: {}
    }]
  };
  return s6.playlists[i4] = s6.playlists[0], s6.playlists[t3] = s6.playlists[0], s6;
};
var sm = (e12, t3, i4 = Yp) => {
  e12.uri = t3;
  for (let n6 = 0; n6 < e12.playlists.length; n6++) if (!e12.playlists[n6].uri) {
    const t4 = `placeholder-uri-${n6}`;
    e12.playlists[n6].uri = t4;
  }
  const s6 = Wp(e12);
  Jp(e12, (t4, n6, r3, a6) => {
    if (!t4.playlists || !t4.playlists.length) {
      if (s6 && "AUDIO" === n6 && !t4.uri) for (let t5 = 0; t5 < e12.playlists.length; t5++) {
        const i5 = e12.playlists[t5];
        if (i5.attributes && i5.attributes.AUDIO && i5.attributes.AUDIO === r3) return;
      }
      t4.playlists = [Ot({}, t4)];
    }
    t4.playlists.forEach(function(t5, s7) {
      const o4 = i4(n6, r3, a6, t5), l5 = Kp(s7, o4);
      t5.uri ? t5.resolvedUri = t5.resolvedUri || lp(e12.uri, t5.uri) : (t5.uri = 0 === s7 ? o4 : l5, t5.resolvedUri = t5.uri), t5.id = t5.id || l5, t5.attributes = t5.attributes || {}, e12.playlists[t5.id] = t5, e12.playlists[t5.uri] = t5;
    });
  }), em(e12), tm(e12);
};
var nm = class {
  constructor() {
    this.offset_ = null, this.pendingDateRanges_ = /* @__PURE__ */ new Map(), this.processedDateRanges_ = /* @__PURE__ */ new Map();
  }
  setOffset(e12 = []) {
    if (null !== this.offset_) return;
    if (!e12.length) return;
    const [t3] = e12;
    void 0 !== t3.programDateTime && (this.offset_ = t3.programDateTime / 1e3);
  }
  setPendingDateRanges(e12 = []) {
    if (!e12.length) return;
    const [t3] = e12, i4 = t3.startDate.getTime();
    this.trimProcessedDateRanges_(i4), this.pendingDateRanges_ = e12.reduce((e13, t4) => (e13.set(t4.id, t4), e13), /* @__PURE__ */ new Map());
  }
  processDateRange(e12) {
    this.pendingDateRanges_.delete(e12.id), this.processedDateRanges_.set(e12.id, e12);
  }
  getDateRangesToProcess() {
    if (null === this.offset_) return [];
    const e12 = {}, t3 = [];
    this.pendingDateRanges_.forEach((i4, s6) => {
      if (!this.processedDateRanges_.has(s6) && (i4.startTime = i4.startDate.getTime() / 1e3 - this.offset_, i4.processDateRange = () => this.processDateRange(i4), t3.push(i4), i4.class)) if (e12[i4.class]) {
        const t4 = e12[i4.class].push(i4);
        i4.classListIndex = t4 - 1;
      } else e12[i4.class] = [i4], i4.classListIndex = 0;
    });
    for (const i4 of t3) {
      const t4 = e12[i4.class] || [];
      i4.endDate ? i4.endTime = i4.endDate.getTime() / 1e3 - this.offset_ : i4.endOnNext && t4[i4.classListIndex + 1] ? i4.endTime = t4[i4.classListIndex + 1].startTime : i4.duration ? i4.endTime = i4.startTime + i4.duration : i4.plannedDuration ? i4.endTime = i4.startTime + i4.plannedDuration : i4.endTime = i4.startTime;
    }
    return t3;
  }
  trimProcessedDateRanges_(e12) {
    new Map(this.processedDateRanges_).forEach((t3, i4) => {
      t3.startDate.getTime() < e12 && this.processedDateRanges_.delete(i4);
    });
  }
};
var {
  EventTarget: rm
} = ip;
var am = (e12, t3) => {
  if (t3.endList || !t3.serverControl) return e12;
  const i4 = {};
  if (t3.serverControl.canBlockReload) {
    const {
      preloadSegment: e13
    } = t3;
    let s6 = t3.mediaSequence + t3.segments.length;
    if (e13) {
      const n6 = e13.parts || [], r3 = Dp(t3) - 1;
      r3 > -1 && r3 !== n6.length - 1 && (i4._HLS_part = r3), (r3 > -1 || n6.length) && s6--;
    }
    i4._HLS_msn = s6;
  }
  if (t3.serverControl && t3.serverControl.canSkipUntil && (i4._HLS_skip = t3.serverControl.canSkipDateranges ? "v2" : "YES"), Object.keys(i4).length) {
    const t4 = new g3.URL(e12);
    ["_HLS_skip", "_HLS_msn", "_HLS_part"].forEach(function(e13) {
      i4.hasOwnProperty(e13) && t4.searchParams.set(e13, i4[e13]);
    }), e12 = t4.toString();
  }
  return e12;
};
var om = (e12, t3) => {
  if (!e12) return t3;
  const i4 = up(e12, t3);
  if (e12.preloadHints && !t3.preloadHints && delete i4.preloadHints, e12.parts && !t3.parts) delete i4.parts;
  else if (e12.parts && t3.parts) for (let s6 = 0; s6 < t3.parts.length; s6++) e12.parts && e12.parts[s6] && (i4.parts[s6] = up(e12.parts[s6], t3.parts[s6]));
  return !e12.skipped && t3.skipped && (i4.skipped = false), e12.preload && !t3.preload && (i4.preload = false), i4;
};
var lm = (e12, t3, i4) => {
  const s6 = e12.slice(), n6 = t3.slice();
  i4 = i4 || 0;
  const r3 = [];
  let a6;
  for (let o4 = 0; o4 < n6.length; o4++) {
    const e13 = s6[o4 + i4], t4 = n6[o4];
    e13 ? (a6 = e13.map || a6, r3.push(om(e13, t4))) : (a6 && !t4.map && (t4.map = a6), r3.push(t4));
  }
  return r3;
};
var hm = (e12, t3) => {
  !e12.resolvedUri && e12.uri && (e12.resolvedUri = lp(t3, e12.uri)), e12.key && !e12.key.resolvedUri && (e12.key.resolvedUri = lp(t3, e12.key.uri)), e12.map && !e12.map.resolvedUri && (e12.map.resolvedUri = lp(t3, e12.map.uri)), e12.map && e12.map.key && !e12.map.key.resolvedUri && (e12.map.key.resolvedUri = lp(t3, e12.map.key.uri)), e12.parts && e12.parts.length && e12.parts.forEach((e13) => {
    e13.resolvedUri || (e13.resolvedUri = lp(t3, e13.uri));
  }), e12.preloadHints && e12.preloadHints.length && e12.preloadHints.forEach((e13) => {
    e13.resolvedUri || (e13.resolvedUri = lp(t3, e13.uri));
  });
};
var dm = function(e12) {
  const t3 = e12.segments || [], i4 = e12.preloadSegment;
  if (i4 && i4.parts && i4.parts.length) {
    if (i4.preloadHints) {
      for (let e13 = 0; e13 < i4.preloadHints.length; e13++) if ("MAP" === i4.preloadHints[e13].type) return t3;
    }
    i4.duration = e12.targetDuration, i4.preload = true, t3.push(i4);
  }
  return t3;
};
var um = (e12, t3) => e12 === t3 || e12.segments && t3.segments && e12.segments.length === t3.segments.length && e12.endList === t3.endList && e12.mediaSequence === t3.mediaSequence && e12.preloadSegment === t3.preloadSegment;
var cm = (e12, t3, i4 = um) => {
  const s6 = up(e12, {}), n6 = s6.playlists[t3.id];
  if (!n6) return null;
  if (i4(n6, t3)) return null;
  t3.segments = dm(t3);
  const r3 = up(n6, t3);
  if (r3.preloadSegment && !t3.preloadSegment && delete r3.preloadSegment, n6.segments) {
    if (t3.skip) {
      t3.segments = t3.segments || [];
      for (let e13 = 0; e13 < t3.skip.skippedSegments; e13++) t3.segments.unshift({
        skipped: true
      });
    }
    r3.segments = lm(n6.segments, t3.segments, t3.mediaSequence - n6.mediaSequence);
  }
  r3.segments.forEach((e13) => {
    hm(e13, r3.resolvedUri);
  });
  for (let a6 = 0; a6 < s6.playlists.length; a6++) s6.playlists[a6].id === t3.id && (s6.playlists[a6] = r3);
  return s6.playlists[t3.id] = r3, s6.playlists[t3.uri] = r3, Jp(e12, (e13, i5, s7, n7) => {
    if (e13.playlists) for (let a6 = 0; a6 < e13.playlists.length; a6++) t3.id === e13.playlists[a6].id && (e13.playlists[a6] = r3);
  }), s6;
};
var pm = (e12, t3) => {
  const i4 = e12.segments || [], s6 = i4[i4.length - 1], n6 = s6 && s6.parts && s6.parts[s6.parts.length - 1], r3 = n6 && n6.duration || s6 && s6.duration;
  return t3 && r3 ? 1e3 * r3 : 500 * (e12.partTargetDuration || e12.targetDuration || 10);
};
var mm = class extends rm {
  constructor(e12, t3, i4 = {}) {
    if (super(), !e12) throw new Error("A non-empty playlist URL or object is required");
    this.logger_ = dp("PlaylistLoader");
    const {
      withCredentials: s6 = false
    } = i4;
    this.src = e12, this.vhs_ = t3, this.withCredentials = s6, this.addDateRangesToTextTrack_ = i4.addDateRangesToTextTrack;
    const n6 = t3.options_;
    this.customTagParsers = n6 && n6.customTagParsers || [], this.customTagMappers = n6 && n6.customTagMappers || [], this.llhls = n6 && n6.llhls, this.dateRangesStorage_ = new nm(), this.state = "HAVE_NOTHING", this.handleMediaupdatetimeout_ = this.handleMediaupdatetimeout_.bind(this), this.on("mediaupdatetimeout", this.handleMediaupdatetimeout_), this.on("loadedplaylist", this.handleLoadedPlaylist_.bind(this));
  }
  handleLoadedPlaylist_() {
    const e12 = this.media();
    if (!e12) return;
    this.dateRangesStorage_.setOffset(e12.segments), this.dateRangesStorage_.setPendingDateRanges(e12.dateRanges);
    const t3 = this.dateRangesStorage_.getDateRangesToProcess();
    t3.length && this.addDateRangesToTextTrack_ && this.addDateRangesToTextTrack_(t3);
  }
  handleMediaupdatetimeout_() {
    if ("HAVE_METADATA" !== this.state) return;
    const e12 = this.media();
    let t3 = lp(this.main.uri, e12.uri);
    this.llhls && (t3 = am(t3, e12)), this.state = "HAVE_CURRENT_METADATA", this.request = this.vhs_.xhr({
      uri: t3,
      withCredentials: this.withCredentials,
      requestType: "hls-playlist"
    }, (e13, t4) => {
      if (this.request) return e13 ? this.playlistRequestError(this.request, this.media(), "HAVE_METADATA") : void this.haveMetadata({
        playlistString: this.request.responseText,
        url: this.media().uri,
        id: this.media().id
      });
    });
  }
  playlistRequestError(e12, t3, i4) {
    const {
      uri: s6,
      id: n6
    } = t3;
    this.request = null, i4 && (this.state = i4), this.error = {
      playlist: this.main.playlists[n6],
      status: e12.status,
      message: `HLS playlist request error at URL: ${s6}.`,
      responseText: e12.responseText,
      code: e12.status >= 500 ? 4 : 2,
      metadata: {
        errorType: ip.Error.HlsPlaylistRequestError
      }
    }, this.trigger("error");
  }
  parseManifest_({
    url: e12,
    manifestString: t3
  }) {
    return Qp({
      onwarn: ({
        message: t4
      }) => this.logger_(`m3u8-parser warn for ${e12}: ${t4}`),
      oninfo: ({
        message: t4
      }) => this.logger_(`m3u8-parser info for ${e12}: ${t4}`),
      manifestString: t3,
      customTagParsers: this.customTagParsers,
      customTagMappers: this.customTagMappers,
      llhls: this.llhls
    });
  }
  haveMetadata({
    playlistString: e12,
    playlistObject: t3,
    url: i4,
    id: s6
  }) {
    this.request = null, this.state = "HAVE_METADATA";
    const n6 = t3 || this.parseManifest_({
      url: i4,
      manifestString: e12
    });
    n6.lastRequest = Date.now(), Zp({
      playlist: n6,
      uri: i4,
      id: s6
    });
    const r3 = cm(this.main, n6);
    this.targetDuration = n6.partTargetDuration || n6.targetDuration, this.pendingMedia_ = null, r3 ? (this.main = r3, this.media_ = this.main.playlists[s6]) : this.trigger("playlistunchanged"), this.updateMediaUpdateTimeout_(pm(this.media(), !!r3)), this.trigger("loadedplaylist");
  }
  dispose() {
    this.trigger("dispose"), this.stopRequest(), g3.clearTimeout(this.mediaUpdateTimeout), g3.clearTimeout(this.finalRenditionTimeout), this.dateRangesStorage_ = new nm(), this.off();
  }
  stopRequest() {
    if (this.request) {
      const e12 = this.request;
      this.request = null, e12.onreadystatechange = null, e12.abort();
    }
  }
  media(e12, t3) {
    if (!e12) return this.media_;
    if ("HAVE_NOTHING" === this.state) throw new Error("Cannot switch media playlist from " + this.state);
    if ("string" == typeof e12) {
      if (!this.main.playlists[e12]) throw new Error("Unknown playlist URI: " + e12);
      e12 = this.main.playlists[e12];
    }
    if (g3.clearTimeout(this.finalRenditionTimeout), t3) {
      const t4 = (e12.partTargetDuration || e12.targetDuration) / 2 * 1e3 || 5e3;
      return void (this.finalRenditionTimeout = g3.setTimeout(this.media.bind(this, e12, false), t4));
    }
    const i4 = this.state, s6 = !this.media_ || e12.id !== this.media_.id, n6 = this.main.playlists[e12.id];
    if (n6 && n6.endList || e12.endList && e12.segments.length) return this.request && (this.request.onreadystatechange = null, this.request.abort(), this.request = null), this.state = "HAVE_METADATA", this.media_ = e12, void (s6 && (this.trigger("mediachanging"), "HAVE_MAIN_MANIFEST" === i4 ? this.trigger("loadedmetadata") : this.trigger("mediachange")));
    if (this.updateMediaUpdateTimeout_(pm(e12, true)), s6) {
      if (this.state = "SWITCHING_MEDIA", this.request) {
        if (e12.resolvedUri === this.request.url) return;
        this.request.onreadystatechange = null, this.request.abort(), this.request = null;
      }
      this.media_ && this.trigger("mediachanging"), this.pendingMedia_ = e12, this.request = this.vhs_.xhr({
        uri: e12.resolvedUri,
        withCredentials: this.withCredentials,
        requestType: "hls-playlist"
      }, (t4, s7) => {
        if (this.request) {
          if (e12.lastRequest = Date.now(), e12.resolvedUri = hp(e12.resolvedUri, s7), t4) return this.playlistRequestError(this.request, e12, i4);
          this.haveMetadata({
            playlistString: s7.responseText,
            url: e12.uri,
            id: e12.id
          }), "HAVE_MAIN_MANIFEST" === i4 ? this.trigger("loadedmetadata") : this.trigger("mediachange");
        }
      });
    }
  }
  pause() {
    this.mediaUpdateTimeout && (g3.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null), this.stopRequest(), "HAVE_NOTHING" === this.state && (this.started = false), "SWITCHING_MEDIA" === this.state ? this.media_ ? this.state = "HAVE_METADATA" : this.state = "HAVE_MAIN_MANIFEST" : "HAVE_CURRENT_METADATA" === this.state && (this.state = "HAVE_METADATA");
  }
  load(e12) {
    this.mediaUpdateTimeout && (g3.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null);
    const t3 = this.media();
    if (e12) {
      const e13 = t3 ? (t3.partTargetDuration || t3.targetDuration) / 2 * 1e3 : 5e3;
      this.mediaUpdateTimeout = g3.setTimeout(() => {
        this.mediaUpdateTimeout = null, this.load();
      }, e13);
    } else this.started ? t3 && !t3.endList ? this.trigger("mediaupdatetimeout") : this.trigger("loadedplaylist") : this.start();
  }
  updateMediaUpdateTimeout_(e12) {
    this.mediaUpdateTimeout && (g3.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null), this.media() && !this.media().endList && (this.mediaUpdateTimeout = g3.setTimeout(() => {
      this.mediaUpdateTimeout = null, this.trigger("mediaupdatetimeout"), this.updateMediaUpdateTimeout_(e12);
    }, e12));
  }
  start() {
    if (this.started = true, "object" == typeof this.src) return this.src.uri || (this.src.uri = g3.location.href), this.src.resolvedUri = this.src.uri, void setTimeout(() => {
      this.setupInitialPlaylist(this.src);
    }, 0);
    this.request = this.vhs_.xhr({
      uri: this.src,
      withCredentials: this.withCredentials,
      requestType: "hls-playlist"
    }, (e12, t3) => {
      if (!this.request) return;
      if (this.request = null, e12) return this.error = {
        status: t3.status,
        message: `HLS playlist request error at URL: ${this.src}.`,
        responseText: t3.responseText,
        code: 2,
        metadata: {
          errorType: ip.Error.HlsPlaylistRequestError
        }
      }, "HAVE_NOTHING" === this.state && (this.started = false), this.trigger("error");
      this.src = hp(this.src, t3);
      const i4 = this.parseManifest_({
        manifestString: t3.responseText,
        url: this.src
      });
      this.setupInitialPlaylist(i4);
    });
  }
  srcUri() {
    return "string" == typeof this.src ? this.src : this.src.uri;
  }
  setupInitialPlaylist(e12) {
    if (this.state = "HAVE_MAIN_MANIFEST", e12.playlists) return this.main = e12, sm(this.main, this.srcUri()), e12.playlists.forEach((e13) => {
      e13.segments = dm(e13), e13.segments.forEach((t4) => {
        hm(t4, e13.resolvedUri);
      });
    }), this.trigger("loadedplaylist"), void (this.request || this.media(this.main.playlists[0]));
    const t3 = this.srcUri() || g3.location.href;
    this.main = im(e12, t3), this.haveMetadata({
      playlistObject: e12,
      url: t3,
      id: this.main.playlists[0].id
    }), this.trigger("loadedmetadata");
  }
  updateOrDeleteClone(e12, t3) {
    const i4 = this.main, s6 = e12.ID;
    let n6 = i4.playlists.length;
    for (; n6--; ) {
      const r3 = i4.playlists[n6];
      if (r3.attributes["PATHWAY-ID"] === s6) {
        const a6 = r3.resolvedUri, o4 = r3.id;
        if (t3) {
          const t4 = this.createCloneURI_(r3.resolvedUri, e12), a7 = Kp(s6, t4), o5 = this.createCloneAttributes_(s6, r3.attributes), l5 = this.createClonePlaylist_(r3, a7, e12, o5);
          i4.playlists[n6] = l5, i4.playlists[a7] = l5, i4.playlists[t4] = l5;
        } else i4.playlists.splice(n6, 1);
        delete i4.playlists[o4], delete i4.playlists[a6];
      }
    }
    this.updateOrDeleteCloneMedia(e12, t3);
  }
  updateOrDeleteCloneMedia(e12, t3) {
    const i4 = this.main, s6 = e12.ID;
    ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((e13) => {
      if (i4.mediaGroups[e13] && i4.mediaGroups[e13][s6]) {
        for (const t4 in i4.mediaGroups[e13]) if (t4 === s6) {
          for (const s7 in i4.mediaGroups[e13][t4]) {
            i4.mediaGroups[e13][t4][s7].playlists.forEach((e14, t5) => {
              const s8 = i4.playlists[e14.id], n6 = s8.id, r3 = s8.resolvedUri;
              delete i4.playlists[n6], delete i4.playlists[r3];
            });
          }
          delete i4.mediaGroups[e13][t4];
        }
      }
    }), t3 && this.createClonedMediaGroups_(e12);
  }
  addClonePathway(e12, t3 = {}) {
    const i4 = this.main, s6 = i4.playlists.length, n6 = this.createCloneURI_(t3.resolvedUri, e12), r3 = Kp(e12.ID, n6), a6 = this.createCloneAttributes_(e12.ID, t3.attributes), o4 = this.createClonePlaylist_(t3, r3, e12, a6);
    i4.playlists[s6] = o4, i4.playlists[r3] = o4, i4.playlists[n6] = o4, this.createClonedMediaGroups_(e12);
  }
  createClonedMediaGroups_(e12) {
    const t3 = e12.ID, i4 = e12["BASE-ID"], s6 = this.main;
    ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((n6) => {
      if (s6.mediaGroups[n6] && !s6.mediaGroups[n6][t3]) {
        for (const r3 in s6.mediaGroups[n6]) if (r3 === i4) {
          s6.mediaGroups[n6][t3] = {};
          for (const i5 in s6.mediaGroups[n6][r3]) {
            const a6 = s6.mediaGroups[n6][r3][i5];
            s6.mediaGroups[n6][t3][i5] = Ot({}, a6);
            const o4 = s6.mediaGroups[n6][t3][i5], l5 = this.createCloneURI_(a6.resolvedUri, e12);
            o4.resolvedUri = l5, o4.uri = l5, o4.playlists = [], a6.playlists.forEach((r4, a7) => {
              const l6 = s6.playlists[r4.id], h = Yp(n6, t3, i5), d4 = Kp(t3, h);
              if (l6 && !s6.playlists[d4]) {
                const t4 = this.createClonePlaylist_(l6, d4, e12), i6 = t4.resolvedUri;
                s6.playlists[d4] = t4, s6.playlists[i6] = t4;
              }
              o4.playlists[a7] = this.createClonePlaylist_(r4, d4, e12);
            });
          }
        }
      }
    });
  }
  createClonePlaylist_(e12, t3, i4, s6) {
    const n6 = this.createCloneURI_(e12.resolvedUri, i4), r3 = {
      resolvedUri: n6,
      uri: n6,
      id: t3
    };
    return e12.segments && (r3.segments = []), s6 && (r3.attributes = s6), up(e12, r3);
  }
  createCloneURI_(e12, t3) {
    const i4 = new URL(e12);
    i4.hostname = t3["URI-REPLACEMENT"].HOST;
    const s6 = t3["URI-REPLACEMENT"].PARAMS;
    for (const n6 of Object.keys(s6)) i4.searchParams.set(n6, s6[n6]);
    return i4.href;
  }
  createCloneAttributes_(e12, t3) {
    const i4 = {
      "PATHWAY-ID": e12
    };
    return ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((s6) => {
      t3[s6] && (i4[s6] = e12);
    }), i4;
  }
  getKeyIdSet(e12) {
    if (e12.contentProtection) {
      const t3 = /* @__PURE__ */ new Set();
      for (const i4 in e12.contentProtection) {
        const s6 = e12.contentProtection[i4].attributes.keyId;
        s6 && t3.add(s6.toLowerCase());
      }
      return t3;
    }
  }
};
var gm = function(e12, t3, i4, s6) {
  const n6 = "arraybuffer" === e12.responseType ? e12.response : e12.responseText;
  !t3 && n6 && (e12.responseTime = Date.now(), e12.roundTripTime = e12.responseTime - e12.requestTime, e12.bytesReceived = n6.byteLength || n6.length, e12.bandwidth || (e12.bandwidth = Math.floor(e12.bytesReceived / e12.roundTripTime * 8 * 1e3))), i4.headers && (e12.responseHeaders = i4.headers), t3 && "ETIMEDOUT" === t3.code && (e12.timedout = true), t3 || e12.aborted || 200 === i4.statusCode || 206 === i4.statusCode || 0 === i4.statusCode || (t3 = new Error("XHR Failed with a response of: " + (e12 && (n6 || e12.responseText)))), s6(t3, e12);
};
var fm = (e12, t3) => {
  if (!e12 || !e12.size) return;
  let i4 = t3;
  return e12.forEach((e13) => {
    i4 = e13(i4);
  }), i4;
};
var ym = (e12, t3, i4, s6) => {
  e12 && e12.size && e12.forEach((e13) => {
    e13(t3, i4, s6);
  });
};
var _m = function() {
  const e12 = function e13(t3, i4) {
    t3 = up({
      timeout: 45e3
    }, t3);
    const s6 = e13.beforeRequest || ip.Vhs.xhr.beforeRequest, n6 = e13._requestCallbackSet || ip.Vhs.xhr._requestCallbackSet || /* @__PURE__ */ new Set(), r3 = e13._responseCallbackSet || ip.Vhs.xhr._responseCallbackSet;
    s6 && "function" == typeof s6 && (ip.log.warn("beforeRequest is deprecated, use onRequest instead."), n6.add(s6));
    const a6 = true === ip.Vhs.xhr.original ? ip.xhr : ip.Vhs.xhr, o4 = fm(n6, t3);
    n6.delete(s6);
    const l5 = a6(o4 || t3, function(e14, t4) {
      return ym(r3, l5, e14, t4), gm(l5, e14, t4, i4);
    }), h = l5.abort;
    return l5.abort = function() {
      return l5.aborted = true, h.apply(l5, arguments);
    }, l5.uri = t3.uri, l5.requestTime = Date.now(), l5;
  };
  return e12.original = true, e12;
};
var vm = function(e12) {
  let t3;
  const i4 = e12.offset;
  return t3 = "bigint" == typeof e12.offset || "bigint" == typeof e12.length ? g3.BigInt(e12.offset) + g3.BigInt(e12.length) - g3.BigInt(1) : e12.offset + e12.length - 1, "bytes=" + i4 + "-" + t3;
};
var bm = function(e12) {
  const t3 = {};
  return e12.byterange && (t3.Range = vm(e12.byterange)), t3;
};
var Tm = function(e12, t3) {
  return e12.start(t3) + "-" + e12.end(t3);
};
var Sm = function(e12, t3) {
  const i4 = e12.toString(16);
  return "00".substring(0, 2 - i4.length) + i4 + (t3 % 2 ? " " : "");
};
var Em = function(e12) {
  return e12 >= 32 && e12 < 126 ? String.fromCharCode(e12) : ".";
};
var wm = function(e12) {
  const t3 = {};
  return Object.keys(e12).forEach((i4) => {
    const s6 = e12[i4];
    _i(s6) ? t3[i4] = {
      bytes: s6.buffer,
      byteOffset: s6.byteOffset,
      byteLength: s6.byteLength
    } : t3[i4] = s6;
  }), t3;
};
var Cm = function(e12) {
  const t3 = e12.byterange || {
    length: 1 / 0,
    offset: 0
  };
  return [t3.length, t3.offset, e12.resolvedUri].join(",");
};
var km = function(e12) {
  return e12.resolvedUri;
};
var xm = (e12) => {
  const t3 = Array.prototype.slice.call(e12), i4 = 16;
  let s6, n6, r3 = "";
  for (let a6 = 0; a6 < t3.length / i4; a6++) s6 = t3.slice(a6 * i4, a6 * i4 + i4).map(Sm).join(""), n6 = t3.slice(a6 * i4, a6 * i4 + i4).map(Em).join(""), r3 += s6 + " " + n6 + "\n";
  return r3;
};
var Im = ({
  bytes: e12
}) => xm(e12);
var Am = (e12) => {
  let t3, i4 = "";
  for (t3 = 0; t3 < e12.length; t3++) i4 += Tm(e12, t3) + " ";
  return i4;
};
var Dm = Object.freeze({
  __proto__: null,
  createTransferableMessage: wm,
  initSegmentId: Cm,
  segmentKeyId: km,
  hexDump: xm,
  tagDump: Im,
  textRanges: Am
});
var Pm = 0.25;
var Lm = (e12, t3) => {
  if (!t3.dateTimeObject) return null;
  const i4 = t3.videoTimingInfo.transmuxerPrependedSeconds, s6 = e12 - (t3.videoTimingInfo.transmuxedPresentationStart + i4);
  return new Date(t3.dateTimeObject.getTime() + 1e3 * s6);
};
var Om = (e12) => e12.transmuxedPresentationEnd - e12.transmuxedPresentationStart - e12.transmuxerPrependedSeconds;
var Nm = (e12, t3) => {
  let i4;
  try {
    i4 = new Date(e12);
  } catch (l_) {
    return null;
  }
  if (!t3 || !t3.segments || 0 === t3.segments.length) return null;
  let s6 = t3.segments[0];
  if (i4 < new Date(s6.dateTimeObject)) return null;
  for (let o4 = 0; o4 < t3.segments.length - 1; o4++) {
    s6 = t3.segments[o4];
    if (i4 < new Date(t3.segments[o4 + 1].dateTimeObject)) break;
  }
  const n6 = t3.segments[t3.segments.length - 1], r3 = n6.dateTimeObject, a6 = n6.videoTimingInfo ? Om(n6.videoTimingInfo) : n6.duration + n6.duration * Pm;
  return i4 > new Date(r3.getTime() + 1e3 * a6) ? null : (i4 > new Date(r3) && (s6 = n6), {
    segment: s6,
    estimatedStart: s6.videoTimingInfo ? s6.videoTimingInfo.transmuxedPresentationStart : Gp.duration(t3, t3.mediaSequence + t3.segments.indexOf(s6)),
    type: s6.videoTimingInfo ? "accurate" : "estimate"
  });
};
var Rm = (e12, t3) => {
  if (!t3 || !t3.segments || 0 === t3.segments.length) return null;
  let i4, s6 = 0;
  for (let r3 = 0; r3 < t3.segments.length && (i4 = t3.segments[r3], s6 = i4.videoTimingInfo ? i4.videoTimingInfo.transmuxedPresentationEnd : s6 + i4.duration, !(e12 <= s6)); r3++) ;
  const n6 = t3.segments[t3.segments.length - 1];
  if (n6.videoTimingInfo && n6.videoTimingInfo.transmuxedPresentationEnd < e12) return null;
  if (e12 > s6) {
    if (e12 > s6 + n6.duration * Pm) return null;
    i4 = n6;
  }
  return {
    segment: i4,
    estimatedStart: i4.videoTimingInfo ? i4.videoTimingInfo.transmuxedPresentationStart : s6 - i4.duration,
    type: i4.videoTimingInfo ? "accurate" : "estimate"
  };
};
var Mm = (e12, t3) => {
  let i4, s6;
  try {
    i4 = new Date(e12), s6 = new Date(t3);
  } catch (l_) {
  }
  const n6 = i4.getTime();
  return (s6.getTime() - n6) / 1e3;
};
var Um = (e12) => {
  if (!e12.segments || 0 === e12.segments.length) return false;
  for (let t3 = 0; t3 < e12.segments.length; t3++) {
    if (!e12.segments[t3].dateTimeObject) return false;
  }
  return true;
};
var Bm = ({
  playlist: e12,
  time: t3,
  callback: i4
}) => {
  if (!i4) throw new Error("getProgramTime: callback must be provided");
  if (!e12 || void 0 === t3) return i4({
    message: "getProgramTime: playlist and time must be provided"
  });
  const s6 = Rm(t3, e12);
  if (!s6) return i4({
    message: "valid programTime was not found"
  });
  if ("estimate" === s6.type) return i4({
    message: "Accurate programTime could not be determined. Please seek to e.seekTime and try again",
    seekTime: s6.estimatedStart
  });
  const n6 = {
    mediaSeconds: t3
  }, r3 = Lm(t3, s6.segment);
  return r3 && (n6.programDateTime = r3.toISOString()), i4(null, n6);
};
var Fm = ({
  programTime: e12,
  playlist: t3,
  retryCount: i4 = 2,
  seekTo: s6,
  pauseAfterSeek: n6 = true,
  tech: r3,
  callback: a6
}) => {
  if (!a6) throw new Error("seekToProgramTime: callback must be provided");
  if (void 0 === e12 || !t3 || !s6) return a6({
    message: "seekToProgramTime: programTime, seekTo and playlist must be provided"
  });
  if (!t3.endList && !r3.hasStarted_) return a6({
    message: "player must be playing a live stream to start buffering"
  });
  if (!Um(t3)) return a6({
    message: "programDateTime tags must be provided in the manifest " + t3.resolvedUri
  });
  const o4 = Nm(e12, t3);
  if (!o4) return a6({
    message: `${e12} was not found in the stream`
  });
  const l5 = o4.segment, h = Mm(l5.dateTimeObject, e12);
  if ("estimate" === o4.type) return 0 === i4 ? a6({
    message: `${e12} is not buffered yet. Try again`
  }) : (s6(o4.estimatedStart + h), void r3.one("seeked", () => {
    Fm({
      programTime: e12,
      playlist: t3,
      retryCount: i4 - 1,
      seekTo: s6,
      pauseAfterSeek: n6,
      tech: r3,
      callback: a6
    });
  }));
  const d4 = l5.start + h, u4 = () => a6(null, r3.currentTime());
  r3.one("seeked", u4), n6 && r3.pause(), s6(d4);
};
var qm = (e12, t3) => {
  if (4 === e12.readyState) return t3();
};
var jm = (e12, t3, i4) => {
  let s6, n6 = [], r3 = false;
  const a6 = function(e13, t4, s7, n7) {
    return t4.abort(), r3 = true, i4(e13, t4, s7, n7);
  }, o4 = function(e13, t4) {
    if (r3) return;
    if (e13) return a6(e13, t4, "", n6);
    const i5 = t4.responseText.substring(n6 && n6.byteLength || 0, t4.responseText.length);
    if (n6 = ki(n6, Ci(i5, true)), s6 = s6 || wa(n6), n6.length < 10 || s6 && n6.length < s6 + 2) return qm(t4, () => a6(e13, t4, "", n6));
    const o5 = eo(n6);
    return "ts" === o5 && n6.length < 188 || !o5 && n6.length < 376 ? qm(t4, () => a6(e13, t4, "", n6)) : a6(null, t4, o5, n6);
  }, l5 = {
    uri: e12,
    beforeSend(e13) {
      e13.overrideMimeType("text/plain; charset=x-user-defined"), e13.addEventListener("progress", function({
        total: t4,
        loaded: i5
      }) {
        return gm(e13, null, {
          statusCode: e13.status
        }, o4);
      });
    }
  }, h = t3(l5, function(e13, t4) {
    return gm(h, e13, t4, o4);
  });
  return h;
};
var {
  EventTarget: $m
} = ip;
var Hm = function(e12, t3) {
  if (!um(e12, t3)) return false;
  if (e12.sidx && t3.sidx && (e12.sidx.offset !== t3.sidx.offset || e12.sidx.length !== t3.sidx.length)) return false;
  if (!e12.sidx && t3.sidx || e12.sidx && !t3.sidx) return false;
  if (e12.segments && !t3.segments || !e12.segments && t3.segments) return false;
  if (!e12.segments && !t3.segments) return true;
  for (let i4 = 0; i4 < e12.segments.length; i4++) {
    const s6 = e12.segments[i4], n6 = t3.segments[i4];
    if (s6.uri !== n6.uri) return false;
    if (!s6.byterange && !n6.byterange) continue;
    const r3 = s6.byterange, a6 = n6.byterange;
    if (r3 && !a6 || !r3 && a6) return false;
    if (r3.offset !== a6.offset || r3.length !== a6.length) return false;
  }
  return true;
};
var Vm = (e12, t3, i4, s6) => `placeholder-uri-${e12}-${t3}-${s6.attributes.NAME || i4}`;
var zm = ({
  mainXml: e12,
  srcUrl: t3,
  clientOffset: i4,
  sidxMapping: s6,
  previousManifest: n6
}) => {
  const r3 = ya(e12, {
    manifestUri: t3,
    clientOffset: i4,
    sidxMapping: s6,
    previousManifest: n6
  });
  return sm(r3, t3, Vm), r3;
};
var Wm = (e12, t3) => {
  Jp(e12, (i4, s6, n6, r3) => {
    r3 in t3.mediaGroups[s6][n6] || delete e12.mediaGroups[s6][n6][r3];
  });
};
var Gm = (e12, t3, i4) => {
  let s6 = true, n6 = up(e12, {
    duration: t3.duration,
    minimumUpdatePeriod: t3.minimumUpdatePeriod,
    timelineStarts: t3.timelineStarts
  });
  for (let r3 = 0; r3 < t3.playlists.length; r3++) {
    const e13 = t3.playlists[r3];
    if (e13.sidx) {
      const t4 = Er(e13.sidx);
      i4 && i4[t4] && i4[t4].sidx && mr(e13, i4[t4].sidx, e13.sidx.resolvedUri);
    }
    const a6 = cm(n6, e13, Hm);
    a6 && (n6 = a6, s6 = false);
  }
  return Jp(t3, (e13, t4, i5, r3) => {
    if (e13.playlists && e13.playlists.length) {
      const a6 = e13.playlists[0].id, o4 = cm(n6, e13.playlists[0], Hm);
      o4 && (n6 = o4, r3 in n6.mediaGroups[t4][i5] || (n6.mediaGroups[t4][i5][r3] = e13), n6.mediaGroups[t4][i5][r3].playlists[0] = n6.playlists[a6], s6 = false);
    }
  }), Wm(n6, t3), t3.minimumUpdatePeriod !== e12.minimumUpdatePeriod && (s6 = false), s6 ? null : n6;
};
var Xm = (e12, t3) => (Boolean(!e12.map && !t3.map) || Boolean(e12.map && t3.map && e12.map.byterange.offset === t3.map.byterange.offset && e12.map.byterange.length === t3.map.byterange.length)) && e12.uri === t3.uri && e12.byterange.offset === t3.byterange.offset && e12.byterange.length === t3.byterange.length;
var Km = (e12, t3) => {
  const i4 = {};
  for (const s6 in e12) {
    const n6 = e12[s6].sidx;
    if (n6) {
      const e13 = Er(n6);
      if (!t3[e13]) break;
      const s7 = t3[e13].sidxInfo;
      Xm(s7, n6) && (i4[e13] = t3[e13]);
    }
  }
  return i4;
};
var Ym = (e12, t3) => {
  let i4 = Km(e12.playlists, t3);
  return Jp(e12, (e13, s6, n6, r3) => {
    if (e13.playlists && e13.playlists.length) {
      const s7 = e13.playlists;
      i4 = up(i4, Km(s7, t3));
    }
  }), i4;
};
var Qm = class extends $m {
  constructor(e12, t3, i4 = {}, s6) {
    super(), this.mainPlaylistLoader_ = s6 || this, s6 || (this.isMain_ = true);
    const {
      withCredentials: n6 = false
    } = i4;
    if (this.vhs_ = t3, this.withCredentials = n6, this.addMetadataToTextTrack = i4.addMetadataToTextTrack, !e12) throw new Error("A non-empty playlist URL or object is required");
    this.on("minimumUpdatePeriod", () => {
      this.refreshXml_();
    }), this.on("mediaupdatetimeout", () => {
      this.refreshMedia_(this.media().id);
    }), this.state = "HAVE_NOTHING", this.loadedPlaylists_ = {}, this.logger_ = dp("DashPlaylistLoader"), this.isMain_ ? (this.mainPlaylistLoader_.srcUrl = e12, this.mainPlaylistLoader_.sidxMapping_ = {}) : this.childPlaylist_ = e12;
  }
  requestErrored_(e12, t3, i4) {
    return !this.request || (this.request = null, e12 ? (this.error = "object" != typeof e12 || e12 instanceof Error ? {
      status: t3.status,
      message: "DASH request error at URL: " + t3.uri,
      response: t3.response,
      code: 2,
      metadata: e12.metadata
    } : e12, i4 && (this.state = i4), this.trigger("error"), true) : void 0);
  }
  addSidxSegments_(e12, t3, i4) {
    const s6 = e12.sidx && Er(e12.sidx);
    if (!e12.sidx || !s6 || this.mainPlaylistLoader_.sidxMapping_[s6]) return void (this.mediaRequest_ = g3.setTimeout(() => i4(false), 0));
    const n6 = hp(e12.sidx.resolvedUri), r3 = (n7, r4) => {
      if (this.requestErrored_(n7, r4, t3)) return;
      const a6 = this.mainPlaylistLoader_.sidxMapping_;
      let o4;
      try {
        o4 = Ta(bi(r4.response).subarray(8));
      } catch (l_) {
        return l_.metadata = {
          errorType: ip.Error.DashManifestSidxParsingError
        }, void this.requestErrored_(l_, r4, t3);
      }
      return a6[s6] = {
        sidxInfo: e12.sidx,
        sidx: o4
      }, mr(e12, o4, e12.sidx.resolvedUri), i4(true);
    };
    this.request = jm(n6, this.vhs_.xhr, (t4, i5, s7, a6) => {
      if (t4) return r3(t4, i5);
      if (!s7 || "mp4" !== s7) {
        const t5 = s7 || "unknown";
        return r3({
          status: i5.status,
          message: `Unsupported ${t5} container type for sidx segment at URL: ${n6}`,
          response: "",
          playlist: e12,
          internal: true,
          playlistExclusionDuration: 1 / 0,
          code: 2,
          metadata: {
            errorType: ip.Error.UnsupportedSidxContainer,
            sidxContainer: t5
          }
        }, i5);
      }
      const {
        offset: o4,
        length: l5
      } = e12.sidx.byterange;
      if (a6.length >= l5 + o4) return r3(t4, {
        response: a6.subarray(o4, o4 + l5),
        status: i5.status,
        uri: i5.uri
      });
      this.request = this.vhs_.xhr({
        uri: n6,
        responseType: "arraybuffer",
        headers: bm({
          byterange: e12.sidx.byterange
        })
      }, r3);
    });
  }
  dispose() {
    this.trigger("dispose"), this.stopRequest(), this.loadedPlaylists_ = {}, g3.clearTimeout(this.minimumUpdatePeriodTimeout_), g3.clearTimeout(this.mediaRequest_), g3.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null, this.mediaRequest_ = null, this.minimumUpdatePeriodTimeout_ = null, this.mainPlaylistLoader_.createMupOnMedia_ && (this.off("loadedmetadata", this.mainPlaylistLoader_.createMupOnMedia_), this.mainPlaylistLoader_.createMupOnMedia_ = null), this.off();
  }
  hasPendingRequest() {
    return this.request || this.mediaRequest_;
  }
  stopRequest() {
    if (this.request) {
      const e12 = this.request;
      this.request = null, e12.onreadystatechange = null, e12.abort();
    }
  }
  media(e12) {
    if (!e12) return this.media_;
    if ("HAVE_NOTHING" === this.state) throw new Error("Cannot switch media playlist from " + this.state);
    const t3 = this.state;
    if ("string" == typeof e12) {
      if (!this.mainPlaylistLoader_.main.playlists[e12]) throw new Error("Unknown playlist URI: " + e12);
      e12 = this.mainPlaylistLoader_.main.playlists[e12];
    }
    const i4 = !this.media_ || e12.id !== this.media_.id;
    if (i4 && this.loadedPlaylists_[e12.id] && this.loadedPlaylists_[e12.id].endList) return this.state = "HAVE_METADATA", this.media_ = e12, void (i4 && (this.trigger("mediachanging"), this.trigger("mediachange")));
    i4 && (this.media_ && this.trigger("mediachanging"), this.addSidxSegments_(e12, t3, (i5) => {
      this.haveMetadata({
        startingState: t3,
        playlist: e12
      });
    }));
  }
  haveMetadata({
    startingState: e12,
    playlist: t3
  }) {
    this.state = "HAVE_METADATA", this.loadedPlaylists_[t3.id] = t3, this.mediaRequest_ = null, this.refreshMedia_(t3.id), "HAVE_MAIN_MANIFEST" === e12 ? this.trigger("loadedmetadata") : this.trigger("mediachange");
  }
  pause() {
    this.mainPlaylistLoader_.createMupOnMedia_ && (this.off("loadedmetadata", this.mainPlaylistLoader_.createMupOnMedia_), this.mainPlaylistLoader_.createMupOnMedia_ = null), this.stopRequest(), g3.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null, this.isMain_ && (g3.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_), this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_ = null), "HAVE_NOTHING" === this.state && (this.started = false);
  }
  load(e12) {
    g3.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null;
    const t3 = this.media();
    if (e12) {
      const e13 = t3 ? t3.targetDuration / 2 * 1e3 : 5e3;
      this.mediaUpdateTimeout = g3.setTimeout(() => this.load(), e13);
    } else this.started ? t3 && !t3.endList ? (this.isMain_ && !this.minimumUpdatePeriodTimeout_ && (this.trigger("minimumUpdatePeriod"), this.updateMinimumUpdatePeriodTimeout_()), this.trigger("mediaupdatetimeout")) : this.trigger("loadedplaylist") : this.start();
  }
  start() {
    this.started = true, this.isMain_ ? this.requestMain_((e12, t3) => {
      this.haveMain_(), this.hasPendingRequest() || this.media_ || this.media(this.mainPlaylistLoader_.main.playlists[0]);
    }) : this.mediaRequest_ = g3.setTimeout(() => this.haveMain_(), 0);
  }
  requestMain_(e12) {
    this.request = this.vhs_.xhr({
      uri: this.mainPlaylistLoader_.srcUrl,
      withCredentials: this.withCredentials,
      requestType: "dash-manifest"
    }, (t3, i4) => {
      if (this.requestErrored_(t3, i4)) return void ("HAVE_NOTHING" === this.state && (this.started = false));
      const s6 = i4.responseText !== this.mainPlaylistLoader_.mainXml_;
      return this.mainPlaylistLoader_.mainXml_ = i4.responseText, i4.responseHeaders && i4.responseHeaders.date ? this.mainLoaded_ = Date.parse(i4.responseHeaders.date) : this.mainLoaded_ = Date.now(), this.mainPlaylistLoader_.srcUrl = hp(this.mainPlaylistLoader_.srcUrl, i4), s6 ? (this.handleMain_(), void this.syncClientServerClock_(() => e12(i4, s6))) : e12(i4, s6);
    });
  }
  syncClientServerClock_(e12) {
    const t3 = _a(this.mainPlaylistLoader_.mainXml_);
    return null === t3 ? (this.mainPlaylistLoader_.clientOffset_ = this.mainLoaded_ - Date.now(), e12()) : "DIRECT" === t3.method ? (this.mainPlaylistLoader_.clientOffset_ = t3.value - Date.now(), e12()) : void (this.request = this.vhs_.xhr({
      uri: lp(this.mainPlaylistLoader_.srcUrl, t3.value),
      method: t3.method,
      withCredentials: this.withCredentials,
      requestType: "dash-clock-sync"
    }, (i4, s6) => {
      if (!this.request) return;
      if (i4) return this.mainPlaylistLoader_.clientOffset_ = this.mainLoaded_ - Date.now(), e12();
      let n6;
      n6 = "HEAD" === t3.method ? s6.responseHeaders && s6.responseHeaders.date ? Date.parse(s6.responseHeaders.date) : this.mainLoaded_ : Date.parse(s6.responseText), this.mainPlaylistLoader_.clientOffset_ = n6 - Date.now(), e12();
    }));
  }
  haveMain_() {
    this.state = "HAVE_MAIN_MANIFEST", this.isMain_ ? this.trigger("loadedplaylist") : this.media_ || this.media(this.childPlaylist_);
  }
  handleMain_() {
    this.mediaRequest_ = null;
    const e12 = this.mainPlaylistLoader_.main;
    let t3 = zm({
      mainXml: this.mainPlaylistLoader_.mainXml_,
      srcUrl: this.mainPlaylistLoader_.srcUrl,
      clientOffset: this.mainPlaylistLoader_.clientOffset_,
      sidxMapping: this.mainPlaylistLoader_.sidxMapping_,
      previousManifest: e12
    });
    e12 && (t3 = Gm(e12, t3, this.mainPlaylistLoader_.sidxMapping_)), this.mainPlaylistLoader_.main = t3 || e12;
    const i4 = this.mainPlaylistLoader_.main.locations && this.mainPlaylistLoader_.main.locations[0];
    return i4 && i4 !== this.mainPlaylistLoader_.srcUrl && (this.mainPlaylistLoader_.srcUrl = i4), (!e12 || t3 && t3.minimumUpdatePeriod !== e12.minimumUpdatePeriod) && this.updateMinimumUpdatePeriodTimeout_(), this.addEventStreamToMetadataTrack_(t3), Boolean(t3);
  }
  updateMinimumUpdatePeriodTimeout_() {
    const e12 = this.mainPlaylistLoader_;
    e12.createMupOnMedia_ && (e12.off("loadedmetadata", e12.createMupOnMedia_), e12.createMupOnMedia_ = null), e12.minimumUpdatePeriodTimeout_ && (g3.clearTimeout(e12.minimumUpdatePeriodTimeout_), e12.minimumUpdatePeriodTimeout_ = null);
    let t3 = e12.main && e12.main.minimumUpdatePeriod;
    0 === t3 && (e12.media() ? t3 = 1e3 * e12.media().targetDuration : (e12.createMupOnMedia_ = e12.updateMinimumUpdatePeriodTimeout_, e12.one("loadedmetadata", e12.createMupOnMedia_))), "number" != typeof t3 || t3 <= 0 ? t3 < 0 && this.logger_(`found invalid minimumUpdatePeriod of ${t3}, not setting a timeout`) : this.createMUPTimeout_(t3);
  }
  createMUPTimeout_(e12) {
    const t3 = this.mainPlaylistLoader_;
    t3.minimumUpdatePeriodTimeout_ = g3.setTimeout(() => {
      t3.minimumUpdatePeriodTimeout_ = null, t3.trigger("minimumUpdatePeriod"), t3.createMUPTimeout_(e12);
    }, e12);
  }
  refreshXml_() {
    this.requestMain_((e12, t3) => {
      t3 && (this.media_ && (this.media_ = this.mainPlaylistLoader_.main.playlists[this.media_.id]), this.mainPlaylistLoader_.sidxMapping_ = Ym(this.mainPlaylistLoader_.main, this.mainPlaylistLoader_.sidxMapping_), this.addSidxSegments_(this.media(), this.state, (e13) => {
        this.refreshMedia_(this.media().id);
      }));
    });
  }
  refreshMedia_(e12) {
    if (!e12) throw new Error("refreshMedia_ must take a media id");
    this.media_ && this.isMain_ && this.handleMain_();
    const t3 = this.mainPlaylistLoader_.main.playlists, i4 = !this.media_ || this.media_ !== t3[e12];
    if (i4 ? this.media_ = t3[e12] : this.trigger("playlistunchanged"), !this.mediaUpdateTimeout) {
      const e13 = () => {
        this.media().endList || (this.mediaUpdateTimeout = g3.setTimeout(() => {
          this.trigger("mediaupdatetimeout"), e13();
        }, pm(this.media(), Boolean(i4))));
      };
      e13();
    }
    this.trigger("loadedplaylist");
  }
  addEventStreamToMetadataTrack_(e12) {
    if (e12 && this.mainPlaylistLoader_.main.eventStream) {
      const e13 = this.mainPlaylistLoader_.main.eventStream.map((e14) => ({
        cueTime: e14.start,
        frames: [{
          data: e14.messageData
        }]
      }));
      this.addMetadataToTextTrack("EventStream", e13, this.mainPlaylistLoader_.main.duration);
    }
  }
  getKeyIdSet(e12) {
    if (e12.contentProtection) {
      const t3 = /* @__PURE__ */ new Set();
      for (const i4 in e12.contentProtection) {
        const s6 = e12.contentProtection[i4].attributes["cenc:default_KID"];
        s6 && t3.add(s6.replace(/-/g, "").toLowerCase());
      }
      return t3;
    }
  }
};
var Jm = {
  GOAL_BUFFER_LENGTH: 30,
  MAX_GOAL_BUFFER_LENGTH: 60,
  BACK_BUFFER_LENGTH: 30,
  GOAL_BUFFER_LENGTH_RATE: 1,
  INITIAL_BANDWIDTH: 4194304,
  BANDWIDTH_VARIANCE: 1.2,
  BUFFER_LOW_WATER_LINE: 0,
  MAX_BUFFER_LOW_WATER_LINE: 30,
  EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE: 16,
  BUFFER_LOW_WATER_LINE_RATE: 1,
  BUFFER_HIGH_WATER_LINE: 30
};
var Zm = (e12) => {
  const t3 = new Uint8Array(new ArrayBuffer(e12.length));
  for (let i4 = 0; i4 < e12.length; i4++) t3[i4] = e12.charCodeAt(i4);
  return t3.buffer;
};
var eg = function(e12) {
  return e12.on = e12.addEventListener, e12.off = e12.removeEventListener, e12;
};
var tg = function(e12) {
  try {
    return URL.createObjectURL(new Blob([e12], {
      type: "application/javascript"
    }));
  } catch (l_) {
    const i4 = new BlobBuilder();
    return i4.append(e12), URL.createObjectURL(i4.getBlob());
  }
};
var ig = function(e12) {
  return function() {
    const t3 = tg(e12), i4 = eg(new Worker(t3));
    i4.objURL = t3;
    const s6 = i4.terminate;
    return i4.on = i4.addEventListener, i4.off = i4.removeEventListener, i4.terminate = function() {
      return URL.revokeObjectURL(t3), s6.call(this);
    }, i4;
  };
};
var sg = function(e12) {
  return `var browserWorkerPolyFill = ${eg.toString()};
browserWorkerPolyFill(self);
` + e12;
};
var ng = function(e12) {
  return e12.toString().replace(/^function.+?{/, "").slice(0, -1);
};
var rg = sg(ng(function() {
  var e12 = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}, t3 = function() {
    this.init = function() {
      var e13 = {};
      this.on = function(t4, i5) {
        e13[t4] || (e13[t4] = []), e13[t4] = e13[t4].concat(i5);
      }, this.off = function(t4, i5) {
        var s7;
        return !!e13[t4] && (s7 = e13[t4].indexOf(i5), e13[t4] = e13[t4].slice(), e13[t4].splice(s7, 1), s7 > -1);
      }, this.trigger = function(t4) {
        var i5, s7, n7, r4;
        if (i5 = e13[t4]) if (2 === arguments.length) for (n7 = i5.length, s7 = 0; s7 < n7; ++s7) i5[s7].call(this, arguments[1]);
        else {
          for (r4 = [], s7 = arguments.length, s7 = 1; s7 < arguments.length; ++s7) r4.push(arguments[s7]);
          for (n7 = i5.length, s7 = 0; s7 < n7; ++s7) i5[s7].apply(this, r4);
        }
      }, this.dispose = function() {
        e13 = {};
      };
    };
  };
  t3.prototype.pipe = function(e13) {
    return this.on("data", function(t4) {
      e13.push(t4);
    }), this.on("done", function(t4) {
      e13.flush(t4);
    }), this.on("partialdone", function(t4) {
      e13.partialFlush(t4);
    }), this.on("endedtimeline", function(t4) {
      e13.endTimeline(t4);
    }), this.on("reset", function(t4) {
      e13.reset(t4);
    }), e13;
  }, t3.prototype.push = function(e13) {
    this.trigger("data", e13);
  }, t3.prototype.flush = function(e13) {
    this.trigger("done", e13);
  }, t3.prototype.partialFlush = function(e13) {
    this.trigger("partialdone", e13);
  }, t3.prototype.endTimeline = function(e13) {
    this.trigger("endedtimeline", e13);
  }, t3.prototype.reset = function(e13) {
    this.trigger("reset", e13);
  };
  var i4, s6, n6, r3, a6, o4, l5, h, d4, u4, c2, p2, m6, g4, f6, y4, _3, v3, b2, T2, S5, E4, w4, C3, k2, x2, I2, A2, D2, P5, L3, O2, N2, R2, M3, U3, B2, F2, q3, j3, $2 = t3, H2 = Math.pow(2, 32), V3 = {
    getUint64: function(e13) {
      var t4, i5 = new DataView(e13.buffer, e13.byteOffset, e13.byteLength);
      return i5.getBigUint64 ? (t4 = i5.getBigUint64(0)) < Number.MAX_SAFE_INTEGER ? Number(t4) : t4 : i5.getUint32(0) * H2 + i5.getUint32(4);
    },
    MAX_UINT32: H2
  }, z2 = V3.MAX_UINT32;
  !function() {
    var e13;
    if (E4 = {
      avc1: [],
      avcC: [],
      btrt: [],
      dinf: [],
      dref: [],
      esds: [],
      ftyp: [],
      hdlr: [],
      mdat: [],
      mdhd: [],
      mdia: [],
      mfhd: [],
      minf: [],
      moof: [],
      moov: [],
      mp4a: [],
      mvex: [],
      mvhd: [],
      pasp: [],
      sdtp: [],
      smhd: [],
      stbl: [],
      stco: [],
      stsc: [],
      stsd: [],
      stsz: [],
      stts: [],
      styp: [],
      tfdt: [],
      tfhd: [],
      traf: [],
      trak: [],
      trun: [],
      trex: [],
      tkhd: [],
      vmhd: []
    }, "undefined" != typeof Uint8Array) {
      for (e13 in E4) E4.hasOwnProperty(e13) && (E4[e13] = [e13.charCodeAt(0), e13.charCodeAt(1), e13.charCodeAt(2), e13.charCodeAt(3)]);
      w4 = new Uint8Array(["i".charCodeAt(0), "s".charCodeAt(0), "o".charCodeAt(0), "m".charCodeAt(0)]), k2 = new Uint8Array(["a".charCodeAt(0), "v".charCodeAt(0), "c".charCodeAt(0), "1".charCodeAt(0)]), C3 = new Uint8Array([0, 0, 0, 1]), x2 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]), I2 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]), A2 = {
        video: x2,
        audio: I2
      }, L3 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]), P5 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), O2 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), N2 = O2, R2 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), M3 = O2, D2 = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]);
    }
  }(), i4 = function(e13) {
    var t4, i5, s7 = [], n7 = 0;
    for (t4 = 1; t4 < arguments.length; t4++) s7.push(arguments[t4]);
    for (t4 = s7.length; t4--; ) n7 += s7[t4].byteLength;
    for (i5 = new Uint8Array(n7 + 8), new DataView(i5.buffer, i5.byteOffset, i5.byteLength).setUint32(0, i5.byteLength), i5.set(e13, 4), t4 = 0, n7 = 8; t4 < s7.length; t4++) i5.set(s7[t4], n7), n7 += s7[t4].byteLength;
    return i5;
  }, s6 = function() {
    return i4(E4.dinf, i4(E4.dref, L3));
  }, n6 = function(e13) {
    return i4(E4.esds, new Uint8Array([0, 0, 0, 0, 3, 25, 0, 0, 0, 4, 17, 64, 21, 0, 6, 0, 0, 0, 218, 192, 0, 0, 218, 192, 5, 2, e13.audioobjecttype << 3 | e13.samplingfrequencyindex >>> 1, e13.samplingfrequencyindex << 7 | e13.channelcount << 3, 6, 1, 2]));
  }, f6 = function(e13) {
    return i4(E4.hdlr, A2[e13]);
  }, g4 = function(e13) {
    var t4 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 3, 0, 1, 95, 144, e13.duration >>> 24 & 255, e13.duration >>> 16 & 255, e13.duration >>> 8 & 255, 255 & e13.duration, 85, 196, 0, 0]);
    return e13.samplerate && (t4[12] = e13.samplerate >>> 24 & 255, t4[13] = e13.samplerate >>> 16 & 255, t4[14] = e13.samplerate >>> 8 & 255, t4[15] = 255 & e13.samplerate), i4(E4.mdhd, t4);
  }, m6 = function(e13) {
    return i4(E4.mdia, g4(e13), f6(e13.type), o4(e13));
  }, a6 = function(e13) {
    return i4(E4.mfhd, new Uint8Array([0, 0, 0, 0, (4278190080 & e13) >> 24, (16711680 & e13) >> 16, (65280 & e13) >> 8, 255 & e13]));
  }, o4 = function(e13) {
    return i4(E4.minf, "video" === e13.type ? i4(E4.vmhd, D2) : i4(E4.smhd, P5), s6(), _3(e13));
  }, l5 = function(e13, t4) {
    for (var s7 = [], n7 = t4.length; n7--; ) s7[n7] = b2(t4[n7]);
    return i4.apply(null, [E4.moof, a6(e13)].concat(s7));
  }, h = function(e13) {
    for (var t4 = e13.length, s7 = []; t4--; ) s7[t4] = c2(e13[t4]);
    return i4.apply(null, [E4.moov, u4(4294967295)].concat(s7).concat(d4(e13)));
  }, d4 = function(e13) {
    for (var t4 = e13.length, s7 = []; t4--; ) s7[t4] = T2(e13[t4]);
    return i4.apply(null, [E4.mvex].concat(s7));
  }, u4 = function(e13) {
    var t4 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 1, 95, 144, (4278190080 & e13) >> 24, (16711680 & e13) >> 16, (65280 & e13) >> 8, 255 & e13, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
    return i4(E4.mvhd, t4);
  }, y4 = function(e13) {
    var t4, s7, n7 = e13.samples || [], r4 = new Uint8Array(4 + n7.length);
    for (s7 = 0; s7 < n7.length; s7++) t4 = n7[s7].flags, r4[s7 + 4] = t4.dependsOn << 4 | t4.isDependedOn << 2 | t4.hasRedundancy;
    return i4(E4.sdtp, r4);
  }, _3 = function(e13) {
    return i4(E4.stbl, v3(e13), i4(E4.stts, M3), i4(E4.stsc, N2), i4(E4.stsz, R2), i4(E4.stco, O2));
  }, v3 = function(e13) {
    return i4(E4.stsd, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]), "video" === e13.type ? U3(e13) : B2(e13));
  }, U3 = function(e13) {
    var t4, s7, n7 = e13.sps || [], r4 = e13.pps || [], a7 = [], o5 = [];
    for (t4 = 0; t4 < n7.length; t4++) a7.push((65280 & n7[t4].byteLength) >>> 8), a7.push(255 & n7[t4].byteLength), a7 = a7.concat(Array.prototype.slice.call(n7[t4]));
    for (t4 = 0; t4 < r4.length; t4++) o5.push((65280 & r4[t4].byteLength) >>> 8), o5.push(255 & r4[t4].byteLength), o5 = o5.concat(Array.prototype.slice.call(r4[t4]));
    if (s7 = [E4.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & e13.width) >> 8, 255 & e13.width, (65280 & e13.height) >> 8, 255 & e13.height, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), i4(E4.avcC, new Uint8Array([1, e13.profileIdc, e13.profileCompatibility, e13.levelIdc, 255].concat([n7.length], a7, [r4.length], o5))), i4(E4.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192]))], e13.sarRatio) {
      var l6 = e13.sarRatio[0], h2 = e13.sarRatio[1];
      s7.push(i4(E4.pasp, new Uint8Array([(4278190080 & l6) >> 24, (16711680 & l6) >> 16, (65280 & l6) >> 8, 255 & l6, (4278190080 & h2) >> 24, (16711680 & h2) >> 16, (65280 & h2) >> 8, 255 & h2])));
    }
    return i4.apply(null, s7);
  }, B2 = function(e13) {
    return i4(E4.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & e13.channelcount) >> 8, 255 & e13.channelcount, (65280 & e13.samplesize) >> 8, 255 & e13.samplesize, 0, 0, 0, 0, (65280 & e13.samplerate) >> 8, 255 & e13.samplerate, 0, 0]), n6(e13));
  }, p2 = function(e13) {
    var t4 = new Uint8Array([0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, (4278190080 & e13.id) >> 24, (16711680 & e13.id) >> 16, (65280 & e13.id) >> 8, 255 & e13.id, 0, 0, 0, 0, (4278190080 & e13.duration) >> 24, (16711680 & e13.duration) >> 16, (65280 & e13.duration) >> 8, 255 & e13.duration, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, (65280 & e13.width) >> 8, 255 & e13.width, 0, 0, (65280 & e13.height) >> 8, 255 & e13.height, 0, 0]);
    return i4(E4.tkhd, t4);
  }, b2 = function(e13) {
    var t4, s7, n7, r4, a7, o5, l6;
    return t4 = i4(E4.tfhd, new Uint8Array([0, 0, 0, 58, (4278190080 & e13.id) >> 24, (16711680 & e13.id) >> 16, (65280 & e13.id) >> 8, 255 & e13.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), o5 = Math.floor(e13.baseMediaDecodeTime / z2), l6 = Math.floor(e13.baseMediaDecodeTime % z2), s7 = i4(E4.tfdt, new Uint8Array([1, 0, 0, 0, o5 >>> 24 & 255, o5 >>> 16 & 255, o5 >>> 8 & 255, 255 & o5, l6 >>> 24 & 255, l6 >>> 16 & 255, l6 >>> 8 & 255, 255 & l6])), a7 = 92, "audio" === e13.type ? (n7 = S5(e13, a7), i4(E4.traf, t4, s7, n7)) : (r4 = y4(e13), n7 = S5(e13, r4.length + a7), i4(E4.traf, t4, s7, n7, r4));
  }, c2 = function(e13) {
    return e13.duration = e13.duration || 4294967295, i4(E4.trak, p2(e13), m6(e13));
  }, T2 = function(e13) {
    var t4 = new Uint8Array([0, 0, 0, 0, (4278190080 & e13.id) >> 24, (16711680 & e13.id) >> 16, (65280 & e13.id) >> 8, 255 & e13.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]);
    return "video" !== e13.type && (t4[t4.length - 1] = 0), i4(E4.trex, t4);
  }, j3 = function(e13, t4) {
    var i5 = 0, s7 = 0, n7 = 0, r4 = 0;
    return e13.length && (void 0 !== e13[0].duration && (i5 = 1), void 0 !== e13[0].size && (s7 = 2), void 0 !== e13[0].flags && (n7 = 4), void 0 !== e13[0].compositionTimeOffset && (r4 = 8)), [0, 0, i5 | s7 | n7 | r4, 1, (4278190080 & e13.length) >>> 24, (16711680 & e13.length) >>> 16, (65280 & e13.length) >>> 8, 255 & e13.length, (4278190080 & t4) >>> 24, (16711680 & t4) >>> 16, (65280 & t4) >>> 8, 255 & t4];
  }, q3 = function(e13, t4) {
    var s7, n7, r4, a7, o5, l6;
    for (t4 += 20 + 16 * (a7 = e13.samples || []).length, r4 = j3(a7, t4), (n7 = new Uint8Array(r4.length + 16 * a7.length)).set(r4), s7 = r4.length, l6 = 0; l6 < a7.length; l6++) o5 = a7[l6], n7[s7++] = (4278190080 & o5.duration) >>> 24, n7[s7++] = (16711680 & o5.duration) >>> 16, n7[s7++] = (65280 & o5.duration) >>> 8, n7[s7++] = 255 & o5.duration, n7[s7++] = (4278190080 & o5.size) >>> 24, n7[s7++] = (16711680 & o5.size) >>> 16, n7[s7++] = (65280 & o5.size) >>> 8, n7[s7++] = 255 & o5.size, n7[s7++] = o5.flags.isLeading << 2 | o5.flags.dependsOn, n7[s7++] = o5.flags.isDependedOn << 6 | o5.flags.hasRedundancy << 4 | o5.flags.paddingValue << 1 | o5.flags.isNonSyncSample, n7[s7++] = 61440 & o5.flags.degradationPriority, n7[s7++] = 15 & o5.flags.degradationPriority, n7[s7++] = (4278190080 & o5.compositionTimeOffset) >>> 24, n7[s7++] = (16711680 & o5.compositionTimeOffset) >>> 16, n7[s7++] = (65280 & o5.compositionTimeOffset) >>> 8, n7[s7++] = 255 & o5.compositionTimeOffset;
    return i4(E4.trun, n7);
  }, F2 = function(e13, t4) {
    var s7, n7, r4, a7, o5, l6;
    for (t4 += 20 + 8 * (a7 = e13.samples || []).length, r4 = j3(a7, t4), (s7 = new Uint8Array(r4.length + 8 * a7.length)).set(r4), n7 = r4.length, l6 = 0; l6 < a7.length; l6++) o5 = a7[l6], s7[n7++] = (4278190080 & o5.duration) >>> 24, s7[n7++] = (16711680 & o5.duration) >>> 16, s7[n7++] = (65280 & o5.duration) >>> 8, s7[n7++] = 255 & o5.duration, s7[n7++] = (4278190080 & o5.size) >>> 24, s7[n7++] = (16711680 & o5.size) >>> 16, s7[n7++] = (65280 & o5.size) >>> 8, s7[n7++] = 255 & o5.size;
    return i4(E4.trun, s7);
  }, S5 = function(e13, t4) {
    return "audio" === e13.type ? F2(e13, t4) : q3(e13, t4);
  };
  var W2, G2, X2, K2, Y2, Q2, J3, Z2, ee2 = {
    ftyp: r3 = function() {
      return i4(E4.ftyp, w4, C3, w4, k2);
    },
    mdat: function(e13) {
      return i4(E4.mdat, e13);
    },
    moof: l5,
    moov: h,
    initSegment: function(e13) {
      var t4, i5 = r3(), s7 = h(e13);
      return (t4 = new Uint8Array(i5.byteLength + s7.byteLength)).set(i5), t4.set(s7, i5.byteLength), t4;
    }
  }, te2 = function() {
    return {
      size: 0,
      flags: {
        isLeading: 0,
        dependsOn: 1,
        isDependedOn: 0,
        hasRedundancy: 0,
        degradationPriority: 0,
        isNonSyncSample: 1
      }
    };
  }, ie2 = function(e13, t4) {
    var i5 = te2();
    return i5.dataOffset = t4, i5.compositionTimeOffset = e13.pts - e13.dts, i5.duration = e13.duration, i5.size = 4 * e13.length, i5.size += e13.byteLength, e13.keyFrame && (i5.flags.dependsOn = 2, i5.flags.isNonSyncSample = 0), i5;
  }, se2 = {
    groupNalsIntoFrames: function(e13) {
      var t4, i5, s7 = [], n7 = [];
      for (n7.byteLength = 0, n7.nalCount = 0, n7.duration = 0, s7.byteLength = 0, t4 = 0; t4 < e13.length; t4++) "access_unit_delimiter_rbsp" === (i5 = e13[t4]).nalUnitType ? (s7.length && (s7.duration = i5.dts - s7.dts, n7.byteLength += s7.byteLength, n7.nalCount += s7.length, n7.duration += s7.duration, n7.push(s7)), (s7 = [i5]).byteLength = i5.data.byteLength, s7.pts = i5.pts, s7.dts = i5.dts) : ("slice_layer_without_partitioning_rbsp_idr" === i5.nalUnitType && (s7.keyFrame = true), s7.duration = i5.dts - s7.dts, s7.byteLength += i5.data.byteLength, s7.push(i5));
      return n7.length && (!s7.duration || s7.duration <= 0) && (s7.duration = n7[n7.length - 1].duration), n7.byteLength += s7.byteLength, n7.nalCount += s7.length, n7.duration += s7.duration, n7.push(s7), n7;
    },
    groupFramesIntoGops: function(e13) {
      var t4, i5, s7 = [], n7 = [];
      for (s7.byteLength = 0, s7.nalCount = 0, s7.duration = 0, s7.pts = e13[0].pts, s7.dts = e13[0].dts, n7.byteLength = 0, n7.nalCount = 0, n7.duration = 0, n7.pts = e13[0].pts, n7.dts = e13[0].dts, t4 = 0; t4 < e13.length; t4++) (i5 = e13[t4]).keyFrame ? (s7.length && (n7.push(s7), n7.byteLength += s7.byteLength, n7.nalCount += s7.nalCount, n7.duration += s7.duration), (s7 = [i5]).nalCount = i5.length, s7.byteLength = i5.byteLength, s7.pts = i5.pts, s7.dts = i5.dts, s7.duration = i5.duration) : (s7.duration += i5.duration, s7.nalCount += i5.length, s7.byteLength += i5.byteLength, s7.push(i5));
      return n7.length && s7.duration <= 0 && (s7.duration = n7[n7.length - 1].duration), n7.byteLength += s7.byteLength, n7.nalCount += s7.nalCount, n7.duration += s7.duration, n7.push(s7), n7;
    },
    extendFirstKeyFrame: function(e13) {
      var t4;
      return !e13[0][0].keyFrame && e13.length > 1 && (t4 = e13.shift(), e13.byteLength -= t4.byteLength, e13.nalCount -= t4.nalCount, e13[0][0].dts = t4.dts, e13[0][0].pts = t4.pts, e13[0][0].duration += t4.duration), e13;
    },
    generateSampleTable: function(e13, t4) {
      var i5, s7, n7, r4, a7, o5 = t4 || 0, l6 = [];
      for (i5 = 0; i5 < e13.length; i5++) for (r4 = e13[i5], s7 = 0; s7 < r4.length; s7++) a7 = r4[s7], o5 += (n7 = ie2(a7, o5)).size, l6.push(n7);
      return l6;
    },
    concatenateNalData: function(e13) {
      var t4, i5, s7, n7, r4, a7, o5 = 0, l6 = e13.byteLength, h2 = e13.nalCount, d5 = new Uint8Array(l6 + 4 * h2), u5 = new DataView(d5.buffer);
      for (t4 = 0; t4 < e13.length; t4++) for (n7 = e13[t4], i5 = 0; i5 < n7.length; i5++) for (r4 = n7[i5], s7 = 0; s7 < r4.length; s7++) a7 = r4[s7], u5.setUint32(o5, a7.data.byteLength), o5 += 4, d5.set(a7.data, o5), o5 += a7.data.byteLength;
      return d5;
    },
    generateSampleTableForFrame: function(e13, t4) {
      var i5, s7 = [];
      return i5 = ie2(e13, t4 || 0), s7.push(i5), s7;
    },
    concatenateNalDataForFrame: function(e13) {
      var t4, i5, s7 = 0, n7 = e13.byteLength, r4 = e13.length, a7 = new Uint8Array(n7 + 4 * r4), o5 = new DataView(a7.buffer);
      for (t4 = 0; t4 < e13.length; t4++) i5 = e13[t4], o5.setUint32(s7, i5.data.byteLength), s7 += 4, a7.set(i5.data, s7), s7 += i5.data.byteLength;
      return a7;
    }
  }, ne2 = [33, 16, 5, 32, 164, 27], re2 = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252], ae2 = function(e13) {
    for (var t4 = []; e13--; ) t4.push(0);
    return t4;
  }, oe2 = function(e13) {
    return Object.keys(e13).reduce(function(t4, i5) {
      return t4[i5] = new Uint8Array(e13[i5].reduce(function(e14, t5) {
        return e14.concat(t5);
      }, [])), t4;
    }, {});
  }, le2 = function() {
    if (!W2) {
      var e13 = {
        96e3: [ne2, [227, 64], ae2(154), [56]],
        88200: [ne2, [231], ae2(170), [56]],
        64e3: [ne2, [248, 192], ae2(240), [56]],
        48e3: [ne2, [255, 192], ae2(268), [55, 148, 128], ae2(54), [112]],
        44100: [ne2, [255, 192], ae2(268), [55, 163, 128], ae2(84), [112]],
        32e3: [ne2, [255, 192], ae2(268), [55, 234], ae2(226), [112]],
        24e3: [ne2, [255, 192], ae2(268), [55, 255, 128], ae2(268), [111, 112], ae2(126), [224]],
        16e3: [ne2, [255, 192], ae2(268), [55, 255, 128], ae2(268), [111, 255], ae2(269), [223, 108], ae2(195), [1, 192]],
        12e3: [re2, ae2(268), [3, 127, 248], ae2(268), [6, 255, 240], ae2(268), [13, 255, 224], ae2(268), [27, 253, 128], ae2(259), [56]],
        11025: [re2, ae2(268), [3, 127, 248], ae2(268), [6, 255, 240], ae2(268), [13, 255, 224], ae2(268), [27, 255, 192], ae2(268), [55, 175, 128], ae2(108), [112]],
        8e3: [re2, ae2(268), [3, 121, 16], ae2(47), [7]]
      };
      W2 = oe2(e13);
    }
    return W2;
  }, he2 = 9e4;
  Q2 = function(e13, t4) {
    return G2(Y2(e13, t4));
  }, J3 = function(e13, t4) {
    return X2(K2(e13), t4);
  }, Z2 = function(e13, t4, i5) {
    return K2(i5 ? e13 : e13 - t4);
  };
  var de2 = {
    ONE_SECOND_IN_TS: he2,
    secondsToVideoTs: G2 = function(e13) {
      return e13 * he2;
    },
    secondsToAudioTs: X2 = function(e13, t4) {
      return e13 * t4;
    },
    videoTsToSeconds: K2 = function(e13) {
      return e13 / he2;
    },
    audioTsToSeconds: Y2 = function(e13, t4) {
      return e13 / t4;
    },
    audioTsToVideoTs: Q2,
    videoTsToAudioTs: J3,
    metadataTsToSeconds: Z2
  }, ue2 = le2, ce2 = de2, pe2 = function(e13) {
    var t4, i5 = 0;
    for (t4 = 0; t4 < e13.length; t4++) i5 += e13[t4].data.byteLength;
    return i5;
  }, me2 = {
    prefixWithSilence: function(e13, t4, i5, s7) {
      var n7, r4, a7, o5, l6 = 0, h2 = 0, d5 = 0, u5 = 0;
      if (t4.length && (n7 = ce2.audioTsToVideoTs(e13.baseMediaDecodeTime, e13.samplerate), l6 = Math.ceil(ce2.ONE_SECOND_IN_TS / (e13.samplerate / 1024)), i5 && s7 && (h2 = n7 - Math.max(i5, s7), u5 = (d5 = Math.floor(h2 / l6)) * l6), !(d5 < 1 || u5 > ce2.ONE_SECOND_IN_TS / 2))) {
        for ((r4 = ue2()[e13.samplerate]) || (r4 = t4[0].data), a7 = 0; a7 < d5; a7++) o5 = t4[0], t4.splice(0, 0, {
          data: r4,
          dts: o5.dts - l6,
          pts: o5.pts - l6
        });
        return e13.baseMediaDecodeTime -= Math.floor(ce2.videoTsToAudioTs(u5, e13.samplerate)), u5;
      }
    },
    trimAdtsFramesByEarliestDts: function(e13, t4, i5) {
      return t4.minSegmentDts >= i5 ? e13 : (t4.minSegmentDts = 1 / 0, e13.filter(function(e14) {
        return e14.dts >= i5 && (t4.minSegmentDts = Math.min(t4.minSegmentDts, e14.dts), t4.minSegmentPts = t4.minSegmentDts, true);
      }));
    },
    generateSampleTable: function(e13) {
      var t4, i5, s7 = [];
      for (t4 = 0; t4 < e13.length; t4++) i5 = e13[t4], s7.push({
        size: i5.data.byteLength,
        duration: 1024
      });
      return s7;
    },
    concatenateFrameData: function(e13) {
      var t4, i5, s7 = 0, n7 = new Uint8Array(pe2(e13));
      for (t4 = 0; t4 < e13.length; t4++) i5 = e13[t4], n7.set(i5.data, s7), s7 += i5.data.byteLength;
      return n7;
    }
  }, ge2 = de2.ONE_SECOND_IN_TS, fe2 = {
    clearDtsInfo: function(e13) {
      delete e13.minSegmentDts, delete e13.maxSegmentDts, delete e13.minSegmentPts, delete e13.maxSegmentPts;
    },
    calculateTrackBaseMediaDecodeTime: function(e13, t4) {
      var i5, s7 = e13.minSegmentDts;
      return t4 || (s7 -= e13.timelineStartInfo.dts), i5 = e13.timelineStartInfo.baseMediaDecodeTime, i5 += s7, i5 = Math.max(0, i5), "audio" === e13.type && (i5 *= e13.samplerate / ge2, i5 = Math.floor(i5)), i5;
    },
    collectDtsInfo: function(e13, t4) {
      "number" == typeof t4.pts && (void 0 === e13.timelineStartInfo.pts && (e13.timelineStartInfo.pts = t4.pts), void 0 === e13.minSegmentPts ? e13.minSegmentPts = t4.pts : e13.minSegmentPts = Math.min(e13.minSegmentPts, t4.pts), void 0 === e13.maxSegmentPts ? e13.maxSegmentPts = t4.pts : e13.maxSegmentPts = Math.max(e13.maxSegmentPts, t4.pts)), "number" == typeof t4.dts && (void 0 === e13.timelineStartInfo.dts && (e13.timelineStartInfo.dts = t4.dts), void 0 === e13.minSegmentDts ? e13.minSegmentDts = t4.dts : e13.minSegmentDts = Math.min(e13.minSegmentDts, t4.dts), void 0 === e13.maxSegmentDts ? e13.maxSegmentDts = t4.dts : e13.maxSegmentDts = Math.max(e13.maxSegmentDts, t4.dts));
    }
  }, ye2 = 4, _e2 = 128, ve2 = {
    parseSei: function(e13) {
      for (var t4 = 0, i5 = {
        payloadType: -1,
        payloadSize: 0
      }, s7 = 0, n7 = 0; t4 < e13.byteLength && e13[t4] !== _e2; ) {
        for (; 255 === e13[t4]; ) s7 += 255, t4++;
        for (s7 += e13[t4++]; 255 === e13[t4]; ) n7 += 255, t4++;
        if (n7 += e13[t4++], !i5.payload && s7 === ye2) {
          if ("GA94" === String.fromCharCode(e13[t4 + 3], e13[t4 + 4], e13[t4 + 5], e13[t4 + 6])) {
            i5.payloadType = s7, i5.payloadSize = n7, i5.payload = e13.subarray(t4, t4 + n7);
            break;
          }
          i5.payload = void 0;
        }
        t4 += n7, s7 = 0, n7 = 0;
      }
      return i5;
    },
    parseUserData: function(e13) {
      return 181 !== e13.payload[0] || 49 != (e13.payload[1] << 8 | e13.payload[2]) || "GA94" !== String.fromCharCode(e13.payload[3], e13.payload[4], e13.payload[5], e13.payload[6]) || 3 !== e13.payload[7] ? null : e13.payload.subarray(8, e13.payload.length - 1);
    },
    parseCaptionPackets: function(e13, t4) {
      var i5, s7, n7, r4, a7 = [];
      if (!(64 & t4[0])) return a7;
      for (s7 = 31 & t4[0], i5 = 0; i5 < s7; i5++) r4 = {
        type: 3 & t4[(n7 = 3 * i5) + 2],
        pts: e13
      }, 4 & t4[n7 + 2] && (r4.ccData = t4[n7 + 3] << 8 | t4[n7 + 4], a7.push(r4));
      return a7;
    },
    discardEmulationPreventionBytes: function(e13) {
      for (var t4, i5, s7 = e13.byteLength, n7 = [], r4 = 1; r4 < s7 - 2; ) 0 === e13[r4] && 0 === e13[r4 + 1] && 3 === e13[r4 + 2] ? (n7.push(r4 + 2), r4 += 2) : r4++;
      if (0 === n7.length) return e13;
      t4 = s7 - n7.length, i5 = new Uint8Array(t4);
      var a7 = 0;
      for (r4 = 0; r4 < t4; a7++, r4++) a7 === n7[0] && (a7++, n7.shift()), i5[r4] = e13[a7];
      return i5;
    },
    USER_DATA_REGISTERED_ITU_T_T35: ye2
  }, be2 = $2, Te2 = ve2, Se2 = function(e13) {
    e13 = e13 || {}, Se2.prototype.init.call(this), this.parse708captions_ = "boolean" != typeof e13.parse708captions || e13.parse708captions, this.captionPackets_ = [], this.ccStreams_ = [new Ne2(0, 0), new Ne2(0, 1), new Ne2(1, 0), new Ne2(1, 1)], this.parse708captions_ && (this.cc708Stream_ = new Ie2({
      captionServices: e13.captionServices
    })), this.reset(), this.ccStreams_.forEach(function(e14) {
      e14.on("data", this.trigger.bind(this, "data")), e14.on("partialdone", this.trigger.bind(this, "partialdone")), e14.on("done", this.trigger.bind(this, "done"));
    }, this), this.parse708captions_ && (this.cc708Stream_.on("data", this.trigger.bind(this, "data")), this.cc708Stream_.on("partialdone", this.trigger.bind(this, "partialdone")), this.cc708Stream_.on("done", this.trigger.bind(this, "done")));
  };
  Se2.prototype = new be2(), Se2.prototype.push = function(e13) {
    var t4, i5, s7;
    if ("sei_rbsp" === e13.nalUnitType && (t4 = Te2.parseSei(e13.escapedRBSP)).payload && t4.payloadType === Te2.USER_DATA_REGISTERED_ITU_T_T35 && (i5 = Te2.parseUserData(t4))) if (e13.dts < this.latestDts_) this.ignoreNextEqualDts_ = true;
    else {
      if (e13.dts === this.latestDts_ && this.ignoreNextEqualDts_) return this.numSameDts_--, void (this.numSameDts_ || (this.ignoreNextEqualDts_ = false));
      s7 = Te2.parseCaptionPackets(e13.pts, i5), this.captionPackets_ = this.captionPackets_.concat(s7), this.latestDts_ !== e13.dts && (this.numSameDts_ = 0), this.numSameDts_++, this.latestDts_ = e13.dts;
    }
  }, Se2.prototype.flushCCStreams = function(e13) {
    this.ccStreams_.forEach(function(t4) {
      return "flush" === e13 ? t4.flush() : t4.partialFlush();
    }, this);
  }, Se2.prototype.flushStream = function(e13) {
    this.captionPackets_.length ? (this.captionPackets_.forEach(function(e14, t4) {
      e14.presortIndex = t4;
    }), this.captionPackets_.sort(function(e14, t4) {
      return e14.pts === t4.pts ? e14.presortIndex - t4.presortIndex : e14.pts - t4.pts;
    }), this.captionPackets_.forEach(function(e14) {
      e14.type < 2 ? this.dispatchCea608Packet(e14) : this.dispatchCea708Packet(e14);
    }, this), this.captionPackets_.length = 0, this.flushCCStreams(e13)) : this.flushCCStreams(e13);
  }, Se2.prototype.flush = function() {
    return this.flushStream("flush");
  }, Se2.prototype.partialFlush = function() {
    return this.flushStream("partialFlush");
  }, Se2.prototype.reset = function() {
    this.latestDts_ = null, this.ignoreNextEqualDts_ = false, this.numSameDts_ = 0, this.activeCea608Channel_ = [null, null], this.ccStreams_.forEach(function(e13) {
      e13.reset();
    });
  }, Se2.prototype.dispatchCea608Packet = function(e13) {
    this.setsTextOrXDSActive(e13) ? this.activeCea608Channel_[e13.type] = null : this.setsChannel1Active(e13) ? this.activeCea608Channel_[e13.type] = 0 : this.setsChannel2Active(e13) && (this.activeCea608Channel_[e13.type] = 1), null !== this.activeCea608Channel_[e13.type] && this.ccStreams_[(e13.type << 1) + this.activeCea608Channel_[e13.type]].push(e13);
  }, Se2.prototype.setsChannel1Active = function(e13) {
    return 4096 == (30720 & e13.ccData);
  }, Se2.prototype.setsChannel2Active = function(e13) {
    return 6144 == (30720 & e13.ccData);
  }, Se2.prototype.setsTextOrXDSActive = function(e13) {
    return 256 == (28928 & e13.ccData) || 4138 == (30974 & e13.ccData) || 6186 == (30974 & e13.ccData);
  }, Se2.prototype.dispatchCea708Packet = function(e13) {
    this.parse708captions_ && this.cc708Stream_.push(e13);
  };
  var Ee2 = {
    127: 9834,
    4128: 32,
    4129: 160,
    4133: 8230,
    4138: 352,
    4140: 338,
    4144: 9608,
    4145: 8216,
    4146: 8217,
    4147: 8220,
    4148: 8221,
    4149: 8226,
    4153: 8482,
    4154: 353,
    4156: 339,
    4157: 8480,
    4159: 376,
    4214: 8539,
    4215: 8540,
    4216: 8541,
    4217: 8542,
    4218: 9168,
    4219: 9124,
    4220: 9123,
    4221: 9135,
    4222: 9126,
    4223: 9121,
    4256: 12600
  }, we2 = function(e13) {
    var t4 = Ee2[e13] || e13;
    return 4096 & e13 && e13 === t4 ? "" : String.fromCharCode(t4);
  }, Ce2 = function(e13) {
    return 32 <= e13 && e13 <= 127 || 160 <= e13 && e13 <= 255;
  }, ke2 = function(e13) {
    this.windowNum = e13, this.reset();
  };
  ke2.prototype.reset = function() {
    this.clearText(), this.pendingNewLine = false, this.winAttr = {}, this.penAttr = {}, this.penLoc = {}, this.penColor = {}, this.visible = 0, this.rowLock = 0, this.columnLock = 0, this.priority = 0, this.relativePositioning = 0, this.anchorVertical = 0, this.anchorHorizontal = 0, this.anchorPoint = 0, this.rowCount = 1, this.virtualRowCount = this.rowCount + 1, this.columnCount = 41, this.windowStyle = 0, this.penStyle = 0;
  }, ke2.prototype.getText = function() {
    return this.rows.join("\n");
  }, ke2.prototype.clearText = function() {
    this.rows = [""], this.rowIdx = 0;
  }, ke2.prototype.newLine = function(e13) {
    for (this.rows.length >= this.virtualRowCount && "function" == typeof this.beforeRowOverflow && this.beforeRowOverflow(e13), this.rows.length > 0 && (this.rows.push(""), this.rowIdx++); this.rows.length > this.virtualRowCount; ) this.rows.shift(), this.rowIdx--;
  }, ke2.prototype.isEmpty = function() {
    return 0 === this.rows.length || 1 === this.rows.length && "" === this.rows[0];
  }, ke2.prototype.addText = function(e13) {
    this.rows[this.rowIdx] += e13;
  }, ke2.prototype.backspace = function() {
    if (!this.isEmpty()) {
      var e13 = this.rows[this.rowIdx];
      this.rows[this.rowIdx] = e13.substr(0, e13.length - 1);
    }
  };
  var xe2 = function(e13, t4, i5) {
    this.serviceNum = e13, this.text = "", this.currentWindow = new ke2(-1), this.windows = [], this.stream = i5, "string" == typeof t4 && this.createTextDecoder(t4);
  };
  xe2.prototype.init = function(e13, t4) {
    this.startPts = e13;
    for (var i5 = 0; i5 < 8; i5++) this.windows[i5] = new ke2(i5), "function" == typeof t4 && (this.windows[i5].beforeRowOverflow = t4);
  }, xe2.prototype.setCurrentWindow = function(e13) {
    this.currentWindow = this.windows[e13];
  }, xe2.prototype.createTextDecoder = function(e13) {
    if ("undefined" == typeof TextDecoder) this.stream.trigger("log", {
      level: "warn",
      message: "The `encoding` option is unsupported without TextDecoder support"
    });
    else try {
      this.textDecoder_ = new TextDecoder(e13);
    } catch (t4) {
      this.stream.trigger("log", {
        level: "warn",
        message: "TextDecoder could not be created with " + e13 + " encoding. " + t4
      });
    }
  };
  var Ie2 = function(e13) {
    e13 = e13 || {}, Ie2.prototype.init.call(this);
    var t4, i5 = this, s7 = e13.captionServices || {}, n7 = {};
    Object.keys(s7).forEach((e14) => {
      t4 = s7[e14], /^SERVICE/.test(e14) && (n7[e14] = t4.encoding);
    }), this.serviceEncodings = n7, this.current708Packet = null, this.services = {}, this.push = function(e14) {
      3 === e14.type ? (i5.new708Packet(), i5.add708Bytes(e14)) : (null === i5.current708Packet && i5.new708Packet(), i5.add708Bytes(e14));
    };
  };
  Ie2.prototype = new be2(), Ie2.prototype.new708Packet = function() {
    null !== this.current708Packet && this.push708Packet(), this.current708Packet = {
      data: [],
      ptsVals: []
    };
  }, Ie2.prototype.add708Bytes = function(e13) {
    var t4 = e13.ccData, i5 = t4 >>> 8, s7 = 255 & t4;
    this.current708Packet.ptsVals.push(e13.pts), this.current708Packet.data.push(i5), this.current708Packet.data.push(s7);
  }, Ie2.prototype.push708Packet = function() {
    var e13 = this.current708Packet, t4 = e13.data, i5 = null, s7 = null, n7 = 0, r4 = t4[n7++];
    for (e13.seq = r4 >> 6, e13.sizeCode = 63 & r4; n7 < t4.length; n7++) s7 = 31 & (r4 = t4[n7++]), 7 === (i5 = r4 >> 5) && s7 > 0 && (i5 = r4 = t4[n7++]), this.pushServiceBlock(i5, n7, s7), s7 > 0 && (n7 += s7 - 1);
  }, Ie2.prototype.pushServiceBlock = function(e13, t4, i5) {
    var s7, n7 = t4, r4 = this.current708Packet.data, a7 = this.services[e13];
    for (a7 || (a7 = this.initService(e13, n7)); n7 < t4 + i5 && n7 < r4.length; n7++) s7 = r4[n7], Ce2(s7) ? n7 = this.handleText(n7, a7) : 24 === s7 ? n7 = this.multiByteCharacter(n7, a7) : 16 === s7 ? n7 = this.extendedCommands(n7, a7) : 128 <= s7 && s7 <= 135 ? n7 = this.setCurrentWindow(n7, a7) : 152 <= s7 && s7 <= 159 ? n7 = this.defineWindow(n7, a7) : 136 === s7 ? n7 = this.clearWindows(n7, a7) : 140 === s7 ? n7 = this.deleteWindows(n7, a7) : 137 === s7 ? n7 = this.displayWindows(n7, a7) : 138 === s7 ? n7 = this.hideWindows(n7, a7) : 139 === s7 ? n7 = this.toggleWindows(n7, a7) : 151 === s7 ? n7 = this.setWindowAttributes(n7, a7) : 144 === s7 ? n7 = this.setPenAttributes(n7, a7) : 145 === s7 ? n7 = this.setPenColor(n7, a7) : 146 === s7 ? n7 = this.setPenLocation(n7, a7) : 143 === s7 ? a7 = this.reset(n7, a7) : 8 === s7 ? a7.currentWindow.backspace() : 12 === s7 ? a7.currentWindow.clearText() : 13 === s7 ? a7.currentWindow.pendingNewLine = true : 14 === s7 ? a7.currentWindow.clearText() : 141 === s7 && n7++;
  }, Ie2.prototype.extendedCommands = function(e13, t4) {
    var i5 = this.current708Packet.data[++e13];
    return Ce2(i5) && (e13 = this.handleText(e13, t4, {
      isExtended: true
    })), e13;
  }, Ie2.prototype.getPts = function(e13) {
    return this.current708Packet.ptsVals[Math.floor(e13 / 2)];
  }, Ie2.prototype.initService = function(e13, t4) {
    var i5, s7, n7 = this;
    return (i5 = "SERVICE" + e13) in this.serviceEncodings && (s7 = this.serviceEncodings[i5]), this.services[e13] = new xe2(e13, s7, n7), this.services[e13].init(this.getPts(t4), function(t5) {
      n7.flushDisplayed(t5, n7.services[e13]);
    }), this.services[e13];
  }, Ie2.prototype.handleText = function(e13, t4, i5) {
    var s7, n7, r4 = i5 && i5.isExtended, a7 = i5 && i5.isMultiByte, o5 = this.current708Packet.data, l6 = r4 ? 4096 : 0, h2 = o5[e13], d5 = o5[e13 + 1], u5 = t4.currentWindow;
    function c3(e14) {
      return e14.map((e15) => ("0" + (255 & e15).toString(16)).slice(-2)).join("");
    }
    if (a7 ? (n7 = [h2, d5], e13++) : n7 = [h2], t4.textDecoder_ && !r4) s7 = t4.textDecoder_.decode(new Uint8Array(n7));
    else if (a7) {
      const e14 = c3(n7);
      s7 = String.fromCharCode(parseInt(e14, 16));
    } else s7 = we2(l6 | h2);
    return u5.pendingNewLine && !u5.isEmpty() && u5.newLine(this.getPts(e13)), u5.pendingNewLine = false, u5.addText(s7), e13;
  }, Ie2.prototype.multiByteCharacter = function(e13, t4) {
    var i5 = this.current708Packet.data, s7 = i5[e13 + 1], n7 = i5[e13 + 2];
    return Ce2(s7) && Ce2(n7) && (e13 = this.handleText(++e13, t4, {
      isMultiByte: true
    })), e13;
  }, Ie2.prototype.setCurrentWindow = function(e13, t4) {
    var i5 = 7 & this.current708Packet.data[e13];
    return t4.setCurrentWindow(i5), e13;
  }, Ie2.prototype.defineWindow = function(e13, t4) {
    var i5 = this.current708Packet.data, s7 = i5[e13], n7 = 7 & s7;
    t4.setCurrentWindow(n7);
    var r4 = t4.currentWindow;
    return s7 = i5[++e13], r4.visible = (32 & s7) >> 5, r4.rowLock = (16 & s7) >> 4, r4.columnLock = (8 & s7) >> 3, r4.priority = 7 & s7, s7 = i5[++e13], r4.relativePositioning = (128 & s7) >> 7, r4.anchorVertical = 127 & s7, s7 = i5[++e13], r4.anchorHorizontal = s7, s7 = i5[++e13], r4.anchorPoint = (240 & s7) >> 4, r4.rowCount = 15 & s7, s7 = i5[++e13], r4.columnCount = 63 & s7, s7 = i5[++e13], r4.windowStyle = (56 & s7) >> 3, r4.penStyle = 7 & s7, r4.virtualRowCount = r4.rowCount + 1, e13;
  }, Ie2.prototype.setWindowAttributes = function(e13, t4) {
    var i5 = this.current708Packet.data, s7 = i5[e13], n7 = t4.currentWindow.winAttr;
    return s7 = i5[++e13], n7.fillOpacity = (192 & s7) >> 6, n7.fillRed = (48 & s7) >> 4, n7.fillGreen = (12 & s7) >> 2, n7.fillBlue = 3 & s7, s7 = i5[++e13], n7.borderType = (192 & s7) >> 6, n7.borderRed = (48 & s7) >> 4, n7.borderGreen = (12 & s7) >> 2, n7.borderBlue = 3 & s7, s7 = i5[++e13], n7.borderType += (128 & s7) >> 5, n7.wordWrap = (64 & s7) >> 6, n7.printDirection = (48 & s7) >> 4, n7.scrollDirection = (12 & s7) >> 2, n7.justify = 3 & s7, s7 = i5[++e13], n7.effectSpeed = (240 & s7) >> 4, n7.effectDirection = (12 & s7) >> 2, n7.displayEffect = 3 & s7, e13;
  }, Ie2.prototype.flushDisplayed = function(e13, t4) {
    for (var i5 = [], s7 = 0; s7 < 8; s7++) t4.windows[s7].visible && !t4.windows[s7].isEmpty() && i5.push(t4.windows[s7].getText());
    t4.endPts = e13, t4.text = i5.join("\n\n"), this.pushCaption(t4), t4.startPts = e13;
  }, Ie2.prototype.pushCaption = function(e13) {
    "" !== e13.text && (this.trigger("data", {
      startPts: e13.startPts,
      endPts: e13.endPts,
      text: e13.text,
      stream: "cc708_" + e13.serviceNum
    }), e13.text = "", e13.startPts = e13.endPts);
  }, Ie2.prototype.displayWindows = function(e13, t4) {
    var i5 = this.current708Packet.data[++e13], s7 = this.getPts(e13);
    this.flushDisplayed(s7, t4);
    for (var n7 = 0; n7 < 8; n7++) i5 & 1 << n7 && (t4.windows[n7].visible = 1);
    return e13;
  }, Ie2.prototype.hideWindows = function(e13, t4) {
    var i5 = this.current708Packet.data[++e13], s7 = this.getPts(e13);
    this.flushDisplayed(s7, t4);
    for (var n7 = 0; n7 < 8; n7++) i5 & 1 << n7 && (t4.windows[n7].visible = 0);
    return e13;
  }, Ie2.prototype.toggleWindows = function(e13, t4) {
    var i5 = this.current708Packet.data[++e13], s7 = this.getPts(e13);
    this.flushDisplayed(s7, t4);
    for (var n7 = 0; n7 < 8; n7++) i5 & 1 << n7 && (t4.windows[n7].visible ^= 1);
    return e13;
  }, Ie2.prototype.clearWindows = function(e13, t4) {
    var i5 = this.current708Packet.data[++e13], s7 = this.getPts(e13);
    this.flushDisplayed(s7, t4);
    for (var n7 = 0; n7 < 8; n7++) i5 & 1 << n7 && t4.windows[n7].clearText();
    return e13;
  }, Ie2.prototype.deleteWindows = function(e13, t4) {
    var i5 = this.current708Packet.data[++e13], s7 = this.getPts(e13);
    this.flushDisplayed(s7, t4);
    for (var n7 = 0; n7 < 8; n7++) i5 & 1 << n7 && t4.windows[n7].reset();
    return e13;
  }, Ie2.prototype.setPenAttributes = function(e13, t4) {
    var i5 = this.current708Packet.data, s7 = i5[e13], n7 = t4.currentWindow.penAttr;
    return s7 = i5[++e13], n7.textTag = (240 & s7) >> 4, n7.offset = (12 & s7) >> 2, n7.penSize = 3 & s7, s7 = i5[++e13], n7.italics = (128 & s7) >> 7, n7.underline = (64 & s7) >> 6, n7.edgeType = (56 & s7) >> 3, n7.fontStyle = 7 & s7, e13;
  }, Ie2.prototype.setPenColor = function(e13, t4) {
    var i5 = this.current708Packet.data, s7 = i5[e13], n7 = t4.currentWindow.penColor;
    return s7 = i5[++e13], n7.fgOpacity = (192 & s7) >> 6, n7.fgRed = (48 & s7) >> 4, n7.fgGreen = (12 & s7) >> 2, n7.fgBlue = 3 & s7, s7 = i5[++e13], n7.bgOpacity = (192 & s7) >> 6, n7.bgRed = (48 & s7) >> 4, n7.bgGreen = (12 & s7) >> 2, n7.bgBlue = 3 & s7, s7 = i5[++e13], n7.edgeRed = (48 & s7) >> 4, n7.edgeGreen = (12 & s7) >> 2, n7.edgeBlue = 3 & s7, e13;
  }, Ie2.prototype.setPenLocation = function(e13, t4) {
    var i5 = this.current708Packet.data, s7 = i5[e13], n7 = t4.currentWindow.penLoc;
    return t4.currentWindow.pendingNewLine = true, s7 = i5[++e13], n7.row = 15 & s7, s7 = i5[++e13], n7.column = 63 & s7, e13;
  }, Ie2.prototype.reset = function(e13, t4) {
    var i5 = this.getPts(e13);
    return this.flushDisplayed(i5, t4), this.initService(t4.serviceNum, e13);
  };
  var Ae2 = {
    42: 225,
    92: 233,
    94: 237,
    95: 243,
    96: 250,
    123: 231,
    124: 247,
    125: 209,
    126: 241,
    127: 9608,
    304: 174,
    305: 176,
    306: 189,
    307: 191,
    308: 8482,
    309: 162,
    310: 163,
    311: 9834,
    312: 224,
    313: 160,
    314: 232,
    315: 226,
    316: 234,
    317: 238,
    318: 244,
    319: 251,
    544: 193,
    545: 201,
    546: 211,
    547: 218,
    548: 220,
    549: 252,
    550: 8216,
    551: 161,
    552: 42,
    553: 39,
    554: 8212,
    555: 169,
    556: 8480,
    557: 8226,
    558: 8220,
    559: 8221,
    560: 192,
    561: 194,
    562: 199,
    563: 200,
    564: 202,
    565: 203,
    566: 235,
    567: 206,
    568: 207,
    569: 239,
    570: 212,
    571: 217,
    572: 249,
    573: 219,
    574: 171,
    575: 187,
    800: 195,
    801: 227,
    802: 205,
    803: 204,
    804: 236,
    805: 210,
    806: 242,
    807: 213,
    808: 245,
    809: 123,
    810: 125,
    811: 92,
    812: 94,
    813: 95,
    814: 124,
    815: 126,
    816: 196,
    817: 228,
    818: 214,
    819: 246,
    820: 223,
    821: 165,
    822: 164,
    823: 9474,
    824: 197,
    825: 229,
    826: 216,
    827: 248,
    828: 9484,
    829: 9488,
    830: 9492,
    831: 9496
  }, De2 = function(e13) {
    return null === e13 ? "" : (e13 = Ae2[e13] || e13, String.fromCharCode(e13));
  }, Pe2 = 14, Le2 = [4352, 4384, 4608, 4640, 5376, 5408, 5632, 5664, 5888, 5920, 4096, 4864, 4896, 5120, 5152], Oe2 = function() {
    for (var e13 = [], t4 = Pe2 + 1; t4--; ) e13.push({
      text: "",
      indent: 0,
      offset: 0
    });
    return e13;
  }, Ne2 = function(e13, t4) {
    Ne2.prototype.init.call(this), this.field_ = e13 || 0, this.dataChannel_ = t4 || 0, this.name_ = "CC" + (1 + (this.field_ << 1 | this.dataChannel_)), this.setConstants(), this.reset(), this.push = function(e14) {
      var t5, i5, s7, n7, r4;
      if ((t5 = 32639 & e14.ccData) !== this.lastControlCode_) {
        if (4096 == (61440 & t5) ? this.lastControlCode_ = t5 : t5 !== this.PADDING_ && (this.lastControlCode_ = null), s7 = t5 >>> 8, n7 = 255 & t5, t5 !== this.PADDING_) if (t5 === this.RESUME_CAPTION_LOADING_) this.mode_ = "popOn";
        else if (t5 === this.END_OF_CAPTION_) this.mode_ = "popOn", this.clearFormatting(e14.pts), this.flushDisplayed(e14.pts), i5 = this.displayed_, this.displayed_ = this.nonDisplayed_, this.nonDisplayed_ = i5, this.startPts_ = e14.pts;
        else if (t5 === this.ROLL_UP_2_ROWS_) this.rollUpRows_ = 2, this.setRollUp(e14.pts);
        else if (t5 === this.ROLL_UP_3_ROWS_) this.rollUpRows_ = 3, this.setRollUp(e14.pts);
        else if (t5 === this.ROLL_UP_4_ROWS_) this.rollUpRows_ = 4, this.setRollUp(e14.pts);
        else if (t5 === this.CARRIAGE_RETURN_) this.clearFormatting(e14.pts), this.flushDisplayed(e14.pts), this.shiftRowsUp_(), this.startPts_ = e14.pts;
        else if (t5 === this.BACKSPACE_) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_].text = this.nonDisplayed_[this.row_].text.slice(0, -1) : this.displayed_[this.row_].text = this.displayed_[this.row_].text.slice(0, -1);
        else if (t5 === this.ERASE_DISPLAYED_MEMORY_) this.flushDisplayed(e14.pts), this.displayed_ = Oe2();
        else if (t5 === this.ERASE_NON_DISPLAYED_MEMORY_) this.nonDisplayed_ = Oe2();
        else if (t5 === this.RESUME_DIRECT_CAPTIONING_) "paintOn" !== this.mode_ && (this.flushDisplayed(e14.pts), this.displayed_ = Oe2()), this.mode_ = "paintOn", this.startPts_ = e14.pts;
        else if (this.isSpecialCharacter(s7, n7)) r4 = De2((s7 = (3 & s7) << 8) | n7), this[this.mode_](e14.pts, r4), this.column_++;
        else if (this.isExtCharacter(s7, n7)) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_].text = this.nonDisplayed_[this.row_].text.slice(0, -1) : this.displayed_[this.row_].text = this.displayed_[this.row_].text.slice(0, -1), r4 = De2((s7 = (3 & s7) << 8) | n7), this[this.mode_](e14.pts, r4), this.column_++;
        else if (this.isMidRowCode(s7, n7)) this.clearFormatting(e14.pts), this[this.mode_](e14.pts, " "), this.column_++, 14 & ~n7 || this.addFormatting(e14.pts, ["i"]), 1 & ~n7 || this.addFormatting(e14.pts, ["u"]);
        else if (this.isOffsetControlCode(s7, n7)) {
          const e15 = 3 & n7;
          this.nonDisplayed_[this.row_].offset = e15, this.column_ += e15;
        } else if (this.isPAC(s7, n7)) {
          var a7 = Le2.indexOf(7968 & t5);
          if ("rollUp" === this.mode_ && (a7 - this.rollUpRows_ + 1 < 0 && (a7 = this.rollUpRows_ - 1), this.setRollUp(e14.pts, a7)), a7 !== this.row_ && a7 >= 0 && a7 <= 14 && (this.clearFormatting(e14.pts), this.row_ = a7), 1 & n7 && -1 === this.formatting_.indexOf("u") && this.addFormatting(e14.pts, ["u"]), !(16 & ~t5)) {
            const e15 = (14 & t5) >> 1;
            this.column_ = 4 * e15, this.nonDisplayed_[this.row_].indent += e15;
          }
          this.isColorPAC(n7) && (14 & ~n7 || this.addFormatting(e14.pts, ["i"]));
        } else this.isNormalChar(s7) && (0 === n7 && (n7 = null), r4 = De2(s7), r4 += De2(n7), this[this.mode_](e14.pts, r4), this.column_ += r4.length);
      } else this.lastControlCode_ = null;
    };
  };
  Ne2.prototype = new be2(), Ne2.prototype.flushDisplayed = function(e13) {
    const t4 = (e14) => {
      this.trigger("log", {
        level: "warn",
        message: "Skipping a malformed 608 caption at index " + e14 + "."
      });
    }, i5 = [];
    this.displayed_.forEach((e14, s7) => {
      if (e14 && e14.text && e14.text.length) {
        try {
          e14.text = e14.text.trim();
        } catch (l_) {
          t4(s7);
        }
        e14.text.length && i5.push({
          text: e14.text,
          line: s7 + 1,
          position: 10 + Math.min(70, 10 * e14.indent) + 2.5 * e14.offset
        });
      } else null == e14 && t4(s7);
    }), i5.length && this.trigger("data", {
      startPts: this.startPts_,
      endPts: e13,
      content: i5,
      stream: this.name_
    });
  }, Ne2.prototype.reset = function() {
    this.mode_ = "popOn", this.topRow_ = 0, this.startPts_ = 0, this.displayed_ = Oe2(), this.nonDisplayed_ = Oe2(), this.lastControlCode_ = null, this.column_ = 0, this.row_ = Pe2, this.rollUpRows_ = 2, this.formatting_ = [];
  }, Ne2.prototype.setConstants = function() {
    0 === this.dataChannel_ ? (this.BASE_ = 16, this.EXT_ = 17, this.CONTROL_ = (20 | this.field_) << 8, this.OFFSET_ = 23) : 1 === this.dataChannel_ && (this.BASE_ = 24, this.EXT_ = 25, this.CONTROL_ = (28 | this.field_) << 8, this.OFFSET_ = 31), this.PADDING_ = 0, this.RESUME_CAPTION_LOADING_ = 32 | this.CONTROL_, this.END_OF_CAPTION_ = 47 | this.CONTROL_, this.ROLL_UP_2_ROWS_ = 37 | this.CONTROL_, this.ROLL_UP_3_ROWS_ = 38 | this.CONTROL_, this.ROLL_UP_4_ROWS_ = 39 | this.CONTROL_, this.CARRIAGE_RETURN_ = 45 | this.CONTROL_, this.RESUME_DIRECT_CAPTIONING_ = 41 | this.CONTROL_, this.BACKSPACE_ = 33 | this.CONTROL_, this.ERASE_DISPLAYED_MEMORY_ = 44 | this.CONTROL_, this.ERASE_NON_DISPLAYED_MEMORY_ = 46 | this.CONTROL_;
  }, Ne2.prototype.isSpecialCharacter = function(e13, t4) {
    return e13 === this.EXT_ && t4 >= 48 && t4 <= 63;
  }, Ne2.prototype.isExtCharacter = function(e13, t4) {
    return (e13 === this.EXT_ + 1 || e13 === this.EXT_ + 2) && t4 >= 32 && t4 <= 63;
  }, Ne2.prototype.isMidRowCode = function(e13, t4) {
    return e13 === this.EXT_ && t4 >= 32 && t4 <= 47;
  }, Ne2.prototype.isOffsetControlCode = function(e13, t4) {
    return e13 === this.OFFSET_ && t4 >= 33 && t4 <= 35;
  }, Ne2.prototype.isPAC = function(e13, t4) {
    return e13 >= this.BASE_ && e13 < this.BASE_ + 8 && t4 >= 64 && t4 <= 127;
  }, Ne2.prototype.isColorPAC = function(e13) {
    return e13 >= 64 && e13 <= 79 || e13 >= 96 && e13 <= 127;
  }, Ne2.prototype.isNormalChar = function(e13) {
    return e13 >= 32 && e13 <= 127;
  }, Ne2.prototype.setRollUp = function(e13, t4) {
    if ("rollUp" !== this.mode_ && (this.row_ = Pe2, this.mode_ = "rollUp", this.flushDisplayed(e13), this.nonDisplayed_ = Oe2(), this.displayed_ = Oe2()), void 0 !== t4 && t4 !== this.row_) for (var i5 = 0; i5 < this.rollUpRows_; i5++) this.displayed_[t4 - i5] = this.displayed_[this.row_ - i5], this.displayed_[this.row_ - i5] = {
      text: "",
      indent: 0,
      offset: 0
    };
    void 0 === t4 && (t4 = this.row_), this.topRow_ = t4 - this.rollUpRows_ + 1;
  }, Ne2.prototype.addFormatting = function(e13, t4) {
    this.formatting_ = this.formatting_.concat(t4);
    var i5 = t4.reduce(function(e14, t5) {
      return e14 + "<" + t5 + ">";
    }, "");
    this[this.mode_](e13, i5);
  }, Ne2.prototype.clearFormatting = function(e13) {
    if (this.formatting_.length) {
      var t4 = this.formatting_.reverse().reduce(function(e14, t5) {
        return e14 + "</" + t5 + ">";
      }, "");
      this.formatting_ = [], this[this.mode_](e13, t4);
    }
  }, Ne2.prototype.popOn = function(e13, t4) {
    var i5 = this.nonDisplayed_[this.row_].text;
    i5 += t4, this.nonDisplayed_[this.row_].text = i5;
  }, Ne2.prototype.rollUp = function(e13, t4) {
    var i5 = this.displayed_[this.row_].text;
    i5 += t4, this.displayed_[this.row_].text = i5;
  }, Ne2.prototype.shiftRowsUp_ = function() {
    var e13;
    for (e13 = 0; e13 < this.topRow_; e13++) this.displayed_[e13] = {
      text: "",
      indent: 0,
      offset: 0
    };
    for (e13 = this.row_ + 1; e13 < Pe2 + 1; e13++) this.displayed_[e13] = {
      text: "",
      indent: 0,
      offset: 0
    };
    for (e13 = this.topRow_; e13 < this.row_; e13++) this.displayed_[e13] = this.displayed_[e13 + 1];
    this.displayed_[this.row_] = {
      text: "",
      indent: 0,
      offset: 0
    };
  }, Ne2.prototype.paintOn = function(e13, t4) {
    var i5 = this.displayed_[this.row_].text;
    i5 += t4, this.displayed_[this.row_].text = i5;
  };
  var Re2 = {
    CaptionStream: Se2,
    Cea608Stream: Ne2,
    Cea708Stream: Ie2
  }, Me2 = {
    H264_STREAM_TYPE: 27,
    ADTS_STREAM_TYPE: 15,
    METADATA_STREAM_TYPE: 21
  }, Ue2 = $2, Be2 = 8589934592, Fe2 = 4294967296, qe2 = "shared", je2 = function(e13, t4) {
    var i5 = 1;
    for (e13 > t4 && (i5 = -1); Math.abs(t4 - e13) > Fe2; ) e13 += i5 * Be2;
    return e13;
  }, $e2 = function(e13) {
    var t4, i5;
    $e2.prototype.init.call(this), this.type_ = e13 || qe2, this.push = function(e14) {
      "metadata" !== e14.type ? this.type_ !== qe2 && e14.type !== this.type_ || (void 0 === i5 && (i5 = e14.dts), e14.dts = je2(e14.dts, i5), e14.pts = je2(e14.pts, i5), t4 = e14.dts, this.trigger("data", e14)) : this.trigger("data", e14);
    }, this.flush = function() {
      i5 = t4, this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    }, this.discontinuity = function() {
      i5 = void 0, t4 = void 0;
    }, this.reset = function() {
      this.discontinuity(), this.trigger("reset");
    };
  };
  $e2.prototype = new Ue2();
  var He2, Ve2 = {
    TimestampRolloverStream: $e2,
    handleRollover: je2
  }, ze2 = (e13, t4, i5) => {
    if (!e13) return -1;
    for (var s7 = i5; s7 < e13.length; s7++) if (e13[s7] === t4) return s7;
    return -1;
  }, We2 = {
    typedArrayIndexOf: ze2
  }.typedArrayIndexOf, Ge2 = {
    Iso88591: 0,
    Utf16: 1,
    Utf16be: 2,
    Utf8: 3
  }, Xe2 = function(e13, t4, i5) {
    var s7, n7 = "";
    for (s7 = t4; s7 < i5; s7++) n7 += "%" + ("00" + e13[s7].toString(16)).slice(-2);
    return n7;
  }, Ke2 = function(e13, t4, i5) {
    return decodeURIComponent(Xe2(e13, t4, i5));
  }, Ye2 = function(e13, t4, i5) {
    return unescape(Xe2(e13, t4, i5));
  }, Qe2 = function(e13) {
    return e13[0] << 21 | e13[1] << 14 | e13[2] << 7 | e13[3];
  }, Je2 = {
    APIC: function(e13) {
      var t4, i5, s7 = 1, n7 = "-->";
      e13.data[0] === Ge2.Utf8 && ((t4 = We2(e13.data, 0, s7)) < 0 || (e13.mimeType = Ye2(e13.data, s7, t4), s7 = t4 + 1, e13.pictureType = e13.data[s7], s7++, (i5 = We2(e13.data, 0, s7)) < 0 || (e13.description = Ke2(e13.data, s7, i5), s7 = i5 + 1, e13.mimeType === n7 ? e13.url = Ye2(e13.data, s7, e13.data.length) : e13.pictureData = e13.data.subarray(s7, e13.data.length))));
    },
    "T*": function(e13) {
      e13.data[0] === Ge2.Utf8 && (e13.value = Ke2(e13.data, 1, e13.data.length).replace(/\0*$/, ""), e13.values = e13.value.split("\0"));
    },
    TXXX: function(e13) {
      var t4;
      e13.data[0] === Ge2.Utf8 && -1 !== (t4 = We2(e13.data, 0, 1)) && (e13.description = Ke2(e13.data, 1, t4), e13.value = Ke2(e13.data, t4 + 1, e13.data.length).replace(/\0*$/, ""), e13.data = e13.value);
    },
    "W*": function(e13) {
      e13.url = Ye2(e13.data, 0, e13.data.length).replace(/\0.*$/, "");
    },
    WXXX: function(e13) {
      var t4;
      e13.data[0] === Ge2.Utf8 && -1 !== (t4 = We2(e13.data, 0, 1)) && (e13.description = Ke2(e13.data, 1, t4), e13.url = Ye2(e13.data, t4 + 1, e13.data.length).replace(/\0.*$/, ""));
    },
    PRIV: function(e13) {
      var t4;
      for (t4 = 0; t4 < e13.data.length; t4++) if (0 === e13.data[t4]) {
        e13.owner = Ye2(e13.data, 0, t4);
        break;
      }
      e13.privateData = e13.data.subarray(t4 + 1), e13.data = e13.privateData;
    }
  }, Ze2 = {
    parseId3Frames: function(e13) {
      var t4, i5 = 10, s7 = 0, n7 = [];
      if (!(e13.length < 10 || e13[0] !== "I".charCodeAt(0) || e13[1] !== "D".charCodeAt(0) || e13[2] !== "3".charCodeAt(0))) {
        s7 = Qe2(e13.subarray(6, 10)), s7 += 10, 64 & e13[5] && (i5 += 4, i5 += Qe2(e13.subarray(10, 14)), s7 -= Qe2(e13.subarray(16, 20)));
        do {
          if ((t4 = Qe2(e13.subarray(i5 + 4, i5 + 8))) < 1) break;
          var r4 = {
            id: String.fromCharCode(e13[i5], e13[i5 + 1], e13[i5 + 2], e13[i5 + 3]),
            data: e13.subarray(i5 + 10, i5 + t4 + 10)
          };
          r4.key = r4.id, Je2[r4.id] ? Je2[r4.id](r4) : "T" === r4.id[0] ? Je2["T*"](r4) : "W" === r4.id[0] && Je2["W*"](r4), n7.push(r4), i5 += 10, i5 += t4;
        } while (i5 < s7);
        return n7;
      }
    },
    parseSyncSafeInteger: Qe2,
    frameParsers: Je2
  }, et2 = Me2, tt2 = Ze2;
  (He2 = function(e13) {
    var t4, i5 = {
      descriptor: e13 && e13.descriptor
    }, s7 = 0, n7 = [], r4 = 0;
    if (He2.prototype.init.call(this), this.dispatchType = et2.METADATA_STREAM_TYPE.toString(16), i5.descriptor) for (t4 = 0; t4 < i5.descriptor.length; t4++) this.dispatchType += ("00" + i5.descriptor[t4].toString(16)).slice(-2);
    this.push = function(e14) {
      var t5, i6, a7, o5, l6;
      if ("timed-metadata" === e14.type) {
        if (e14.dataAlignmentIndicator && (r4 = 0, n7.length = 0), 0 === n7.length && (e14.data.length < 10 || e14.data[0] !== "I".charCodeAt(0) || e14.data[1] !== "D".charCodeAt(0) || e14.data[2] !== "3".charCodeAt(0))) this.trigger("log", {
          level: "warn",
          message: "Skipping unrecognized metadata packet"
        });
        else if (n7.push(e14), r4 += e14.data.byteLength, 1 === n7.length && (s7 = tt2.parseSyncSafeInteger(e14.data.subarray(6, 10)), s7 += 10), !(r4 < s7)) {
          for (t5 = {
            data: new Uint8Array(s7),
            frames: [],
            pts: n7[0].pts,
            dts: n7[0].dts
          }, l6 = 0; l6 < s7; ) t5.data.set(n7[0].data.subarray(0, s7 - l6), l6), l6 += n7[0].data.byteLength, r4 -= n7[0].data.byteLength, n7.shift();
          i6 = 10, 64 & t5.data[5] && (i6 += 4, i6 += tt2.parseSyncSafeInteger(t5.data.subarray(10, 14)), s7 -= tt2.parseSyncSafeInteger(t5.data.subarray(16, 20)));
          do {
            if ((a7 = tt2.parseSyncSafeInteger(t5.data.subarray(i6 + 4, i6 + 8))) < 1) {
              this.trigger("log", {
                level: "warn",
                message: "Malformed ID3 frame encountered. Skipping remaining metadata parsing."
              });
              break;
            }
            if ((o5 = {
              id: String.fromCharCode(t5.data[i6], t5.data[i6 + 1], t5.data[i6 + 2], t5.data[i6 + 3]),
              data: t5.data.subarray(i6 + 10, i6 + a7 + 10)
            }).key = o5.id, tt2.frameParsers[o5.id] ? tt2.frameParsers[o5.id](o5) : "T" === o5.id[0] ? tt2.frameParsers["T*"](o5) : "W" === o5.id[0] && tt2.frameParsers["W*"](o5), "com.apple.streaming.transportStreamTimestamp" === o5.owner) {
              var h2 = o5.data, d5 = (1 & h2[3]) << 30 | h2[4] << 22 | h2[5] << 14 | h2[6] << 6 | h2[7] >>> 2;
              d5 *= 4, d5 += 3 & h2[7], o5.timeStamp = d5, void 0 === t5.pts && void 0 === t5.dts && (t5.pts = o5.timeStamp, t5.dts = o5.timeStamp), this.trigger("timestamp", o5);
            }
            t5.frames.push(o5), i6 += 10, i6 += a7;
          } while (i6 < s7);
          this.trigger("data", t5);
        }
      }
    };
  }).prototype = new $2();
  var it2, st2, nt2, rt2 = He2, at2 = $2, ot2 = Re2, lt2 = Me2, ht2 = Ve2.TimestampRolloverStream, dt2 = 188, ut2 = 71;
  (it2 = function() {
    var e13 = new Uint8Array(dt2), t4 = 0;
    it2.prototype.init.call(this), this.push = function(i5) {
      var s7, n7 = 0, r4 = dt2;
      for (t4 ? ((s7 = new Uint8Array(i5.byteLength + t4)).set(e13.subarray(0, t4)), s7.set(i5, t4), t4 = 0) : s7 = i5; r4 < s7.byteLength; ) s7[n7] !== ut2 || s7[r4] !== ut2 ? (n7++, r4++) : (this.trigger("data", s7.subarray(n7, r4)), n7 += dt2, r4 += dt2);
      n7 < s7.byteLength && (e13.set(s7.subarray(n7), 0), t4 = s7.byteLength - n7);
    }, this.flush = function() {
      t4 === dt2 && e13[0] === ut2 && (this.trigger("data", e13), t4 = 0), this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    }, this.reset = function() {
      t4 = 0, this.trigger("reset");
    };
  }).prototype = new at2(), st2 = function() {
    var e13, t4, i5, s7;
    st2.prototype.init.call(this), s7 = this, this.packetsWaitingForPmt = [], this.programMapTable = void 0, e13 = function(e14, s8) {
      var n7 = 0;
      s8.payloadUnitStartIndicator && (n7 += e14[n7] + 1), "pat" === s8.type ? t4(e14.subarray(n7), s8) : i5(e14.subarray(n7), s8);
    }, t4 = function(e14, t5) {
      t5.section_number = e14[7], t5.last_section_number = e14[8], s7.pmtPid = (31 & e14[10]) << 8 | e14[11], t5.pmtPid = s7.pmtPid;
    }, i5 = function(e14, t5) {
      var i6, n7;
      if (1 & e14[5]) {
        for (s7.programMapTable = {
          video: null,
          audio: null,
          "timed-metadata": {}
        }, i6 = 3 + ((15 & e14[1]) << 8 | e14[2]) - 4, n7 = 12 + ((15 & e14[10]) << 8 | e14[11]); n7 < i6; ) {
          var r4 = e14[n7], a7 = (31 & e14[n7 + 1]) << 8 | e14[n7 + 2];
          r4 === lt2.H264_STREAM_TYPE && null === s7.programMapTable.video ? s7.programMapTable.video = a7 : r4 === lt2.ADTS_STREAM_TYPE && null === s7.programMapTable.audio ? s7.programMapTable.audio = a7 : r4 === lt2.METADATA_STREAM_TYPE && (s7.programMapTable["timed-metadata"][a7] = r4), n7 += 5 + ((15 & e14[n7 + 3]) << 8 | e14[n7 + 4]);
        }
        t5.programMapTable = s7.programMapTable;
      }
    }, this.push = function(t5) {
      var i6 = {}, s8 = 4;
      if (i6.payloadUnitStartIndicator = !!(64 & t5[1]), i6.pid = 31 & t5[1], i6.pid <<= 8, i6.pid |= t5[2], (48 & t5[3]) >>> 4 > 1 && (s8 += t5[s8] + 1), 0 === i6.pid) i6.type = "pat", e13(t5.subarray(s8), i6), this.trigger("data", i6);
      else if (i6.pid === this.pmtPid) for (i6.type = "pmt", e13(t5.subarray(s8), i6), this.trigger("data", i6); this.packetsWaitingForPmt.length; ) this.processPes_.apply(this, this.packetsWaitingForPmt.shift());
      else void 0 === this.programMapTable ? this.packetsWaitingForPmt.push([t5, s8, i6]) : this.processPes_(t5, s8, i6);
    }, this.processPes_ = function(e14, t5, i6) {
      i6.pid === this.programMapTable.video ? i6.streamType = lt2.H264_STREAM_TYPE : i6.pid === this.programMapTable.audio ? i6.streamType = lt2.ADTS_STREAM_TYPE : i6.streamType = this.programMapTable["timed-metadata"][i6.pid], i6.type = "pes", i6.data = e14.subarray(t5), this.trigger("data", i6);
    };
  }, st2.prototype = new at2(), st2.STREAM_TYPES = {
    h264: 27,
    adts: 15
  }, nt2 = function() {
    var e13, t4 = this, i5 = false, s7 = {
      data: [],
      size: 0
    }, n7 = {
      data: [],
      size: 0
    }, r4 = {
      data: [],
      size: 0
    }, a7 = function(e14, t5) {
      var i6;
      const s8 = e14[0] << 16 | e14[1] << 8 | e14[2];
      t5.data = new Uint8Array(), 1 === s8 && (t5.packetLength = 6 + (e14[4] << 8 | e14[5]), t5.dataAlignmentIndicator = !!(4 & e14[6]), 192 & (i6 = e14[7]) && (t5.pts = (14 & e14[9]) << 27 | (255 & e14[10]) << 20 | (254 & e14[11]) << 12 | (255 & e14[12]) << 5 | (254 & e14[13]) >>> 3, t5.pts *= 4, t5.pts += (6 & e14[13]) >>> 1, t5.dts = t5.pts, 64 & i6 && (t5.dts = (14 & e14[14]) << 27 | (255 & e14[15]) << 20 | (254 & e14[16]) << 12 | (255 & e14[17]) << 5 | (254 & e14[18]) >>> 3, t5.dts *= 4, t5.dts += (6 & e14[18]) >>> 1)), t5.data = e14.subarray(9 + e14[8]));
    }, o5 = function(e14, i6, s8) {
      var n8, r5 = new Uint8Array(e14.size), o6 = {
        type: i6
      }, l6 = 0, h2 = 0, d5 = false;
      if (e14.data.length && !(e14.size < 9)) {
        for (o6.trackId = e14.data[0].pid, l6 = 0; l6 < e14.data.length; l6++) n8 = e14.data[l6], r5.set(n8.data, h2), h2 += n8.data.byteLength;
        a7(r5, o6), d5 = "video" === i6 || o6.packetLength <= e14.size, (s8 || d5) && (e14.size = 0, e14.data.length = 0), d5 && t4.trigger("data", o6);
      }
    };
    nt2.prototype.init.call(this), this.push = function(a8) {
      ({
        pat: function() {
        },
        pes: function() {
          var e14, t5;
          switch (a8.streamType) {
            case lt2.H264_STREAM_TYPE:
              e14 = s7, t5 = "video";
              break;
            case lt2.ADTS_STREAM_TYPE:
              e14 = n7, t5 = "audio";
              break;
            case lt2.METADATA_STREAM_TYPE:
              e14 = r4, t5 = "timed-metadata";
              break;
            default:
              return;
          }
          a8.payloadUnitStartIndicator && o5(e14, t5, true), e14.data.push(a8), e14.size += a8.data.byteLength;
        },
        pmt: function() {
          var s8 = {
            type: "metadata",
            tracks: []
          };
          null !== (e13 = a8.programMapTable).video && s8.tracks.push({
            timelineStartInfo: {
              baseMediaDecodeTime: 0
            },
            id: +e13.video,
            codec: "avc",
            type: "video"
          }), null !== e13.audio && s8.tracks.push({
            timelineStartInfo: {
              baseMediaDecodeTime: 0
            },
            id: +e13.audio,
            codec: "adts",
            type: "audio"
          }), i5 = true, t4.trigger("data", s8);
        }
      })[a8.type]();
    }, this.reset = function() {
      s7.size = 0, s7.data.length = 0, n7.size = 0, n7.data.length = 0, this.trigger("reset");
    }, this.flushStreams_ = function() {
      o5(s7, "video"), o5(n7, "audio"), o5(r4, "timed-metadata");
    }, this.flush = function() {
      if (!i5 && e13) {
        var s8 = {
          type: "metadata",
          tracks: []
        };
        null !== e13.video && s8.tracks.push({
          timelineStartInfo: {
            baseMediaDecodeTime: 0
          },
          id: +e13.video,
          codec: "avc",
          type: "video"
        }), null !== e13.audio && s8.tracks.push({
          timelineStartInfo: {
            baseMediaDecodeTime: 0
          },
          id: +e13.audio,
          codec: "adts",
          type: "audio"
        }), t4.trigger("data", s8);
      }
      i5 = false, this.flushStreams_(), this.trigger("done");
    };
  }, nt2.prototype = new at2();
  var ct2 = {
    PAT_PID: 0,
    MP2T_PACKET_LENGTH: dt2,
    TransportPacketStream: it2,
    TransportParseStream: st2,
    ElementaryStream: nt2,
    TimestampRolloverStream: ht2,
    CaptionStream: ot2.CaptionStream,
    Cea608Stream: ot2.Cea608Stream,
    Cea708Stream: ot2.Cea708Stream,
    MetadataStream: rt2
  };
  for (var pt2 in lt2) lt2.hasOwnProperty(pt2) && (ct2[pt2] = lt2[pt2]);
  var mt2, gt2 = ct2, ft2 = $2, yt2 = de2.ONE_SECOND_IN_TS, _t2 = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
  (mt2 = function(e13) {
    var t4, i5 = 0;
    mt2.prototype.init.call(this), this.skipWarn_ = function(e14, t5) {
      this.trigger("log", {
        level: "warn",
        message: `adts skiping bytes ${e14} to ${t5} in frame ${i5} outside syncword`
      });
    }, this.push = function(s7) {
      var n7, r4, a7, o5, l6, h2 = 0;
      if (e13 || (i5 = 0), "audio" === s7.type) {
        var d5;
        for (t4 && t4.length ? (a7 = t4, (t4 = new Uint8Array(a7.byteLength + s7.data.byteLength)).set(a7), t4.set(s7.data, a7.byteLength)) : t4 = s7.data; h2 + 7 < t4.length; ) if (255 === t4[h2] && 240 == (246 & t4[h2 + 1])) {
          if ("number" == typeof d5 && (this.skipWarn_(d5, h2), d5 = null), r4 = 2 * (1 & ~t4[h2 + 1]), n7 = (3 & t4[h2 + 3]) << 11 | t4[h2 + 4] << 3 | (224 & t4[h2 + 5]) >> 5, l6 = (o5 = 1024 * (1 + (3 & t4[h2 + 6]))) * yt2 / _t2[(60 & t4[h2 + 2]) >>> 2], t4.byteLength - h2 < n7) break;
          this.trigger("data", {
            pts: s7.pts + i5 * l6,
            dts: s7.dts + i5 * l6,
            sampleCount: o5,
            audioobjecttype: 1 + (t4[h2 + 2] >>> 6 & 3),
            channelcount: (1 & t4[h2 + 2]) << 2 | (192 & t4[h2 + 3]) >>> 6,
            samplerate: _t2[(60 & t4[h2 + 2]) >>> 2],
            samplingfrequencyindex: (60 & t4[h2 + 2]) >>> 2,
            samplesize: 16,
            data: t4.subarray(h2 + 7 + r4, h2 + n7)
          }), i5++, h2 += n7;
        } else "number" != typeof d5 && (d5 = h2), h2++;
        "number" == typeof d5 && (this.skipWarn_(d5, h2), d5 = null), t4 = t4.subarray(h2);
      }
    }, this.flush = function() {
      i5 = 0, this.trigger("done");
    }, this.reset = function() {
      t4 = void 0, this.trigger("reset");
    }, this.endTimeline = function() {
      t4 = void 0, this.trigger("endedtimeline");
    };
  }).prototype = new ft2();
  var vt2, bt2 = mt2;
  vt2 = function(e13) {
    var t4 = e13.byteLength, i5 = 0, s7 = 0;
    this.length = function() {
      return 8 * t4;
    }, this.bitsAvailable = function() {
      return 8 * t4 + s7;
    }, this.loadWord = function() {
      var n7 = e13.byteLength - t4, r4 = new Uint8Array(4), a7 = Math.min(4, t4);
      if (0 === a7) throw new Error("no bytes available");
      r4.set(e13.subarray(n7, n7 + a7)), i5 = new DataView(r4.buffer).getUint32(0), s7 = 8 * a7, t4 -= a7;
    }, this.skipBits = function(e14) {
      var n7;
      s7 > e14 ? (i5 <<= e14, s7 -= e14) : (e14 -= s7, e14 -= 8 * (n7 = Math.floor(e14 / 8)), t4 -= n7, this.loadWord(), i5 <<= e14, s7 -= e14);
    }, this.readBits = function(e14) {
      var n7 = Math.min(s7, e14), r4 = i5 >>> 32 - n7;
      return (s7 -= n7) > 0 ? i5 <<= n7 : t4 > 0 && this.loadWord(), (n7 = e14 - n7) > 0 ? r4 << n7 | this.readBits(n7) : r4;
    }, this.skipLeadingZeros = function() {
      var e14;
      for (e14 = 0; e14 < s7; ++e14) if (i5 & 2147483648 >>> e14) return i5 <<= e14, s7 -= e14, e14;
      return this.loadWord(), e14 + this.skipLeadingZeros();
    }, this.skipUnsignedExpGolomb = function() {
      this.skipBits(1 + this.skipLeadingZeros());
    }, this.skipExpGolomb = function() {
      this.skipBits(1 + this.skipLeadingZeros());
    }, this.readUnsignedExpGolomb = function() {
      var e14 = this.skipLeadingZeros();
      return this.readBits(e14 + 1) - 1;
    }, this.readExpGolomb = function() {
      var e14 = this.readUnsignedExpGolomb();
      return 1 & e14 ? 1 + e14 >>> 1 : -1 * (e14 >>> 1);
    }, this.readBoolean = function() {
      return 1 === this.readBits(1);
    }, this.readUnsignedByte = function() {
      return this.readBits(8);
    }, this.loadWord();
  };
  var Tt2, St2, Et2, wt2 = $2, Ct2 = vt2;
  (St2 = function() {
    var e13, t4, i5 = 0;
    St2.prototype.init.call(this), this.push = function(s7) {
      var n7;
      t4 ? ((n7 = new Uint8Array(t4.byteLength + s7.data.byteLength)).set(t4), n7.set(s7.data, t4.byteLength), t4 = n7) : t4 = s7.data;
      for (var r4 = t4.byteLength; i5 < r4 - 3; i5++) if (1 === t4[i5 + 2]) {
        e13 = i5 + 5;
        break;
      }
      for (; e13 < r4; ) switch (t4[e13]) {
        case 0:
          if (0 !== t4[e13 - 1]) {
            e13 += 2;
            break;
          }
          if (0 !== t4[e13 - 2]) {
            e13++;
            break;
          }
          i5 + 3 !== e13 - 2 && this.trigger("data", t4.subarray(i5 + 3, e13 - 2));
          do {
            e13++;
          } while (1 !== t4[e13] && e13 < r4);
          i5 = e13 - 2, e13 += 3;
          break;
        case 1:
          if (0 !== t4[e13 - 1] || 0 !== t4[e13 - 2]) {
            e13 += 3;
            break;
          }
          this.trigger("data", t4.subarray(i5 + 3, e13 - 2)), i5 = e13 - 2, e13 += 3;
          break;
        default:
          e13 += 3;
      }
      t4 = t4.subarray(i5), e13 -= i5, i5 = 0;
    }, this.reset = function() {
      t4 = null, i5 = 0, this.trigger("reset");
    }, this.flush = function() {
      t4 && t4.byteLength > 3 && this.trigger("data", t4.subarray(i5 + 3)), t4 = null, i5 = 0, this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    };
  }).prototype = new wt2(), Et2 = {
    100: true,
    110: true,
    122: true,
    244: true,
    44: true,
    83: true,
    86: true,
    118: true,
    128: true,
    138: true,
    139: true,
    134: true
  }, Tt2 = function() {
    var e13, t4, i5, s7, n7, r4, a7, o5 = new St2();
    Tt2.prototype.init.call(this), e13 = this, this.push = function(e14) {
      "video" === e14.type && (t4 = e14.trackId, i5 = e14.pts, s7 = e14.dts, o5.push(e14));
    }, o5.on("data", function(a8) {
      var o6 = {
        trackId: t4,
        pts: i5,
        dts: s7,
        data: a8,
        nalUnitTypeCode: 31 & a8[0]
      };
      switch (o6.nalUnitTypeCode) {
        case 5:
          o6.nalUnitType = "slice_layer_without_partitioning_rbsp_idr";
          break;
        case 6:
          o6.nalUnitType = "sei_rbsp", o6.escapedRBSP = n7(a8.subarray(1));
          break;
        case 7:
          o6.nalUnitType = "seq_parameter_set_rbsp", o6.escapedRBSP = n7(a8.subarray(1)), o6.config = r4(o6.escapedRBSP);
          break;
        case 8:
          o6.nalUnitType = "pic_parameter_set_rbsp";
          break;
        case 9:
          o6.nalUnitType = "access_unit_delimiter_rbsp";
      }
      e13.trigger("data", o6);
    }), o5.on("done", function() {
      e13.trigger("done");
    }), o5.on("partialdone", function() {
      e13.trigger("partialdone");
    }), o5.on("reset", function() {
      e13.trigger("reset");
    }), o5.on("endedtimeline", function() {
      e13.trigger("endedtimeline");
    }), this.flush = function() {
      o5.flush();
    }, this.partialFlush = function() {
      o5.partialFlush();
    }, this.reset = function() {
      o5.reset();
    }, this.endTimeline = function() {
      o5.endTimeline();
    }, a7 = function(e14, t5) {
      var i6, s8 = 8, n8 = 8;
      for (i6 = 0; i6 < e14; i6++) 0 !== n8 && (n8 = (s8 + t5.readExpGolomb() + 256) % 256), s8 = 0 === n8 ? s8 : n8;
    }, n7 = function(e14) {
      for (var t5, i6, s8 = e14.byteLength, n8 = [], r5 = 1; r5 < s8 - 2; ) 0 === e14[r5] && 0 === e14[r5 + 1] && 3 === e14[r5 + 2] ? (n8.push(r5 + 2), r5 += 2) : r5++;
      if (0 === n8.length) return e14;
      t5 = s8 - n8.length, i6 = new Uint8Array(t5);
      var a8 = 0;
      for (r5 = 0; r5 < t5; a8++, r5++) a8 === n8[0] && (a8++, n8.shift()), i6[r5] = e14[a8];
      return i6;
    }, r4 = function(e14) {
      var t5, i6, s8, n8, r5, o6, l6, h2, d5, u5, c3, p3, m7 = 0, g5 = 0, f7 = 0, y5 = 0, _4 = [1, 1];
      if (i6 = (t5 = new Ct2(e14)).readUnsignedByte(), n8 = t5.readUnsignedByte(), s8 = t5.readUnsignedByte(), t5.skipUnsignedExpGolomb(), Et2[i6] && (3 === (r5 = t5.readUnsignedExpGolomb()) && t5.skipBits(1), t5.skipUnsignedExpGolomb(), t5.skipUnsignedExpGolomb(), t5.skipBits(1), t5.readBoolean())) for (c3 = 3 !== r5 ? 8 : 12, p3 = 0; p3 < c3; p3++) t5.readBoolean() && a7(p3 < 6 ? 16 : 64, t5);
      if (t5.skipUnsignedExpGolomb(), 0 === (o6 = t5.readUnsignedExpGolomb())) t5.readUnsignedExpGolomb();
      else if (1 === o6) for (t5.skipBits(1), t5.skipExpGolomb(), t5.skipExpGolomb(), l6 = t5.readUnsignedExpGolomb(), p3 = 0; p3 < l6; p3++) t5.skipExpGolomb();
      if (t5.skipUnsignedExpGolomb(), t5.skipBits(1), h2 = t5.readUnsignedExpGolomb(), d5 = t5.readUnsignedExpGolomb(), 0 === (u5 = t5.readBits(1)) && t5.skipBits(1), t5.skipBits(1), t5.readBoolean() && (m7 = t5.readUnsignedExpGolomb(), g5 = t5.readUnsignedExpGolomb(), f7 = t5.readUnsignedExpGolomb(), y5 = t5.readUnsignedExpGolomb()), t5.readBoolean() && t5.readBoolean()) {
        switch (t5.readUnsignedByte()) {
          case 1:
            _4 = [1, 1];
            break;
          case 2:
            _4 = [12, 11];
            break;
          case 3:
            _4 = [10, 11];
            break;
          case 4:
            _4 = [16, 11];
            break;
          case 5:
            _4 = [40, 33];
            break;
          case 6:
            _4 = [24, 11];
            break;
          case 7:
            _4 = [20, 11];
            break;
          case 8:
            _4 = [32, 11];
            break;
          case 9:
            _4 = [80, 33];
            break;
          case 10:
            _4 = [18, 11];
            break;
          case 11:
            _4 = [15, 11];
            break;
          case 12:
            _4 = [64, 33];
            break;
          case 13:
            _4 = [160, 99];
            break;
          case 14:
            _4 = [4, 3];
            break;
          case 15:
            _4 = [3, 2];
            break;
          case 16:
            _4 = [2, 1];
            break;
          case 255:
            _4 = [t5.readUnsignedByte() << 8 | t5.readUnsignedByte(), t5.readUnsignedByte() << 8 | t5.readUnsignedByte()];
        }
        _4 && (_4[0], _4[1]);
      }
      return {
        profileIdc: i6,
        levelIdc: s8,
        profileCompatibility: n8,
        width: 16 * (h2 + 1) - 2 * m7 - 2 * g5,
        height: (2 - u5) * (d5 + 1) * 16 - 2 * f7 - 2 * y5,
        sarRatio: _4
      };
    };
  }, Tt2.prototype = new wt2();
  var kt2, xt2 = {
    H264Stream: Tt2,
    NalByteStream: St2
  }, It2 = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350], At2 = function(e13, t4) {
    var i5 = e13[t4 + 6] << 21 | e13[t4 + 7] << 14 | e13[t4 + 8] << 7 | e13[t4 + 9];
    return i5 = i5 >= 0 ? i5 : 0, (16 & e13[t4 + 5]) >> 4 ? i5 + 20 : i5 + 10;
  }, Dt2 = function(e13, t4) {
    return e13.length - t4 < 10 || e13[t4] !== "I".charCodeAt(0) || e13[t4 + 1] !== "D".charCodeAt(0) || e13[t4 + 2] !== "3".charCodeAt(0) ? t4 : (t4 += At2(e13, t4), Dt2(e13, t4));
  }, Pt2 = function(e13) {
    return e13[0] << 21 | e13[1] << 14 | e13[2] << 7 | e13[3];
  }, Lt2 = function(e13, t4, i5) {
    var s7, n7 = "";
    for (s7 = t4; s7 < i5; s7++) n7 += "%" + ("00" + e13[s7].toString(16)).slice(-2);
    return n7;
  }, Ot2 = function(e13, t4, i5) {
    return unescape(Lt2(e13, t4, i5));
  }, Nt2 = {
    isLikelyAacData: function(e13) {
      var t4 = Dt2(e13, 0);
      return e13.length >= t4 + 2 && !(255 & ~e13[t4]) && !(240 & ~e13[t4 + 1]) && 16 == (22 & e13[t4 + 1]);
    },
    parseId3TagSize: At2,
    parseAdtsSize: function(e13, t4) {
      var i5 = (224 & e13[t4 + 5]) >> 5, s7 = e13[t4 + 4] << 3;
      return 6144 & e13[t4 + 3] | s7 | i5;
    },
    parseType: function(e13, t4) {
      return e13[t4] === "I".charCodeAt(0) && e13[t4 + 1] === "D".charCodeAt(0) && e13[t4 + 2] === "3".charCodeAt(0) ? "timed-metadata" : true & e13[t4] && !(240 & ~e13[t4 + 1]) ? "audio" : null;
    },
    parseSampleRate: function(e13) {
      for (var t4 = 0; t4 + 5 < e13.length; ) {
        if (255 === e13[t4] && 240 == (246 & e13[t4 + 1])) return It2[(60 & e13[t4 + 2]) >>> 2];
        t4++;
      }
      return null;
    },
    parseAacTimestamp: function(e13) {
      var t4, i5, s7;
      t4 = 10, 64 & e13[5] && (t4 += 4, t4 += Pt2(e13.subarray(10, 14)));
      do {
        if ((i5 = Pt2(e13.subarray(t4 + 4, t4 + 8))) < 1) return null;
        if ("PRIV" === String.fromCharCode(e13[t4], e13[t4 + 1], e13[t4 + 2], e13[t4 + 3])) {
          s7 = e13.subarray(t4 + 10, t4 + i5 + 10);
          for (var n7 = 0; n7 < s7.byteLength; n7++) if (0 === s7[n7]) {
            if ("com.apple.streaming.transportStreamTimestamp" === Ot2(s7, 0, n7)) {
              var r4 = s7.subarray(n7 + 1), a7 = (1 & r4[3]) << 30 | r4[4] << 22 | r4[5] << 14 | r4[6] << 6 | r4[7] >>> 2;
              return a7 *= 4, a7 += 3 & r4[7];
            }
            break;
          }
        }
        t4 += 10, t4 += i5;
      } while (t4 < e13.byteLength);
      return null;
    }
  }, Rt2 = Nt2;
  (kt2 = function() {
    var e13 = new Uint8Array(), t4 = 0;
    kt2.prototype.init.call(this), this.setTimestamp = function(e14) {
      t4 = e14;
    }, this.push = function(i5) {
      var s7, n7, r4, a7, o5 = 0, l6 = 0;
      for (e13.length ? (a7 = e13.length, (e13 = new Uint8Array(i5.byteLength + a7)).set(e13.subarray(0, a7)), e13.set(i5, a7)) : e13 = i5; e13.length - l6 >= 3; ) if (e13[l6] !== "I".charCodeAt(0) || e13[l6 + 1] !== "D".charCodeAt(0) || e13[l6 + 2] !== "3".charCodeAt(0)) {
        if (255 & ~e13[l6] || 240 & ~e13[l6 + 1]) l6++;
        else {
          if (e13.length - l6 < 7) break;
          if (l6 + (o5 = Rt2.parseAdtsSize(e13, l6)) > e13.length) break;
          r4 = {
            type: "audio",
            data: e13.subarray(l6, l6 + o5),
            pts: t4,
            dts: t4
          }, this.trigger("data", r4), l6 += o5;
        }
      } else {
        if (e13.length - l6 < 10) break;
        if (l6 + (o5 = Rt2.parseId3TagSize(e13, l6)) > e13.length) break;
        n7 = {
          type: "timed-metadata",
          data: e13.subarray(l6, l6 + o5)
        }, this.trigger("data", n7), l6 += o5;
      }
      s7 = e13.length - l6, e13 = s7 > 0 ? e13.subarray(l6) : new Uint8Array();
    }, this.reset = function() {
      e13 = new Uint8Array(), this.trigger("reset");
    }, this.endTimeline = function() {
      e13 = new Uint8Array(), this.trigger("endedtimeline");
    };
  }).prototype = new $2();
  var Mt2, Ut2, Bt2, Ft2, qt2 = kt2, jt2 = ["audioobjecttype", "channelcount", "samplerate", "samplingfrequencyindex", "samplesize"], $t2 = ["width", "height", "profileIdc", "levelIdc", "profileCompatibility", "sarRatio"], Ht2 = $2, Vt2 = ee2, zt2 = se2, Wt2 = me2, Gt2 = fe2, Xt2 = gt2, Kt2 = de2, Yt2 = bt2, Qt2 = xt2.H264Stream, Jt2 = qt2, Zt2 = Nt2.isLikelyAacData, ei2 = de2.ONE_SECOND_IN_TS, ti2 = jt2, ii2 = $t2, si2 = function(e13, t4) {
    t4.stream = e13, this.trigger("log", t4);
  }, ni2 = function(e13, t4) {
    for (var i5 = Object.keys(t4), s7 = 0; s7 < i5.length; s7++) {
      var n7 = i5[s7];
      "headOfPipeline" !== n7 && t4[n7].on && t4[n7].on("log", si2.bind(e13, n7));
    }
  }, ri2 = function(e13, t4) {
    var i5;
    if (e13.length !== t4.length) return false;
    for (i5 = 0; i5 < e13.length; i5++) if (e13[i5] !== t4[i5]) return false;
    return true;
  }, ai2 = function(e13, t4, i5, s7, n7, r4) {
    return {
      start: {
        dts: e13,
        pts: e13 + (i5 - t4)
      },
      end: {
        dts: e13 + (s7 - t4),
        pts: e13 + (n7 - i5)
      },
      prependedContentDuration: r4,
      baseMediaDecodeTime: e13
    };
  };
  Ut2 = function(e13, t4) {
    var i5, s7 = [], n7 = 0, r4 = 0, a7 = 1 / 0;
    i5 = (t4 = t4 || {}).firstSequenceNumber || 0, Ut2.prototype.init.call(this), this.push = function(t5) {
      Gt2.collectDtsInfo(e13, t5), e13 && ti2.forEach(function(i6) {
        e13[i6] = t5[i6];
      }), s7.push(t5);
    }, this.setEarliestDts = function(e14) {
      n7 = e14;
    }, this.setVideoBaseMediaDecodeTime = function(e14) {
      a7 = e14;
    }, this.setAudioAppendStart = function(e14) {
      r4 = e14;
    }, this.flush = function() {
      var o5, l6, h2, d5, u5, c3, p3;
      0 !== s7.length ? (o5 = Wt2.trimAdtsFramesByEarliestDts(s7, e13, n7), e13.baseMediaDecodeTime = Gt2.calculateTrackBaseMediaDecodeTime(e13, t4.keepOriginalTimestamps), p3 = Wt2.prefixWithSilence(e13, o5, r4, a7), e13.samples = Wt2.generateSampleTable(o5), h2 = Vt2.mdat(Wt2.concatenateFrameData(o5)), s7 = [], l6 = Vt2.moof(i5, [e13]), d5 = new Uint8Array(l6.byteLength + h2.byteLength), i5++, d5.set(l6), d5.set(h2, l6.byteLength), Gt2.clearDtsInfo(e13), u5 = Math.ceil(1024 * ei2 / e13.samplerate), o5.length && (c3 = o5.length * u5, this.trigger("segmentTimingInfo", ai2(Kt2.audioTsToVideoTs(e13.baseMediaDecodeTime, e13.samplerate), o5[0].dts, o5[0].pts, o5[0].dts + c3, o5[0].pts + c3, p3 || 0)), this.trigger("timingInfo", {
        start: o5[0].pts,
        end: o5[0].pts + c3
      })), this.trigger("data", {
        track: e13,
        boxes: d5
      }), this.trigger("done", "AudioSegmentStream")) : this.trigger("done", "AudioSegmentStream");
    }, this.reset = function() {
      Gt2.clearDtsInfo(e13), s7 = [], this.trigger("reset");
    };
  }, Ut2.prototype = new Ht2(), Mt2 = function(e13, t4) {
    var i5, s7, n7, r4 = [], a7 = [];
    i5 = (t4 = t4 || {}).firstSequenceNumber || 0, Mt2.prototype.init.call(this), delete e13.minPTS, this.gopCache_ = [], this.push = function(t5) {
      Gt2.collectDtsInfo(e13, t5), "seq_parameter_set_rbsp" !== t5.nalUnitType || s7 || (s7 = t5.config, e13.sps = [t5.data], ii2.forEach(function(t6) {
        e13[t6] = s7[t6];
      }, this)), "pic_parameter_set_rbsp" !== t5.nalUnitType || n7 || (n7 = t5.data, e13.pps = [t5.data]), r4.push(t5);
    }, this.flush = function() {
      for (var s8, n8, o5, l6, h2, d5, u5, c3, p3 = 0; r4.length && "access_unit_delimiter_rbsp" !== r4[0].nalUnitType; ) r4.shift();
      if (0 === r4.length) return this.resetStream_(), void this.trigger("done", "VideoSegmentStream");
      if (s8 = zt2.groupNalsIntoFrames(r4), (o5 = zt2.groupFramesIntoGops(s8))[0][0].keyFrame || ((n8 = this.getGopForFusion_(r4[0], e13)) ? (p3 = n8.duration, o5.unshift(n8), o5.byteLength += n8.byteLength, o5.nalCount += n8.nalCount, o5.pts = n8.pts, o5.dts = n8.dts, o5.duration += n8.duration) : o5 = zt2.extendFirstKeyFrame(o5)), a7.length) {
        var m7;
        if (!(m7 = t4.alignGopsAtEnd ? this.alignGopsAtEnd_(o5) : this.alignGopsAtStart_(o5))) return this.gopCache_.unshift({
          gop: o5.pop(),
          pps: e13.pps,
          sps: e13.sps
        }), this.gopCache_.length = Math.min(6, this.gopCache_.length), r4 = [], this.resetStream_(), void this.trigger("done", "VideoSegmentStream");
        Gt2.clearDtsInfo(e13), o5 = m7;
      }
      Gt2.collectDtsInfo(e13, o5), e13.samples = zt2.generateSampleTable(o5), h2 = Vt2.mdat(zt2.concatenateNalData(o5)), e13.baseMediaDecodeTime = Gt2.calculateTrackBaseMediaDecodeTime(e13, t4.keepOriginalTimestamps), this.trigger("processedGopsInfo", o5.map(function(e14) {
        return {
          pts: e14.pts,
          dts: e14.dts,
          byteLength: e14.byteLength
        };
      })), u5 = o5[0], c3 = o5[o5.length - 1], this.trigger("segmentTimingInfo", ai2(e13.baseMediaDecodeTime, u5.dts, u5.pts, c3.dts + c3.duration, c3.pts + c3.duration, p3)), this.trigger("timingInfo", {
        start: o5[0].pts,
        end: o5[o5.length - 1].pts + o5[o5.length - 1].duration
      }), this.gopCache_.unshift({
        gop: o5.pop(),
        pps: e13.pps,
        sps: e13.sps
      }), this.gopCache_.length = Math.min(6, this.gopCache_.length), r4 = [], this.trigger("baseMediaDecodeTime", e13.baseMediaDecodeTime), this.trigger("timelineStartInfo", e13.timelineStartInfo), l6 = Vt2.moof(i5, [e13]), d5 = new Uint8Array(l6.byteLength + h2.byteLength), i5++, d5.set(l6), d5.set(h2, l6.byteLength), this.trigger("data", {
        track: e13,
        boxes: d5
      }), this.resetStream_(), this.trigger("done", "VideoSegmentStream");
    }, this.reset = function() {
      this.resetStream_(), r4 = [], this.gopCache_.length = 0, a7.length = 0, this.trigger("reset");
    }, this.resetStream_ = function() {
      Gt2.clearDtsInfo(e13), s7 = void 0, n7 = void 0;
    }, this.getGopForFusion_ = function(t5) {
      var i6, s8, n8, r5, a8, o5 = 45e3, l6 = 1e4, h2 = 1 / 0;
      for (a8 = 0; a8 < this.gopCache_.length; a8++) n8 = (r5 = this.gopCache_[a8]).gop, e13.pps && ri2(e13.pps[0], r5.pps[0]) && e13.sps && ri2(e13.sps[0], r5.sps[0]) && (n8.dts < e13.timelineStartInfo.dts || (i6 = t5.dts - n8.dts - n8.duration) >= -l6 && i6 <= o5 && (!s8 || h2 > i6) && (s8 = r5, h2 = i6));
      return s8 ? s8.gop : null;
    }, this.alignGopsAtStart_ = function(e14) {
      var t5, i6, s8, n8, r5, o5, l6, h2;
      for (r5 = e14.byteLength, o5 = e14.nalCount, l6 = e14.duration, t5 = i6 = 0; t5 < a7.length && i6 < e14.length && (s8 = a7[t5], n8 = e14[i6], s8.pts !== n8.pts); ) n8.pts > s8.pts ? t5++ : (i6++, r5 -= n8.byteLength, o5 -= n8.nalCount, l6 -= n8.duration);
      return 0 === i6 ? e14 : i6 === e14.length ? null : ((h2 = e14.slice(i6)).byteLength = r5, h2.duration = l6, h2.nalCount = o5, h2.pts = h2[0].pts, h2.dts = h2[0].dts, h2);
    }, this.alignGopsAtEnd_ = function(e14) {
      var t5, i6, s8, n8, r5, o5, l6;
      for (t5 = a7.length - 1, i6 = e14.length - 1, r5 = null, o5 = false; t5 >= 0 && i6 >= 0; ) {
        if (s8 = a7[t5], n8 = e14[i6], s8.pts === n8.pts) {
          o5 = true;
          break;
        }
        s8.pts > n8.pts ? t5-- : (t5 === a7.length - 1 && (r5 = i6), i6--);
      }
      if (!o5 && null === r5) return null;
      if (0 === (l6 = o5 ? i6 : r5)) return e14;
      var h2 = e14.slice(l6), d5 = h2.reduce(function(e15, t6) {
        return e15.byteLength += t6.byteLength, e15.duration += t6.duration, e15.nalCount += t6.nalCount, e15;
      }, {
        byteLength: 0,
        duration: 0,
        nalCount: 0
      });
      return h2.byteLength = d5.byteLength, h2.duration = d5.duration, h2.nalCount = d5.nalCount, h2.pts = h2[0].pts, h2.dts = h2[0].dts, h2;
    }, this.alignGopsWith = function(e14) {
      a7 = e14;
    };
  }, Mt2.prototype = new Ht2(), Ft2 = function(e13, t4) {
    this.numberOfTracks = 0, this.metadataStream = t4, void 0 !== (e13 = e13 || {}).remux ? this.remuxTracks = !!e13.remux : this.remuxTracks = true, "boolean" == typeof e13.keepOriginalTimestamps ? this.keepOriginalTimestamps = e13.keepOriginalTimestamps : this.keepOriginalTimestamps = false, this.pendingTracks = [], this.videoTrack = null, this.pendingBoxes = [], this.pendingCaptions = [], this.pendingMetadata = [], this.pendingBytes = 0, this.emittedTracks = 0, Ft2.prototype.init.call(this), this.push = function(e14) {
      return e14.content || e14.text ? this.pendingCaptions.push(e14) : e14.frames ? this.pendingMetadata.push(e14) : (this.pendingTracks.push(e14.track), this.pendingBytes += e14.boxes.byteLength, "video" === e14.track.type && (this.videoTrack = e14.track, this.pendingBoxes.push(e14.boxes)), void ("audio" === e14.track.type && (this.audioTrack = e14.track, this.pendingBoxes.unshift(e14.boxes))));
    };
  }, Ft2.prototype = new Ht2(), Ft2.prototype.flush = function(e13) {
    var t4, i5, s7, n7, r4 = 0, a7 = {
      captions: [],
      captionStreams: {},
      metadata: [],
      info: {}
    }, o5 = 0;
    if (this.pendingTracks.length < this.numberOfTracks) {
      if ("VideoSegmentStream" !== e13 && "AudioSegmentStream" !== e13) return;
      if (this.remuxTracks) return;
      if (0 === this.pendingTracks.length) return this.emittedTracks++, void (this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0));
    }
    if (this.videoTrack ? (o5 = this.videoTrack.timelineStartInfo.pts, ii2.forEach(function(e14) {
      a7.info[e14] = this.videoTrack[e14];
    }, this)) : this.audioTrack && (o5 = this.audioTrack.timelineStartInfo.pts, ti2.forEach(function(e14) {
      a7.info[e14] = this.audioTrack[e14];
    }, this)), this.videoTrack || this.audioTrack) {
      for (1 === this.pendingTracks.length ? a7.type = this.pendingTracks[0].type : a7.type = "combined", this.emittedTracks += this.pendingTracks.length, s7 = Vt2.initSegment(this.pendingTracks), a7.initSegment = new Uint8Array(s7.byteLength), a7.initSegment.set(s7), a7.data = new Uint8Array(this.pendingBytes), n7 = 0; n7 < this.pendingBoxes.length; n7++) a7.data.set(this.pendingBoxes[n7], r4), r4 += this.pendingBoxes[n7].byteLength;
      for (n7 = 0; n7 < this.pendingCaptions.length; n7++) (t4 = this.pendingCaptions[n7]).startTime = Kt2.metadataTsToSeconds(t4.startPts, o5, this.keepOriginalTimestamps), t4.endTime = Kt2.metadataTsToSeconds(t4.endPts, o5, this.keepOriginalTimestamps), a7.captionStreams[t4.stream] = true, a7.captions.push(t4);
      for (n7 = 0; n7 < this.pendingMetadata.length; n7++) (i5 = this.pendingMetadata[n7]).cueTime = Kt2.metadataTsToSeconds(i5.pts, o5, this.keepOriginalTimestamps), a7.metadata.push(i5);
      for (a7.metadata.dispatchType = this.metadataStream.dispatchType, this.pendingTracks.length = 0, this.videoTrack = null, this.pendingBoxes.length = 0, this.pendingCaptions.length = 0, this.pendingBytes = 0, this.pendingMetadata.length = 0, this.trigger("data", a7), n7 = 0; n7 < a7.captions.length; n7++) t4 = a7.captions[n7], this.trigger("caption", t4);
      for (n7 = 0; n7 < a7.metadata.length; n7++) i5 = a7.metadata[n7], this.trigger("id3Frame", i5);
    }
    this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0);
  }, Ft2.prototype.setRemux = function(e13) {
    this.remuxTracks = e13;
  }, Bt2 = function(e13) {
    var t4, i5, s7 = this, n7 = true;
    Bt2.prototype.init.call(this), e13 = e13 || {}, this.baseMediaDecodeTime = e13.baseMediaDecodeTime || 0, this.transmuxPipeline_ = {}, this.setupAacPipeline = function() {
      var n8 = {};
      this.transmuxPipeline_ = n8, n8.type = "aac", n8.metadataStream = new Xt2.MetadataStream(), n8.aacStream = new Jt2(), n8.audioTimestampRolloverStream = new Xt2.TimestampRolloverStream("audio"), n8.timedMetadataTimestampRolloverStream = new Xt2.TimestampRolloverStream("timed-metadata"), n8.adtsStream = new Yt2(), n8.coalesceStream = new Ft2(e13, n8.metadataStream), n8.headOfPipeline = n8.aacStream, n8.aacStream.pipe(n8.audioTimestampRolloverStream).pipe(n8.adtsStream), n8.aacStream.pipe(n8.timedMetadataTimestampRolloverStream).pipe(n8.metadataStream).pipe(n8.coalesceStream), n8.metadataStream.on("timestamp", function(e14) {
        n8.aacStream.setTimestamp(e14.timeStamp);
      }), n8.aacStream.on("data", function(r4) {
        "timed-metadata" !== r4.type && "audio" !== r4.type || n8.audioSegmentStream || (i5 = i5 || {
          timelineStartInfo: {
            baseMediaDecodeTime: s7.baseMediaDecodeTime
          },
          codec: "adts",
          type: "audio"
        }, n8.coalesceStream.numberOfTracks++, n8.audioSegmentStream = new Ut2(i5, e13), n8.audioSegmentStream.on("log", s7.getLogTrigger_("audioSegmentStream")), n8.audioSegmentStream.on("timingInfo", s7.trigger.bind(s7, "audioTimingInfo")), n8.adtsStream.pipe(n8.audioSegmentStream).pipe(n8.coalesceStream), s7.trigger("trackinfo", {
          hasAudio: !!i5,
          hasVideo: !!t4
        }));
      }), n8.coalesceStream.on("data", this.trigger.bind(this, "data")), n8.coalesceStream.on("done", this.trigger.bind(this, "done")), ni2(this, n8);
    }, this.setupTsPipeline = function() {
      var n8 = {};
      this.transmuxPipeline_ = n8, n8.type = "ts", n8.metadataStream = new Xt2.MetadataStream(), n8.packetStream = new Xt2.TransportPacketStream(), n8.parseStream = new Xt2.TransportParseStream(), n8.elementaryStream = new Xt2.ElementaryStream(), n8.timestampRolloverStream = new Xt2.TimestampRolloverStream(), n8.adtsStream = new Yt2(), n8.h264Stream = new Qt2(), n8.captionStream = new Xt2.CaptionStream(e13), n8.coalesceStream = new Ft2(e13, n8.metadataStream), n8.headOfPipeline = n8.packetStream, n8.packetStream.pipe(n8.parseStream).pipe(n8.elementaryStream).pipe(n8.timestampRolloverStream), n8.timestampRolloverStream.pipe(n8.h264Stream), n8.timestampRolloverStream.pipe(n8.adtsStream), n8.timestampRolloverStream.pipe(n8.metadataStream).pipe(n8.coalesceStream), n8.h264Stream.pipe(n8.captionStream).pipe(n8.coalesceStream), n8.elementaryStream.on("data", function(r4) {
        var a7;
        if ("metadata" === r4.type) {
          for (a7 = r4.tracks.length; a7--; ) t4 || "video" !== r4.tracks[a7].type ? i5 || "audio" !== r4.tracks[a7].type || ((i5 = r4.tracks[a7]).timelineStartInfo.baseMediaDecodeTime = s7.baseMediaDecodeTime) : (t4 = r4.tracks[a7]).timelineStartInfo.baseMediaDecodeTime = s7.baseMediaDecodeTime;
          t4 && !n8.videoSegmentStream && (n8.coalesceStream.numberOfTracks++, n8.videoSegmentStream = new Mt2(t4, e13), n8.videoSegmentStream.on("log", s7.getLogTrigger_("videoSegmentStream")), n8.videoSegmentStream.on("timelineStartInfo", function(t5) {
            i5 && !e13.keepOriginalTimestamps && (i5.timelineStartInfo = t5, n8.audioSegmentStream.setEarliestDts(t5.dts - s7.baseMediaDecodeTime));
          }), n8.videoSegmentStream.on("processedGopsInfo", s7.trigger.bind(s7, "gopInfo")), n8.videoSegmentStream.on("segmentTimingInfo", s7.trigger.bind(s7, "videoSegmentTimingInfo")), n8.videoSegmentStream.on("baseMediaDecodeTime", function(e14) {
            i5 && n8.audioSegmentStream.setVideoBaseMediaDecodeTime(e14);
          }), n8.videoSegmentStream.on("timingInfo", s7.trigger.bind(s7, "videoTimingInfo")), n8.h264Stream.pipe(n8.videoSegmentStream).pipe(n8.coalesceStream)), i5 && !n8.audioSegmentStream && (n8.coalesceStream.numberOfTracks++, n8.audioSegmentStream = new Ut2(i5, e13), n8.audioSegmentStream.on("log", s7.getLogTrigger_("audioSegmentStream")), n8.audioSegmentStream.on("timingInfo", s7.trigger.bind(s7, "audioTimingInfo")), n8.audioSegmentStream.on("segmentTimingInfo", s7.trigger.bind(s7, "audioSegmentTimingInfo")), n8.adtsStream.pipe(n8.audioSegmentStream).pipe(n8.coalesceStream)), s7.trigger("trackinfo", {
            hasAudio: !!i5,
            hasVideo: !!t4
          });
        }
      }), n8.coalesceStream.on("data", this.trigger.bind(this, "data")), n8.coalesceStream.on("id3Frame", function(e14) {
        e14.dispatchType = n8.metadataStream.dispatchType, s7.trigger("id3Frame", e14);
      }), n8.coalesceStream.on("caption", this.trigger.bind(this, "caption")), n8.coalesceStream.on("done", this.trigger.bind(this, "done")), ni2(this, n8);
    }, this.setBaseMediaDecodeTime = function(s8) {
      var n8 = this.transmuxPipeline_;
      e13.keepOriginalTimestamps || (this.baseMediaDecodeTime = s8), i5 && (i5.timelineStartInfo.dts = void 0, i5.timelineStartInfo.pts = void 0, Gt2.clearDtsInfo(i5), n8.audioTimestampRolloverStream && n8.audioTimestampRolloverStream.discontinuity()), t4 && (n8.videoSegmentStream && (n8.videoSegmentStream.gopCache_ = []), t4.timelineStartInfo.dts = void 0, t4.timelineStartInfo.pts = void 0, Gt2.clearDtsInfo(t4), n8.captionStream.reset()), n8.timestampRolloverStream && n8.timestampRolloverStream.discontinuity();
    }, this.setAudioAppendStart = function(e14) {
      i5 && this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e14);
    }, this.setRemux = function(t5) {
      var i6 = this.transmuxPipeline_;
      e13.remux = t5, i6 && i6.coalesceStream && i6.coalesceStream.setRemux(t5);
    }, this.alignGopsWith = function(e14) {
      t4 && this.transmuxPipeline_.videoSegmentStream && this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e14);
    }, this.getLogTrigger_ = function(e14) {
      var t5 = this;
      return function(i6) {
        i6.stream = e14, t5.trigger("log", i6);
      };
    }, this.push = function(e14) {
      if (n7) {
        var t5 = Zt2(e14);
        t5 && "aac" !== this.transmuxPipeline_.type ? this.setupAacPipeline() : t5 || "ts" === this.transmuxPipeline_.type || this.setupTsPipeline(), n7 = false;
      }
      this.transmuxPipeline_.headOfPipeline.push(e14);
    }, this.flush = function() {
      n7 = true, this.transmuxPipeline_.headOfPipeline.flush();
    }, this.endTimeline = function() {
      this.transmuxPipeline_.headOfPipeline.endTimeline();
    }, this.reset = function() {
      this.transmuxPipeline_.headOfPipeline && this.transmuxPipeline_.headOfPipeline.reset();
    }, this.resetCaptions = function() {
      this.transmuxPipeline_.captionStream && this.transmuxPipeline_.captionStream.reset();
    };
  }, Bt2.prototype = new Ht2();
  var oi2, li2, hi2, di2, ui2, ci2, pi2, mi2 = {
    Transmuxer: Bt2,
    VideoSegmentStream: Mt2,
    AudioSegmentStream: Ut2,
    AUDIO_PROPERTIES: ti2,
    VIDEO_PROPERTIES: ii2,
    generateSegmentTimingInfo: ai2
  }, gi2 = {
    toUnsigned: function(e13) {
      return e13 >>> 0;
    },
    toHexString: function(e13) {
      return ("00" + e13.toString(16)).slice(-2);
    }
  }, fi2 = function(e13) {
    var t4 = "";
    return t4 += String.fromCharCode(e13[0]), t4 += String.fromCharCode(e13[1]), t4 += String.fromCharCode(e13[2]), t4 += String.fromCharCode(e13[3]);
  }, yi2 = gi2.toUnsigned, _i2 = fi2, vi2 = function(e13, t4) {
    var i5, s7, n7, r4, a7, o5 = [];
    if (!t4.length) return null;
    for (i5 = 0; i5 < e13.byteLength; ) s7 = yi2(e13[i5] << 24 | e13[i5 + 1] << 16 | e13[i5 + 2] << 8 | e13[i5 + 3]), n7 = _i2(e13.subarray(i5 + 4, i5 + 8)), r4 = s7 > 1 ? i5 + s7 : e13.byteLength, n7 === t4[0] && (1 === t4.length ? o5.push(e13.subarray(i5 + 8, r4)) : (a7 = vi2(e13.subarray(i5 + 8, r4), t4.slice(1))).length && (o5 = o5.concat(a7))), i5 = r4;
    return o5;
  }, bi2 = vi2, Ti2 = gi2.toUnsigned, Si2 = V3.getUint64, Ei2 = function(e13) {
    var t4 = {
      version: e13[0],
      flags: new Uint8Array(e13.subarray(1, 4))
    };
    return 1 === t4.version ? t4.baseMediaDecodeTime = Si2(e13.subarray(4)) : t4.baseMediaDecodeTime = Ti2(e13[4] << 24 | e13[5] << 16 | e13[6] << 8 | e13[7]), t4;
  }, wi2 = function(e13) {
    return {
      isLeading: (12 & e13[0]) >>> 2,
      dependsOn: 3 & e13[0],
      isDependedOn: (192 & e13[1]) >>> 6,
      hasRedundancy: (48 & e13[1]) >>> 4,
      paddingValue: (14 & e13[1]) >>> 1,
      isNonSyncSample: 1 & e13[1],
      degradationPriority: e13[2] << 8 | e13[3]
    };
  }, Ci2 = function(e13) {
    var t4, i5 = {
      version: e13[0],
      flags: new Uint8Array(e13.subarray(1, 4)),
      samples: []
    }, s7 = new DataView(e13.buffer, e13.byteOffset, e13.byteLength), n7 = 1 & i5.flags[2], r4 = 4 & i5.flags[2], a7 = 1 & i5.flags[1], o5 = 2 & i5.flags[1], l6 = 4 & i5.flags[1], h2 = 8 & i5.flags[1], d5 = s7.getUint32(4), u5 = 8;
    for (n7 && (i5.dataOffset = s7.getInt32(u5), u5 += 4), r4 && d5 && (t4 = {
      flags: wi2(e13.subarray(u5, u5 + 4))
    }, u5 += 4, a7 && (t4.duration = s7.getUint32(u5), u5 += 4), o5 && (t4.size = s7.getUint32(u5), u5 += 4), h2 && (1 === i5.version ? t4.compositionTimeOffset = s7.getInt32(u5) : t4.compositionTimeOffset = s7.getUint32(u5), u5 += 4), i5.samples.push(t4), d5--); d5--; ) t4 = {}, a7 && (t4.duration = s7.getUint32(u5), u5 += 4), o5 && (t4.size = s7.getUint32(u5), u5 += 4), l6 && (t4.flags = wi2(e13.subarray(u5, u5 + 4)), u5 += 4), h2 && (1 === i5.version ? t4.compositionTimeOffset = s7.getInt32(u5) : t4.compositionTimeOffset = s7.getUint32(u5), u5 += 4), i5.samples.push(t4);
    return i5;
  }, ki2 = function(e13) {
    var t4, i5 = new DataView(e13.buffer, e13.byteOffset, e13.byteLength), s7 = {
      version: e13[0],
      flags: new Uint8Array(e13.subarray(1, 4)),
      trackId: i5.getUint32(4)
    }, n7 = 1 & s7.flags[2], r4 = 2 & s7.flags[2], a7 = 8 & s7.flags[2], o5 = 16 & s7.flags[2], l6 = 32 & s7.flags[2], h2 = 65536 & s7.flags[0], d5 = 131072 & s7.flags[0];
    return t4 = 8, n7 && (t4 += 4, s7.baseDataOffset = i5.getUint32(12), t4 += 4), r4 && (s7.sampleDescriptionIndex = i5.getUint32(t4), t4 += 4), a7 && (s7.defaultSampleDuration = i5.getUint32(t4), t4 += 4), o5 && (s7.defaultSampleSize = i5.getUint32(t4), t4 += 4), l6 && (s7.defaultSampleFlags = i5.getUint32(t4)), h2 && (s7.durationIsEmpty = true), !n7 && d5 && (s7.baseDataOffsetIsMoof = true), s7;
  }, xi2 = "undefined" != typeof window ? window : void 0 !== e12 ? e12 : "undefined" != typeof self ? self : {}, Ii2 = ve2.discardEmulationPreventionBytes, Ai2 = Re2.CaptionStream, Di2 = bi2, Pi2 = Ei2, Li2 = Ci2, Oi2 = ki2, Ni2 = xi2, Ri2 = function(e13, t4) {
    for (var i5 = e13, s7 = 0; s7 < t4.length; s7++) {
      var n7 = t4[s7];
      if (i5 < n7.size) return n7;
      i5 -= n7.size;
    }
    return null;
  }, Mi2 = function(e13, t4, i5) {
    var s7, n7, r4, a7, o5 = new DataView(e13.buffer, e13.byteOffset, e13.byteLength), l6 = {
      logs: [],
      seiNals: []
    };
    for (n7 = 0; n7 + 4 < e13.length; n7 += r4) if (r4 = o5.getUint32(n7), n7 += 4, !(r4 <= 0)) switch (31 & e13[n7]) {
      case 6:
        var h2 = e13.subarray(n7 + 1, n7 + 1 + r4), d5 = Ri2(n7, t4);
        if (s7 = {
          nalUnitType: "sei_rbsp",
          size: r4,
          data: h2,
          escapedRBSP: Ii2(h2),
          trackId: i5
        }, d5) s7.pts = d5.pts, s7.dts = d5.dts, a7 = d5;
        else {
          if (!a7) {
            l6.logs.push({
              level: "warn",
              message: "We've encountered a nal unit without data at " + n7 + " for trackId " + i5 + ". See mux.js#223."
            });
            break;
          }
          s7.pts = a7.pts, s7.dts = a7.dts;
        }
        l6.seiNals.push(s7);
    }
    return l6;
  }, Ui2 = function(e13, t4, i5) {
    var s7 = t4, n7 = i5.defaultSampleDuration || 0, r4 = i5.defaultSampleSize || 0, a7 = i5.trackId, o5 = [];
    return e13.forEach(function(e14) {
      var t5 = Li2(e14).samples;
      t5.forEach(function(e15) {
        void 0 === e15.duration && (e15.duration = n7), void 0 === e15.size && (e15.size = r4), e15.trackId = a7, e15.dts = s7, void 0 === e15.compositionTimeOffset && (e15.compositionTimeOffset = 0), "bigint" == typeof s7 ? (e15.pts = s7 + Ni2.BigInt(e15.compositionTimeOffset), s7 += Ni2.BigInt(e15.duration)) : (e15.pts = s7 + e15.compositionTimeOffset, s7 += e15.duration);
      }), o5 = o5.concat(t5);
    }), o5;
  }, Bi2 = function(e13, t4) {
    var i5 = Di2(e13, ["moof", "traf"]), s7 = Di2(e13, ["mdat"]), n7 = {}, r4 = [];
    return s7.forEach(function(e14, t5) {
      var s8 = i5[t5];
      r4.push({
        mdat: e14,
        traf: s8
      });
    }), r4.forEach(function(e14) {
      var i6, s8, r5 = e14.mdat, a7 = e14.traf, o5 = Di2(a7, ["tfhd"]), l6 = Oi2(o5[0]), h2 = l6.trackId, d5 = Di2(a7, ["tfdt"]), u5 = d5.length > 0 ? Pi2(d5[0]).baseMediaDecodeTime : 0, c3 = Di2(a7, ["trun"]);
      t4 === h2 && c3.length > 0 && (i6 = Ui2(c3, u5, l6), s8 = Mi2(r5, i6, h2), n7[h2] || (n7[h2] = {
        seiNals: [],
        logs: []
      }), n7[h2].seiNals = n7[h2].seiNals.concat(s8.seiNals), n7[h2].logs = n7[h2].logs.concat(s8.logs));
    }), n7;
  }, Fi2 = function(e13, t4, i5) {
    if (null === t4) return null;
    var s7 = Bi2(e13, t4)[t4] || {};
    return {
      seiNals: s7.seiNals,
      logs: s7.logs,
      timescale: i5
    };
  }, qi2 = function() {
    var e13, t4, i5, s7, n7, r4, a7 = false;
    this.isInitialized = function() {
      return a7;
    }, this.init = function(t5) {
      e13 = new Ai2(), a7 = true, r4 = !!t5 && t5.isPartial, e13.on("data", function(e14) {
        e14.startTime = e14.startPts / s7, e14.endTime = e14.endPts / s7, n7.captions.push(e14), n7.captionStreams[e14.stream] = true;
      }), e13.on("log", function(e14) {
        n7.logs.push(e14);
      });
    }, this.isNewInit = function(e14, t5) {
      return !(e14 && 0 === e14.length || t5 && "object" == typeof t5 && 0 === Object.keys(t5).length) && (i5 !== e14[0] || s7 !== t5[i5]);
    }, this.parse = function(e14, r5, a8) {
      var o5;
      if (!this.isInitialized()) return null;
      if (!r5 || !a8) return null;
      if (this.isNewInit(r5, a8)) i5 = r5[0], s7 = a8[i5];
      else if (null === i5 || !s7) return t4.push(e14), null;
      for (; t4.length > 0; ) {
        var l6 = t4.shift();
        this.parse(l6, r5, a8);
      }
      return (o5 = Fi2(e14, i5, s7)) && o5.logs && (n7.logs = n7.logs.concat(o5.logs)), null !== o5 && o5.seiNals ? (this.pushNals(o5.seiNals), this.flushStream(), n7) : n7.logs.length ? {
        logs: n7.logs,
        captions: [],
        captionStreams: []
      } : null;
    }, this.pushNals = function(t5) {
      if (!this.isInitialized() || !t5 || 0 === t5.length) return null;
      t5.forEach(function(t6) {
        e13.push(t6);
      });
    }, this.flushStream = function() {
      if (!this.isInitialized()) return null;
      r4 ? e13.partialFlush() : e13.flush();
    }, this.clearParsedCaptions = function() {
      n7.captions = [], n7.captionStreams = {}, n7.logs = [];
    }, this.resetCaptionStream = function() {
      if (!this.isInitialized()) return null;
      e13.reset();
    }, this.clearAllCaptions = function() {
      this.clearParsedCaptions(), this.resetCaptionStream();
    }, this.reset = function() {
      t4 = [], i5 = null, s7 = null, n7 ? this.clearParsedCaptions() : n7 = {
        captions: [],
        captionStreams: {},
        logs: []
      }, this.resetCaptionStream();
    }, this.reset();
  }, ji2 = qi2, $i2 = {
    uint8ToCString: function(e13) {
      for (var t4 = 0, i5 = String.fromCharCode(e13[t4]), s7 = ""; "\0" !== i5; ) s7 += i5, t4++, i5 = String.fromCharCode(e13[t4]);
      return s7 += i5;
    }
  }.uint8ToCString, Hi2 = V3.getUint64, Vi2 = function(e13) {
    var t4, i5, s7, n7, r4, a7, o5, l6 = 4, h2 = e13[0];
    if (0 === h2) l6 += (t4 = $i2(e13.subarray(l6))).length, l6 += (i5 = $i2(e13.subarray(l6))).length, s7 = (d5 = new DataView(e13.buffer)).getUint32(l6), l6 += 4, r4 = d5.getUint32(l6), l6 += 4, a7 = d5.getUint32(l6), l6 += 4, o5 = d5.getUint32(l6), l6 += 4;
    else if (1 === h2) {
      var d5;
      s7 = (d5 = new DataView(e13.buffer)).getUint32(l6), l6 += 4, n7 = Hi2(e13.subarray(l6)), l6 += 8, a7 = d5.getUint32(l6), l6 += 4, o5 = d5.getUint32(l6), l6 += 4, l6 += (t4 = $i2(e13.subarray(l6))).length, l6 += (i5 = $i2(e13.subarray(l6))).length;
    }
    var u5 = {
      scheme_id_uri: t4,
      value: i5,
      timescale: s7 || 1,
      presentation_time: n7,
      presentation_time_delta: r4,
      event_duration: a7,
      id: o5,
      message_data: new Uint8Array(e13.subarray(l6, e13.byteLength))
    };
    return Wi2(h2, u5) ? u5 : void 0;
  }, zi2 = function(e13, t4, i5, s7) {
    return e13 || 0 === e13 ? e13 / t4 : s7 + i5 / t4;
  }, Wi2 = function(e13, t4) {
    var i5 = "\0" !== t4.scheme_id_uri, s7 = 0 === e13 && Gi2(t4.presentation_time_delta) && i5, n7 = 1 === e13 && Gi2(t4.presentation_time) && i5;
    return !(e13 > 1) && s7 || n7;
  }, Gi2 = function(e13) {
    return void 0 !== e13 || null !== e13;
  }, Xi2 = {
    parseEmsgBox: Vi2,
    scaleTime: zi2
  }, Ki2 = gi2.toUnsigned, Yi2 = gi2.toHexString, Qi2 = bi2, Ji2 = fi2, Zi2 = Xi2, es2 = ki2, ts2 = Ci2, is2 = Ei2, ss2 = V3.getUint64, ns2 = xi2, rs2 = Ze2.parseId3Frames;
  oi2 = function(e13) {
    var t4 = {};
    return Qi2(e13, ["moov", "trak"]).reduce(function(e14, t5) {
      var i5, s7, n7, r4, a7;
      return (i5 = Qi2(t5, ["tkhd"])[0]) ? (s7 = i5[0], r4 = Ki2(i5[n7 = 0 === s7 ? 12 : 20] << 24 | i5[n7 + 1] << 16 | i5[n7 + 2] << 8 | i5[n7 + 3]), (a7 = Qi2(t5, ["mdia", "mdhd"])[0]) ? (n7 = 0 === (s7 = a7[0]) ? 12 : 20, e14[r4] = Ki2(a7[n7] << 24 | a7[n7 + 1] << 16 | a7[n7 + 2] << 8 | a7[n7 + 3]), e14) : null) : null;
    }, t4);
  }, li2 = function(e13, t4) {
    var i5 = Qi2(t4, ["moof", "traf"]).reduce(function(t5, i6) {
      var s7, n7 = Qi2(i6, ["tfhd"])[0], r4 = Ki2(n7[4] << 24 | n7[5] << 16 | n7[6] << 8 | n7[7]), a7 = e13[r4] || 9e4, o5 = Qi2(i6, ["tfdt"])[0], l6 = new DataView(o5.buffer, o5.byteOffset, o5.byteLength);
      let h2;
      return "bigint" == typeof (s7 = 1 === o5[0] ? ss2(o5.subarray(4, 12)) : l6.getUint32(4)) ? h2 = s7 / ns2.BigInt(a7) : "number" != typeof s7 || isNaN(s7) || (h2 = s7 / a7), h2 < Number.MAX_SAFE_INTEGER && (h2 = Number(h2)), h2 < t5 && (t5 = h2), t5;
    }, 1 / 0);
    return "bigint" == typeof i5 || isFinite(i5) ? i5 : 0;
  }, hi2 = function(e13, t4) {
    var i5, s7 = Qi2(t4, ["moof", "traf"]), n7 = 0, r4 = 0;
    if (s7 && s7.length) {
      var a7 = Qi2(s7[0], ["tfhd"])[0], o5 = Qi2(s7[0], ["trun"])[0], l6 = Qi2(s7[0], ["tfdt"])[0];
      if (a7) i5 = es2(a7).trackId;
      if (l6) n7 = is2(l6).baseMediaDecodeTime;
      if (o5) {
        var h2 = ts2(o5);
        h2.samples && h2.samples.length && (r4 = h2.samples[0].compositionTimeOffset || 0);
      }
    }
    var d5 = e13[i5] || 9e4;
    "bigint" == typeof n7 && (r4 = ns2.BigInt(r4), d5 = ns2.BigInt(d5));
    var u5 = (n7 + r4) / d5;
    return "bigint" == typeof u5 && u5 < Number.MAX_SAFE_INTEGER && (u5 = Number(u5)), u5;
  }, di2 = function(e13) {
    var t4 = Qi2(e13, ["moov", "trak"]), i5 = [];
    return t4.forEach(function(e14) {
      var t5 = Qi2(e14, ["mdia", "hdlr"]), s7 = Qi2(e14, ["tkhd"]);
      t5.forEach(function(e15, t6) {
        var n7, r4, a7 = Ji2(e15.subarray(8, 12)), o5 = s7[t6];
        "vide" === a7 && (r4 = 0 === (n7 = new DataView(o5.buffer, o5.byteOffset, o5.byteLength)).getUint8(0) ? n7.getUint32(12) : n7.getUint32(20), i5.push(r4));
      });
    }), i5;
  }, ci2 = function(e13) {
    var t4 = 0 === e13[0] ? 12 : 20;
    return Ki2(e13[t4] << 24 | e13[t4 + 1] << 16 | e13[t4 + 2] << 8 | e13[t4 + 3]);
  }, ui2 = function(e13) {
    var t4 = Qi2(e13, ["moov", "trak"]), i5 = [];
    return t4.forEach(function(e14) {
      var t5, s7, n7 = {}, r4 = Qi2(e14, ["tkhd"])[0];
      r4 && (s7 = (t5 = new DataView(r4.buffer, r4.byteOffset, r4.byteLength)).getUint8(0), n7.id = 0 === s7 ? t5.getUint32(12) : t5.getUint32(20));
      var a7 = Qi2(e14, ["mdia", "hdlr"])[0];
      if (a7) {
        var o5 = Ji2(a7.subarray(8, 12));
        n7.type = "vide" === o5 ? "video" : "soun" === o5 ? "audio" : o5;
      }
      var l6 = Qi2(e14, ["mdia", "minf", "stbl", "stsd"])[0];
      if (l6) {
        var h2 = l6.subarray(8);
        n7.codec = Ji2(h2.subarray(4, 8));
        var d5, u5 = Qi2(h2, [n7.codec])[0];
        u5 && (/^[asm]vc[1-9]$/i.test(n7.codec) ? (d5 = u5.subarray(78), "avcC" === Ji2(d5.subarray(4, 8)) && d5.length > 11 ? (n7.codec += ".", n7.codec += Yi2(d5[9]), n7.codec += Yi2(d5[10]), n7.codec += Yi2(d5[11])) : n7.codec = "avc1.4d400d") : /^mp4[a,v]$/i.test(n7.codec) ? (d5 = u5.subarray(28), "esds" === Ji2(d5.subarray(4, 8)) && d5.length > 20 && 0 !== d5[19] ? (n7.codec += "." + Yi2(d5[19]), n7.codec += "." + Yi2(d5[20] >>> 2 & 63).replace(/^0/, "")) : n7.codec = "mp4a.40.2") : n7.codec = n7.codec.toLowerCase());
      }
      var c3 = Qi2(e14, ["mdia", "mdhd"])[0];
      c3 && (n7.timescale = ci2(c3)), i5.push(n7);
    }), i5;
  }, pi2 = function(e13, t4 = 0) {
    return Qi2(e13, ["emsg"]).map((e14) => {
      var i5 = Zi2.parseEmsgBox(new Uint8Array(e14)), s7 = rs2(i5.message_data);
      return {
        cueTime: Zi2.scaleTime(i5.presentation_time, i5.timescale, i5.presentation_time_delta, t4),
        duration: Zi2.scaleTime(i5.event_duration, i5.timescale),
        frames: s7
      };
    });
  };
  var as2 = {
    findBox: Qi2,
    parseType: Ji2,
    timescale: oi2,
    startTime: li2,
    compositionStartTime: hi2,
    videoTrackIds: di2,
    tracks: ui2,
    getTimescaleFromMediaHeader: ci2,
    getEmsgID3: pi2
  }, os2 = Me2, ls2 = function(e13) {
    var t4 = 31 & e13[1];
    return t4 <<= 8, t4 |= e13[2];
  }, hs2 = function(e13) {
    return !!(64 & e13[1]);
  }, ds2 = function(e13) {
    var t4 = 0;
    return (48 & e13[3]) >>> 4 > 1 && (t4 += e13[4] + 1), t4;
  }, us2 = function(e13) {
    if (!hs2(e13)) return null;
    var t4 = 4 + ds2(e13);
    if (t4 >= e13.byteLength) return null;
    var i5, s7 = null;
    return 192 & (i5 = e13[t4 + 7]) && ((s7 = {}).pts = (14 & e13[t4 + 9]) << 27 | (255 & e13[t4 + 10]) << 20 | (254 & e13[t4 + 11]) << 12 | (255 & e13[t4 + 12]) << 5 | (254 & e13[t4 + 13]) >>> 3, s7.pts *= 4, s7.pts += (6 & e13[t4 + 13]) >>> 1, s7.dts = s7.pts, 64 & i5 && (s7.dts = (14 & e13[t4 + 14]) << 27 | (255 & e13[t4 + 15]) << 20 | (254 & e13[t4 + 16]) << 12 | (255 & e13[t4 + 17]) << 5 | (254 & e13[t4 + 18]) >>> 3, s7.dts *= 4, s7.dts += (6 & e13[t4 + 18]) >>> 1)), s7;
  }, cs2 = function(e13) {
    switch (e13) {
      case 5:
        return "slice_layer_without_partitioning_rbsp_idr";
      case 6:
        return "sei_rbsp";
      case 7:
        return "seq_parameter_set_rbsp";
      case 8:
        return "pic_parameter_set_rbsp";
      case 9:
        return "access_unit_delimiter_rbsp";
      default:
        return null;
    }
  }, ps2 = {
    parseType: function(e13, t4) {
      var i5 = ls2(e13);
      return 0 === i5 ? "pat" : i5 === t4 ? "pmt" : t4 ? "pes" : null;
    },
    parsePat: function(e13) {
      var t4 = hs2(e13), i5 = 4 + ds2(e13);
      return t4 && (i5 += e13[i5] + 1), (31 & e13[i5 + 10]) << 8 | e13[i5 + 11];
    },
    parsePmt: function(e13) {
      var t4 = {}, i5 = hs2(e13), s7 = 4 + ds2(e13);
      if (i5 && (s7 += e13[s7] + 1), 1 & e13[s7 + 5]) {
        var n7;
        n7 = 3 + ((15 & e13[s7 + 1]) << 8 | e13[s7 + 2]) - 4;
        for (var r4 = 12 + ((15 & e13[s7 + 10]) << 8 | e13[s7 + 11]); r4 < n7; ) {
          var a7 = s7 + r4;
          t4[(31 & e13[a7 + 1]) << 8 | e13[a7 + 2]] = e13[a7], r4 += 5 + ((15 & e13[a7 + 3]) << 8 | e13[a7 + 4]);
        }
        return t4;
      }
    },
    parsePayloadUnitStartIndicator: hs2,
    parsePesType: function(e13, t4) {
      switch (t4[ls2(e13)]) {
        case os2.H264_STREAM_TYPE:
          return "video";
        case os2.ADTS_STREAM_TYPE:
          return "audio";
        case os2.METADATA_STREAM_TYPE:
          return "timed-metadata";
        default:
          return null;
      }
    },
    parsePesTime: us2,
    videoPacketContainsKeyFrame: function(e13) {
      for (var t4 = 4 + ds2(e13), i5 = e13.subarray(t4), s7 = 0, n7 = 0, r4 = false; n7 < i5.byteLength - 3; n7++) if (1 === i5[n7 + 2]) {
        s7 = n7 + 5;
        break;
      }
      for (; s7 < i5.byteLength; ) switch (i5[s7]) {
        case 0:
          if (0 !== i5[s7 - 1]) {
            s7 += 2;
            break;
          }
          if (0 !== i5[s7 - 2]) {
            s7++;
            break;
          }
          n7 + 3 !== s7 - 2 && "slice_layer_without_partitioning_rbsp_idr" === cs2(31 & i5[n7 + 3]) && (r4 = true);
          do {
            s7++;
          } while (1 !== i5[s7] && s7 < i5.length);
          n7 = s7 - 2, s7 += 3;
          break;
        case 1:
          if (0 !== i5[s7 - 1] || 0 !== i5[s7 - 2]) {
            s7 += 3;
            break;
          }
          "slice_layer_without_partitioning_rbsp_idr" === cs2(31 & i5[n7 + 3]) && (r4 = true), n7 = s7 - 2, s7 += 3;
          break;
        default:
          s7 += 3;
      }
      return i5 = i5.subarray(n7), s7 -= n7, n7 = 0, i5 && i5.byteLength > 3 && "slice_layer_without_partitioning_rbsp_idr" === cs2(31 & i5[n7 + 3]) && (r4 = true), r4;
    }
  }, ms2 = Me2, gs2 = Ve2.handleRollover, fs2 = {};
  fs2.ts = ps2, fs2.aac = Nt2;
  var ys2 = de2.ONE_SECOND_IN_TS, _s2 = 188, vs2 = 71, bs2 = function(e13, t4) {
    for (var i5, s7 = 0, n7 = _s2; n7 < e13.byteLength; ) if (e13[s7] !== vs2 || e13[n7] !== vs2) s7++, n7++;
    else {
      switch (i5 = e13.subarray(s7, n7), fs2.ts.parseType(i5, t4.pid)) {
        case "pat":
          t4.pid = fs2.ts.parsePat(i5);
          break;
        case "pmt":
          var r4 = fs2.ts.parsePmt(i5);
          t4.table = t4.table || {}, Object.keys(r4).forEach(function(e14) {
            t4.table[e14] = r4[e14];
          });
      }
      s7 += _s2, n7 += _s2;
    }
  }, Ts2 = function(e13, t4, i5) {
    for (var s7, n7, r4, a7, o5 = 0, l6 = _s2, h2 = false; l6 <= e13.byteLength; ) if (e13[o5] !== vs2 || e13[l6] !== vs2 && l6 !== e13.byteLength) o5++, l6++;
    else {
      if (s7 = e13.subarray(o5, l6), "pes" === fs2.ts.parseType(s7, t4.pid)) n7 = fs2.ts.parsePesType(s7, t4.table), r4 = fs2.ts.parsePayloadUnitStartIndicator(s7), "audio" === n7 && r4 && (a7 = fs2.ts.parsePesTime(s7)) && (a7.type = "audio", i5.audio.push(a7), h2 = true);
      if (h2) break;
      o5 += _s2, l6 += _s2;
    }
    for (o5 = (l6 = e13.byteLength) - _s2, h2 = false; o5 >= 0; ) if (e13[o5] !== vs2 || e13[l6] !== vs2 && l6 !== e13.byteLength) o5--, l6--;
    else {
      if (s7 = e13.subarray(o5, l6), "pes" === fs2.ts.parseType(s7, t4.pid)) n7 = fs2.ts.parsePesType(s7, t4.table), r4 = fs2.ts.parsePayloadUnitStartIndicator(s7), "audio" === n7 && r4 && (a7 = fs2.ts.parsePesTime(s7)) && (a7.type = "audio", i5.audio.push(a7), h2 = true);
      if (h2) break;
      o5 -= _s2, l6 -= _s2;
    }
  }, Ss2 = function(e13, t4, i5) {
    for (var s7, n7, r4, a7, o5, l6, h2, d5 = 0, u5 = _s2, c3 = false, p3 = {
      data: [],
      size: 0
    }; u5 < e13.byteLength; ) if (e13[d5] !== vs2 || e13[u5] !== vs2) d5++, u5++;
    else {
      if (s7 = e13.subarray(d5, u5), "pes" === fs2.ts.parseType(s7, t4.pid)) {
        if (n7 = fs2.ts.parsePesType(s7, t4.table), r4 = fs2.ts.parsePayloadUnitStartIndicator(s7), "video" === n7 && (r4 && !c3 && (a7 = fs2.ts.parsePesTime(s7)) && (a7.type = "video", i5.video.push(a7), c3 = true), !i5.firstKeyFrame)) {
          if (r4 && 0 !== p3.size) {
            for (o5 = new Uint8Array(p3.size), l6 = 0; p3.data.length; ) h2 = p3.data.shift(), o5.set(h2, l6), l6 += h2.byteLength;
            if (fs2.ts.videoPacketContainsKeyFrame(o5)) {
              var m7 = fs2.ts.parsePesTime(o5);
              m7 ? (i5.firstKeyFrame = m7, i5.firstKeyFrame.type = "video") : console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.");
            }
            p3.size = 0;
          }
          p3.data.push(s7), p3.size += s7.byteLength;
        }
      }
      if (c3 && i5.firstKeyFrame) break;
      d5 += _s2, u5 += _s2;
    }
    for (d5 = (u5 = e13.byteLength) - _s2, c3 = false; d5 >= 0; ) if (e13[d5] !== vs2 || e13[u5] !== vs2) d5--, u5--;
    else {
      if (s7 = e13.subarray(d5, u5), "pes" === fs2.ts.parseType(s7, t4.pid)) n7 = fs2.ts.parsePesType(s7, t4.table), r4 = fs2.ts.parsePayloadUnitStartIndicator(s7), "video" === n7 && r4 && (a7 = fs2.ts.parsePesTime(s7)) && (a7.type = "video", i5.video.push(a7), c3 = true);
      if (c3) break;
      d5 -= _s2, u5 -= _s2;
    }
  }, Es2 = function(e13, t4) {
    if (e13.audio && e13.audio.length) {
      var i5 = t4;
      (void 0 === i5 || isNaN(i5)) && (i5 = e13.audio[0].dts), e13.audio.forEach(function(e14) {
        e14.dts = gs2(e14.dts, i5), e14.pts = gs2(e14.pts, i5), e14.dtsTime = e14.dts / ys2, e14.ptsTime = e14.pts / ys2;
      });
    }
    if (e13.video && e13.video.length) {
      var s7 = t4;
      if ((void 0 === s7 || isNaN(s7)) && (s7 = e13.video[0].dts), e13.video.forEach(function(e14) {
        e14.dts = gs2(e14.dts, s7), e14.pts = gs2(e14.pts, s7), e14.dtsTime = e14.dts / ys2, e14.ptsTime = e14.pts / ys2;
      }), e13.firstKeyFrame) {
        var n7 = e13.firstKeyFrame;
        n7.dts = gs2(n7.dts, s7), n7.pts = gs2(n7.pts, s7), n7.dtsTime = n7.dts / ys2, n7.ptsTime = n7.pts / ys2;
      }
    }
  }, ws2 = function(e13) {
    for (var t4, i5 = false, s7 = 0, n7 = null, r4 = null, a7 = 0, o5 = 0; e13.length - o5 >= 3; ) {
      switch (fs2.aac.parseType(e13, o5)) {
        case "timed-metadata":
          if (e13.length - o5 < 10) {
            i5 = true;
            break;
          }
          if ((a7 = fs2.aac.parseId3TagSize(e13, o5)) > e13.length) {
            i5 = true;
            break;
          }
          null === r4 && (t4 = e13.subarray(o5, o5 + a7), r4 = fs2.aac.parseAacTimestamp(t4)), o5 += a7;
          break;
        case "audio":
          if (e13.length - o5 < 7) {
            i5 = true;
            break;
          }
          if ((a7 = fs2.aac.parseAdtsSize(e13, o5)) > e13.length) {
            i5 = true;
            break;
          }
          null === n7 && (t4 = e13.subarray(o5, o5 + a7), n7 = fs2.aac.parseSampleRate(t4)), s7++, o5 += a7;
          break;
        default:
          o5++;
      }
      if (i5) return null;
    }
    if (null === n7 || null === r4) return null;
    var l6 = ys2 / n7;
    return {
      audio: [{
        type: "audio",
        dts: r4,
        pts: r4
      }, {
        type: "audio",
        dts: r4 + 1024 * s7 * l6,
        pts: r4 + 1024 * s7 * l6
      }]
    };
  }, Cs2 = function(e13) {
    var t4 = {
      pid: null,
      table: null
    }, i5 = {};
    for (var s7 in bs2(e13, t4), t4.table) {
      if (t4.table.hasOwnProperty(s7)) switch (t4.table[s7]) {
        case ms2.H264_STREAM_TYPE:
          i5.video = [], Ss2(e13, t4, i5), 0 === i5.video.length && delete i5.video;
          break;
        case ms2.ADTS_STREAM_TYPE:
          i5.audio = [], Ts2(e13, t4, i5), 0 === i5.audio.length && delete i5.audio;
      }
    }
    return i5;
  }, ks2 = {
    inspect: function(e13, t4) {
      var i5;
      return (i5 = fs2.aac.isLikelyAacData(e13) ? ws2(e13) : Cs2(e13)) && (i5.audio || i5.video) ? (Es2(i5, t4), i5) : null;
    },
    parseAudioPes_: Ts2
  };
  const xs2 = function(e13, t4) {
    t4.on("data", function(t5) {
      const i5 = t5.initSegment;
      t5.initSegment = {
        data: i5.buffer,
        byteOffset: i5.byteOffset,
        byteLength: i5.byteLength
      };
      const s7 = t5.data;
      t5.data = s7.buffer, e13.postMessage({
        action: "data",
        segment: t5,
        byteOffset: s7.byteOffset,
        byteLength: s7.byteLength
      }, [t5.data]);
    }), t4.on("done", function(t5) {
      e13.postMessage({
        action: "done"
      });
    }), t4.on("gopInfo", function(t5) {
      e13.postMessage({
        action: "gopInfo",
        gopInfo: t5
      });
    }), t4.on("videoSegmentTimingInfo", function(t5) {
      const i5 = {
        start: {
          decode: de2.videoTsToSeconds(t5.start.dts),
          presentation: de2.videoTsToSeconds(t5.start.pts)
        },
        end: {
          decode: de2.videoTsToSeconds(t5.end.dts),
          presentation: de2.videoTsToSeconds(t5.end.pts)
        },
        baseMediaDecodeTime: de2.videoTsToSeconds(t5.baseMediaDecodeTime)
      };
      t5.prependedContentDuration && (i5.prependedContentDuration = de2.videoTsToSeconds(t5.prependedContentDuration)), e13.postMessage({
        action: "videoSegmentTimingInfo",
        videoSegmentTimingInfo: i5
      });
    }), t4.on("audioSegmentTimingInfo", function(t5) {
      const i5 = {
        start: {
          decode: de2.videoTsToSeconds(t5.start.dts),
          presentation: de2.videoTsToSeconds(t5.start.pts)
        },
        end: {
          decode: de2.videoTsToSeconds(t5.end.dts),
          presentation: de2.videoTsToSeconds(t5.end.pts)
        },
        baseMediaDecodeTime: de2.videoTsToSeconds(t5.baseMediaDecodeTime)
      };
      t5.prependedContentDuration && (i5.prependedContentDuration = de2.videoTsToSeconds(t5.prependedContentDuration)), e13.postMessage({
        action: "audioSegmentTimingInfo",
        audioSegmentTimingInfo: i5
      });
    }), t4.on("id3Frame", function(t5) {
      e13.postMessage({
        action: "id3Frame",
        id3Frame: t5
      });
    }), t4.on("caption", function(t5) {
      e13.postMessage({
        action: "caption",
        caption: t5
      });
    }), t4.on("trackinfo", function(t5) {
      e13.postMessage({
        action: "trackinfo",
        trackInfo: t5
      });
    }), t4.on("audioTimingInfo", function(t5) {
      e13.postMessage({
        action: "audioTimingInfo",
        audioTimingInfo: {
          start: de2.videoTsToSeconds(t5.start),
          end: de2.videoTsToSeconds(t5.end)
        }
      });
    }), t4.on("videoTimingInfo", function(t5) {
      e13.postMessage({
        action: "videoTimingInfo",
        videoTimingInfo: {
          start: de2.videoTsToSeconds(t5.start),
          end: de2.videoTsToSeconds(t5.end)
        }
      });
    }), t4.on("log", function(t5) {
      e13.postMessage({
        action: "log",
        log: t5
      });
    });
  };
  class Is2 {
    constructor(e13, t4) {
      this.options = t4 || {}, this.self = e13, this.init();
    }
    init() {
      this.transmuxer && this.transmuxer.dispose(), this.transmuxer = new mi2.Transmuxer(this.options), xs2(this.self, this.transmuxer);
    }
    pushMp4Captions(e13) {
      this.captionParser || (this.captionParser = new ji2(), this.captionParser.init());
      const t4 = new Uint8Array(e13.data, e13.byteOffset, e13.byteLength), i5 = this.captionParser.parse(t4, e13.trackIds, e13.timescales);
      this.self.postMessage({
        action: "mp4Captions",
        captions: i5 && i5.captions || [],
        logs: i5 && i5.logs || [],
        data: t4.buffer
      }, [t4.buffer]);
    }
    probeMp4StartTime({
      timescales: e13,
      data: t4
    }) {
      const i5 = as2.startTime(e13, t4);
      this.self.postMessage({
        action: "probeMp4StartTime",
        startTime: i5,
        data: t4
      }, [t4.buffer]);
    }
    probeMp4Tracks({
      data: e13
    }) {
      const t4 = as2.tracks(e13);
      this.self.postMessage({
        action: "probeMp4Tracks",
        tracks: t4,
        data: e13
      }, [e13.buffer]);
    }
    probeEmsgID3({
      data: e13,
      offset: t4
    }) {
      const i5 = as2.getEmsgID3(e13, t4);
      this.self.postMessage({
        action: "probeEmsgID3",
        id3Frames: i5,
        emsgData: e13
      }, [e13.buffer]);
    }
    probeTs({
      data: e13,
      baseStartTime: t4
    }) {
      const i5 = "number" != typeof t4 || isNaN(t4) ? void 0 : t4 * de2.ONE_SECOND_IN_TS, s7 = ks2.inspect(e13, i5);
      let n7 = null;
      s7 && (n7 = {
        hasVideo: s7.video && 2 === s7.video.length || false,
        hasAudio: s7.audio && 2 === s7.audio.length || false
      }, n7.hasVideo && (n7.videoStart = s7.video[0].ptsTime), n7.hasAudio && (n7.audioStart = s7.audio[0].ptsTime)), this.self.postMessage({
        action: "probeTs",
        result: n7,
        data: e13
      }, [e13.buffer]);
    }
    clearAllMp4Captions() {
      this.captionParser && this.captionParser.clearAllCaptions();
    }
    clearParsedMp4Captions() {
      this.captionParser && this.captionParser.clearParsedCaptions();
    }
    push(e13) {
      const t4 = new Uint8Array(e13.data, e13.byteOffset, e13.byteLength);
      this.transmuxer.push(t4);
    }
    reset() {
      this.transmuxer.reset();
    }
    setTimestampOffset(e13) {
      const t4 = e13.timestampOffset || 0;
      this.transmuxer.setBaseMediaDecodeTime(Math.round(de2.secondsToVideoTs(t4)));
    }
    setAudioAppendStart(e13) {
      this.transmuxer.setAudioAppendStart(Math.ceil(de2.secondsToVideoTs(e13.appendStart)));
    }
    setRemux(e13) {
      this.transmuxer.setRemux(e13.remux);
    }
    flush(e13) {
      this.transmuxer.flush(), self.postMessage({
        action: "done",
        type: "transmuxed"
      });
    }
    endTimeline() {
      this.transmuxer.endTimeline(), self.postMessage({
        action: "endedtimeline",
        type: "transmuxed"
      });
    }
    alignGopsWith(e13) {
      this.transmuxer.alignGopsWith(e13.gopsToAlignWith.slice());
    }
  }
  self.onmessage = function(e13) {
    "init" === e13.data.action && e13.data.options ? this.messageHandlers = new Is2(self, e13.data.options) : (this.messageHandlers || (this.messageHandlers = new Is2(self)), e13.data && e13.data.action && "init" !== e13.data.action && this.messageHandlers[e13.data.action] && this.messageHandlers[e13.data.action](e13.data));
  };
}));
var ag = ig(rg);
var og = (e12, t3, i4) => {
  const {
    type: s6,
    initSegment: n6,
    captions: r3,
    captionStreams: a6,
    metadata: o4,
    videoFrameDtsTime: l5,
    videoFramePtsTime: h
  } = e12.data.segment;
  t3.buffer.push({
    captions: r3,
    captionStreams: a6,
    metadata: o4
  });
  const d4 = e12.data.segment.boxes || {
    data: e12.data.segment.data
  }, u4 = {
    type: s6,
    data: new Uint8Array(d4.data, d4.data.byteOffset, d4.data.byteLength),
    initSegment: new Uint8Array(n6.data, n6.byteOffset, n6.byteLength)
  };
  void 0 !== l5 && (u4.videoFrameDtsTime = l5), void 0 !== h && (u4.videoFramePtsTime = h), i4(u4);
};
var lg = ({
  transmuxedData: e12,
  callback: t3
}) => {
  e12.buffer = [], t3(e12);
};
var hg = (e12, t3) => {
  t3.gopInfo = e12.data.gopInfo;
};
var dg = (e12) => {
  const {
    transmuxer: t3,
    bytes: i4,
    audioAppendStart: s6,
    gopsToAlignWith: n6,
    remux: r3,
    onData: a6,
    onTrackInfo: o4,
    onAudioTimingInfo: l5,
    onVideoTimingInfo: h,
    onVideoSegmentTimingInfo: d4,
    onAudioSegmentTimingInfo: u4,
    onId3: c2,
    onCaptions: p2,
    onDone: m6,
    onEndedTimeline: g4,
    onTransmuxerLog: f6,
    isEndOfTimeline: y4
  } = e12, _3 = {
    buffer: []
  };
  let v3 = y4;
  const b2 = (i5) => {
    t3.currentTransmux === e12 && ("data" === i5.data.action && og(i5, _3, a6), "trackinfo" === i5.data.action && o4(i5.data.trackInfo), "gopInfo" === i5.data.action && hg(i5, _3), "audioTimingInfo" === i5.data.action && l5(i5.data.audioTimingInfo), "videoTimingInfo" === i5.data.action && h(i5.data.videoTimingInfo), "videoSegmentTimingInfo" === i5.data.action && d4(i5.data.videoSegmentTimingInfo), "audioSegmentTimingInfo" === i5.data.action && u4(i5.data.audioSegmentTimingInfo), "id3Frame" === i5.data.action && c2([i5.data.id3Frame], i5.data.id3Frame.dispatchType), "caption" === i5.data.action && p2(i5.data.caption), "endedtimeline" === i5.data.action && (v3 = false, g4()), "log" === i5.data.action && f6(i5.data.log), "transmuxed" === i5.data.type && (v3 || (t3.onmessage = null, lg({
      transmuxedData: _3,
      callback: m6
    }), ug(t3))));
  };
  if (t3.onmessage = b2, s6 && t3.postMessage({
    action: "setAudioAppendStart",
    appendStart: s6
  }), Array.isArray(n6) && t3.postMessage({
    action: "alignGopsWith",
    gopsToAlignWith: n6
  }), void 0 !== r3 && t3.postMessage({
    action: "setRemux",
    remux: r3
  }), i4.byteLength) {
    const e13 = i4 instanceof ArrayBuffer ? i4 : i4.buffer, s7 = i4 instanceof ArrayBuffer ? 0 : i4.byteOffset;
    t3.postMessage({
      action: "push",
      data: e13,
      byteOffset: s7,
      byteLength: i4.byteLength
    }, [e13]);
  }
  y4 && t3.postMessage({
    action: "endTimeline"
  }), t3.postMessage({
    action: "flush"
  });
};
var ug = (e12) => {
  e12.currentTransmux = null, e12.transmuxQueue.length && (e12.currentTransmux = e12.transmuxQueue.shift(), "function" == typeof e12.currentTransmux ? e12.currentTransmux() : dg(e12.currentTransmux));
};
var cg = (e12, t3) => {
  e12.postMessage({
    action: t3
  }), ug(e12);
};
var pg = (e12, t3) => {
  if (!t3.currentTransmux) return t3.currentTransmux = e12, void cg(t3, e12);
  t3.transmuxQueue.push(cg.bind(null, t3, e12));
};
var mg = (e12) => {
  if (!e12.transmuxer.currentTransmux) return e12.transmuxer.currentTransmux = e12, void dg(e12);
  e12.transmuxer.transmuxQueue.push(e12);
};
var gg = {
  reset: (e12) => {
    pg("reset", e12);
  },
  endTimeline: (e12) => {
    pg("endTimeline", e12);
  },
  transmux: mg,
  createTransmuxer: (e12) => {
    const t3 = new ag();
    t3.currentTransmux = null, t3.transmuxQueue = [];
    const i4 = t3.terminate;
    return t3.terminate = () => (t3.currentTransmux = null, t3.transmuxQueue.length = 0, i4.call(t3)), t3.postMessage({
      action: "init",
      options: e12
    }), t3;
  }
};
var fg = function(e12) {
  const t3 = e12.transmuxer, i4 = e12.endAction || e12.action, s6 = e12.callback, n6 = Ot({}, e12, {
    endAction: null,
    transmuxer: null,
    callback: null
  }), r3 = (n7) => {
    n7.data.action === i4 && (t3.removeEventListener("message", r3), n7.data.data && (n7.data.data = new Uint8Array(n7.data.data, e12.byteOffset || 0, e12.byteLength || n7.data.data.byteLength), e12.data && (e12.data = n7.data.data)), s6(n7.data));
  };
  if (t3.addEventListener("message", r3), e12.data) {
    const i5 = e12.data instanceof ArrayBuffer;
    n6.byteOffset = i5 ? 0 : e12.data.byteOffset, n6.byteLength = e12.data.byteLength;
    const s7 = [i5 ? e12.data : e12.data.buffer];
    t3.postMessage(n6, s7);
  } else t3.postMessage(n6);
};
var yg = {
  FAILURE: 2,
  TIMEOUT: -101,
  ABORTED: -102
};
var _g = (e12) => {
  e12.forEach((e13) => {
    e13.abort();
  });
};
var vg = (e12) => ({
  bandwidth: e12.bandwidth,
  bytesReceived: e12.bytesReceived || 0,
  roundTripTime: e12.roundTripTime || 0
});
var bg = (e12) => {
  const t3 = e12.target, i4 = {
    bandwidth: 1 / 0,
    bytesReceived: 0,
    roundTripTime: Date.now() - t3.requestTime || 0
  };
  return i4.bytesReceived = e12.loaded, i4.bandwidth = Math.floor(i4.bytesReceived / i4.roundTripTime * 8 * 1e3), i4;
};
var Tg = (e12, t3) => t3.timedout ? {
  status: t3.status,
  message: "HLS request timed-out at URL: " + t3.uri,
  code: yg.TIMEOUT,
  xhr: t3
} : t3.aborted ? {
  status: t3.status,
  message: "HLS request aborted at URL: " + t3.uri,
  code: yg.ABORTED,
  xhr: t3
} : e12 ? {
  status: t3.status,
  message: "HLS request errored at URL: " + t3.uri,
  code: yg.FAILURE,
  xhr: t3
} : "arraybuffer" === t3.responseType && 0 === t3.response.byteLength ? {
  status: t3.status,
  message: "Empty HLS response at URL: " + t3.uri,
  code: yg.FAILURE,
  xhr: t3
} : null;
var Sg = (e12, t3, i4) => (s6, n6) => {
  const r3 = n6.response, a6 = Tg(s6, n6);
  if (a6) return i4(a6, e12);
  if (16 !== r3.byteLength) return i4({
    status: n6.status,
    message: "Invalid HLS key at URL: " + n6.uri,
    code: yg.FAILURE,
    xhr: n6
  }, e12);
  const o4 = new DataView(r3), l5 = new Uint32Array([o4.getUint32(0), o4.getUint32(4), o4.getUint32(8), o4.getUint32(12)]);
  for (let e13 = 0; e13 < t3.length; e13++) t3[e13].bytes = l5;
  return i4(null, e12);
};
var Eg = (e12, t3) => {
  const i4 = eo(e12.map.bytes);
  if ("mp4" !== i4) {
    const s6 = e12.map.resolvedUri || e12.map.uri, n6 = i4 || "unknown";
    return t3({
      internal: true,
      message: `Found unsupported ${n6} container for initialization segment at URL: ${s6}`,
      code: yg.FAILURE,
      metadata: {
        errorType: ip.Error.UnsupportedMediaInitialization,
        mediaType: n6
      }
    });
  }
  fg({
    action: "probeMp4Tracks",
    data: e12.map.bytes,
    transmuxer: e12.transmuxer,
    callback: ({
      tracks: i5,
      data: s6
    }) => (e12.map.bytes = s6, i5.forEach(function(t4) {
      e12.map.tracks = e12.map.tracks || {}, e12.map.tracks[t4.type] || (e12.map.tracks[t4.type] = t4, "number" == typeof t4.id && t4.timescale && (e12.map.timescales = e12.map.timescales || {}, e12.map.timescales[t4.id] = t4.timescale));
    }), t3(null))
  });
};
var wg = ({
  segment: e12,
  finishProcessingFn: t3
}) => (i4, s6) => {
  const n6 = Tg(i4, s6);
  if (n6) return t3(n6, e12);
  const r3 = new Uint8Array(s6.response);
  if (e12.map.key) return e12.map.encryptedBytes = r3, t3(null, e12);
  e12.map.bytes = r3, Eg(e12, function(i5) {
    if (i5) return i5.xhr = s6, i5.status = s6.status, t3(i5, e12);
    t3(null, e12);
  });
};
var Cg = ({
  segment: e12,
  finishProcessingFn: t3,
  responseType: i4
}) => (s6, n6) => {
  const r3 = Tg(s6, n6);
  if (r3) return t3(r3, e12);
  const a6 = "arraybuffer" !== i4 && n6.responseText ? Zm(n6.responseText.substring(e12.lastReachedChar || 0)) : n6.response;
  return e12.stats = vg(n6), e12.key ? e12.encryptedBytes = new Uint8Array(a6) : e12.bytes = new Uint8Array(a6), t3(null, e12);
};
var kg = ({
  segment: e12,
  bytes: t3,
  trackInfoFn: i4,
  timingInfoFn: s6,
  videoSegmentTimingInfoFn: n6,
  audioSegmentTimingInfoFn: r3,
  id3Fn: a6,
  captionsFn: o4,
  isEndOfTimeline: l5,
  endedTimelineFn: h,
  dataFn: d4,
  doneFn: u4,
  onTransmuxerLog: c2
}) => {
  const p2 = e12.map && e12.map.tracks || {}, m6 = Boolean(p2.audio && p2.video);
  let g4 = s6.bind(null, e12, "audio", "start");
  const f6 = s6.bind(null, e12, "audio", "end");
  let y4 = s6.bind(null, e12, "video", "start");
  const _3 = s6.bind(null, e12, "video", "end"), v3 = () => mg({
    bytes: t3,
    transmuxer: e12.transmuxer,
    audioAppendStart: e12.audioAppendStart,
    gopsToAlignWith: e12.gopsToAlignWith,
    remux: m6,
    onData: (t4) => {
      t4.type = "combined" === t4.type ? "video" : t4.type, d4(e12, t4);
    },
    onTrackInfo: (t4) => {
      i4 && (m6 && (t4.isMuxed = true), i4(e12, t4));
    },
    onAudioTimingInfo: (e13) => {
      g4 && void 0 !== e13.start && (g4(e13.start), g4 = null), f6 && void 0 !== e13.end && f6(e13.end);
    },
    onVideoTimingInfo: (e13) => {
      y4 && void 0 !== e13.start && (y4(e13.start), y4 = null), _3 && void 0 !== e13.end && _3(e13.end);
    },
    onVideoSegmentTimingInfo: (e13) => {
      n6(e13);
    },
    onAudioSegmentTimingInfo: (e13) => {
      r3(e13);
    },
    onId3: (t4, i5) => {
      a6(e12, t4, i5);
    },
    onCaptions: (t4) => {
      o4(e12, [t4]);
    },
    isEndOfTimeline: l5,
    onEndedTimeline: () => {
      h();
    },
    onTransmuxerLog: c2,
    onDone: (t4) => {
      u4 && (t4.type = "combined" === t4.type ? "video" : t4.type, u4(null, e12, t4));
    }
  });
  fg({
    action: "probeTs",
    transmuxer: e12.transmuxer,
    data: t3,
    baseStartTime: e12.baseStartTime,
    callback: (s7) => {
      e12.bytes = t3 = s7.data;
      const n7 = s7.result;
      n7 && (i4(e12, {
        hasAudio: n7.hasAudio,
        hasVideo: n7.hasVideo,
        isMuxed: m6
      }), i4 = null), v3();
    }
  });
};
var xg = ({
  segment: e12,
  bytes: t3,
  trackInfoFn: i4,
  timingInfoFn: s6,
  videoSegmentTimingInfoFn: n6,
  audioSegmentTimingInfoFn: r3,
  id3Fn: a6,
  captionsFn: o4,
  isEndOfTimeline: l5,
  endedTimelineFn: h,
  dataFn: d4,
  doneFn: u4,
  onTransmuxerLog: c2
}) => {
  let p2 = new Uint8Array(t3);
  if (to(p2)) {
    e12.isFmp4 = true;
    const {
      tracks: n7
    } = e12.map, r4 = {
      isFmp4: true,
      hasVideo: !!n7.video,
      hasAudio: !!n7.audio
    };
    n7.audio && n7.audio.codec && "enca" !== n7.audio.codec && (r4.audioCodec = n7.audio.codec), n7.video && n7.video.codec && "encv" !== n7.video.codec && (r4.videoCodec = n7.video.codec), n7.video && n7.audio && (r4.isMuxed = true), i4(e12, r4);
    const l6 = (t4, i5) => {
      d4(e12, {
        data: p2,
        type: r4.hasAudio && !r4.isMuxed ? "audio" : "video"
      }), i5 && i5.length && a6(e12, i5), t4 && t4.length && o4(e12, t4), u4(null, e12, {});
    };
    fg({
      action: "probeMp4StartTime",
      timescales: e12.map.timescales,
      data: p2,
      transmuxer: e12.transmuxer,
      callback: ({
        data: i5,
        startTime: a7
      }) => {
        t3 = i5.buffer, e12.bytes = p2 = i5, r4.hasAudio && !r4.isMuxed && s6(e12, "audio", "start", a7), r4.hasVideo && s6(e12, "video", "start", a7), fg({
          action: "probeEmsgID3",
          data: p2,
          transmuxer: e12.transmuxer,
          offset: a7,
          callback: ({
            emsgData: i6,
            id3Frames: s7
          }) => {
            t3 = i6.buffer, e12.bytes = p2 = i6, n7.video && i6.byteLength && e12.transmuxer ? fg({
              action: "pushMp4Captions",
              endAction: "mp4Captions",
              transmuxer: e12.transmuxer,
              data: p2,
              timescales: e12.map.timescales,
              trackIds: [n7.video.id],
              callback: (i7) => {
                t3 = i7.data.buffer, e12.bytes = p2 = i7.data, i7.logs.forEach(function(e13) {
                  c2(up(e13, {
                    stream: "mp4CaptionParser"
                  }));
                }), l6(i7.captions, s7);
              }
            }) : l6(void 0, s7);
          }
        });
      }
    });
  } else if (e12.transmuxer) {
    if (void 0 === e12.container && (e12.container = eo(p2)), "ts" !== e12.container && "aac" !== e12.container) return i4(e12, {
      hasAudio: false,
      hasVideo: false
    }), void u4(null, e12, {});
    kg({
      segment: e12,
      bytes: t3,
      trackInfoFn: i4,
      timingInfoFn: s6,
      videoSegmentTimingInfoFn: n6,
      audioSegmentTimingInfoFn: r3,
      id3Fn: a6,
      captionsFn: o4,
      isEndOfTimeline: l5,
      endedTimelineFn: h,
      dataFn: d4,
      doneFn: u4,
      onTransmuxerLog: c2
    });
  } else u4(null, e12, {});
};
var Ig = function({
  id: e12,
  key: t3,
  encryptedBytes: i4,
  decryptionWorker: s6
}, n6) {
  const r3 = (t4) => {
    if (t4.data.source === e12) {
      s6.removeEventListener("message", r3);
      const e13 = t4.data.decrypted;
      n6(new Uint8Array(e13.bytes, e13.byteOffset, e13.byteLength));
    }
  };
  let a6;
  s6.addEventListener("message", r3), a6 = t3.bytes.slice ? t3.bytes.slice() : new Uint32Array(Array.prototype.slice.call(t3.bytes)), s6.postMessage(wm({
    source: e12,
    encrypted: i4,
    key: a6,
    iv: t3.iv
  }), [i4.buffer, a6.buffer]);
};
var Ag = ({
  decryptionWorker: e12,
  segment: t3,
  trackInfoFn: i4,
  timingInfoFn: s6,
  videoSegmentTimingInfoFn: n6,
  audioSegmentTimingInfoFn: r3,
  id3Fn: a6,
  captionsFn: o4,
  isEndOfTimeline: l5,
  endedTimelineFn: h,
  dataFn: d4,
  doneFn: u4,
  onTransmuxerLog: c2
}) => {
  Ig({
    id: t3.requestId,
    key: t3.key,
    encryptedBytes: t3.encryptedBytes,
    decryptionWorker: e12
  }, (e13) => {
    t3.bytes = e13, xg({
      segment: t3,
      bytes: t3.bytes,
      trackInfoFn: i4,
      timingInfoFn: s6,
      videoSegmentTimingInfoFn: n6,
      audioSegmentTimingInfoFn: r3,
      id3Fn: a6,
      captionsFn: o4,
      isEndOfTimeline: l5,
      endedTimelineFn: h,
      dataFn: d4,
      doneFn: u4,
      onTransmuxerLog: c2
    });
  });
};
var Dg = ({
  activeXhrs: e12,
  decryptionWorker: t3,
  trackInfoFn: i4,
  timingInfoFn: s6,
  videoSegmentTimingInfoFn: n6,
  audioSegmentTimingInfoFn: r3,
  id3Fn: a6,
  captionsFn: o4,
  isEndOfTimeline: l5,
  endedTimelineFn: h,
  dataFn: d4,
  doneFn: u4,
  onTransmuxerLog: c2
}) => {
  let p2 = 0, m6 = false;
  return (g4, f6) => {
    if (!m6) {
      if (g4) return m6 = true, _g(e12), u4(g4, f6);
      if (p2 += 1, p2 === e12.length) {
        const p3 = function() {
          if (f6.encryptedBytes) return Ag({
            decryptionWorker: t3,
            segment: f6,
            trackInfoFn: i4,
            timingInfoFn: s6,
            videoSegmentTimingInfoFn: n6,
            audioSegmentTimingInfoFn: r3,
            id3Fn: a6,
            captionsFn: o4,
            isEndOfTimeline: l5,
            endedTimelineFn: h,
            dataFn: d4,
            doneFn: u4,
            onTransmuxerLog: c2
          });
          xg({
            segment: f6,
            bytes: f6.bytes,
            trackInfoFn: i4,
            timingInfoFn: s6,
            videoSegmentTimingInfoFn: n6,
            audioSegmentTimingInfoFn: r3,
            id3Fn: a6,
            captionsFn: o4,
            isEndOfTimeline: l5,
            endedTimelineFn: h,
            dataFn: d4,
            doneFn: u4,
            onTransmuxerLog: c2
          });
        };
        if (f6.endOfAllRequests = Date.now(), f6.map && f6.map.encryptedBytes && !f6.map.bytes) return Ig({
          decryptionWorker: t3,
          id: f6.requestId + "-init",
          encryptedBytes: f6.map.encryptedBytes,
          key: f6.map.key
        }, (t4) => {
          f6.map.bytes = t4, Eg(f6, (t5) => {
            if (t5) return _g(e12), u4(t5, f6);
            p3();
          });
        });
        p3();
      }
    }
  };
};
var Pg = ({
  loadendState: e12,
  abortFn: t3
}) => (i4) => {
  i4.target.aborted && t3 && !e12.calledAbortFn && (t3(), e12.calledAbortFn = true);
};
var Lg = ({
  segment: e12,
  progressFn: t3,
  trackInfoFn: i4,
  timingInfoFn: s6,
  videoSegmentTimingInfoFn: n6,
  audioSegmentTimingInfoFn: r3,
  id3Fn: a6,
  captionsFn: o4,
  isEndOfTimeline: l5,
  endedTimelineFn: h,
  dataFn: d4
}) => (i5) => {
  if (!i5.target.aborted) return e12.stats = up(e12.stats, bg(i5)), !e12.stats.firstBytesReceivedAt && e12.stats.bytesReceived && (e12.stats.firstBytesReceivedAt = Date.now()), t3(i5, e12);
};
var Og = ({
  xhr: e12,
  xhrOptions: t3,
  decryptionWorker: i4,
  segment: s6,
  abortFn: n6,
  progressFn: r3,
  trackInfoFn: a6,
  timingInfoFn: o4,
  videoSegmentTimingInfoFn: l5,
  audioSegmentTimingInfoFn: h,
  id3Fn: d4,
  captionsFn: u4,
  isEndOfTimeline: c2,
  endedTimelineFn: p2,
  dataFn: m6,
  doneFn: g4,
  onTransmuxerLog: f6
}) => {
  const y4 = [], _3 = Dg({
    activeXhrs: y4,
    decryptionWorker: i4,
    trackInfoFn: a6,
    timingInfoFn: o4,
    videoSegmentTimingInfoFn: l5,
    audioSegmentTimingInfoFn: h,
    id3Fn: d4,
    captionsFn: u4,
    isEndOfTimeline: c2,
    endedTimelineFn: p2,
    dataFn: m6,
    doneFn: g4,
    onTransmuxerLog: f6
  });
  if (s6.key && !s6.key.bytes) {
    const i5 = [s6.key];
    s6.map && !s6.map.bytes && s6.map.key && s6.map.key.resolvedUri === s6.key.resolvedUri && i5.push(s6.map.key);
    const n7 = e12(up(t3, {
      uri: s6.key.resolvedUri,
      responseType: "arraybuffer",
      requestType: "segment-key"
    }), Sg(s6, i5, _3));
    y4.push(n7);
  }
  if (s6.map && !s6.map.bytes) {
    if (s6.map.key && (!s6.key || s6.key.resolvedUri !== s6.map.key.resolvedUri)) {
      const i6 = e12(up(t3, {
        uri: s6.map.key.resolvedUri,
        responseType: "arraybuffer",
        requestType: "segment-key"
      }), Sg(s6, [s6.map.key], _3));
      y4.push(i6);
    }
    const i5 = e12(up(t3, {
      uri: s6.map.resolvedUri,
      responseType: "arraybuffer",
      headers: bm(s6.map),
      requestType: "segment-media-initialization"
    }), wg({
      segment: s6,
      finishProcessingFn: _3
    }));
    y4.push(i5);
  }
  const v3 = up(t3, {
    uri: s6.part && s6.part.resolvedUri || s6.resolvedUri,
    responseType: "arraybuffer",
    headers: bm(s6),
    requestType: "segment"
  }), b2 = e12(v3, Cg({
    segment: s6,
    finishProcessingFn: _3,
    responseType: v3.responseType
  }));
  b2.addEventListener("progress", Lg({
    segment: s6,
    progressFn: r3,
    trackInfoFn: a6,
    timingInfoFn: o4,
    videoSegmentTimingInfoFn: l5,
    audioSegmentTimingInfoFn: h,
    id3Fn: d4,
    captionsFn: u4,
    isEndOfTimeline: c2,
    endedTimelineFn: p2,
    dataFn: m6
  })), y4.push(b2);
  const T2 = {};
  return y4.forEach((e13) => {
    e13.addEventListener("loadend", Pg({
      loadendState: T2,
      abortFn: n6
    }));
  }), () => _g(y4);
};
var Ng = dp("CodecUtils");
var Rg = function(e12) {
  const t3 = e12.attributes || {};
  if (t3.CODECS) return ni(t3.CODECS);
};
var Mg = (e12, t3) => {
  const i4 = t3.attributes || {};
  return e12 && e12.mediaGroups && e12.mediaGroups.AUDIO && i4.AUDIO && e12.mediaGroups.AUDIO[i4.AUDIO];
};
var Ug = (e12, t3) => {
  if (!Mg(e12, t3)) return true;
  const i4 = t3.attributes || {}, s6 = e12.mediaGroups.AUDIO[i4.AUDIO];
  for (const n6 in s6) if (!s6[n6].uri && !s6[n6].playlists) return true;
  return false;
};
var Bg = function(e12) {
  const t3 = {};
  return e12.forEach(({
    mediaType: e13,
    type: i4,
    details: s6
  }) => {
    t3[e13] = t3[e13] || [], t3[e13].push(si(`${i4}${s6}`));
  }), Object.keys(t3).forEach(function(e13) {
    if (t3[e13].length > 1) return Ng(`multiple ${e13} codecs found as attributes: ${t3[e13].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`), void (t3[e13] = null);
    t3[e13] = t3[e13][0];
  }), t3;
};
var Fg = function(e12) {
  let t3 = 0;
  return e12.audio && t3++, e12.video && t3++, t3;
};
var qg = function(e12, t3) {
  const i4 = t3.attributes || {}, s6 = Bg(Rg(t3) || []);
  if (Mg(e12, t3) && !s6.audio && !Ug(e12, t3)) {
    const t4 = Bg(ri(e12, i4.AUDIO) || []);
    t4.audio && (s6.audio = t4.audio);
  }
  return s6;
};
var jg = dp("PlaylistSelector");
var $g = function(e12) {
  if (!e12 || !e12.playlist) return;
  const t3 = e12.playlist;
  return JSON.stringify({
    id: t3.id,
    bandwidth: e12.bandwidth,
    width: e12.width,
    height: e12.height,
    codecs: t3.attributes && t3.attributes.CODECS || ""
  });
};
var Hg = function(e12, t3) {
  if (!e12) return "";
  const i4 = g3.getComputedStyle(e12);
  return i4 ? i4[t3] : "";
};
var Vg = function(e12, t3) {
  const i4 = e12.slice();
  e12.sort(function(e13, s6) {
    const n6 = t3(e13, s6);
    return 0 === n6 ? i4.indexOf(e13) - i4.indexOf(s6) : n6;
  });
};
var zg = function(e12, t3) {
  let i4, s6;
  return e12.attributes.BANDWIDTH && (i4 = e12.attributes.BANDWIDTH), i4 = i4 || g3.Number.MAX_VALUE, t3.attributes.BANDWIDTH && (s6 = t3.attributes.BANDWIDTH), s6 = s6 || g3.Number.MAX_VALUE, i4 - s6;
};
var Wg = function(e12, t3) {
  let i4, s6;
  return e12.attributes.RESOLUTION && e12.attributes.RESOLUTION.width && (i4 = e12.attributes.RESOLUTION.width), i4 = i4 || g3.Number.MAX_VALUE, t3.attributes.RESOLUTION && t3.attributes.RESOLUTION.width && (s6 = t3.attributes.RESOLUTION.width), s6 = s6 || g3.Number.MAX_VALUE, i4 === s6 && e12.attributes.BANDWIDTH && t3.attributes.BANDWIDTH ? e12.attributes.BANDWIDTH - t3.attributes.BANDWIDTH : i4 - s6;
};
var Gg = function(e12, t3, i4, s6, n6, r3) {
  if (!e12) return;
  const a6 = {
    bandwidth: t3,
    width: i4,
    height: s6,
    limitRenditionByPlayerDimensions: n6
  };
  let o4 = e12.playlists;
  Gp.isAudioOnly(e12) && (o4 = r3.getAudioTrackPlaylists_(), a6.audioOnly = true);
  let l5 = o4.map((e13) => {
    let t4;
    const i5 = e13.attributes && e13.attributes.RESOLUTION && e13.attributes.RESOLUTION.width, s7 = e13.attributes && e13.attributes.RESOLUTION && e13.attributes.RESOLUTION.height;
    return t4 = e13.attributes && e13.attributes.BANDWIDTH, t4 = t4 || g3.Number.MAX_VALUE, {
      bandwidth: t4,
      width: i5,
      height: s7,
      playlist: e13
    };
  });
  Vg(l5, (e13, t4) => e13.bandwidth - t4.bandwidth), l5 = l5.filter((e13) => !Gp.isIncompatible(e13.playlist));
  let h = l5.filter((e13) => Gp.isEnabled(e13.playlist));
  h.length || (h = l5.filter((e13) => !Gp.isDisabled(e13.playlist)));
  const d4 = h.filter((e13) => e13.bandwidth * Jm.BANDWIDTH_VARIANCE < t3);
  let u4 = d4[d4.length - 1];
  const c2 = d4.filter((e13) => e13.bandwidth === u4.bandwidth)[0];
  if (false === n6) {
    const e13 = c2 || h[0] || l5[0];
    if (e13 && e13.playlist) {
      let t4 = "sortedPlaylistReps";
      return c2 && (t4 = "bandwidthBestRep"), h[0] && (t4 = "enabledPlaylistReps"), jg(`choosing ${$g(e13)} using ${t4} with options`, a6), e13.playlist;
    }
    return jg("could not choose a playlist with options", a6), null;
  }
  const p2 = d4.filter((e13) => e13.width && e13.height);
  Vg(p2, (e13, t4) => e13.width - t4.width);
  const m6 = p2.filter((e13) => e13.width === i4 && e13.height === s6);
  u4 = m6[m6.length - 1];
  const f6 = m6.filter((e13) => e13.bandwidth === u4.bandwidth)[0];
  let y4, _3, v3, b2;
  if (f6 || (y4 = p2.filter((e13) => e13.width > i4 || e13.height > s6), _3 = y4.filter((e13) => e13.width === y4[0].width && e13.height === y4[0].height), u4 = _3[_3.length - 1], v3 = _3.filter((e13) => e13.bandwidth === u4.bandwidth)[0]), r3.leastPixelDiffSelector) {
    const e13 = p2.map((e14) => (e14.pixelDiff = Math.abs(e14.width - i4) + Math.abs(e14.height - s6), e14));
    Vg(e13, (e14, t4) => e14.pixelDiff === t4.pixelDiff ? t4.bandwidth - e14.bandwidth : e14.pixelDiff - t4.pixelDiff), b2 = e13[0];
  }
  const T2 = b2 || v3 || f6 || c2 || h[0] || l5[0];
  if (T2 && T2.playlist) {
    let e13 = "sortedPlaylistReps";
    return b2 ? e13 = "leastPixelDiffRep" : v3 ? e13 = "resolutionPlusOneRep" : f6 ? e13 = "resolutionBestRep" : c2 ? e13 = "bandwidthBestRep" : h[0] && (e13 = "enabledPlaylistReps"), jg(`choosing ${$g(T2)} using ${e13} with options`, a6), T2.playlist;
  }
  return jg("could not choose a playlist with options", a6), null;
};
var Xg = function() {
  let e12 = this.useDevicePixelRatio && g3.devicePixelRatio || 1;
  return isNaN(this.customPixelRatio) || (e12 = this.customPixelRatio), Gg(this.playlists.main, this.systemBandwidth, parseInt(Hg(this.tech_.el(), "width"), 10) * e12, parseInt(Hg(this.tech_.el(), "height"), 10) * e12, this.limitRenditionByPlayerDimensions, this.playlistController_);
};
var Kg = function(e12) {
  let t3 = -1, i4 = -1;
  if (e12 < 0 || e12 > 1) throw new Error("Moving average bandwidth decay must be between 0 and 1.");
  return function() {
    let s6 = this.useDevicePixelRatio && g3.devicePixelRatio || 1;
    return isNaN(this.customPixelRatio) || (s6 = this.customPixelRatio), t3 < 0 && (t3 = this.systemBandwidth, i4 = this.systemBandwidth), this.systemBandwidth > 0 && this.systemBandwidth !== i4 && (t3 = e12 * this.systemBandwidth + (1 - e12) * t3, i4 = this.systemBandwidth), Gg(this.playlists.main, t3, parseInt(Hg(this.tech_.el(), "width"), 10) * s6, parseInt(Hg(this.tech_.el(), "height"), 10) * s6, this.limitRenditionByPlayerDimensions, this.playlistController_);
  };
};
var Yg = function(e12) {
  const {
    main: t3,
    currentTime: i4,
    bandwidth: s6,
    duration: n6,
    segmentDuration: r3,
    timeUntilRebuffer: a6,
    currentTimeline: o4,
    syncController: l5
  } = e12, h = t3.playlists.filter((e13) => !Gp.isIncompatible(e13));
  let d4 = h.filter(Gp.isEnabled);
  d4.length || (d4 = h.filter((e13) => !Gp.isDisabled(e13)));
  const u4 = d4.filter(Gp.hasAttribute.bind(null, "BANDWIDTH")).map((e13) => {
    const t4 = l5.getSyncPoint(e13, n6, o4, i4) ? 1 : 2;
    return {
      playlist: e13,
      rebufferingImpact: Gp.estimateSegmentRequestTime(r3, s6, e13) * t4 - a6
    };
  }), c2 = u4.filter((e13) => e13.rebufferingImpact <= 0);
  return Vg(c2, (e13, t4) => zg(t4.playlist, e13.playlist)), c2.length ? c2[0] : (Vg(u4, (e13, t4) => e13.rebufferingImpact - t4.rebufferingImpact), u4[0] || null);
};
var Qg = function() {
  const e12 = this.playlists.main.playlists.filter(Gp.isEnabled);
  Vg(e12, (e13, t3) => zg(e13, t3));
  return e12.filter((e13) => !!qg(this.playlists.main, e13).video)[0] || null;
};
var Jg = (e12) => {
  let t3, i4 = 0;
  return e12.bytes && (t3 = new Uint8Array(e12.bytes), e12.segments.forEach((e13) => {
    t3.set(e13, i4), i4 += e13.byteLength;
  })), t3;
};
function Zg(e12) {
  try {
    return new URL(e12).pathname.split("/").slice(-2).join("/");
  } catch (l_) {
    return "";
  }
}
var ef = function(e12, t3, i4) {
  if (!e12[i4]) {
    t3.trigger({
      type: "usage",
      name: "vhs-608"
    });
    let s6 = i4;
    /^cc708_/.test(i4) && (s6 = "SERVICE" + i4.split("_")[1]);
    const n6 = t3.textTracks().getTrackById(s6);
    if (n6) e12[i4] = n6;
    else {
      let n7 = i4, r3 = i4, a6 = false;
      const o4 = (t3.options_.vhs && t3.options_.vhs.captionServices || {})[s6];
      o4 && (n7 = o4.label, r3 = o4.language, a6 = o4.default), e12[i4] = t3.addRemoteTextTrack({
        kind: "captions",
        id: s6,
        default: a6,
        label: n7,
        language: r3
      }, false).track;
    }
  }
};
var tf = function({
  inbandTextTracks: e12,
  captionArray: t3,
  timestampOffset: i4
}) {
  if (!t3) return;
  const s6 = g3.WebKitDataCue || g3.VTTCue;
  t3.forEach((t4) => {
    const n6 = t4.stream;
    t4.content ? t4.content.forEach((r3) => {
      const a6 = new s6(t4.startTime + i4, t4.endTime + i4, r3.text);
      a6.line = r3.line, a6.align = "left", a6.position = r3.position, a6.positionAlign = "line-left", e12[n6].addCue(a6);
    }) : e12[n6].addCue(new s6(t4.startTime + i4, t4.endTime + i4, t4.text));
  });
};
var sf = function(e12) {
  Object.defineProperties(e12.frame, {
    id: {
      get: () => (ip.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."), e12.value.key)
    },
    value: {
      get: () => (ip.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."), e12.value.data)
    },
    privateData: {
      get: () => (ip.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."), e12.value.data)
    }
  });
};
var nf = ({
  inbandTextTracks: e12,
  metadataArray: t3,
  timestampOffset: i4,
  videoDuration: s6
}) => {
  if (!t3) return;
  const n6 = g3.WebKitDataCue || g3.VTTCue, r3 = e12.metadataTrack_;
  if (!r3) return;
  if (t3.forEach((e13) => {
    const t4 = e13.cueTime + i4;
    !("number" != typeof t4 || g3.isNaN(t4) || t4 < 0) && t4 < 1 / 0 && e13.frames && e13.frames.length && e13.frames.forEach((e14) => {
      const i5 = new n6(t4, t4, e14.value || e14.url || e14.data || "");
      i5.frame = e14, i5.value = e14, sf(i5), r3.addCue(i5);
    });
  }), !r3.cues || !r3.cues.length) return;
  const a6 = r3.cues, o4 = [];
  for (let d4 = 0; d4 < a6.length; d4++) a6[d4] && o4.push(a6[d4]);
  const l5 = o4.reduce((e13, t4) => {
    const i5 = e13[t4.startTime] || [];
    return i5.push(t4), e13[t4.startTime] = i5, e13;
  }, {}), h = Object.keys(l5).sort((e13, t4) => Number(e13) - Number(t4));
  h.forEach((e13, t4) => {
    const i5 = l5[e13], n7 = isFinite(s6) ? s6 : e13, r4 = Number(h[t4 + 1]) || n7;
    i5.forEach((e14) => {
      e14.endTime = r4;
    });
  });
};
var rf = {
  id: "ID",
  class: "CLASS",
  startDate: "START-DATE",
  duration: "DURATION",
  endDate: "END-DATE",
  endOnNext: "END-ON-NEXT",
  plannedDuration: "PLANNED-DURATION",
  scte35Out: "SCTE35-OUT",
  scte35In: "SCTE35-IN"
};
var af = /* @__PURE__ */ new Set(["id", "class", "startDate", "duration", "endDate", "endOnNext", "startTime", "endTime", "processDateRange"]);
var of = ({
  inbandTextTracks: e12,
  dateRanges: t3
}) => {
  const i4 = e12.metadataTrack_;
  if (!i4) return;
  const s6 = g3.WebKitDataCue || g3.VTTCue;
  t3.forEach((e13) => {
    for (const t4 of Object.keys(e13)) {
      if (af.has(t4)) continue;
      const n6 = new s6(e13.startTime, e13.endTime, "");
      n6.id = e13.id, n6.type = "com.apple.quicktime.HLS", n6.value = {
        key: rf[t4],
        data: e13[t4]
      }, "scte35Out" !== t4 && "scte35In" !== t4 || (n6.value.data = new Uint8Array(n6.value.data.match(/[\da-f]{2}/gi)).buffer), i4.addCue(n6);
    }
    e13.processDateRange();
  });
};
var lf = (e12, t3, i4) => {
  e12.metadataTrack_ || (e12.metadataTrack_ = i4.addRemoteTextTrack({
    kind: "metadata",
    label: "Timed Metadata"
  }, false).track, ip.browser.IS_ANY_SAFARI || (e12.metadataTrack_.inBandMetadataTrackDispatchType = t3));
};
var hf = function(e12, t3, i4) {
  let s6, n6;
  if (i4 && i4.cues) for (s6 = i4.cues.length; s6--; ) n6 = i4.cues[s6], n6.startTime >= e12 && n6.endTime <= t3 && i4.removeCue(n6);
};
var df = function(e12) {
  const t3 = e12.cues;
  if (!t3) return;
  const i4 = {};
  for (let s6 = t3.length - 1; s6 >= 0; s6--) {
    const n6 = t3[s6], r3 = `${n6.startTime}-${n6.endTime}-${n6.text}`;
    i4[r3] ? e12.removeCue(n6) : i4[r3] = n6;
  }
};
var uf = (e12, t3, i4) => {
  if (null == t3 || !e12.length) return [];
  const s6 = Math.ceil((t3 - i4 + 3) * so.ONE_SECOND_IN_TS);
  let n6;
  for (n6 = 0; n6 < e12.length && !(e12[n6].pts > s6); n6++) ;
  return e12.slice(n6);
};
var cf = (e12, t3, i4) => {
  if (!t3.length) return e12;
  if (i4) return t3.slice();
  const s6 = t3[0].pts;
  let n6 = 0;
  for (; n6 < e12.length && !(e12[n6].pts >= s6); n6++) ;
  return e12.slice(0, n6).concat(t3);
};
var pf = (e12, t3, i4, s6) => {
  const n6 = Math.ceil((t3 - s6) * so.ONE_SECOND_IN_TS), r3 = Math.ceil((i4 - s6) * so.ONE_SECOND_IN_TS), a6 = e12.slice();
  let o4 = e12.length;
  for (; o4-- && !(e12[o4].pts <= r3); ) ;
  if (-1 === o4) return a6;
  let l5 = o4 + 1;
  for (; l5-- && !(e12[l5].pts <= n6); ) ;
  return l5 = Math.max(l5, 0), a6.splice(l5, o4 - l5 + 1), a6;
};
var mf = function(e12, t3) {
  if (!e12 && !t3 || !e12 && t3 || e12 && !t3) return false;
  if (e12 === t3) return true;
  const i4 = Object.keys(e12).sort(), s6 = Object.keys(t3).sort();
  if (i4.length !== s6.length) return false;
  for (let n6 = 0; n6 < i4.length; n6++) {
    const r3 = i4[n6];
    if (r3 !== s6[n6]) return false;
    if (e12[r3] !== t3[r3]) return false;
  }
  return true;
};
var gf = 22;
var ff = function(e12, t3, i4) {
  t3 = t3 || [];
  const s6 = [];
  let n6 = 0;
  for (let r3 = 0; r3 < t3.length; r3++) {
    const a6 = t3[r3];
    if (e12 === a6.timeline && (s6.push(r3), n6 += a6.duration, n6 > i4)) return r3;
  }
  return 0 === s6.length ? 0 : s6[s6.length - 1];
};
var yf = 1;
var _f = 500;
var vf = (e12) => "number" == typeof e12 && isFinite(e12);
var bf = 1 / 60;
var Tf = (e12, t3, i4) => "main" === e12 && t3 && i4 ? i4.hasAudio || i4.hasVideo ? t3.hasVideo && !i4.hasVideo ? "Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest." : !t3.hasVideo && i4.hasVideo ? "Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest." : null : "Neither audio nor video found in segment." : null;
var Sf = (e12, t3, i4) => {
  let s6 = t3 - Jm.BACK_BUFFER_LENGTH;
  e12.length && (s6 = Math.max(s6, e12.start(0)));
  const n6 = t3 - i4;
  return Math.min(n6, s6);
};
var Ef = (e12) => {
  const {
    startOfSegment: t3,
    duration: i4,
    segment: s6,
    part: n6,
    playlist: {
      mediaSequence: r3,
      id: a6,
      segments: o4 = []
    },
    mediaIndex: l5,
    partIndex: h,
    timeline: d4
  } = e12, u4 = o4.length - 1;
  let c2 = "mediaIndex/partIndex increment";
  e12.getMediaInfoForTime ? c2 = `getMediaInfoForTime (${e12.getMediaInfoForTime})` : e12.isSyncRequest && (c2 = "getSyncSegmentCandidate (isSyncRequest)"), e12.independent && (c2 += ` with independent ${e12.independent}`);
  const p2 = "number" == typeof h, m6 = e12.segment.uri ? "segment" : "pre-segment", g4 = p2 ? Dp({
    preloadSegment: s6
  }) - 1 : 0;
  return `${m6} [${r3 + l5}/${r3 + u4}]` + (p2 ? ` part [${h}/${g4}]` : "") + ` segment start/end [${s6.start} => ${s6.end}]` + (p2 ? ` part start/end [${n6.start} => ${n6.end}]` : "") + ` startOfSegment [${t3}] duration [${i4}] timeline [${d4}] selected by [${c2}] playlist [${a6}]`;
};
var wf = (e12) => `${e12}TimingInfo`;
var Cf = ({
  segmentTimeline: e12,
  currentTimeline: t3,
  startOfSegment: i4,
  buffered: s6,
  overrideCheck: n6
}) => n6 || e12 !== t3 ? e12 < t3 ? i4 : s6.length ? s6.end(s6.length - 1) : i4 : null;
var kf = ({
  timelineChangeController: e12,
  currentTimeline: t3,
  segmentTimeline: i4,
  loaderType: s6,
  audioDisabled: n6
}) => {
  if (t3 === i4) return false;
  if ("audio" === s6) {
    const t4 = e12.lastTimelineChange({
      type: "main"
    });
    return !t4 || t4.to !== i4;
  }
  if ("main" === s6 && n6) {
    const t4 = e12.pendingTimelineChange({
      type: "audio"
    });
    return !t4 || t4.to !== i4;
  }
  return false;
};
var xf = (e12) => {
  let t3 = 0;
  return ["video", "audio"].forEach(function(i4) {
    const s6 = e12[`${i4}TimingInfo`];
    if (!s6) return;
    const {
      start: n6,
      end: r3
    } = s6;
    let a6;
    "bigint" == typeof n6 || "bigint" == typeof r3 ? a6 = g3.BigInt(r3) - g3.BigInt(n6) : "number" == typeof n6 && "number" == typeof r3 && (a6 = r3 - n6), void 0 !== a6 && a6 > t3 && (t3 = a6);
  }), "bigint" == typeof t3 && t3 < Number.MAX_SAFE_INTEGER && (t3 = Number(t3)), t3;
};
var If = ({
  segmentDuration: e12,
  maxDuration: t3
}) => !!e12 && Math.round(e12) > t3 + mp;
var Af = (e12, t3) => {
  if ("hls" !== t3) return null;
  const i4 = xf({
    audioTimingInfo: e12.audioTimingInfo,
    videoTimingInfo: e12.videoTimingInfo
  });
  if (!i4) return null;
  const s6 = e12.playlist.targetDuration, n6 = If({
    segmentDuration: i4,
    maxDuration: 2 * s6
  }), r3 = If({
    segmentDuration: i4,
    maxDuration: s6
  }), a6 = `Segment with index ${e12.mediaIndex} from playlist ${e12.playlist.id} has a duration of ${i4} when the reported duration is ${e12.duration} and the target duration is ${s6}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;
  return n6 || r3 ? {
    severity: n6 ? "warn" : "info",
    message: a6
  } : null;
};
var Df = class extends ip.EventTarget {
  constructor(e12, t3 = {}) {
    if (super(), !e12) throw new TypeError("Initialization settings are required");
    if ("function" != typeof e12.currentTime) throw new TypeError("No currentTime getter specified");
    if (!e12.mediaSource) throw new TypeError("No MediaSource specified");
    this.bandwidth = e12.bandwidth, this.throughput = {
      rate: 0,
      count: 0
    }, this.roundTrip = NaN, this.resetStats_(), this.mediaIndex = null, this.partIndex = null, this.hasPlayed_ = e12.hasPlayed, this.currentTime_ = e12.currentTime, this.seekable_ = e12.seekable, this.seeking_ = e12.seeking, this.duration_ = e12.duration, this.mediaSource_ = e12.mediaSource, this.vhs_ = e12.vhs, this.loaderType_ = e12.loaderType, this.currentMediaInfo_ = void 0, this.startingMediaInfo_ = void 0, this.segmentMetadataTrack_ = e12.segmentMetadataTrack, this.goalBufferLength_ = e12.goalBufferLength, this.sourceType_ = e12.sourceType, this.sourceUpdater_ = e12.sourceUpdater, this.inbandTextTracks_ = e12.inbandTextTracks, this.state_ = "INIT", this.timelineChangeController_ = e12.timelineChangeController, this.shouldSaveSegmentTimingInfo_ = true, this.parse708captions_ = e12.parse708captions, this.useDtsForTimestampOffset_ = e12.useDtsForTimestampOffset, this.captionServices_ = e12.captionServices, this.exactManifestTimings = e12.exactManifestTimings, this.addMetadataToTextTrack = e12.addMetadataToTextTrack, this.checkBufferTimeout_ = null, this.error_ = void 0, this.currentTimeline_ = -1, this.shouldForceTimestampOffsetAfterResync_ = false, this.pendingSegment_ = null, this.xhrOptions_ = null, this.pendingSegments_ = [], this.audioDisabled_ = false, this.isPendingTimestampOffset_ = false, this.gopBuffer_ = [], this.timeMapping_ = 0, this.safeAppend_ = false, this.appendInitSegment_ = {
      audio: true,
      video: true
    }, this.playlistOfLastInitSegment_ = {
      audio: null,
      video: null
    }, this.callQueue_ = [], this.loadQueue_ = [], this.metadataQueue_ = {
      id3: [],
      caption: []
    }, this.waitingOnRemove_ = false, this.quotaExceededErrorRetryTimeout_ = null, this.activeInitSegmentId_ = null, this.initSegments_ = {}, this.cacheEncryptionKeys_ = e12.cacheEncryptionKeys, this.keyCache_ = {}, this.decrypter_ = e12.decrypter, this.syncController_ = e12.syncController, this.syncPoint_ = {
      segmentIndex: 0,
      time: 0
    }, this.transmuxer_ = this.createTransmuxer_(), this.triggerSyncInfoUpdate_ = () => this.trigger("syncinfoupdate"), this.syncController_.on("syncinfoupdate", this.triggerSyncInfoUpdate_), this.mediaSource_.addEventListener("sourceopen", () => {
      this.isEndOfStream_() || (this.ended_ = false);
    }), this.fetchAtBuffer_ = false, this.logger_ = dp(`SegmentLoader[${this.loaderType_}]`), Object.defineProperty(this, "state", {
      get() {
        return this.state_;
      },
      set(e13) {
        e13 !== this.state_ && (this.logger_(`${this.state_} -> ${e13}`), this.state_ = e13, this.trigger("statechange"));
      }
    }), this.sourceUpdater_.on("ready", () => {
      this.hasEnoughInfoToAppend_() && this.processCallQueue_();
    }), "main" === this.loaderType_ && this.timelineChangeController_.on("pendingtimelinechange", () => {
      this.hasEnoughInfoToAppend_() && this.processCallQueue_();
    }), "audio" === this.loaderType_ && this.timelineChangeController_.on("timelinechange", () => {
      this.hasEnoughInfoToLoad_() && this.processLoadQueue_(), this.hasEnoughInfoToAppend_() && this.processCallQueue_();
    });
  }
  get mediaSequenceSync_() {
    return this.syncController_.getMediaSequenceSync(this.loaderType_);
  }
  createTransmuxer_() {
    return gg.createTransmuxer({
      remux: false,
      alignGopsAtEnd: this.safeAppend_,
      keepOriginalTimestamps: true,
      parse708captions: this.parse708captions_,
      captionServices: this.captionServices_
    });
  }
  resetStats_() {
    this.mediaBytesTransferred = 0, this.mediaRequests = 0, this.mediaRequestsAborted = 0, this.mediaRequestsTimedout = 0, this.mediaRequestsErrored = 0, this.mediaTransferDuration = 0, this.mediaSecondsLoaded = 0, this.mediaAppends = 0;
  }
  dispose() {
    this.trigger("dispose"), this.state = "DISPOSED", this.pause(), this.abort_(), this.transmuxer_ && this.transmuxer_.terminate(), this.resetStats_(), this.checkBufferTimeout_ && g3.clearTimeout(this.checkBufferTimeout_), this.syncController_ && this.triggerSyncInfoUpdate_ && this.syncController_.off("syncinfoupdate", this.triggerSyncInfoUpdate_), this.off();
  }
  setAudio(e12) {
    this.audioDisabled_ = !e12, e12 ? this.appendInitSegment_.audio = true : this.sourceUpdater_.removeAudio(0, this.duration_());
  }
  abort() {
    "WAITING" === this.state ? (this.abort_(), this.state = "READY", this.paused() || this.monitorBuffer_()) : this.pendingSegment_ && (this.pendingSegment_ = null);
  }
  abort_() {
    this.pendingSegment_ && this.pendingSegment_.abortRequests && this.pendingSegment_.abortRequests(), this.pendingSegment_ = null, this.callQueue_ = [], this.loadQueue_ = [], this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [], this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_), this.waitingOnRemove_ = false, g3.clearTimeout(this.quotaExceededErrorRetryTimeout_), this.quotaExceededErrorRetryTimeout_ = null;
  }
  checkForAbort_(e12) {
    return "APPENDING" !== this.state || this.pendingSegment_ ? !this.pendingSegment_ || this.pendingSegment_.requestId !== e12 : (this.state = "READY", true);
  }
  error(e12) {
    return void 0 !== e12 && (this.logger_("error occurred:", e12), this.error_ = e12), this.pendingSegment_ = null, this.error_;
  }
  endOfStream() {
    this.ended_ = true, this.transmuxer_ && gg.reset(this.transmuxer_), this.gopBuffer_.length = 0, this.pause(), this.trigger("ended");
  }
  buffered_() {
    const e12 = this.getMediaInfo_();
    if (!this.sourceUpdater_ || !e12) return cp();
    if ("main" === this.loaderType_) {
      const {
        hasAudio: t3,
        hasVideo: i4,
        isMuxed: s6
      } = e12;
      if (i4 && t3 && !this.audioDisabled_ && !s6) return this.sourceUpdater_.buffered();
      if (i4) return this.sourceUpdater_.videoBuffered();
    }
    return this.sourceUpdater_.audioBuffered();
  }
  initSegmentForMap(e12, t3 = false) {
    if (!e12) return null;
    const i4 = Cm(e12);
    let s6 = this.initSegments_[i4];
    return t3 && !s6 && e12.bytes && (this.initSegments_[i4] = s6 = {
      resolvedUri: e12.resolvedUri,
      byterange: e12.byterange,
      bytes: e12.bytes,
      tracks: e12.tracks,
      timescales: e12.timescales
    }), s6 || e12;
  }
  segmentKey(e12, t3 = false) {
    if (!e12) return null;
    const i4 = km(e12);
    let s6 = this.keyCache_[i4];
    this.cacheEncryptionKeys_ && t3 && !s6 && e12.bytes && (this.keyCache_[i4] = s6 = {
      resolvedUri: e12.resolvedUri,
      bytes: e12.bytes
    });
    const n6 = {
      resolvedUri: (s6 || e12).resolvedUri
    };
    return s6 && (n6.bytes = s6.bytes), n6;
  }
  couldBeginLoading_() {
    return this.playlist_ && !this.paused();
  }
  load() {
    if (this.monitorBuffer_(), this.playlist_) return "INIT" === this.state && this.couldBeginLoading_() ? this.init_() : void (!this.couldBeginLoading_() || "READY" !== this.state && "INIT" !== this.state || (this.state = "READY"));
  }
  init_() {
    return this.state = "READY", this.resetEverything(), this.monitorBuffer_();
  }
  playlist(e12, t3 = {}) {
    if (!e12) return;
    const i4 = this.playlist_, s6 = this.pendingSegment_;
    this.playlist_ = e12, this.xhrOptions_ = t3, "INIT" === this.state && (e12.syncInfo = {
      mediaSequence: e12.mediaSequence,
      time: 0
    }, "main" === this.loaderType_ && this.syncController_.setDateTimeMappingForStart(e12));
    let n6 = null;
    if (i4 && (i4.id ? n6 = i4.id : i4.uri && (n6 = i4.uri)), this.logger_(`playlist update [${n6} => ${e12.id || e12.uri}]`), this.mediaSequenceSync_ && (this.mediaSequenceSync_.update(e12, this.currentTime_()), this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${Cp(this.buffered_())}
`, this.mediaSequenceSync_.diagnostics)), this.trigger("syncinfoupdate"), "INIT" === this.state && this.couldBeginLoading_()) return this.init_();
    if (!i4 || i4.uri !== e12.uri) {
      if (null !== this.mediaIndex) {
        !e12.endList && "number" == typeof e12.partTargetDuration ? this.resetLoader() : this.resyncLoader();
      }
      return this.currentMediaInfo_ = void 0, void this.trigger("playlistupdate");
    }
    const r3 = e12.mediaSequence - i4.mediaSequence;
    if (this.logger_(`live window shift [${r3}]`), null !== this.mediaIndex) if (this.mediaIndex -= r3, this.mediaIndex < 0) this.mediaIndex = null, this.partIndex = null;
    else {
      const e13 = this.playlist_.segments[this.mediaIndex];
      if (this.partIndex && (!e13.parts || !e13.parts.length || !e13.parts[this.partIndex])) {
        const e14 = this.mediaIndex;
        this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`), this.resetLoader(), this.mediaIndex = e14;
      }
    }
    s6 && (s6.mediaIndex -= r3, s6.mediaIndex < 0 ? (s6.mediaIndex = null, s6.partIndex = null) : (s6.mediaIndex >= 0 && (s6.segment = e12.segments[s6.mediaIndex]), s6.partIndex >= 0 && s6.segment.parts && (s6.part = s6.segment.parts[s6.partIndex]))), this.syncController_.saveExpiredSegmentInfo(i4, e12);
  }
  pause() {
    this.checkBufferTimeout_ && (g3.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = null);
  }
  paused() {
    return null === this.checkBufferTimeout_;
  }
  resetEverything(e12) {
    this.ended_ = false, this.activeInitSegmentId_ = null, this.appendInitSegment_ = {
      audio: true,
      video: true
    }, this.resetLoader(), this.remove(0, 1 / 0, e12), this.transmuxer_ && (this.transmuxer_.postMessage({
      action: "clearAllMp4Captions"
    }), this.transmuxer_.postMessage({
      action: "reset"
    }));
  }
  resetLoader() {
    this.fetchAtBuffer_ = false, this.mediaSequenceSync_ && this.mediaSequenceSync_.resetAppendedStatus(), this.resyncLoader();
  }
  resyncLoader() {
    this.transmuxer_ && gg.reset(this.transmuxer_), this.mediaIndex = null, this.partIndex = null, this.syncPoint_ = null, this.isPendingTimestampOffset_ = false;
    const e12 = this.currentMediaInfo_ && this.currentMediaInfo_.isFmp4;
    "hls" === this.sourceType_ && !e12 && (this.shouldForceTimestampOffsetAfterResync_ = true), this.callQueue_ = [], this.loadQueue_ = [], this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [], this.abort(), this.transmuxer_ && this.transmuxer_.postMessage({
      action: "clearParsedMp4Captions"
    });
  }
  remove(e12, t3, i4 = () => {
  }, s6 = false) {
    if (t3 === 1 / 0 && (t3 = this.duration_()), t3 <= e12) return void this.logger_("skipping remove because end ${end} is <= start ${start}");
    if (!this.sourceUpdater_ || !this.getMediaInfo_()) return void this.logger_("skipping remove because no source updater or starting media info");
    let n6 = 1;
    const r3 = () => {
      n6--, 0 === n6 && i4();
    };
    !s6 && this.audioDisabled_ || (n6++, this.sourceUpdater_.removeAudio(e12, t3, r3)), (s6 || "main" === this.loaderType_) && (this.gopBuffer_ = pf(this.gopBuffer_, e12, t3, this.timeMapping_), n6++, this.sourceUpdater_.removeVideo(e12, t3, r3));
    for (const a6 in this.inbandTextTracks_) hf(e12, t3, this.inbandTextTracks_[a6]);
    hf(e12, t3, this.segmentMetadataTrack_), r3();
  }
  monitorBuffer_() {
    this.checkBufferTimeout_ && g3.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = g3.setTimeout(this.monitorBufferTick_.bind(this), 1);
  }
  monitorBufferTick_() {
    "READY" === this.state && this.fillBuffer_(), this.checkBufferTimeout_ && g3.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = g3.setTimeout(this.monitorBufferTick_.bind(this), _f);
  }
  fillBuffer_() {
    if (this.sourceUpdater_.updating()) return;
    const e12 = this.chooseNextRequest_();
    e12 && ("number" == typeof e12.timestampOffset && (this.isPendingTimestampOffset_ = false, this.timelineChangeController_.pendingTimelineChange({
      type: this.loaderType_,
      from: this.currentTimeline_,
      to: e12.timeline
    })), this.loadSegment_(e12));
  }
  isEndOfStream_(e12 = this.mediaIndex, t3 = this.playlist_, i4 = this.partIndex) {
    if (!t3 || !this.mediaSource_) return false;
    const s6 = "number" == typeof e12 && t3.segments[e12], n6 = e12 + 1 === t3.segments.length, r3 = !s6 || !s6.parts || i4 + 1 === s6.parts.length;
    return t3.endList && "open" === this.mediaSource_.readyState && n6 && r3;
  }
  chooseNextRequest_() {
    const e12 = this.buffered_(), t3 = Cp(e12) || 0, i4 = kp(e12, this.currentTime_()), s6 = !this.hasPlayed_() && i4 >= 1, n6 = i4 >= this.goalBufferLength_(), r3 = this.playlist_.segments;
    if (!r3.length || s6 || n6) return null;
    this.syncPoint_ = this.syncPoint_ || this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_(), this.loaderType_);
    const a6 = {
      partIndex: null,
      mediaIndex: null,
      startOfSegment: null,
      playlist: this.playlist_,
      isSyncRequest: Boolean(!this.syncPoint_)
    };
    if (a6.isSyncRequest) a6.mediaIndex = ff(this.currentTimeline_, r3, t3), this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${a6.mediaIndex}`);
    else if (null !== this.mediaIndex) {
      const e13 = r3[this.mediaIndex], i5 = "number" == typeof this.partIndex ? this.partIndex : -1;
      a6.startOfSegment = e13.end ? e13.end : t3, e13.parts && e13.parts[i5 + 1] ? (a6.mediaIndex = this.mediaIndex, a6.partIndex = i5 + 1) : a6.mediaIndex = this.mediaIndex + 1;
    } else {
      let e13, i5, s7;
      const n7 = this.fetchAtBuffer_ ? t3 : this.currentTime_();
      if (this.mediaSequenceSync_ && this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${n7}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t3}
Fetch At Buffer: ${this.fetchAtBuffer_}
`, this.mediaSequenceSync_.diagnostics), this.mediaSequenceSync_ && this.mediaSequenceSync_.isReliable) {
        const t4 = this.getSyncInfoFromMediaSequenceSync_(n7);
        if (!t4) return this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"), null;
        this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${t4.start} --> ${t4.end})`), e13 = t4.segmentIndex, i5 = t4.partIndex, s7 = t4.start;
      } else {
        this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");
        const t4 = Gp.getMediaInfoForTime({
          exactManifestTimings: this.exactManifestTimings,
          playlist: this.playlist_,
          currentTime: n7,
          startingPartIndex: this.syncPoint_.partIndex,
          startingSegmentIndex: this.syncPoint_.segmentIndex,
          startTime: this.syncPoint_.time
        });
        e13 = t4.segmentIndex, i5 = t4.partIndex, s7 = t4.startTime;
      }
      a6.getMediaInfoForTime = this.fetchAtBuffer_ ? `bufferedEnd ${n7}` : `currentTime ${n7}`, a6.mediaIndex = e13, a6.startOfSegment = s7, a6.partIndex = i5, this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${a6.mediaIndex} `);
    }
    const o4 = r3[a6.mediaIndex];
    let l5 = o4 && "number" == typeof a6.partIndex && o4.parts && o4.parts[a6.partIndex];
    if (!o4 || "number" == typeof a6.partIndex && !l5) return null;
    "number" != typeof a6.partIndex && o4.parts && (a6.partIndex = 0, l5 = o4.parts[0]);
    const h = this.vhs_.playlists && this.vhs_.playlists.main && this.vhs_.playlists.main.independentSegments || this.playlist_.independentSegments;
    if (!i4 && l5 && !h && !l5.independent) if (0 === a6.partIndex) {
      const e13 = r3[a6.mediaIndex - 1], t4 = e13.parts && e13.parts.length && e13.parts[e13.parts.length - 1];
      t4 && t4.independent && (a6.mediaIndex -= 1, a6.partIndex = e13.parts.length - 1, a6.independent = "previous segment");
    } else o4.parts[a6.partIndex - 1].independent && (a6.partIndex -= 1, a6.independent = "previous part");
    const d4 = this.mediaSource_ && "ended" === this.mediaSource_.readyState;
    return a6.mediaIndex >= r3.length - 1 && d4 && !this.seeking_() ? null : (this.shouldForceTimestampOffsetAfterResync_ && (this.shouldForceTimestampOffsetAfterResync_ = false, a6.forceTimestampOffset = true, this.logger_("choose next request. Force timestamp offset after loader resync")), this.generateSegmentInfo_(a6));
  }
  getSyncInfoFromMediaSequenceSync_(e12) {
    if (!this.mediaSequenceSync_) return null;
    const t3 = Math.max(e12, this.mediaSequenceSync_.start);
    e12 !== t3 && this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e12} to ${t3}`);
    const i4 = this.mediaSequenceSync_.getSyncInfoForTime(t3);
    if (!i4) return null;
    if (!i4.isAppended) return i4;
    const s6 = this.mediaSequenceSync_.getSyncInfoForTime(i4.end);
    return s6 ? (s6.isAppended && this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"), s6) : null;
  }
  generateSegmentInfo_(e12) {
    const {
      independent: t3,
      playlist: i4,
      mediaIndex: s6,
      startOfSegment: n6,
      isSyncRequest: r3,
      partIndex: a6,
      forceTimestampOffset: o4,
      getMediaInfoForTime: l5
    } = e12, h = i4.segments[s6], d4 = "number" == typeof a6 && h.parts[a6], u4 = {
      requestId: "segment-loader-" + Math.random(),
      uri: d4 && d4.resolvedUri || h.resolvedUri,
      mediaIndex: s6,
      partIndex: d4 ? a6 : null,
      isSyncRequest: r3,
      startOfSegment: n6,
      playlist: i4,
      bytes: null,
      encryptedBytes: null,
      timestampOffset: null,
      timeline: h.timeline,
      duration: d4 && d4.duration || h.duration,
      segment: h,
      part: d4,
      byteLength: 0,
      transmuxer: this.transmuxer_,
      getMediaInfoForTime: l5,
      independent: t3
    }, c2 = void 0 !== o4 ? o4 : this.isPendingTimestampOffset_;
    u4.timestampOffset = this.timestampOffsetForSegment_({
      segmentTimeline: h.timeline,
      currentTimeline: this.currentTimeline_,
      startOfSegment: n6,
      buffered: this.buffered_(),
      overrideCheck: c2
    });
    const p2 = Cp(this.sourceUpdater_.audioBuffered());
    return "number" == typeof p2 && (u4.audioAppendStart = p2 - this.sourceUpdater_.audioTimestampOffset()), this.sourceUpdater_.videoBuffered().length && (u4.gopsToAlignWith = uf(this.gopBuffer_, this.currentTime_() - this.sourceUpdater_.videoTimestampOffset(), this.timeMapping_)), u4;
  }
  timestampOffsetForSegment_(e12) {
    return Cf(e12);
  }
  earlyAbortWhenNeeded_(e12) {
    if (this.vhs_.tech_.paused() || !this.xhrOptions_.timeout || !this.playlist_.attributes.BANDWIDTH) return;
    if (Date.now() - (e12.firstBytesReceivedAt || Date.now()) < 1e3) return;
    const t3 = this.currentTime_(), i4 = e12.bandwidth, s6 = this.pendingSegment_.duration, n6 = Gp.estimateSegmentRequestTime(s6, i4, this.playlist_, e12.bytesReceived), r3 = Sp(this.buffered_(), t3, this.vhs_.tech_.playbackRate()) - 1;
    if (n6 <= r3) return;
    const a6 = Yg({
      main: this.vhs_.playlists.main,
      currentTime: t3,
      bandwidth: i4,
      duration: this.duration_(),
      segmentDuration: s6,
      timeUntilRebuffer: r3,
      currentTimeline: this.currentTimeline_,
      syncController: this.syncController_
    });
    if (!a6) return;
    const o4 = n6 - r3 - a6.rebufferingImpact;
    let l5 = 0.5;
    r3 <= mp && (l5 = 1), !a6.playlist || a6.playlist.uri === this.playlist_.uri || o4 < l5 || (this.bandwidth = a6.playlist.attributes.BANDWIDTH * Jm.BANDWIDTH_VARIANCE + 1, this.trigger("earlyabort"));
  }
  handleAbort_(e12) {
    this.logger_(`Aborting ${Ef(e12)}`), this.mediaRequestsAborted += 1;
  }
  handleProgress_(e12, t3) {
    this.earlyAbortWhenNeeded_(t3.stats), this.checkForAbort_(t3.requestId) || this.trigger("progress");
  }
  handleTrackInfo_(e12, t3) {
    this.earlyAbortWhenNeeded_(e12.stats), this.checkForAbort_(e12.requestId) || this.checkForIllegalMediaSwitch(t3) || (t3 = t3 || {}, mf(this.currentMediaInfo_, t3) || (this.appendInitSegment_ = {
      audio: true,
      video: true
    }, this.startingMediaInfo_ = t3, this.currentMediaInfo_ = t3, this.logger_("trackinfo update", t3), this.trigger("trackinfo")), this.checkForAbort_(e12.requestId) || (this.pendingSegment_.trackInfo = t3, this.hasEnoughInfoToAppend_() && this.processCallQueue_()));
  }
  handleTimingInfo_(e12, t3, i4, s6) {
    if (this.earlyAbortWhenNeeded_(e12.stats), this.checkForAbort_(e12.requestId)) return;
    const n6 = this.pendingSegment_, r3 = wf(t3);
    n6[r3] = n6[r3] || {}, n6[r3][i4] = s6, this.logger_(`timinginfo: ${t3} - ${i4} - ${s6}`), this.hasEnoughInfoToAppend_() && this.processCallQueue_();
  }
  handleCaptions_(e12, t3) {
    if (this.earlyAbortWhenNeeded_(e12.stats), this.checkForAbort_(e12.requestId)) return;
    if (0 === t3.length) return void this.logger_("SegmentLoader received no captions from a caption event");
    if (!this.pendingSegment_.hasAppendedData_) return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this, e12, t3));
    const i4 = null === this.sourceUpdater_.videoTimestampOffset() ? this.sourceUpdater_.audioTimestampOffset() : this.sourceUpdater_.videoTimestampOffset(), s6 = {};
    t3.forEach((e13) => {
      s6[e13.stream] = s6[e13.stream] || {
        startTime: 1 / 0,
        captions: [],
        endTime: 0
      };
      const t4 = s6[e13.stream];
      t4.startTime = Math.min(t4.startTime, e13.startTime + i4), t4.endTime = Math.max(t4.endTime, e13.endTime + i4), t4.captions.push(e13);
    }), Object.keys(s6).forEach((e13) => {
      const {
        startTime: t4,
        endTime: n6,
        captions: r3
      } = s6[e13], a6 = this.inbandTextTracks_;
      this.logger_(`adding cues from ${t4} -> ${n6} for ${e13}`), ef(a6, this.vhs_.tech_, e13), hf(t4, n6, a6[e13]), tf({
        captionArray: r3,
        inbandTextTracks: a6,
        timestampOffset: i4
      });
    }), this.transmuxer_ && this.transmuxer_.postMessage({
      action: "clearParsedMp4Captions"
    });
  }
  handleId3_(e12, t3, i4) {
    if (this.earlyAbortWhenNeeded_(e12.stats), this.checkForAbort_(e12.requestId)) return;
    this.pendingSegment_.hasAppendedData_ ? this.addMetadataToTextTrack(i4, t3, this.duration_()) : this.metadataQueue_.id3.push(this.handleId3_.bind(this, e12, t3, i4));
  }
  processMetadataQueue_() {
    this.metadataQueue_.id3.forEach((e12) => e12()), this.metadataQueue_.caption.forEach((e12) => e12()), this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [];
  }
  processCallQueue_() {
    const e12 = this.callQueue_;
    this.callQueue_ = [], e12.forEach((e13) => e13());
  }
  processLoadQueue_() {
    const e12 = this.loadQueue_;
    this.loadQueue_ = [], e12.forEach((e13) => e13());
  }
  hasEnoughInfoToLoad_() {
    if ("audio" !== this.loaderType_) return true;
    const e12 = this.pendingSegment_;
    return !!e12 && (!this.getCurrentMediaInfo_() || !kf({
      timelineChangeController: this.timelineChangeController_,
      currentTimeline: this.currentTimeline_,
      segmentTimeline: e12.timeline,
      loaderType: this.loaderType_,
      audioDisabled: this.audioDisabled_
    }));
  }
  getCurrentMediaInfo_(e12 = this.pendingSegment_) {
    return e12 && e12.trackInfo || this.currentMediaInfo_;
  }
  getMediaInfo_(e12 = this.pendingSegment_) {
    return this.getCurrentMediaInfo_(e12) || this.startingMediaInfo_;
  }
  getPendingSegmentPlaylist() {
    return this.pendingSegment_ ? this.pendingSegment_.playlist : null;
  }
  hasEnoughInfoToAppend_() {
    if (!this.sourceUpdater_.ready()) return false;
    if (this.waitingOnRemove_ || this.quotaExceededErrorRetryTimeout_) return false;
    const e12 = this.pendingSegment_, t3 = this.getCurrentMediaInfo_();
    if (!e12 || !t3) return false;
    const {
      hasAudio: i4,
      hasVideo: s6,
      isMuxed: n6
    } = t3;
    return !(s6 && !e12.videoTimingInfo) && !(i4 && !this.audioDisabled_ && !n6 && !e12.audioTimingInfo) && !kf({
      timelineChangeController: this.timelineChangeController_,
      currentTimeline: this.currentTimeline_,
      segmentTimeline: e12.timeline,
      loaderType: this.loaderType_,
      audioDisabled: this.audioDisabled_
    });
  }
  handleData_(e12, t3) {
    if (this.earlyAbortWhenNeeded_(e12.stats), this.checkForAbort_(e12.requestId)) return;
    if (this.callQueue_.length || !this.hasEnoughInfoToAppend_()) return void this.callQueue_.push(this.handleData_.bind(this, e12, t3));
    const i4 = this.pendingSegment_;
    if (this.setTimeMapping_(i4.timeline), this.updateMediaSecondsLoaded_(i4.part || i4.segment), "closed" !== this.mediaSource_.readyState) {
      if (e12.map && (e12.map = this.initSegmentForMap(e12.map, true), i4.segment.map = e12.map), e12.key && this.segmentKey(e12.key, true), i4.isFmp4 = e12.isFmp4, i4.timingInfo = i4.timingInfo || {}, i4.isFmp4) this.trigger("fmp4"), i4.timingInfo.start = i4[wf(t3.type)].start;
      else {
        const e13 = this.getCurrentMediaInfo_(), t4 = "main" === this.loaderType_ && e13 && e13.hasVideo;
        let s6;
        t4 && (s6 = i4.videoTimingInfo.start), i4.timingInfo.start = this.trueSegmentStart_({
          currentStart: i4.timingInfo.start,
          playlist: i4.playlist,
          mediaIndex: i4.mediaIndex,
          currentVideoTimestampOffset: this.sourceUpdater_.videoTimestampOffset(),
          useVideoTimingInfo: t4,
          firstVideoFrameTimeForData: s6,
          videoTimingInfo: i4.videoTimingInfo,
          audioTimingInfo: i4.audioTimingInfo
        });
      }
      if (this.updateAppendInitSegmentStatus(i4, t3.type), this.updateSourceBufferTimestampOffset_(i4), i4.isSyncRequest) {
        this.updateTimingInfoEnd_(i4), this.syncController_.saveSegmentTimingInfo({
          segmentInfo: i4,
          shouldSaveTimelineMapping: "main" === this.loaderType_
        });
        const e13 = this.chooseNextRequest_();
        if (e13.mediaIndex !== i4.mediaIndex || e13.partIndex !== i4.partIndex) return void this.logger_("sync segment was incorrect, not appending");
        this.logger_("sync segment was correct, appending");
      }
      i4.hasAppendedData_ = true, this.processMetadataQueue_(), this.appendData_(i4, t3);
    }
  }
  updateAppendInitSegmentStatus(e12, t3) {
    "main" !== this.loaderType_ || "number" != typeof e12.timestampOffset || e12.changedTimestampOffset || (this.appendInitSegment_ = {
      audio: true,
      video: true
    }), this.playlistOfLastInitSegment_[t3] !== e12.playlist && (this.appendInitSegment_[t3] = true);
  }
  getInitSegmentAndUpdateState_({
    type: e12,
    initSegment: t3,
    map: i4,
    playlist: s6
  }) {
    if (i4) {
      const e13 = Cm(i4);
      if (this.activeInitSegmentId_ === e13) return null;
      t3 = this.initSegmentForMap(i4, true).bytes, this.activeInitSegmentId_ = e13;
    }
    return t3 && this.appendInitSegment_[e12] ? (this.playlistOfLastInitSegment_[e12] = s6, this.appendInitSegment_[e12] = false, this.activeInitSegmentId_ = null, t3) : null;
  }
  handleQuotaExceededError_({
    segmentInfo: e12,
    type: t3,
    bytes: i4
  }, s6) {
    const n6 = this.sourceUpdater_.audioBuffered(), r3 = this.sourceUpdater_.videoBuffered();
    n6.length > 1 && this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: " + Ep(n6).join(", ")), r3.length > 1 && this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: " + Ep(r3).join(", "));
    const a6 = n6.length ? n6.start(0) : 0, o4 = n6.length ? n6.end(n6.length - 1) : 0, l5 = r3.length ? r3.start(0) : 0, h = r3.length ? r3.end(r3.length - 1) : 0;
    if (o4 - a6 <= yf && h - l5 <= yf) return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i4.byteLength}, audio buffer: ${Ep(n6).join(", ")}, video buffer: ${Ep(r3).join(", ")}, `), this.error({
      message: "Quota exceeded error with append of a single segment of content",
      excludeUntil: 1 / 0,
      metadata: {
        errorType: ip.Error.SegmentExceedsSourceBufferQuota
      }
    }), void this.trigger("error");
    this.waitingOnRemove_ = true, this.callQueue_.push(this.appendToSourceBuffer_.bind(this, {
      segmentInfo: e12,
      type: t3,
      bytes: i4
    }));
    const d4 = this.currentTime_() - yf;
    this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${d4}`), this.remove(0, d4, () => {
      this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${yf}s`), this.waitingOnRemove_ = false, this.quotaExceededErrorRetryTimeout_ = g3.setTimeout(() => {
        this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"), this.quotaExceededErrorRetryTimeout_ = null, this.processCallQueue_();
      }, 1e3 * yf);
    }, true);
  }
  handleAppendError_({
    segmentInfo: e12,
    type: t3,
    bytes: i4
  }, s6) {
    s6 && (s6.code !== gf ? (this.logger_("Received non QUOTA_EXCEEDED_ERR on append", s6), this.error({
      message: `${t3} append of ${i4.length}b failed for segment #${e12.mediaIndex} in playlist ${e12.playlist.id}`,
      metadata: {
        errorType: ip.Error.SegmentAppendError
      }
    }), this.trigger("appenderror")) : this.handleQuotaExceededError_({
      segmentInfo: e12,
      type: t3,
      bytes: i4
    }));
  }
  appendToSourceBuffer_({
    segmentInfo: e12,
    type: t3,
    initSegment: i4,
    data: s6,
    bytes: n6
  }) {
    if (!n6) {
      const e13 = [s6];
      let t4 = s6.byteLength;
      i4 && (e13.unshift(i4), t4 += i4.byteLength), n6 = Jg({
        bytes: t4,
        segments: e13
      });
    }
    this.sourceUpdater_.appendBuffer({
      segmentInfo: e12,
      type: t3,
      bytes: n6
    }, this.handleAppendError_.bind(this, {
      segmentInfo: e12,
      type: t3,
      bytes: n6
    }));
  }
  handleSegmentTimingInfo_(e12, t3, i4) {
    if (!this.pendingSegment_ || t3 !== this.pendingSegment_.requestId) return;
    const s6 = this.pendingSegment_.segment, n6 = `${e12}TimingInfo`;
    s6[n6] || (s6[n6] = {}), s6[n6].transmuxerPrependedSeconds = i4.prependedContentDuration || 0, s6[n6].transmuxedPresentationStart = i4.start.presentation, s6[n6].transmuxedDecodeStart = i4.start.decode, s6[n6].transmuxedPresentationEnd = i4.end.presentation, s6[n6].transmuxedDecodeEnd = i4.end.decode, s6[n6].baseMediaDecodeTime = i4.baseMediaDecodeTime;
  }
  appendData_(e12, t3) {
    const {
      type: i4,
      data: s6
    } = t3;
    if (!s6 || !s6.byteLength) return;
    if ("audio" === i4 && this.audioDisabled_) return;
    const n6 = this.getInitSegmentAndUpdateState_({
      type: i4,
      initSegment: t3.initSegment,
      playlist: e12.playlist,
      map: e12.isFmp4 ? e12.segment.map : null
    });
    this.appendToSourceBuffer_({
      segmentInfo: e12,
      type: i4,
      initSegment: n6,
      data: s6
    });
  }
  loadSegment_(e12) {
    this.state = "WAITING", this.pendingSegment_ = e12, this.trimBackBuffer_(e12), "number" == typeof e12.timestampOffset && this.transmuxer_ && this.transmuxer_.postMessage({
      action: "clearAllMp4Captions"
    }), this.hasEnoughInfoToLoad_() ? this.updateTransmuxerAndRequestSegment_(e12) : this.loadQueue_.push(() => {
      const t3 = Ot({}, e12, {
        forceTimestampOffset: true
      });
      Ot(e12, this.generateSegmentInfo_(t3)), this.isPendingTimestampOffset_ = false, this.updateTransmuxerAndRequestSegment_(e12);
    });
  }
  updateTransmuxerAndRequestSegment_(e12) {
    this.shouldUpdateTransmuxerTimestampOffset_(e12.timestampOffset) && (this.gopBuffer_.length = 0, e12.gopsToAlignWith = [], this.timeMapping_ = 0, this.transmuxer_.postMessage({
      action: "reset"
    }), this.transmuxer_.postMessage({
      action: "setTimestampOffset",
      timestampOffset: e12.timestampOffset
    }));
    const t3 = this.createSimplifiedSegmentObj_(e12), i4 = this.isEndOfStream_(e12.mediaIndex, e12.playlist, e12.partIndex), s6 = null !== this.mediaIndex, n6 = e12.timeline !== this.currentTimeline_ && e12.timeline > 0, r3 = i4 || s6 && n6;
    this.logger_(`Requesting
${Zg(e12.uri)}
${Ef(e12)}`), t3.map && !t3.map.bytes && (this.logger_("going to request init segment."), this.appendInitSegment_ = {
      video: true,
      audio: true
    }), e12.abortRequests = Og({
      xhr: this.vhs_.xhr,
      xhrOptions: this.xhrOptions_,
      decryptionWorker: this.decrypter_,
      segment: t3,
      abortFn: this.handleAbort_.bind(this, e12),
      progressFn: this.handleProgress_.bind(this),
      trackInfoFn: this.handleTrackInfo_.bind(this),
      timingInfoFn: this.handleTimingInfo_.bind(this),
      videoSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(this, "video", e12.requestId),
      audioSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(this, "audio", e12.requestId),
      captionsFn: this.handleCaptions_.bind(this),
      isEndOfTimeline: r3,
      endedTimelineFn: () => {
        this.logger_("received endedtimeline callback");
      },
      id3Fn: this.handleId3_.bind(this),
      dataFn: this.handleData_.bind(this),
      doneFn: this.segmentRequestFinished_.bind(this),
      onTransmuxerLog: ({
        message: t4,
        level: i5,
        stream: s7
      }) => {
        this.logger_(`${Ef(e12)} logged from transmuxer stream ${s7} as a ${i5}: ${t4}`);
      }
    });
  }
  trimBackBuffer_(e12) {
    const t3 = Sf(this.seekable_(), this.currentTime_(), this.playlist_.targetDuration || 10);
    t3 > 0 && this.remove(0, t3);
  }
  createSimplifiedSegmentObj_(e12) {
    const t3 = e12.segment, i4 = e12.part, s6 = {
      resolvedUri: i4 ? i4.resolvedUri : t3.resolvedUri,
      byterange: i4 ? i4.byterange : t3.byterange,
      requestId: e12.requestId,
      transmuxer: e12.transmuxer,
      audioAppendStart: e12.audioAppendStart,
      gopsToAlignWith: e12.gopsToAlignWith,
      part: e12.part
    }, n6 = e12.playlist.segments[e12.mediaIndex - 1];
    if (n6 && n6.timeline === t3.timeline && (n6.videoTimingInfo ? s6.baseStartTime = n6.videoTimingInfo.transmuxedDecodeEnd : n6.audioTimingInfo && (s6.baseStartTime = n6.audioTimingInfo.transmuxedDecodeEnd)), t3.key) {
      const i5 = t3.key.iv || new Uint32Array([0, 0, 0, e12.mediaIndex + e12.playlist.mediaSequence]);
      s6.key = this.segmentKey(t3.key), s6.key.iv = i5;
    }
    return t3.map && (s6.map = this.initSegmentForMap(t3.map)), s6;
  }
  saveTransferStats_(e12) {
    this.mediaRequests += 1, e12 && (this.mediaBytesTransferred += e12.bytesReceived, this.mediaTransferDuration += e12.roundTripTime);
  }
  saveBandwidthRelatedStats_(e12, t3) {
    this.pendingSegment_.byteLength = t3.bytesReceived, e12 < bf ? this.logger_(`Ignoring segment's bandwidth because its duration of ${e12} is less than the min to record ${bf}`) : (this.bandwidth = t3.bandwidth, this.roundTrip = t3.roundTripTime);
  }
  handleTimeout_() {
    this.mediaRequestsTimedout += 1, this.bandwidth = 1, this.roundTrip = NaN, this.trigger("bandwidthupdate"), this.trigger("timeout");
  }
  segmentRequestFinished_(e12, t3, i4) {
    if (this.callQueue_.length) return void this.callQueue_.push(this.segmentRequestFinished_.bind(this, e12, t3, i4));
    if (this.saveTransferStats_(t3.stats), !this.pendingSegment_) return;
    if (t3.requestId !== this.pendingSegment_.requestId) return;
    if (e12) {
      if (this.pendingSegment_ = null, this.state = "READY", e12.code === yg.ABORTED) return;
      return this.pause(), e12.code === yg.TIMEOUT ? void this.handleTimeout_() : (this.mediaRequestsErrored += 1, this.error(e12), void this.trigger("error"));
    }
    const s6 = this.pendingSegment_;
    this.saveBandwidthRelatedStats_(s6.duration, t3.stats), s6.endOfAllRequests = t3.endOfAllRequests, i4.gopInfo && (this.gopBuffer_ = cf(this.gopBuffer_, i4.gopInfo, this.safeAppend_)), this.state = "APPENDING", this.trigger("appending"), this.waitForAppendsToComplete_(s6);
  }
  setTimeMapping_(e12) {
    const t3 = this.syncController_.mappingForTimeline(e12);
    null !== t3 && (this.timeMapping_ = t3);
  }
  updateMediaSecondsLoaded_(e12) {
    "number" == typeof e12.start && "number" == typeof e12.end ? this.mediaSecondsLoaded += e12.end - e12.start : this.mediaSecondsLoaded += e12.duration;
  }
  shouldUpdateTransmuxerTimestampOffset_(e12) {
    return null !== e12 && ("main" === this.loaderType_ && e12 !== this.sourceUpdater_.videoTimestampOffset() || !this.audioDisabled_ && e12 !== this.sourceUpdater_.audioTimestampOffset());
  }
  trueSegmentStart_({
    currentStart: e12,
    playlist: t3,
    mediaIndex: i4,
    firstVideoFrameTimeForData: s6,
    currentVideoTimestampOffset: n6,
    useVideoTimingInfo: r3,
    videoTimingInfo: a6,
    audioTimingInfo: o4
  }) {
    if (void 0 !== e12) return e12;
    if (!r3) return o4.start;
    const l5 = t3.segments[i4 - 1];
    return 0 !== i4 && l5 && void 0 !== l5.start && l5.end === s6 + n6 ? a6.start : s6;
  }
  waitForAppendsToComplete_(e12) {
    const t3 = this.getCurrentMediaInfo_(e12);
    if (!t3) return this.error({
      message: "No starting media returned, likely due to an unsupported media format.",
      playlistExclusionDuration: 1 / 0,
      metadata: {
        errorType: ip.Error.SegmentUnsupportedMediaFormat
      }
    }), void this.trigger("error");
    const {
      hasAudio: i4,
      hasVideo: s6,
      isMuxed: n6
    } = t3, r3 = "main" === this.loaderType_ && s6, a6 = !this.audioDisabled_ && i4 && !n6;
    if (e12.waitingOnAppends = 0, !e12.hasAppendedData_) return e12.timingInfo || "number" != typeof e12.timestampOffset || (this.isPendingTimestampOffset_ = true), e12.timingInfo = {
      start: 0
    }, e12.waitingOnAppends++, this.isPendingTimestampOffset_ || (this.updateSourceBufferTimestampOffset_(e12), this.processMetadataQueue_()), void this.checkAppendsDone_(e12);
    r3 && e12.waitingOnAppends++, a6 && e12.waitingOnAppends++, r3 && this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this, e12)), a6 && this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this, e12));
  }
  checkAppendsDone_(e12) {
    this.checkForAbort_(e12.requestId) || (e12.waitingOnAppends--, 0 === e12.waitingOnAppends && this.handleAppendsDone_());
  }
  checkForIllegalMediaSwitch(e12) {
    const t3 = Tf(this.loaderType_, this.getCurrentMediaInfo_(), e12);
    return !!t3 && (this.error({
      message: t3,
      playlistExclusionDuration: 1 / 0,
      metadata: {
        errorType: ip.Error.SegmentSwitchError
      }
    }), this.trigger("error"), true);
  }
  updateSourceBufferTimestampOffset_(e12) {
    if (null === e12.timestampOffset || "number" != typeof e12.timingInfo.start || e12.changedTimestampOffset || "main" !== this.loaderType_) return;
    let t3 = false;
    e12.timestampOffset -= this.getSegmentStartTimeForTimestampOffsetCalculation_({
      videoTimingInfo: e12.segment.videoTimingInfo,
      audioTimingInfo: e12.segment.audioTimingInfo,
      timingInfo: e12.timingInfo
    }), e12.changedTimestampOffset = true, e12.timestampOffset !== this.sourceUpdater_.videoTimestampOffset() && (this.sourceUpdater_.videoTimestampOffset(e12.timestampOffset), t3 = true), e12.timestampOffset !== this.sourceUpdater_.audioTimestampOffset() && (this.sourceUpdater_.audioTimestampOffset(e12.timestampOffset), t3 = true), t3 && this.trigger("timestampoffset");
  }
  getSegmentStartTimeForTimestampOffsetCalculation_({
    videoTimingInfo: e12,
    audioTimingInfo: t3,
    timingInfo: i4
  }) {
    return this.useDtsForTimestampOffset_ ? e12 && "number" == typeof e12.transmuxedDecodeStart ? e12.transmuxedDecodeStart : t3 && "number" == typeof t3.transmuxedDecodeStart ? t3.transmuxedDecodeStart : i4.start : i4.start;
  }
  updateTimingInfoEnd_(e12) {
    e12.timingInfo = e12.timingInfo || {};
    const t3 = this.getMediaInfo_(), i4 = "main" === this.loaderType_ && t3 && t3.hasVideo && e12.videoTimingInfo ? e12.videoTimingInfo : e12.audioTimingInfo;
    i4 && (e12.timingInfo.end = "number" == typeof i4.end ? i4.end : i4.start + e12.duration);
  }
  handleAppendsDone_() {
    if (this.pendingSegment_ && this.trigger("appendsdone"), !this.pendingSegment_) return this.state = "READY", void (this.paused() || this.monitorBuffer_());
    const e12 = this.pendingSegment_;
    e12.part && e12.part.syncInfo ? e12.part.syncInfo.markAppended() : e12.segment.syncInfo && e12.segment.syncInfo.markAppended(), this.updateTimingInfoEnd_(e12), this.shouldSaveSegmentTimingInfo_ && this.syncController_.saveSegmentTimingInfo({
      segmentInfo: e12,
      shouldSaveTimelineMapping: "main" === this.loaderType_
    });
    const t3 = Af(e12, this.sourceType_);
    if (t3 && ("warn" === t3.severity ? ip.log.warn(t3.message) : this.logger_(t3.message)), this.recordThroughput_(e12), this.pendingSegment_ = null, this.state = "READY", e12.isSyncRequest && (this.trigger("syncinfoupdate"), !e12.hasAppendedData_)) return void this.logger_(`Throwing away un-appended sync request ${Ef(e12)}`);
    this.logger_(`Appended ${Ef(e12)}`), this.addSegmentMetadataCue_(e12), this.fetchAtBuffer_ = true, this.currentTimeline_ !== e12.timeline && (this.timelineChangeController_.lastTimelineChange({
      type: this.loaderType_,
      from: this.currentTimeline_,
      to: e12.timeline
    }), "main" !== this.loaderType_ || this.audioDisabled_ || this.timelineChangeController_.lastTimelineChange({
      type: "audio",
      from: this.currentTimeline_,
      to: e12.timeline
    })), this.currentTimeline_ = e12.timeline, this.trigger("syncinfoupdate");
    const i4 = e12.segment, s6 = e12.part, n6 = i4.end && this.currentTime_() - i4.end > 3 * e12.playlist.targetDuration, r3 = s6 && s6.end && this.currentTime_() - s6.end > 3 * e12.playlist.partTargetDuration;
    if (n6 || r3) return this.logger_(`bad ${n6 ? "segment" : "part"} ${Ef(e12)}`), void this.resetEverything();
    null !== this.mediaIndex && this.trigger("bandwidthupdate"), this.trigger("progress"), this.mediaIndex = e12.mediaIndex, this.partIndex = e12.partIndex, this.isEndOfStream_(e12.mediaIndex, e12.playlist, e12.partIndex) && this.endOfStream(), this.trigger("appended"), e12.hasAppendedData_ && this.mediaAppends++, this.paused() || this.monitorBuffer_();
  }
  recordThroughput_(e12) {
    if (e12.duration < bf) return void this.logger_(`Ignoring segment's throughput because its duration of ${e12.duration} is less than the min to record ${bf}`);
    const t3 = this.throughput.rate, i4 = Date.now() - e12.endOfAllRequests + 1, s6 = Math.floor(e12.byteLength / i4 * 8 * 1e3);
    this.throughput.rate += (s6 - t3) / ++this.throughput.count;
  }
  addSegmentMetadataCue_(e12) {
    if (!this.segmentMetadataTrack_) return;
    const t3 = e12.segment, i4 = t3.start, s6 = t3.end;
    if (!vf(i4) || !vf(s6)) return;
    hf(i4, s6, this.segmentMetadataTrack_);
    const n6 = g3.WebKitDataCue || g3.VTTCue, r3 = {
      custom: t3.custom,
      dateTimeObject: t3.dateTimeObject,
      dateTimeString: t3.dateTimeString,
      programDateTime: t3.programDateTime,
      bandwidth: e12.playlist.attributes.BANDWIDTH,
      resolution: e12.playlist.attributes.RESOLUTION,
      codecs: e12.playlist.attributes.CODECS,
      byteLength: e12.byteLength,
      uri: e12.uri,
      timeline: e12.timeline,
      playlist: e12.playlist.id,
      start: i4,
      end: s6
    }, a6 = new n6(i4, s6, JSON.stringify(r3));
    a6.value = r3, this.segmentMetadataTrack_.addCue(a6);
  }
};
function Pf() {
}
var Lf = function(e12) {
  return "string" != typeof e12 ? e12 : e12.replace(/./, (e13) => e13.toUpperCase());
};
var Of = ["video", "audio"];
var Nf = (e12, t3) => {
  const i4 = t3[`${e12}Buffer`];
  return i4 && i4.updating || t3.queuePending[e12];
};
var Rf = (e12, t3) => {
  for (let i4 = 0; i4 < t3.length; i4++) {
    const s6 = t3[i4];
    if ("mediaSource" === s6.type) return null;
    if (s6.type === e12) return i4;
  }
  return null;
};
var Mf = (e12, t3) => {
  if (0 === t3.queue.length) return;
  let i4 = 0, s6 = t3.queue[i4];
  if ("mediaSource" !== s6.type) {
    if ("mediaSource" !== e12 && t3.ready() && "closed" !== t3.mediaSource.readyState && !Nf(e12, t3)) {
      if (s6.type !== e12) {
        if (i4 = Rf(e12, t3.queue), null === i4) return;
        s6 = t3.queue[i4];
      }
      return t3.queue.splice(i4, 1), t3.queuePending[e12] = s6, s6.action(e12, t3), s6.doneFn ? void 0 : (t3.queuePending[e12] = null, void Mf(e12, t3));
    }
  } else t3.updating() || "closed" === t3.mediaSource.readyState || (t3.queue.shift(), s6.action(t3), s6.doneFn && s6.doneFn(), Mf("audio", t3), Mf("video", t3));
};
var Uf = (e12, t3) => {
  const i4 = t3[`${e12}Buffer`], s6 = Lf(e12);
  i4 && (i4.removeEventListener("updateend", t3[`on${s6}UpdateEnd_`]), i4.removeEventListener("error", t3[`on${s6}Error_`]), t3.codecs[e12] = null, t3[`${e12}Buffer`] = null);
};
var Bf = (e12, t3) => e12 && t3 && -1 !== Array.prototype.indexOf.call(e12.sourceBuffers, t3);
var Ff = {
  appendBuffer: (e12, t3, i4) => (s6, n6) => {
    const r3 = n6[`${s6}Buffer`];
    if (Bf(n6.mediaSource, r3)) {
      n6.logger_(`Appending segment ${t3.mediaIndex}'s ${e12.length} bytes to ${s6}Buffer`);
      try {
        r3.appendBuffer(e12);
      } catch (l_) {
        n6.logger_(`Error with code ${l_.code} ` + (l_.code === gf ? "(QUOTA_EXCEEDED_ERR) " : "") + `when appending segment ${t3.mediaIndex} to ${s6}Buffer`), n6.queuePending[s6] = null, i4(l_);
      }
    }
  },
  remove: (e12, t3) => (i4, s6) => {
    const n6 = s6[`${i4}Buffer`];
    if (Bf(s6.mediaSource, n6)) {
      s6.logger_(`Removing ${e12} to ${t3} from ${i4}Buffer`);
      try {
        n6.remove(e12, t3);
      } catch (l_) {
        s6.logger_(`Remove ${e12} to ${t3} from ${i4}Buffer failed`);
      }
    }
  },
  timestampOffset: (e12) => (t3, i4) => {
    const s6 = i4[`${t3}Buffer`];
    Bf(i4.mediaSource, s6) && (i4.logger_(`Setting ${t3}timestampOffset to ${e12}`), s6.timestampOffset = e12);
  },
  callback: (e12) => (t3, i4) => {
    e12();
  },
  endOfStream: (e12) => (t3) => {
    if ("open" === t3.mediaSource.readyState) {
      t3.logger_(`Calling mediaSource endOfStream(${e12 || ""})`);
      try {
        t3.mediaSource.endOfStream(e12);
      } catch (l_) {
        ip.log.warn("Failed to call media source endOfStream", l_);
      }
    }
  },
  duration: (e12) => (t3) => {
    t3.logger_(`Setting mediaSource duration to ${e12}`);
    try {
      t3.mediaSource.duration = e12;
    } catch (l_) {
      ip.log.warn("Failed to set media source duration", l_);
    }
  },
  abort: () => (e12, t3) => {
    if ("open" !== t3.mediaSource.readyState) return;
    const i4 = t3[`${e12}Buffer`];
    if (Bf(t3.mediaSource, i4)) {
      t3.logger_(`calling abort on ${e12}Buffer`);
      try {
        i4.abort();
      } catch (l_) {
        ip.log.warn(`Failed to abort on ${e12}Buffer`, l_);
      }
    }
  },
  addSourceBuffer: (e12, t3) => (i4) => {
    const s6 = Lf(e12), n6 = li(t3);
    i4.logger_(`Adding ${e12}Buffer with codec ${t3} to mediaSource`);
    const r3 = i4.mediaSource.addSourceBuffer(n6);
    r3.addEventListener("updateend", i4[`on${s6}UpdateEnd_`]), r3.addEventListener("error", i4[`on${s6}Error_`]), i4.codecs[e12] = t3, i4[`${e12}Buffer`] = r3;
  },
  removeSourceBuffer: (e12) => (t3) => {
    const i4 = t3[`${e12}Buffer`];
    if (Uf(e12, t3), Bf(t3.mediaSource, i4)) {
      t3.logger_(`Removing ${e12}Buffer with codec ${t3.codecs[e12]} from mediaSource`);
      try {
        t3.mediaSource.removeSourceBuffer(i4);
      } catch (l_) {
        ip.log.warn(`Failed to removeSourceBuffer ${e12}Buffer`, l_);
      }
    }
  },
  changeType: (e12) => (t3, i4) => {
    const s6 = i4[`${t3}Buffer`], n6 = li(e12);
    if (!Bf(i4.mediaSource, s6)) return;
    const r3 = e12.substring(0, e12.indexOf(".")), a6 = i4.codecs[t3];
    if (a6.substring(0, a6.indexOf(".")) !== r3) {
      i4.logger_(`changing ${t3}Buffer codec from ${i4.codecs[t3]} to ${e12}`);
      try {
        s6.changeType(n6), i4.codecs[t3] = e12;
      } catch (l_) {
        ip.log.warn(`Failed to changeType on ${t3}Buffer`, l_);
      }
    }
  }
};
var qf = ({
  type: e12,
  sourceUpdater: t3,
  action: i4,
  doneFn: s6,
  name: n6
}) => {
  t3.queue.push({
    type: e12,
    action: i4,
    doneFn: s6,
    name: n6
  }), Mf(e12, t3);
};
var jf = (e12, t3) => (i4) => {
  const s6 = pp(t3[`${e12}Buffered`]());
  if (t3.logger_(`received "updateend" event for ${e12} Source Buffer: `, s6), t3.queuePending[e12]) {
    const i5 = t3.queuePending[e12].doneFn;
    t3.queuePending[e12] = null, i5 && i5(t3[`${e12}Error_`]);
  }
  Mf(e12, t3);
};
var $f = class extends ip.EventTarget {
  constructor(e12) {
    super(), this.mediaSource = e12, this.sourceopenListener_ = () => Mf("mediaSource", this), this.mediaSource.addEventListener("sourceopen", this.sourceopenListener_), this.logger_ = dp("SourceUpdater"), this.audioTimestampOffset_ = 0, this.videoTimestampOffset_ = 0, this.queue = [], this.queuePending = {
      audio: null,
      video: null
    }, this.delayedAudioAppendQueue_ = [], this.videoAppendQueued_ = false, this.codecs = {}, this.onVideoUpdateEnd_ = jf("video", this), this.onAudioUpdateEnd_ = jf("audio", this), this.onVideoError_ = (e13) => {
      this.videoError_ = e13;
    }, this.onAudioError_ = (e13) => {
      this.audioError_ = e13;
    }, this.createdSourceBuffers_ = false, this.initializedEme_ = false, this.triggeredReady_ = false;
  }
  initializedEme() {
    this.initializedEme_ = true, this.triggerReady();
  }
  hasCreatedSourceBuffers() {
    return this.createdSourceBuffers_;
  }
  hasInitializedAnyEme() {
    return this.initializedEme_;
  }
  ready() {
    return this.hasCreatedSourceBuffers() && this.hasInitializedAnyEme();
  }
  createSourceBuffers(e12) {
    this.hasCreatedSourceBuffers() || (this.addOrChangeSourceBuffers(e12), this.createdSourceBuffers_ = true, this.trigger("createdsourcebuffers"), this.triggerReady());
  }
  triggerReady() {
    this.ready() && !this.triggeredReady_ && (this.triggeredReady_ = true, this.trigger("ready"));
  }
  addSourceBuffer(e12, t3) {
    qf({
      type: "mediaSource",
      sourceUpdater: this,
      action: Ff.addSourceBuffer(e12, t3),
      name: "addSourceBuffer"
    });
  }
  abort(e12) {
    qf({
      type: e12,
      sourceUpdater: this,
      action: Ff.abort(e12),
      name: "abort"
    });
  }
  removeSourceBuffer(e12) {
    this.canRemoveSourceBuffer() ? qf({
      type: "mediaSource",
      sourceUpdater: this,
      action: Ff.removeSourceBuffer(e12),
      name: "removeSourceBuffer"
    }) : ip.log.error("removeSourceBuffer is not supported!");
  }
  canRemoveSourceBuffer() {
    return !ip.browser.IS_FIREFOX && g3.MediaSource && g3.MediaSource.prototype && "function" == typeof g3.MediaSource.prototype.removeSourceBuffer;
  }
  static canChangeType() {
    return g3.SourceBuffer && g3.SourceBuffer.prototype && "function" == typeof g3.SourceBuffer.prototype.changeType;
  }
  canChangeType() {
    return this.constructor.canChangeType();
  }
  changeType(e12, t3) {
    this.canChangeType() ? qf({
      type: e12,
      sourceUpdater: this,
      action: Ff.changeType(t3),
      name: "changeType"
    }) : ip.log.error("changeType is not supported!");
  }
  addOrChangeSourceBuffers(e12) {
    if (!e12 || "object" != typeof e12 || 0 === Object.keys(e12).length) throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");
    Object.keys(e12).forEach((t3) => {
      const i4 = e12[t3];
      if (!this.hasCreatedSourceBuffers()) return this.addSourceBuffer(t3, i4);
      this.canChangeType() && this.changeType(t3, i4);
    });
  }
  appendBuffer(e12, t3) {
    const {
      segmentInfo: i4,
      type: s6,
      bytes: n6
    } = e12;
    if (this.processedAppend_ = true, "audio" === s6 && this.videoBuffer && !this.videoAppendQueued_) return this.delayedAudioAppendQueue_.push([e12, t3]), void this.logger_(`delayed audio append of ${n6.length} until video append`);
    const r3 = t3;
    if (qf({
      type: s6,
      sourceUpdater: this,
      action: Ff.appendBuffer(n6, i4 || {
        mediaIndex: -1
      }, r3),
      doneFn: t3,
      name: "appendBuffer"
    }), "video" === s6) {
      if (this.videoAppendQueued_ = true, !this.delayedAudioAppendQueue_.length) return;
      const e13 = this.delayedAudioAppendQueue_.slice();
      this.logger_(`queuing delayed audio ${e13.length} appendBuffers`), this.delayedAudioAppendQueue_.length = 0, e13.forEach((e14) => {
        this.appendBuffer.apply(this, e14);
      });
    }
  }
  audioBuffered() {
    return Bf(this.mediaSource, this.audioBuffer) && this.audioBuffer.buffered ? this.audioBuffer.buffered : cp();
  }
  videoBuffered() {
    return Bf(this.mediaSource, this.videoBuffer) && this.videoBuffer.buffered ? this.videoBuffer.buffered : cp();
  }
  buffered() {
    const e12 = Bf(this.mediaSource, this.videoBuffer) ? this.videoBuffer : null, t3 = Bf(this.mediaSource, this.audioBuffer) ? this.audioBuffer : null;
    return t3 && !e12 ? this.audioBuffered() : e12 && !t3 ? this.videoBuffered() : bp(this.audioBuffered(), this.videoBuffered());
  }
  setDuration(e12, t3 = Pf) {
    qf({
      type: "mediaSource",
      sourceUpdater: this,
      action: Ff.duration(e12),
      name: "duration",
      doneFn: t3
    });
  }
  endOfStream(e12 = null, t3 = Pf) {
    "string" != typeof e12 && (e12 = void 0), qf({
      type: "mediaSource",
      sourceUpdater: this,
      action: Ff.endOfStream(e12),
      name: "endOfStream",
      doneFn: t3
    });
  }
  removeAudio(e12, t3, i4 = Pf) {
    this.audioBuffered().length && 0 !== this.audioBuffered().end(0) ? qf({
      type: "audio",
      sourceUpdater: this,
      action: Ff.remove(e12, t3),
      doneFn: i4,
      name: "remove"
    }) : i4();
  }
  removeVideo(e12, t3, i4 = Pf) {
    this.videoBuffered().length && 0 !== this.videoBuffered().end(0) ? qf({
      type: "video",
      sourceUpdater: this,
      action: Ff.remove(e12, t3),
      doneFn: i4,
      name: "remove"
    }) : i4();
  }
  updating() {
    return !(!Nf("audio", this) && !Nf("video", this));
  }
  audioTimestampOffset(e12) {
    return void 0 !== e12 && this.audioBuffer && this.audioTimestampOffset_ !== e12 && (qf({
      type: "audio",
      sourceUpdater: this,
      action: Ff.timestampOffset(e12),
      name: "timestampOffset"
    }), this.audioTimestampOffset_ = e12), this.audioTimestampOffset_;
  }
  videoTimestampOffset(e12) {
    return void 0 !== e12 && this.videoBuffer && this.videoTimestampOffset !== e12 && (qf({
      type: "video",
      sourceUpdater: this,
      action: Ff.timestampOffset(e12),
      name: "timestampOffset"
    }), this.videoTimestampOffset_ = e12), this.videoTimestampOffset_;
  }
  audioQueueCallback(e12) {
    this.audioBuffer && qf({
      type: "audio",
      sourceUpdater: this,
      action: Ff.callback(e12),
      name: "callback"
    });
  }
  videoQueueCallback(e12) {
    this.videoBuffer && qf({
      type: "video",
      sourceUpdater: this,
      action: Ff.callback(e12),
      name: "callback"
    });
  }
  dispose() {
    this.trigger("dispose"), Of.forEach((e12) => {
      this.abort(e12), this.canRemoveSourceBuffer() ? this.removeSourceBuffer(e12) : this[`${e12}QueueCallback`](() => Uf(e12, this));
    }), this.videoAppendQueued_ = false, this.delayedAudioAppendQueue_.length = 0, this.sourceopenListener_ && this.mediaSource.removeEventListener("sourceopen", this.sourceopenListener_), this.off();
  }
};
var Hf = (e12) => decodeURIComponent(escape(String.fromCharCode.apply(null, e12)));
var Vf = (e12) => {
  const t3 = new Uint8Array(e12);
  return Array.from(t3).map((e13) => e13.toString(16).padStart(2, "0")).join("");
};
var zf = new Uint8Array("\n\n".split("").map((e12) => e12.charCodeAt(0)));
var Wf = class extends Error {
  constructor() {
    super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.");
  }
};
var Gf = class extends Df {
  constructor(e12, t3 = {}) {
    super(e12, t3), this.mediaSource_ = null, this.subtitlesTrack_ = null, this.featuresNativeTextTracks_ = e12.featuresNativeTextTracks, this.loadVttJs = e12.loadVttJs, this.shouldSaveSegmentTimingInfo_ = false;
  }
  createTransmuxer_() {
    return null;
  }
  buffered_() {
    if (!this.subtitlesTrack_ || !this.subtitlesTrack_.cues || !this.subtitlesTrack_.cues.length) return cp();
    const e12 = this.subtitlesTrack_.cues;
    return cp([[e12[0].startTime, e12[e12.length - 1].startTime]]);
  }
  initSegmentForMap(e12, t3 = false) {
    if (!e12) return null;
    const i4 = Cm(e12);
    let s6 = this.initSegments_[i4];
    if (t3 && !s6 && e12.bytes) {
      const t4 = zf.byteLength + e12.bytes.byteLength, n6 = new Uint8Array(t4);
      n6.set(e12.bytes), n6.set(zf, e12.bytes.byteLength), this.initSegments_[i4] = s6 = {
        resolvedUri: e12.resolvedUri,
        byterange: e12.byterange,
        bytes: n6
      };
    }
    return s6 || e12;
  }
  couldBeginLoading_() {
    return this.playlist_ && this.subtitlesTrack_ && !this.paused();
  }
  init_() {
    return this.state = "READY", this.resetEverything(), this.monitorBuffer_();
  }
  track(e12) {
    return void 0 === e12 || (this.subtitlesTrack_ = e12, "INIT" === this.state && this.couldBeginLoading_() && this.init_()), this.subtitlesTrack_;
  }
  remove(e12, t3) {
    hf(e12, t3, this.subtitlesTrack_);
  }
  fillBuffer_() {
    const e12 = this.chooseNextRequest_();
    if (e12) {
      if (null === this.syncController_.timestampOffsetForTimeline(e12.timeline)) {
        const e13 = () => {
          this.state = "READY", this.paused() || this.monitorBuffer_();
        };
        return this.syncController_.one("timestampoffset", e13), void (this.state = "WAITING_ON_TIMELINE");
      }
      this.loadSegment_(e12);
    }
  }
  timestampOffsetForSegment_() {
    return null;
  }
  chooseNextRequest_() {
    return this.skipEmptySegments_(super.chooseNextRequest_());
  }
  skipEmptySegments_(e12) {
    for (; e12 && e12.segment.empty; ) {
      if (e12.mediaIndex + 1 >= e12.playlist.segments.length) {
        e12 = null;
        break;
      }
      e12 = this.generateSegmentInfo_({
        playlist: e12.playlist,
        mediaIndex: e12.mediaIndex + 1,
        startOfSegment: e12.startOfSegment + e12.duration,
        isSyncRequest: e12.isSyncRequest
      });
    }
    return e12;
  }
  stopForError(e12) {
    this.error(e12), this.state = "READY", this.pause(), this.trigger("error");
  }
  segmentRequestFinished_(e12, t3, i4) {
    if (!this.subtitlesTrack_) return void (this.state = "READY");
    if (this.saveTransferStats_(t3.stats), !this.pendingSegment_) return this.state = "READY", void (this.mediaRequestsAborted += 1);
    if (e12) return e12.code === yg.TIMEOUT && this.handleTimeout_(), e12.code === yg.ABORTED ? this.mediaRequestsAborted += 1 : this.mediaRequestsErrored += 1, void this.stopForError(e12);
    const s6 = this.pendingSegment_;
    this.saveBandwidthRelatedStats_(s6.duration, t3.stats), t3.key && this.segmentKey(t3.key, true), this.state = "APPENDING", this.trigger("appending");
    const n6 = s6.segment;
    if (n6.map && (n6.map.bytes = t3.map.bytes), s6.bytes = t3.bytes, "function" != typeof g3.WebVTT && "function" == typeof this.loadVttJs) return this.state = "WAITING_ON_VTTJS", void this.loadVttJs().then(() => this.segmentRequestFinished_(e12, t3, i4), () => this.stopForError({
      message: "Error loading vtt.js",
      metadata: {
        errorType: ip.Error.VttLoadError
      }
    }));
    n6.requested = true;
    try {
      this.parseVTTCues_(s6);
    } catch (l_) {
      return void this.stopForError({
        message: l_.message,
        metadata: {
          errorType: ip.Error.VttCueParsingError
        }
      });
    }
    if (this.updateTimeMapping_(s6, this.syncController_.timelines[s6.timeline], this.playlist_), s6.cues.length ? s6.timingInfo = {
      start: s6.cues[0].startTime,
      end: s6.cues[s6.cues.length - 1].endTime
    } : s6.timingInfo = {
      start: s6.startOfSegment,
      end: s6.startOfSegment + s6.duration
    }, s6.isSyncRequest) return this.trigger("syncinfoupdate"), this.pendingSegment_ = null, void (this.state = "READY");
    s6.byteLength = s6.bytes.byteLength, this.mediaSecondsLoaded += n6.duration, s6.cues.forEach((e13) => {
      this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_ ? new g3.VTTCue(e13.startTime, e13.endTime, e13.text) : e13);
    }), df(this.subtitlesTrack_), this.handleAppendsDone_();
  }
  handleData_() {
  }
  updateTimingInfoEnd_() {
  }
  parseVTTCues_(e12) {
    let t3, i4 = false;
    if ("function" != typeof g3.WebVTT) throw new Wf();
    "function" == typeof g3.TextDecoder ? t3 = new g3.TextDecoder("utf8") : (t3 = g3.WebVTT.StringDecoder(), i4 = true);
    const s6 = new g3.WebVTT.Parser(g3, g3.vttjs, t3);
    if (e12.cues = [], e12.timestampmap = {
      MPEGTS: 0,
      LOCAL: 0
    }, s6.oncue = e12.cues.push.bind(e12.cues), s6.ontimestampmap = (t4) => {
      e12.timestampmap = t4;
    }, s6.onparsingerror = (e13) => {
      ip.log.warn("Error encountered when parsing cues: " + e13.message);
    }, e12.segment.map) {
      let t4 = e12.segment.map.bytes;
      i4 && (t4 = Hf(t4)), s6.parse(t4);
    }
    let n6 = e12.bytes;
    i4 && (n6 = Hf(n6)), s6.parse(n6), s6.flush();
  }
  updateTimeMapping_(e12, t3, i4) {
    const s6 = e12.segment;
    if (!t3) return;
    if (!e12.cues.length) return void (s6.empty = true);
    const {
      MPEGTS: n6,
      LOCAL: r3
    } = e12.timestampmap, a6 = n6 / so.ONE_SECOND_IN_TS - r3 + t3.mapping;
    if (e12.cues.forEach((e13) => {
      const i5 = e13.endTime - e13.startTime, s7 = 0 === n6 ? e13.startTime + a6 : this.handleRollover_(e13.startTime + a6, t3.time);
      e13.startTime = Math.max(s7, 0), e13.endTime = Math.max(s7 + i5, 0);
    }), !i4.syncInfo) {
      const t4 = e12.cues[0].startTime, n7 = e12.cues[e12.cues.length - 1].startTime;
      i4.syncInfo = {
        mediaSequence: i4.mediaSequence + e12.mediaIndex,
        time: Math.min(t4, n7 - s6.duration)
      };
    }
  }
  handleRollover_(e12, t3) {
    if (null === t3) return e12;
    let i4 = e12 * so.ONE_SECOND_IN_TS;
    const s6 = t3 * so.ONE_SECOND_IN_TS;
    let n6;
    for (n6 = s6 < i4 ? -8589934592 : 8589934592; Math.abs(i4 - s6) > 4294967296; ) i4 += n6;
    return i4 / so.ONE_SECOND_IN_TS;
  }
};
var Xf = function(e12, t3) {
  const i4 = e12.cues;
  for (let s6 = 0; s6 < i4.length; s6++) {
    const e13 = i4[s6];
    if (t3 >= e13.adStartTime && t3 <= e13.adEndTime) return e13;
  }
  return null;
};
var Kf = function(e12, t3, i4 = 0) {
  if (!e12.segments) return;
  let s6, n6 = i4;
  for (let r3 = 0; r3 < e12.segments.length; r3++) {
    const i5 = e12.segments[r3];
    if (s6 || (s6 = Xf(t3, n6 + i5.duration / 2)), s6) {
      if ("cueIn" in i5) {
        s6.endTime = n6, s6.adEndTime = n6, n6 += i5.duration, s6 = null;
        continue;
      }
      if (n6 < s6.endTime) {
        n6 += i5.duration;
        continue;
      }
      s6.endTime += i5.duration;
    } else if ("cueOut" in i5 && (s6 = new g3.VTTCue(n6, n6 + i5.duration, i5.cueOut), s6.adStartTime = n6, s6.adEndTime = n6 + parseFloat(i5.cueOut), t3.addCue(s6)), "cueOutCont" in i5) {
      const [e13, r4] = i5.cueOutCont.split("/").map(parseFloat);
      s6 = new g3.VTTCue(n6, n6 + i5.duration, ""), s6.adStartTime = n6 - e13, s6.adEndTime = s6.adStartTime + r4, t3.addCue(s6);
    }
    n6 += i5.duration;
  }
};
var Yf = class {
  constructor({
    start: e12,
    end: t3,
    segmentIndex: i4,
    partIndex: s6 = null,
    appended: n6 = false
  }) {
    this.start_ = e12, this.end_ = t3, this.segmentIndex_ = i4, this.partIndex_ = s6, this.appended_ = n6;
  }
  isInRange(e12) {
    return e12 >= this.start && e12 < this.end;
  }
  markAppended() {
    this.appended_ = true;
  }
  resetAppendedStatus() {
    this.appended_ = false;
  }
  get isAppended() {
    return this.appended_;
  }
  get start() {
    return this.start_;
  }
  get end() {
    return this.end_;
  }
  get segmentIndex() {
    return this.segmentIndex_;
  }
  get partIndex() {
    return this.partIndex_;
  }
};
var Qf = class {
  constructor(e12, t3 = []) {
    this.segmentSyncInfo_ = e12, this.partsSyncInfo_ = t3;
  }
  get segmentSyncInfo() {
    return this.segmentSyncInfo_;
  }
  get partsSyncInfo() {
    return this.partsSyncInfo_;
  }
  get hasPartsSyncInfo() {
    return this.partsSyncInfo_.length > 0;
  }
  resetAppendStatus() {
    this.segmentSyncInfo_.resetAppendedStatus(), this.partsSyncInfo_.forEach((e12) => e12.resetAppendedStatus());
  }
};
var Jf = class {
  constructor() {
    this.storage_ = /* @__PURE__ */ new Map(), this.diagnostics_ = "", this.isReliable_ = false, this.start_ = -1 / 0, this.end_ = 1 / 0;
  }
  get start() {
    return this.start_;
  }
  get end() {
    return this.end_;
  }
  get diagnostics() {
    return this.diagnostics_;
  }
  get isReliable() {
    return this.isReliable_;
  }
  resetAppendedStatus() {
    this.storage_.forEach((e12) => e12.resetAppendStatus());
  }
  update(e12, t3) {
    const {
      mediaSequence: i4,
      segments: s6
    } = e12;
    if (this.isReliable_ = this.isReliablePlaylist_(i4, s6), this.isReliable_) return this.updateStorage_(s6, i4, this.calculateBaseTime_(i4, t3));
  }
  getSyncInfoForTime(e12) {
    for (const {
      segmentSyncInfo: t3,
      partsSyncInfo: i4
    } of this.storage_.values()) if (i4.length) {
      for (const s6 of i4) if (s6.isInRange(e12)) return s6;
    } else if (t3.isInRange(e12)) return t3;
    return null;
  }
  updateStorage_(e12, t3, i4) {
    const s6 = /* @__PURE__ */ new Map();
    let n6 = "\n", r3 = i4, a6 = t3;
    this.start_ = r3, e12.forEach((e13, t4) => {
      const i5 = this.storage_.get(a6), o4 = r3, l5 = o4 + e13.duration, h = Boolean(i5 && i5.segmentSyncInfo && i5.segmentSyncInfo.isAppended), d4 = new Yf({
        start: o4,
        end: l5,
        appended: h,
        segmentIndex: t4
      });
      e13.syncInfo = d4;
      let u4 = r3;
      const c2 = (e13.parts || []).map((e14, s7) => {
        const r4 = u4, o5 = u4 + e14.duration, l6 = Boolean(i5 && i5.partsSyncInfo && i5.partsSyncInfo[s7] && i5.partsSyncInfo[s7].isAppended), h2 = new Yf({
          start: r4,
          end: o5,
          appended: l6,
          segmentIndex: t4,
          partIndex: s7
        });
        return u4 = o5, n6 += `Media Sequence: ${a6}.${s7} | Range: ${r4} --> ${o5} | Appended: ${l6}
`, e14.syncInfo = h2, h2;
      });
      s6.set(a6, new Qf(d4, c2)), n6 += `${Zg(e13.resolvedUri)} | Media Sequence: ${a6} | Range: ${o4} --> ${l5} | Appended: ${h}
`, a6++, r3 = l5;
    }), this.end_ = r3, this.storage_ = s6, this.diagnostics_ = n6;
  }
  calculateBaseTime_(e12, t3) {
    return this.storage_.size ? this.storage_.has(e12) ? this.storage_.get(e12).segmentSyncInfo.start : t3 : 0;
  }
  isReliablePlaylist_(e12, t3) {
    return null != e12 && Array.isArray(t3) && t3.length;
  }
};
var Zf = 86400;
var ey = [{
  name: "VOD",
  run: (e12, t3, i4, s6, n6) => {
    if (i4 !== 1 / 0) {
      return {
        time: 0,
        segmentIndex: 0,
        partIndex: null
      };
    }
    return null;
  }
}, {
  name: "MediaSequence",
  run: (e12, t3, i4, s6, n6, r3) => {
    const a6 = e12.getMediaSequenceSync(r3);
    if (!a6) return null;
    if (!a6.isReliable) return null;
    const o4 = a6.getSyncInfoForTime(n6);
    return o4 ? {
      time: o4.start,
      partIndex: o4.partIndex,
      segmentIndex: o4.segmentIndex
    } : null;
  }
}, {
  name: "ProgramDateTime",
  run: (e12, t3, i4, s6, n6) => {
    if (!Object.keys(e12.timelineToDatetimeMappings).length) return null;
    let r3 = null, a6 = null;
    const o4 = Ip(t3);
    n6 = n6 || 0;
    for (let l5 = 0; l5 < o4.length; l5++) {
      const i5 = o4[t3.endList || 0 === n6 ? l5 : o4.length - (l5 + 1)], s7 = i5.segment, h = e12.timelineToDatetimeMappings[s7.timeline];
      if (!h || !s7.dateTimeObject) continue;
      let d4 = s7.dateTimeObject.getTime() / 1e3 + h;
      if (s7.parts && "number" == typeof i5.partIndex) for (let e13 = 0; e13 < i5.partIndex; e13++) d4 += s7.parts[e13].duration;
      const u4 = Math.abs(n6 - d4);
      if (null !== a6 && (0 === u4 || a6 < u4)) break;
      a6 = u4, r3 = {
        time: d4,
        segmentIndex: i5.segmentIndex,
        partIndex: i5.partIndex
      };
    }
    return r3;
  }
}, {
  name: "Segment",
  run: (e12, t3, i4, s6, n6) => {
    let r3 = null, a6 = null;
    n6 = n6 || 0;
    const o4 = Ip(t3);
    for (let l5 = 0; l5 < o4.length; l5++) {
      const e13 = o4[t3.endList || 0 === n6 ? l5 : o4.length - (l5 + 1)], i5 = e13.segment, h = e13.part && e13.part.start || i5 && i5.start;
      if (i5.timeline === s6 && void 0 !== h) {
        const t4 = Math.abs(n6 - h);
        if (null !== a6 && a6 < t4) break;
        (!r3 || null === a6 || a6 >= t4) && (a6 = t4, r3 = {
          time: h,
          segmentIndex: e13.segmentIndex,
          partIndex: e13.partIndex
        });
      }
    }
    return r3;
  }
}, {
  name: "Discontinuity",
  run: (e12, t3, i4, s6, n6) => {
    let r3 = null;
    if (n6 = n6 || 0, t3.discontinuityStarts && t3.discontinuityStarts.length) {
      let i5 = null;
      for (let s7 = 0; s7 < t3.discontinuityStarts.length; s7++) {
        const a6 = t3.discontinuityStarts[s7], o4 = t3.discontinuitySequence + s7 + 1, l5 = e12.discontinuities[o4];
        if (l5) {
          const e13 = Math.abs(n6 - l5.time);
          if (null !== i5 && i5 < e13) break;
          (!r3 || null === i5 || i5 >= e13) && (i5 = e13, r3 = {
            time: l5.time,
            segmentIndex: a6,
            partIndex: null
          });
        }
      }
    }
    return r3;
  }
}, {
  name: "Playlist",
  run: (e12, t3, i4, s6, n6) => {
    if (t3.syncInfo) {
      return {
        time: t3.syncInfo.time,
        segmentIndex: t3.syncInfo.mediaSequence - t3.mediaSequence,
        partIndex: null
      };
    }
    return null;
  }
}];
var ty = class extends ip.EventTarget {
  constructor(e12 = {}) {
    super(), this.timelines = [], this.discontinuities = [], this.timelineToDatetimeMappings = {}, this.mediaSequenceStorage_ = {
      main: new Jf(),
      audio: new Jf(),
      vtt: new Jf()
    }, this.logger_ = dp("SyncController");
  }
  getMediaSequenceSync(e12) {
    return this.mediaSequenceStorage_[e12] || null;
  }
  getSyncPoint(e12, t3, i4, s6, n6) {
    if (t3 !== 1 / 0) {
      return ey.find(({
        name: e13
      }) => "VOD" === e13).run(this, e12, t3);
    }
    const r3 = this.runStrategies_(e12, t3, i4, s6, n6);
    if (!r3.length) return null;
    for (const a6 of r3) {
      const {
        syncPoint: t4,
        strategy: i5
      } = a6, {
        segmentIndex: n7,
        time: r4
      } = t4;
      if (n7 < 0) continue;
      const o4 = r4, l5 = o4 + e12.segments[n7].duration;
      if (this.logger_(`Strategy: ${i5}. Current time: ${s6}. selected segment: ${n7}. Time: [${o4} -> ${l5}]}`), s6 >= o4 && s6 < l5) return this.logger_("Found sync point with exact match: ", t4), t4;
    }
    return this.selectSyncPoint_(r3, {
      key: "time",
      value: s6
    });
  }
  getExpiredTime(e12, t3) {
    if (!e12 || !e12.segments) return null;
    const i4 = this.runStrategies_(e12, t3, e12.discontinuitySequence, 0);
    if (!i4.length) return null;
    const s6 = this.selectSyncPoint_(i4, {
      key: "segmentIndex",
      value: 0
    });
    return s6.segmentIndex > 0 && (s6.time *= -1), Math.abs(s6.time + Mp({
      defaultDuration: e12.targetDuration,
      durationList: e12.segments,
      startIndex: s6.segmentIndex,
      endIndex: 0
    }));
  }
  runStrategies_(e12, t3, i4, s6, n6) {
    const r3 = [];
    for (let a6 = 0; a6 < ey.length; a6++) {
      const o4 = ey[a6], l5 = o4.run(this, e12, t3, i4, s6, n6);
      l5 && (l5.strategy = o4.name, r3.push({
        strategy: o4.name,
        syncPoint: l5
      }));
    }
    return r3;
  }
  selectSyncPoint_(e12, t3) {
    let i4 = e12[0].syncPoint, s6 = Math.abs(e12[0].syncPoint[t3.key] - t3.value), n6 = e12[0].strategy;
    for (let r3 = 1; r3 < e12.length; r3++) {
      const a6 = Math.abs(e12[r3].syncPoint[t3.key] - t3.value);
      a6 < s6 && (s6 = a6, i4 = e12[r3].syncPoint, n6 = e12[r3].strategy);
    }
    return this.logger_(`syncPoint for [${t3.key}: ${t3.value}] chosen with strategy [${n6}]: [time:${i4.time}, segmentIndex:${i4.segmentIndex}` + ("number" == typeof i4.partIndex ? `,partIndex:${i4.partIndex}` : "") + "]"), i4;
  }
  saveExpiredSegmentInfo(e12, t3) {
    const i4 = t3.mediaSequence - e12.mediaSequence;
    if (i4 > Zf) ip.log.warn(`Not saving expired segment info. Media sequence gap ${i4} is too large.`);
    else for (let s6 = i4 - 1; s6 >= 0; s6--) {
      const i5 = e12.segments[s6];
      if (i5 && void 0 !== i5.start) {
        t3.syncInfo = {
          mediaSequence: e12.mediaSequence + s6,
          time: i5.start
        }, this.logger_(`playlist refresh sync: [time:${t3.syncInfo.time}, mediaSequence: ${t3.syncInfo.mediaSequence}]`), this.trigger("syncinfoupdate");
        break;
      }
    }
  }
  setDateTimeMappingForStart(e12) {
    if (this.timelineToDatetimeMappings = {}, e12.segments && e12.segments.length && e12.segments[0].dateTimeObject) {
      const t3 = e12.segments[0], i4 = t3.dateTimeObject.getTime() / 1e3;
      this.timelineToDatetimeMappings[t3.timeline] = -i4;
    }
  }
  saveSegmentTimingInfo({
    segmentInfo: e12,
    shouldSaveTimelineMapping: t3
  }) {
    const i4 = this.calculateSegmentTimeMapping_(e12, e12.timingInfo, t3), s6 = e12.segment;
    i4 && (this.saveDiscontinuitySyncInfo_(e12), e12.playlist.syncInfo || (e12.playlist.syncInfo = {
      mediaSequence: e12.playlist.mediaSequence + e12.mediaIndex,
      time: s6.start
    }));
    const n6 = s6.dateTimeObject;
    s6.discontinuity && t3 && n6 && (this.timelineToDatetimeMappings[s6.timeline] = -n6.getTime() / 1e3);
  }
  timestampOffsetForTimeline(e12) {
    return void 0 === this.timelines[e12] ? null : this.timelines[e12].time;
  }
  mappingForTimeline(e12) {
    return void 0 === this.timelines[e12] ? null : this.timelines[e12].mapping;
  }
  calculateSegmentTimeMapping_(e12, t3, i4) {
    const s6 = e12.segment, n6 = e12.part;
    let r3, a6, o4 = this.timelines[e12.timeline];
    if ("number" == typeof e12.timestampOffset) o4 = {
      time: e12.startOfSegment,
      mapping: e12.startOfSegment - t3.start
    }, i4 && (this.timelines[e12.timeline] = o4, this.trigger("timestampoffset"), this.logger_(`time mapping for timeline ${e12.timeline}: [time: ${o4.time}] [mapping: ${o4.mapping}]`)), r3 = e12.startOfSegment, a6 = t3.end + o4.mapping;
    else {
      if (!o4) return false;
      r3 = t3.start + o4.mapping, a6 = t3.end + o4.mapping;
    }
    return n6 && (n6.start = r3, n6.end = a6), (!s6.start || r3 < s6.start) && (s6.start = r3), s6.end = a6, true;
  }
  saveDiscontinuitySyncInfo_(e12) {
    const t3 = e12.playlist, i4 = e12.segment;
    if (i4.discontinuity) this.discontinuities[i4.timeline] = {
      time: i4.start,
      accuracy: 0
    };
    else if (t3.discontinuityStarts && t3.discontinuityStarts.length) for (let s6 = 0; s6 < t3.discontinuityStarts.length; s6++) {
      const n6 = t3.discontinuityStarts[s6], r3 = t3.discontinuitySequence + s6 + 1, a6 = n6 - e12.mediaIndex, o4 = Math.abs(a6);
      if (!this.discontinuities[r3] || this.discontinuities[r3].accuracy > o4) {
        let s7;
        s7 = a6 < 0 ? i4.start - Mp({
          defaultDuration: t3.targetDuration,
          durationList: t3.segments,
          startIndex: e12.mediaIndex,
          endIndex: n6
        }) : i4.end + Mp({
          defaultDuration: t3.targetDuration,
          durationList: t3.segments,
          startIndex: e12.mediaIndex + 1,
          endIndex: n6
        }), this.discontinuities[r3] = {
          time: s7,
          accuracy: o4
        };
      }
    }
  }
  dispose() {
    this.trigger("dispose"), this.off();
  }
};
var iy = class extends ip.EventTarget {
  constructor() {
    super(), this.pendingTimelineChanges_ = {}, this.lastTimelineChanges_ = {};
  }
  clearPendingTimelineChange(e12) {
    this.pendingTimelineChanges_[e12] = null, this.trigger("pendingtimelinechange");
  }
  pendingTimelineChange({
    type: e12,
    from: t3,
    to: i4
  }) {
    return "number" == typeof t3 && "number" == typeof i4 && (this.pendingTimelineChanges_[e12] = {
      type: e12,
      from: t3,
      to: i4
    }, this.trigger("pendingtimelinechange")), this.pendingTimelineChanges_[e12];
  }
  lastTimelineChange({
    type: e12,
    from: t3,
    to: i4
  }) {
    return "number" == typeof t3 && "number" == typeof i4 && (this.lastTimelineChanges_[e12] = {
      type: e12,
      from: t3,
      to: i4
    }, delete this.pendingTimelineChanges_[e12], this.trigger("timelinechange")), this.lastTimelineChanges_[e12];
  }
  dispose() {
    this.trigger("dispose"), this.pendingTimelineChanges_ = {}, this.lastTimelineChanges_ = {}, this.off();
  }
};
var sy = sg(ng(function() {
  var e12 = function() {
    function e13() {
      this.listeners = {};
    }
    var t4 = e13.prototype;
    return t4.on = function(e14, t5) {
      this.listeners[e14] || (this.listeners[e14] = []), this.listeners[e14].push(t5);
    }, t4.off = function(e14, t5) {
      if (!this.listeners[e14]) return false;
      var i5 = this.listeners[e14].indexOf(t5);
      return this.listeners[e14] = this.listeners[e14].slice(0), this.listeners[e14].splice(i5, 1), i5 > -1;
    }, t4.trigger = function(e14) {
      var t5 = this.listeners[e14];
      if (t5) if (2 === arguments.length) for (var i5 = t5.length, s7 = 0; s7 < i5; ++s7) t5[s7].call(this, arguments[1]);
      else for (var n7 = Array.prototype.slice.call(arguments, 1), r4 = t5.length, a7 = 0; a7 < r4; ++a7) t5[a7].apply(this, n7);
    }, t4.dispose = function() {
      this.listeners = {};
    }, t4.pipe = function(e14) {
      this.on("data", function(t5) {
        e14.push(t5);
      });
    }, e13;
  }();
  function t3(e13) {
    return e13.subarray(0, e13.byteLength - e13[e13.byteLength - 1]);
  }
  const i4 = function() {
    const e13 = [[[], [], [], [], []], [[], [], [], [], []]], t4 = e13[0], i5 = e13[1], s7 = t4[4], n7 = i5[4];
    let r4, a7, o5;
    const l6 = [], h2 = [];
    let d5, u5, c3, p3, m6, g4;
    for (r4 = 0; r4 < 256; r4++) h2[(l6[r4] = r4 << 1 ^ 283 * (r4 >> 7)) ^ r4] = r4;
    for (a7 = o5 = 0; !s7[a7]; a7 ^= d5 || 1, o5 = h2[o5] || 1) for (p3 = o5 ^ o5 << 1 ^ o5 << 2 ^ o5 << 3 ^ o5 << 4, p3 = p3 >> 8 ^ 255 & p3 ^ 99, s7[a7] = p3, n7[p3] = a7, c3 = l6[u5 = l6[d5 = l6[a7]]], g4 = 16843009 * c3 ^ 65537 * u5 ^ 257 * d5 ^ 16843008 * a7, m6 = 257 * l6[p3] ^ 16843008 * p3, r4 = 0; r4 < 4; r4++) t4[r4][a7] = m6 = m6 << 24 ^ m6 >>> 8, i5[r4][p3] = g4 = g4 << 24 ^ g4 >>> 8;
    for (r4 = 0; r4 < 5; r4++) t4[r4] = t4[r4].slice(0), i5[r4] = i5[r4].slice(0);
    return e13;
  };
  let s6 = null;
  class n6 {
    constructor(e13) {
      let t4, n7, r4;
      s6 || (s6 = i4()), this._tables = [[s6[0][0].slice(), s6[0][1].slice(), s6[0][2].slice(), s6[0][3].slice(), s6[0][4].slice()], [s6[1][0].slice(), s6[1][1].slice(), s6[1][2].slice(), s6[1][3].slice(), s6[1][4].slice()]];
      const a7 = this._tables[0][4], o5 = this._tables[1], l6 = e13.length;
      let h2 = 1;
      if (4 !== l6 && 6 !== l6 && 8 !== l6) throw new Error("Invalid aes key size");
      const d5 = e13.slice(0), u5 = [];
      for (this._key = [d5, u5], t4 = l6; t4 < 4 * l6 + 28; t4++) r4 = d5[t4 - 1], (t4 % l6 == 0 || 8 === l6 && t4 % l6 == 4) && (r4 = a7[r4 >>> 24] << 24 ^ a7[r4 >> 16 & 255] << 16 ^ a7[r4 >> 8 & 255] << 8 ^ a7[255 & r4], t4 % l6 == 0 && (r4 = r4 << 8 ^ r4 >>> 24 ^ h2 << 24, h2 = h2 << 1 ^ 283 * (h2 >> 7))), d5[t4] = d5[t4 - l6] ^ r4;
      for (n7 = 0; t4; n7++, t4--) r4 = d5[3 & n7 ? t4 : t4 - 4], u5[n7] = t4 <= 4 || n7 < 4 ? r4 : o5[0][a7[r4 >>> 24]] ^ o5[1][a7[r4 >> 16 & 255]] ^ o5[2][a7[r4 >> 8 & 255]] ^ o5[3][a7[255 & r4]];
    }
    decrypt(e13, t4, i5, s7, n7, r4) {
      const a7 = this._key[1];
      let o5, l6, h2, d5 = e13 ^ a7[0], u5 = s7 ^ a7[1], c3 = i5 ^ a7[2], p3 = t4 ^ a7[3];
      const m6 = a7.length / 4 - 2;
      let g4, f6 = 4;
      const y4 = this._tables[1], _3 = y4[0], v3 = y4[1], b2 = y4[2], T2 = y4[3], S5 = y4[4];
      for (g4 = 0; g4 < m6; g4++) o5 = _3[d5 >>> 24] ^ v3[u5 >> 16 & 255] ^ b2[c3 >> 8 & 255] ^ T2[255 & p3] ^ a7[f6], l6 = _3[u5 >>> 24] ^ v3[c3 >> 16 & 255] ^ b2[p3 >> 8 & 255] ^ T2[255 & d5] ^ a7[f6 + 1], h2 = _3[c3 >>> 24] ^ v3[p3 >> 16 & 255] ^ b2[d5 >> 8 & 255] ^ T2[255 & u5] ^ a7[f6 + 2], p3 = _3[p3 >>> 24] ^ v3[d5 >> 16 & 255] ^ b2[u5 >> 8 & 255] ^ T2[255 & c3] ^ a7[f6 + 3], f6 += 4, d5 = o5, u5 = l6, c3 = h2;
      for (g4 = 0; g4 < 4; g4++) n7[(3 & -g4) + r4] = S5[d5 >>> 24] << 24 ^ S5[u5 >> 16 & 255] << 16 ^ S5[c3 >> 8 & 255] << 8 ^ S5[255 & p3] ^ a7[f6++], o5 = d5, d5 = u5, u5 = c3, c3 = p3, p3 = o5;
    }
  }
  class r3 extends e12 {
    constructor() {
      super(e12), this.jobs = [], this.delay = 1, this.timeout_ = null;
    }
    processJob_() {
      this.jobs.shift()(), this.jobs.length ? this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay) : this.timeout_ = null;
    }
    push(e13) {
      this.jobs.push(e13), this.timeout_ || (this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay));
    }
  }
  const a6 = function(e13) {
    return e13 << 24 | (65280 & e13) << 8 | (16711680 & e13) >> 8 | e13 >>> 24;
  }, o4 = function(e13, t4, i5) {
    const s7 = new Int32Array(e13.buffer, e13.byteOffset, e13.byteLength >> 2), r4 = new n6(Array.prototype.slice.call(t4)), o5 = new Uint8Array(e13.byteLength), l6 = new Int32Array(o5.buffer);
    let h2, d5, u5, c3, p3, m6, g4, f6, y4;
    for (h2 = i5[0], d5 = i5[1], u5 = i5[2], c3 = i5[3], y4 = 0; y4 < s7.length; y4 += 4) p3 = a6(s7[y4]), m6 = a6(s7[y4 + 1]), g4 = a6(s7[y4 + 2]), f6 = a6(s7[y4 + 3]), r4.decrypt(p3, m6, g4, f6, l6, y4), l6[y4] = a6(l6[y4] ^ h2), l6[y4 + 1] = a6(l6[y4 + 1] ^ d5), l6[y4 + 2] = a6(l6[y4 + 2] ^ u5), l6[y4 + 3] = a6(l6[y4 + 3] ^ c3), h2 = p3, d5 = m6, u5 = g4, c3 = f6;
    return o5;
  };
  class l5 {
    constructor(e13, i5, s7, n7) {
      const o5 = l5.STEP, h2 = new Int32Array(e13.buffer), d5 = new Uint8Array(e13.byteLength);
      let u5 = 0;
      for (this.asyncStream_ = new r3(), this.asyncStream_.push(this.decryptChunk_(h2.subarray(u5, u5 + o5), i5, s7, d5)), u5 = o5; u5 < h2.length; u5 += o5) s7 = new Uint32Array([a6(h2[u5 - 4]), a6(h2[u5 - 3]), a6(h2[u5 - 2]), a6(h2[u5 - 1])]), this.asyncStream_.push(this.decryptChunk_(h2.subarray(u5, u5 + o5), i5, s7, d5));
      this.asyncStream_.push(function() {
        n7(null, t3(d5));
      });
    }
    static get STEP() {
      return 32e3;
    }
    decryptChunk_(e13, t4, i5, s7) {
      return function() {
        const n7 = o4(e13, t4, i5);
        s7.set(n7, e13.byteOffset);
      };
    }
  }
  var h, d4 = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
  h = "undefined" != typeof window ? window : void 0 !== d4 ? d4 : "undefined" != typeof self ? self : {};
  var u4 = function(e13) {
    return "function" === ArrayBuffer.isView ? ArrayBuffer.isView(e13) : e13 && e13.buffer instanceof ArrayBuffer;
  }, c2 = h.BigInt || Number;
  c2("0x1"), c2("0x100"), c2("0x10000"), c2("0x1000000"), c2("0x100000000"), c2("0x10000000000"), c2("0x1000000000000"), c2("0x100000000000000"), c2("0x10000000000000000"), function() {
    var e13 = new Uint16Array([65484]), t4 = new Uint8Array(e13.buffer, e13.byteOffset, e13.byteLength);
    255 === t4[0] || t4[0];
  }();
  const p2 = function(e13) {
    const t4 = {};
    return Object.keys(e13).forEach((i5) => {
      const s7 = e13[i5];
      u4(s7) ? t4[i5] = {
        bytes: s7.buffer,
        byteOffset: s7.byteOffset,
        byteLength: s7.byteLength
      } : t4[i5] = s7;
    }), t4;
  };
  self.onmessage = function(e13) {
    const t4 = e13.data, i5 = new Uint8Array(t4.encrypted.bytes, t4.encrypted.byteOffset, t4.encrypted.byteLength), s7 = new Uint32Array(t4.key.bytes, t4.key.byteOffset, t4.key.byteLength / 4), n7 = new Uint32Array(t4.iv.bytes, t4.iv.byteOffset, t4.iv.byteLength / 4);
    new l5(i5, s7, n7, function(e14, i6) {
      self.postMessage(p2({
        source: t4.source,
        decrypted: i6
      }), [i6.buffer]);
    });
  };
}));
var ny = ig(sy);
var ry = (e12) => {
  let t3 = e12.default ? "main" : "alternative";
  return e12.characteristics && e12.characteristics.indexOf("public.accessibility.describes-video") >= 0 && (t3 = "main-desc"), t3;
};
var ay = (e12, t3) => {
  e12.abort(), e12.pause(), t3 && t3.activePlaylistLoader && (t3.activePlaylistLoader.pause(), t3.activePlaylistLoader = null);
};
var oy = (e12, t3) => {
  t3.activePlaylistLoader = e12, e12.load();
};
var ly = (e12, t3) => () => {
  const {
    segmentLoaders: {
      [e12]: i4,
      main: s6
    },
    mediaTypes: {
      [e12]: n6
    }
  } = t3, r3 = n6.activeTrack(), a6 = n6.getActiveGroup(), o4 = n6.activePlaylistLoader, l5 = n6.lastGroup_;
  a6 && l5 && a6.id === l5.id || (n6.lastGroup_ = a6, n6.lastTrack_ = r3, ay(i4, n6), a6 && !a6.isMainPlaylist && (a6.playlistLoader ? (i4.resyncLoader(), oy(a6.playlistLoader, n6)) : o4 && s6.resetEverything()));
};
var hy = (e12, t3) => () => {
  const {
    segmentLoaders: {
      [e12]: i4
    },
    mediaTypes: {
      [e12]: s6
    }
  } = t3;
  s6.lastGroup_ = null, i4.abort(), i4.pause();
};
var dy = (e12, t3) => () => {
  const {
    mainPlaylistLoader: i4,
    segmentLoaders: {
      [e12]: s6,
      main: n6
    },
    mediaTypes: {
      [e12]: r3
    }
  } = t3, a6 = r3.activeTrack(), o4 = r3.getActiveGroup(), l5 = r3.activePlaylistLoader, h = r3.lastTrack_;
  if ((!h || !a6 || h.id !== a6.id) && (r3.lastGroup_ = o4, r3.lastTrack_ = a6, ay(s6, r3), o4)) {
    if (o4.isMainPlaylist) {
      if (!a6 || !h || a6.id === h.id) return;
      const e13 = t3.vhs.playlistController_, s7 = e13.selectPlaylist();
      if (e13.media() === s7) return;
      return r3.logger_(`track change. Switching main audio from ${h.id} to ${a6.id}`), i4.pause(), n6.resetEverything(), void e13.fastQualityChange_(s7);
    }
    if ("AUDIO" === e12) {
      if (!o4.playlistLoader) return n6.setAudio(true), void n6.resetEverything();
      s6.setAudio(true), n6.setAudio(false);
    }
    l5 !== o4.playlistLoader ? (s6.track && s6.track(a6), s6.resetEverything(), oy(o4.playlistLoader, r3)) : oy(o4.playlistLoader, r3);
  }
};
var uy = {
  AUDIO: (e12, t3) => () => {
    const {
      mediaTypes: {
        [e12]: i4
      },
      excludePlaylist: s6
    } = t3, n6 = i4.activeTrack(), r3 = i4.activeGroup(), a6 = (r3.filter((e13) => e13.default)[0] || r3[0]).id, o4 = i4.tracks[a6];
    if (n6 !== o4) {
      ip.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");
      for (const e13 in i4.tracks) i4.tracks[e13].enabled = i4.tracks[e13] === o4;
      i4.onTrackChanged();
    } else s6({
      error: {
        message: "Problem encountered loading the default audio track."
      }
    });
  },
  SUBTITLES: (e12, t3) => () => {
    const {
      mediaTypes: {
        [e12]: i4
      }
    } = t3;
    ip.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");
    const s6 = i4.activeTrack();
    s6 && (s6.mode = "disabled"), i4.onTrackChanged();
  }
};
var cy = {
  AUDIO: (e12, t3, i4) => {
    if (!t3) return;
    const {
      tech: s6,
      requestOptions: n6,
      segmentLoaders: {
        [e12]: r3
      }
    } = i4;
    t3.on("loadedmetadata", () => {
      const e13 = t3.media();
      r3.playlist(e13, n6), (!s6.paused() || e13.endList && "none" !== s6.preload()) && r3.load();
    }), t3.on("loadedplaylist", () => {
      r3.playlist(t3.media(), n6), s6.paused() || r3.load();
    }), t3.on("error", uy[e12](e12, i4));
  },
  SUBTITLES: (e12, t3, i4) => {
    const {
      tech: s6,
      requestOptions: n6,
      segmentLoaders: {
        [e12]: r3
      },
      mediaTypes: {
        [e12]: a6
      }
    } = i4;
    t3.on("loadedmetadata", () => {
      const e13 = t3.media();
      r3.playlist(e13, n6), r3.track(a6.activeTrack()), (!s6.paused() || e13.endList && "none" !== s6.preload()) && r3.load();
    }), t3.on("loadedplaylist", () => {
      r3.playlist(t3.media(), n6), s6.paused() || r3.load();
    }), t3.on("error", uy[e12](e12, i4));
  }
};
var py = {
  AUDIO: (e12, t3) => {
    const {
      vhs: i4,
      sourceType: s6,
      segmentLoaders: {
        [e12]: n6
      },
      requestOptions: r3,
      main: {
        mediaGroups: a6
      },
      mediaTypes: {
        [e12]: {
          groups: o4,
          tracks: l5,
          logger_: h
        }
      },
      mainPlaylistLoader: d4
    } = t3, u4 = Wp(d4.main);
    a6[e12] && 0 !== Object.keys(a6[e12]).length || (a6[e12] = {
      main: {
        default: {
          default: true
        }
      }
    }, u4 && (a6[e12].main.default.playlists = d4.main.playlists));
    for (const c2 in a6[e12]) {
      o4[c2] || (o4[c2] = []);
      for (const n7 in a6[e12][c2]) {
        let p2, m6 = a6[e12][c2][n7];
        if (u4 ? (h(`AUDIO group '${c2}' label '${n7}' is a main playlist`), m6.isMainPlaylist = true, p2 = null) : p2 = "vhs-json" === s6 && m6.playlists ? new mm(m6.playlists[0], i4, r3) : m6.resolvedUri ? new mm(m6.resolvedUri, i4, r3) : m6.playlists && "dash" === s6 ? new Qm(m6.playlists[0], i4, r3, d4) : null, m6 = up({
          id: n7,
          playlistLoader: p2
        }, m6), cy[e12](e12, m6.playlistLoader, t3), o4[c2].push(m6), void 0 === l5[n7]) {
          const e13 = new ip.AudioTrack({
            id: n7,
            kind: ry(m6),
            enabled: false,
            language: m6.language,
            default: m6.default,
            label: n7
          });
          l5[n7] = e13;
        }
      }
    }
    n6.on("error", uy[e12](e12, t3));
  },
  SUBTITLES: (e12, t3) => {
    const {
      tech: i4,
      vhs: s6,
      sourceType: n6,
      segmentLoaders: {
        [e12]: r3
      },
      requestOptions: a6,
      main: {
        mediaGroups: o4
      },
      mediaTypes: {
        [e12]: {
          groups: l5,
          tracks: h
        }
      },
      mainPlaylistLoader: d4
    } = t3;
    for (const u4 in o4[e12]) {
      l5[u4] || (l5[u4] = []);
      for (const r4 in o4[e12][u4]) {
        if (!s6.options_.useForcedSubtitles && o4[e12][u4][r4].forced) continue;
        let c2, p2 = o4[e12][u4][r4];
        if ("hls" === n6) c2 = new mm(p2.resolvedUri, s6, a6);
        else if ("dash" === n6) {
          if (!p2.playlists.filter((e13) => e13.excludeUntil !== 1 / 0).length) return;
          c2 = new Qm(p2.playlists[0], s6, a6, d4);
        } else "vhs-json" === n6 && (c2 = new mm(p2.playlists ? p2.playlists[0] : p2.resolvedUri, s6, a6));
        if (p2 = up({
          id: r4,
          playlistLoader: c2
        }, p2), cy[e12](e12, p2.playlistLoader, t3), l5[u4].push(p2), void 0 === h[r4]) {
          const e13 = i4.addRemoteTextTrack({
            id: r4,
            kind: "subtitles",
            default: p2.default && p2.autoselect,
            language: p2.language,
            label: r4
          }, false).track;
          h[r4] = e13;
        }
      }
    }
    r3.on("error", uy[e12](e12, t3));
  },
  "CLOSED-CAPTIONS": (e12, t3) => {
    const {
      tech: i4,
      main: {
        mediaGroups: s6
      },
      mediaTypes: {
        [e12]: {
          groups: n6,
          tracks: r3
        }
      }
    } = t3;
    for (const a6 in s6[e12]) {
      n6[a6] || (n6[a6] = []);
      for (const t4 in s6[e12][a6]) {
        const o4 = s6[e12][a6][t4];
        if (!/^(?:CC|SERVICE)/.test(o4.instreamId)) continue;
        const l5 = i4.options_.vhs && i4.options_.vhs.captionServices || {};
        let h = {
          label: t4,
          language: o4.language,
          instreamId: o4.instreamId,
          default: o4.default && o4.autoselect
        };
        if (l5[h.instreamId] && (h = up(h, l5[h.instreamId])), void 0 === h.default && delete h.default, n6[a6].push(up({
          id: t4
        }, o4)), void 0 === r3[t4]) {
          const e13 = i4.addRemoteTextTrack({
            id: h.instreamId,
            kind: "captions",
            default: h.default,
            language: h.language,
            label: h.label
          }, false).track;
          r3[t4] = e13;
        }
      }
    }
  }
};
var my = (e12, t3) => {
  for (let i4 = 0; i4 < e12.length; i4++) {
    if (Vp(t3, e12[i4])) return true;
    if (e12[i4].playlists && my(e12[i4].playlists, t3)) return true;
  }
  return false;
};
var gy = (e12, t3) => (i4) => {
  const {
    mainPlaylistLoader: s6,
    mediaTypes: {
      [e12]: {
        groups: n6
      }
    }
  } = t3, r3 = s6.media();
  if (!r3) return null;
  let a6 = null;
  r3.attributes[e12] && (a6 = n6[r3.attributes[e12]]);
  const o4 = Object.keys(n6);
  if (!a6) if ("AUDIO" === e12 && o4.length > 1 && Wp(t3.main)) for (let e13 = 0; e13 < o4.length; e13++) {
    const t4 = n6[o4[e13]];
    if (my(t4, r3)) {
      a6 = t4;
      break;
    }
  }
  else n6.main ? a6 = n6.main : 1 === o4.length && (a6 = n6[o4[0]]);
  return void 0 === i4 ? a6 : null !== i4 && a6 && a6.filter((e13) => e13.id === i4.id)[0] || null;
};
var fy = {
  AUDIO: (e12, t3) => () => {
    const {
      mediaTypes: {
        [e12]: {
          tracks: i4
        }
      }
    } = t3;
    for (const e13 in i4) if (i4[e13].enabled) return i4[e13];
    return null;
  },
  SUBTITLES: (e12, t3) => () => {
    const {
      mediaTypes: {
        [e12]: {
          tracks: i4
        }
      }
    } = t3;
    for (const e13 in i4) if ("showing" === i4[e13].mode || "hidden" === i4[e13].mode) return i4[e13];
    return null;
  }
};
var yy = (e12, {
  mediaTypes: t3
}) => () => {
  const i4 = t3[e12].activeTrack();
  return i4 ? t3[e12].activeGroup(i4) : null;
};
var _y = (e12) => {
  ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((t4) => {
    py[t4](t4, e12);
  });
  const {
    mediaTypes: t3,
    mainPlaylistLoader: i4,
    tech: s6,
    vhs: n6,
    segmentLoaders: {
      AUDIO: r3,
      main: a6
    }
  } = e12;
  ["AUDIO", "SUBTITLES"].forEach((i5) => {
    t3[i5].activeGroup = gy(i5, e12), t3[i5].activeTrack = fy[i5](i5, e12), t3[i5].onGroupChanged = ly(i5, e12), t3[i5].onGroupChanging = hy(i5, e12), t3[i5].onTrackChanged = dy(i5, e12), t3[i5].getActiveGroup = yy(i5, e12);
  });
  const o4 = t3.AUDIO.activeGroup();
  if (o4) {
    const e13 = (o4.filter((e14) => e14.default)[0] || o4[0]).id;
    t3.AUDIO.tracks[e13].enabled = true, t3.AUDIO.onGroupChanged(), t3.AUDIO.onTrackChanged();
    t3.AUDIO.getActiveGroup().playlistLoader ? (a6.setAudio(false), r3.setAudio(true)) : a6.setAudio(true);
  }
  i4.on("mediachange", () => {
    ["AUDIO", "SUBTITLES"].forEach((e13) => t3[e13].onGroupChanged());
  }), i4.on("mediachanging", () => {
    ["AUDIO", "SUBTITLES"].forEach((e13) => t3[e13].onGroupChanging());
  });
  const l5 = () => {
    t3.AUDIO.onTrackChanged(), s6.trigger({
      type: "usage",
      name: "vhs-audio-change"
    });
  };
  s6.audioTracks().addEventListener("change", l5), s6.remoteTextTracks().addEventListener("change", t3.SUBTITLES.onTrackChanged), n6.on("dispose", () => {
    s6.audioTracks().removeEventListener("change", l5), s6.remoteTextTracks().removeEventListener("change", t3.SUBTITLES.onTrackChanged);
  }), s6.clearTracks("audio");
  for (const h in t3.AUDIO.tracks) s6.audioTracks().addTrack(t3.AUDIO.tracks[h]);
};
var vy = () => {
  const e12 = {};
  return ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((t3) => {
    e12[t3] = {
      groups: {},
      tracks: {},
      activePlaylistLoader: null,
      activeGroup: Pf,
      activeTrack: Pf,
      getActiveGroup: Pf,
      onGroupChanged: Pf,
      onTrackChanged: Pf,
      lastTrack_: null,
      logger_: dp(`MediaGroups[${t3}]`)
    };
  }), e12;
};
var by = class {
  constructor() {
    this.priority_ = [], this.pathwayClones_ = /* @__PURE__ */ new Map();
  }
  set version(e12) {
    1 === e12 && (this.version_ = e12);
  }
  set ttl(e12) {
    this.ttl_ = e12 || 300;
  }
  set reloadUri(e12) {
    e12 && (this.reloadUri_ = lp(this.reloadUri_, e12));
  }
  set priority(e12) {
    e12 && e12.length && (this.priority_ = e12);
  }
  set pathwayClones(e12) {
    e12 && e12.length && (this.pathwayClones_ = new Map(e12.map((e13) => [e13.ID, e13])));
  }
  get version() {
    return this.version_;
  }
  get ttl() {
    return this.ttl_;
  }
  get reloadUri() {
    return this.reloadUri_;
  }
  get priority() {
    return this.priority_;
  }
  get pathwayClones() {
    return this.pathwayClones_;
  }
};
var Ty = class extends ip.EventTarget {
  constructor(e12, t3) {
    super(), this.currentPathway = null, this.defaultPathway = null, this.queryBeforeStart = false, this.availablePathways_ = /* @__PURE__ */ new Set(), this.steeringManifest = new by(), this.proxyServerUrl_ = null, this.manifestType_ = null, this.ttlTimeout_ = null, this.request_ = null, this.currentPathwayClones = /* @__PURE__ */ new Map(), this.nextPathwayClones = /* @__PURE__ */ new Map(), this.excludedSteeringManifestURLs = /* @__PURE__ */ new Set(), this.logger_ = dp("Content Steering"), this.xhr_ = e12, this.getBandwidth_ = t3;
  }
  assignTagProperties(e12, t3) {
    this.manifestType_ = t3.serverUri ? "HLS" : "DASH";
    const i4 = t3.serverUri || t3.serverURL;
    if (!i4) return this.logger_(`steering manifest URL is ${i4}, cannot request steering manifest.`), void this.trigger("error");
    i4.startsWith("data:") ? this.decodeDataUriManifest_(i4.substring(i4.indexOf(",") + 1)) : (this.steeringManifest.reloadUri = lp(e12, i4), this.defaultPathway = t3.pathwayId || t3.defaultServiceLocation, this.queryBeforeStart = t3.queryBeforeStart, this.proxyServerUrl_ = t3.proxyServerURL, this.defaultPathway && !this.queryBeforeStart && this.trigger("content-steering"));
  }
  requestSteeringManifest(e12) {
    const t3 = this.steeringManifest.reloadUri;
    if (!t3) return;
    const i4 = e12 ? t3 : this.getRequestURI(t3);
    if (!i4) return this.logger_("No valid content steering manifest URIs. Stopping content steering."), this.trigger("error"), void this.dispose();
    this.request_ = this.xhr_({
      uri: i4,
      requestType: "content-steering-manifest"
    }, (e13, t4) => {
      if (e13) {
        if (410 === t4.status) return this.logger_(`manifest request 410 ${e13}.`), this.logger_(`There will be no more content steering requests to ${i4} this session.`), void this.excludedSteeringManifestURLs.add(i4);
        if (429 === t4.status) {
          const i5 = t4.responseHeaders["retry-after"];
          return this.logger_(`manifest request 429 ${e13}.`), this.logger_(`content steering will retry in ${i5} seconds.`), void this.startTTLTimeout_(parseInt(i5, 10));
        }
        return this.logger_(`manifest failed to load ${e13}.`), void this.startTTLTimeout_();
      }
      const s6 = JSON.parse(this.request_.responseText);
      this.assignSteeringProperties_(s6), this.startTTLTimeout_();
    });
  }
  setProxyServerUrl_(e12) {
    const t3 = new g3.URL(e12), i4 = new g3.URL(this.proxyServerUrl_);
    return i4.searchParams.set("url", encodeURI(t3.toString())), this.setSteeringParams_(i4.toString());
  }
  decodeDataUriManifest_(e12) {
    const t3 = JSON.parse(g3.atob(e12));
    this.assignSteeringProperties_(t3);
  }
  setSteeringParams_(e12) {
    const t3 = new g3.URL(e12), i4 = this.getPathway(), s6 = this.getBandwidth_();
    if (i4) {
      const e13 = `_${this.manifestType_}_pathway`;
      t3.searchParams.set(e13, i4);
    }
    if (s6) {
      const e13 = `_${this.manifestType_}_throughput`;
      t3.searchParams.set(e13, s6);
    }
    return t3.toString();
  }
  assignSteeringProperties_(e12) {
    if (this.steeringManifest.version = e12.VERSION, !this.steeringManifest.version) return this.logger_(`manifest version is ${e12.VERSION}, which is not supported.`), void this.trigger("error");
    this.steeringManifest.ttl = e12.TTL, this.steeringManifest.reloadUri = e12["RELOAD-URI"], this.steeringManifest.priority = e12["PATHWAY-PRIORITY"] || e12["SERVICE-LOCATION-PRIORITY"], this.steeringManifest.pathwayClones = e12["PATHWAY-CLONES"], this.nextPathwayClones = this.steeringManifest.pathwayClones, this.availablePathways_.size || (this.logger_("There are no available pathways for content steering. Ending content steering."), this.trigger("error"), this.dispose());
    const t3 = ((e13) => {
      for (const t4 of e13) if (this.availablePathways_.has(t4)) return t4;
      return [...this.availablePathways_][0];
    })(this.steeringManifest.priority);
    this.currentPathway !== t3 && (this.currentPathway = t3, this.trigger("content-steering"));
  }
  getPathway() {
    return this.currentPathway || this.defaultPathway;
  }
  getRequestURI(e12) {
    if (!e12) return null;
    const t3 = (e13) => this.excludedSteeringManifestURLs.has(e13);
    if (this.proxyServerUrl_) {
      const i5 = this.setProxyServerUrl_(e12);
      if (!t3(i5)) return i5;
    }
    const i4 = this.setSteeringParams_(e12);
    return t3(i4) ? null : i4;
  }
  startTTLTimeout_(e12 = this.steeringManifest.ttl) {
    const t3 = 1e3 * e12;
    this.ttlTimeout_ = g3.setTimeout(() => {
      this.requestSteeringManifest();
    }, t3);
  }
  clearTTLTimeout_() {
    g3.clearTimeout(this.ttlTimeout_), this.ttlTimeout_ = null;
  }
  abort() {
    this.request_ && this.request_.abort(), this.request_ = null;
  }
  dispose() {
    this.off("content-steering"), this.off("error"), this.abort(), this.clearTTLTimeout_(), this.currentPathway = null, this.defaultPathway = null, this.queryBeforeStart = null, this.proxyServerUrl_ = null, this.manifestType_ = null, this.ttlTimeout_ = null, this.request_ = null, this.excludedSteeringManifestURLs = /* @__PURE__ */ new Set(), this.availablePathways_ = /* @__PURE__ */ new Set(), this.steeringManifest = new by();
  }
  addAvailablePathway(e12) {
    e12 && this.availablePathways_.add(e12);
  }
  clearAvailablePathways() {
    this.availablePathways_.clear();
  }
  excludePathway(e12) {
    return this.availablePathways_.delete(e12);
  }
  didDASHTagChange(e12, t3) {
    return !t3 && this.steeringManifest.reloadUri || t3 && (lp(e12, t3.serverURL) !== this.steeringManifest.reloadUri || t3.defaultServiceLocation !== this.defaultPathway || t3.queryBeforeStart !== this.queryBeforeStart || t3.proxyServerURL !== this.proxyServerUrl_);
  }
  getAvailablePathways() {
    return this.availablePathways_;
  }
};
var Sy = 10;
var Ey;
var wy = ["mediaRequests", "mediaRequestsAborted", "mediaRequestsTimedout", "mediaRequestsErrored", "mediaTransferDuration", "mediaBytesTransferred", "mediaAppends"];
var Cy = function(e12) {
  return this.audioSegmentLoader_[e12] + this.mainSegmentLoader_[e12];
};
var ky = function({
  currentPlaylist: e12,
  buffered: t3,
  currentTime: i4,
  nextPlaylist: s6,
  bufferLowWaterLine: n6,
  bufferHighWaterLine: r3,
  duration: a6,
  bufferBasedABR: o4,
  log: l5
}) {
  if (!s6) return ip.log.warn("We received no playlist to switch to. Please check your stream."), false;
  const h = `allowing switch ${e12 && e12.id || "null"} -> ${s6.id}`;
  if (!e12) return l5(`${h} as current playlist is not set`), true;
  if (s6.id === e12.id) return false;
  const d4 = Boolean(yp(t3, i4).length);
  if (!e12.endList) return d4 || "number" != typeof e12.partTargetDuration ? (l5(`${h} as current playlist is live`), true) : (l5(`not ${h} as current playlist is live llhls, but currentTime isn't in buffered.`), false);
  const u4 = kp(t3, i4), c2 = o4 ? Jm.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE : Jm.MAX_BUFFER_LOW_WATER_LINE;
  if (a6 < c2) return l5(`${h} as duration < max low water line (${a6} < ${c2})`), true;
  const p2 = s6.attributes.BANDWIDTH, m6 = e12.attributes.BANDWIDTH;
  if (p2 < m6 && (!o4 || u4 < r3)) {
    let e13 = `${h} as next bandwidth < current bandwidth (${p2} < ${m6})`;
    return o4 && (e13 += ` and forwardBuffer < bufferHighWaterLine (${u4} < ${r3})`), l5(e13), true;
  }
  if ((!o4 || p2 > m6) && u4 >= n6) {
    let e13 = `${h} as forwardBuffer >= bufferLowWaterLine (${u4} >= ${n6})`;
    return o4 && (e13 += ` and next bandwidth > current bandwidth (${p2} > ${m6})`), l5(e13), true;
  }
  return l5(`not ${h} as no switching criteria met`), false;
};
var xy = class extends ip.EventTarget {
  constructor(e12) {
    super();
    const {
      src: t3,
      withCredentials: i4,
      tech: s6,
      bandwidth: n6,
      externVhs: r3,
      useCueTags: a6,
      playlistExclusionDuration: o4,
      enableLowInitialPlaylist: l5,
      sourceType: h,
      cacheEncryptionKeys: d4,
      bufferBasedABR: u4,
      leastPixelDiffSelector: c2,
      captionServices: p2
    } = e12;
    if (!t3) throw new Error("A non-empty playlist URL or JSON manifest string is required");
    let {
      maxPlaylistRetries: m6
    } = e12;
    null == m6 && (m6 = 1 / 0), Ey = r3, this.bufferBasedABR = Boolean(u4), this.leastPixelDiffSelector = Boolean(c2), this.withCredentials = i4, this.tech_ = s6, this.vhs_ = s6.vhs, this.sourceType_ = h, this.useCueTags_ = a6, this.playlistExclusionDuration = o4, this.maxPlaylistRetries = m6, this.enableLowInitialPlaylist = l5, this.useCueTags_ && (this.cueTagsTrack_ = this.tech_.addTextTrack("metadata", "ad-cues"), this.cueTagsTrack_.inBandMetadataTrackDispatchType = ""), this.requestOptions_ = {
      withCredentials: i4,
      maxPlaylistRetries: m6,
      timeout: null
    }, this.on("error", this.pauseLoading), this.mediaTypes_ = vy(), this.mediaSource = new g3.MediaSource(), this.handleDurationChange_ = this.handleDurationChange_.bind(this), this.handleSourceOpen_ = this.handleSourceOpen_.bind(this), this.handleSourceEnded_ = this.handleSourceEnded_.bind(this), this.mediaSource.addEventListener("durationchange", this.handleDurationChange_), this.mediaSource.addEventListener("sourceopen", this.handleSourceOpen_), this.mediaSource.addEventListener("sourceended", this.handleSourceEnded_), this.seekable_ = cp(), this.hasPlayed_ = false, this.syncController_ = new ty(e12), this.segmentMetadataTrack_ = s6.addRemoteTextTrack({
      kind: "metadata",
      label: "segment-metadata"
    }, false).track, this.decrypter_ = new ny(), this.sourceUpdater_ = new $f(this.mediaSource), this.inbandTextTracks_ = {}, this.timelineChangeController_ = new iy(), this.keyStatusMap_ = /* @__PURE__ */ new Map();
    const f6 = {
      vhs: this.vhs_,
      parse708captions: e12.parse708captions,
      useDtsForTimestampOffset: e12.useDtsForTimestampOffset,
      captionServices: p2,
      mediaSource: this.mediaSource,
      currentTime: this.tech_.currentTime.bind(this.tech_),
      seekable: () => this.seekable(),
      seeking: () => this.tech_.seeking(),
      duration: () => this.duration(),
      hasPlayed: () => this.hasPlayed_,
      goalBufferLength: () => this.goalBufferLength(),
      bandwidth: n6,
      syncController: this.syncController_,
      decrypter: this.decrypter_,
      sourceType: this.sourceType_,
      inbandTextTracks: this.inbandTextTracks_,
      cacheEncryptionKeys: d4,
      sourceUpdater: this.sourceUpdater_,
      timelineChangeController: this.timelineChangeController_,
      exactManifestTimings: e12.exactManifestTimings,
      addMetadataToTextTrack: this.addMetadataToTextTrack.bind(this)
    };
    this.mainPlaylistLoader_ = "dash" === this.sourceType_ ? new Qm(t3, this.vhs_, up(this.requestOptions_, {
      addMetadataToTextTrack: this.addMetadataToTextTrack.bind(this)
    })) : new mm(t3, this.vhs_, up(this.requestOptions_, {
      addDateRangesToTextTrack: this.addDateRangesToTextTrack_.bind(this)
    })), this.setupMainPlaylistLoaderListeners_(), this.mainSegmentLoader_ = new Df(up(f6, {
      segmentMetadataTrack: this.segmentMetadataTrack_,
      loaderType: "main"
    }), e12), this.audioSegmentLoader_ = new Df(up(f6, {
      loaderType: "audio"
    }), e12), this.subtitleSegmentLoader_ = new Gf(up(f6, {
      loaderType: "vtt",
      featuresNativeTextTracks: this.tech_.featuresNativeTextTracks,
      loadVttJs: () => new Promise((e13, t4) => {
        function i5() {
          s6.off("vttjserror", n7), e13();
        }
        function n7() {
          s6.off("vttjsloaded", i5), t4();
        }
        s6.one("vttjsloaded", i5), s6.one("vttjserror", n7), s6.addWebVttScript_();
      })
    }), e12);
    const y4 = () => this.mainSegmentLoader_.bandwidth;
    this.contentSteeringController_ = new Ty(this.vhs_.xhr, y4), this.setupSegmentLoaderListeners_(), this.bufferBasedABR && (this.mainPlaylistLoader_.one("loadedplaylist", () => this.startABRTimer_()), this.tech_.on("pause", () => this.stopABRTimer_()), this.tech_.on("play", () => this.startABRTimer_())), wy.forEach((e13) => {
      this[e13 + "_"] = Cy.bind(this, e13);
    }), this.logger_ = dp("pc"), this.triggeredFmp4Usage = false, "none" === this.tech_.preload() ? (this.loadOnPlay_ = () => {
      this.loadOnPlay_ = null, this.mainPlaylistLoader_.load();
    }, this.tech_.one("play", this.loadOnPlay_)) : this.mainPlaylistLoader_.load(), this.timeToLoadedData__ = -1, this.mainAppendsToLoadedData__ = -1, this.audioAppendsToLoadedData__ = -1;
    const _3 = "none" === this.tech_.preload() ? "play" : "loadstart";
    this.tech_.one(_3, () => {
      const e13 = Date.now();
      this.tech_.one("loadeddata", () => {
        this.timeToLoadedData__ = Date.now() - e13, this.mainAppendsToLoadedData__ = this.mainSegmentLoader_.mediaAppends, this.audioAppendsToLoadedData__ = this.audioSegmentLoader_.mediaAppends;
      });
    });
  }
  mainAppendsToLoadedData_() {
    return this.mainAppendsToLoadedData__;
  }
  audioAppendsToLoadedData_() {
    return this.audioAppendsToLoadedData__;
  }
  appendsToLoadedData_() {
    const e12 = this.mainAppendsToLoadedData_(), t3 = this.audioAppendsToLoadedData_();
    return -1 === e12 || -1 === t3 ? -1 : e12 + t3;
  }
  timeToLoadedData_() {
    return this.timeToLoadedData__;
  }
  checkABR_(e12 = "abr") {
    const t3 = this.selectPlaylist();
    t3 && this.shouldSwitchToMedia_(t3) && this.switchMedia_(t3, e12);
  }
  switchMedia_(e12, t3, i4) {
    const s6 = this.media(), n6 = s6 && (s6.id || s6.uri), r3 = e12 && (e12.id || e12.uri);
    n6 && n6 !== r3 && (this.logger_(`switch media ${n6} -> ${r3} from ${t3}`), this.tech_.trigger({
      type: "usage",
      name: `vhs-rendition-change-${t3}`
    })), this.mainPlaylistLoader_.media(e12, i4);
  }
  switchMediaForDASHContentSteering_() {
    ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((e12) => {
      const t3 = this.mediaTypes_[e12], i4 = t3 ? t3.activeGroup() : null, s6 = this.contentSteeringController_.getPathway();
      if (i4 && s6) {
        const t4 = (i4.length ? i4[0].playlists : i4.playlists).filter((e13) => e13.attributes.serviceLocation === s6);
        t4.length && this.mediaTypes_[e12].activePlaylistLoader.media(t4[0]);
      }
    });
  }
  startABRTimer_() {
    this.stopABRTimer_(), this.abrTimer_ = g3.setInterval(() => this.checkABR_(), 250);
  }
  stopABRTimer_() {
    this.tech_.scrubbing && this.tech_.scrubbing() || (g3.clearInterval(this.abrTimer_), this.abrTimer_ = null);
  }
  getAudioTrackPlaylists_() {
    const e12 = this.main(), t3 = e12 && e12.playlists || [];
    if (!e12 || !e12.mediaGroups || !e12.mediaGroups.AUDIO) return t3;
    const i4 = e12.mediaGroups.AUDIO, s6 = Object.keys(i4);
    let n6;
    if (Object.keys(this.mediaTypes_.AUDIO.groups).length) n6 = this.mediaTypes_.AUDIO.activeTrack();
    else {
      const e13 = i4.main || s6.length && i4[s6[0]];
      for (const t4 in e13) if (e13[t4].default) {
        n6 = {
          label: t4
        };
        break;
      }
    }
    if (!n6) return t3;
    const r3 = [];
    for (const a6 in i4) if (i4[a6][n6.label]) {
      const t4 = i4[a6][n6.label];
      if (t4.playlists && t4.playlists.length) r3.push.apply(r3, t4.playlists);
      else if (t4.uri) r3.push(t4);
      else if (e12.playlists.length) for (let i5 = 0; i5 < e12.playlists.length; i5++) {
        const t5 = e12.playlists[i5];
        t5.attributes && t5.attributes.AUDIO && t5.attributes.AUDIO === a6 && r3.push(t5);
      }
    }
    return r3.length ? r3 : t3;
  }
  setupMainPlaylistLoaderListeners_() {
    this.mainPlaylistLoader_.on("loadedmetadata", () => {
      const e12 = this.mainPlaylistLoader_.media(), t3 = 1.5 * e12.targetDuration * 1e3;
      Hp(this.mainPlaylistLoader_.main, this.mainPlaylistLoader_.media()) ? this.requestOptions_.timeout = 0 : this.requestOptions_.timeout = t3, e12.endList && "none" !== this.tech_.preload() && (this.mainSegmentLoader_.playlist(e12, this.requestOptions_), this.mainSegmentLoader_.load()), _y({
        sourceType: this.sourceType_,
        segmentLoaders: {
          AUDIO: this.audioSegmentLoader_,
          SUBTITLES: this.subtitleSegmentLoader_,
          main: this.mainSegmentLoader_
        },
        tech: this.tech_,
        requestOptions: this.requestOptions_,
        mainPlaylistLoader: this.mainPlaylistLoader_,
        vhs: this.vhs_,
        main: this.main(),
        mediaTypes: this.mediaTypes_,
        excludePlaylist: this.excludePlaylist.bind(this)
      }), this.triggerPresenceUsage_(this.main(), e12), this.setupFirstPlay(), !this.mediaTypes_.AUDIO.activePlaylistLoader || this.mediaTypes_.AUDIO.activePlaylistLoader.media() ? this.trigger("selectedinitialmedia") : this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata", () => {
        this.trigger("selectedinitialmedia");
      });
    }), this.mainPlaylistLoader_.on("loadedplaylist", () => {
      this.loadOnPlay_ && this.tech_.off("play", this.loadOnPlay_);
      let e12 = this.mainPlaylistLoader_.media();
      if (!e12) {
        let t3;
        if (this.attachContentSteeringListeners_(), this.initContentSteeringController_(), this.excludeUnsupportedVariants_(), this.enableLowInitialPlaylist && (t3 = this.selectInitialPlaylist()), t3 || (t3 = this.selectPlaylist()), !t3 || !this.shouldSwitchToMedia_(t3)) return;
        this.initialMedia_ = t3, this.switchMedia_(this.initialMedia_, "initial");
        if (!("vhs-json" === this.sourceType_ && this.initialMedia_.segments)) return;
        e12 = this.initialMedia_;
      }
      this.handleUpdatedMediaPlaylist(e12);
    }), this.mainPlaylistLoader_.on("error", () => {
      const e12 = this.mainPlaylistLoader_.error;
      this.excludePlaylist({
        playlistToExclude: e12.playlist,
        error: e12
      });
    }), this.mainPlaylistLoader_.on("mediachanging", () => {
      this.mainSegmentLoader_.abort(), this.mainSegmentLoader_.pause();
    }), this.mainPlaylistLoader_.on("mediachange", () => {
      const e12 = this.mainPlaylistLoader_.media(), t3 = 1.5 * e12.targetDuration * 1e3;
      Hp(this.mainPlaylistLoader_.main, this.mainPlaylistLoader_.media()) ? this.requestOptions_.timeout = 0 : this.requestOptions_.timeout = t3, "dash" === this.sourceType_ && this.mainPlaylistLoader_.load(), this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.playlist(e12, this.requestOptions_), this.waitingForFastQualityPlaylistReceived_ ? this.runFastQualitySwitch_() : this.mainSegmentLoader_.load(), this.tech_.trigger({
        type: "mediachange",
        bubbles: true
      });
    }), this.mainPlaylistLoader_.on("playlistunchanged", () => {
      const e12 = this.mainPlaylistLoader_.media();
      if ("playlist-unchanged" === e12.lastExcludeReason_) return;
      this.stuckAtPlaylistEnd_(e12) && (this.excludePlaylist({
        error: {
          message: "Playlist no longer updating.",
          reason: "playlist-unchanged"
        }
      }), this.tech_.trigger("playliststuck"));
    }), this.mainPlaylistLoader_.on("renditiondisabled", () => {
      this.tech_.trigger({
        type: "usage",
        name: "vhs-rendition-disabled"
      });
    }), this.mainPlaylistLoader_.on("renditionenabled", () => {
      this.tech_.trigger({
        type: "usage",
        name: "vhs-rendition-enabled"
      });
    });
  }
  handleUpdatedMediaPlaylist(e12) {
    this.useCueTags_ && this.updateAdCues_(e12), this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.playlist(e12, this.requestOptions_), this.waitingForFastQualityPlaylistReceived_ && this.runFastQualitySwitch_(), this.updateDuration(!e12.endList), this.tech_.paused() || (this.mainSegmentLoader_.load(), this.audioSegmentLoader_ && this.audioSegmentLoader_.load());
  }
  triggerPresenceUsage_(e12, t3) {
    const i4 = e12.mediaGroups || {};
    let s6 = true;
    const n6 = Object.keys(i4.AUDIO);
    for (const r3 in i4.AUDIO) for (const e13 in i4.AUDIO[r3]) {
      i4.AUDIO[r3][e13].uri || (s6 = false);
    }
    s6 && this.tech_.trigger({
      type: "usage",
      name: "vhs-demuxed"
    }), Object.keys(i4.SUBTITLES).length && this.tech_.trigger({
      type: "usage",
      name: "vhs-webvtt"
    }), Ey.Playlist.isAes(t3) && this.tech_.trigger({
      type: "usage",
      name: "vhs-aes"
    }), n6.length && Object.keys(i4.AUDIO[n6[0]]).length > 1 && this.tech_.trigger({
      type: "usage",
      name: "vhs-alternate-audio"
    }), this.useCueTags_ && this.tech_.trigger({
      type: "usage",
      name: "vhs-playlist-cue-tags"
    });
  }
  shouldSwitchToMedia_(e12) {
    const t3 = this.mainPlaylistLoader_.media() || this.mainPlaylistLoader_.pendingMedia_, i4 = this.tech_.currentTime(), s6 = this.bufferLowWaterLine(), n6 = this.bufferHighWaterLine(), r3 = this.tech_.buffered();
    return ky({
      buffered: r3,
      currentTime: i4,
      currentPlaylist: t3,
      nextPlaylist: e12,
      bufferLowWaterLine: s6,
      bufferHighWaterLine: n6,
      duration: this.duration(),
      bufferBasedABR: this.bufferBasedABR,
      log: this.logger_
    });
  }
  setupSegmentLoaderListeners_() {
    this.mainSegmentLoader_.on("bandwidthupdate", () => {
      this.checkABR_("bandwidthupdate"), this.tech_.trigger("bandwidthupdate");
    }), this.mainSegmentLoader_.on("timeout", () => {
      this.bufferBasedABR && this.mainSegmentLoader_.load();
    }), this.bufferBasedABR || this.mainSegmentLoader_.on("progress", () => {
      this.trigger("progress");
    }), this.mainSegmentLoader_.on("error", () => {
      const e13 = this.mainSegmentLoader_.error();
      this.excludePlaylist({
        playlistToExclude: e13.playlist,
        error: e13
      });
    }), this.mainSegmentLoader_.on("appenderror", () => {
      this.error = this.mainSegmentLoader_.error_, this.trigger("error");
    }), this.mainSegmentLoader_.on("syncinfoupdate", () => {
      this.onSyncInfoUpdate_();
    }), this.mainSegmentLoader_.on("timestampoffset", () => {
      this.tech_.trigger({
        type: "usage",
        name: "vhs-timestamp-offset"
      });
    }), this.audioSegmentLoader_.on("syncinfoupdate", () => {
      this.onSyncInfoUpdate_();
    }), this.audioSegmentLoader_.on("appenderror", () => {
      this.error = this.audioSegmentLoader_.error_, this.trigger("error");
    }), this.mainSegmentLoader_.on("ended", () => {
      this.logger_("main segment loader ended"), this.onEndOfStream();
    }), this.mainSegmentLoader_.on("earlyabort", (e13) => {
      this.bufferBasedABR || (this.delegateLoaders_("all", ["abort"]), this.excludePlaylist({
        error: {
          message: "Aborted early because there isn't enough bandwidth to complete the request without rebuffering."
        },
        playlistExclusionDuration: Sy
      }));
    });
    const e12 = () => {
      if (!this.sourceUpdater_.hasCreatedSourceBuffers()) return this.tryToCreateSourceBuffers_();
      const e13 = this.getCodecsOrExclude_();
      e13 && this.sourceUpdater_.addOrChangeSourceBuffers(e13);
    };
    this.mainSegmentLoader_.on("trackinfo", e12), this.audioSegmentLoader_.on("trackinfo", e12), this.mainSegmentLoader_.on("fmp4", () => {
      this.triggeredFmp4Usage || (this.tech_.trigger({
        type: "usage",
        name: "vhs-fmp4"
      }), this.triggeredFmp4Usage = true);
    }), this.audioSegmentLoader_.on("fmp4", () => {
      this.triggeredFmp4Usage || (this.tech_.trigger({
        type: "usage",
        name: "vhs-fmp4"
      }), this.triggeredFmp4Usage = true);
    }), this.audioSegmentLoader_.on("ended", () => {
      this.logger_("audioSegmentLoader ended"), this.onEndOfStream();
    });
  }
  mediaSecondsLoaded_() {
    return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded + this.mainSegmentLoader_.mediaSecondsLoaded);
  }
  load() {
    this.mainSegmentLoader_.load(), this.mediaTypes_.AUDIO.activePlaylistLoader && this.audioSegmentLoader_.load(), this.mediaTypes_.SUBTITLES.activePlaylistLoader && this.subtitleSegmentLoader_.load();
  }
  fastQualityChange_(e12 = this.selectPlaylist()) {
    e12 && e12 === this.mainPlaylistLoader_.media() ? this.logger_("skipping fastQualityChange because new media is same as old") : (this.switchMedia_(e12, "fast-quality"), this.waitingForFastQualityPlaylistReceived_ = true);
  }
  runFastQualitySwitch_() {
    this.waitingForFastQualityPlaylistReceived_ = false, this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.resetEverything(() => {
      this.tech_.setCurrentTime(this.tech_.currentTime());
    });
  }
  play() {
    if (this.setupFirstPlay()) return;
    this.tech_.ended() && this.tech_.setCurrentTime(0), this.hasPlayed_ && this.load();
    const e12 = this.tech_.seekable();
    return this.tech_.duration() === 1 / 0 && this.tech_.currentTime() < e12.start(0) ? this.tech_.setCurrentTime(e12.end(e12.length - 1)) : void 0;
  }
  setupFirstPlay() {
    const e12 = this.mainPlaylistLoader_.media();
    if (!e12 || this.tech_.paused() || this.hasPlayed_) return false;
    if (!e12.endList || e12.start) {
      const t3 = this.seekable();
      if (!t3.length) return false;
      const i4 = t3.end(0);
      let s6 = i4;
      if (e12.start) {
        const n6 = e12.start.timeOffset;
        s6 = n6 < 0 ? Math.max(i4 + n6, t3.start(0)) : Math.min(i4, n6);
      }
      this.trigger("firstplay"), this.tech_.setCurrentTime(s6);
    }
    return this.hasPlayed_ = true, this.load(), true;
  }
  handleSourceOpen_() {
    if (this.tryToCreateSourceBuffers_(), this.tech_.autoplay()) {
      const e12 = this.tech_.play();
      void 0 !== e12 && "function" == typeof e12.then && e12.then(null, (e13) => {
      });
    }
    this.trigger("sourceopen");
  }
  handleSourceEnded_() {
    if (!this.inbandTextTracks_.metadataTrack_) return;
    const e12 = this.inbandTextTracks_.metadataTrack_.cues;
    if (!e12 || !e12.length) return;
    const t3 = this.duration();
    e12[e12.length - 1].endTime = isNaN(t3) || Math.abs(t3) === 1 / 0 ? Number.MAX_VALUE : t3;
  }
  handleDurationChange_() {
    this.tech_.trigger("durationchange");
  }
  onEndOfStream() {
    let e12 = this.mainSegmentLoader_.ended_;
    if (this.mediaTypes_.AUDIO.activePlaylistLoader) {
      const t3 = this.mainSegmentLoader_.getCurrentMediaInfo_();
      e12 = !t3 || t3.hasVideo ? e12 && this.audioSegmentLoader_.ended_ : this.audioSegmentLoader_.ended_;
    }
    e12 && (this.stopABRTimer_(), this.sourceUpdater_.endOfStream());
  }
  stuckAtPlaylistEnd_(e12) {
    if (!this.seekable().length) return false;
    const t3 = this.syncController_.getExpiredTime(e12, this.duration());
    if (null === t3) return false;
    const i4 = Ey.Playlist.playlistEnd(e12, t3), s6 = this.tech_.currentTime(), n6 = this.tech_.buffered();
    if (!n6.length) return i4 - s6 <= gp;
    const r3 = n6.end(n6.length - 1);
    return r3 - s6 <= gp && i4 - r3 <= gp;
  }
  excludePlaylist({
    playlistToExclude: e12 = this.mainPlaylistLoader_.media(),
    error: t3 = {},
    playlistExclusionDuration: i4
  }) {
    if (e12 = e12 || this.mainPlaylistLoader_.media(), i4 = i4 || t3.playlistExclusionDuration || this.playlistExclusionDuration, !e12) return this.error = t3, void ("open" !== this.mediaSource.readyState ? this.trigger("error") : this.sourceUpdater_.endOfStream("network"));
    e12.playlistErrors_++;
    const s6 = this.mainPlaylistLoader_.main.playlists, n6 = s6.filter(qp), r3 = 1 === n6.length && n6[0] === e12;
    if (1 === s6.length && i4 !== 1 / 0) return ip.log.warn(`Problem encountered with playlist ${e12.id}. Trying again since it is the only playlist.`), this.tech_.trigger("retryplaylist"), this.mainPlaylistLoader_.load(r3);
    if (r3) {
      if (this.main().contentSteering) {
        const t5 = this.pathwayAttribute_(e12), i5 = 1e3 * this.contentSteeringController_.steeringManifest.ttl;
        return this.contentSteeringController_.excludePathway(t5), this.excludeThenChangePathway_(), void setTimeout(() => {
          this.contentSteeringController_.addAvailablePathway(t5);
        }, i5);
      }
      let t4 = false;
      s6.forEach((i5) => {
        if (i5 === e12) return;
        const s7 = i5.excludeUntil;
        void 0 !== s7 && s7 !== 1 / 0 && (t4 = true, delete i5.excludeUntil);
      }), t4 && (ip.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."), this.tech_.trigger("retryplaylist"));
    }
    let a6;
    a6 = e12.playlistErrors_ > this.maxPlaylistRetries ? 1 / 0 : Date.now() + 1e3 * i4, e12.excludeUntil = a6, t3.reason && (e12.lastExcludeReason_ = t3.reason), this.tech_.trigger("excludeplaylist"), this.tech_.trigger({
      type: "usage",
      name: "vhs-rendition-excluded"
    });
    const o4 = this.selectPlaylist();
    if (!o4) return this.error = "Playback cannot continue. No available working or supported playlists.", void this.trigger("error");
    const l5 = t3.internal ? this.logger_ : ip.log.warn, h = t3.message ? " " + t3.message : "";
    l5(`${t3.internal ? "Internal problem" : "Problem"} encountered with playlist ${e12.id}.${h} Switching to playlist ${o4.id}.`), o4.attributes.AUDIO !== e12.attributes.AUDIO && this.delegateLoaders_("audio", ["abort", "pause"]), o4.attributes.SUBTITLES !== e12.attributes.SUBTITLES && this.delegateLoaders_("subtitle", ["abort", "pause"]), this.delegateLoaders_("main", ["abort", "pause"]);
    const d4 = o4.targetDuration / 2 * 1e3 || 5e3, u4 = "number" == typeof o4.lastRequest && Date.now() - o4.lastRequest <= d4;
    return this.switchMedia_(o4, "exclude", r3 || u4);
  }
  pauseLoading() {
    this.delegateLoaders_("all", ["abort", "pause"]), this.stopABRTimer_();
  }
  delegateLoaders_(e12, t3) {
    const i4 = [], s6 = "all" === e12;
    (s6 || "main" === e12) && i4.push(this.mainPlaylistLoader_);
    const n6 = [];
    (s6 || "audio" === e12) && n6.push("AUDIO"), (s6 || "subtitle" === e12) && (n6.push("CLOSED-CAPTIONS"), n6.push("SUBTITLES")), n6.forEach((e13) => {
      const t4 = this.mediaTypes_[e13] && this.mediaTypes_[e13].activePlaylistLoader;
      t4 && i4.push(t4);
    }), ["main", "audio", "subtitle"].forEach((t4) => {
      const s7 = this[`${t4}SegmentLoader_`];
      !s7 || e12 !== t4 && "all" !== e12 || i4.push(s7);
    }), i4.forEach((e13) => t3.forEach((t4) => {
      "function" == typeof e13[t4] && e13[t4]();
    }));
  }
  setCurrentTime(e12) {
    const t3 = yp(this.tech_.buffered(), e12);
    return this.mainPlaylistLoader_ && this.mainPlaylistLoader_.media() && this.mainPlaylistLoader_.media().segments ? t3 && t3.length ? e12 : (this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.resetEverything(), this.mediaTypes_.AUDIO.activePlaylistLoader && (this.audioSegmentLoader_.pause(), this.audioSegmentLoader_.resetEverything()), this.mediaTypes_.SUBTITLES.activePlaylistLoader && (this.subtitleSegmentLoader_.pause(), this.subtitleSegmentLoader_.resetEverything()), void this.load()) : 0;
  }
  duration() {
    if (!this.mainPlaylistLoader_) return 0;
    const e12 = this.mainPlaylistLoader_.media();
    return e12 ? e12.endList ? this.mediaSource ? this.mediaSource.duration : Ey.Playlist.duration(e12) : 1 / 0 : 0;
  }
  seekable() {
    return this.seekable_;
  }
  onSyncInfoUpdate_() {
    let e12;
    if (!this.mainPlaylistLoader_) return;
    let t3 = this.mainPlaylistLoader_.media();
    if (!t3) return;
    let i4 = this.syncController_.getExpiredTime(t3, this.duration());
    if (null === i4) return;
    const s6 = this.mainPlaylistLoader_.main, n6 = Ey.Playlist.seekable(t3, i4, Ey.Playlist.liveEdgeDelay(s6, t3));
    if (0 === n6.length) return;
    if (this.mediaTypes_.AUDIO.activePlaylistLoader) {
      if (t3 = this.mediaTypes_.AUDIO.activePlaylistLoader.media(), i4 = this.syncController_.getExpiredTime(t3, this.duration()), null === i4) return;
      if (e12 = Ey.Playlist.seekable(t3, i4, Ey.Playlist.liveEdgeDelay(s6, t3)), 0 === e12.length) return;
    }
    let r3, a6;
    this.seekable_ && this.seekable_.length && (r3 = this.seekable_.end(0), a6 = this.seekable_.start(0)), e12 ? e12.start(0) > n6.end(0) || n6.start(0) > e12.end(0) ? this.seekable_ = n6 : this.seekable_ = cp([[e12.start(0) > n6.start(0) ? e12.start(0) : n6.start(0), e12.end(0) < n6.end(0) ? e12.end(0) : n6.end(0)]]) : this.seekable_ = n6, this.seekable_ && this.seekable_.length && this.seekable_.end(0) === r3 && this.seekable_.start(0) === a6 || (this.logger_(`seekable updated [${Tp(this.seekable_)}]`), this.tech_.trigger("seekablechanged"));
  }
  updateDuration(e12) {
    if (this.updateDuration_ && (this.mediaSource.removeEventListener("sourceopen", this.updateDuration_), this.updateDuration_ = null), "open" !== this.mediaSource.readyState) return this.updateDuration_ = this.updateDuration.bind(this, e12), void this.mediaSource.addEventListener("sourceopen", this.updateDuration_);
    if (e12) {
      const e13 = this.seekable();
      if (!e13.length) return;
      return void ((isNaN(this.mediaSource.duration) || this.mediaSource.duration < e13.end(e13.length - 1)) && this.sourceUpdater_.setDuration(e13.end(e13.length - 1)));
    }
    const t3 = this.tech_.buffered();
    let i4 = Ey.Playlist.duration(this.mainPlaylistLoader_.media());
    t3.length > 0 && (i4 = Math.max(i4, t3.end(t3.length - 1))), this.mediaSource.duration !== i4 && this.sourceUpdater_.setDuration(i4);
  }
  dispose() {
    this.trigger("dispose"), this.decrypter_.terminate(), this.mainPlaylistLoader_.dispose(), this.mainSegmentLoader_.dispose(), this.contentSteeringController_.dispose(), this.keyStatusMap_.clear(), this.loadOnPlay_ && this.tech_.off("play", this.loadOnPlay_), ["AUDIO", "SUBTITLES"].forEach((e12) => {
      const t3 = this.mediaTypes_[e12].groups;
      for (const i4 in t3) t3[i4].forEach((e13) => {
        e13.playlistLoader && e13.playlistLoader.dispose();
      });
    }), this.audioSegmentLoader_.dispose(), this.subtitleSegmentLoader_.dispose(), this.sourceUpdater_.dispose(), this.timelineChangeController_.dispose(), this.stopABRTimer_(), this.updateDuration_ && this.mediaSource.removeEventListener("sourceopen", this.updateDuration_), this.mediaSource.removeEventListener("durationchange", this.handleDurationChange_), this.mediaSource.removeEventListener("sourceopen", this.handleSourceOpen_), this.mediaSource.removeEventListener("sourceended", this.handleSourceEnded_), this.off();
  }
  main() {
    return this.mainPlaylistLoader_.main;
  }
  media() {
    return this.mainPlaylistLoader_.media() || this.initialMedia_;
  }
  areMediaTypesKnown_() {
    const e12 = !!this.mediaTypes_.AUDIO.activePlaylistLoader, t3 = !!this.mainSegmentLoader_.getCurrentMediaInfo_(), i4 = !e12 || !!this.audioSegmentLoader_.getCurrentMediaInfo_();
    return !(!t3 || !i4);
  }
  getCodecsOrExclude_() {
    const e12 = {
      main: this.mainSegmentLoader_.getCurrentMediaInfo_() || {},
      audio: this.audioSegmentLoader_.getCurrentMediaInfo_() || {}
    }, t3 = this.mainSegmentLoader_.getPendingSegmentPlaylist() || this.media();
    e12.video = e12.main;
    const i4 = qg(this.main(), t3), s6 = {}, n6 = !!this.mediaTypes_.AUDIO.activePlaylistLoader;
    if (e12.main.hasVideo && (s6.video = i4.video || e12.main.videoCodec || ci), e12.main.isMuxed && (s6.video += `,${i4.audio || e12.main.audioCodec || ui}`), (e12.main.hasAudio && !e12.main.isMuxed || e12.audio.hasAudio || n6) && (s6.audio = i4.audio || e12.main.audioCodec || e12.audio.audioCodec || ui, e12.audio.isFmp4 = e12.main.hasAudio && !e12.main.isMuxed ? e12.main.isFmp4 : e12.audio.isFmp4), !s6.audio && !s6.video) return void this.excludePlaylist({
      playlistToExclude: t3,
      error: {
        message: "Could not determine codecs for playlist."
      },
      playlistExclusionDuration: 1 / 0
    });
    const r3 = (e13, t4) => e13 ? hi(t4) : di(t4), a6 = {};
    let o4;
    if (["video", "audio"].forEach(function(t4) {
      if (s6.hasOwnProperty(t4) && !r3(e12[t4].isFmp4, s6[t4])) {
        const i5 = e12[t4].isFmp4 ? "browser" : "muxer";
        a6[i5] = a6[i5] || [], a6[i5].push(s6[t4]), "audio" === t4 && (o4 = i5);
      }
    }), n6 && o4 && t3.attributes.AUDIO) {
      const e13 = t3.attributes.AUDIO;
      this.main().playlists.forEach((i5) => {
        (i5.attributes && i5.attributes.AUDIO) === e13 && i5 !== t3 && (i5.excludeUntil = 1 / 0);
      }), this.logger_(`excluding audio group ${e13} as ${o4} does not support codec(s): "${s6.audio}"`);
    }
    if (!Object.keys(a6).length) {
      if (this.sourceUpdater_.hasCreatedSourceBuffers() && !this.sourceUpdater_.canChangeType()) {
        const e13 = [];
        if (["video", "audio"].forEach((t4) => {
          const i5 = (ni(this.sourceUpdater_.codecs[t4] || "")[0] || {}).type, n7 = (ni(s6[t4] || "")[0] || {}).type;
          i5 && n7 && i5.toLowerCase() !== n7.toLowerCase() && e13.push(`"${this.sourceUpdater_.codecs[t4]}" -> "${s6[t4]}"`);
        }), e13.length) return void this.excludePlaylist({
          playlistToExclude: t3,
          error: {
            message: `Codec switching not supported: ${e13.join(", ")}.`,
            internal: true
          },
          playlistExclusionDuration: 1 / 0
        });
      }
      return s6;
    }
    {
      const e13 = Object.keys(a6).reduce((e14, t4) => (e14 && (e14 += ", "), e14 += `${t4} does not support codec(s): "${a6[t4].join(",")}"`), "") + ".";
      this.excludePlaylist({
        playlistToExclude: t3,
        error: {
          internal: true,
          message: e13
        },
        playlistExclusionDuration: 1 / 0
      });
    }
  }
  tryToCreateSourceBuffers_() {
    if ("open" !== this.mediaSource.readyState || this.sourceUpdater_.hasCreatedSourceBuffers()) return;
    if (!this.areMediaTypesKnown_()) return;
    const e12 = this.getCodecsOrExclude_();
    if (!e12) return;
    this.sourceUpdater_.createSourceBuffers(e12);
    const t3 = [e12.video, e12.audio].filter(Boolean).join(",");
    this.excludeIncompatibleVariants_(t3);
  }
  excludeUnsupportedVariants_() {
    const e12 = this.main().playlists, t3 = [];
    Object.keys(e12).forEach((i4) => {
      const s6 = e12[i4];
      if (-1 !== t3.indexOf(s6.id)) return;
      t3.push(s6.id);
      const n6 = qg(this.main, s6), r3 = [];
      !n6.audio || di(n6.audio) || hi(n6.audio) || r3.push(`audio codec ${n6.audio}`), !n6.video || di(n6.video) || hi(n6.video) || r3.push(`video codec ${n6.video}`), n6.text && "stpp.ttml.im1t" === n6.text && r3.push(`text codec ${n6.text}`), r3.length && (s6.excludeUntil = 1 / 0, this.logger_(`excluding ${s6.id} for unsupported: ${r3.join(", ")}`));
    });
  }
  excludeIncompatibleVariants_(e12) {
    const t3 = [], i4 = this.main().playlists, s6 = Bg(ni(e12)), n6 = Fg(s6), r3 = s6.video && ni(s6.video)[0] || null, a6 = s6.audio && ni(s6.audio)[0] || null;
    Object.keys(i4).forEach((e13) => {
      const s7 = i4[e13];
      if (-1 !== t3.indexOf(s7.id) || s7.excludeUntil === 1 / 0) return;
      t3.push(s7.id);
      const o4 = [], l5 = qg(this.mainPlaylistLoader_.main, s7), h = Fg(l5);
      if (l5.audio || l5.video) {
        if (h !== n6 && o4.push(`codec count "${h}" !== "${n6}"`), !this.sourceUpdater_.canChangeType()) {
          const e14 = l5.video && ni(l5.video)[0] || null, t4 = l5.audio && ni(l5.audio)[0] || null;
          e14 && r3 && e14.type.toLowerCase() !== r3.type.toLowerCase() && o4.push(`video codec "${e14.type}" !== "${r3.type}"`), t4 && a6 && t4.type.toLowerCase() !== a6.type.toLowerCase() && o4.push(`audio codec "${t4.type}" !== "${a6.type}"`);
        }
        o4.length && (s7.excludeUntil = 1 / 0, this.logger_(`excluding ${s7.id}: ${o4.join(" && ")}`));
      }
    });
  }
  updateAdCues_(e12) {
    let t3 = 0;
    const i4 = this.seekable();
    i4.length && (t3 = i4.start(0)), Kf(e12, this.cueTagsTrack_, t3);
  }
  goalBufferLength() {
    const e12 = this.tech_.currentTime(), t3 = Jm.GOAL_BUFFER_LENGTH, i4 = Jm.GOAL_BUFFER_LENGTH_RATE, s6 = Math.max(t3, Jm.MAX_GOAL_BUFFER_LENGTH);
    return Math.min(t3 + e12 * i4, s6);
  }
  bufferLowWaterLine() {
    const e12 = this.tech_.currentTime(), t3 = Jm.BUFFER_LOW_WATER_LINE, i4 = Jm.BUFFER_LOW_WATER_LINE_RATE, s6 = Math.max(t3, Jm.MAX_BUFFER_LOW_WATER_LINE), n6 = Math.max(t3, Jm.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);
    return Math.min(t3 + e12 * i4, this.bufferBasedABR ? n6 : s6);
  }
  bufferHighWaterLine() {
    return Jm.BUFFER_HIGH_WATER_LINE;
  }
  addDateRangesToTextTrack_(e12) {
    lf(this.inbandTextTracks_, "com.apple.streaming", this.tech_), of({
      inbandTextTracks: this.inbandTextTracks_,
      dateRanges: e12
    });
  }
  addMetadataToTextTrack(e12, t3, i4) {
    const s6 = this.sourceUpdater_.videoBuffer ? this.sourceUpdater_.videoTimestampOffset() : this.sourceUpdater_.audioTimestampOffset();
    lf(this.inbandTextTracks_, e12, this.tech_), nf({
      inbandTextTracks: this.inbandTextTracks_,
      metadataArray: t3,
      timestampOffset: s6,
      videoDuration: i4
    });
  }
  pathwayAttribute_(e12) {
    return e12.attributes["PATHWAY-ID"] || e12.attributes.serviceLocation;
  }
  initContentSteeringController_() {
    const e12 = this.main();
    if (e12.contentSteering) {
      for (const t3 of e12.playlists) this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t3));
      this.contentSteeringController_.assignTagProperties(e12.uri, e12.contentSteering), this.contentSteeringController_.queryBeforeStart ? this.contentSteeringController_.requestSteeringManifest(true) : this.tech_.one("canplay", () => {
        this.contentSteeringController_.requestSteeringManifest();
      });
    }
  }
  resetContentSteeringController_() {
    this.contentSteeringController_.clearAvailablePathways(), this.contentSteeringController_.dispose(), this.initContentSteeringController_();
  }
  attachContentSteeringListeners_() {
    this.contentSteeringController_.on("content-steering", this.excludeThenChangePathway_.bind(this)), "dash" === this.sourceType_ && this.mainPlaylistLoader_.on("loadedplaylist", () => {
      const e12 = this.main();
      (this.contentSteeringController_.didDASHTagChange(e12.uri, e12.contentSteering) || (() => {
        const t3 = this.contentSteeringController_.getAvailablePathways(), i4 = [];
        for (const s6 of e12.playlists) {
          const e13 = s6.attributes.serviceLocation;
          if (e13 && (i4.push(e13), !t3.has(e13))) return true;
        }
        return !(i4.length || !t3.size);
      })()) && this.resetContentSteeringController_();
    });
  }
  excludeThenChangePathway_() {
    const e12 = this.contentSteeringController_.getPathway();
    if (!e12) return;
    this.handlePathwayClones_();
    const t3 = this.main().playlists, i4 = /* @__PURE__ */ new Set();
    let s6 = false;
    Object.keys(t3).forEach((n6) => {
      const r3 = t3[n6], a6 = this.pathwayAttribute_(r3), o4 = a6 && e12 !== a6;
      r3.excludeUntil === 1 / 0 && "content-steering" === r3.lastExcludeReason_ && !o4 && (delete r3.excludeUntil, delete r3.lastExcludeReason_, s6 = true);
      const l5 = !r3.excludeUntil && r3.excludeUntil !== 1 / 0;
      !i4.has(r3.id) && o4 && l5 && (i4.add(r3.id), r3.excludeUntil = 1 / 0, r3.lastExcludeReason_ = "content-steering", this.logger_(`excluding ${r3.id} for ${r3.lastExcludeReason_}`));
    }), "DASH" === this.contentSteeringController_.manifestType_ && Object.keys(this.mediaTypes_).forEach((t4) => {
      const i5 = this.mediaTypes_[t4];
      if (i5.activePlaylistLoader) {
        const t5 = i5.activePlaylistLoader.media_;
        t5 && t5.attributes.serviceLocation !== e12 && (s6 = true);
      }
    }), s6 && this.changeSegmentPathway_();
  }
  handlePathwayClones_() {
    const e12 = this.main().playlists, t3 = this.contentSteeringController_.currentPathwayClones, i4 = this.contentSteeringController_.nextPathwayClones;
    if (t3 && t3.size || i4 && i4.size) {
      for (const [e13, s6] of t3.entries()) {
        i4.get(e13) || (this.mainPlaylistLoader_.updateOrDeleteClone(s6), this.contentSteeringController_.excludePathway(e13));
      }
      for (const [s6, n6] of i4.entries()) {
        const i5 = t3.get(s6);
        if (i5) this.equalPathwayClones_(i5, n6) || (this.mainPlaylistLoader_.updateOrDeleteClone(n6, true), this.contentSteeringController_.addAvailablePathway(s6));
        else {
          e12.filter((e13) => e13.attributes["PATHWAY-ID"] === n6["BASE-ID"]).forEach((e13) => {
            this.mainPlaylistLoader_.addClonePathway(n6, e13);
          }), this.contentSteeringController_.addAvailablePathway(s6);
        }
      }
      this.contentSteeringController_.currentPathwayClones = new Map(JSON.parse(JSON.stringify([...i4])));
    }
  }
  equalPathwayClones_(e12, t3) {
    if (e12["BASE-ID"] !== t3["BASE-ID"] || e12.ID !== t3.ID || e12["URI-REPLACEMENT"].HOST !== t3["URI-REPLACEMENT"].HOST) return false;
    const i4 = e12["URI-REPLACEMENT"].PARAMS, s6 = t3["URI-REPLACEMENT"].PARAMS;
    for (const n6 in i4) if (i4[n6] !== s6[n6]) return false;
    for (const n6 in s6) if (i4[n6] !== s6[n6]) return false;
    return true;
  }
  changeSegmentPathway_() {
    const e12 = this.selectPlaylist();
    this.pauseLoading(), "DASH" === this.contentSteeringController_.manifestType_ && this.switchMediaForDASHContentSteering_(), this.switchMedia_(e12, "content-steering");
  }
  excludeNonUsablePlaylistsByKeyId_() {
    if (!this.mainPlaylistLoader_ || !this.mainPlaylistLoader_.main) return;
    let e12 = 0;
    const t3 = "non-usable";
    this.mainPlaylistLoader_.main.playlists.forEach((i4) => {
      const s6 = this.mainPlaylistLoader_.getKeyIdSet(i4);
      s6 && s6.size && s6.forEach((s7) => {
        const n6 = "usable", r3 = this.keyStatusMap_.has(s7) && this.keyStatusMap_.get(s7) === n6, a6 = i4.lastExcludeReason_ === t3 && i4.excludeUntil === 1 / 0;
        r3 ? r3 && a6 && (delete i4.excludeUntil, delete i4.lastExcludeReason_, this.logger_(`enabling playlist ${i4.id} because key ID ${s7} is ${n6}`)) : (i4.excludeUntil !== 1 / 0 && i4.lastExcludeReason_ !== t3 && (i4.excludeUntil = 1 / 0, i4.lastExcludeReason_ = t3, this.logger_(`excluding playlist ${i4.id} because the key ID ${s7} doesn't exist in the keyStatusMap or is not ${n6}`)), e12++);
      });
    }), e12 >= this.mainPlaylistLoader_.main.playlists.length && this.mainPlaylistLoader_.main.playlists.forEach((e13) => {
      const i4 = e13 && e13.attributes && e13.attributes.RESOLUTION && e13.attributes.RESOLUTION.height < 720, s6 = e13.excludeUntil === 1 / 0 && e13.lastExcludeReason_ === t3;
      i4 && s6 && (delete e13.excludeUntil, ip.log.warn(`enabling non-HD playlist ${e13.id} because all playlists were excluded due to ${t3} key IDs`));
    });
  }
  addKeyStatus_(e12, t3) {
    const i4 = ("string" == typeof e12 ? e12 : Vf(e12)).slice(0, 32).toLowerCase();
    this.logger_(`KeyStatus '${t3}' with key ID ${i4} added to the keyStatusMap`), this.keyStatusMap_.set(i4, t3);
  }
  updatePlaylistByKeyStatus(e12, t3) {
    this.addKeyStatus_(e12, t3), this.waitingForFastQualityPlaylistReceived_ || this.excludeNonUsableThenChangePlaylist_(), this.mainPlaylistLoader_.off("loadedplaylist", this.excludeNonUsableThenChangePlaylist_.bind(this)), this.mainPlaylistLoader_.on("loadedplaylist", this.excludeNonUsableThenChangePlaylist_.bind(this));
  }
  excludeNonUsableThenChangePlaylist_() {
    this.excludeNonUsablePlaylistsByKeyId_(), this.fastQualityChange_();
  }
};
var Iy = (e12, t3, i4) => (s6) => {
  const n6 = e12.main.playlists[t3], r3 = Fp(n6), a6 = qp(n6);
  return void 0 === s6 ? a6 : (s6 ? delete n6.disabled : n6.disabled = true, s6 === a6 || r3 || (i4(n6), s6 ? e12.trigger("renditionenabled") : e12.trigger("renditiondisabled")), s6);
};
var Ay = class {
  constructor(e12, t3, i4) {
    const {
      playlistController_: s6
    } = e12, n6 = s6.fastQualityChange_.bind(s6);
    if (t3.attributes) {
      const e13 = t3.attributes.RESOLUTION;
      this.width = e13 && e13.width, this.height = e13 && e13.height, this.bandwidth = t3.attributes.BANDWIDTH, this.frameRate = t3.attributes["FRAME-RATE"];
    }
    this.codecs = qg(s6.main(), t3), this.playlist = t3, this.id = i4, this.enabled = Iy(e12.playlists, t3.id, n6);
  }
};
var Dy = function(e12) {
  e12.representations = () => {
    const t3 = e12.playlistController_.main(), i4 = Wp(t3) ? e12.playlistController_.getAudioTrackPlaylists_() : t3.playlists;
    return i4 ? i4.filter((e13) => !Fp(e13)).map((t4, i5) => new Ay(e12, t4, t4.id)) : [];
  };
};
var Py = ["seeking", "seeked", "pause", "playing", "error"];
var Ly = class {
  constructor(e12) {
    this.playlistController_ = e12.playlistController, this.tech_ = e12.tech, this.seekable = e12.seekable, this.allowSeeksWithinUnsafeLiveWindow = e12.allowSeeksWithinUnsafeLiveWindow, this.liveRangeSafeTimeDelta = e12.liveRangeSafeTimeDelta, this.media = e12.media, this.consecutiveUpdates = 0, this.lastRecordedTime = null, this.checkCurrentTimeTimeout_ = null, this.logger_ = dp("PlaybackWatcher"), this.logger_("initialize");
    const t3 = () => this.monitorCurrentTime_(), i4 = () => this.monitorCurrentTime_(), s6 = () => this.techWaiting_(), n6 = () => this.resetTimeUpdate_(), r3 = this.playlistController_, a6 = ["main", "subtitle", "audio"], o4 = {};
    a6.forEach((e13) => {
      o4[e13] = {
        reset: () => this.resetSegmentDownloads_(e13),
        updateend: () => this.checkSegmentDownloads_(e13)
      }, r3[`${e13}SegmentLoader_`].on("appendsdone", o4[e13].updateend), r3[`${e13}SegmentLoader_`].on("playlistupdate", o4[e13].reset), this.tech_.on(["seeked", "seeking"], o4[e13].reset);
    });
    const l5 = (e13) => {
      ["main", "audio"].forEach((t4) => {
        r3[`${t4}SegmentLoader_`][e13]("appended", this.seekingAppendCheck_);
      });
    };
    this.seekingAppendCheck_ = () => {
      this.fixesBadSeeks_() && (this.consecutiveUpdates = 0, this.lastRecordedTime = this.tech_.currentTime(), l5("off"));
    }, this.clearSeekingAppendCheck_ = () => l5("off"), this.watchForBadSeeking_ = () => {
      this.clearSeekingAppendCheck_(), l5("on");
    }, this.tech_.on("seeked", this.clearSeekingAppendCheck_), this.tech_.on("seeking", this.watchForBadSeeking_), this.tech_.on("waiting", s6), this.tech_.on(Py, n6), this.tech_.on("canplay", i4), this.tech_.one("play", t3), this.dispose = () => {
      this.clearSeekingAppendCheck_(), this.logger_("dispose"), this.tech_.off("waiting", s6), this.tech_.off(Py, n6), this.tech_.off("canplay", i4), this.tech_.off("play", t3), this.tech_.off("seeking", this.watchForBadSeeking_), this.tech_.off("seeked", this.clearSeekingAppendCheck_), a6.forEach((e13) => {
        r3[`${e13}SegmentLoader_`].off("appendsdone", o4[e13].updateend), r3[`${e13}SegmentLoader_`].off("playlistupdate", o4[e13].reset), this.tech_.off(["seeked", "seeking"], o4[e13].reset);
      }), this.checkCurrentTimeTimeout_ && g3.clearTimeout(this.checkCurrentTimeTimeout_), this.resetTimeUpdate_();
    };
  }
  monitorCurrentTime_() {
    this.checkCurrentTime_(), this.checkCurrentTimeTimeout_ && g3.clearTimeout(this.checkCurrentTimeTimeout_), this.checkCurrentTimeTimeout_ = g3.setTimeout(this.monitorCurrentTime_.bind(this), 250);
  }
  resetSegmentDownloads_(e12) {
    const t3 = this.playlistController_[`${e12}SegmentLoader_`];
    this[`${e12}StalledDownloads_`] > 0 && this.logger_(`resetting possible stalled download count for ${e12} loader`), this[`${e12}StalledDownloads_`] = 0, this[`${e12}Buffered_`] = t3.buffered_();
  }
  checkSegmentDownloads_(e12) {
    const t3 = this.playlistController_, i4 = t3[`${e12}SegmentLoader_`], s6 = i4.buffered_(), n6 = wp(this[`${e12}Buffered_`], s6);
    this[`${e12}Buffered_`] = s6, n6 ? this.resetSegmentDownloads_(e12) : (this[`${e12}StalledDownloads_`]++, this.logger_(`found #${this[`${e12}StalledDownloads_`]} ${e12} appends that did not increase buffer (possible stalled download)`, {
      playlistId: i4.playlist_ && i4.playlist_.id,
      buffered: Ep(s6)
    }), this[`${e12}StalledDownloads_`] < 10 || (this.logger_(`${e12} loader stalled download exclusion`), this.resetSegmentDownloads_(e12), this.tech_.trigger({
      type: "usage",
      name: `vhs-${e12}-download-exclusion`
    }), "subtitle" !== e12 && t3.excludePlaylist({
      error: {
        message: `Excessive ${e12} segment downloading detected.`
      },
      playlistExclusionDuration: 1 / 0
    })));
  }
  checkCurrentTime_() {
    if (this.tech_.paused() || this.tech_.seeking()) return;
    const e12 = this.tech_.currentTime(), t3 = this.tech_.buffered();
    if (this.lastRecordedTime === e12 && (!t3.length || e12 + gp >= t3.end(t3.length - 1))) return this.techWaiting_();
    this.consecutiveUpdates >= 5 && e12 === this.lastRecordedTime ? (this.consecutiveUpdates++, this.waiting_()) : e12 === this.lastRecordedTime ? this.consecutiveUpdates++ : (this.consecutiveUpdates = 0, this.lastRecordedTime = e12);
  }
  resetTimeUpdate_() {
    this.consecutiveUpdates = 0;
  }
  fixesBadSeeks_() {
    if (!this.tech_.seeking()) return false;
    const e12 = this.seekable(), t3 = this.tech_.currentTime();
    let i4;
    if (this.afterSeekableWindow_(e12, t3, this.media(), this.allowSeeksWithinUnsafeLiveWindow)) {
      i4 = e12.end(e12.length - 1);
    }
    if (this.beforeSeekableWindow_(e12, t3)) {
      const t4 = e12.start(0);
      i4 = t4 + (t4 === e12.end(0) ? 0 : gp);
    }
    if (void 0 !== i4) return this.logger_(`Trying to seek outside of seekable at time ${t3} with seekable range ${Tp(e12)}. Seeking to ${i4}.`), this.tech_.setCurrentTime(i4), true;
    const s6 = this.playlistController_.sourceUpdater_, n6 = this.tech_.buffered(), r3 = s6.audioBuffer ? s6.audioBuffered() : null, a6 = s6.videoBuffer ? s6.videoBuffered() : null, o4 = this.media(), l5 = o4.partTargetDuration ? o4.partTargetDuration : 2 * (o4.targetDuration - mp), h = [r3, a6];
    for (let u4 = 0; u4 < h.length; u4++) {
      if (!h[u4]) continue;
      if (kp(h[u4], t3) < l5) return false;
    }
    const d4 = _p(n6, t3);
    return 0 !== d4.length && (i4 = d4.start(0) + gp, this.logger_(`Buffered region starts (${d4.start(0)})  just beyond seek point (${t3}). Seeking to ${i4}.`), this.tech_.setCurrentTime(i4), true);
  }
  waiting_() {
    if (this.techWaiting_()) return;
    const e12 = this.tech_.currentTime(), t3 = this.tech_.buffered(), i4 = yp(t3, e12);
    return i4.length && e12 + 3 <= i4.end(0) ? (this.resetTimeUpdate_(), this.tech_.setCurrentTime(e12), this.logger_(`Stopped at ${e12} while inside a buffered region [${i4.start(0)} -> ${i4.end(0)}]. Attempting to resume playback by seeking to the current time.`), void this.tech_.trigger({
      type: "usage",
      name: "vhs-unknown-waiting"
    })) : void 0;
  }
  techWaiting_() {
    const e12 = this.seekable(), t3 = this.tech_.currentTime();
    if (this.tech_.seeking()) return true;
    if (this.beforeSeekableWindow_(e12, t3)) {
      const i5 = e12.end(e12.length - 1);
      return this.logger_(`Fell out of live window at time ${t3}. Seeking to live point (seekable end) ${i5}`), this.resetTimeUpdate_(), this.tech_.setCurrentTime(i5), this.tech_.trigger({
        type: "usage",
        name: "vhs-live-resync"
      }), true;
    }
    const i4 = this.tech_.vhs.playlistController_.sourceUpdater_, s6 = this.tech_.buffered();
    if (this.videoUnderflow_({
      audioBuffered: i4.audioBuffered(),
      videoBuffered: i4.videoBuffered(),
      currentTime: t3
    })) return this.resetTimeUpdate_(), this.tech_.setCurrentTime(t3), this.tech_.trigger({
      type: "usage",
      name: "vhs-video-underflow"
    }), true;
    const n6 = _p(s6, t3);
    return n6.length > 0 && (this.logger_(`Stopped at ${t3} and seeking to ${n6.start(0)}`), this.resetTimeUpdate_(), this.skipTheGap_(t3), true);
  }
  afterSeekableWindow_(e12, t3, i4, s6 = false) {
    if (!e12.length) return false;
    let n6 = e12.end(e12.length - 1) + gp;
    const r3 = !i4.endList, a6 = "number" == typeof i4.partTargetDuration;
    return r3 && (a6 || s6) && (n6 = e12.end(e12.length - 1) + 3 * i4.targetDuration), t3 > n6;
  }
  beforeSeekableWindow_(e12, t3) {
    return !!(e12.length && e12.start(0) > 0 && t3 < e12.start(0) - this.liveRangeSafeTimeDelta);
  }
  videoUnderflow_({
    videoBuffered: e12,
    audioBuffered: t3,
    currentTime: i4
  }) {
    if (!e12) return;
    let s6;
    if (e12.length && t3.length) {
      const n6 = yp(e12, i4 - 3), r3 = yp(e12, i4), a6 = yp(t3, i4);
      a6.length && !r3.length && n6.length && (s6 = {
        start: n6.end(0),
        end: a6.end(0)
      });
    } else {
      _p(e12, i4).length || (s6 = this.gapFromVideoUnderflow_(e12, i4));
    }
    return !!s6 && (this.logger_(`Encountered a gap in video from ${s6.start} to ${s6.end}. Seeking to current time ${i4}`), true);
  }
  skipTheGap_(e12) {
    const t3 = this.tech_.buffered(), i4 = this.tech_.currentTime(), s6 = _p(t3, i4);
    this.resetTimeUpdate_(), 0 !== s6.length && i4 === e12 && (this.logger_("skipTheGap_:", "currentTime:", i4, "scheduled currentTime:", e12, "nextRange start:", s6.start(0)), this.tech_.setCurrentTime(s6.start(0) + mp), this.tech_.trigger({
      type: "usage",
      name: "vhs-gap-skip"
    }));
  }
  gapFromVideoUnderflow_(e12, t3) {
    const i4 = vp(e12);
    for (let s6 = 0; s6 < i4.length; s6++) {
      const e13 = i4.start(s6), n6 = i4.end(s6);
      if (t3 - e13 < 4 && t3 - e13 > 2) return {
        start: e13,
        end: n6
      };
    }
    return null;
  }
};
var Oy = {
  errorInterval: 30,
  getSource(e12) {
    return e12(this.tech({
      IWillNotUseThisInPlugins: true
    }).currentSource_ || this.currentSource());
  }
};
var Ny = function(e12, t3) {
  let i4 = 0, s6 = 0;
  const n6 = up(Oy, t3);
  e12.ready(() => {
    e12.trigger({
      type: "usage",
      name: "vhs-error-reload-initialized"
    });
  });
  const r3 = function() {
    s6 && e12.currentTime(s6);
  }, a6 = function(t4) {
    null != t4 && (s6 = e12.duration() !== 1 / 0 && e12.currentTime() || 0, e12.one("loadedmetadata", r3), e12.src(t4), e12.trigger({
      type: "usage",
      name: "vhs-error-reload"
    }), e12.play());
  }, o4 = function() {
    if (Date.now() - i4 < 1e3 * n6.errorInterval) e12.trigger({
      type: "usage",
      name: "vhs-error-reload-canceled"
    });
    else {
      if (n6.getSource && "function" == typeof n6.getSource) return i4 = Date.now(), n6.getSource.call(e12, a6);
      ip.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");
    }
  }, l5 = function() {
    e12.off("loadedmetadata", r3), e12.off("error", o4), e12.off("dispose", l5);
  }, h = function(t4) {
    l5(), Ny(e12, t4);
  };
  e12.on("error", o4), e12.on("dispose", l5), e12.reloadSourceOnError = h;
};
var Ry = function(e12) {
  Ny(this, e12);
};
var My = "3.12.1";
var Uy = "7.0.3";
var By = "1.3.0";
var Fy = "7.1.0";
var qy = "4.0.1";
var jy = {
  PlaylistLoader: mm,
  Playlist: Gp,
  utils: Dm,
  STANDARD_PLAYLIST_SELECTOR: Xg,
  INITIAL_PLAYLIST_SELECTOR: Qg,
  lastBandwidthSelector: Xg,
  movingAverageBandwidthSelector: Kg,
  comparePlaylistBandwidth: zg,
  comparePlaylistResolution: Wg,
  xhr: _m()
};
Object.keys(Jm).forEach((e12) => {
  Object.defineProperty(jy, e12, {
    get: () => (ip.log.warn(`using Vhs.${e12} is UNSAFE be sure you know what you are doing`), Jm[e12]),
    set(t3) {
      ip.log.warn(`using Vhs.${e12} is UNSAFE be sure you know what you are doing`), "number" != typeof t3 || t3 < 0 ? ip.log.warn(`value of Vhs.${e12} must be greater than or equal to 0`) : Jm[e12] = t3;
    }
  });
});
var $y = "videojs-vhs";
var Hy = function(e12, t3) {
  const i4 = t3.media();
  let s6 = -1;
  for (let n6 = 0; n6 < e12.length; n6++) if (e12[n6].id === i4.id) {
    s6 = n6;
    break;
  }
  e12.selectedIndex_ = s6, e12.trigger({
    selectedIndex: s6,
    type: "change"
  });
};
var Vy = function(e12, t3) {
  t3.representations().forEach((t4) => {
    e12.addQualityLevel(t4);
  }), Hy(e12, t3.playlists);
};
jy.canPlaySource = function() {
  return ip.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.");
};
var zy = (e12, t3, i4) => {
  if (!e12) return e12;
  let s6 = {};
  t3 && t3.attributes && t3.attributes.CODECS && (s6 = Bg(ni(t3.attributes.CODECS))), i4 && i4.attributes && i4.attributes.CODECS && (s6.audio = i4.attributes.CODECS);
  const n6 = li(s6.video), r3 = li(s6.audio), a6 = {};
  for (const o4 in e12) a6[o4] = {}, r3 && (a6[o4].audioContentType = r3), n6 && (a6[o4].videoContentType = n6), t3.contentProtection && t3.contentProtection[o4] && t3.contentProtection[o4].pssh && (a6[o4].pssh = t3.contentProtection[o4].pssh), "string" == typeof e12[o4] && (a6[o4].url = e12[o4]);
  return up(e12, a6);
};
var Wy = (e12, t3) => e12.reduce((e13, i4) => {
  if (!i4.contentProtection) return e13;
  const s6 = t3.reduce((e14, t4) => {
    const s7 = i4.contentProtection[t4];
    return s7 && s7.pssh && (e14[t4] = {
      pssh: s7.pssh
    }), e14;
  }, {});
  return Object.keys(s6).length && e13.push(s6), e13;
}, []);
var Gy = ({
  player: e12,
  sourceKeySystems: t3,
  audioMedia: i4,
  mainPlaylists: s6
}) => {
  if (!e12.eme.initializeMediaKeys) return Promise.resolve();
  const n6 = i4 ? s6.concat([i4]) : s6, r3 = Wy(n6, Object.keys(t3)), a6 = [], o4 = [];
  return r3.forEach((t4) => {
    o4.push(new Promise((t5, i5) => {
      e12.tech_.one("keysessioncreated", t5);
    })), a6.push(new Promise((i5, s7) => {
      e12.eme.initializeMediaKeys({
        keySystems: t4
      }, (e13) => {
        e13 ? s7(e13) : i5();
      });
    }));
  }), Promise.race([Promise.all(a6), Promise.race(o4)]);
};
var Xy = ({
  player: e12,
  sourceKeySystems: t3,
  media: i4,
  audioMedia: s6
}) => {
  const n6 = zy(t3, i4, s6);
  return !!n6 && (e12.currentSource().keySystems = n6, !(n6 && !e12.eme) || (ip.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"), false));
};
var Ky = () => {
  if (!g3.localStorage) return null;
  const e12 = g3.localStorage.getItem($y);
  if (!e12) return null;
  try {
    return JSON.parse(e12);
  } catch (l_) {
    return null;
  }
};
var Yy = (e12) => {
  if (!g3.localStorage) return false;
  let t3 = Ky();
  t3 = t3 ? up(t3, e12) : e12;
  try {
    g3.localStorage.setItem($y, JSON.stringify(t3));
  } catch (l_) {
    return false;
  }
  return t3;
};
var Qy = (e12) => 0 === e12.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,") ? JSON.parse(e12.substring(e12.indexOf(",") + 1)) : e12;
var Jy = (e12, t3) => {
  e12._requestCallbackSet || (e12._requestCallbackSet = /* @__PURE__ */ new Set()), e12._requestCallbackSet.add(t3);
};
var Zy = (e12, t3) => {
  e12._responseCallbackSet || (e12._responseCallbackSet = /* @__PURE__ */ new Set()), e12._responseCallbackSet.add(t3);
};
var e_ = (e12, t3) => {
  e12._requestCallbackSet && (e12._requestCallbackSet.delete(t3), e12._requestCallbackSet.size || delete e12._requestCallbackSet);
};
var t_ = (e12, t3) => {
  e12._responseCallbackSet && (e12._responseCallbackSet.delete(t3), e12._responseCallbackSet.size || delete e12._responseCallbackSet);
};
jy.supportsNativeHls = function() {
  if (!ge || !ge.createElement) return false;
  const e12 = ge.createElement("video");
  if (!ip.getTech("Html5").isSupported()) return false;
  return ["application/vnd.apple.mpegurl", "audio/mpegurl", "audio/x-mpegurl", "application/x-mpegurl", "video/x-mpegurl", "video/mpegurl", "application/mpegurl"].some(function(t3) {
    return /maybe|probably/i.test(e12.canPlayType(t3));
  });
}(), jy.supportsNativeDash = !!(ge && ge.createElement && ip.getTech("Html5").isSupported()) && /maybe|probably/i.test(ge.createElement("video").canPlayType("application/dash+xml")), jy.supportsTypeNatively = (e12) => "hls" === e12 ? jy.supportsNativeHls : "dash" === e12 && jy.supportsNativeDash, jy.isSupported = function() {
  return ip.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.");
}, jy.xhr.onRequest = function(e12) {
  Jy(jy.xhr, e12);
}, jy.xhr.onResponse = function(e12) {
  Zy(jy.xhr, e12);
}, jy.xhr.offRequest = function(e12) {
  e_(jy.xhr, e12);
}, jy.xhr.offResponse = function(e12) {
  t_(jy.xhr, e12);
};
var i_ = ip.getComponent("Component");
var s_ = class extends i_ {
  constructor(e12, t3, i4) {
    if (super(t3, i4.vhs), "number" == typeof i4.initialBandwidth && (this.options_.bandwidth = i4.initialBandwidth), this.logger_ = dp("VhsHandler"), t3.options_ && t3.options_.playerId) {
      const e13 = ip.getPlayer(t3.options_.playerId);
      this.player_ = e13;
    }
    if (this.tech_ = t3, this.source_ = e12, this.stats = {}, this.ignoreNextSeekingEvent_ = false, this.setOptions_(), this.options_.overrideNative && t3.overrideNativeAudioTracks && t3.overrideNativeVideoTracks) t3.overrideNativeAudioTracks(true), t3.overrideNativeVideoTracks(true);
    else if (this.options_.overrideNative && (t3.featuresNativeVideoTracks || t3.featuresNativeAudioTracks)) throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");
    this.on(ge, ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"], (e13) => {
      const t4 = ge.fullscreenElement || ge.webkitFullscreenElement || ge.mozFullScreenElement || ge.msFullscreenElement;
      t4 && t4.contains(this.tech_.el()) ? this.playlistController_.fastQualityChange_() : this.playlistController_.checkABR_();
    }), this.on(this.tech_, "seeking", function() {
      this.ignoreNextSeekingEvent_ ? this.ignoreNextSeekingEvent_ = false : this.setCurrentTime(this.tech_.currentTime());
    }), this.on(this.tech_, "error", function() {
      this.tech_.error() && this.playlistController_ && this.playlistController_.pauseLoading();
    }), this.on(this.tech_, "play", this.play);
  }
  setOptions_(e12 = {}) {
    if (this.options_ = up(this.options_, e12), this.options_.withCredentials = this.options_.withCredentials || false, this.options_.limitRenditionByPlayerDimensions = false !== this.options_.limitRenditionByPlayerDimensions, this.options_.useDevicePixelRatio = this.options_.useDevicePixelRatio || false, this.options_.useBandwidthFromLocalStorage = void 0 !== this.source_.useBandwidthFromLocalStorage ? this.source_.useBandwidthFromLocalStorage : this.options_.useBandwidthFromLocalStorage || false, this.options_.useForcedSubtitles = this.options_.useForcedSubtitles || false, this.options_.useNetworkInformationApi = this.options_.useNetworkInformationApi || false, this.options_.useDtsForTimestampOffset = this.options_.useDtsForTimestampOffset || false, this.options_.customTagParsers = this.options_.customTagParsers || [], this.options_.customTagMappers = this.options_.customTagMappers || [], this.options_.cacheEncryptionKeys = this.options_.cacheEncryptionKeys || false, this.options_.llhls = false !== this.options_.llhls, this.options_.bufferBasedABR = this.options_.bufferBasedABR || false, "number" != typeof this.options_.playlistExclusionDuration && (this.options_.playlistExclusionDuration = 60), "number" != typeof this.options_.bandwidth && this.options_.useBandwidthFromLocalStorage) {
      const e13 = Ky();
      e13 && e13.bandwidth && (this.options_.bandwidth = e13.bandwidth, this.tech_.trigger({
        type: "usage",
        name: "vhs-bandwidth-from-local-storage"
      })), e13 && e13.throughput && (this.options_.throughput = e13.throughput, this.tech_.trigger({
        type: "usage",
        name: "vhs-throughput-from-local-storage"
      }));
    }
    "number" != typeof this.options_.bandwidth && (this.options_.bandwidth = Jm.INITIAL_BANDWIDTH), this.options_.enableLowInitialPlaylist = this.options_.enableLowInitialPlaylist && this.options_.bandwidth === Jm.INITIAL_BANDWIDTH, ["withCredentials", "useDevicePixelRatio", "customPixelRatio", "limitRenditionByPlayerDimensions", "bandwidth", "customTagParsers", "customTagMappers", "cacheEncryptionKeys", "playlistSelector", "initialPlaylistSelector", "bufferBasedABR", "liveRangeSafeTimeDelta", "llhls", "useForcedSubtitles", "useNetworkInformationApi", "useDtsForTimestampOffset", "exactManifestTimings", "leastPixelDiffSelector"].forEach((e13) => {
      void 0 !== this.source_[e13] && (this.options_[e13] = this.source_[e13]);
    }), this.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions, this.useDevicePixelRatio = this.options_.useDevicePixelRatio;
    const t3 = this.options_.customPixelRatio;
    "number" == typeof t3 && t3 >= 0 && (this.customPixelRatio = t3);
  }
  setOptions(e12 = {}) {
    this.setOptions_(e12);
  }
  src(e12, t3) {
    if (!e12) return;
    this.setOptions_(), this.options_.src = Qy(this.source_.src), this.options_.tech = this.tech_, this.options_.externVhs = jy, this.options_.sourceType = gi(t3), this.options_.seekTo = (e13) => {
      this.tech_.setCurrentTime(e13);
    }, this.playlistController_ = new xy(this.options_);
    const i4 = up({
      liveRangeSafeTimeDelta: gp
    }, this.options_, {
      seekable: () => this.seekable(),
      media: () => this.playlistController_.media(),
      playlistController: this.playlistController_
    });
    this.playbackWatcher_ = new Ly(i4), this.playlistController_.on("error", () => {
      const e13 = ip.players[this.tech_.options_.playerId];
      let t4 = this.playlistController_.error;
      "object" != typeof t4 || t4.code ? "string" == typeof t4 && (t4 = {
        message: t4,
        code: 3
      }) : t4.code = 3, e13.error(t4);
    });
    const s6 = this.options_.bufferBasedABR ? jy.movingAverageBandwidthSelector(0.55) : jy.STANDARD_PLAYLIST_SELECTOR;
    this.playlistController_.selectPlaylist = this.selectPlaylist ? this.selectPlaylist.bind(this) : s6.bind(this), this.playlistController_.selectInitialPlaylist = jy.INITIAL_PLAYLIST_SELECTOR.bind(this), this.playlists = this.playlistController_.mainPlaylistLoader_, this.mediaSource = this.playlistController_.mediaSource, Object.defineProperties(this, {
      selectPlaylist: {
        get() {
          return this.playlistController_.selectPlaylist;
        },
        set(e13) {
          this.playlistController_.selectPlaylist = e13.bind(this);
        }
      },
      throughput: {
        get() {
          return this.playlistController_.mainSegmentLoader_.throughput.rate;
        },
        set(e13) {
          this.playlistController_.mainSegmentLoader_.throughput.rate = e13, this.playlistController_.mainSegmentLoader_.throughput.count = 1;
        }
      },
      bandwidth: {
        get() {
          let e13 = this.playlistController_.mainSegmentLoader_.bandwidth;
          const t4 = g3.navigator.connection || g3.navigator.mozConnection || g3.navigator.webkitConnection, i5 = 1e7;
          if (this.options_.useNetworkInformationApi && t4) {
            const s7 = 1e3 * t4.downlink * 1e3;
            e13 = s7 >= i5 && e13 >= i5 ? Math.max(e13, s7) : s7;
          }
          return e13;
        },
        set(e13) {
          this.playlistController_.mainSegmentLoader_.bandwidth = e13, this.playlistController_.mainSegmentLoader_.throughput = {
            rate: 0,
            count: 0
          };
        }
      },
      systemBandwidth: {
        get() {
          const e13 = 1 / (this.bandwidth || 1);
          let t4;
          t4 = this.throughput > 0 ? 1 / this.throughput : 0;
          return Math.floor(1 / (e13 + t4));
        },
        set() {
          ip.log.error('The "systemBandwidth" property is read-only');
        }
      }
    }), this.options_.bandwidth && (this.bandwidth = this.options_.bandwidth), this.options_.throughput && (this.throughput = this.options_.throughput), Object.defineProperties(this.stats, {
      bandwidth: {
        get: () => this.bandwidth || 0,
        enumerable: true
      },
      mediaRequests: {
        get: () => this.playlistController_.mediaRequests_() || 0,
        enumerable: true
      },
      mediaRequestsAborted: {
        get: () => this.playlistController_.mediaRequestsAborted_() || 0,
        enumerable: true
      },
      mediaRequestsTimedout: {
        get: () => this.playlistController_.mediaRequestsTimedout_() || 0,
        enumerable: true
      },
      mediaRequestsErrored: {
        get: () => this.playlistController_.mediaRequestsErrored_() || 0,
        enumerable: true
      },
      mediaTransferDuration: {
        get: () => this.playlistController_.mediaTransferDuration_() || 0,
        enumerable: true
      },
      mediaBytesTransferred: {
        get: () => this.playlistController_.mediaBytesTransferred_() || 0,
        enumerable: true
      },
      mediaSecondsLoaded: {
        get: () => this.playlistController_.mediaSecondsLoaded_() || 0,
        enumerable: true
      },
      mediaAppends: {
        get: () => this.playlistController_.mediaAppends_() || 0,
        enumerable: true
      },
      mainAppendsToLoadedData: {
        get: () => this.playlistController_.mainAppendsToLoadedData_() || 0,
        enumerable: true
      },
      audioAppendsToLoadedData: {
        get: () => this.playlistController_.audioAppendsToLoadedData_() || 0,
        enumerable: true
      },
      appendsToLoadedData: {
        get: () => this.playlistController_.appendsToLoadedData_() || 0,
        enumerable: true
      },
      timeToLoadedData: {
        get: () => this.playlistController_.timeToLoadedData_() || 0,
        enumerable: true
      },
      buffered: {
        get: () => Ep(this.tech_.buffered()),
        enumerable: true
      },
      currentTime: {
        get: () => this.tech_.currentTime(),
        enumerable: true
      },
      currentSource: {
        get: () => this.tech_.currentSource_,
        enumerable: true
      },
      currentTech: {
        get: () => this.tech_.name_,
        enumerable: true
      },
      duration: {
        get: () => this.tech_.duration(),
        enumerable: true
      },
      main: {
        get: () => this.playlists.main,
        enumerable: true
      },
      playerDimensions: {
        get: () => this.tech_.currentDimensions(),
        enumerable: true
      },
      seekable: {
        get: () => Ep(this.tech_.seekable()),
        enumerable: true
      },
      timestamp: {
        get: () => Date.now(),
        enumerable: true
      },
      videoPlaybackQuality: {
        get: () => this.tech_.getVideoPlaybackQuality(),
        enumerable: true
      }
    }), this.tech_.one("canplay", this.playlistController_.setupFirstPlay.bind(this.playlistController_)), this.tech_.on("bandwidthupdate", () => {
      this.options_.useBandwidthFromLocalStorage && Yy({
        bandwidth: this.bandwidth,
        throughput: Math.round(this.throughput)
      });
    }), this.playlistController_.on("selectedinitialmedia", () => {
      Dy(this);
    }), this.playlistController_.sourceUpdater_.on("createdsourcebuffers", () => {
      this.setupEme_();
    }), this.on(this.playlistController_, "progress", function() {
      this.tech_.trigger("progress");
    }), this.on(this.playlistController_, "firstplay", function() {
      this.ignoreNextSeekingEvent_ = true;
    }), this.setupQualityLevels_(), this.tech_.el() && (this.mediaSourceUrl_ = g3.URL.createObjectURL(this.playlistController_.mediaSource), this.tech_.src(this.mediaSourceUrl_));
  }
  createKeySessions_() {
    const e12 = this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;
    this.logger_("waiting for EME key session creation"), Gy({
      player: this.player_,
      sourceKeySystems: this.source_.keySystems,
      audioMedia: e12 && e12.media(),
      mainPlaylists: this.playlists.main.playlists
    }).then(() => {
      this.logger_("created EME key session"), this.playlistController_.sourceUpdater_.initializedEme();
    }).catch((e13) => {
      this.logger_("error while creating EME key session", e13), this.player_.error({
        message: "Failed to initialize media keys for EME",
        code: 3,
        metadata: {
          errorType: ip.Error.EMEKeySessionCreationError
        }
      });
    });
  }
  handleWaitingForKey_() {
    this.logger_("waitingforkey fired, attempting to create any new key sessions"), this.createKeySessions_();
  }
  setupEme_() {
    const e12 = this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader, t3 = Xy({
      player: this.player_,
      sourceKeySystems: this.source_.keySystems,
      media: this.playlists.media(),
      audioMedia: e12 && e12.media()
    });
    this.player_.tech_.on("keystatuschange", (e13) => {
      this.playlistController_.updatePlaylistByKeyStatus(e13.keyId, e13.status);
    }), this.handleWaitingForKey_ = this.handleWaitingForKey_.bind(this), this.player_.tech_.on("waitingforkey", this.handleWaitingForKey_), t3 ? this.createKeySessions_() : this.playlistController_.sourceUpdater_.initializedEme();
  }
  setupQualityLevels_() {
    const e12 = ip.players[this.tech_.options_.playerId];
    e12 && e12.qualityLevels && !this.qualityLevels_ && (this.qualityLevels_ = e12.qualityLevels(), this.playlistController_.on("selectedinitialmedia", () => {
      Vy(this.qualityLevels_, this);
    }), this.playlists.on("mediachange", () => {
      Hy(this.qualityLevels_, this.playlists);
    }));
  }
  static version() {
    return {
      "@videojs/http-streaming": My,
      "mux.js": Uy,
      "mpd-parser": By,
      "m3u8-parser": Fy,
      "aes-decrypter": qy
    };
  }
  version() {
    return this.constructor.version();
  }
  canChangeType() {
    return $f.canChangeType();
  }
  play() {
    this.playlistController_.play();
  }
  setCurrentTime(e12) {
    this.playlistController_.setCurrentTime(e12);
  }
  duration() {
    return this.playlistController_.duration();
  }
  seekable() {
    return this.playlistController_.seekable();
  }
  dispose() {
    this.playbackWatcher_ && this.playbackWatcher_.dispose(), this.playlistController_ && this.playlistController_.dispose(), this.qualityLevels_ && this.qualityLevels_.dispose(), this.tech_ && this.tech_.vhs && delete this.tech_.vhs, this.mediaSourceUrl_ && g3.URL.revokeObjectURL && (g3.URL.revokeObjectURL(this.mediaSourceUrl_), this.mediaSourceUrl_ = null), this.tech_ && this.tech_.off("waitingforkey", this.handleWaitingForKey_), super.dispose();
  }
  convertToProgramTime(e12, t3) {
    return Bm({
      playlist: this.playlistController_.media(),
      time: e12,
      callback: t3
    });
  }
  seekToProgramTime(e12, t3, i4 = true, s6 = 2) {
    return Fm({
      programTime: e12,
      playlist: this.playlistController_.media(),
      retryCount: s6,
      pauseAfterSeek: i4,
      seekTo: this.options_.seekTo,
      tech: this.options_.tech,
      callback: t3
    });
  }
  setupXhrHooks_() {
    this.xhr.onRequest = (e12) => {
      Jy(this.xhr, e12);
    }, this.xhr.onResponse = (e12) => {
      Zy(this.xhr, e12);
    }, this.xhr.offRequest = (e12) => {
      e_(this.xhr, e12);
    }, this.xhr.offResponse = (e12) => {
      t_(this.xhr, e12);
    }, this.player_.trigger("xhr-hooks-ready");
  }
};
var n_ = {
  name: "videojs-http-streaming",
  VERSION: My,
  canHandleSource(e12, t3 = {}) {
    const i4 = up(ip.options, t3);
    return n_.canPlayType(e12.type, i4);
  },
  handleSource(e12, t3, i4 = {}) {
    const s6 = up(ip.options, i4);
    return t3.vhs = new s_(e12, t3, s6), t3.vhs.xhr = _m(), t3.vhs.setupXhrHooks_(), t3.vhs.src(e12.src, e12.type), t3.vhs;
  },
  canPlayType(e12, t3) {
    const i4 = gi(e12);
    if (!i4) return "";
    const s6 = n_.getOverrideNative(t3);
    return !jy.supportsTypeNatively(i4) || s6 ? "maybe" : "";
  },
  getOverrideNative(e12 = {}) {
    const {
      vhs: t3 = {}
    } = e12, i4 = !(ip.browser.IS_ANY_SAFARI || ip.browser.IS_IOS), {
      overrideNative: s6 = i4
    } = t3;
    return s6;
  }
};
(() => hi("avc1.4d400d,mp4a.40.2"))() && ip.getTech("Html5").registerSourceHandler(n_, 0), ip.VhsHandler = s_, ip.VhsSourceHandler = n_, ip.Vhs = jy, ip.use || ip.registerComponent("Vhs", jy), ip.options.vhs = ip.options.vhs || {}, ip.getPlugin && ip.getPlugin("reloadSourceOnError") || ip.registerPlugin("reloadSourceOnError", Ry);
var r_ = "application/x-mpegURL";
var a_ = class extends S {
  constructor() {
    super(), this._defaultConfigs = {
      autoplay: false,
      fluid: false,
      fullscreen: false,
      loop: false,
      muted: false,
      preload: "auto",
      responsive: false,
      startTime: 0
    }, this._prevPlayingState = false, this.currentMetadata = null, this.element = null, this.sensorModel = null, this.state = "not-ready", this.waitingTimestamp = null, this._initController = () => {
      !this._controller && this.playerUrl && (this.element = document.createElement("video"), ip.log.level("error"), this._controller = ip(this.element, this._defaultConfigs), this._controller.muted(this.muted), this._controller.loop(this.loop), this._controller.playbackRate(this.rate), this._controller.ready(this._handleReady), this._controller.on("canplay", this._handleCanPlay), this._controller.on("durationchange", this._handleDurationChange), this._controller.on("ended", this._handleEnded), this._controller.on("error", this._handleError), this._controller.on("loadeddata", this._handleDataLoaded), this._controller.on("loadedmetadata", this._handleLoadedMetadata), this._controller.on("loadstart", this._handleLoadStart), this._controller.on("play", this._handlePlay), this._controller.on("timeupdate", this._handleTimeUpdate), this._controller.on("waiting", this._handleWaiting), this._controller.on("xhr-hooks-ready", this._handleXHRhooksReady));
    }, this._handleReady = () => {
      this.state = "ready";
    }, this._handleCanPlay = () => {
      this._prevPlayingState = "playing" === this.state, this.state = "can-play";
    }, this._handleCueChange = () => {
      if (!this.subtitleTrack?.activeCues?.length) return;
      const e12 = this.subtitleTrack?.activeCues[0], t3 = e12.text ? JSON.parse(e12.text) : null;
      if (!t3?.data?.length) return;
      const i4 = t3.data[0]?.value ?? [], s6 = /* @__PURE__ */ new Map();
      for (const n6 of i4) {
        if (Array.isArray(n6.value)) {
          if (90064 === n6.tagId) s6.set(n6.tagId, n6);
          else {
            n6.value.forEach((e13) => {
              s6.set(e13.tagId, e13);
            });
          }
        } else s6.set(n6.tagId, n6);
      }
      s6.set(o3.EsriVideoWidth, {
        name: "Video Width",
        tagId: o3.EsriVideoWidth,
        value: this._controller?.videoWidth()
      }), s6.set(o3.EsriVideoHeight, {
        name: "Video Height",
        tagId: o3.EsriVideoHeight,
        value: this._controller?.videoHeight()
      }), this.currentMetadata = new Map(s6), this.sensorModel = new y2({
        videoMetadata: this.currentMetadata
      });
    }, this._handleDataLoaded = () => {
      this.state = "data-loaded", this._set("videoWidth", this._controller?.videoWidth()), this._set("videoHeight", this._controller?.videoHeight());
    }, this._handleDurationChange = () => this.notifyChange("duration"), this._handleEnded = () => {
      if (!this.loop) return this._set("ended", true), this.notifyChange("buffered"), this.notifyChange("currentTime"), this.notifyChange("duration"), this.notifyChange("waiting"), void (this.state = "can-play");
      this.setCurrentTime(0), this.play();
    }, this._handleError = () => {
      n.getLogger(this).error("video stream error ::", this._controller?.error());
    }, this._handleLoadStart = () => {
      this.state = "can-play";
    }, this._handleLoadedMetadata = () => {
      this.notifyChange("subtitleTrack"), this.notifyChange("buffered");
    }, this._handlePlay = () => this.notifyChange("ended"), this._handleTimeUpdate = () => {
      this.notifyChange("currentTime"), this.notifyChange("buffered"), this.notifyChange("bufferedPercent"), this._set("videoWidth", this._controller?.videoWidth()), this._set("videoHeight", this._controller?.videoHeight());
    }, this._handleWaiting = () => {
      this.waitingTimestamp = this._controller?.currentTime();
    }, this._handleXHRhooksReady = () => {
      const e12 = (e13) => (e13.xhr = new s4(), e13);
      this._controller?.tech(true)?.vhs.xhr.onRequest(e12);
    };
  }
  initialize() {
    this.addHandles([d(() => this.playerUrl, (e12) => {
      e12 && (this._initController(), this._controller?.src({
        type: r_,
        src: this.playerUrl
      }));
    }, P), d(() => this.subtitleTrack, () => {
      this.subtitleTrack && (this.subtitleTrack.mode = "showing");
    })]), this.addHandles(v(() => this.subtitleTrack, "cuechange", this._handleCueChange));
  }
  destroy() {
    this._controller?.dispose();
  }
  get buffered() {
    return this._controller?.bufferedEnd() ?? 0;
  }
  get bufferedPercent() {
    return this._controller?.bufferedPercent() ?? 0;
  }
  get currentTime() {
    return this._controller?.currentTime() ?? 0;
  }
  get duration() {
    return this._controller?.duration() ?? 0;
  }
  get ended() {
    return this._controller?.ended() ?? this._get("ended") ?? true;
  }
  set ended(e12) {
    this._controller?.ended(e12), this._set("ended", e12);
  }
  get loop() {
    return this._controller?.loop() ?? this._get("loop") ?? false;
  }
  set loop(e12) {
    this._controller?.loop(e12), this._set("loop", e12);
  }
  get muted() {
    return this._controller?.muted() ?? this._get("muted") ?? false;
  }
  set muted(e12) {
    this._controller?.muted(e12), this._set("muted", e12);
  }
  get playerUrl() {
    return this._controller?.src() || "";
  }
  set playerUrl(e12) {
    this._set("playerUrl", e12);
  }
  get playing() {
    return !this.ended && ("can-play" === this.state ? this._prevPlayingState : "playing" === this.state);
  }
  get rate() {
    return this._controller?.playbackRate() ?? this._get("rate") ?? 1;
  }
  set rate(e12) {
    this._controller?.playbackRate(e12), this._set("rate", e12);
  }
  get started() {
    return this._controller?.hasStarted() || false;
  }
  get subtitleTrack() {
    const e12 = this._controller?.textTracks();
    return e12?.length ? Array.from(e12).find((e13) => "subtitles" === e13.kind) : null;
  }
  get waiting() {
    return !this.waitingTimestamp && (this.waitingTimestamp === this.currentTime || (this.waitingTimestamp = null, false));
  }
  pause() {
    this._controller?.pause(), this.state = "paused";
  }
  play() {
    this._controller?.play(), this.state = "playing";
  }
  reset() {
    this._controller && (this.pause(), this.setCurrentTime(0), this._set("ended", true));
  }
  setCurrentTime(e12) {
    const t3 = e4(e12, 0, this.duration);
    this._controller?.currentTime(t3), this.notifyChange("currentTime");
  }
};
e([y()], a_.prototype, "buffered", null), e([y()], a_.prototype, "bufferedPercent", null), e([y({
  readOnly: true
})], a_.prototype, "currentTime", null), e([y()], a_.prototype, "currentMetadata", void 0), e([y({
  readOnly: true
})], a_.prototype, "duration", null), e([y()], a_.prototype, "element", void 0), e([y({
  readOnly: true
})], a_.prototype, "ended", null), e([y()], a_.prototype, "loop", null), e([y()], a_.prototype, "muted", null), e([y()], a_.prototype, "playerUrl", null), e([y({
  readOnly: true
})], a_.prototype, "playing", null), e([y()], a_.prototype, "rate", null), e([y()], a_.prototype, "sensorModel", void 0), e([y({
  readOnly: true
})], a_.prototype, "started", null), e([y()], a_.prototype, "state", void 0), e([y()], a_.prototype, "subtitleTrack", null), e([y({
  readOnly: true
})], a_.prototype, "videoHeight", void 0), e([y({
  readOnly: true
})], a_.prototype, "videoWidth", void 0), e([y({
  readOnly: true
})], a_.prototype, "waiting", null), e([y()], a_.prototype, "waitingTimestamp", void 0), a_ = e([a("esri.layers.video.VideoController")], a_);
var o_ = a_;

// ../../../node_modules/@arcgis/core/layers/VideoLayer.js
var E3 = class extends l(t(S3(e6(f3)))) {
  constructor(t3) {
    super(t3), this._trailPoints = [], this.capabilities = null, this.connectionInfo = null, this.controller = new o_(), this.copyright = null, this.coverage = null, this.created = null, this.description = null, this.elevationSource = null, this.frame = null, this.frameCount = null, this.fullExtent = null, this.initialExtent = null, this.layerId = null, this.playbackInfo = null, this.posterUrl = null, this.protocol = "hls", this.qualities = null, this.serviceItemId = null, this.sourceJSON = null, this.sourceQuality = null, this.sourceType = null, this.spatialReference = f2.WGS84, this.telemetryDisplay = null, this.title = null, this.type = "video", this.url = null, this.videoTimeExtent = null;
  }
  initialize() {
    this.telemetryDisplay = new i3({
      frameCenter: true,
      frameOutline: true,
      lineOfSight: true,
      sensorLocation: true,
      sensorTrail: true
    }), this.addHandles([d(() => this.metadata, () => {
      this.notifyChange("telemetry"), this.notifyChange("groundControlPoints"), this.notifyChange("frameHorizonPoints");
    }), d(() => this.telemetry?.sensorLocation, (t3) => this._setSensorTrail(t3), P)]);
  }
  load(t3) {
    const e12 = null != t3 ? t3.signal : null;
    return this.addResolvingPromise(this._fetchService(e12)), Promise.resolve(this);
  }
  get buffered() {
    return this.controller.buffered;
  }
  readCapabilitiesFromService(t3, e12) {
    return g(e12);
  }
  readConnectionInfo(t3, e12) {
    const r3 = e12.connectionUrl;
    return this.controller.playerUrl = r3 && this.protocol ? r3[this.protocol] : "", r3;
  }
  get currentTime() {
    return this.controller.currentTime;
  }
  get duration() {
    return this.controller.duration;
  }
  get ended() {
    return this.controller.ended;
  }
  get frameHorizonPoints() {
    return d3(this.metadata);
  }
  get groundControlPoints() {
    return l4(this.metadata);
  }
  get loop() {
    return this.controller.loop;
  }
  set loop(t3) {
    this.controller.loop = t3;
  }
  get metadata() {
    return this.controller?.currentMetadata;
  }
  get muted() {
    return this.controller.muted;
  }
  set muted(t3) {
    this.controller.muted = t3;
  }
  get playbackRate() {
    return this.controller.rate;
  }
  set playbackRate(t3) {
    this.controller.rate = t3;
  }
  get playerUrl() {
    return this.controller.playerUrl;
  }
  get playing() {
    return this.controller.playing;
  }
  get state() {
    return this.controller.state;
  }
  get telemetry() {
    return s5(this.metadata);
  }
  get videoElement() {
    return this.controller?.element;
  }
  get videoHeight() {
    return this.controller?.videoHeight;
  }
  get videoWidth() {
    return this.controller?.videoWidth;
  }
  get waiting() {
    return this.controller.waiting;
  }
  play() {
    this.controller.play();
  }
  pause() {
    this.controller.pause();
  }
  reset() {
    this.controller.reset();
  }
  setCurrentTime(t3) {
    if (!this.duration) return;
    const e12 = e4(t3, 0, this.duration);
    this.controller.setCurrentTime(e12);
  }
  getCurrentFrame() {
  }
  toGround(t3, e12) {
    return this.controller?.sensorModel?.metadataSupportsTransforms ? this.controller.sensorModel.transformImageToGeo(t3, e12) : null;
  }
  toVideo(t3) {
    if (!this.controller?.sensorModel?.metadataSupportsTransforms) return null;
    const e12 = this.controller.sensorModel.transformGeoToImage(t3.x, t3.y, t3.z);
    return {
      x: e12[0],
      y: e12[1]
    };
  }
  _fetchService(t3) {
    return __async(this, null, function* () {
      if (this.sourceJSON) return void this.read(this.sourceJSON, {
        origin: "service",
        url: this.parsedUrl
      });
      const o4 = d2(this.parsedUrl?.path);
      if (null == o4) throw new s("arcgis-layers:url-mismatch", "The url is not a valid arcgis resource");
      let i4 = null;
      const {
        data: l5,
        ssl: s6
      } = yield U(o4.url.path, {
        query: __spreadValues(__spreadValues({
          f: "json"
        }, this.parsedUrl.query), this.customParameters),
        signal: t3
      }), n6 = l5;
      if (this.url = o4.url.path, s6 && (this.url = this.url.replace(/^http:/i, "https:")), !n6?.currentVersion) return n6.currentVersion = "11.2", this.sourceJSON = n6, void this.read(this.sourceJSON, {
        origin: "service",
        url: this.parsedUrl
      });
      let p2 = o4?.sublayer;
      if (null == p2 && n6.layers?.length && (p2 = n6.layers[0].id), null == p2) throw new s("arcgis-layers:url-mismatch", "The url is not a valid arcgis resource");
      this.url = `${o4.url.path}/${p2}`, i4 = yield U(this.url, {
        query: __spreadValues({
          f: "json"
        }, this.customParameters),
        signal: t3
      });
      const a6 = __spreadValues(__spreadValues({}, n6), i4.data);
      this.sourceJSON = a6, this.read(this.sourceJSON, {
        origin: "service",
        url: this.parsedUrl
      });
    });
  }
  _setSensorTrail(t3) {
    if (!t3) return;
    const e12 = u3(t3, this._trailPoints);
    this._trailPoints = [...e12];
    const r3 = this._trailPoints.map((t4) => t4.toArray()), o4 = new m2({
      hasZ: t3.hasZ,
      paths: [r3]
    });
    this.telemetry.sensorTrail = o4.clone();
  }
};
e([y({
  readOnly: true
})], E3.prototype, "buffered", null), e([y({
  readOnly: true,
  json: {
    read: false
  }
})], E3.prototype, "capabilities", void 0), e([o("service", "capabilities", ["supportsAppend", "supportsCoverageQuery", "supportsExportClip", "supportsExportFrameset", "supportsMensuration", "supportsUpdate"])], E3.prototype, "readCapabilitiesFromService", null), e([y({
  readOnly: true
})], E3.prototype, "connectionInfo", void 0), e([o("connectionInfo", ["connectionUrl"])], E3.prototype, "readConnectionInfo", null), e([y()], E3.prototype, "controller", void 0), e([y({
  type: String
})], E3.prototype, "copyright", void 0), e([y({
  type: j
})], E3.prototype, "coverage", void 0), e([y({
  type: Date
})], E3.prototype, "created", void 0), e([y({
  type: Number
})], E3.prototype, "currentTime", null), e([y({
  type: String
})], E3.prototype, "description", void 0), e([y({
  type: Number
})], E3.prototype, "duration", null), e([y({
  readOnly: true
})], E3.prototype, "elevationSource", void 0), e([y({
  type: Boolean
})], E3.prototype, "ended", null), e([y({
  type: u2
})], E3.prototype, "frame", void 0), e([y({
  type: Number
})], E3.prototype, "frameCount", void 0), e([y({
  type: w
})], E3.prototype, "fullExtent", void 0), e([y({
  readOnly: true
})], E3.prototype, "frameHorizonPoints", null), e([y({
  readOnly: true
})], E3.prototype, "groundControlPoints", null), e([y({
  type: w
})], E3.prototype, "initialExtent", void 0), e([y({
  readOnly: true,
  json: {
    read: {
      source: "id"
    }
  }
})], E3.prototype, "layerId", void 0), e([y({
  type: Boolean
})], E3.prototype, "loop", null), e([y({
  readOnly: true
})], E3.prototype, "metadata", null), e([y({
  type: Boolean
})], E3.prototype, "muted", null), e([y({
  type: a2
})], E3.prototype, "playbackInfo", void 0), e([y({
  type: Number
})], E3.prototype, "playbackRate", null), e([y({
  type: String
})], E3.prototype, "playerUrl", null), e([y({
  readOnly: true
})], E3.prototype, "playing", null), e([y({
  readOnly: true,
  json: {
    read: {
      source: "poster"
    }
  }
})], E3.prototype, "posterUrl", void 0), e([y({
  type: String
})], E3.prototype, "protocol", void 0), e([y({
  readOnly: true
})], E3.prototype, "qualities", void 0), e([y({
  readOnly: true
})], E3.prototype, "serviceItemId", void 0), e([y()], E3.prototype, "sourceJSON", void 0), e([y()], E3.prototype, "sourceQuality", void 0), e([y({
  readOnly: true,
  json: {
    name: "serviceType"
  }
})], E3.prototype, "sourceType", void 0), e([y()], E3.prototype, "spatialReference", void 0), e([y({
  type: String
})], E3.prototype, "state", null), e([y({
  type: n4
})], E3.prototype, "telemetry", null), e([y({
  type: i3
})], E3.prototype, "telemetryDisplay", void 0), e([y({
  readOnly: false,
  json: {
    read: {
      source: "name"
    }
  }
})], E3.prototype, "title", void 0), e([y({
  readOnly: true
})], E3.prototype, "type", void 0), e([y(p)], E3.prototype, "url", void 0), e([y({
  readOnly: true
})], E3.prototype, "videoElement", null), e([y({
  readOnly: true
})], E3.prototype, "videoHeight", null), e([y({
  readOnly: true,
  nonNullable: false,
  json: {
    read: {
      reader: a5,
      source: "time"
    }
  }
})], E3.prototype, "videoTimeExtent", void 0), e([y({
  readOnly: true
})], E3.prototype, "videoWidth", null), e([y({
  readOnly: true
})], E3.prototype, "waiting", null), E3 = e([a("esri.layers.VideoLayer")], E3);
var J2 = E3;
export {
  J2 as default
};
//# sourceMappingURL=VideoLayer-4SJSUQFD.js.map
