import {
  n as n7
} from "./chunk-S47MZ7BS.js";
import {
  e as e10
} from "./chunk-LHOHW73S.js";
import {
  pe
} from "./chunk-3QL6OCU3.js";
import "./chunk-WU45X43Z.js";
import {
  a as a4,
  d as d7,
  r as r2,
  s as s5,
  t as t3
} from "./chunk-SV4PAQ3O.js";
import {
  n as n6
} from "./chunk-MFDTVFVG.js";
import {
  t as t2
} from "./chunk-NZE6NI7O.js";
import "./chunk-R5TKJUPW.js";
import {
  e as e9
} from "./chunk-4YFNKQX7.js";
import {
  R
} from "./chunk-ZP6PYGBR.js";
import "./chunk-W24CYY6Q.js";
import "./chunk-JBQJ3BUL.js";
import "./chunk-3FSYWRTQ.js";
import {
  m as m5
} from "./chunk-DS4TVPST.js";
import "./chunk-2SHZAJ7S.js";
import "./chunk-STVIJ4IV.js";
import "./chunk-QRVAQWLH.js";
import "./chunk-TMPIWG43.js";
import "./chunk-EU7GCI2A.js";
import "./chunk-WE6VW4MG.js";
import {
  t
} from "./chunk-P3B4Y6UN.js";
import "./chunk-5QM72RFD.js";
import "./chunk-WQXGIEVZ.js";
import "./chunk-T3EGKTN6.js";
import "./chunk-ZFPMGEAK.js";
import "./chunk-4SCJM64G.js";
import {
  b as b3,
  j as j2,
  v as v3,
  w as w3
} from "./chunk-DABQKFI5.js";
import "./chunk-67V5AGVJ.js";
import "./chunk-UJF7LPVD.js";
import "./chunk-HHHY7K7M.js";
import "./chunk-TKHURHLF.js";
import "./chunk-U7YHNT5S.js";
import "./chunk-6BPYXCCQ.js";
import {
  T,
  e as e8
} from "./chunk-ZIDRXKSJ.js";
import "./chunk-DBK2ELNZ.js";
import {
  b as b2
} from "./chunk-2EMKXJIJ.js";
import "./chunk-FLWLBYXO.js";
import {
  _ as _4
} from "./chunk-2ERGO64O.js";
import "./chunk-RP2GKJCD.js";
import "./chunk-QL5HR3YL.js";
import "./chunk-37FUJHR2.js";
import "./chunk-D3AKDIJC.js";
import {
  e as e6
} from "./chunk-DKRGLYVY.js";
import {
  g,
  w as w2
} from "./chunk-W6GMJ4SS.js";
import "./chunk-IIVUY2T7.js";
import {
  e as e7
} from "./chunk-HBMA4SRU.js";
import "./chunk-5NCKEQLF.js";
import {
  h as h3
} from "./chunk-GT3AQDRW.js";
import "./chunk-5APMY2AQ.js";
import "./chunk-GHUJU3NS.js";
import "./chunk-7HBD4CJ3.js";
import "./chunk-YAGNWBGU.js";
import "./chunk-DE6MQ5XE.js";
import "./chunk-LQTSBE7P.js";
import "./chunk-GCFUJXGH.js";
import "./chunk-SLCHZ6DD.js";
import {
  w
} from "./chunk-Z3I5AN4P.js";
import "./chunk-4DJIV2NV.js";
import "./chunk-CX4XTOUC.js";
import "./chunk-ZVFENZUF.js";
import "./chunk-MD2IQSSQ.js";
import {
  _ as _3
} from "./chunk-TVUZAYCE.js";
import "./chunk-O7ZVERIH.js";
import {
  _ as _2,
  m as m4
} from "./chunk-VS26W5Y5.js";
import {
  E
} from "./chunk-LM2N2I5R.js";
import "./chunk-PVO5NM6Q.js";
import {
  I
} from "./chunk-YFQ32AQX.js";
import "./chunk-L4AYSXFJ.js";
import "./chunk-POQ3T5EH.js";
import "./chunk-DM4WHMQY.js";
import {
  a as a3,
  f as f4,
  h as h2
} from "./chunk-6MR4UDDL.js";
import "./chunk-XQCKIDQO.js";
import "./chunk-L7ZKWTWL.js";
import "./chunk-O2DTA3XK.js";
import "./chunk-SZWWBMQN.js";
import "./chunk-ZE47C44H.js";
import {
  k,
  m as m3
} from "./chunk-5GIS2C3K.js";
import "./chunk-XCOHDMBF.js";
import "./chunk-HOH445RO.js";
import "./chunk-7B5YPLFX.js";
import "./chunk-RDQF44TE.js";
import "./chunk-KKD7A2GN.js";
import "./chunk-ZWCV4HKG.js";
import "./chunk-N4KQPPPI.js";
import "./chunk-4OGGMTIH.js";
import "./chunk-NQVBBKAN.js";
import "./chunk-4MMTPKY4.js";
import "./chunk-DY7FJHTG.js";
import "./chunk-Q4KYZS3X.js";
import "./chunk-KVKFHRJ3.js";
import "./chunk-VWML4J2J.js";
import "./chunk-JYODC3YQ.js";
import "./chunk-BQZBOYBD.js";
import "./chunk-TYQXPPSP.js";
import "./chunk-TRSGUVSM.js";
import "./chunk-U3MA63JX.js";
import "./chunk-WYKKCLBI.js";
import "./chunk-PFMGJTQM.js";
import {
  e as e5
} from "./chunk-PQ4T66BG.js";
import "./chunk-SWPHGZYB.js";
import "./chunk-DWASPXVI.js";
import {
  d as d6
} from "./chunk-HD65DNIO.js";
import "./chunk-4KWLMXIA.js";
import "./chunk-BIUXKPKA.js";
import "./chunk-N6TJI25E.js";
import {
  d as d4
} from "./chunk-634JLXD4.js";
import "./chunk-Y3EDGYWG.js";
import "./chunk-UF6JOUSJ.js";
import "./chunk-T5JGQSO3.js";
import "./chunk-CIW3KHOW.js";
import "./chunk-J55F4AC2.js";
import "./chunk-IQLBZKUD.js";
import "./chunk-7MZZCQ64.js";
import "./chunk-IMVP5ADD.js";
import "./chunk-H7WPOTQH.js";
import "./chunk-SG5TCCCK.js";
import {
  n as n5
} from "./chunk-6A7CWJED.js";
import {
  K,
  N as N2
} from "./chunk-DUTZNK67.js";
import "./chunk-IN6BQCWS.js";
import "./chunk-JM7HAEY6.js";
import "./chunk-2OMCGIU4.js";
import "./chunk-OUKUASAF.js";
import "./chunk-V5RMUGJJ.js";
import "./chunk-D2NB6D6N.js";
import "./chunk-UWJIHV6Q.js";
import "./chunk-M2NS3MSU.js";
import "./chunk-HMNBB7ED.js";
import "./chunk-3RRMLFFN.js";
import "./chunk-DR5TVNEL.js";
import "./chunk-HT2T6PUB.js";
import "./chunk-K64AAM77.js";
import "./chunk-6EUVKE22.js";
import "./chunk-A3NNJ7XA.js";
import "./chunk-OKJHJ3CY.js";
import "./chunk-XTVPEVHA.js";
import "./chunk-DTUSTSEJ.js";
import "./chunk-JCWFGRHQ.js";
import "./chunk-JILEJ6R2.js";
import "./chunk-GAW5JHG4.js";
import "./chunk-OEKKQXBD.js";
import "./chunk-S3IO7V4Q.js";
import {
  d as d5
} from "./chunk-DZALMCYL.js";
import {
  u as u5
} from "./chunk-K226GFDN.js";
import "./chunk-4ZZRP4MA.js";
import "./chunk-7ZJ6P7J7.js";
import "./chunk-FPFZQCEQ.js";
import {
  B,
  e2 as e4,
  r
} from "./chunk-WYMXVOAT.js";
import {
  i as i2,
  n as n3
} from "./chunk-K7TO5IIO.js";
import "./chunk-A4VVDRCH.js";
import {
  m
} from "./chunk-CQDYITZC.js";
import {
  n as n2
} from "./chunk-5I6J67HP.js";
import {
  s as s2
} from "./chunk-YVULORT6.js";
import "./chunk-PB33BAI3.js";
import "./chunk-CVB43GGP.js";
import "./chunk-LLDOZWVV.js";
import "./chunk-7XMEZQ34.js";
import "./chunk-BDM2D6IC.js";
import "./chunk-U2ZVAEKG.js";
import "./chunk-EDSMXTFO.js";
import "./chunk-MNLT652N.js";
import "./chunk-OGZAGPIO.js";
import "./chunk-HJJIIYFF.js";
import "./chunk-ONPREQKF.js";
import "./chunk-7RMVJCDW.js";
import "./chunk-GTY5NXA4.js";
import {
  m2,
  u as u4
} from "./chunk-T6GCUITX.js";
import {
  v as v2
} from "./chunk-TUIGM7TV.js";
import "./chunk-IHVSZYZS.js";
import "./chunk-6CA6K3O7.js";
import "./chunk-NYQ5CYNR.js";
import {
  _
} from "./chunk-O7UDKFOW.js";
import {
  f as f2
} from "./chunk-TKPMIAIW.js";
import "./chunk-NQOJNTB3.js";
import "./chunk-MFOQYQFG.js";
import "./chunk-NKCPFCP3.js";
import {
  f as f3,
  x as x2
} from "./chunk-3ZXOUEQG.js";
import {
  A as A3,
  o as o4
} from "./chunk-AXVPJBVW.js";
import {
  n as n4
} from "./chunk-OXEPWRM7.js";
import "./chunk-POILQGXA.js";
import {
  L,
  M,
  N2 as N,
  O3 as O2,
  W2 as W,
  j,
  s2 as s3,
  s3 as s4
} from "./chunk-JJS7PR2U.js";
import "./chunk-L5YS4GSA.js";
import "./chunk-PRREDSOB.js";
import "./chunk-V5C6HSAM.js";
import "./chunk-SYATLP3H.js";
import "./chunk-V6AMQYXE.js";
import {
  A as A2,
  C,
  P,
  d as d3,
  p as p2,
  v
} from "./chunk-6WHTZNUH.js";
import {
  V
} from "./chunk-EITGQLII.js";
import "./chunk-TIVJXVMN.js";
import {
  d as d2
} from "./chunk-XNUH25NY.js";
import {
  o as o3
} from "./chunk-WGAPNV7F.js";
import "./chunk-BXQGM56A.js";
import {
  e as e3
} from "./chunk-4Z5SGKRM.js";
import "./chunk-YPWMP2VK.js";
import "./chunk-23E6RT3O.js";
import "./chunk-RCBGISRX.js";
import "./chunk-2P72IR2Y.js";
import {
  S,
  i,
  o3 as o2
} from "./chunk-ANKOCGE2.js";
import {
  y
} from "./chunk-7CJXZOFG.js";
import "./chunk-IRGZKO7V.js";
import "./chunk-5SELS7VU.js";
import {
  a3 as a2
} from "./chunk-DDYVXG4F.js";
import "./chunk-ANP42J2U.js";
import {
  A,
  a,
  b,
  d,
  f2 as f,
  h,
  s,
  u as u3
} from "./chunk-HJY2YILU.js";
import {
  e as e2,
  o
} from "./chunk-7DA6A5LD.js";
import {
  e,
  u as u2
} from "./chunk-2MMLMOWS.js";
import "./chunk-4323ZVPF.js";
import {
  n2 as n
} from "./chunk-WYIDUUN2.js";
import {
  O,
  c,
  p,
  u,
  x
} from "./chunk-DXLOWWK7.js";
import {
  __async,
  __asyncGenerator,
  __await,
  __forAwait,
  __spreadProps,
  __spreadValues
} from "./chunk-JWIQHGQB.js";

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/css.js
var e11 = "esri-elevation-profile";
var t4 = {
  base: `${e11}`,
  portrait: `${e11}--portrait`,
  refined: `${e11}--refined`,
  mainContainer: `${e11}__main-container`,
  promptContainer: `${e11}__prompt-container`,
  header: `${e11}__header`,
  zoomOutButton: `${e11}__zoom-out-button`,
  clearButton: `${e11}__clear-button`,
  actionButton: `${e11}__action-button`,
  sketchButton: `${e11}__sketch-button`,
  sketchCancelButton: `${e11}__sketch-cancel-button`,
  sketchDoneButton: `${e11}__sketch-done-button`,
  selectButton: `${e11}__select-button`,
  selectCancelButton: `${e11}__select-cancel-button`,
  chartContainer: `${e11}__chart-container`,
  chartSpinner: `${e11}__chart-spinner`,
  chartSpinnerVisible: `${e11}__chart-spinner--visible`,
  chartSpinnerSmall: `${e11}__chart-spinner--small`,
  footer: `${e11}__footer`
};
var n8 = {
  base: "esri-elevation-profile-legend"
};
var o5 = "esri-elevation-profile-legend-item";
var a5 = {
  base: o5,
  disabled: `${o5}--disabled`,
  expanded: `${o5}--expanded`,
  colorIndicator: `${o5}__color-indicator`,
  header: `${o5}__header`,
  content: `${o5}__content`,
  collapseToggle: `${o5}__collapse-toggle`,
  label: `${o5}__label`,
  checkbox: `${o5}__checkbox`
};
var i3 = "esri-elevation-profile-statistics";
var _5 = {
  base: i3,
  statistic: `${i3}__statistic`,
  statisticLabel: `${i3}__statistic__label`,
  statisticValue: `${i3}__statistic__value`,
  slopeValue: `${i3}__slope-value`
};
var c2 = "esri-elevation-profile-settings";
var r3 = {
  base: `${c2}`,
  popoverContent: `${c2}__popover-content`,
  uniformChartScalingLabel: `${c2}__uniform-scaling-label`,
  uniformChartScalingCheckbox: `${c2}__uniform-scaling-checkbox`
};

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/ProfileGenerationError.js
var e12 = "ProfileGenerationError";
var o6;
!function(e14) {
  e14.TooComplex = "too-complex", e14.InvalidGeometry = "invalid-geometry", e14.InvalidElevationInfo = "invalid-elevation-info", e14.ElevationQueryError = "elevation-query-error";
}(o6 || (o6 = {}));
var r4 = class extends Error {
  constructor(o10) {
    super("profile could not be generated", {
      cause: o10
    }), this.type = e12;
  }
};
function n9(o10) {
  return o10.type === e12;
}

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/geometryUtils.js
function y2(e14, t5, s8, o10, a7, i8, h5) {
  return __async(this, null, function* () {
    let p8, m8, d8;
    const y5 = e14.spatialReference, v7 = y5.isGeographic || y5.isWebMercator;
    let P5 = 0;
    if (!v7) {
      const {
        planarLength: t6
      } = yield import("./geometryEngineAsync-UO6KTQLP.js");
      s(h5), P5 = yield t6(e14, "meters"), s(h5);
    }
    const Z3 = 1 / W(o10), x6 = a7.geodesicDistanceThreshold ?? 1 / 0;
    if (v7 || P5 >= x6) {
      yield N2([{
        source: y5,
        dest: o10
      }, {
        source: y5,
        dest: f2.WGS84
      }], h5);
      const n11 = C2(e14);
      p8 = v3([n11], "meters")[0];
      const r6 = R2(p8, a7);
      if (L2(e14, p8, r6) > i8) throw new r4(o6.TooComplex);
      const v8 = j3(n11, t5, s8);
      ({
        densifiedPath: m8,
        distances: d8
      } = U(v8, r6, Z3)), m8 = K(m8, o10);
    } else {
      yield N2([{
        source: y5,
        dest: o10
      }], h5), p8 = P5;
      const r6 = R2(p8, a7);
      if (L2(e14, p8, r6) > i8) throw new r4(o6.TooComplex);
      const l3 = j3(e14, t5, s8);
      ({
        densifiedPath: m8,
        distances: d8
      } = b4(l3, r6, Z3)), s(h5), m8 = K(m8, o10);
    }
    return {
      densifiedPath: m8,
      pathLength: p8 * Z3,
      distances: d8
    };
  });
}
function R2(e14, t5) {
  const n11 = e14 / t5.densificationMaxSamples;
  return Math.max(t5.samplingDistance, n11);
}
function j3(e14, t5, n11) {
  if (null == t5) return Z(e14);
  const r6 = e14.spatialReference, s8 = t5.mode, o10 = h2(t5, r6);
  let a7 = null;
  switch (n11.type) {
    case "2d":
      a7 = v4(e14, s8, o10);
      break;
    case "3d":
      a7 = P2(e14, s8, o10, n11);
  }
  return null == a7 ? Z(e14) : new m2({
    hasZ: true,
    hasM: false,
    spatialReference: r6,
    paths: x3(e14.paths, a7)
  });
}
function v4({
  hasZ: e14
}, t5, n11) {
  return "absolute-height" === t5 ? e14 ? ([e15, t6, r6]) => [e15, t6, r6 + n11] : ([e15, t6]) => [e15, t6, n11] : null;
}
function P2({
  spatialReference: e14,
  hasZ: t5
}, n11, r6, {
  elevationProvider: s8
}) {
  const o10 = (t6, n12, r7, o11) => s8?.getElevation(t6, n12, r7, e14, o11) ?? 0;
  switch (n11) {
    case "on-the-ground":
      return ([e15, t6]) => [e15, t6, o10(e15, t6, 0, "ground")];
    case "absolute-height":
      return t5 ? ([e15, t6, n12]) => [e15, t6, n12 + r6] : ([e15, t6]) => [e15, t6, r6];
    case "relative-to-ground":
      return t5 ? ([e15, t6, n12]) => [e15, t6, n12 + o10(e15, t6, n12, "ground") + r6] : ([e15, t6]) => [e15, t6, o10(e15, t6, 0, "ground") + r6];
    case "relative-to-scene":
      return t5 ? ([e15, t6, n12]) => [e15, t6, n12 + o10(e15, t6, n12, "scene") + r6] : ([e15, t6]) => [e15, t6, o10(e15, t6, 0, "scene") + r6];
    default:
      return null;
  }
}
function Z(e14) {
  return e14.hasZ ? new m2({
    hasZ: false,
    hasM: false,
    spatialReference: e14.spatialReference,
    paths: x3(e14.paths, ([e15, t5]) => [e15, t5])
  }) : e14;
}
function x3(e14, t5) {
  const n11 = e14.length, r6 = new Array(n11);
  for (let s8 = 0; s8 < n11; ++s8) {
    const n12 = e14[s8], o10 = n12.length, a7 = new Array(n12.length);
    r6[s8] = a7;
    for (let e15 = 0; e15 < o10; ++e15) a7[e15] = t5(n12[e15]);
  }
  return r6;
}
function M2(e14) {
  return A4(e14) && e14.paths.length > 0 && e14.paths.every((e15) => e15.length >= 2);
}
function A4(e14) {
  return null != e14 && "polyline" === e14.type;
}
function S2(t5, n11, s8, o10, a7) {
  const {
    spatialReference: c5,
    hasZ: u10
  } = t5, l3 = {
    from: null,
    to: null,
    distance: 0,
    azimuth: 0,
    reverseAzimuth: 0,
    spatialReference: c5,
    metersPerSR: W(c5)
  }, f7 = [], h5 = [];
  let p8 = 0;
  for (let r6 = 0; r6 < t5.paths.length; ++r6) {
    const i8 = t5.paths[r6], c6 = new Array(), u11 = new Array();
    let m8 = 0;
    for (let t6 = 1; t6 < i8.length; ++t6) {
      const r7 = i8[t6 - 1], f8 = i8[t6], h6 = o10(l3, r7, f8);
      let d8;
      for (d8 = m8; d8 < h6.distance && !x2(d8, h6.distance); d8 += n11) c6.push(a7(h6, d8)), u11.push((p8 + d8) * s8);
      m8 = d8 - h6.distance, p8 += h6.distance, c6.push(f8), u11.push(p8 * s8);
    }
    f7[r6] = c6, h5[r6] = u11;
  }
  return {
    densifiedPath: new m2({
      spatialReference: c5,
      hasZ: u10,
      paths: f7
    }),
    distances: h5
  };
}
function b4(e14, t5, n11) {
  const {
    hasZ: r6
  } = e14;
  return S2(e14, t5, n11, G, r6 ? k2 : W2);
}
function U(e14, t5, n11) {
  const {
    hasZ: r6
  } = e14;
  return S2(e14, t5, n11, z, r6 ? T2 : E2);
}
function z(e14, t5, n11) {
  return e14.distance = 0, j2(e14, t5, n11, e14.spatialReference), e14.from = t5, e14.to = n11, e14;
}
function G(e14, t5, n11) {
  return e14.from = t5, e14.to = n11, e14.distance = m4(n11, t5) * e14.metersPerSR, e14;
}
function E2({
  from: e14,
  azimuth: t5,
  spatialReference: n11
}, r6) {
  return b3([0, 0], e14, t5, r6, n11);
}
function T2({
  from: e14,
  to: n11,
  azimuth: r6,
  distance: s8,
  spatialReference: o10
}, a7) {
  const i8 = a7 / s8, c5 = [0, 0, f3(e14[2], n11[2], i8)];
  return b3(c5, e14, r6, a7, o10), c5;
}
function W2({
  from: e14,
  to: t5,
  distance: n11
}, r6) {
  return _2([0, 0], e14, t5, r6 / n11);
}
function k2({
  from: e14,
  to: t5,
  distance: n11
}, r6) {
  return A3([0, 0, 0], e14, t5, r6 / n11);
}
function C2(e14) {
  return w3(e14.spatialReference) ? e14 : K(e14, f2.WGS84);
}
function D(e14) {
  return e14.paths.reduce((e15, t5) => e15 + t5.length, 0);
}
function L2(e14, t5, n11) {
  return D(e14) + Math.floor(t5 / n11) + Math.max(0, e14.paths.reduce((e15) => 1 + e15, 0) - 1);
}

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/statisticsUtils.js
function i4(t5, i8) {
  const o10 = t5.length;
  if (0 === o10) return null;
  const s8 = t5[0], m8 = s8.sampledZ;
  let c5 = m8, p8 = m8, h5 = 0, E5 = 0, f7 = null, g2 = null, x6 = null != m8 ? m8 : 0, _6 = 0, S5 = 0, d8 = null != m8 ? 1 : 0, C3 = 0, D2 = 0;
  const N3 = W(i8), P5 = L(i8), H = r2().minSlopeSampleDistance / N3, Z3 = 2 * H, j7 = new v5(), y5 = new v5(), M5 = () => {
    G2(), j7.copy(y5), y5.reset();
  }, w5 = (t6, n11) => {
    M5(), t6 > 0 && t6 - j7.start <= Z3 && (t6 = j7.start + H), y5.restart(t6, n11);
  }, G2 = () => {
    if (j7.isHole || y5.isHole) return;
    const t6 = y5.avgElevation - j7.avgElevation, n11 = y5.start - j7.start, e14 = t6 * P5, a7 = n11 * N3, i9 = j(Math.atan2(e14, a7), "radians", "degrees");
    i9 > 0 ? (_6 += i9, f7 = u6(f7, i9), C3++) : i9 < 0 && (S5 -= i9, g2 = u6(g2, -i9), D2++);
  };
  null != s8.sampledZ && w5(s8.distance, s8.sampledZ);
  for (let n11 = 1; n11 < o10; ++n11) {
    const e14 = t5[n11 - 1], l3 = t5[n11], a7 = l3.sampledZ;
    if (null == a7) {
      y5.isHole || M5();
      continue;
    }
    d8++, x6 += a7, c5 = r5(c5, a7), p8 = u6(p8, a7), y5.isHole || l3.distance - y5.start >= H ? w5(l3.distance, a7) : y5.insert(a7);
    const i9 = e14.sampledZ;
    if (null != i9) {
      const t6 = a7 - i9;
      t6 > 0 ? h5 += t6 : t6 < 0 && (E5 -= t6);
    }
  }
  return M5(), 0 === d8 ? null : {
    maxDistance: t5[o10 - 1].distance,
    minElevation: c5,
    maxElevation: p8,
    avgElevation: 0 === d8 ? null : x6 / d8,
    elevationGain: h5,
    elevationLoss: E5,
    maxPositiveSlope: f7,
    maxNegativeSlope: g2,
    avgPositiveSlope: 0 === C3 ? null : _6 / C3,
    avgNegativeSlope: 0 === D2 ? null : S5 / D2
  };
}
function o7(n11) {
  const e14 = n11.filter(O), l3 = e14.length;
  if (0 === l3) return null;
  const a7 = e14[0];
  if (1 === l3) return a7;
  let i8 = a7.maxDistance, o10 = a7.minElevation, s8 = a7.maxElevation, m8 = a7.maxPositiveSlope, v7 = a7.maxNegativeSlope;
  for (let t5 = 1; t5 < e14.length; ++t5) {
    const n12 = e14[t5];
    i8 = u6(i8, n12.maxDistance), o10 = r5(o10, n12.minElevation), s8 = u6(s8, n12.maxElevation), m8 = u6(m8, n12.maxPositiveSlope), v7 = u6(v7, n12.maxNegativeSlope);
  }
  return {
    maxDistance: i8,
    minElevation: o10,
    maxElevation: s8,
    avgElevation: null,
    elevationGain: null,
    elevationLoss: null,
    maxPositiveSlope: m8,
    maxNegativeSlope: v7,
    avgPositiveSlope: null,
    avgNegativeSlope: null
  };
}
function s6(t5) {
  let l3 = null, a7 = null, i8 = null;
  for (const o10 of t5) {
    if (null == o10) continue;
    const {
      statistics: t6,
      spatialReference: s8
    } = o10;
    if (null == t6) continue;
    const v7 = W(s8);
    l3 = u6(l3, m6(t6.maxDistance, v7));
    const c5 = L(s8);
    i8 = r5(i8, m6(t6.minElevation, c5)), a7 = u6(a7, m6(t6.maxElevation, c5));
  }
  return {
    minDistance: 0,
    maxDistance: l3 ?? 0,
    minElevation: i8 ?? 0,
    maxElevation: a7 ?? 0
  };
}
function r5(t5, n11) {
  return null == n11 ? t5 : null != t5 ? Math.min(t5, n11) : n11;
}
function u6(t5, n11) {
  return null == n11 ? t5 : null != t5 ? Math.max(t5, n11) : n11;
}
function m6(t5, n11) {
  return null != t5 && null != n11 ? t5 * n11 : null;
}
var v5 = class {
  constructor() {
    this._start = 0, this._totalElevation = 0, this._sampleCount = 0;
  }
  get avgElevation() {
    return this._totalElevation / this._sampleCount;
  }
  get isHole() {
    return 0 === this._sampleCount;
  }
  get start() {
    return this._start;
  }
  copy(t5) {
    this._start = t5._start, this._sampleCount = t5._sampleCount, this._totalElevation = t5._totalElevation;
  }
  reset() {
    this._start = 0, this._sampleCount = 0, this._totalElevation = 0;
  }
  restart(t5, n11) {
    this._start = t5, this._sampleCount = 1, this._totalElevation = n11;
  }
  insert(t5) {
    ++this._sampleCount, this._totalElevation += t5;
  }
};

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/profileUtils.js
function P3(e14, t5) {
  return __asyncGenerator(this, null, function* () {
    const {
      view: s8,
      geometry: n11,
      elevationInfo: i8,
      providers: l3,
      options: a7
    } = e14, c5 = s8.spatialReference;
    if (!c5 || null == n11 || !M2(n11)) throw new r4(o6.InvalidGeometry);
    const p8 = l3.length;
    if (0 === p8) return null;
    const m8 = Math.round(a7.maxTotalSamples / p8);
    if (D(n11) > m8) throw new r4(o6.TooComplex);
    const g2 = yield new __await(y2(n11, i8, s8, c5, a7, m8, t5));
    let v7 = 0;
    const P5 = new Array(p8), R6 = new Array(p8);
    for (let r6 = 0; r6 < p8; r6++) {
      const o10 = U2(g2);
      P5[r6] = o10, v7 += o10.samples.length;
      const s9 = __spreadProps(__spreadValues({}, e14), {
        provider: l3[r6],
        result: o10,
        densificationResult: g2
      });
      R6[r6] = j4(s9, t5)[Symbol.iterator]();
    }
    if (v7 > a7.maxTotalSamples) throw new r4(o6.TooComplex);
    const Z3 = yield new __await(Promise.all(R6.map((e15) => {
      const t6 = e15.next();
      return true === t6.done ? Promise.resolve(null) : t6.value;
    })));
    s(t5);
    for (let r6 = 0; r6 < p8; r6++) P5[r6] = Z3[r6];
    yield P5, yield new __await(A(e14.delayAfterPreview ?? r2().delayAfterPreviewMillis, null, t5.signal));
    const x6 = [];
    try {
      let e15;
      do {
        e15 = false;
        for (let t6 = 0; t6 < p8; t6++) {
          const r6 = R6[t6].next();
          false === r6.done && (x6.push({
            resultPromise: r6.value,
            index: t6
          }), e15 = true);
        }
      } while (e15);
    } finally {
      R6.forEach((e15) => e15.return?.());
    }
    for (const {
      resultPromise: o10,
      index: u10
    } of x6) P5[u10] = yield new __await(o10), s(t5), yield P5;
    for (const r6 of P5) null != r6 && (r6.progress = 1);
    yield P5;
  });
}
function* j4(t5, r6) {
  const {
    densificationResult: o10
  } = t5, s8 = __spreadProps(__spreadValues({}, t5), {
    abortOptions: r6,
    densificationResult: o10
  }), n11 = n7(0, s8.result.samples.length), i8 = n11.slice(0, s8.provider.numSamplesForPreview);
  yield R3(s8, i8, true);
  const l3 = p(n11, s8.provider.numSamplesPerChunk);
  for (const e14 of l3) yield R3(s8, e14, false);
}
function R3(_0, _1, _22) {
  return __async(this, arguments, function* ({
    densificationResult: e14,
    result: t5,
    provider: r6,
    queue: o10,
    abortOptions: n11,
    cache: l3
  }, a7, c5) {
    const {
      densifiedPath: p8,
      pathLength: f7
    } = e14, d8 = t5.spatialReference, {
      samples: h5
    } = t5, y5 = [];
    for (let s8 = 0; s8 < a7.length; s8++) {
      const e15 = h5[a7[s8]];
      y5[s8] = e15.coordinate;
    }
    try {
      return yield o10.push({
        geometry: new u4({
          spatialReference: d8,
          points: y5,
          hasZ: p8.hasZ
        }),
        provider: r6,
        indices: a7,
        preview: c5,
        result: t5,
        queryOptions: __spreadProps(__spreadValues({}, r2().defaultQueryOptions()), {
          minDemResolution: c5 ? Math.round(f7 / r6.numSamplesForPreview) : Math.round(f7 / h5.length),
          cache: l3
        })
      }, n11), __spreadValues({}, t5);
    } catch (w5) {
      return b(w5) ? null : d7;
    }
  });
}
function Z2(e14) {
  return new _3({
    priority: I.ELEVATION_PROFILE,
    concurrency: 1,
    scheduler: e14,
    process: (e15) => __async(this, null, function* () {
      s(e15.queryOptions);
      try {
        yield x4(e15);
      } catch (t5) {
        f(t5);
      }
    })
  });
}
function x4(_0) {
  return __async(this, arguments, function* ({
    geometry: e14,
    provider: t5,
    indices: r6,
    preview: o10,
    result: s8,
    queryOptions: n11
  }) {
    if (0 === r6.length) return;
    const i8 = (yield M3(t5, e14, n11)).geometry, {
      hasZ: l3,
      points: a7
    } = i8, c5 = n11.noDataValue, {
      samples: p8
    } = s8;
    for (let u10 = 0; u10 < r6.length; u10++) {
      const e15 = p8[r6[u10]];
      if (e15.isHole) continue;
      const t6 = l3 ? a7[u10][2] : null;
      null === t6 || t6 === c5 ? e15.sampledZ = null : (s8.hasZ = true, e15.sampledZ = t6), e15.sampled = true;
    }
    E3(p8), s8.progress = o10 ? 0 : s8.progress + r6.length / p8.length, s8.statistics = i4(s8.samples, s8.spatialReference);
  });
}
function E3(e14) {
  const t5 = e14.length - 1;
  let r6 = 0;
  for (let o10 = 1; o10 <= t5; o10++) {
    (e14[o10].sampled || o10 === t5) && (O3(e14, r6, o10), r6 = o10);
  }
}
function O3(e14, r6, o10) {
  if (o10 - r6 == 1) return;
  const s8 = e14[r6], n11 = s8.sampledZ, i8 = e14[o10], l3 = i8.sampledZ;
  if (null == n11 || null == l3) {
    for (let t5 = r6 + 1; t5 < o10; t5++) e14[t5].sampledZ = null;
    return;
  }
  const a7 = s8.distance, c5 = i8.distance - a7;
  for (let p8 = r6 + 1; p8 < o10; p8++) {
    const r7 = e14[p8], o11 = (r7.distance - a7) / c5;
    r7.sampledZ = f3(n11, l3, o11);
  }
}
function U2({
  densifiedPath: e14,
  distances: t5
}) {
  const r6 = e14.spatialReference, o10 = s3(r6), s8 = e14.paths, n11 = s8.length, i8 = [];
  let c5 = null, p8 = 0;
  for (let a7 = 0; a7 < n11; a7++) {
    const e15 = s8[a7], r7 = e15.length, n12 = t5[a7];
    for (let t6 = 0; t6 < r7; t6++) {
      const r8 = e15[t6], s9 = n12[t6];
      o10 && (r8[0] = v2(r8[0], o10.valid[0], o10.valid[1])), c5 && 0 === t6 && S3(i8, c5, r8, p8, s9), i8.push(q(r8, s9)), c5 = r8, p8 = s9;
    }
  }
  return {
    progress: 0,
    samples: i8,
    hasZ: false,
    statistics: null,
    spatialReference: r6
  };
}
function S3(e14, t5, r6, o10, s8) {
  e14.push(A5(t5, o10)), e14.push(A5(r6, s8));
}
function q(e14, t5) {
  return {
    coordinate: e14,
    distance: t5,
    sampledZ: null,
    sampled: false,
    isHole: false
  };
}
function A5(e14, t5) {
  return {
    coordinate: e14,
    distance: t5,
    sampledZ: null,
    sampled: true,
    isHole: true
  };
}
function M3(e14, t5, r6) {
  return __async(this, null, function* () {
    try {
      return yield e14.queryElevation(t5, r6);
    } catch (o10) {
      throw new r4(o6.ElevationQueryError);
    }
  });
}

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileController.js
var M4 = "line-change";
var y3 = class extends S {
  constructor(e14) {
    super(e14), this._updateTask = null, this._paramsPerProfile = /* @__PURE__ */ new Map(), this._getUpdateParametersMemoized = t((e15, t5, o10) => ({
      stationary: e15,
      visibleProfiles: t5,
      generationParameters: o10
    })), this._getGenerationParametersMemoized = t((e15, t5, o10, s8, r6, i8, a7) => A4(t5) && M2(t5) && null != s8 ? {
      view: e15,
      geometry: t5,
      elevationInfo: o10,
      options: i8,
      queue: s8,
      cache: r6,
      slicePlane: a7
    } : null), this._getElevationInfoMemoized = t((e15, t5) => ({
      mode: e15,
      offset: t5
    })), this._getOptionsMemoized = t((e15, t5, o10) => {
      const {
        densificationMaxSamples: s8,
        maxTotalSamples: r6
      } = r2();
      return {
        geodesicDistanceThreshold: e15,
        samplingDistance: t5,
        densificationMaxSamples: Math.round(s8 / o10),
        maxTotalSamples: r6
      };
    }), this._updateThrottled = e6((e15) => d(this._update(e15)), r2().updateThrottleMillis);
  }
  initialize() {
    const e14 = this.viewModel;
    this.addHandles([d3(() => e14.profiles.toArray(), (e15) => {
      this._abortUpdate(), this._paramsPerProfile.clear(), this.removeHandles(M4), this.addHandles(e15.map((e16) => o([e16.attach(this.viewModel), e16.on("change", () => {
        this._invalidateProfile(e16);
      })])), M4);
    }, A2), this._updateThrottled, d3(() => this._updateParameters, this._updateThrottled, A2)]);
  }
  destroy() {
    this._paramsPerProfile.clear();
  }
  get _updateParameters() {
    const {
      viewModel: e14
    } = this, t5 = e14.view;
    return this._getUpdateParametersMemoized(null == t5 || t5.stationary, this.viewModel.visibleProfiles, this._generationParameters);
  }
  get _generationParameters() {
    const {
      view: e14,
      input: t5,
      queue: o10,
      tileCache: s8
    } = this.viewModel;
    return null != e14 && e14.ready ? this._getGenerationParametersMemoized(e14, t5?.geometry, this._elevationInfo, o10, s8, this._options, "3d" === e14.type ? e14.slicePlane : null) : null;
  }
  get _elevationInfo() {
    const e14 = this.viewModel.input, t5 = e14 ? f4(e14) ? null : a3(e14) : null;
    return null != t5 ? this._getElevationInfoMemoized(t5.mode, t5.offset) : null;
  }
  get _options() {
    const e14 = this.viewModel, t5 = e14.visibleProfiles.length;
    let o10 = e14.minDemResolution ?? r2().defaultDemResolution;
    return o10 = parseFloat(o10.toFixed(2)), this._getOptionsMemoized(e14.geodesicDistanceThreshold, o10, t5);
  }
  _update(_0) {
    return __async(this, arguments, function* ({
      stationary: e14,
      visibleProfiles: t5,
      generationParameters: s8
    }) {
      this._abortUpdate(), e14 && (null != s8 ? this._updateTask = d2((e15) => __async(this, null, function* () {
        this.viewModel.error = null;
        const o10 = t5.filter((e16) => !this._isProfileValid(e16, s8)), r6 = P3(__spreadProps(__spreadValues({}, s8), {
          providers: o10
        }), {
          signal: e15
        });
        try {
          try {
            for (var iter = __forAwait(r6), more, temp, error; more = !(temp = yield iter.next()).done; more = false) {
              const t6 = temp.value;
              s(e15), this._clearInvalidResults(s8);
              for (let e16 = 0; e16 < o10.length; e16++) o10[e16].result = t6[e16];
            }
          } catch (temp) {
            error = [temp];
          } finally {
            try {
              more && (temp = iter.return) && (yield temp.call(iter));
            } finally {
              if (error)
                throw error[0];
            }
          }
          for (const e16 of o10) this._paramsPerProfile.set(e16, s8);
        } catch (i8) {
          a(i8), this._abortUpdate(), this.viewModel.error = i8, o10.forEach((e16) => {
            e16.result = null;
          });
        }
      })) : this._clearResults());
    });
  }
  _abortUpdate() {
    this._updateTask = e(this._updateTask);
  }
  _isProfileValid(e14, t5) {
    return this._paramsPerProfile.has(e14) && this._paramsPerProfile.get(e14) === t5;
  }
  _invalidateProfile(e14) {
    this._paramsPerProfile.delete(e14), this._updateThrottled(this._updateParameters);
  }
  _clearInvalidResults(e14) {
    for (const t5 of this.viewModel.profiles.items) this._isProfileValid(t5, e14) || (t5.result = null, this._paramsPerProfile.delete(t5));
  }
  _clearResults() {
    for (const e14 of this.viewModel.profiles.items) e14.result = null, this._paramsPerProfile.delete(e14);
  }
};
e3([y({
  nonNullable: true
})], y3.prototype, "viewModel", void 0), e3([y()], y3.prototype, "_updateParameters", null), e3([y()], y3.prototype, "_generationParameters", null), e3([y()], y3.prototype, "_elevationInfo", null), e3([y()], y3.prototype, "_options", null), y3 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileController")], y3);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/unitUtils.js
function l(t5, l3) {
  if (null == t5 || null == l3) return null;
  const {
    samples: i8,
    spatialReference: s8
  } = t5, {
    distance: v7,
    elevation: r6
  } = l3, u10 = W(s8), c5 = L(s8), m8 = i8.length, p8 = new Array(m8);
  for (let e14 = 0; e14 < m8; ++e14) {
    const n11 = i8[e14], t6 = n11.sampledZ, l4 = n11.coordinate;
    p8[e14] = {
      x: l4[0],
      y: l4[1],
      z: t6,
      distance: a6(n11.distance, u10, v7),
      elevation: o8(t6, c5, r6)
    };
  }
  return p8;
}
function i5(t5, l3) {
  if (null == t5 || null == l3 || null == t5.statistics || null == t5.spatialReference) return null;
  const {
    distance: i8,
    elevation: s8
  } = l3, {
    statistics: v7,
    spatialReference: r6
  } = t5, u10 = W(r6), c5 = L(r6);
  return {
    maxDistance: a6(v7.maxDistance, u10, i8),
    minElevation: o8(v7.minElevation, c5, s8),
    maxElevation: o8(v7.maxElevation, c5, s8),
    avgElevation: o8(v7.avgElevation, c5, s8),
    elevationGain: o8(v7.elevationGain, c5, s8),
    elevationLoss: o8(v7.elevationLoss, c5, s8),
    maxPositiveSlope: v7.maxPositiveSlope,
    maxNegativeSlope: v7.maxNegativeSlope,
    avgPositiveSlope: v7.avgPositiveSlope,
    avgNegativeSlope: v7.avgNegativeSlope
  };
}
function a6(e14, n11, l3) {
  return null == e14 ? null : j(e14 * n11, "meters", l3);
}
function o8(e14, n11, l3) {
  return null == e14 ? null : j(e14 * n11, "meters", l3);
}

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileLine.js
var f5 = class extends o3.EventedAccessor {
  constructor(t5) {
    super(t5), this.type = null, this.id = n2(), this.title = null, this.color = new u5("#000000"), this.visible = true, this._getSamplesMemoized = t((t6, e14) => l(t6, e14)), this._getStatisticsMemoized = t((t6, e14) => i5(t6, e14)), this.viewVisualizationEnabled = true, this.result = null, this.effectiveUnits = null, this.numSamplesForPreview = 30, this.numSamplesPerChunk = 200, this.chartFillEnabled = true, this.chartStrokeWidth = 1.5, this.chartStrokeOffsetY = 0, this._viewModel = null;
  }
  get progress() {
    return null != this.result && this.visible ? this.result.progress : 0;
  }
  get samples() {
    return this._getSamplesMemoized(this.result, this.effectiveUnits);
  }
  get statistics() {
    return this._getStatisticsMemoized(this.result, this.effectiveUnits);
  }
  get hoveredPoint() {
    const t5 = this._viewModel?.hoveredChartPosition;
    return null != t5 ? this._getPoint(t5) : null;
  }
  get available() {
    return true;
  }
  get hasZ() {
    const t5 = this.result;
    return null != t5 && t5.hasZ;
  }
  get minDemResolution() {
    return r2().defaultDemResolution;
  }
  queryElevation() {
    throw new Error("not implemented");
  }
  attach(t5) {
    return this._viewModel = t5, o([d3(() => t5.effectiveUnits, (t6) => {
      this.effectiveUnits = t6;
    }, A2), d3(() => [t5.input], () => this._onChange(), C)]);
  }
  toggleVisibility(t5) {
    this.visible = void 0 === t5 ? !this.visible : t5;
  }
  _onChange() {
    this.emit("change");
  }
  _getPoint(t5) {
    const {
      samples: e14,
      result: i8
    } = this;
    if (null == e14 || null == i8) return null;
    const r6 = e14.length;
    if (0 === r6) return null;
    const s8 = e14[r6 - 1].distance, l3 = x(e14, t5 * s8, (t6) => t6.distance);
    if (null == l3) return null;
    const {
      x: n11,
      y: p8,
      z: a7
    } = l3;
    return null == a7 ? null : new _({
      x: n11,
      y: p8,
      z: a7,
      spatialReference: i8.spatialReference
    });
  }
};
e3([y({
  nonNullable: true
})], f5.prototype, "id", void 0), e3([y({
  nonNullable: true
})], f5.prototype, "title", void 0), e3([y({
  type: u5,
  nonNullable: true
})], f5.prototype, "color", void 0), e3([y({
  nonNullable: true
})], f5.prototype, "visible", void 0), e3([y({
  readOnly: true
})], f5.prototype, "progress", null), e3([y({
  readOnly: true
})], f5.prototype, "samples", null), e3([y({
  readOnly: true
})], f5.prototype, "statistics", null), e3([y()], f5.prototype, "hoveredPoint", null), e3([y()], f5.prototype, "viewVisualizationEnabled", void 0), e3([y()], f5.prototype, "available", null), e3([y()], f5.prototype, "result", void 0), e3([y()], f5.prototype, "effectiveUnits", void 0), e3([y()], f5.prototype, "numSamplesForPreview", void 0), e3([y()], f5.prototype, "numSamplesPerChunk", void 0), e3([y()], f5.prototype, "chartFillEnabled", void 0), e3([y()], f5.prototype, "chartStrokeWidth", void 0), e3([y()], f5.prototype, "chartStrokeOffsetY", void 0), e3([y({
  readOnly: true
})], f5.prototype, "hasZ", null), e3([y({
  readOnly: true
})], f5.prototype, "minDemResolution", null), e3([y()], f5.prototype, "_viewModel", void 0), f5 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileLine")], f5);
var y4 = f5;

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/elevationQuerySourceUtils.js
function o9(l3) {
  if (null == l3) return null;
  if (l3 instanceof b2) return e13(l3);
  const t5 = l3.tileInfo;
  if (null == t5) return null;
  const o10 = u(t5.lods);
  return null == o10 ? null : o10.resolution * W(t5.spatialReference);
}
function e13(n11) {
  if (null == n11) return null;
  const r6 = n11.layers.items.map(i6).filter(O);
  return c(r6) ?? null;
}
function i6(n11) {
  return n11 && "tileInfo" in n11 ? o9(n11) : null;
}

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileLineGround.js
var p3 = class extends y4 {
  constructor(e14) {
    super(e14), this.type = "ground", this.color = new u5("#ff7f00"), this.viewVisualizationEnabled = true, this.numSamplesForPreview = 50, this.numSamplesPerChunk = 1e3, this._getQueryElevationDependencies = t((e15, o10) => ({
      ground: e15,
      groundLayers: o10
    }));
  }
  get available() {
    const e14 = this._ground;
    return null != e14 && e14.layers.some((e15) => e15.visible);
  }
  get minDemResolution() {
    return e13(this._ground);
  }
  get _queryElevationDependencies() {
    return this._getQueryElevationDependencies(this._ground, this._groundLayers);
  }
  get _ground() {
    return this._viewModel?.view?.map?.ground;
  }
  get _groundLayers() {
    return this._ground?.layers?.toArray() ?? [];
  }
  queryElevation(e14, o10) {
    return __async(this, null, function* () {
      const r6 = this._queryElevationDependencies;
      if (null == r6) throw new Error("ElevationProfileLineGround: no dependencies");
      const {
        ground: t5
      } = r6;
      if (null == t5) throw new Error("No ground configured in the view");
      const n11 = yield t5.queryElevation(e14, o10), s8 = L(e14.spatialReference), l3 = L(t5.layers.at(0).spatialReference);
      if (s8 !== l3) {
        const e15 = n11.geometry;
        e15.points = e15.points.map(([e16, r7, t6]) => [e16, r7, t6 === o10.noDataValue ? t6 : t6 * l3 / s8]);
      }
      return n11;
    });
  }
  attach(e14) {
    return o([super.attach(e14), d3(() => this._queryElevationDependencies, () => this._onChange())]);
  }
};
e3([y({
  type: u5,
  nonNullable: true
})], p3.prototype, "color", void 0), e3([y()], p3.prototype, "viewVisualizationEnabled", void 0), e3([y()], p3.prototype, "available", null), e3([y({
  readOnly: true
})], p3.prototype, "minDemResolution", null), e3([y()], p3.prototype, "_queryElevationDependencies", null), e3([y()], p3.prototype, "_ground", null), e3([y()], p3.prototype, "_groundLayers", null), p3 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileLineGround")], p3);
var c3 = p3;

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileLineInput.js
var u7 = class extends y4 {
  constructor(e14) {
    super(e14), this.type = "input", this.color = new u5("#00c8c8"), this.viewVisualizationEnabled = false, this.numSamplesForPreview = 50, this.numSamplesPerChunk = 500, this.chartFillEnabled = false, this.chartStrokeOffsetY = -1, this._getQueryElevationDependencies = t((e15, t5, o10, r6, i8) => e15 ? {
      elevationInfo: e15,
      visibleLayers: t5,
      view: o10,
      stationary: r6,
      spatialReference: i8
    } : null);
  }
  get queryElevationDependencies() {
    const e14 = this._viewModel?.view;
    return null == e14 ? null : this._getQueryElevationDependencies(this._elevationInfo, this._visibleLayers, e14, e14.stationary, e14.spatialReference);
  }
  get available() {
    return !this._viewModel?.inputIsSketched;
  }
  get _elevationInfo() {
    const e14 = this._viewModel?.input;
    return e14 ? a3(e14) : null;
  }
  get _visibleLayers() {
    return this._viewModel?.view?.map?.allLayers?.filter((e14) => e14.visible).toArray() ?? [];
  }
  queryElevation(_0, _1) {
    return __async(this, arguments, function* (e14, {
      noDataValue: t5,
      signal: o10
    }) {
      const r6 = this.queryElevationDependencies;
      if (null == r6) throw new Error("ElevationProfileLineInput: no dependencies");
      const {
        view: i8,
        elevationInfo: n11,
        spatialReference: s8
      } = r6;
      if ("on-the-ground" === n11.mode && "3d" === i8.type && s8) {
        const r7 = yield w.fromGeometry(e14).project(s8, o10);
        if (!r7) return {
          geometry: e14,
          noDataValue: t5
        };
        const n12 = i8.elevationProvider;
        return r7.coordinates.forEach((e15) => {
          e15.z = n12.getElevation(e15.x, e15.y, 0, s8, "ground") ?? 0;
        }), {
          geometry: r7.export(),
          noDataValue: t5
        };
      }
      return {
        geometry: e14,
        noDataValue: t5
      };
    });
  }
  attach(e14) {
    const t5 = () => this._onChange();
    return o([super.attach(e14), d3(() => this.queryElevationDependencies, t5), v(() => e14.elevationProvider, "elevation-change", t5, {
      onListenerAdd: t5,
      onListenerRemove: t5
    })]);
  }
};
e3([y({
  type: u5,
  nonNullable: true
})], u7.prototype, "color", void 0), e3([y()], u7.prototype, "viewVisualizationEnabled", void 0), e3([y()], u7.prototype, "queryElevationDependencies", null), e3([y()], u7.prototype, "available", null), e3([y()], u7.prototype, "_elevationInfo", null), e3([y()], u7.prototype, "_visibleLayers", null), u7 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileLineInput")], u7);
var v6 = u7;

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileLineQuery.js
var u8 = class extends y4 {
  constructor(e14) {
    super(e14), this.type = "query", this.color = new u5("#db334a"), this.viewVisualizationEnabled = true, this.source = null, this.numSamplesForPreview = 50, this.numSamplesPerChunk = 500;
  }
  get minDemResolution() {
    return o9(this.source);
  }
  get available() {
    const e14 = this.source;
    return !!e14 && (null == e14.visible || e14.visible) && (null == e14.layers || e14.layers.some((e15) => e15.visible));
  }
  queryElevation(e14, o10) {
    if (!this.source) throw new Error("No source configured for the elevation profile line");
    return this.source.queryElevation(e14, o10);
  }
  attach(e14) {
    return o([super.attach(e14), d3(() => this.source, () => this._onChange(), C)]);
  }
};
e3([y({
  type: u5,
  nonNullable: true
})], u8.prototype, "color", void 0), e3([y()], u8.prototype, "viewVisualizationEnabled", void 0), e3([y()], u8.prototype, "source", void 0), e3([y({
  readOnly: true
})], u8.prototype, "minDemResolution", null), e3([y()], u8.prototype, "available", null), u8 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileLineQuery")], u8);
var p4 = u8;

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileLineView.js
var j5 = 2e5;
var I2 = class extends y4 {
  constructor(e14) {
    super(e14), this.type = "view", this.color = new u5("#cf4ccf"), this.viewVisualizationEnabled = true, this.include = null, this.exclude = null, this.numSamplesForPreview = 50, this.numSamplesPerChunk = 25, this._getQueryElevationDependencies = t((e15, t5, r6, i8, o10, n11, s8) => ({
      inputGraphicUid: null != e15 ? x5(e15) : null,
      visibleLayers: t5,
      maxIntersectionDistance: r6,
      intersectOptions: i8,
      view: o10,
      stationary: n11,
      spatialReference: s8
    })), this._vecA = n4(), this._vecB = n4(), this._ray = m3();
  }
  get minDemResolution() {
    const e14 = this._viewModel?.view;
    if (null == e14 || "3d" !== e14.type) return null;
    const t5 = e14.pointsOfInterest?.focus?.worldUnitsPerContentPixel;
    return null == t5 ? null : t5 * L(e14.spatialReference);
  }
  get queryElevationDependencies() {
    const e14 = this._view;
    return e14 ? this._getQueryElevationDependencies(this._viewModel?.input, this._visibleLayers, this._maxIntersectionDistance, this._intersectOptions, e14, e14.stationary, e14.spatialReference) : null;
  }
  get _visibleLayers() {
    return this._view?.map?.allLayers?.filter((e14) => e14.visible).toArray() ?? [];
  }
  get _intersectOptions() {
    const e14 = this._view;
    if (null == e14 || e14.destroyed) return {};
    const t5 = R(e14, {
      include: this.include,
      exclude: this.exclude
    }), r6 = R(e14, {
      exclude: this._pointCloudLayers
    });
    return t5.exclude = o2(t5.exclude, r6.exclude), t5;
  }
  get _pointCloudLayers() {
    const e14 = this._view;
    return null == e14 ? [] : e14.allLayerViews.toArray().filter((e15) => "point-cloud" === e15.layer?.type).map((e15) => e15.layer);
  }
  get _view() {
    const e14 = this._viewModel?.view;
    return null != e14 && "3d" === e14.type ? e14 : null;
  }
  get _maxIntersectionDistance() {
    const e14 = this._view;
    return e14?.renderCoordsHelper ? s4(e14.spatialReference).radius / e14.renderCoordsHelper.unitInMeters : Number.POSITIVE_INFINITY;
  }
  get _intersector() {
    const e14 = this._view;
    if (null == e14) return null;
    const t5 = T(e14.state.viewingMode), r6 = t5.options;
    return r6.hud = false, r6.invisibleTerrain = false, r6.backfacesTerrain = false, r6.selectionMode = false, r6.store = e8.ALL, t5;
  }
  queryElevation(_0, _1) {
    return __async(this, arguments, function* (e14, {
      noDataValue: t5,
      signal: r6
    }) {
      const i8 = this.queryElevationDependencies;
      if (null == i8) throw new Error("ElevationProfileLineInput: no dependencies");
      const o10 = this._intersector;
      if (null == o10) throw new Error("ElevationProfileLineInput: no view");
      const {
        intersectOptions: n11,
        view: s8,
        spatialReference: l3
      } = i8, c5 = s8.renderCoordsHelper, a7 = s8.sceneIntersectionHelper, p8 = this._vecA, d8 = this._vecA, m8 = this._vecB, f7 = this._ray;
      if (!l3) return {
        geometry: e14,
        noDataValue: t5
      };
      const h5 = yield w.fromGeometry(e14).project(l3, r6);
      if (!h5) return {
        geometry: e14,
        noDataValue: t5
      };
      const w5 = h5.coordinates, _6 = w5.length;
      for (let y5 = 0; y5 < _6; ++y5) {
        const e15 = w5[y5];
        o4(m8, e15.x, e15.y, e15.z ?? 0), c5.toRenderCoords(m8, l3, m8), c5.setAltitude(p8, j5, m8);
        const r7 = k(p8, m8, f7);
        a7.computeIntersection(r7, o10, n11, true);
        const s9 = b5(i8, o10.results.all);
        s9 ? (s9.getIntersectionPoint(d8), c5.fromRenderCoords(d8, d8, l3), e15.z = d8[2]) : e15.z = t5;
      }
      return {
        geometry: h5.export(),
        noDataValue: t5
      };
    });
  }
  attach(e14) {
    const t5 = () => this._onChange();
    return o([super.attach(e14), d3(() => this.queryElevationDependencies, t5), v(() => e14.elevationProvider, "elevation-change", t5, {
      onListenerAdd: t5,
      onListenerRemove: t5
    })]);
  }
};
function b5({
  view: e14,
  inputGraphicUid: t5,
  maxIntersectionDistance: r6
}, i8) {
  for (const o10 of i8) {
    if (null != o10.distanceInRenderSpace && o10.distanceInRenderSpace > r6) continue;
    const i9 = m5(o10, e14);
    if (null == i9 || x5(i9) !== t5) return o10;
  }
  return null;
}
function x5(e14) {
  if (e14.layer && "objectIdField" in e14.layer) {
    const t5 = e14.attributes[e14.layer.objectIdField];
    if (t5) return `o-${e14.layer.id}-${t5}`;
  }
  return `u-${e14.uid}`;
}
e3([y({
  type: u5,
  nonNullable: true
})], I2.prototype, "color", void 0), e3([y()], I2.prototype, "viewVisualizationEnabled", void 0), e3([y()], I2.prototype, "include", void 0), e3([y()], I2.prototype, "exclude", void 0), e3([y({
  readOnly: true
})], I2.prototype, "minDemResolution", null), e3([y()], I2.prototype, "queryElevationDependencies", null), e3([y()], I2.prototype, "_visibleLayers", null), e3([y()], I2.prototype, "_intersectOptions", null), e3([y()], I2.prototype, "_pointCloudLayers", null), e3([y()], I2.prototype, "_view", null), e3([y()], I2.prototype, "_maxIntersectionDistance", null), e3([y()], I2.prototype, "_intersector", null), I2 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileLineView")], I2);
var L3 = I2;

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/elevationProfileLineTypes.js
var l2 = {
  base: y4,
  key: "type",
  typeMap: {
    ground: c3,
    input: v6,
    query: p4,
    view: L3
  },
  errorContext: "elevation-profile-line"
};
var p5 = V.ofType(l2);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileInteraction.js
var S4;
var f6;
function b6(t5) {
  return "2d" === t5 ? new d4({
    data: {
      type: "CIMSymbolReference",
      symbol: {
        type: "CIMLineSymbol",
        symbolLayers: [{
          type: "CIMSolidStroke",
          effects: [{
            type: "CIMGeometricEffectDashes",
            dashTemplate: [5, 4],
            lineDashEnding: "FullGap",
            controlPointEnding: "NoConstraint"
          }],
          enable: true,
          capStyle: "Butt",
          joinStyle: "Round",
          width: 1.5,
          color: [0, 0, 0, 255]
        }, {
          type: "CIMSolidStroke",
          enable: true,
          capStyle: "Butt",
          joinStyle: "Round",
          width: 1.5,
          color: [255, 255, 255, 255]
        }]
      }
    }
  }) : new d5({
    color: [0, 0, 0, 0]
  });
}
!function(t5) {
  t5.Ready = "ready", t5.Creating = "creating", t5.Reshaping = "reshaping", t5.ReshapingDisabled = "reshaping-disabled", t5.Selecting = "selecting", t5.Selected = "selected";
}(S4 || (S4 = {})), function(t5) {
  t5.View = "view", t5.Main = "main", t5.Interaction = "interaction";
}(f6 || (f6 = {}));
var k3 = class extends S {
  constructor(t5) {
    super(t5), this.state = S4.Ready, this._pendingStartOptions = null, this._previousInputInfo = null, this._shouldRemoveLastPoint = false, this._sketchedGraphics = /* @__PURE__ */ new WeakSet(), this._creationToolPromise = null, this._updateToolPromise = null, this._updateDisabled = false;
  }
  initialize() {
    this.addHandles(d3(() => ({
      view: this.tool.viewModel.view,
      visible: this.tool.visible
    }), ({
      view: t5,
      visible: e14
    }) => {
      null != t5 && e14 ? this._attach(t5) : this._detach();
    }, A2), f6.View);
  }
  destroy() {
    this._detach();
  }
  get canStopCreating() {
    const t5 = this._geometry, e14 = this._shouldRemoveLastPoint ? 3 : 2;
    return A4(t5) && t5.paths.length > 0 && t5.paths[0].length >= e14;
  }
  get _input() {
    return this.tool.viewModel.input;
  }
  set _input(t5) {
    this.tool.viewModel.input = t5;
  }
  get _geometry() {
    return this._input?.geometry;
  }
  get _visibleAndEditable() {
    return this.tool.visible && this.tool.editable;
  }
  get _view() {
    return this.tool.viewModel.view;
  }
  get test() {
  }
  start(t5 = {
    mode: "sketch"
  }) {
    if (!this.tool.editable) return;
    const e14 = this._view;
    if (null != e14 && e14.ready) switch (this._pendingStartOptions = null, this._stopInteraction(), null == this._previousInputInfo && this._storePreviousInput(this._input), this._setSketchedGraphic(null), t5.mode) {
      case "sketch":
        this._set("state", S4.Creating), this._startCreationInteraction();
        break;
      case "select":
        this._set("state", S4.Selecting), this._startSelectionInteraction();
    }
    else this._pendingStartOptions = t5;
  }
  stop() {
    this._pendingStartOptions = null, this._stopInteractionAndUpdate(), this._clearPreviousInput();
  }
  cancel() {
    this._pendingStartOptions = null, this._stopInteractionAndUpdate(), this._restorePreviousInput();
  }
  clear() {
    this._stopInteractionAndUpdate(), this._set("state", S4.Ready), this._clearPreviousInput(), this._input = null, this._pendingStartOptions = null;
  }
  isSketchedGraphic(t5) {
    return null != t5 && this._sketchedGraphics.has(t5);
  }
  _attach(t5) {
    this._detach();
    const e14 = {
      mode: "3d" === t5.type ? "relative-to-ground" : "on-the-ground",
      offset: null
    };
    this._graphicsLayer = new h3({
      listMode: "hide",
      internal: true,
      elevationInfo: e14
    });
    const i8 = b6(t5.type);
    this._sketchVM = new pe({
      layer: this._graphicsLayer,
      view: t5,
      defaultCreateOptions: {
        mode: "click",
        hasZ: false
      },
      updateOnGraphicClick: false,
      defaultUpdateOptions: {
        reshapeOptions: {
          shapeOperation: "none"
        },
        enableRotation: false,
        enableScaling: false,
        enableMoveAllGraphics: false,
        enableZ: false,
        multipleSelectionEnabled: false,
        toggleToolOnClick: false,
        tool: "reshape"
      },
      polylineSymbol: i8,
      activeLineSymbol: i8
    }), this.addHandles([p2(() => t5.ready, () => {
      const t6 = this._pendingStartOptions;
      t6 && this.start(t6);
    }, A2), d3(() => [this._input, this._visibleAndEditable], () => this._update(), A2), d3(() => ({
      map: t5.map,
      graphicsLayer: this._graphicsLayer
    }), ({
      map: t6,
      graphicsLayer: e15
    }) => {
      null != t6 && null != e15 && t6.add(e15), this._update();
    }, A2)], f6.Main);
  }
  _detach() {
    this.removeHandles(f6.Main), this._sketchVM = u2(this._sketchVM), this._creationToolPromise = null, this._updateToolPromise = null;
    const t5 = this._view?.map, e14 = this._graphicsLayer;
    null != t5 && null != e14 && t5.remove(e14), this._graphicsLayer = u2(this._graphicsLayer), this._shouldRemoveLastPoint = false, this._set("state", S4.Ready);
  }
  _startCreationInteraction() {
    this._stopInteractionAndUpdate();
    const t5 = this._view, i8 = this._sketchVM;
    if (null == t5 || null == i8) return;
    this._shouldRemoveLastPoint = false;
    const s8 = i8.on("create", (t6) => {
      const e14 = t6.graphic;
      switch (t6.state) {
        case "complete":
          this._shouldRemoveLastPoint = false, this._setSketchedGraphic(e14), this._stopInteractionAndUpdate(), this._clearPreviousInput();
          break;
        case "cancel":
          this.cancel();
          break;
        case "active":
          this._setSketchedGraphic(e14), "cursor-update" === t6.toolEventInfo?.type && (this._shouldRemoveLastPoint = true);
          break;
        case "start":
          this._setSketchedGraphic(e14);
      }
    }), n11 = () => {
      s8.remove();
      const t6 = this.canStopCreating, o10 = this._geometry?.clone();
      i8.cancel(), this._creationToolPromise = null, null != o10 && t6 ? this._shouldRemoveLastPoint && this._setSketchedGraphic(new d6({
        geometry: w4(o10)
      })) : this._input = null;
    };
    this.removeHandles(f6.Interaction), this.addHandles(e2(n11), f6.Interaction), this._creationToolPromise = d(i8.create("polyline"));
  }
  _startReshapeInteraction() {
    this._stopInteraction();
    const t5 = this._view, e14 = this._sketchVM;
    if (null == t5 || null == e14) return;
    const i8 = e14.on("update", (t6) => {
      const e15 = t6.graphics[0];
      switch (t6.state) {
        case "complete":
          this._setSketchedGraphic(e15), this._stopInteractionAndUpdate(), this._clearPreviousInput();
          break;
        case "active":
        case "start":
          this._setSketchedGraphic(e15);
      }
    }), s8 = () => {
      i8.remove(), e14.cancel(), this._updateToolPromise = null;
    };
    this.removeHandles(f6.Interaction), this.addHandles(e2(s8), f6.Interaction);
    const n11 = this._input;
    n11 && (n11.visible = true, this._updateToolPromise = d(e14.update(n11, {
      tool: "reshape"
    })));
  }
  _startSelectionInteraction() {
    this._stopInteraction();
    const t5 = this._view;
    if (null == t5) return;
    const e14 = t5.cursor, i8 = e2(() => t5.cursor = e14);
    t5.cursor = "crosshair", t5.closePopup();
    let n11 = null;
    const r6 = e2(() => e(n11)), h5 = t5.on("immediate-click", (e15) => {
      e15.async(() => __async(this, null, function* () {
        e(n11), n11 = d2((i9) => __async(this, null, function* () {
          const {
            results: s8
          } = yield t5.hitTest(e15);
          s(i9);
          const o10 = s8.filter((t6) => "graphic" === t6.type && null != t6.graphic).map((t6) => t6.graphic).find((t6) => null != t6.geometry && "polyline" === t6.geometry.type);
          o10 && (e15.preventDefault(), e15.stopPropagation(), this._input = o10, this._clearPreviousInput(), this._stopInteractionAndUpdate());
        })), yield n11.promise;
      }));
    }, _4.TOOL), c5 = t5.on("key-down", (t6) => {
      "Escape" === t6.key && this.cancel();
    });
    this.removeHandles(f6.Interaction), this.addHandles([h5, c5, r6, i8], f6.Interaction), t5.ready && t5.focus();
  }
  _stopInteraction() {
    this.removeHandles(f6.Interaction);
  }
  _stopInteractionAndUpdate() {
    this.hasHandles(f6.Interaction) && (this._updateDisabled = true, this._stopInteraction(), this._updateDisabled = false, this._triggerUpdate());
  }
  _triggerUpdate() {
    this._set("state", S4.Ready), this._update();
  }
  _update() {
    if (this._updateDisabled) return;
    const t5 = this.state;
    if (t5 !== S4.Selecting) {
      if (this._visibleAndEditable) {
        if (t5 === S4.Creating || t5 === S4.Reshaping && this.isSketchedGraphic(this._input)) return;
      } else this.cancel();
      this._set("state", this._getNextState()), this._updateVisuals();
    } else this.stop();
  }
  _getNextState() {
    return null == this._input ? S4.Ready : this.isSketchedGraphic(this._input) ? this.state === S4.Creating ? S4.Creating : this._visibleAndEditable ? S4.Reshaping : S4.ReshapingDisabled : S4.Selected;
  }
  _updateVisuals() {
    switch (this.state) {
      case S4.Creating:
        break;
      case S4.Reshaping:
        this._startReshapeInteraction();
        break;
      case S4.ReshapingDisabled: {
        this._stopInteractionAndUpdate();
        const t5 = this._input;
        null != t5 && this.isSketchedGraphic(t5) && (t5.visible = false);
        break;
      }
      case S4.Ready:
      case S4.Selected:
        this._stopInteractionAndUpdate();
      case S4.Selecting:
    }
    this._updateSketchedGraphic();
  }
  _storePreviousInput(t5) {
    this._previousInputInfo = {
      graphic: t5
    };
  }
  _restorePreviousInput() {
    const t5 = this._previousInputInfo;
    null != t5 && (this._clearPreviousInput(), this._input = t5.graphic, this._triggerUpdate());
  }
  _clearPreviousInput() {
    this._previousInputInfo = null;
  }
  _updateSketchedGraphic() {
    const t5 = this._graphicsLayer;
    if (null == t5) return;
    const e14 = t5.graphics, i8 = this._input;
    if (null == i8 || !this.isSketchedGraphic(i8)) return void e14.removeAll();
    if (-1 === e14.indexOf(i8)) e14.removeAll(), e14.add(i8);
    else if (1 !== e14.length) {
      const t6 = e14.filter((t7) => t7 !== i8);
      e14.removeMany(t6);
    }
  }
  _setSketchedGraphic(t5) {
    null != t5 && this._sketchedGraphics.add(t5), this._input = t5, this._updateSketchedGraphic();
  }
};
function w4(t5) {
  if (A4(t5)) {
    const e14 = t5.clone();
    return e14.paths = [e14.paths[0].slice(0, -1)], e14;
  }
  return t5;
}
e3([y({
  nonNullable: true
})], k3.prototype, "state", void 0), e3([y({
  nonNullable: true
})], k3.prototype, "tool", void 0), e3([y()], k3.prototype, "canStopCreating", null), e3([y()], k3.prototype, "_graphicsLayer", void 0), e3([y()], k3.prototype, "_sketchVM", void 0), e3([y()], k3.prototype, "_input", null), e3([y()], k3.prototype, "_geometry", null), e3([y()], k3.prototype, "_visibleAndEditable", null), e3([y()], k3.prototype, "_view", null), e3([y()], k3.prototype, "_shouldRemoveLastPoint", void 0), k3 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileInteraction")], k3);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/ElevationProfileView.js
var p6 = class extends S {
  constructor(i8) {
    super(i8), this._implementation = null, this._loadingTask = null;
  }
  initialize() {
    this.addHandles(d3(() => ({
      tool: this.tool,
      view: this.tool.viewModel.view,
      visible: this.tool.visible && !!this.tool.viewModel.view?.ready
    }), ({
      tool: i8,
      view: o10,
      visible: t5
    }) => {
      null != o10 && t5 ? this._show(o10, i8) : this._hide();
    }, A2));
  }
  destroy() {
    this._hide();
  }
  _show(i8, o10) {
    this._loadingTask = e(this._loadingTask), this._loadingTask = d2((t5) => __async(this, null, function* () {
      if ("2d" === i8.type) {
        const e14 = import("./ElevationProfileView2D-SFKTBSOJ.js"), s8 = (yield h(e14, t5)).ElevationProfileView2D;
        this._implementation = new s8(i8, o10);
      } else if ("3d" === i8.type) {
        const e14 = import("./ElevationProfileView3D-U36HXYVI.js"), s8 = (yield h(e14, t5)).ElevationProfileView3D;
        this._implementation = new s8(i8, o10);
      }
    }));
  }
  _hide() {
    this._loadingTask = e(this._loadingTask), this._implementation = u2(this._implementation);
  }
};
e3([y()], p6.prototype, "tool", void 0), p6 = e3([a2("esri.widgets.ElevationProfile.support.ElevationProfileView")], p6);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileTool.js
var c4 = class extends S {
  constructor(e14) {
    super(e14), this.editable = true, this.visible = true, this.highlightEnabled = true;
  }
  initialize() {
    this.view = new p6({
      tool: this
    }), this.interaction = new k3({
      tool: this
    });
  }
  destroy() {
    this.interaction.destroy(), this.view.destroy();
  }
  get state() {
    const e14 = this.interaction?.state;
    switch (e14) {
      case S4.Ready:
        return t3.Ready;
      case S4.Creating:
        return t3.Creating;
      case S4.Selecting:
        return t3.Selecting;
      case S4.Selected:
        return t3.Selected;
      case S4.Reshaping:
      case S4.ReshapingDisabled:
        return t3.Created;
    }
  }
};
e3([y({
  nonNullable: true
})], c4.prototype, "viewModel", void 0), e3([y()], c4.prototype, "view", void 0), e3([y()], c4.prototype, "interaction", void 0), e3([y()], c4.prototype, "editable", void 0), e3([y()], c4.prototype, "visible", void 0), e3([y()], c4.prototype, "highlightEnabled", void 0), c4 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileTool")], c4);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileViewModel.js
var R4 = class extends S {
  constructor(t5) {
    super(t5), this.view = null, this.input = null, this._getEffectiveUnitsMemoized = t((t6, e14) => ({
      distance: t6,
      elevation: e14
    })), this.hoveredChartPosition = null, this.uniformChartScaling = false, this.defaultUnit = null, this.queue = null, this._currentTileCache = null, this.error = null, this._defaultProfileLineGround = new c3(), this._userUnitOptions = null, this._userUnit = null, t5?.profiles || (this.profiles = new V([this._defaultProfileLineGround]));
  }
  initialize() {
    this.addHandles(d3(() => this.view, (t5) => {
      if (null == t5) return void n.getLogger(this).warnOnce("no view. Widget will be disabled until a view is provided.");
      this.removeHandles(q2);
      const e14 = "3d" === t5.type ? t5.resourceController : void 0;
      this.queue?.destroy(), this.queue = Z2(e14?.scheduler);
      const i8 = e14?.addUpdatingObject(this);
      i8 && this.addHandles(i8, q2);
    }, A2)), this.tool = new c4({
      viewModel: this
    }), this._controller = new y3({
      viewModel: this
    });
  }
  destroy() {
    this._defaultProfileLineGround = u2(this._defaultProfileLineGround), this._controller = u2(this._controller), this._currentTileCache = u2(this._currentTileCache), this.tool = u2(this.tool), this.queue = u2(this.queue);
  }
  get profiles() {
    return this._get("profiles");
  }
  set profiles(t5) {
    const e14 = this._get("profiles"), i8 = t5 ?? new V();
    this._set("profiles", n5(i8, e14));
  }
  get state() {
    const t5 = this.view;
    return null != t5 && t5.ready ? this.tool.state : t3.Disabled;
  }
  get progress() {
    let t5 = 0, e14 = 0;
    for (const i8 of this.visibleProfiles) t5++, e14 += i8.progress;
    return t5 > 0 ? e14 / t5 : 0;
  }
  set unitOptions(t5) {
    this._userUnitOptions = t5, this._set("unitOptions", this._filteredOrAllUnits(this._userUnitOptions));
  }
  get unitOptions() {
    return this._filteredOrAllUnits(this._userUnitOptions);
  }
  set unit(t5) {
    this._userUnit = t5 ? this._findSelectableUnit(t5, this._userUnit) : null, this.notifyChange("unit");
  }
  get unit() {
    return this._userUnit ? (this._userUnit = this._findSelectableUnit(this._userUnit, this.defaultUnit), this._userUnit) : this._findSelectableUnit(this.defaultUnit);
  }
  get effectiveUnits() {
    const t5 = s6(this.visibleProfiles.map((t6) => t6.result)), e14 = N(t5.maxDistance, "meters", this.unit), i8 = O2(t5.maxElevation, "meters", this.unit);
    return this._getEffectiveUnitsMemoized(e14, i8);
  }
  get geodesicDistanceThreshold() {
    return this._get("geodesicDistanceThreshold");
  }
  set geodesicDistanceThreshold(t5) {
    i(n.getLogger(this), "geodesicDistanceThreshold", {
      version: "4.29",
      warnOnce: true
    }), this._set("geodesicDistanceThreshold", t5);
  }
  get highlightEnabled() {
    return this.tool.highlightEnabled;
  }
  set highlightEnabled(t5) {
    this.tool.highlightEnabled = t5;
  }
  get hasVertices() {
    const t5 = this.input?.geometry;
    return A4(t5) && t5.paths.reduce((t6, e14) => t6 + e14.length, 0) > 0;
  }
  get hoveredPoints() {
    return null != this.input && this.visible && this.tool.editable ? this.visibleProfiles.map((t5) => {
      const e14 = t5.hoveredPoint;
      return null != e14 ? {
        hoveredPoint: e14,
        color: t5.color
      } : null;
    }).filter(O) : [];
  }
  get statistics() {
    return o7(this.visibleProfiles.map((t5) => t5.statistics));
  }
  get chartData() {
    if (null == this.input) return null;
    const {
      effectiveUnits: t5,
      progress: e14,
      statistics: i8,
      visibleProfiles: o10,
      uniformChartScaling: r6
    } = this, s8 = o10.filter((t6) => t6.hasZ).map((t6) => ({
      id: t6.id,
      type: t6.type,
      title: t6.title,
      color: t6.color,
      samples: t6.samples,
      progress: t6.progress,
      chartFillEnabled: t6.chartFillEnabled,
      chartStrokeWidth: t6.chartStrokeWidth,
      chartStrokeOffsetY: t6.chartStrokeOffsetY,
      viewVisualizationEnabled: t6.viewVisualizationEnabled
    }));
    return 0 === s8.length ? null : {
      lines: s8,
      effectiveUnits: t5,
      statistics: i8,
      refined: 1 === e14,
      dynamicElevationRange: o10.some((t6) => "view" === t6.type),
      uniformScaling: r6
    };
  }
  get visibleProfiles() {
    return this.profiles.toArray().filter((t5) => t5.available && t5.visible);
  }
  get minDemResolutions() {
    const t5 = [];
    for (const {
      minDemResolution: e14
    } of this.visibleProfiles) null != e14 && t5.push(e14);
    return t5;
  }
  get minDemResolution() {
    return c(this.minDemResolutions);
  }
  get errorState() {
    const t5 = this.input?.geometry;
    if (!M2(t5)) return a4.NoValidInput;
    if (null != this.error) {
      if (n9(this.error)) switch (this.error.cause) {
        case o6.TooComplex:
          return a4.TooComplex;
        case o6.InvalidGeometry:
          return a4.InvalidGeometry;
        case o6.InvalidElevationInfo:
          return a4.InvalidElevationInfo;
        case o6.ElevationQueryError:
          return a4.NoValidInput;
      }
      return a4.UnknownError;
    }
    return 0 === this.visibleProfiles.length ? a4.NoVisibleProfiles : null == this.chartData && 1 === this.progress ? a4.RefinedButNoChartData : a4.None;
  }
  get tileCache() {
    this._currentTileCache = u2(this._currentTileCache);
    const t5 = this.view;
    if (null != t5 && "3d" === t5?.type) {
      const e14 = t5.basemapTerrain?.elevationQueryCache;
      if (null != e14) return e14;
    }
    return null == this._currentTileCache && (this._currentTileCache = new t2(new e5(20 * E.MEGABYTES))), this._currentTileCache;
  }
  get visible() {
    return this.tool.visible;
  }
  set visible(t5) {
    this.tool.visible = t5;
  }
  get inputIsSketched() {
    return this.tool.interaction.isSketchedGraphic(this.input);
  }
  get elevationProvider() {
    const t5 = this.view;
    return null != t5 && "3d" === t5.type ? t5.elevationProvider : null;
  }
  get updating() {
    const {
      progress: t5
    } = this, e14 = !!this.queue?.updating;
    return t5 > 0 && t5 < 1 || e14;
  }
  start(t5) {
    this.tool.interaction.start(t5);
  }
  stop() {
    this.tool.interaction.stop();
  }
  cancel() {
    this.tool.interaction.cancel();
  }
  clear() {
    this.tool.interaction.clear();
  }
  _findSelectableUnit(t5, e14) {
    const i8 = this.unitOptions;
    return null != t5 && i8.includes(t5) ? t5 : e14 ? this._findSelectableUnit(e14) : i8[0];
  }
  _filteredOrAllUnits(t5) {
    const e14 = (null != t5 ? t5 : []).filter((t6) => M.includes(t6));
    return 0 === e14.length ? M.slice() : e14;
  }
};
e3([y()], R4.prototype, "view", void 0), e3([y({
  type: d6
})], R4.prototype, "input", void 0), e3([y({
  type: p5,
  nonNullable: true
})], R4.prototype, "profiles", null), e3([y({
  readOnly: true
})], R4.prototype, "state", null), e3([y({
  readOnly: true
})], R4.prototype, "progress", null), e3([y()], R4.prototype, "unitOptions", null), e3([y()], R4.prototype, "unit", null), e3([y({
  readOnly: true
})], R4.prototype, "effectiveUnits", null), e3([y()], R4.prototype, "geodesicDistanceThreshold", null), e3([y()], R4.prototype, "hoveredChartPosition", void 0), e3([y()], R4.prototype, "uniformChartScaling", void 0), e3([y()], R4.prototype, "highlightEnabled", null), e3([y({
  readOnly: true
})], R4.prototype, "hoveredPoints", null), e3([y({
  readOnly: true
})], R4.prototype, "statistics", null), e3([y()], R4.prototype, "chartData", null), e3([y()], R4.prototype, "visibleProfiles", null), e3([y()], R4.prototype, "minDemResolutions", null), e3([y({
  readOnly: true
})], R4.prototype, "minDemResolution", null), e3([y({
  readOnly: true
})], R4.prototype, "errorState", null), e3([y(e9)], R4.prototype, "defaultUnit", void 0), e3([y()], R4.prototype, "queue", void 0), e3([y()], R4.prototype, "tileCache", null), e3([y()], R4.prototype, "tool", void 0), e3([y()], R4.prototype, "visible", null), e3([y()], R4.prototype, "error", void 0), e3([y()], R4.prototype, "inputIsSketched", null), e3([y()], R4.prototype, "elevationProvider", null), e3([y()], R4.prototype, "updating", null), e3([y()], R4.prototype, "_defaultProfileLineGround", void 0), e3([y()], R4.prototype, "_userUnitOptions", void 0), e3([y()], R4.prototype, "_controller", void 0), e3([y()], R4.prototype, "_userUnit", void 0), R4 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileViewModel")], R4);
var q2 = Symbol("updating-object");
var z2 = R4;

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileVisibleElements.js
var s7 = class extends S {
  constructor() {
    super(...arguments), this.legend = true, this.chart = true, this.clearButton = true, this.settingsButton = true, this.sketchButton = true, this.selectButton = true, this.unitSelector = true, this.uniformChartScalingToggle = true;
  }
};
e3([y()], s7.prototype, "legend", void 0), e3([y()], s7.prototype, "chart", void 0), e3([y()], s7.prototype, "clearButton", void 0), e3([y()], s7.prototype, "settingsButton", void 0), e3([y()], s7.prototype, "sketchButton", void 0), e3([y()], s7.prototype, "selectButton", void 0), e3([y()], s7.prototype, "unitSelector", void 0), e3([y()], s7.prototype, "uniformChartScalingToggle", void 0), s7 = e3([a2("esri.widgets.ElevationProfile.ElevationProfileVisibleElements")], s7);
var i7 = s7;

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/components/Statistics.js
var h4 = 100;
var u9 = class extends B {
  constructor(t5, s8) {
    super(t5, s8), this._updateLayout = (t6) => {
      const e14 = t6.parentElement, s9 = t6.style.display;
      e14?.removeChild(t6), document.body.appendChild(t6), t6.style.display = "block";
      let i8 = 80;
      for (const o10 of t6.childNodes) o10 instanceof HTMLElement && (i8 = Math.max(i8, o10.offsetWidth));
      document.body.removeChild(t6), e14?.appendChild(t6), t6.style.display = s9, t6.style.setProperty("--max-width", `${i8}px`);
    }, this._updateLayoutThrottled = e6(this._updateLayout, h4);
  }
  loadDependencies() {
    return r({
      icon: () => import("./calcite-icon-FE3MORNT.js")
    });
  }
  initialize() {
    this.addHandles(this._updateLayoutThrottled);
  }
  render() {
    return n3("div", {
      afterCreate: this._updateLayout,
      afterUpdate: this._updateLayoutThrottled,
      bind: this,
      class: _5.base
    }, this._renderStatistics());
  }
  _renderStatistics() {
    const t5 = this._messages?.statistics;
    return t5 ? [this._renderDistanceStatistic("maxDistance", t5.maxDistance), this._renderElevationStatistic("elevationGain", t5.gain), this._renderElevationStatistic("elevationLoss", t5.loss), this._renderElevationStatistic("minElevation", t5.minElevation), this._renderElevationStatistic("maxElevation", t5.maxElevation), this._renderElevationStatistic("avgElevation", t5.avgElevation), this._renderSlopeStatistic("maxPositiveSlope", "maxNegativeSlope", t5.maxSlope), this._renderSlopeStatistic("avgPositiveSlope", "avgNegativeSlope", t5.avgSlope)] : [];
  }
  _renderDistanceStatistic(t5, e14) {
    const i8 = r2().formatPrecision, o10 = this._renderValue(t5, (t6) => {
      const e15 = this.effectiveUnits.distance;
      return g(this._messagesUnits, t6, e15, i8);
    });
    return this._renderStatistic(e14, o10);
  }
  _renderElevationStatistic(t5, e14) {
    const i8 = r2().formatPrecision, o10 = this._renderValue(t5, (t6) => {
      const e15 = this.effectiveUnits.elevation;
      return g(this._messagesUnits, t6, e15, i8);
    });
    return this._renderStatistic(e14, o10);
  }
  _renderSlopeStatistic(t5, e14, s8) {
    const o10 = r2().formatPrecision, r6 = n3("div", {
      class: _5.slopeValue,
      key: "slope-up"
    }, n3("calcite-icon", {
      icon: "arrow-up",
      scale: "s"
    }), this._renderValue(t5, (t6) => w2(t6, "degrees", "geographic", "geographic", o10)), n3("calcite-icon", {
      icon: "arrow-down",
      scale: "s"
    }), this._renderValue(e14, (t6) => w2(t6, "degrees", "geographic", "geographic", o10)));
    return this._renderStatistic(s8, r6);
  }
  _renderStatistic(t5, e14) {
    return n3("div", {
      class: _5.statistic
    }, n3("label", {
      class: _5.statisticLabel
    }, t5), n3("div", {
      class: _5.statisticValue
    }, e14));
  }
  _renderValue(t5, e14) {
    const s8 = this.line, i8 = 1 === s8.progress ? s8.statistics : null, o10 = i8?.[t5];
    return null != o10 ? e14(o10) : s5;
  }
};
e3([y()], u9.prototype, "effectiveUnits", void 0), e3([y()], u9.prototype, "line", void 0), e3([y(), e4("esri/widgets/ElevationProfile/t9n/ElevationProfile")], u9.prototype, "_messages", void 0), e3([y(), e4("esri/core/t9n/Units")], u9.prototype, "_messagesUnits", void 0), u9 = e3([a2("esri.widgets.ElevationProfile.components.Statistics")], u9);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/components/LegendItem.js
var m7 = class extends B {
  constructor(e14, t5) {
    super(e14, t5), this.checkboxVisible = true, this.expanded = false;
  }
  loadDependencies() {
    return r({
      action: () => import("./calcite-action-M3FHAAKV.js"),
      checkbox: () => import("./calcite-checkbox-ZPWECFBW.js"),
      label: () => import("./calcite-label-NSQ5QQOX.js"),
      tooltip: () => import("./calcite-tooltip-AYI56I5U.js")
    });
  }
  initialize() {
    this._statistics = new u9(this._statisticsProps), this.addHandles(d3(() => this._statisticsProps, (e14) => this._statistics.set(e14)));
  }
  destroy() {
    this._statistics = u2(this._statistics);
  }
  render() {
    const e14 = this.expanded;
    return n3("div", {
      class: this.classes(a5.base, {
        [a5.disabled]: this.disabled,
        [a5.expanded]: e14
      }),
      key: this
    }, this._renderColorIndicator(), n3("div", {
      class: a5.header,
      key: "header"
    }, this._renderLabelWithCheckbox(), this._renderCollapseToggleButton()), e14 ? n3("div", {
      class: a5.content,
      key: "content"
    }, this._statistics.render()) : null);
  }
  get disabled() {
    return !this.line.available;
  }
  get _statisticsProps() {
    return {
      line: this.line,
      effectiveUnits: this.effectiveUnits
    };
  }
  _renderColorIndicator() {
    return n3("div", {
      class: a5.colorIndicator,
      key: "color-indicator",
      styles: {
        backgroundColor: this.line.color.toCss()
      }
    });
  }
  _renderCollapseToggleButton() {
    const {
      expanded: e14,
      messages: t5
    } = this, s8 = e14 ? t5.hideDetails : t5.showDetails;
    return n3("calcite-action", {
      appearance: "transparent",
      bind: this,
      class: a5.collapseToggle,
      "data-testid": "legend-toggle",
      icon: e14 ? "chevron-up" : "chevron-down",
      key: "collapse-toggle",
      onclick: this._onCollapseToggleClick,
      scale: "s",
      text: s8,
      title: s8
    });
  }
  _onCollapseToggleClick() {
    this.onExpandedToggle();
  }
  _renderLabelWithCheckbox() {
    const {
      line: e14,
      checkboxVisible: t5,
      disabled: s8,
      messages: o10
    } = this, i8 = `label-${e14.id}`;
    return n3("calcite-label", {
      class: a5.label,
      disabled: s8,
      key: i8,
      layout: "inline"
    }, t5 ? this._renderCheckbox(e14.id) : null, e10(e14, o10));
  }
  _renderCheckbox(e14) {
    const {
      disabled: t5,
      line: s8,
      messages: o10
    } = this, i8 = s8.visible, r6 = `${e14}-checkbox`, l3 = i8 ? o10.hideProfile : o10.showProfile, a7 = s2(l3, {
      name: e10(s8, o10)
    });
    return n3(i2, null, n3("calcite-checkbox", {
      checked: i8,
      class: a5.checkbox,
      disabled: t5,
      id: r6,
      key: "checkbox",
      onCalciteCheckboxChange: () => s8.toggleVisibility()
    }), n3("calcite-tooltip", {
      overlayPositioning: "fixed",
      placement: "top",
      referenceElement: r6
    }, a7));
  }
};
e3([y()], m7.prototype, "checkboxVisible", void 0), e3([y()], m7.prototype, "disabled", null), e3([y({
  nonNullable: true
})], m7.prototype, "effectiveUnits", void 0), e3([y()], m7.prototype, "expanded", void 0), e3([y({
  nonNullable: true
})], m7.prototype, "line", void 0), e3([y()], m7.prototype, "messages", void 0), e3([y()], m7.prototype, "onExpandedToggle", void 0), e3([y()], m7.prototype, "_statistics", void 0), m7 = e3([a2("esri.widgets.ElevationProfile.components.LegendItem")], m7);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/components/Legend.js
var n10 = class extends B {
  constructor() {
    super(...arguments), this._expandedLine = null;
  }
  render() {
    const {
      profiles: e14,
      messages: o10,
      effectiveUnits: s8,
      _expandedLine: t5
    } = this;
    return n3("div", {
      class: n8.base
    }, e14.map((r6) => n3(m7, {
      checkboxVisible: e14.length > 1,
      effectiveUnits: s8,
      expanded: r6 === t5,
      line: r6,
      messages: o10,
      onExpandedToggle: () => this._onExpandedToggle(r6)
    })));
  }
  _onExpandedToggle(e14) {
    this._expandedLine = e14 === this._expandedLine ? null : e14;
  }
};
e3([y()], n10.prototype, "effectiveUnits", void 0), e3([y()], n10.prototype, "messages", void 0), e3([y()], n10.prototype, "profiles", void 0), e3([y()], n10.prototype, "_expandedLine", void 0), n10 = e3([a2("esri.widgets.ElevationProfile.components.Legend")], n10);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile/components/SettingsButton.js
var p7 = class extends B {
  constructor() {
    super(...arguments), this.messages = null, this._popover = null, this._popoverIsOpen = false, this._onPopoverAfterCreate = (e14) => {
      this._popover = e14;
    }, this._onUniformChartScalingChange = (e14) => {
      this.onUniformChartScalingChange(e14.target.checked);
    };
  }
  loadDependencies() {
    return r({
      action: () => import("./calcite-action-M3FHAAKV.js"),
      checkbox: () => import("./calcite-checkbox-ZPWECFBW.js"),
      label: () => import("./calcite-label-NSQ5QQOX.js"),
      popover: () => import("./calcite-popover-24Y2F2AH.js"),
      tooltip: () => import("./calcite-tooltip-AYI56I5U.js")
    });
  }
  initialize() {
    const e14 = () => this._popover;
    this.addHandles([v(e14, "calcitePopoverOpen", () => this._popoverIsOpen = true), v(e14, "calcitePopoverClose", () => this._popoverIsOpen = false)]);
  }
  render() {
    const {
      id: e14,
      messages: t5,
      visibleElements: o10
    } = this, {
      unitSelector: i8,
      uniformChartScalingToggle: r6
    } = o10;
    if (!t5 || !i8 && !r6) return n3("div", {
      key: `${e14}-empty`
    });
    const s8 = `${e14}__action`, c5 = this._popoverIsOpen ? t5.hideSettings : t5.showSettings;
    return n3("div", {
      class: r3.base,
      key: this
    }, n3("calcite-popover", {
      afterCreate: this._onPopoverAfterCreate,
      autoClose: true,
      label: c5,
      overlayPositioning: "fixed",
      placement: "bottom-end",
      referenceElement: s8
    }, this._renderPopoverContent()), n3("calcite-action", {
      appearance: "transparent",
      "data-testid": "settings-button",
      icon: "gear",
      id: s8,
      scale: "s",
      text: c5,
      title: c5
    }));
  }
  _renderPopoverContent() {
    const {
      unitSelector: e14,
      uniformChartScalingToggle: t5
    } = this.visibleElements;
    return n3("div", {
      class: r3.popoverContent
    }, e14 ? this._renderUnitSelector() : null, t5 ? this._renderUniformChartScalingToggle() : null);
  }
  _renderUnitSelector() {
    const {
      messages: e14
    } = this;
    return n3(n6, {
      key: "unit-selector-label",
      options: this.unitOptions,
      selectLabel: e14?.unitSelectLabel ?? "",
      value: this.unit,
      onChange: this.onUnitChange
    });
  }
  _renderUniformChartScalingToggle() {
    const {
      messages: e14
    } = this, t5 = this.uniformChartScaling, o10 = `${this.id}__uniform-chart-scaling-toggle`, i8 = e14?.[t5 ? "uniformChartScalingDisable" : "uniformChartScalingEnable"] ?? "";
    return n3("calcite-label", {
      class: r3.uniformChartScalingLabel,
      key: "uniform-chart-scaling-label",
      layout: "inline"
    }, n3("calcite-checkbox", {
      checked: t5,
      class: r3.uniformChartScalingCheckbox,
      id: o10,
      onCalciteCheckboxChange: this._onUniformChartScalingChange
    }), n3("calcite-tooltip", {
      overlayPositioning: "fixed",
      referenceElement: o10
    }, i8), e14?.uniformChartScalingLabel);
  }
};
e3([y()], p7.prototype, "messages", void 0), e3([y()], p7.prototype, "onUniformChartScalingChange", void 0), e3([y()], p7.prototype, "onUnitChange", void 0), e3([y()], p7.prototype, "uniformChartScaling", void 0), e3([y()], p7.prototype, "unit", void 0), e3([y()], p7.prototype, "unitOptions", void 0), e3([y()], p7.prototype, "visibleElements", void 0), e3([y()], p7.prototype, "_popover", void 0), e3([y()], p7.prototype, "_popoverIsOpen", void 0), p7 = e3([a2("esri.widgets.ElevationProfile.components.SettingsButton")], p7);

// ../../../node_modules/@arcgis/core/widgets/ElevationProfile.js
var B2;
!function(t5) {
  t5.Sketch = "sketch", t5.SketchCancel = "sketch-cancel", t5.SketchDone = "sketch-done", t5.Select = "select", t5.SelectCancel = "select-cancel";
}(B2 || (B2 = {}));
var P4 = [{
  type: B2.Select
}, {
  type: B2.Sketch
}];
var E4 = {
  [a4.None]: null,
  [a4.NoValidInput]: "noProfile",
  [a4.NoVisibleProfiles]: "noProfile",
  [a4.RefinedButNoChartData]: "noProfile",
  [a4.TooComplex]: "tooComplex",
  [a4.UnknownError]: "unknown",
  [a4.InvalidGeometry]: "invalidGeometry",
  [a4.InvalidElevationInfo]: "invalidElevationInfo"
};
var U3 = Symbol("resize-observer-handle");
var j6 = class extends B {
  constructor(t5, e14) {
    super(t5, e14), this.viewModel = null, this.visibleElements = new i7(), this.messages = null, this.messagesCommon = null, this.messagesUnits = null, this._contentWrapper = null, this._chartContainer = null, this._chart = null, this._chartInitTask = null, this._chartIsRefined = false, this._width = 0, this._zoomOutButtonVisible = false, this._getChartUpdateParamsMemoized = t((t6, e15, i8, s8) => ({
      chart: t6,
      data: e15,
      stationary: i8,
      messages: s8
    })), this._onZoomOutButtonClick = () => {
      this._chart?.zoomOut();
    }, this._onClearButtonClick = () => {
      this.viewModel.clear();
    }, t5?.viewModel || (this._defaultViewModel = new z2({
      view: t5?.view
    }), this.viewModel = this._defaultViewModel);
  }
  loadDependencies() {
    return r({
      action: () => import("./calcite-action-M3FHAAKV.js"),
      button: () => import("./calcite-button-TT4KT5XH.js"),
      loader: () => import("./calcite-loader-UGV3HF5I.js")
    });
  }
  postInitialize() {
    this.addHandles([d3(() => ({
      container: this._chartContainer,
      width: this._width
    }), ({
      container: t5,
      width: e14
    }) => {
      this._destroyChart(), null != t5 && e14 > 0 && this._initializeChart(t5);
    }, P), d3(() => this._chartUpdateParams, () => this._updateChart(this._chartUpdateParams), P)]);
  }
  destroy() {
    this._destroyChart(), null != this._defaultViewModel && this.viewModel !== this._defaultViewModel && this._defaultViewModel.destroy();
  }
  get view() {
    return this.viewModel.view;
  }
  set view(t5) {
    this.viewModel.view = t5;
  }
  get input() {
    return this.viewModel.input;
  }
  set input(t5) {
    this.viewModel.input = t5;
  }
  get profiles() {
    return this.viewModel.profiles;
  }
  set profiles(t5) {
    this.viewModel.profiles = t5;
  }
  get unitOptions() {
    return this.viewModel.unitOptions;
  }
  set unitOptions(t5) {
    this.viewModel.unitOptions = t5;
  }
  get unit() {
    return this.viewModel.unit;
  }
  set unit(t5) {
    this.viewModel.unit = t5;
  }
  get geodesicDistanceThreshold() {
    return this.viewModel.geodesicDistanceThreshold;
  }
  set geodesicDistanceThreshold(t5) {
    this.viewModel.geodesicDistanceThreshold = t5;
  }
  get icon() {
    return "altitude";
  }
  set icon(t5) {
    this._overrideIfSome("icon", t5);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(t5) {
    this._overrideIfSome("label", t5);
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(t5) {
    this.viewModel.visible = t5;
  }
  get _portrait() {
    return this._width < r2().portraitModePixelBreakpoint;
  }
  get _chartUpdateParams() {
    const t5 = this.view;
    return this._getChartUpdateParamsMemoized(this._chart, this.viewModel.chartData, null == t5 || t5.stationary, this._chartMessages);
  }
  get _chartMessages() {
    return __spreadValues(__spreadValues({}, this.messagesUnits), this.messages);
  }
  get _profilesArray() {
    return this.profiles.toArray();
  }
  render() {
    const {
      viewModel: t5,
      visible: e14
    } = this;
    return n3("div", {
      "aria-label": this.messages.widgetLabel,
      class: this.classes({
        [t4.base]: e14,
        [e7.widget]: e14,
        [e7.panel]: e14,
        [e7.widgetDisabled]: e14 && "disabled" === t5.state,
        [t4.portrait]: this._portrait,
        [t4.refined]: 1 === t5.progress
      }),
      key: this
    }, n3("div", {
      afterCreate: this._onContentWrapperUpdate,
      afterRemoved: this._onContentWrapperRemoved,
      afterUpdate: this._onContentWrapperUpdate,
      bind: this,
      key: "content-wrapper"
    }, e14 ? this._renderContentForState() : null));
  }
  _renderContentForState() {
    switch (this.viewModel.state) {
      case t3.Ready:
        return this._renderContentForReadyState();
      case t3.Selecting:
        return this._renderContentForSelectingState();
      case t3.Creating:
        return this._renderContentForCreatingState();
      case t3.Selected:
        return this._renderContentForSelectedState();
      case t3.Created:
        return this._renderContentForCreatedState();
      case t3.Disabled:
        return this._renderContentForReadyState();
    }
  }
  _renderContentForReadyState() {
    const {
      sketchButton: t5,
      selectButton: e14
    } = this.visibleElements, i8 = this.messages;
    let s8;
    return s8 = t5 && e14 ? i8.readyPrompt : t5 ? i8.readyPromptCreateOnly : e14 ? i8.readyPromptSelectOnly : i8.errors?.noProfile, this._renderContent({
      prompt: s8,
      chart: false,
      actions: P4
    });
  }
  _renderContentForSelectingState() {
    const t5 = this.view;
    if (null == t5) return null;
    const e14 = this.messages[`selectingPrompt-${t5.type}`];
    return this._renderContent({
      prompt: e14,
      chart: false,
      actions: [{
        type: B2.SelectCancel
      }]
    });
  }
  _renderContentForCreatingState() {
    const {
      view: t5,
      viewModel: e14
    } = this;
    if (null == t5) return null;
    const i8 = e14.hasVertices ? [{
      type: B2.SketchCancel
    }, {
      type: B2.SketchDone,
      disabled: !e14.tool.interaction.canStopCreating
    }] : [{
      type: B2.Select
    }, {
      type: B2.Sketch,
      disabled: true
    }];
    if (e14.errorState === a4.NoValidInput) {
      const e15 = this.messages[`creatingPrompt-${t5.type}`];
      return this._renderContent({
        chart: false,
        actions: i8,
        prompt: e15
      });
    }
    const s8 = this._getErrorMessage();
    return s8 ? this._renderContent({
      chart: false,
      actions: i8,
      prompt: s8
    }) : this._renderContent({
      chart: true,
      actions: i8
    });
  }
  _renderContentForSelectedState() {
    const t5 = this._getErrorMessage();
    return t5 ? this._renderContent({
      chart: false,
      actions: P4,
      prompt: t5
    }) : this._renderContent({
      chart: true,
      actions: P4
    });
  }
  _renderContentForCreatedState() {
    const t5 = this._getErrorMessage();
    return t5 ? this._renderContent({
      chart: false,
      actions: P4,
      prompt: t5
    }) : this._renderContent({
      chart: true,
      actions: P4
    });
  }
  _getErrorMessage() {
    const t5 = E4[this.viewModel.errorState];
    return t5 ? this.messages?.errors?.[t5] : null;
  }
  _renderContent(t5) {
    const e14 = null != t5.prompt ? this._renderPrompt(t5.prompt) : t5.chart && this._renderChart(), {
      viewModel: i8
    } = this, s8 = null != i8.input;
    return n3(i2, null, n3("header", {
      class: t4.header,
      key: "header"
    }, this._zoomOutButtonVisible ? this._renderZoomOutButton() : null, this.visibleElements.clearButton && s8 ? this._renderClearButton() : null, this.visibleElements.settingsButton ? n3(p7, {
      messages: this.messages,
      uniformChartScaling: i8.uniformChartScaling,
      unit: i8.unit,
      unitOptions: i8.unitOptions,
      visibleElements: this.visibleElements,
      onUniformChartScalingChange: (t6) => i8.uniformChartScaling = t6,
      onUnitChange: (t6) => i8.unit = t6
    }) : null), n3("div", {
      class: t4.mainContainer,
      key: "main-container"
    }, e14), this.visibleElements.legend ? n3(n10, {
      effectiveUnits: i8.effectiveUnits,
      messages: this.messages,
      profiles: this._profilesArray
    }) : null, this._renderActions(t5));
  }
  _renderZoomOutButton() {
    const t5 = this.messages.zoomOut;
    return n3("calcite-action", {
      appearance: "transparent",
      class: t4.zoomOutButton,
      "data-testid": "zoom-out-button",
      icon: "magnifying-glass-minus",
      key: "zoom-out",
      onclick: this._onZoomOutButtonClick,
      scale: "s",
      text: t5,
      title: t5
    });
  }
  _renderClearButton() {
    const t5 = this.messages.clearProfile;
    return n3("calcite-action", {
      appearance: "transparent",
      class: t4.clearButton,
      "data-testid": "clear-button",
      icon: "trash",
      key: "clear-profile",
      onclick: this._onClearButtonClick,
      scale: "s",
      text: t5,
      title: t5
    });
  }
  _renderPrompt(t5) {
    return [n3("div", {
      bind: this,
      class: t4.promptContainer,
      key: "prompt-container"
    }, n3("p", null, t5))];
  }
  _renderChart() {
    if (!this.visibleElements.chart) return n3("div", {
      class: t4.chartContainer,
      key: "empty-chart-container"
    });
    const {
      chartData: t5,
      progress: e14
    } = this.viewModel, i8 = this._chartIsRefined || this._canRenderChart(), s8 = null != t5 && e14 < 1;
    return i8 ? n3(i2, null, this._renderSpinner({
      size: i8 ? "small" : "large",
      visible: s8
    }), n3("div", {
      afterCreate: this._onChartContainerUpdate,
      afterRemoved: this._onChartContainerRemoved,
      afterUpdate: this._onChartContainerUpdate,
      bind: this,
      class: t4.chartContainer,
      key: "chart-container"
    })) : n3(i2, null, this._renderSpinner({
      size: "large",
      visible: s8
    }), n3("div", {
      class: t4.chartContainer,
      key: "chart-container-empty"
    }));
  }
  _renderSpinner(t5) {
    const e14 = "small" === t5.size, i8 = t5.visible ?? true;
    return n3("calcite-loader", {
      class: this.classes(t4.chartSpinner, e14 && t4.chartSpinnerSmall, i8 && t4.chartSpinnerVisible),
      inline: e14,
      key: "spinner",
      label: "",
      scale: "s"
    });
  }
  _canRenderChart() {
    const t5 = this.viewModel.chartData;
    if (null == t5) return false;
    if (!this.viewModel.inputIsSketched) return t5.refined;
    let e14 = 0;
    for (const {
      samples: i8
    } of t5.lines) e14 += null != i8 ? i8.length : 0;
    return t5.refined || e14 <= r2().largeChartSamples;
  }
  _renderActions({
    actions: t5
  }) {
    const e14 = t5.map((t6) => {
      switch (t6.type) {
        case B2.Sketch:
          return this.visibleElements.sketchButton && this._renderAction({
            action: t6,
            className: t4.sketchButton,
            label: this.messages.sketchButtonLabel,
            onClick: this._onSketchButtonClick,
            primary: true
          });
        case B2.SketchCancel:
          return this.visibleElements.sketchButton && this._renderAction({
            action: t6,
            onClick: this._onCancelButtonClick,
            className: t4.sketchCancelButton,
            label: this.messagesCommon.cancel,
            primary: false
          });
        case B2.SketchDone:
          return this.visibleElements.sketchButton && this._renderAction({
            action: t6,
            onClick: this._onDoneButtonClick,
            className: t4.sketchDoneButton,
            label: this.messagesCommon.done,
            primary: true
          });
        case B2.Select:
          return this.visibleElements.selectButton && this._renderAction({
            action: t6,
            onClick: this._onSelectButtonClick,
            className: t4.selectButton,
            label: this.messages.selectButtonLabel,
            primary: false
          });
        case B2.SelectCancel:
          return this.visibleElements.selectButton && this._renderAction({
            action: t6,
            onClick: this._onCancelButtonClick,
            className: t4.selectCancelButton,
            label: this.messagesCommon.cancel,
            primary: false
          });
      }
    }).filter(Boolean);
    return e14.length ? n3("footer", {
      class: t4.footer,
      key: "footer"
    }, e14) : null;
  }
  _renderAction({
    action: t5,
    className: e14,
    label: i8,
    onClick: s8,
    primary: n11
  }) {
    return n3("calcite-button", {
      appearance: n11 ? "solid" : "outline-fill",
      bind: this,
      class: this.classes(t4.actionButton, e14),
      disabled: t5.disabled,
      key: `action-${t5.type}`,
      onclick: s8
    }, i8);
  }
  _onSketchButtonClick() {
    this.viewModel.start({
      mode: "sketch"
    });
  }
  _onSelectButtonClick() {
    this.viewModel.start({
      mode: "select"
    });
  }
  _onCancelButtonClick() {
    this.viewModel.cancel();
  }
  _onDoneButtonClick() {
    this.viewModel.stop();
  }
  _onContentWrapperUpdate(t5) {
    t5 !== this._contentWrapper && (this._contentWrapper = t5, this.removeHandles(U3), this.addHandles(m(t5, (t6) => {
      this._width = t6.contentRect.width;
    }), U3));
  }
  _onContentWrapperRemoved() {
    this.removeHandles(U3), this._contentWrapper = null;
  }
  _updateChart(t5) {
    const {
      data: e14,
      chart: i8,
      messages: s8,
      stationary: n11
    } = t5;
    null != i8 && null != s8 && n11 && this._canRenderChart() && (i8.update(t5), this._chartIsRefined = null != e14 && e14.refined);
  }
  _onChartContainerUpdate(t5) {
    this._chartContainer = t5;
  }
  _onChartContainerRemoved() {
    this._chartContainer = null;
  }
  _initializeChart(t5) {
    e(this._chartInitTask), this._chartInitTask = d2((e14) => __async(this, null, function* () {
      const {
        createChart: i8
      } = yield import("./chartUtils-EEW5KVYJ.js");
      s(e14);
      const n11 = yield i8({
        container: t5,
        abortOptions: {
          signal: e14
        },
        onRangeChange: (t6, e15) => {
          this._zoomOutButtonVisible = 1 !== t6 || 1 !== e15;
        },
        onCursorPositionChange: (t6) => {
          this.viewModel.hoveredChartPosition = t6;
        }
      });
      if (e14.aborted) throw u2(n11), u3();
      this._chart = n11, this._updateChart(this._chartUpdateParams);
    }));
  }
  _destroyChart() {
    this._chartInitTask = e(this._chartInitTask), this._chart = u2(this._chart), this._chartIsRefined = false;
  }
};
e3([y({
  type: z2
})], j6.prototype, "viewModel", void 0), e3([y()], j6.prototype, "view", null), e3([y()], j6.prototype, "input", null), e3([y()], j6.prototype, "profiles", null), e3([y()], j6.prototype, "unitOptions", null), e3([y()], j6.prototype, "unit", null), e3([y()], j6.prototype, "geodesicDistanceThreshold", null), e3([y({
  type: i7,
  nonNullable: true
})], j6.prototype, "visibleElements", void 0), e3([y()], j6.prototype, "icon", null), e3([y()], j6.prototype, "label", null), e3([y()], j6.prototype, "visible", null), e3([y(), e4("esri/widgets/ElevationProfile/t9n/ElevationProfile")], j6.prototype, "messages", void 0), e3([y(), e4("esri/t9n/common")], j6.prototype, "messagesCommon", void 0), e3([y(), e4("esri/core/t9n/Units")], j6.prototype, "messagesUnits", void 0), e3([y()], j6.prototype, "_contentWrapper", void 0), e3([y()], j6.prototype, "_chartContainer", void 0), e3([y()], j6.prototype, "_chart", void 0), e3([y()], j6.prototype, "_chartInitTask", void 0), e3([y()], j6.prototype, "_chartIsRefined", void 0), e3([y()], j6.prototype, "_width", void 0), e3([y()], j6.prototype, "_portrait", null), e3([y()], j6.prototype, "_zoomOutButtonVisible", void 0), e3([y()], j6.prototype, "_chartUpdateParams", null), e3([y()], j6.prototype, "_chartMessages", null), e3([y()], j6.prototype, "_profilesArray", null), j6 = e3([a2("esri.widgets.ElevationProfile")], j6);
var R5 = j6;
export {
  R5 as default
};
//# sourceMappingURL=ElevationProfile-ZAUOSGQF.js.map
