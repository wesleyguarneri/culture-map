{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/layers/save/groupLayerUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { save as e, saveAs as r } from \"./utils.js\";\nimport { createForItemWrite as t } from \"../../portal/support/jsonContext.js\";\nimport { typeKeyword as o, hasTypeKeyword as a, removeTypeKeyword as s, addTypeKeyword as n } from \"../../portal/support/portalItemUtils.js\";\nimport { saveResources as i } from \"../../webdoc/support/resourceUtils.js\";\nconst u = \"Group Layer\",\n  c = \"group-layer-save\",\n  l = \"group-layer-save-as\",\n  p = o.GROUP_LAYER_MAP;\nfunction m(e) {\n  return {\n    isValid: \"group\" === e.type,\n    errorMessage: \"Layer.type should be 'group'\"\n  };\n}\nfunction y(e) {\n  return {\n    isValid: a(e, p),\n    errorMessage: `Layer.portalItem.typeKeywords should have '${p}'`\n  };\n}\nfunction f(e, r) {\n  return {\n    ...t(e, \"web-map\", !0),\n    initiator: r\n  };\n}\nfunction v(e) {\n  const r = e.layerJSON;\n  return Promise.resolve(r && Object.keys(r).length ? r : null);\n}\nasync function d(e, r) {\n  r.title ||= e.title, s(r, o.METADATA), n(r, p);\n}\nasync function I(r, t) {\n  return e({\n    layer: r,\n    itemType: u,\n    validateLayer: m,\n    validateItem: y,\n    createJSONContext: e => f(e, r),\n    createItemData: v,\n    errorNamePrefix: c,\n    saveResources: async (e, t) => (r.sourceIsPortalItem || (await e.removeAllResources().catch(() => {})), i(r.resourceReferences, t))\n  }, t);\n}\nasync function g(e, t, o) {\n  return r({\n    layer: e,\n    itemType: u,\n    validateLayer: m,\n    createJSONContext: r => f(r, e),\n    createItemData: v,\n    errorNamePrefix: l,\n    newItem: t,\n    setItemProperties: d,\n    saveResources: (r, t) => i(e.resourceReferences, t)\n  }, o);\n}\nexport { I as save, g as saveAs };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,IAAM,IAAI;AAAV,IACE,IAAI;AADN,IAEE,IAAI;AAFN,IAGEA,KAAI,EAAE;AACR,SAAS,EAAE,GAAG;AACZ,SAAO;AAAA,IACL,SAAS,YAAY,EAAE;AAAA,IACvB,cAAc;AAAA,EAChB;AACF;AACA,SAAS,EAAE,GAAG;AACZ,SAAO;AAAA,IACL,SAAS,EAAE,GAAGA,EAAC;AAAA,IACf,cAAc,8CAA8CA,EAAC;AAAA,EAC/D;AACF;AACA,SAASC,GAAE,GAAG,GAAG;AACf,SAAO,iCACF,EAAE,GAAG,WAAW,IAAE,IADhB;AAAA,IAEL,WAAW;AAAA,EACb;AACF;AACA,SAAS,EAAE,GAAG;AACZ,QAAM,IAAI,EAAE;AACZ,SAAO,QAAQ,QAAQ,KAAK,OAAO,KAAK,CAAC,EAAE,SAAS,IAAI,IAAI;AAC9D;AACA,SAAe,EAAE,GAAG,GAAG;AAAA;AACrB,MAAE,UAAU,EAAE,OAAO,EAAE,GAAG,EAAE,QAAQ,GAAG,EAAE,GAAGD,EAAC;AAAA,EAC/C;AAAA;AACA,SAAe,EAAE,GAAG,GAAG;AAAA;AACrB,WAAO,EAAE;AAAA,MACP,OAAO;AAAA,MACP,UAAU;AAAA,MACV,eAAe;AAAA,MACf,cAAc;AAAA,MACd,mBAAmB,OAAKC,GAAE,GAAG,CAAC;AAAA,MAC9B,gBAAgB;AAAA,MAChB,iBAAiB;AAAA,MACjB,eAAe,CAAO,GAAGC,OAAG;AAAI,iBAAE,uBAAuB,MAAM,EAAE,mBAAmB,EAAE,MAAM,MAAM;AAAA,QAAC,CAAC,IAAI,EAAE,EAAE,oBAAoBA,EAAC;AAAA;AAAA,IACnI,GAAG,CAAC;AAAA,EACN;AAAA;AACA,SAAe,EAAE,GAAG,GAAGC,IAAG;AAAA;AACxB,WAAO,EAAE;AAAA,MACP,OAAO;AAAA,MACP,UAAU;AAAA,MACV,eAAe;AAAA,MACf,mBAAmB,OAAKF,GAAE,GAAG,CAAC;AAAA,MAC9B,gBAAgB;AAAA,MAChB,iBAAiB;AAAA,MACjB,SAAS;AAAA,MACT,mBAAmB;AAAA,MACnB,eAAe,CAAC,GAAGC,OAAM,EAAE,EAAE,oBAAoBA,EAAC;AAAA,IACpD,GAAGC,EAAC;AAAA,EACN;AAAA;",
  "names": ["p", "f", "t", "o"]
}
