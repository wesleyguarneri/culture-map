{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/layers/support/TileInfoTilemapCache.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport l from \"../../core/Error.js\";\nimport { waitTick as t, isAbortError as i } from \"../../core/promiseUtils.js\";\nclass e {\n  constructor(l, t = 0, i = l.lods[l.lods.length - 1].level) {\n    this.tileInfo = l, this.minLOD = t, this.maxLOD = i, l.lodAt(t) || (this.minLOD = l.lods[0].level), l.lodAt(i) || (this.maxLOD = l.lods[l.lods.length - 1].level);\n  }\n  get effectiveMinLOD() {\n    return this.minLOD ?? this.tileInfo.lods[0].level;\n  }\n  get effectiveMaxLOD() {\n    return this.maxLOD ?? this.tileInfo.lods[this.tileInfo.lods.length - 1].level;\n  }\n  getAvailability(l, t, i) {\n    const e = this.tileInfo?.lodAt(l);\n    return !e || l < this.minLOD || l > this.maxLOD ? \"unavailable\" : e.cols && e.rows ? i >= e.cols[0] && i <= e.cols[1] && t >= e.rows[0] && t <= e.rows[1] ? \"unknown\" : \"unavailable\" : \"unknown\";\n  }\n  async fetchAvailability(i, e, o, s) {\n    await t(s);\n    const a = this.getAvailability(i, e, o);\n    if (\"unavailable\" === a) throw new l(\"tile-map:tile-unavailable\", \"Tile is not available\", {\n      level: i,\n      row: e,\n      col: o\n    });\n    return a;\n  }\n  async fetchAvailabilityUpsample(l, e, o, s, a) {\n    await t(a), s.level = l, s.row = e, s.col = o;\n    const n = this.tileInfo;\n    return n.updateTileInfo(s), this.fetchAvailability(l, e, o, a).catch(l => {\n      if (i(l)) throw l;\n      if (n.upsampleTile(s)) return this.fetchAvailabilityUpsample(s.level, s.row, s.col, s, a);\n      throw l;\n    });\n  }\n}\nexport { e as default };"],
  "mappings": ";;;;;;;;;;;;AAMA,IAAM,IAAN,MAAQ;AAAA,EACN,YAAY,GAAG,IAAI,GAAG,IAAI,EAAE,KAAK,EAAE,KAAK,SAAS,CAAC,EAAE,OAAO;AACzD,SAAK,WAAW,GAAG,KAAK,SAAS,GAAG,KAAK,SAAS,GAAG,EAAE,MAAM,CAAC,MAAM,KAAK,SAAS,EAAE,KAAK,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,MAAM,KAAK,SAAS,EAAE,KAAK,EAAE,KAAK,SAAS,CAAC,EAAE;AAAA,EAC7J;AAAA,EACA,IAAI,kBAAkB;AACpB,WAAO,KAAK,UAAU,KAAK,SAAS,KAAK,CAAC,EAAE;AAAA,EAC9C;AAAA,EACA,IAAI,kBAAkB;AACpB,WAAO,KAAK,UAAU,KAAK,SAAS,KAAK,KAAK,SAAS,KAAK,SAAS,CAAC,EAAE;AAAA,EAC1E;AAAA,EACA,gBAAgB,GAAG,GAAG,GAAG;AACvB,UAAMA,KAAI,KAAK,UAAU,MAAM,CAAC;AAChC,WAAO,CAACA,MAAK,IAAI,KAAK,UAAU,IAAI,KAAK,SAAS,gBAAgBA,GAAE,QAAQA,GAAE,OAAO,KAAKA,GAAE,KAAK,CAAC,KAAK,KAAKA,GAAE,KAAK,CAAC,KAAK,KAAKA,GAAE,KAAK,CAAC,KAAK,KAAKA,GAAE,KAAK,CAAC,IAAI,YAAY,gBAAgB;AAAA,EAC1L;AAAA,EACM,kBAAkB,GAAGA,IAAG,GAAGC,IAAG;AAAA;AAClC,YAAM,EAAEA,EAAC;AACT,YAAM,IAAI,KAAK,gBAAgB,GAAGD,IAAG,CAAC;AACtC,UAAI,kBAAkB,EAAG,OAAM,IAAI,EAAE,6BAA6B,yBAAyB;AAAA,QACzF,OAAO;AAAA,QACP,KAAKA;AAAA,QACL,KAAK;AAAA,MACP,CAAC;AACD,aAAO;AAAA,IACT;AAAA;AAAA,EACM,0BAA0B,GAAGA,IAAG,GAAGC,IAAG,GAAG;AAAA;AAC7C,YAAM,EAAE,CAAC,GAAGA,GAAE,QAAQ,GAAGA,GAAE,MAAMD,IAAGC,GAAE,MAAM;AAC5C,YAAM,IAAI,KAAK;AACf,aAAO,EAAE,eAAeA,EAAC,GAAG,KAAK,kBAAkB,GAAGD,IAAG,GAAG,CAAC,EAAE,MAAM,CAAAE,OAAK;AACxE,YAAI,EAAEA,EAAC,EAAG,OAAMA;AAChB,YAAI,EAAE,aAAaD,EAAC,EAAG,QAAO,KAAK,0BAA0BA,GAAE,OAAOA,GAAE,KAAKA,GAAE,KAAKA,IAAG,CAAC;AACxF,cAAMC;AAAA,MACR,CAAC;AAAA,IACH;AAAA;AACF;",
  "names": ["e", "s", "l"]
}
