{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Logger.js\";\nimport { disposeMaybe as t } from \"../../core/maybe.js\";\nimport { typedArrayStaticSize as i } from \"../../core/typedArrayUtil.js\";\nimport { ResourceType as r } from \"./enums.js\";\nimport { bindVertexBufferLayout as s } from \"./Util.js\";\nconst n = () => e.getLogger(\"esri.views.webgl.VertexArrayObject\");\nlet o = class {\n  constructor(e, t, i, r, s = null) {\n    this._context = e, this._locations = t, this._layout = i, this._buffers = r, this._indexBuffer = s, this._glName = null, this._initialized = !1;\n  }\n  get glName() {\n    return this._glName;\n  }\n  get context() {\n    return this._context;\n  }\n  get vertexBuffers() {\n    return this._buffers;\n  }\n  get indexBuffer() {\n    return this._indexBuffer;\n  }\n  get byteSize() {\n    return Object.keys(this._buffers).reduce((e, t) => e + this._buffers[t].usedMemory, null != this._indexBuffer ? this._indexBuffer.usedMemory : 0);\n  }\n  get layout() {\n    return this._layout;\n  }\n  get locations() {\n    return this._locations;\n  }\n  get usedMemory() {\n    return this.byteSize + (Object.keys(this._buffers).length + (this._indexBuffer ? 1 : 0)) * i;\n  }\n  dispose() {\n    if (this._context) {\n      this._context.getBoundVAO() === this && this._context.bindVAO(null);\n      for (const e in this._buffers) this._buffers[e]?.dispose(), delete this._buffers[e];\n      this._indexBuffer = t(this._indexBuffer), this.disposeVAOOnly();\n    } else (this._glName || Object.getOwnPropertyNames(this._buffers).length > 0) && n().warn(\"Leaked WebGL VAO\");\n  }\n  disposeVAOOnly() {\n    this._glName && (this._context.gl.deleteVertexArray(this._glName), this._glName = null, this._context.instanceCounter.decrement(r.VertexArrayObject, this)), this._context = null;\n  }\n  initialize() {\n    if (this._initialized) return;\n    const {\n        gl: e\n      } = this._context,\n      t = e.createVertexArray();\n    e.bindVertexArray(t), this._bindLayout(), e.bindVertexArray(null), this._glName = t, this._context.instanceCounter.increment(r.VertexArrayObject, this), this._initialized = !0;\n  }\n  bind() {\n    this.initialize(), this._context.gl.bindVertexArray(this.glName);\n  }\n  _bindLayout() {\n    const {\n      _buffers: e,\n      _layout: t,\n      _indexBuffer: i\n    } = this;\n    e || n().error(\"Vertex buffer dictionary is empty!\");\n    const r = this._context.gl;\n    for (const o in e) {\n      const i = e[o];\n      i || n().error(\"Vertex buffer is uninitialized!\");\n      const r = t[o];\n      r || n().error(\"Vertex element descriptor is empty!\"), s(this._context, this._locations, i, r);\n    }\n    null != i && r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, i.glName);\n  }\n  unbind() {\n    this.initialize(), this._context.gl.bindVertexArray(null);\n  }\n};\nexport { o as VertexArrayObject };"],
  "mappings": "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",
  "names": ["n", "r", "o", "i"]
}
