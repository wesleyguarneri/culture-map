{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/terrain/Overlay.js", "../../../../../../node_modules/@arcgis/core/views/3d/terrain/OverlayFramebufferObject.js", "../../../../../../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderTargets.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRepository.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BindParameters.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderContext.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DrawParameters.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/BufferRange.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/Instance.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/DrawCommand.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/PerBufferData.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/PerOriginData.js", "../../../../../../node_modules/@arcgis/core/core/MemCachePool.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/VaoCache.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/MergedRenderer.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/SortedRenderGeometryRenderer.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechniqueConfiguration.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/OverlayCompositingTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as e, offset as t, copy as s } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { fromValues as i } from \"../webgl-engine/lib/LocalOriginFactory.js\";\nclass n {\n  constructor() {\n    this._extent = e(), this.resolution = 0, this.renderLocalOrigin = i(0, 0, 0, \"O\"), this.pixelRatio = 1, this.mapUnitsPerPixel = 1, this.canvasGeometries = new r();\n  }\n  get extent() {\n    return this._extent;\n  }\n  setupGeometryViewsCyclical(e) {\n    this.setupGeometryViewsDirect();\n    const s = .001 * e.range;\n    if (this._extent[0] - s <= e.min) {\n      const s = this.canvasGeometries.extents[this.canvasGeometries.numViews++];\n      t(this._extent, e.range, 0, s);\n    }\n    if (this._extent[2] + s >= e.max) {\n      const s = this.canvasGeometries.extents[this.canvasGeometries.numViews++];\n      t(this._extent, -e.range, 0, s);\n    }\n  }\n  setupGeometryViewsDirect() {\n    this.canvasGeometries.numViews = 1, s(this.canvasGeometries.extents[0], this._extent);\n  }\n  hasSomeSizedView() {\n    for (let e = 0; e < this.canvasGeometries.numViews; e++) {\n      const t = this.canvasGeometries.extents[e];\n      if (t[0] !== t[2] && t[1] !== t[3]) return !0;\n    }\n    return !1;\n  }\n}\nclass r {\n  constructor() {\n    this.extents = [e(), e(), e()], this.numViews = 0;\n  }\n}\nexport { n as Overlay };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { releaseMaybe as e } from \"../../../core/maybe.js\";\nclass t {\n  constructor(e, t, h) {\n    this._fbos = e, this._format = t, this._name = h;\n  }\n  get valid() {\n    return null != this._handle?.getTexture();\n  }\n  dispose() {\n    this._handle = e(this._handle);\n  }\n  get texture() {\n    return this._handle?.getTexture();\n  }\n  bind(e, t, h) {\n    this._handle && this._handle.fbo?.width === t && this._handle.fbo?.height === h || (this._handle?.release(), this._handle = this._fbos.acquire(t, h, this._name, this._format)), e.unbindTexture(this._handle?.fbo?.colorTexture), e.bindFramebuffer(this._handle?.fbo);\n  }\n  generateMipMap() {\n    this._handle?.getTexture()?.descriptor?.hasMipmap && this._handle?.getTexture()?.generateMipmap();\n  }\n}\nexport { t as OverlayFramebufferObject };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from \"../../../core/has.js\";\nimport { OverlayContent as r } from \"./OverlayContent.js\";\nimport { OverlayFramebufferObject as e } from \"./OverlayFramebufferObject.js\";\nimport { ColorFormat as o } from \"../webgl/formats.js\";\nimport { ShaderOutput as t } from \"../webgl-engine/core/shaderLibrary/ShaderOutput.js\";\nclass a {\n  constructor(r, t, a, s, l = o.RGBA_MIPMAP) {\n    this.output = a, this.content = s, this.fbo = new e(r, l, t);\n  }\n  get valid() {\n    return this.fbo.valid;\n  }\n}\nclass s {\n  constructor(e) {\n    this.targets = [new a(e, \"overlay color\", t.Color, r.Color), new a(e, \"overlay IM color\", t.Color, r.ColorNoRasterImage), new a(e, \"overlay highlight\", t.Highlight, r.Highlight, o.RGBA4), new a(e, \"overlay water\", t.Normal, r.WaterNormal), new a(e, \"overlay occluded\", t.Color, r.Occluded)], has(\"enable-feature:objectAndLayerId-rendering\") && this.targets.push(new a(e, \"overlay oid\", t.ObjectAndLayerIdColor, r.ObjectAndLayerIdColor));\n  }\n  getTexture(r) {\n    return this.targets[r]?.fbo.texture;\n  }\n  dispose() {\n    for (const r of this.targets) r.fbo.dispose();\n  }\n  computeValidity() {\n    return this.targets.reduce((r, e, o) => e.valid ? r |= 1 << o : r, 0);\n  }\n}\nexport { s as OverlayRenderTargets, a as RenderTargetDescriptor };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { NestedMap as e } from \"../../../../../core/NestedMap.js\";\nimport { ShaderTechniqueConfiguration as t } from \"./ShaderTechniqueConfiguration.js\";\nclass r {\n  constructor(t) {\n    this._context = t, this._perConstructorInstances = new e(), this._frameCounter = 0, this._keepAliveFrameCount = n;\n  }\n  get viewingMode() {\n    return this._context.viewingMode;\n  }\n  get constructionContext() {\n    return this._context;\n  }\n  destroy() {\n    this._perConstructorInstances.forEach(e => e.forEach(e => e.technique.destroy())), this._perConstructorInstances.clear();\n  }\n  acquire(e, t = o) {\n    const r = t.key;\n    let n = this._perConstructorInstances.get(e, r);\n    if (null == n) {\n      const o = new e(this._context, t, () => this.release(o));\n      n = new s(o), this._perConstructorInstances.set(e, r, n);\n    }\n    return ++n.refCount, n.technique;\n  }\n  releaseAndAcquire(e, t, r) {\n    if (null != r) {\n      if (t.key === r.key) return r;\n      this.release(r);\n    }\n    return this.acquire(e, t);\n  }\n  release(e) {\n    if (null == e || this._perConstructorInstances.empty) return;\n    const t = this._perConstructorInstances.get(e.constructor, e.key);\n    null != t && (--t.refCount, 0 === t.refCount && (t.refZeroFrame = this._frameCounter));\n  }\n  frameUpdate() {\n    this._frameCounter++, this._keepAliveFrameCount !== n && this._perConstructorInstances.forEach((e, t) => {\n      e.forEach((e, r) => {\n        0 === e.refCount && e.refZeroFrame + this._keepAliveFrameCount < this._frameCounter && (e.technique.destroy(), this._perConstructorInstances.delete(t, r));\n      });\n    });\n  }\n  async reloadAll() {\n    const e = new Array();\n    this._perConstructorInstances.forEach((t, r) => {\n      const s = async (e, t) => {\n        const r = t.shader;\n        r && (await r.reload(), e.forEach(e => e.technique.reload(this._context)));\n      };\n      e.push(s(t, r));\n    }), await Promise.all(e);\n  }\n}\nclass s {\n  constructor(e) {\n    this.technique = e, this.refCount = 0, this.refZeroFrame = 0;\n  }\n}\nconst n = -1,\n  o = new t();\nexport { r as ShaderTechniqueRepository };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { disposeMaybe as t } from \"../../../../core/maybe.js\";\nimport { NestedMap as r } from \"../../../../core/NestedMap.js\";\nimport { assert as i } from \"./Util.js\";\nclass s {\n  constructor(e, t, i, s) {\n    this._textures = e, this._techniques = t, this.materialChanged = i, this.requestRender = s, this._id2glMaterialRef = new r();\n  }\n  dispose() {\n    this._textures.destroy();\n  }\n  acquire(e, t, r) {\n    this._ownMaterial(e);\n    const i = e.produces.get(t);\n    if (!i?.(r)) return null;\n    let s = this._id2glMaterialRef.get(r, e.id);\n    if (null == s) {\n      const t = e.createGLMaterial({\n        material: e,\n        techniques: this._techniques,\n        textures: this._textures,\n        output: r\n      });\n      s = new a(t), this._id2glMaterialRef.set(r, e.id, s);\n    }\n    return s.ref(), s.glMaterial;\n  }\n  release(e, r) {\n    const i = this._id2glMaterialRef.get(r, e.id);\n    null != i && (i.unref(), i.referenced || (t(i.glMaterial), this._id2glMaterialRef.delete(r, e.id)));\n  }\n  _ownMaterial(t) {\n    t.repository && t.repository !== this && e.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRepository\").error(\"Material is already owned by a different material repository\"), t.repository = this;\n  }\n}\nclass a {\n  constructor(e) {\n    this.glMaterial = e, this._refCnt = 0;\n  }\n  ref() {\n    ++this._refCnt;\n  }\n  unref() {\n    --this._refCnt, i(this._refCnt >= 0);\n  }\n  get referenced() {\n    return this._refCnt > 0;\n  }\n}\nexport { s as GLMaterialRepository };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as i } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { create as t } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { CloudsParameters as e } from \"../../environment/CloudsParameters.js\";\nimport s from \"../../webgl/RenderCamera.js\";\nimport { HUDRenderStyle as r } from \"../core/shaderLibrary/hud/HUDRenderStyle.js\";\nimport { MultipassGeometryUniforms as h } from \"../core/shaderLibrary/shading/MultipassGeometryTest.glsl.js\";\nimport { MultipassTerrainUniforms as a } from \"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";\nimport { Decorations as n } from \"./basicInterfaces.js\";\nimport { RenderSlot as o } from \"./RenderSlot.js\";\nimport { TransparencyPassType as g } from \"./TransparencyPassType.js\";\nimport { SceneLighting as l } from \"../lighting/SceneLighting.js\";\nclass m {\n  constructor(i, m) {\n    this.shadowMap = i, this.slicePlane = m, this.slot = o.OPAQUE_MATERIAL, this.hasOccludees = !1, this.enableFillLights = !0, this.transparencyPassType = g.NONE, this.alignPixelEnabled = !1, this.decorations = n.ON, this.overlayStretch = 1, this.viewshedEnabled = !1, this._camera = new s(), this._inverseViewport = t(), this.oldLighting = new l(), this.newLighting = new l(), this._fadedLighting = new l(), this._lighting = this.newLighting, this.ssr = new d(), this.multipassEnabled = !1, this.multipassTerrain = new a(), this.multipassGeometry = new h(), this.hudRenderStyle = r.Occluded, this.cloudsFade = new e(), this.shadowHighlightsVisible = !1;\n  }\n  get camera() {\n    return this._camera;\n  }\n  set camera(i) {\n    this._camera = i, this._inverseViewport[0] = 1 / i.fullViewport[2], this._inverseViewport[1] = 1 / i.fullViewport[3];\n  }\n  get inverseViewport() {\n    return this._inverseViewport;\n  }\n  get lighting() {\n    return this._lighting;\n  }\n  get weatherFading() {\n    return this._lighting === this._fadedLighting;\n  }\n  fadeLighting(i) {\n    const {\n      oldLighting: t,\n      newLighting: e\n    } = this;\n    i >= 1 ? this._lighting = e : (this._fadedLighting.lerpLighting(t, e, i), this._lighting = this._fadedLighting);\n  }\n}\nclass d {\n  constructor() {\n    this.fadeFactor = 1, this.reprojectionMatrix = i();\n  }\n}\nexport { m as BindParameters };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { Milliseconds as e } from \"../../../../core/time.js\";\nimport r from \"../../webgl/RenderCamera.js\";\nimport { ShaderOutput as t } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { BindParameters as s } from \"./BindParameters.js\";\nimport { RenderOccludedFlag as i } from \"./Material.js\";\nclass a {\n  constructor(e, i, a = null) {\n    this.rctx = e, this.sliceHelper = a, this.lastFrameCamera = new r(), this.output = t.Color, this.renderOccludedMask = l, this.bindParameters = new s(i, null != a ? a.plane : null), this.bindParameters.alignPixelEnabled = !0;\n  }\n}\nclass n extends a {\n  constructor(r, t, s, i) {\n    super(r, s, i), this.offscreenRenderingHelper = t, this.sliceHelper = i, this.time = e(0);\n  }\n}\nconst l = i.Occlude | i.OccludeAndTransparent | i.OccludeAndTransparentStencil;\nexport { a as OverlayRenderContext, n as RenderContext, l as defaultRenderOccludedMask };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ResourceState as s } from \"./basicInterfaces.js\";\nclass t {\n  constructor(s, t) {\n    this._material = s, this._repository = t, this._map = new Map();\n  }\n  dispose() {\n    this._map.forEach((s, t) => {\n      null != s && this._repository.release(this._material, t);\n    });\n  }\n  load(t, e, r) {\n    const i = this._material.produces.get(e);\n    if (!i?.(r)) return null;\n    this._map.has(r) || this._map.set(r, this._repository.acquire(this._material, e, r));\n    const a = this._map.get(r);\n    if (null != a) {\n      if (a.ensureResources(t) === s.LOADED) return a;\n      this._repository.requestRender();\n    }\n    return null;\n  }\n}\nexport { t as GLMaterials };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { VertexNormalDrawParameters as i } from \"../core/shaderLibrary/attributes/VertexNormal.glsl.js\";\nclass s extends i {\n  constructor(i = r()) {\n    super(), this.origin = i, this.slicePlaneLocalOrigin = this.origin;\n  }\n}\nexport { s as DrawParameters };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t {\n  constructor(t = 0, o = 0) {\n    this.from = t, this.to = o;\n  }\n  get numElements() {\n    return this.to - this.from;\n  }\n}\nfunction o(t) {\n  const o = new Map();\n  t.forAll(t => o.set(t.from, t));\n  let e = !0;\n  for (; e;) {\n    e = !1;\n    for (let r = 0; r < t.length; ++r) {\n      const n = t.data[r],\n        s = o.get(n.to);\n      if (!s) return;\n      n.to = s.to, o.delete(s.from), t.removeUnordered(s), e = !0;\n    }\n  }\n}\nexport { t as BufferRange, o as mergeAdjacentRanges };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { BufferRange as e } from \"./BufferRange.js\";\nclass s extends e {\n  constructor(e, s, t) {\n    super(s, t), this.geometry = e;\n  }\n  get isVisible() {\n    return this.geometry.visible;\n  }\n  get hasHighlights() {\n    return null != this.geometry.highlights && this.isVisible;\n  }\n  get hasOccludees() {\n    return null != this.geometry.occludees;\n  }\n}\nexport { s as Instance };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t {\n  constructor() {\n    this.first = 0, this.count = 0;\n  }\n}\nexport { t as DrawCommand };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport s from \"../../../../../core/PooledArray.js\";\nimport { BufferRange as t } from \"./BufferRange.js\";\nimport { DrawCommand as e } from \"./DrawCommand.js\";\nclass n {\n  constructor() {\n    this._numElements = 0, this._instances = new Map(), this.holes = new s({\n      allocator: s => s || new t(),\n      deallocator: null\n    }), this.hasHiddenInstances = !1, this.hasHighlights = !1, this.hasOccludees = !1, this.drawCommandsDirty = !0, this.drawCommandsDefault = o(), this.drawCommandsHighlight = o(), this.drawCommandsOccludees = o(), this.drawCommandsShadowHighlightRest = o();\n  }\n  get numElements() {\n    return this._numElements;\n  }\n  get instances() {\n    return this._instances;\n  }\n  addInstance(s, t) {\n    this.deleteInstance(s), this._instances.set(s, t), this._numElements += t.numElements;\n  }\n  deleteInstance(s) {\n    const t = this._instances.get(s);\n    t && (this._numElements -= t.numElements, this._instances.delete(s));\n  }\n  updateInstance(s, t, e) {\n    const n = this._instances.get(s);\n    n && (this._numElements -= n.numElements, n.from = t, n.to = e, this._numElements += n.numElements);\n  }\n  updateDrawState(s) {\n    s.isVisible ? (s.hasHighlights && (this.hasHighlights = !0), s.hasOccludees && (this.hasOccludees = !0)) : this.hasHiddenInstances = !0;\n  }\n  updateDrawCommands(s) {\n    if (this.drawCommandsDefault.clear(), this.drawCommandsHighlight.clear(), this.drawCommandsOccludees.clear(), this.drawCommandsShadowHighlightRest.clear(), this.drawCommandsDirty = !1, 0 === this._instances.size) return;\n    if (!this.needsMultipleCommands()) {\n      const t = this.drawCommandsDefault.pushNew(),\n        e = this.holes.front();\n      return null != this.vao && 1 === this.holes.length && e.to === Math.floor(this.vao.byteSize / s) ? (t.first = 0, void (t.count = e.from)) : (t.first = 1 / 0, t.count = 0, this._instances.forEach(s => {\n        t.first = Math.min(t.first, s.from), t.count = Math.max(t.count, s.to);\n      }), void (t.count -= t.first));\n    }\n    const t = Array.from(this._instances.values()).sort((s, t) => s.from === t.from ? s.to - t.to : s.from - t.from);\n    for (const e of t) e.isVisible && (h(e.hasOccludees ? this.drawCommandsOccludees : this.drawCommandsDefault, e), h(e.hasHighlights ? this.drawCommandsHighlight : this.drawCommandsShadowHighlightRest, e));\n  }\n  needsMultipleCommands() {\n    return this.hasOccludees || this.hasHighlights || this.hasHiddenInstances;\n  }\n}\nclass i extends n {}\nfunction a(s) {\n  return null != s.vao;\n}\nfunction o() {\n  return new s({\n    allocator: s => s || new e(),\n    deallocator: s => s\n  });\n}\nfunction h(s, t) {\n  const e = s.back();\n  if (null == e) {\n    const e = s.pushNew();\n    return e.first = t.from, void (e.count = t.numElements);\n  }\n  if (r(e, t)) {\n    const s = t.from - e.first + t.numElements;\n    e.count = s;\n  } else {\n    const e = s.pushNew();\n    e.first = t.from, e.count = t.numElements;\n  }\n}\nfunction r(s, t) {\n  return s.first + s.count >= t.from;\n}\nexport { n as PerBufferData, i as PerVaoData, a as hasVao };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass s {\n  constructor(s) {\n    this.origin = s, this.buffers = new Array();\n  }\n  dispose() {\n    this.buffers.forEach(s => s.vao.dispose()), this.buffers.length = 0;\n  }\n  findBuffer(s) {\n    return this.buffers.find(r => r.instances.has(s));\n  }\n}\nexport { s as PerOriginData };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { RemoveMode as e, NoPriority as t } from \"./MemCache.js\";\nclass c {\n  constructor(t, c) {\n    this._cache = t(c, (t, c, s) => {\n      switch (c) {\n        case e.ALL:\n          return t.forEach(e => e.dispose()), 0;\n        case e.SOME:\n          {\n            const e = t.shift();\n            return e && (s -= Math.round(e.usedMemory), e.dispose()), s;\n          }\n      }\n    });\n  }\n  hitrate() {\n    return this._cache.hitRate;\n  }\n  destroy() {\n    this._cache.destroy();\n  }\n  clear() {\n    this._cache.clear();\n  }\n  getSize(e) {\n    return this._cache.getSize(e);\n  }\n  pop(e) {\n    const t = this._cache.peek(e);\n    if (!t) return;\n    const c = t.pop();\n    if (t.length > 0) {\n      if (c) {\n        const s = this._cache.getSize(e) - Math.round(c.usedMemory);\n        this._cache.updateSize(e, t, s);\n      }\n    } else this._cache.pop(e);\n    return c;\n  }\n  put(e, c, s = t) {\n    const h = this._cache.peek(e);\n    if (!h) return void this._cache.put(e, [c], c.usedMemory, s);\n    h.push(c);\n    const r = this._cache.getSize(e) + Math.round(c.usedMemory);\n    this._cache.updateSize(e, h, r);\n  }\n}\nexport { c as MemCachePool };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { MemCachePool as t } from \"../../../../../core/MemCachePool.js\";\nimport { VertexArrayObject as e } from \"../../lib/VertexArrayObject.js\";\nimport { BufferObject as r } from \"../../../../webgl/BufferObject.js\";\nimport { Usage as o } from \"../../../../webgl/enums.js\";\nclass s {\n  constructor(e, r, o) {\n    this._rctx = e, this._locations = r, this._layout = o, this._cache = new t(e.newCache, \"VAOCache\");\n  }\n  dispose() {\n    this._cache.destroy();\n  }\n  newVao(t) {\n    const s = t.toString();\n    let c = this._cache.pop(s);\n    return c || (c = new e(this._rctx, this._locations, {\n      geometry: this._layout\n    }, {\n      geometry: r.createVertex(this._rctx, o.STATIC_DRAW)\n    }), c.vertexBuffers.geometry.setSize(t), c);\n  }\n  deleteVao(t) {\n    if (null == t) return;\n    const e = t.byteSize.toString();\n    this._cache.put(e, t);\n  }\n}\nexport { s as VaoCache };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport { removeUnordered as t, filterInPlace as r } from \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/has.js\";\nimport { someMap as i } from \"../../../../../core/MapUtils.js\";\nimport { nextHighestPowerOfTwo as s } from \"../../../../../core/mathUtils.js\";\nimport { disposeMaybe as o } from \"../../../../../core/maybe.js\";\nimport { NestedMap as a } from \"../../../../../core/NestedMap.js\";\nimport n from \"../../../../../core/PooledArray.js\";\nimport { property as l } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/Logger.js\";\nimport { subclass as u } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { multiply as h, invert as c, transpose as f } from \"../../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as d } from \"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { glLayout as m } from \"../../../support/buffer/glUtil.js\";\nimport { ShaderOutput as g } from \"../../core/shaderLibrary/ShaderOutput.js\";\nimport { SyncPrepareRenderPlugin as p } from \"../../effects/RenderPlugin.js\";\nimport { GLMaterials as y } from \"../../lib/GLMaterials.js\";\nimport { DirtyState as _ } from \"../../lib/ModelDirtyTypes.js\";\nimport { RenderSlot as b } from \"../../lib/RenderSlot.js\";\nimport { assert as v, setMatrixTranslation3 as w } from \"../../lib/Util.js\";\nimport { DrawParameters as C } from \"../DrawParameters.js\";\nimport { BufferRange as O, mergeAdjacentRanges as A } from \"./BufferRange.js\";\nimport { Instance as E } from \"./Instance.js\";\nimport { PerBufferData as B, hasVao as H } from \"./PerBufferData.js\";\nimport { PerOriginData as D } from \"./PerOriginData.js\";\nimport { VaoCache as R } from \"./VaoCache.js\";\nlet S = class extends p {\n  constructor(e) {\n    super(e), this._vaoCache = null, this._glMaterials = null, this._bufferWriter = null, this._dataByOrigin = new Map(), this._hasHighlights = !1, this._hasOccludees = !1, this._produces = new Map(), this.drapedPriority = 0;\n  }\n  destroy() {\n    this._glMaterials = o(this._glMaterials), this._dataByOrigin.forEach(e => e.dispose()), this._dataByOrigin.clear(), this._vaoCache = o(this._vaoCache);\n  }\n  initialize() {\n    this.material.produces.forEach((e, t) => {\n      this._produces.set(t, t => !(0 === this._dataByOrigin.size || !(t !== g.Highlight && t !== g.ShadowHighlight || this._hasHighlights)) && e(t));\n    });\n  }\n  get produces() {\n    return this._produces;\n  }\n  initializeRenderContext(e, t) {\n    const {\n      rctx: r\n    } = e.renderContext;\n    this._glMaterials = new y(this.material, t ?? e.materials), this._bufferWriter = this.material.createBufferWriter(), this._vaoCache = new R(r, this.material.vertexAttributeLocations, m(this._bufferWriter.vertexBufferLayout));\n  }\n  uninitializeRenderContext() {}\n  get hasOccludees() {\n    return this._hasOccludees;\n  }\n  get isDecoration() {\n    return this.material.parameters.isDecoration;\n  }\n  queryRenderOccludedState(e) {\n    return this.material.queryRenderOccludedState(e);\n  }\n  get materialReference() {\n    return this.material;\n  }\n  get numGeometries() {\n    let e = 0;\n    return this._dataByOrigin.forEach(t => e += t.buffers.reduce((e, t) => e + t.instances.size, 0)), e;\n  }\n  get usedMemory() {\n    let e = 0;\n    return this._dataByOrigin.forEach(t => e += t.buffers.reduce((e, t) => e + t.vao.usedMemory, 0)), e;\n  }\n  forEachGeometry(e) {\n    this._dataByOrigin.forEach(t => t.buffers.forEach(t => t.instances.forEach(t => e(t.geometry))));\n  }\n  modify(e) {\n    this._updateGeometries(e.updates), this._addAndRemoveGeometries(e.adds, e.removes), this._updateDrawCommands();\n  }\n  _updateGeometries(e) {\n    const t = this._bufferWriter;\n    if (null === t) return;\n    const r = t.vertexBufferLayout.stride / 4;\n    for (const i of e) {\n      const e = i.renderGeometry,\n        s = this._dataByOrigin.get(e.localOrigin.id),\n        o = s?.findBuffer(e.id);\n      if (null == o) return;\n      const a = o.instances.get(e.id);\n      if (i.updateType & (_.GEOMETRY | _.TRANSFORMATION)) {\n        const i = U(t.elementCount(a.geometry.geometry) * r),\n          s = t.vertexBufferLayout.createView(i.buffer);\n        this._writeGeometry(e, s, 0), o.vao.vertexBuffers.geometry.setSubData(i, a.from * r, 0, a.numElements * r);\n      }\n      i.updateType & (_.HIGHLIGHT | _.OCCLUDEE | _.VISIBILITY) && (o.drawCommandsDirty = !0);\n    }\n  }\n  _computeDeltas(e, t) {\n    const r = new a();\n    for (const i of e) {\n      const e = i.localOrigin;\n      if (null == e) continue;\n      let t = r.get(e.id, null);\n      null == t && (t = new x(e.vec3), r.set(e.id, null, t)), t.changes.push(i);\n    }\n    for (const i of t) {\n      const e = i.localOrigin;\n      if (null == e) continue;\n      const t = this._dataByOrigin.get(e.id),\n        s = t?.findBuffer(i.id);\n      if (null == s) continue;\n      let o = r.get(e.id, s);\n      null == o && (o = new x(e.vec3), r.set(e.id, s, o)), o.changes.push(i);\n    }\n    return r;\n  }\n  _addAndRemoveGeometries(e, r) {\n    if (null === this._bufferWriter || null === this._vaoCache) return;\n    const {\n        _bufferWriter: i,\n        _dataByOrigin: s\n      } = this,\n      o = i.vertexBufferLayout.stride / 4,\n      a = this._computeDeltas(e, r);\n    a.forEach((e, r) => {\n      const n = e.get(null),\n        l = null != n ? n.changes : [];\n      a.delete(r, null);\n      let u = s.get(r);\n      if (e.forEach((e, n) => {\n        if (a.delete(r, n), null == n) return void v(!1, \"No VAO for removed geometries\");\n        if (n.instances.size === e.changes.length) return this._vaoCache.deleteVao(n.vao), t(u.buffers, n), void (0 === u.buffers.length && 0 === l.length && s.delete(r));\n        const h = n.numElements,\n          c = n.vao.byteSize / 4,\n          f = l.reduce((e, t) => e + i.elementCount(t.geometry), 0),\n          d = e.changes.reduce((e, t) => e + i.elementCount(t.geometry), 0),\n          m = Math.min((h + f - d) * o, z),\n          g = m > c;\n        m > G && m < c / 2 ? (e.changes.forEach(({\n          id: e\n        }) => n.deleteInstance(e)), n.instances.forEach(({\n          geometry: e\n        }) => l.push(e)), this._vaoCache.deleteVao(n.vao), t(u.buffers, n)) : g ? this._applyAndRebuild(n, l, e) : this._applyRemoves(n, e);\n      }), l.length > 0) for (null == u && (u = new D(n.origin), s.set(r, u)), u.buffers.forEach(e => this._applyAdds(e, l)); l.length > 0;) u.buffers.push(this._applyAndRebuild(new B(), l, null));\n    });\n  }\n  _updateDrawCommands() {\n    this._hasHighlights = !1, this._hasOccludees = !1, this._dataByOrigin.forEach(e => {\n      e.buffers.forEach(e => {\n        e.drawCommandsDirty && (e.hasHiddenInstances = !1, e.hasHighlights = !1, e.hasOccludees = !1, i(e.instances, t => (e.updateDrawState(t), e.hasHiddenInstances && e.hasHighlights && e.hasOccludees)), e.updateDrawCommands(this._bufferWriter.vertexBufferLayout.stride)), this._hasHighlights = this._hasHighlights || e.hasHighlights, this._hasOccludees = this._hasOccludees || e.hasOccludees;\n      });\n    });\n  }\n  _applyAndRebuild(e, t, r) {\n    if (null != r) for (const d of r.changes) e.deleteInstance(d.id);\n    const i = this._bufferWriter,\n      s = i.vertexBufferLayout.stride,\n      o = s / 4,\n      a = Math.floor(z / o);\n    let n = e.numElements;\n    for (; t.length > 0;) {\n      const r = t.pop(),\n        s = i.elementCount(r.geometry);\n      if (n + s > a && n > 0) {\n        t.push(r);\n        break;\n      }\n      n += s;\n      const o = new E(r, 0, 0);\n      v(null == e.instances.get(r.id)), e.addInstance(r.id, o);\n    }\n    const l = n * o,\n      u = U(l),\n      h = i.vertexBufferLayout.createView(u.buffer);\n    let c = 0;\n    e.hasHiddenInstances = !1, e.hasHighlights = !1, e.hasOccludees = !1, e.instances.forEach((t, r) => {\n      this._writeGeometry(t.geometry, h, c);\n      const s = c;\n      c += i.elementCount(t.geometry.geometry), e.updateInstance(r, s, c), e.updateDrawState(t);\n    }), this._vaoCache.deleteVao(e.vao), e.vao = this._vaoCache.newVao(q(l)), e.vao.vertexBuffers.geometry.setSubData(u, 0, 0, c * o), e.holes.clear();\n    const f = e.holes.pushNew();\n    return f.from = c, f.to = Math.floor(e.vao.byteSize / s), e.updateDrawCommands(s), e;\n  }\n  _applyRemoves(e, t) {\n    if (0 === t.changes.length || null === this._bufferWriter) return;\n    for (const a of t.changes) {\n      const t = a.id,\n        r = e.instances.get(t);\n      if (!r) continue;\n      e.deleteInstance(t);\n      const i = T.back();\n      if (i) {\n        if (i.to === r.from) {\n          i.to = r.to;\n          continue;\n        }\n        if (i.from === r.to) {\n          i.from = r.from;\n          continue;\n        }\n      }\n      const s = T.pushNew();\n      s.from = r.from, s.to = r.to;\n    }\n    A(T);\n    const r = this._bufferWriter.vertexBufferLayout.stride / 4,\n      i = T.reduce((e, t) => Math.max(e, t.numElements), 0) * r,\n      s = U(i);\n    s.fill(0, 0, i);\n    const o = e.vao.vertexBuffers.geometry;\n    T.forAll(e => o.setSubData(s, e.from * r, 0, e.numElements * r)), e.holes.pushArray(T.data, T.length), T.forAll((e, t) => T.data[t] = null), T.clear(), e.drawCommandsDirty = !0;\n  }\n  _applyAdds(e, t) {\n    if (0 === t.length || null === this._bufferWriter) return;\n    if (!H(e)) return void this._applyAndRebuild(e, t, null);\n    const i = this._bufferWriter,\n      s = i.vertexBufferLayout.stride / 4,\n      o = e.numElements,\n      a = t.reduce((e, t) => e + i.elementCount(t.geometry), 0),\n      n = Math.min((o + a) * s, z),\n      l = 4 * n;\n    if (e.vao.byteSize < q(z - G) && l > e.vao.byteSize) return void this._applyAndRebuild(e, t, null);\n    A(e.holes);\n    const u = new Array();\n    for (const r of t) {\n      const t = i.elementCount(r.geometry),\n        s = M(e.holes, t);\n      u.push(s);\n    }\n    const h = e.vao.vertexBuffers.geometry;\n    let c = 0,\n      f = 0,\n      d = 0;\n    const m = U(n),\n      g = i.vertexBufferLayout.createView(m.buffer);\n    t.forEach((t, r) => {\n      const o = u[r];\n      if (null == o) return;\n      if (!(d === o)) {\n        const e = d - f;\n        e > 0 && h.setSubData(m, f * s, 0, e * s), f = o, c = 0;\n      }\n      const a = i.elementCount(t.geometry);\n      this._writeGeometry(t, g, c), c += a, d = o + a;\n      const n = new E(t, o, o + a);\n      v(null == e.instances.get(t.id)), e.addInstance(t.id, n), e.drawCommandsDirty = !0;\n    });\n    const p = d - f;\n    p > 0 && h.setSubData(m, f * s, 0, p * s), r(t, (e, t) => null == u[t]);\n  }\n  _writeGeometry(e, t, r) {\n    if (null === this._bufferWriter) return;\n    const i = e.localOrigin.vec3;\n    w(j, -i[0], -i[1], -i[2]);\n    const s = h(L, j, e.transformation);\n    c(I, s), f(I, I), this._bufferWriter.write(s, I, e.geometry, t, r);\n  }\n  updateAnimation(e) {\n    return this.material.update(e);\n  }\n  prepareTechnique(e) {\n    if (!this.material.shouldRender(e)) return null;\n    const {\n        output: t,\n        bindParameters: r\n      } = e,\n      i = this.material.produces.get(r.slot);\n    if (!i?.(t)) return null;\n    const s = t === g.Highlight || t === g.ShadowHighlight;\n    if (s && !this._hasHighlights) return null;\n    const o = t === g.ShadowExcludeHighlight,\n      a = !(s || o);\n    for (const n of this._dataByOrigin.values()) for (const i of n.buffers) {\n      if (s && !i.hasHighlights) continue;\n      const n = (s ? i.drawCommandsHighlight : o && i.needsMultipleCommands() ? i.drawCommandsShadowHighlightRest : i.drawCommandsDefault) || null,\n        l = a && i.drawCommandsOccludees || null;\n      if (n?.length || l?.length) {\n        const i = this._glMaterials.load(e.rctx, r.slot, t),\n          s = null != i ? i.beginSlot(r) : null;\n        if (null != s) return s;\n      }\n    }\n    return null;\n  }\n  renderNode(e, t) {\n    const {\n        output: r,\n        bindParameters: i\n      } = e,\n      s = r === g.Highlight || r === g.ShadowHighlight,\n      o = r === g.ShadowExcludeHighlight,\n      a = !(s || o),\n      n = i.slot === b.OCCLUDER_MATERIAL,\n      l = i.slot === b.TRANSPARENT_OCCLUDER_MATERIAL,\n      u = e.rctx;\n    u.runAppleAmdDriverHelper(), u.bindTechnique(t, i, this.material.parameters);\n    for (const h of this._dataByOrigin.values()) for (const e of h.buffers) {\n      if (s && !e.hasHighlights) continue;\n      const r = (s ? e.drawCommandsHighlight : o && e.needsMultipleCommands() ? e.drawCommandsShadowHighlightRest : e.drawCommandsDefault) || null,\n        c = a && e.drawCommandsOccludees || null;\n      if (r?.length || c?.length) {\n        t.program.bindDraw(new C(h.origin), i, this.material.parameters), t.ensureAttributeLocations(e.vao), u.bindVAO(e.vao), r?.length && (u.setPipelineState(t.getPipeline(!1, n, l)), r.forAll(e => u.drawArrays(t.primitiveType, e.first, e.count))), c?.length && (u.setPipelineState(t.getPipeline(!0, n, l)), c.forAll(e => u.drawArrays(t.primitiveType, e.first, e.count)));\n      }\n    }\n  }\n  get test() {}\n};\ne([l({\n  constructOnly: !0\n})], S.prototype, \"material\", void 0), S = e([u(\"esri.views.3d.webgl-engine.materials.renderers.MergedRenderer\")], S);\nclass x {\n  constructor(e) {\n    this.origin = e, this.changes = new Array();\n  }\n}\nfunction M(e, t) {\n  let r;\n  if (!e.some(e => !(e.numElements < t) && (r = e, !0))) return null;\n  const i = r.from;\n  return r.from += t, r.from >= r.to && e.removeUnordered(r), i;\n}\nconst j = d(),\n  L = d(),\n  I = d(),\n  T = new n({\n    allocator: e => e || new O(),\n    deallocator: null\n  }),\n  G = 65536,\n  W = 4 * G,\n  P = 1024,\n  V = 16777216,\n  z = V / 4;\nlet N = new Float32Array(G);\nfunction U(e) {\n  return N.length < e && (N = new Float32Array(e)), N;\n}\nfunction q(e) {\n  const t = 4 * e;\n  return t <= P ? P : t < W ? s(t) : Math.max(Math.min(Math.ceil(1.5 * t / W) * W, V), t);\n}\nexport { S as MergedRenderer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport \"../../../../core/has.js\";\nimport { someMap as t } from \"../../../../core/MapUtils.js\";\nimport s from \"../../../../core/PooledArray.js\";\nimport { property as i } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as o } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { g as a } from \"../../../../chunks/sphere.js\";\nimport { OverlayTarget as d } from \"../../terrain/Intersector.js\";\nimport { ShaderOutput as h } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { ChangeSet as l } from \"./ChangeSet.js\";\nimport { newIntersectorResult as c } from \"./Intersector.js\";\nimport { StoreResults as m, IntersectorType as p } from \"./IntersectorInterfaces.js\";\nimport { RenderOccludedFlag as g } from \"./Material.js\";\nimport { DirtyOperation as u, DirtyState as _ } from \"./ModelDirtyTypes.js\";\nimport { splitRenderGeometryChangeSetByMaterial as y } from \"./rendererUtils.js\";\nimport { RenderSlot as f } from \"./RenderSlot.js\";\nimport { MergedRenderer as R } from \"../materials/renderers/MergedRenderer.js\";\nlet G = class extends r {\n  constructor(e) {\n    super(e), this._pending = new v(), this._changes = new l(), this._materialRenderers = new Map(), this._sortedMaterialRenderers = new s(), this._geometries = new Map(), this._hasHighlights = !1, this._hasWater = !1;\n  }\n  destroy() {\n    this._changes.prune(), this._materialRenderers.forEach(e => e.destroy()), this._materialRenderers.clear(), this._sortedMaterialRenderers.clear(), this._geometries.clear(), this._pending.clear();\n  }\n  get updating() {\n    return !this._pending.empty || this._changes.updates.length > 0;\n  }\n  get rctx() {\n    return this.rendererContext.rctx;\n  }\n  get _materials() {\n    return this.rendererContext.materials;\n  }\n  get _localOriginFactory() {\n    return this.rendererContext.localOriginFactory;\n  }\n  get hasHighlights() {\n    return this._hasHighlights;\n  }\n  get hasWater() {\n    return this._hasWater;\n  }\n  get rendersOccludedDraped() {\n    return t(this._materialRenderers, e => 0 !== e.numGeometries && !e.queryRenderOccludedState(g.Occlude));\n  }\n  get isEmpty() {\n    return !this.updating && 0 === this._materialRenderers.size && 0 === this._geometries.size;\n  }\n  getMaterialRenderer(e) {\n    return this._materialRenderers.get(e);\n  }\n  commitChanges() {\n    if (!this.updating) return !1;\n    this._processAddsRemoves();\n    const e = y(this._changes);\n    let r = !1;\n    return e.forEach((e, t) => {\n      let s = this.getMaterialRenderer(t);\n      if (!s && e.adds.length > 0) {\n        const e = new R({\n          material: t\n        });\n        e.initializeRenderContext(this.rendererContext.pluginContext, this._materials), s = e, this._materialRenderers.set(t, s), r = !0;\n      }\n      s && (s.modify(e), 0 === s.numGeometries && (this._materialRenderers.delete(t), s.destroy(), r = !0));\n    }), this._changes.clear(), r && this._updateSortedMaterialRenderers(), this._hasHighlights = t(this._materialRenderers, e => {\n      const r = e.produces.get(f.DRAPED_MATERIAL);\n      return !!r && r(h.Highlight);\n    }), this._hasWater = t(this._materialRenderers, e => {\n      const r = e.produces.get(f.DRAPED_WATER);\n      return !!r && r(h.Normal);\n    }), this.notifyChange(\"updating\"), !0;\n  }\n  addGeometries(e, r) {\n    if (0 === e.length) return;\n    const t = this._validateRenderGeometries(e);\n    for (const i of t) this._geometries.set(i.id, i);\n    const s = this._pending.empty;\n    for (const i of t) this._pending.adds.add(i);\n    s && this.notifyChange(\"updating\"), r === u.UPDATE && this._notifyGraphicGeometryChanged(e);\n  }\n  removeGeometries(e, r) {\n    const t = this._pending.empty,\n      s = this._pending.adds;\n    for (const i of e) s.has(i) ? (this._pending.removed.add(i), s.delete(i)) : this._pending.removed.has(i) || this._pending.removes.add(i), this._geometries.delete(i.id);\n    t && !this._pending.empty && this.notifyChange(\"updating\"), r === u.UPDATE && this._notifyGraphicGeometryChanged(e);\n  }\n  modifyGeometries(e, r) {\n    const t = 0 === this._changes.updates.length;\n    for (const s of e) {\n      const e = this._changes.updates.pushNew();\n      e.renderGeometry = this._validateRenderGeometry(s), e.updateType = r;\n    }\n    switch (t && this._changes.updates.length > 0 && this.notifyChange(\"updating\"), r) {\n      case _.TRANSFORMATION:\n      case _.GEOMETRY:\n        return this._notifyGraphicGeometryChanged(e);\n      case _.VISIBILITY:\n        return this._notifyGraphicVisibilityChanged(e);\n    }\n  }\n  updateAnimation(e) {\n    let r = !1;\n    return this._sortedMaterialRenderers.forAll(t => r = !!t.updateAnimation && t.updateAnimation(e) || r), r;\n  }\n  shouldRender(e) {\n    return this._sortedMaterialRenderers.some(r => r.prepareTechnique(e));\n  }\n  render(e) {\n    this._sortedMaterialRenderers.forAll(r => {\n      const t = r.prepareTechnique(e);\n      null != t && r.renderNode(e, t);\n    });\n  }\n  intersect(e, r, t, s, i) {\n    return this._geometries.forEach(n => {\n      if (s && !s(n)) return;\n      this._intersectRenderGeometry(n, t, r, 0, e, i);\n      const o = this.rendererContext.longitudeCyclical;\n      o && (n.boundingSphere[0] - n.boundingSphere[3] < o.min && this._intersectRenderGeometry(n, t, r, o.range, e, i), n.boundingSphere[0] + n.boundingSphere[3] > o.max && this._intersectRenderGeometry(n, t, r, -o.range, e, i)), i++;\n    }), i;\n  }\n  _updateSortedMaterialRenderers() {\n    this._sortedMaterialRenderers.clear();\n    let e = 0;\n    for (const r of this._materialRenderers.values()) r.drapedPriority = e++, this._sortedMaterialRenderers.push(r);\n    this._sortedMaterialRenderers.sort((e, r) => r.materialReference?.renderPriority === e.materialReference?.renderPriority ? e.drapedPriority - r.drapedPriority : (r.materialReference?.renderPriority || 0) - (e.materialReference?.renderPriority || 0));\n  }\n  _processAddsRemoves() {\n    this._changes.adds.clear(), this._changes.removes.clear(), this._changes.adds.pushArray(Array.from(this._pending.adds)), this._changes.removes.pushArray(Array.from(this._pending.removes));\n    for (let e = 0; e < this._changes.updates.length;) {\n      const r = this._changes.updates.data[e];\n      this._pending.has(r.renderGeometry) ? this._changes.updates.removeUnorderedIndex(e) : e++;\n    }\n    this._pending.clear();\n  }\n  _intersectRenderGeometry(e, r, t, s, i, n) {\n    if (!e.visible) return;\n    let o = 0;\n    s += e.transformation[12], o = e.transformation[13], A[0] = t[0] - s, A[1] = t[1] - o, e.screenToWorldRatio = this.rendererContext.screenToWorldRatio, e.material.intersectDraped(e, null, i, A, (t, s, o) => {\n      C(r, o, n, e.material.renderPriority, i, e.layerUid, e.graphicUid);\n    }, r);\n  }\n  _notifyGraphicGeometryChanged(e) {\n    if (null == this.drapeSource.notifyGraphicGeometryChanged) return;\n    let r;\n    for (const t of e) {\n      const e = t.graphicUid;\n      null != e && e !== r && (this.drapeSource.notifyGraphicGeometryChanged(e), r = e);\n    }\n  }\n  _notifyGraphicVisibilityChanged(e) {\n    if (null == this.drapeSource.notifyGraphicVisibilityChanged) return;\n    let r;\n    for (const t of e) {\n      const e = t.graphicUid;\n      null != e && e !== r && (this.drapeSource.notifyGraphicVisibilityChanged(e), r = e);\n    }\n  }\n  _validateRenderGeometries(e) {\n    for (const r of e) this._validateRenderGeometry(r);\n    return e;\n  }\n  _validateRenderGeometry(e) {\n    return null == e.localOrigin && (e.localOrigin = this._localOriginFactory.getOrigin(a(e.boundingSphere))), e;\n  }\n  get test() {}\n};\ne([i()], G.prototype, \"drapeSource\", void 0), e([i()], G.prototype, \"updating\", null), e([i()], G.prototype, \"rctx\", null), e([i({\n  constructOnly: !0\n})], G.prototype, \"rendererContext\", void 0), e([i()], G.prototype, \"_materials\", null), e([i()], G.prototype, \"_localOriginFactory\", null), e([i({\n  readOnly: !0\n})], G.prototype, \"isEmpty\", null), e([i()], G.prototype, \"_materialRenderers\", void 0), e([i()], G.prototype, \"_geometries\", void 0), G = e([n(\"esri.views.3d.webgl-engine.lib.SortedRenderGeometryRenderer\")], G);\nclass v {\n  constructor() {\n    this.adds = new Set(), this.removes = new Set(), this.removed = new Set();\n  }\n  get empty() {\n    return 0 === this.adds.size && 0 === this.removes.size && 0 === this.removed.size;\n  }\n  has(e) {\n    return this.adds.has(e) || this.removes.has(e) || this.removed.has(e);\n  }\n  clear() {\n    this.adds.clear(), this.removes.clear(), this.removed.clear();\n  }\n}\nfunction C(e, r, t, s, i, n, o) {\n  const a = new d(n, o, r),\n    h = r => {\n      r.set(p.OVERLAY, a, e.dist, e.normal, e.transformation, t, s);\n    };\n  if ((null == i.results.min.drapedLayerOrder || t >= i.results.min.drapedLayerOrder) && (null == i.results.min.dist || i.results.ground.dist <= i.results.min.dist) && h(i.results.min), i.options.store !== m.MIN && (null == i.results.max.drapedLayerOrder || t < i.results.max.drapedLayerOrder) && (null == i.results.max.dist || i.results.ground.dist > i.results.max.dist) && h(i.results.max), i.options.store === m.ALL) {\n    const e = c(i.ray);\n    h(e), i.results.all.push(e);\n  }\n}\nconst A = o();\nexport { G as SortedRenderGeometryRenderer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { a as e } from \"../../../../chunks/TextureOnly.glsl.js\";\nimport { ReloadableShaderModule as r } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as i } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { Default3D as o } from \"./DefaultVertexAttributeLocations.js\";\nimport { Program as t } from \"./Program.js\";\nimport { BlendFactor as s } from \"../../../webgl/enums.js\";\nimport { makePipelineState as a, separateBlendingParams as l, defaultColorWriteParams as n } from \"../../../webgl/renderState.js\";\nclass m extends i {\n  initializeProgram(e) {\n    return new t(e.rctx, m.shader.get().build(), o);\n  }\n  initializePipeline() {\n    return this.configuration.hasAlpha ? a({\n      blending: l(s.SRC_ALPHA, s.ONE, s.ONE_MINUS_SRC_ALPHA, s.ONE_MINUS_SRC_ALPHA),\n      colorWrite: n\n    }) : a({\n      colorWrite: n\n    });\n  }\n}\nm.shader = new r(e, () => import(\"../core/shaderLibrary/util/TextureOnly.glsl.js\"));\nexport { m as TextureTechnique };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as s } from \"../../../../chunks/tslib.es6.js\";\nimport { ShaderTechniqueConfiguration as e, parameter as o } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nclass r extends e {\n  constructor() {\n    super(...arguments), this.hasAlpha = !1;\n  }\n}\ns([o()], r.prototype, \"hasAlpha\", void 0);\nexport { r as TextureTechniqueConfiguration };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ReloadableShaderModule as e } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as r } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { Default3D as i } from \"../lib/DefaultVertexAttributeLocations.js\";\nimport { Program as o } from \"../lib/Program.js\";\nimport { a as t } from \"../../../../chunks/OverlayCompositing.glsl.js\";\nimport { BlendFactor as s } from \"../../../webgl/enums.js\";\nimport { makePipelineState as l, simpleBlendingParams as a, defaultColorWriteParams as m } from \"../../../webgl/renderState.js\";\nclass n extends r {\n  initializeProgram(e) {\n    return new o(e.rctx, n.shader.get().build(), i);\n  }\n  initializePipeline() {\n    return l({\n      blending: a(s.ONE, s.ONE_MINUS_SRC_ALPHA),\n      colorWrite: m\n    });\n  }\n}\nn.shader = new e(t, () => import(\"./OverlayCompositing.glsl.js\"));\nexport { n as OverlayCompositingTechnique };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport r from \"../../../core/Evented.js\";\nimport \"../../../core/has.js\";\nimport { someMap as t } from \"../../../core/MapUtils.js\";\nimport { releaseMaybe as s, disposeMaybe as i, destroyMaybe as a } from \"../../../core/maybe.js\";\nimport n from \"../../../core/PooledArray.js\";\nimport { watch as o, syncAndInitial as h, on as d } from \"../../../core/reactiveUtils.js\";\nimport { someSet as l } from \"../../../core/SetUtils.js\";\nimport { property as c } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as u } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { ortho as p, fromTranslation as m } from \"../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { s as _ } from \"../../../chunks/vec32.js\";\nimport { fromValues as g } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { ViewingMode as y } from \"../../ViewingMode.js\";\nimport { DrapeTargetType as f, DrapeSourceType as R, DrapedRenderGroup as T } from \"../layers/interfaces.js\";\nimport { debugFlags as b } from \"../support/debugFlags.js\";\nimport { OverlayIndex as w } from \"./interfaces.js\";\nimport { Overlay as x } from \"./Overlay.js\";\nimport { OverlayContent as v } from \"./OverlayContent.js\";\nimport { OverlayRenderTargets as D } from \"./OverlayRenderTargets.js\";\nimport S from \"../webgl/RenderCamera.js\";\nimport { ShaderOutput as C } from \"../webgl-engine/core/shaderLibrary/ShaderOutput.js\";\nimport { OverlayMode as P } from \"../webgl-engine/core/shaderLibrary/terrain/Overlay.glsl.js\";\nimport { T as O } from \"../../../chunks/TextureOnly.glsl.js\";\nimport { ShaderTechniqueRepository as E } from \"../webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js\";\nimport { SyncRenderPlugin as j } from \"../webgl-engine/effects/RenderPlugin.js\";\nimport { GLMaterialRepository as W } from \"../webgl-engine/lib/GLMaterialRepository.js\";\nimport { GridLocalOriginFactory as M } from \"../webgl-engine/lib/GridLocalOriginFactory.js\";\nimport { RenderOccludedFlag as A } from \"../webgl-engine/lib/Material.js\";\nimport { OverlayRenderContext as F, defaultRenderOccludedMask as L } from \"../webgl-engine/lib/RenderContext.js\";\nimport { RenderSlot as q } from \"../webgl-engine/lib/RenderSlot.js\";\nimport { ShadowMap as I } from \"../webgl-engine/lib/ShadowMap.js\";\nimport { SortedRenderGeometryRenderer as V } from \"../webgl-engine/lib/SortedRenderGeometryRenderer.js\";\nimport { TextureTechnique as N } from \"../webgl-engine/lib/TextureTechnique.js\";\nimport { TextureTechniqueConfiguration as k } from \"../webgl-engine/lib/TextureTechniqueConfiguration.js\";\nimport { TransparencyPassType as U } from \"../webgl-engine/lib/TransparencyPassType.js\";\nimport { UpdatePolicy as H } from \"../webgl-engine/lib/UpdatePolicy.js\";\nimport { AmbientLight as G } from \"../webgl-engine/lighting/Lightsources.js\";\nimport { O as B } from \"../../../chunks/OverlayCompositing.glsl.js\";\nimport { OverlayCompositingTechnique as z } from \"../webgl-engine/shaders/OverlayCompositingTechnique.js\";\nimport { TaskPriority as Y, noBudget as X } from \"../../support/Scheduler.js\";\nimport { ClearBufferBit as J, TextureSamplingMode as K } from \"../../webgl/enums.js\";\nimport { Texture as Q } from \"../../webgl/Texture.js\";\nimport { TextureDescriptor as Z } from \"../../webgl/TextureDescriptor.js\";\nlet $ = class extends j {\n  constructor(e) {\n    super(e), this._overlays = null, this._renderTargets = null, this._overlayParameters = new B(), this.hasHighlights = !1, this._hasWater = !1, this._renderers = new Map(), this._sortedDrapeSourceRenderersDirty = !1, this._sortedRenderers = new n(), this._passParameters = new O(), this._materials = null, this._screenToWorldRatio = 1, this._localOriginFactory = null, this.unloadedMemory = 0, this.ignoresMemoryFactor = !1, this._camera = new S(), this.worldToPCSRatio = 1, this.events = new r(), this.longitudeCyclical = null, this.produces = new Map([[q.DRAPED_MATERIAL, e => e !== C.Highlight || this.hasHighlights], [q.DRAPED_WATER, () => this._hasWater]]), this._hasTargetWithoutRasterImage = !1, this._hasDrapedFeatureSource = !1, this._hasDrapedRasterSource = !1;\n  }\n  initialize() {\n    const e = this.view._stage.renderer.fboCache,\n      r = this.view._stage.renderView,\n      {\n        waterTextures: t,\n        stippleTextures: s,\n        markerTextures: i\n      } = r;\n    this._techniques = new E({\n      rctx: this._rctx,\n      viewingMode: y.Local,\n      stippleTextures: s,\n      markerTextures: i,\n      waterTextures: t\n    }), this._renderContext = new F(this._rctx, new I(e, this.view.state.viewingMode), null), this.addHandles([o(() => t.updating, () => this.events.emit(\"content-changed\"), h), o(() => this.spatialReference, e => this._localOriginFactory = new M(e), h), d(() => this.view.allLayerViews, \"after-changes\", () => this._sortedDrapeSourceRenderersDirty = !0)]), this._materials = new W(r.textures, this._techniques, () => {\n      this.notifyChange(\"rendersOccludedDraped\"), this.events.emit(\"content-changed\"), this.notifyChange(\"updating\"), this.notifyChange(\"isEmpty\");\n    }, () => this.events.emit(\"content-changed\")), this._bindParameters.slot = q.DRAPED_MATERIAL, this._bindParameters.mainDepth = null, this._camera.near = 1, this._camera.far = 1e4, this._camera.relativeElevation = null, this._bindParameters.camera = this._camera, this._bindParameters.transparencyPassType = U.NONE, this._bindParameters.newLighting.noonFactor = 0, this._bindParameters.newLighting.globalFactor = 0, this._bindParameters.newLighting.set([new G(g(1, 1, 1))]), this.addHandles(this.view.resourceController.scheduler.registerTask(Y.STAGE, this));\n  }\n  destroy() {\n    this._renderers.forEach(e => e.destroy()), this._renderers.clear(), this._debugTextureTechnique = s(this._debugTextureTechnique), this._passParameters.texture = i(this._passParameters.texture), this._techniques = a(this._techniques), this.disposeOverlays();\n  }\n  get _bindParameters() {\n    return this._renderContext.bindParameters;\n  }\n  get _rctx() {\n    return this.view._stage.renderView.renderingContext;\n  }\n  get rctx() {\n    return this._rctx;\n  }\n  get materials() {\n    return this._materials;\n  }\n  get screenToWorldRatio() {\n    return this._screenToWorldRatio;\n  }\n  get localOriginFactory() {\n    return this._localOriginFactory;\n  }\n  initializeRenderContext(e) {\n    this.pluginContext = e;\n  }\n  uninitializeRenderContext() {}\n  renderNode() {}\n  get updating() {\n    return this._sortedDrapeSourceRenderersDirty || t(this._renderers, e => e.updating);\n  }\n  get hasOverlays() {\n    return null != this._overlays && null != this._renderTargets;\n  }\n  getMaterialRenderer(e) {\n    for (const r of this._renderers.values()) {\n      const t = r.getMaterialRenderer(e);\n      if (t) return t;\n    }\n    return null;\n  }\n  get layers() {\n    return this._sortedDrapeSourceRenderersDirty && this._updateSortedDrapeSourceRenderers(), this._sortedRenderers.map(e => e.drapeSource.layer).filter(e => !!e);\n  }\n  createGeometryDrapeSourceRenderer(e) {\n    return this.createDrapeSourceRenderer(e, V);\n  }\n  createDrapeSourceRenderer(e, r, t) {\n    const s = this._renderers.get(e);\n    null != s && s.destroy();\n    const i = new r({\n      ...t,\n      rendererContext: this,\n      drapeSource: e\n    });\n    return this._renderers.set(e, i), this._sortedDrapeSourceRenderersDirty = !0, \"fullOpacity\" in e && this.addHandles(o(() => e.fullOpacity, () => this.events.emit(\"content-changed\")), e), i;\n  }\n  removeDrapeSourceRenderer(e) {\n    if (null == e) return;\n    const r = this._renderers.get(e);\n    null != r && (this._sortedDrapeSourceRenderersDirty = !0, this._renderers.delete(e), this.removeHandles(e), r.destroy());\n  }\n  computeValidity() {\n    return this._renderTargets?.computeValidity() ?? 0;\n  }\n  releaseRenderTargets() {\n    this._renderTargets?.dispose();\n  }\n  get overlays() {\n    return this._overlays ?? [];\n  }\n  ensureDrapeTargets(e) {\n    this._hasTargetWithoutRasterImage = !!this._overlays && l(e, e => e.drapeTargetType === f.WithoutRasterImage);\n  }\n  ensureDrapeSources(e) {\n    this._overlays ? (this._hasDrapedFeatureSource = l(e, e => e.drapeSourceType === R.Features), this._hasDrapedRasterSource = l(e, e => e.drapeSourceType === R.RasterImage)) : this._hasDrapedFeatureSource = this._hasDrapedRasterSource = !1;\n  }\n  get _needsColorWithoutRasterImage() {\n    return this._hasDrapedRasterSource && this._hasDrapedFeatureSource && this._hasTargetWithoutRasterImage;\n  }\n  ensureOverlays(e, r, t = this._bindParameters.overlayStretch) {\n    null == this._overlays && (this._renderTargets = new D(this.view._stage.renderer.fboCache), this._overlays = [new x(), new x()]), this.ensureDrapeTargets(e), this.ensureDrapeSources(r), this._bindParameters.overlayStretch = t;\n  }\n  disposeOverlays() {\n    this._overlays = null, this._renderTargets = i(this._renderTargets), this.events.emit(\"textures-disposed\");\n  }\n  getTexture(e) {\n    if (null != e) return e === v.ColorNoRasterImage && !this._needsColorWithoutRasterImage && this._hasDrapedFeatureSource ? this._renderTargets?.getTexture(v.Color) : this._renderTargets?.getTexture(e);\n  }\n  get running() {\n    return this.updating;\n  }\n  runTask(e) {\n    this._processDrapeSources(e, () => !0);\n  }\n  _processDrapeSources(e, r) {\n    let s = !1;\n    for (const [t, i] of this._renderers) {\n      if (e.done) break;\n      (t.destroyed || r(t)) && i.commitChanges() && (s = !0, e.madeProgress());\n    }\n    this._sortedDrapeSourceRenderersDirty && (this._sortedDrapeSourceRenderersDirty = !1, s = !0, this._updateSortedDrapeSourceRenderers()), s && (null != this._overlays && 0 === this._renderers.size && this.disposeOverlays(), this.notifyChange(\"updating\"), this.notifyChange(\"isEmpty\"), this.events.emit(\"content-changed\"), this.hasHighlights = t(this._renderers, e => e.hasHighlights), this.notifyChange(\"rendersOccludedDraped\"), this._updateHasWater());\n  }\n  processSyncDrapeSources() {\n    this._processDrapeSources(X, e => e.updatePolicy === H.SYNC);\n  }\n  get isEmpty() {\n    return !b.OVERLAY_DRAW_DEBUG_TEXTURE && !t(this._renderers, e => !e.isEmpty);\n  }\n  get hasWater() {\n    return this._hasWater;\n  }\n  get rendersOccludedDraped() {\n    const e = this._renderContext.renderOccludedMask;\n    this._renderContext.renderOccludedMask = se;\n    const r = this._sortedRenderers.some(({\n      renderer: e\n    }) => e.shouldRender(this._renderContext));\n    return this._renderContext.renderOccludedMask = e, r;\n  }\n  renders(e) {\n    return b.OVERLAY_DRAW_DEBUG_TEXTURE && e !== v.Occluded || this._sortedRenderers.some(({\n      renderer: e\n    }) => e.shouldRender(this._renderContext));\n  }\n  get mode() {\n    return this.isEmpty ? P.Disabled : this._renderTargets?.getTexture(v.WaterNormal) ? P.EnabledWithWater : this._renderTargets?.getTexture(v.Color) ? P.Enabled : P.Disabled;\n  }\n  updateAnimation(e) {\n    let r = !1;\n    return this._renderers.forEach(t => r = t.updateAnimation(e) || r), r;\n  }\n  updateDrapeSourceOrder() {\n    this._sortedDrapeSourceRenderersDirty = !0;\n  }\n  drawOverlays(e) {\n    if (this._overlays && this._renderTargets) {\n      for (const e of this._overlays) this.longitudeCyclical ? e.setupGeometryViewsCyclical(this.longitudeCyclical) : e.setupGeometryViewsDirect();\n      for (const r of this._renderTargets.targets) {\n        if (r.content === v.ColorNoRasterImage && !this._needsColorWithoutRasterImage) continue;\n        const t = this._drawTarget(w.INNER, r, e),\n          s = this._drawTarget(w.OUTER, r, e);\n        (t || s) && r.fbo.generateMipMap();\n      }\n    }\n  }\n  _drawTarget(e, r, t) {\n    const s = this._overlays[e],\n      i = s.canvasGeometries;\n    if (0 === i.numViews) return !1;\n    const {\n      alignPixelEnabled: a,\n      contentPixelRatio: n\n    } = t;\n    this._screenToWorldRatio = n * s.mapUnitsPerPixel / this._bindParameters.overlayStretch;\n    const o = r.output;\n    if (this.isEmpty || o === C.Highlight && !this.hasHighlights || o === C.Normal && !this.hasWater || !s.hasSomeSizedView()) return !1;\n    const h = this._rctx;\n    if (this._camera.pixelRatio = s.pixelRatio * n, this._renderContext.output = o, this._bindParameters.alignPixelEnabled = a, this._bindParameters.screenToWorldRatio = this._screenToWorldRatio, this._bindParameters.screenToPCSRatio = this._screenToWorldRatio * this.worldToPCSRatio, this._bindParameters.slot = o === C.Normal ? q.DRAPED_WATER : q.DRAPED_MATERIAL, r.content === v.Occluded && (this._renderContext.renderOccludedMask = se), !this.renders(r.content)) return this._renderContext.renderOccludedMask = L, !1;\n    const d = s.resolution;\n    this._rctx.setViewport(e === w.INNER ? 0 : d, 0, d, d);\n    const l = 2 * s.resolution,\n      c = s.resolution,\n      u = r.fbo;\n    u.bind(h, l, c), e === w.INNER && (h.setClearColor(0, 0, 0, 0), h.clear(J.COLOR_BUFFER_BIT));\n    if (b.OVERLAY_DRAW_DEBUG_TEXTURE && r.content !== v.Occluded) for (let p = 0; p < i.numViews; p++) this._setViewParameters(i.extents[p], s), this._ensureDebugPatternResources(s.resolution, re[e]), this._rctx.bindTechnique(this._debugTextureTechnique, this._renderContext.bindParameters, this._passParameters), this._rctx.screen.draw();\n    return this._sortedRenderers.forAll(({\n      drapeSource: t,\n      renderer: a\n    }) => {\n      if (r.content === v.ColorNoRasterImage && t.drapeSourceType === R.RasterImage) return;\n      const {\n          fullOpacity: n\n        } = t,\n        d = null != n && n < 1 && o === C.Color ? this.bindTemporaryFramebuffer(l, c) : null;\n      for (let e = 0; e < i.numViews; e++) this._setViewParameters(i.extents[e], s), a.render(this._renderContext);\n      if (d) {\n        u.bind(h, l, c), this._overlayParameters.texture = d.getTexture(), this._overlayParameters.opacity = n, this._overlayParameters.overlayIndex = e;\n        const r = this.pluginContext.techniques.acquire(z);\n        this._rctx.bindTechnique(r, this._renderContext.bindParameters, this._overlayParameters), this._rctx.screen.draw(), r.release(), d.release();\n      }\n    }), h.bindFramebuffer(null), this._renderContext.renderOccludedMask = L, !0;\n  }\n  bindTemporaryFramebuffer(e, r) {\n    const t = this.view._stage.renderer.fboCache,\n      s = t.acquire(e, r, \"overlay tmp\");\n    return t.rctx.unbindTexture(s.fbo?.colorTexture), t.rctx.bindFramebuffer(s.fbo), t.rctx.clear(J.COLOR_BUFFER_BIT), s;\n  }\n  async reloadShaders() {\n    await this._techniques.reloadAll();\n  }\n  notifyContentChanged() {\n    this.events.emit(\"content-changed\");\n  }\n  intersect(e, r, t, s) {\n    this._sortedDrapeSourceRenderersDirty && this._updateSortedDrapeSourceRenderers();\n    let i = 0;\n    for (const {\n      renderer: a\n    } of this._sortedRenderers) i = a.intersect?.(e, r, t, s, i) ?? i;\n  }\n  _updateSortedDrapeSourceRenderers() {\n    if (this._sortedRenderers.clear(), 0 === this._renderers.size) return;\n    const e = this.view.map.allLayers,\n      r = e.length;\n    this._renderers.forEach((t, s) => {\n      const i = e.indexOf(s.layer),\n        a = i >= 0,\n        n = s.renderGroup ?? (a ? T.MapLayer : T.ViewLayer),\n        o = r * n + (a ? i : 0);\n      this._sortedRenderers.push(new ee(s, t, o));\n    }), this._sortedRenderers.sort((e, r) => e.index - r.index);\n  }\n  _setViewParameters(e, r) {\n    const t = this._camera;\n    t.viewport = [0, 0, r.resolution, r.resolution], p(t.projectionMatrix, 0, e[2] - e[0], 0, e[3] - e[1], t.near, t.far), m(t.viewMatrix, [-e[0], -e[1], 0]);\n  }\n  _updateHasWater() {\n    const e = t(this._renderers, e => e.hasWater);\n    e !== this._hasWater && (this._hasWater = e, this.events.emit(\"has-water\", e));\n  }\n  _ensureDebugPatternResources(e, r) {\n    if (_(this._passParameters.color, r[0], r[1], r[2]), this._passParameters.texture) return;\n    const t = new Uint8Array(e * e * 4);\n    let s = 0;\n    for (let n = 0; n < e; n++) for (let r = 0; r < e; r++) {\n      const i = Math.floor(r / 10),\n        a = Math.floor(n / 10);\n      i < 2 || a < 2 || 10 * i > e - 20 || 10 * a > e - 20 ? (t[s++] = 255, t[s++] = 255, t[s++] = 255, t[s++] = 255) : (t[s++] = 255, t[s++] = 255, t[s++] = 255, t[s++] = 1 & i && 1 & a ? 1 & r ^ 1 & n ? 0 : 255 : 1 & i ^ 1 & a ? 0 : 128);\n    }\n    const i = new Z(e);\n    i.samplingMode = K.NEAREST, this._passParameters.texture = new Q(this._rctx, i, t);\n    const a = new k();\n    a.hasAlpha = !0, this._debugTextureTechnique = this._techniques.acquire(N, a);\n  }\n  get test() {}\n};\ne([c()], $.prototype, \"hasHighlights\", void 0), e([c()], $.prototype, \"_sortedDrapeSourceRenderersDirty\", void 0), e([c()], $.prototype, \"_techniques\", void 0), e([c({\n  constructOnly: !0\n})], $.prototype, \"view\", void 0), e([c()], $.prototype, \"worldToPCSRatio\", void 0), e([c()], $.prototype, \"spatialReference\", void 0), e([c({\n  type: Boolean,\n  readOnly: !0\n})], $.prototype, \"updating\", null), e([c()], $.prototype, \"isEmpty\", null), e([c({\n  readOnly: !0\n})], $.prototype, \"rendersOccludedDraped\", null), $ = e([u(\"esri.views.3d.terrain.OverlayRenderer\")], $);\nclass ee {\n  constructor(e, r, t) {\n    this.drapeSource = e, this.renderer = r, this.index = t;\n  }\n}\nconst re = [[1, .5, .5], [.5, .5, 1]],\n  te = -2,\n  se = A.OccludeAndTransparent;\nexport { $ as OverlayRenderer, te as drapedZ, se as overlayRenderOccludedFlag };"],
  "mappings": "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",
  "names": ["n", "u", "t", "r", "e", "s", "t", "e", "h", "a", "r", "t", "s", "l", "R", "e", "o", "r", "t", "n", "e", "o", "s", "s", "e", "t", "i", "r", "a", "m", "i", "o", "n", "_", "d", "c", "A", "t", "e", "a", "e", "i", "o", "l", "m", "n", "r", "t", "s", "h", "t", "s", "e", "r", "i", "a", "s", "v", "i", "n", "t", "o", "e", "r", "n", "s", "s", "t", "e", "t", "n", "s", "t", "o", "e", "h", "a", "s", "o", "t", "h", "e", "r", "s", "r", "c", "t", "s", "e", "h", "r", "s", "e", "r", "o", "c", "t", "S", "c", "e", "t", "o", "r", "s", "i", "a", "I", "n", "l", "u", "h", "f", "d", "m", "z", "G", "q", "L", "V", "G", "S", "e", "v", "s", "n", "h", "r", "t", "o", "i", "E", "I", "A", "C", "a", "m", "r", "e", "S", "l", "_", "t", "d", "r", "t", "n", "r", "e", "S", "s", "_", "t", "m", "u", "e", "d", "a", "o", "r", "t", "s", "i", "l", "G", "_", "I", "n", "C", "E", "h", "c", "m"]
}
