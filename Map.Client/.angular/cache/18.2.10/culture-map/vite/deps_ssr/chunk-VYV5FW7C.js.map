{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/geometry/support/coordinateSystem.js", "../../../../../../node_modules/@arcgis/core/views/3d/support/RenderCoordsHelper.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { copy as t } from \"../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { s as e, m as n, c as o, n as r, b as i } from \"../../chunks/vec32.js\";\nimport { create as s } from \"../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { getReferenceEllipsoid as a } from \"../ellipsoidUtils.js\";\nimport u from \"../SpatialReference.js\";\nimport { getSphericalPCPF as c } from \"../spatialReferenceEllipsoidUtils.js\";\nimport { Axis as l } from \"./Axis.js\";\nimport { f, b as p } from \"../../chunks/boundedPlane.js\";\nimport { f as m, s as v } from \"../../chunks/sphere.js\";\nfunction h(t) {\n  const {\n    value: e,\n    operations: n\n  } = t;\n  return {\n    operations: n,\n    value: n.create(e)\n  };\n}\nfunction j(t, e, n) {\n  return t.operations.setExtent(t.value, e, n.value), n;\n}\nfunction d(t) {\n  return {\n    operations: t,\n    value: t.create()\n  };\n}\nfunction x(t, e, n = d(t)) {\n  return n.operations = t, t.copy(e, n.value), n;\n}\nfunction A(t) {\n  return x(v, m(0, 0, 0, a(t).radius));\n}\nconst b = 2 ** 50;\nfunction P() {\n  return x(p, f([0, 0, 0], [b, 0, 0], [0, b, 0]));\n}\nfunction R(t, e, n) {\n  return t.operations.axisAt(t.value, e, l.Z, n);\n}\nfunction S(t, e, n, o) {\n  return t.operations.axisAt(t.value, e, n, o);\n}\nfunction g(t, e, n) {\n  return t.operations.intersectRay(t.value, e, n);\n}\nfunction k(t, e, n) {\n  return t.operations.closestPoint(t.value, e, n);\n}\nfunction y(t, e, n) {\n  return t.operations.intersectRayClosestSilhouette(t.value, e, n);\n}\nfunction C(t, e, n) {\n  return t.operations.closestPointOnSilhouette(t.value, e, n);\n}\nfunction E(t, e) {\n  return t.operations.distanceToSilhouette(t.value, e);\n}\nfunction U(t, e) {\n  return t.operations.altitudeAt(t.value, e);\n}\nfunction G(t, e, n, o) {\n  return t.operations.setAltitudeAt(t.value, e, n, o);\n}\nfunction O(n, o, r, i) {\n  return o !== i && t(i, o), e(Z, i[12], i[13], i[14]), G(n, Z, r, Z), i[12] = Z[0], i[13] = Z[1], i[14] = Z[2], i;\n}\nfunction T(t, e, n) {\n  return t.operations.elevate(t.value, e, n.value);\n}\nconst Z = s();\nfunction q(t, e, o, r, i) {\n  return i[0] = n(t, e), i[1] = n(t, o), i[2] = n(t, r), i;\n}\nfunction w(t, e, n, s, a) {\n  o(n, t), o(B, e), r(B, B), i(s, B, n), i(a, s, n);\n}\nfunction z(t, e) {\n  return t ? c(e) : e.isGeographic ? u.PlateCarree : e;\n}\nconst B = s();\nexport { U as altitudeAt, S as axisAt, k as closestPoint, C as closestPointOnSilhouette, w as coordinateSystemFromOneAxisAndNormalVector, h as create, d as createFromOperations, A as createGlobal, P as createLocal, E as distanceToSilhouette, T as elevate, x as fromValues, g as intersectRay, y as intersectRayClosestSilhouette, R as normalAt, z as renderSRFromViewSR, G as setAltitudeAt, O as setAltitudeOfTransformation, j as setExtent, q as vectorCoordinates };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { rad2deg as t } from \"../../../core/mathUtils.js\";\nimport { getMetersPerUnitForSR as e, getMetersPerCartesianUnitForSR as o } from \"../../../core/unitUtils.js\";\nimport { set as r } from \"../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { c as i } from \"../../../chunks/vec32.js\";\nimport { getReferenceEllipsoid as s } from \"../../../geometry/ellipsoidUtils.js\";\nimport { getSphericalPCPF as n } from \"../../../geometry/spatialReferenceEllipsoidUtils.js\";\nimport { projectPointToVector as a } from \"../../../geometry/projection/projectPointToVector.js\";\nimport { projectVectorToPoint as m } from \"../../../geometry/projection/projectVectorToPoint.js\";\nimport { projectVectorToVector as c } from \"../../../geometry/projection/projectVectorToVector.js\";\nimport { Axis as l } from \"../../../geometry/support/Axis.js\";\nimport { create as p, setExtent as d, altitudeAt as h, setAltitudeAt as u, setAltitudeOfTransformation as f, normalAt as y, axisAt as g, elevate as j, intersectRayClosestSilhouette as S, intersectRay as _, createGlobal as w, createLocal as A } from \"../../../geometry/support/coordinateSystem.js\";\nimport { intersectRay as P } from \"../../../geometry/support/plane.js\";\nimport { angleAroundAxis as C } from \"../../../geometry/support/vector.js\";\nimport { sv3d as R } from \"../../../geometry/support/vectorStacks.js\";\nimport { isDehydratedPoint as M } from \"../../../layers/graphics/dehydratedFeatureUtils.js\";\nimport { ViewingMode as U } from \"../../ViewingMode.js\";\nclass v {\n  constructor(t, e, o, r) {\n    this.viewingMode = t, this.spatialReference = e, this.unitInMeters = o, this._coordinateSystem = r, this._tmpCoordinateSystem = p(r), this.referenceEllipsoid = s(e), this.sphericalPCPF = n(e);\n  }\n  set extent(t) {\n    t && d(this._coordinateSystem, t, this._coordinateSystem);\n  }\n  getAltitude(t) {\n    return h(this._coordinateSystem, t);\n  }\n  setAltitude(t, e, o = t) {\n    return u(this._coordinateSystem, o, e, t);\n  }\n  setAltitudeOfTransformation(t, e) {\n    f(this._coordinateSystem, e, t, e);\n  }\n  worldUpAtPosition(t, e) {\n    return y(this._coordinateSystem, t, e);\n  }\n  worldBasisAtPosition(t, e, o) {\n    return g(this._coordinateSystem, t, e, o);\n  }\n  basisMatrixAtPosition(t, e) {\n    const o = this.worldBasisAtPosition(t, l.X, R.get()),\n      i = this.worldBasisAtPosition(t, l.Y, R.get()),\n      s = this.worldBasisAtPosition(t, l.Z, R.get());\n    return r(e, o[0], o[1], o[2], 0, i[0], i[1], i[2], 0, s[0], s[1], s[2], 0, 0, 0, 0, 1), e;\n  }\n  headingAtPosition(e, o) {\n    const r = this.worldUpAtPosition(e, R.get()),\n      i = this.worldBasisAtPosition(e, l.Y, R.get()),\n      s = C(o, i, r);\n    return t(s);\n  }\n  intersectManifoldClosestSilhouette(t, e, o) {\n    return j(this._coordinateSystem, e, this._tmpCoordinateSystem), S(this._tmpCoordinateSystem, t, o), o;\n  }\n  intersectManifold(t, e, o) {\n    j(this._coordinateSystem, e, this._tmpCoordinateSystem);\n    const r = R.get();\n    return _(this._tmpCoordinateSystem, t, r) ? i(o, r) : null;\n  }\n  intersectInfiniteManifold(t, e, o) {\n    if (this.viewingMode === U.Global) return this.intersectManifold(t, e, o);\n    j(this._coordinateSystem, e, this._tmpCoordinateSystem);\n    const r = this._tmpCoordinateSystem.value,\n      s = R.get();\n    return P(r.plane, t, s) ? i(o, s) : null;\n  }\n  toRenderCoords(t, e, o) {\n    return M(t) ? a(t, e, this.spatialReference) : c(t, e, o, this.spatialReference);\n  }\n  fromRenderCoords(t, e, o = null) {\n    return M(e) ? (null != o && (e.spatialReference = o), m(t, this.spatialReference, e) ? e : null) : c(t, this.spatialReference, e, o) ? e : null;\n  }\n  static create(t, o) {\n    switch (t) {\n      case U.Local:\n        return new v(U.Local, o, e(o), A());\n      case U.Global:\n        return new v(U.Global, o, 1, w(o));\n    }\n  }\n  static renderUnitScaleFactor(t, e) {\n    return o(t) / o(e);\n  }\n}\nexport { v as RenderCoordsHelper };"],
  "mappings": "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",
  "names": ["t", "n", "P", "S", "o", "t", "n", "t", "n", "o", "r", "Z", "s", "a", "z", "t", "o", "r", "S", "n", "c", "s", "P"]
}
