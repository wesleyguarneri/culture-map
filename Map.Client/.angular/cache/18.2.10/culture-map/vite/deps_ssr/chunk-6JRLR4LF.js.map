{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/layers/effects/EffectView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../core/Accessor.js\";\nimport has from \"../../core/has.js\";\nimport { clone as s } from \"../../core/lang.js\";\nimport r from \"../../core/Logger.js\";\nimport { property as i } from \"../../core/accessorSupport/decorators/property.js\";\nimport { subclass as n } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { parse as c } from \"./parser.js\";\nimport { canInterpolateEffects as o, normalizeEffects as f } from \"./utils.js\";\nconst l = -1;\nlet h = class extends e {\n  constructor(t) {\n    super(t), this._from = null, this._to = null, this._final = null, this._current = [], this._time = 0, this.duration = has(\"mapview-transitions-duration\"), this.effects = [];\n  }\n  set effect(t) {\n    if (this._get(\"effect\") !== (t = t || \"\")) {\n      this._set(\"effect\", t);\n      try {\n        this._transitionTo(a(t));\n      } catch (e) {\n        this._transitionTo([]), r.getLogger(this).warn(\"Invalid Effect\", {\n          effect: t,\n          error: e\n        });\n      }\n    }\n  }\n  get hasEffects() {\n    return this.transitioning || !!this.effects.length;\n  }\n  set scale(t) {\n    this._updateForScale(t);\n  }\n  get transitioning() {\n    return null !== this._to;\n  }\n  canTransitionTo(t) {\n    try {\n      return this.scale > 0 && u(this._current, a(t), this.scale);\n    } catch {\n      return !1;\n    }\n  }\n  transitionStep(t, e) {\n    this._applyTimeTransition(t), this._updateForScale(e);\n  }\n  endTransitions() {\n    this._applyTimeTransition(this.duration);\n  }\n  _transitionTo(t) {\n    this.scale > 0 && u(this._current, t, this.scale) ? (this._final = t, this._to = s(t), _(this._current, this._to, this.scale), this._from = s(this._current), this._time = 0) : (this._from = this._to = this._final = null, this._current = t), this._set(\"effects\", this._current[0] ? s(this._current[0].effects) : []);\n  }\n  _applyTimeTransition(t) {\n    if (!(this._to && this._from && this._current && this._final)) return;\n    this._time += t;\n    const e = Math.min(1, this._time / this.duration);\n    for (let s = 0; s < this._current.length; s++) {\n      const t = this._current[s],\n        r = this._from[s],\n        i = this._to[s];\n      t.scale = p(r.scale, i.scale, e);\n      for (let s = 0; s < t.effects.length; s++) {\n        const n = t.effects[s],\n          c = r.effects[s],\n          o = i.effects[s];\n        n.interpolate(c, o, e);\n      }\n    }\n    1 === e && (this._current = this._final, this._set(\"effects\", this._current[0] ? s(this._current[0].effects) : []), this._from = this._to = this._final = null);\n  }\n  _updateForScale(t) {\n    if (this._set(\"scale\", t), 0 === this._current.length) return;\n    const e = this._current,\n      s = this._current.length - 1;\n    let r,\n      i,\n      n = 1;\n    if (1 === e.length || t >= e[0].scale) i = r = e[0].effects;else if (t <= e[s].scale) i = r = e[s].effects;else for (let c = 0; c < s; c++) {\n      const s = e[c],\n        o = e[c + 1];\n      if (s.scale >= t && o.scale <= t) {\n        n = (t - s.scale) / (o.scale - s.scale), r = s.effects, i = o.effects;\n        break;\n      }\n    }\n    for (let c = 0; c < this.effects.length; c++) {\n      this.effects[c].interpolate(r[c], i[c], n);\n    }\n  }\n};\nfunction a(t) {\n  const e = c(t) || [];\n  return m(e) ? [{\n    scale: l,\n    effects: e\n  }] : e;\n}\nfunction u(t, e, s) {\n  if (!t[0]?.effects || !e[0]?.effects) return !0;\n  return !((t[0]?.scale === l || e[0]?.scale === l) && (t.length > 1 || e.length > 1) && s <= 0) && o(t[0].effects, e[0].effects);\n}\nfunction _(t, e, s) {\n  const r = t.length > e.length ? t : e,\n    i = t.length > e.length ? e : t,\n    n = i[i.length - 1],\n    c = n?.scale ?? s,\n    o = n?.effects ?? [];\n  for (let f = i.length; f < r.length; f++) i.push({\n    scale: c,\n    effects: [...o]\n  });\n  for (let h = 0; h < r.length; h++) i[h].scale = i[h].scale === l ? s : i[h].scale, r[h].scale = r[h].scale === l ? s : r[h].scale, f(i[h].effects, r[h].effects);\n}\nfunction p(t, e, s) {\n  return t + (e - t) * s;\n}\nfunction m(t) {\n  const e = t[0];\n  return !!e && \"type\" in e;\n}\nt([i()], h.prototype, \"_to\", void 0), t([i()], h.prototype, \"duration\", void 0), t([i({\n  value: \"\"\n})], h.prototype, \"effect\", null), t([i({\n  readOnly: !0\n})], h.prototype, \"effects\", void 0), t([i({\n  readOnly: !0\n})], h.prototype, \"hasEffects\", null), t([i({\n  value: 0\n})], h.prototype, \"scale\", null), t([i({\n  readOnly: !0\n})], h.prototype, \"transitioning\", null), h = t([n(\"esri.layers.effects.EffectView\")], h);\nexport { h as EffectView, u as canInterpolateEffectStops, a as convertEffectToStops, _ as normalizeEffectStops };"],
  "mappings": "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",
  "names": ["t", "a", "e", "s", "n", "y", "h"]
}
