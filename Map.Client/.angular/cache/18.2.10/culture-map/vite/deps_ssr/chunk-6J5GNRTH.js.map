{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/chunks/ShadowCastVisualize.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { clone as e, fromValues as s } from \"../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { ScreenSpacePass as a } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";\nimport { ReadLinearDepth as o } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";\nimport { CameraSpace as r } from \"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";\nimport { RgbaFloatEncoding as i } from \"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";\nimport { Float4PassUniform as t } from \"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";\nimport { FloatPassUniform as l } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { NoParameters as n, glsl as d } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as c } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as m } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nimport { S as h } from \"./ShadowCastAccumulate.glsl.js\";\nimport { ShadowCastVisualization as u } from \"../views/3d/webgl-engine/shaders/ShadowCastVisualizeTechniqueConfiguration.js\";\nclass p extends n {\n  constructor(s) {\n    super(), this._data = s, this.sampleScale = 0, this.opacityFromElevation = 1, this.color = e(g), this.bandSize = .1, this.threshold = .5;\n  }\n  get shadowCastMap() {\n    return this._data.shadowCastTexture;\n  }\n}\nconst g = s(.01, 0, .25, 1);\nfunction w(e) {\n  const s = new c(),\n    n = s.fragment;\n  n.include(i), n.include(o), s.include(r), s.include(a);\n  const {\n    visualization: p,\n    bandsEnabled: g\n  } = e;\n  n.constants.add(\"inverseSampleValue\", \"float\", h), n.uniforms.add(new m(\"shadowCastMap\", e => e.shadowCastMap), new l(\"sampleScale\", e => e.sampleScale), new l(\"opacityFromElevation\", e => e.opacityFromElevation), new t(\"uColor\", e => e.color));\n  const w = p === u.Gradient,\n    f = p === u.Threshold;\n  return w && g ? n.uniforms.add(new l(\"bandSize\", e => e.bandSize)) : f && n.uniforms.add(new l(\"threshold\", e => e.threshold)), n.code.add(d`\n    void main(void) {\n      float record = texture(shadowCastMap, uv).r;\n      float pixelSamples = record * inverseSampleValue;\n      if (pixelSamples < 1.0) {\n        discard;\n      }\n\n      float strength = pixelSamples * sampleScale;\n\n      ${f ? d`\n          if (strength <= threshold) {\n            discard;\n          }` : \"\"}\n\n      ${w && g ? d`strength = ceil(strength / bandSize) * bandSize;` : \"\"}\n\n      fragColor = vec4(uColor.xyz, uColor.a * opacityFromElevation ${w ? d`* strength` : \"\"});\n    }\n  `), s;\n}\nconst f = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  ShadowCastVisualizePassParameters: p,\n  build: w\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { p as S, f as a, w as b };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,IAAM,IAAN,cAAgB,EAAE;AAAA,EAChB,YAAYA,IAAG;AACb,UAAM,GAAG,KAAK,QAAQA,IAAG,KAAK,cAAc,GAAG,KAAK,uBAAuB,GAAG,KAAK,QAAQ,EAAE,CAAC,GAAG,KAAK,WAAW,KAAI,KAAK,YAAY;AAAA,EACxI;AAAA,EACA,IAAI,gBAAgB;AAClB,WAAO,KAAK,MAAM;AAAA,EACpB;AACF;AACA,IAAM,IAAI,EAAE,MAAK,GAAG,MAAK,CAAC;AAC1B,SAAS,EAAEC,IAAG;AACZ,QAAMD,KAAI,IAAIE,GAAE,GACdC,KAAIH,GAAE;AACR,EAAAG,GAAE,QAAQ,CAAC,GAAGA,GAAE,QAAQ,CAAC,GAAGH,GAAE,QAAQ,CAAC,GAAGA,GAAE,QAAQE,EAAC;AACrD,QAAM;AAAA,IACJ,eAAeE;AAAA,IACf,cAAcC;AAAA,EAChB,IAAIJ;AACJ,EAAAE,GAAE,UAAU,IAAI,sBAAsB,SAAS,CAAC,GAAGA,GAAE,SAAS,IAAI,IAAI,EAAE,iBAAiB,CAAAF,OAAKA,GAAE,aAAa,GAAG,IAAIC,GAAE,eAAe,CAAAD,OAAKA,GAAE,WAAW,GAAG,IAAIC,GAAE,wBAAwB,CAAAD,OAAKA,GAAE,oBAAoB,GAAG,IAAI,EAAE,UAAU,CAAAA,OAAKA,GAAE,KAAK,CAAC;AACnP,QAAMK,KAAIF,OAAMG,GAAE,UAChBC,KAAIJ,OAAMG,GAAE;AACd,SAAOD,MAAKD,KAAIF,GAAE,SAAS,IAAI,IAAID,GAAE,YAAY,CAAAD,OAAKA,GAAE,QAAQ,CAAC,IAAIO,MAAKL,GAAE,SAAS,IAAI,IAAID,GAAE,aAAa,CAAAD,OAAKA,GAAE,SAAS,CAAC,GAAGE,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAUrIK,KAAI;AAAA;AAAA;AAAA,eAGG,EAAE;AAAA;AAAA,QAETF,MAAKD,KAAI,sDAAsD,EAAE;AAAA;AAAA,qEAEJC,KAAI,gBAAgB,EAAE;AAAA;AAAA,GAExF,GAAGN;AACN;AACA,IAAMQ,KAAI,OAAO,OAAO,OAAO,eAAe;AAAA,EAC5C,WAAW;AAAA,EACX,mCAAmC;AAAA,EACnC,OAAO;AACT,GAAG,OAAO,aAAa;AAAA,EACrB,OAAO;AACT,CAAC,CAAC;",
  "names": ["s", "e", "o", "n", "p", "g", "w", "t", "f"]
}
