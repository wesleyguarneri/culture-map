{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/layers/support/overlayImageUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/DynamicLayerView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { width as t, height as e, intersects as r } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { newDoubleArray as o } from \"../../../../geometry/support/DoubleArray.js\";\nimport { newFloatArray as n } from \"../../../../geometry/support/FloatArray.js\";\nimport { Attribute as i } from \"../../webgl-engine/lib/Attribute.js\";\nimport { Geometry as m } from \"../../webgl-engine/lib/Geometry.js\";\nimport { createSquareGeometry as h } from \"../../webgl-engine/lib/GeometryUtil.js\";\nimport { VertexAttribute as g } from \"../../webgl-engine/lib/VertexAttribute.js\";\nfunction u(r, o, n) {\n  const i = t(r) / e(r),\n    m = {\n      width: n,\n      height: n\n    };\n  return i > 1.0001 ? m.height = n / i : i < .9999 && (m.width = n * i), m.width = Math.round(m.width / (t(r) / t(o))), m.height = Math.round(m.height / (e(r) / e(o))), m;\n}\nfunction l(t, e) {\n  return h(t, [[e[0], e[1], -1], [e[2], e[1], -1], [e[2], e[3], -1], [e[0], e[3], -1]]);\n}\nfunction s(t, e, h) {\n  if (!r(e, h)) return l(t, h);\n  const u = [e[1] - h[1], Math.min(e[3], h[3]) - Math.max(e[1], h[1]), h[3] - e[3], 123456],\n    s = [e[0] - h[0], Math.min(e[2], h[2]) - Math.max(e[0], h[0]), h[2] - e[2], 123456],\n    f = h[2] - h[0],\n    p = h[3] - h[1],\n    w = s[0] > 0 && s[2] > 0 ? 3 : 2,\n    b = u[0] > 0 && u[2] > 0 ? 3 : 2,\n    c = (b + 1) * (w + 1),\n    y = o(3 * c),\n    d = n(2 * c),\n    j = new Array(6 * (b * w - 1));\n  let A = 0,\n    M = 0,\n    x = 0,\n    O = 0,\n    G = 0;\n  for (let r = 0; r < 4; r++) {\n    const t = u[r];\n    if (t <= 0) continue;\n    let e = 0;\n    for (let o = 0; o < 4; o++) {\n      const t = s[o];\n      t <= 0 || (y[M++] = h[0] + e, y[M++] = h[1] + A, y[M++] = -1, d[x++] = e / f, d[x++] = A / p, o < 3 && r < 3 && (1 !== o || 1 !== r) && (j[G++] = O, j[G++] = O + 1, j[G++] = O + w + 1, j[G++] = O + 1, j[G++] = O + w + 2, j[G++] = O + w + 1), O++, e += t);\n    }\n    A += t;\n  }\n  const I = new Array(j.length);\n  return new m(t, [[g.POSITION, new i(y, j, 3, !0)], [g.NORMAL, new i(a, I, 3, !0)], [g.UV0, new i(d, j, 2, !0)]]);\n}\nconst a = [0, 0, 1];\nexport { u as computeImageExportSize, l as createGeometryForExtent, s as createOuterImageGeometry };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport { forEach as t, result as r } from \"../../../core/asyncUtils.js\";\nimport { makeHandle as i } from \"../../../core/handleUtils.js\";\nimport s from \"../../../core/Logger.js\";\nimport { abortMaybe as a } from \"../../../core/maybe.js\";\nimport { debounce as o, isAbortError as n, onAbort as l, isAborted as h, createAbortError as m, throwIfAborted as d } from \"../../../core/promiseUtils.js\";\nimport { whenOnce as c } from \"../../../core/reactiveUtils.js\";\nimport { property as g } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as u } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport p from \"../../../geometry/Extent.js\";\nimport { equals as f, create as y, width as w, height as _, copy as x, intersection as v } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { DrapeSourceType as R } from \"./interfaces.js\";\nimport { LayerView3D as b } from \"./LayerView3D.js\";\nimport { computeImageExportSize as E, createGeometryForExtent as S, createOuterImageGeometry as j } from \"./support/overlayImageUtils.js\";\nimport { toViewIfLocal as I } from \"./support/projectExtentUtils.js\";\nimport { debugFlags as A } from \"../support/debugFlags.js\";\nimport { OverlayIndex as D } from \"../terrain/interfaces.js\";\nimport { DirtyOperation as M } from \"../webgl-engine/lib/ModelDirtyTypes.js\";\nimport { RenderGeometry as L } from \"../webgl-engine/lib/RenderGeometry.js\";\nimport { Texture as C } from \"../webgl-engine/lib/Texture.js\";\nimport { UpdatePolicy as G } from \"../webgl-engine/lib/UpdatePolicy.js\";\nimport { ImageMaterial as P } from \"../webgl-engine/materials/ImageMaterial.js\";\nimport T from \"../../layers/LayerView.js\";\nimport O from \"../../layers/RefreshableLayerView.js\";\nimport { isInEffectiveScaleRange as U } from \"../../support/layerViewUtils.js\";\nimport { TextureWrapMode as H } from \"../../webgl/enums.js\";\nlet V = class extends O(b(T)) {\n  constructor() {\n    super(...arguments), this.drapeSourceType = R.RasterImage, this.updatePolicy = G.SYNC, this.fullExtentInLocalViewSpatialReference = null, this.maximumDataResolution = null, this._images = new Array(), this._extents = new Array(), this._overlays = new Array(), this.updateWhenStationary = !0, this._drapeSourceRenderer = null, this.refreshDebounced = o(async e => {\n      this.destroyed || (await this._doRefresh(e).catch(e => {\n        n(e) || s.getLogger(this).error(e);\n      }));\n    }, 2e3);\n  }\n  get visibleAtCurrentScale() {\n    const e = this.layer,\n      t = \"effectiveScaleRange\" in e ? e.effectiveScaleRange : null;\n    return U(t, this.view.terrainScale);\n  }\n  initialize() {\n    this._drapeSourceRenderer = this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this), this.addHandles(i(() => this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this))), this.addResolvingPromise(I(this).then(e => this._set(\"fullExtentInLocalViewSpatialReference\", e))), this._updatingHandles.add(() => this.suspended, () => this._suspendedChangeHandler());\n  }\n  destroy() {\n    this.clear();\n  }\n  setDrapingExtent(e, t) {\n    this._spatialReference = t, e.forEach((e, t) => {\n      this._overlays[t] = e, this._updateImageExtent(e, t);\n    });\n  }\n  _updateImageExtent(e, t) {\n    const r = this._clippedExtent(e.extent, z);\n    if (null == r) return;\n    const i = E(e.extent, r, e.resolution);\n    let a = e.pixelRatio * this.view.state.pixelRatio;\n    const {\n      layer: o\n    } = this;\n    if (\"imageMaxWidth\" in o && null != o.imageMaxWidth || \"imageMaxHeight\" in o && null != o.imageMaxHeight) {\n      const e = o.imageMaxWidth,\n        t = o.imageMaxHeight;\n      if (i.width > e) {\n        const t = e / i.width;\n        i.height = Math.floor(i.height * t), i.width = e, a *= t;\n      }\n      if (i.height > t) {\n        const e = t / i.height;\n        i.width = Math.floor(i.width * e), i.height = t, a *= e;\n      }\n    }\n    const l = this._extents[t];\n    l && f(l.extent, r) && this._imageSizeEquals(r, l.imageSize, i) || (this._extents[t] = {\n      extent: y(r),\n      imageSize: i,\n      pixelRatio: a\n    }, this.suspended || this._fetch(t).catch(e => {\n      n(e) || s.getLogger(this).error(e);\n    }));\n  }\n  clear() {\n    for (let e = 0; e < this._images.length; e++) this._clearImage(e);\n  }\n  async doRefresh() {\n    return this._doRefresh();\n  }\n  async _doRefresh(e) {\n    if (this.suspended) return;\n    const t = [];\n    for (let r = 0; r < this._extents.length; r++) this._extents[r] && t.push(this._fetch(r, e));\n    await Promise.allSettled(t);\n  }\n  async processResult(e, t, r) {\n    (t instanceof HTMLImageElement || t instanceof HTMLCanvasElement) && (e.image = t);\n  }\n  findExtentInfoAt(e) {\n    for (const t of this._extents) {\n      const r = t.extent;\n      if (new p(r[0], r[1], r[2], r[3], this._spatialReference).contains(e)) return t;\n    }\n    return null;\n  }\n  getFetchOptions() {}\n  async redraw(e, r) {\n    await t(this._images, async (t, i) => {\n      t && (await e(t, r), await this._createStageObjects(i, t.image, r));\n    });\n  }\n  _imageSizeEquals(e, t, r) {\n    if (!this.maximumDataResolution) return !1;\n    const i = w(e) / this.maximumDataResolution.x,\n      s = _(e) / this.maximumDataResolution.y,\n      a = i / t.width,\n      o = s / t.height,\n      n = i / r.width,\n      l = s / r.height,\n      h = Math.abs(a - n),\n      m = Math.abs(o - l),\n      d = A.TESTS_DISABLE_OPTIMIZATIONS ? 0 : 1.5;\n    return h <= d && m <= d;\n  }\n  async _fetch(e, t) {\n    if (this.suspended) return;\n    const r = this._extents[e],\n      i = r.extent;\n    this._images[e] || (this._images[e] = {\n      texture: null,\n      material: null,\n      renderGeometry: null,\n      loadingPromise: null,\n      loadingAbortController: null,\n      image: null,\n      pixelData: null,\n      renderExtent: y(i)\n    });\n    const o = this._images[e];\n    o.loadingAbortController = a(o.loadingAbortController);\n    const c = new p(i[0], i[1], i[2], i[3], this._spatialReference);\n    if (0 === c.width || 0 === c.height) return void this._clearImage(e);\n    const g = new AbortController();\n    o.loadingAbortController = g, l(t, () => g.abort());\n    const u = g.signal,\n      f = this._waitFetchReady(u).then(async () => {\n        const t = {\n            requestAsImageElement: !0,\n            pixelRatio: this._overlays[e].pixelRatio,\n            ...this.getFetchOptions(),\n            signal: u\n          },\n          {\n            height: i,\n            width: s\n          } = r.imageSize;\n        return this.layer.fetchImage(c, s, i, t);\n      }).then(e => {\n        if (h(u)) throw s.getLogger(this).warnOnce(\"A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true.\"), m();\n        return this.processResult(o, e);\n      }).then(() => {\n        x(o.renderExtent, i);\n      });\n    o.loadingPromise = f, await this._updatingHandles.addPromise(f.then(async () => {\n      d(u), await this._createStageObjects(e, o.image, u);\n    }).catch(e => {\n      throw e && !n(e) && s.getLogger(this).error(e), e;\n    }).finally(() => {\n      f === o.loadingPromise && (o.loadingPromise = null, o.loadingAbortController = null);\n    }));\n  }\n  _clearImage(e) {\n    const t = this._images[e];\n    if (t) {\n      null != t.renderGeometry && (this._drapeSourceRenderer.removeGeometries([t.renderGeometry], M.UPDATE), t.renderGeometry = null);\n      const e = this.view._stage,\n        r = t.texture;\n      r?.unload(), e.remove(r), t.texture = null, e.remove(t.material), t.material = null, t.loadingAbortController = a(t.loadingAbortController), t.loadingPromise = null, t.image = null, t.pixelData = null;\n    }\n  }\n  async _createStageObjects(e, t, i) {\n    const s = this.view._stage,\n      a = this._images[e],\n      o = () => {\n        a.texture?.unload(), s.remove(a.texture), a.texture = null, a.renderGeometry && (this._drapeSourceRenderer.removeGeometries([a.renderGeometry], M.UPDATE), a.renderGeometry = null);\n      };\n    if (t) {\n      const n = new C(t, {\n        width: t.width,\n        height: t.height,\n        preMultiplyAlpha: !0,\n        wrap: {\n          s: H.CLAMP_TO_EDGE,\n          t: H.CLAMP_TO_EDGE\n        }\n      });\n      let l;\n      if (await r(this._images[e === D.INNER ? D.OUTER : D.INNER].loadingPromise), d(i), o(), await s.schedule(() => n.load(s.renderView.renderingContext), i), s.add(n), a.texture = n, null == a.material ? (a.material = new P({\n        transparent: !0,\n        textureId: n.id\n      }), s.add(a.material)) : a.material.setParameters({\n        textureId: n.id\n      }), e === D.INNER) l = S(a.material, a.renderExtent);else {\n        const e = this._images[0].renderExtent;\n        if (!e) return void o();\n        l = j(a.material, e, a.renderExtent);\n      }\n      a.renderGeometry = new L(l), a.renderGeometry.localOrigin = this._overlays[e].renderLocalOrigin, this._drapeSourceRenderer.addGeometries([a.renderGeometry], M.UPDATE);\n    } else o(), s.remove(a.material), a.material = null;\n  }\n  _clippedExtent(e, t) {\n    if (\"local\" !== this.view.viewingMode) return x(t, e);\n    const r = this.view.basemapTerrain;\n    return r.ready ? v(e, r.extent, t) : x(t, e);\n  }\n  _suspendedChangeHandler() {\n    this.suspended ? this.clear() : this.refreshDebounced();\n  }\n  async _waitFetchReady(e) {\n    await c(() => this.view.stationary, e), d(e);\n  }\n};\ne([g()], V.prototype, \"layer\", void 0), e([g()], V.prototype, \"suspended\", void 0), e([g({\n  readOnly: !0\n})], V.prototype, \"fullExtentInLocalViewSpatialReference\", void 0), e([g({\n  readOnly: !0\n})], V.prototype, \"visibleAtCurrentScale\", null), e([g()], V.prototype, \"updating\", void 0), V = e([u(\"esri.views.3d.layers.DynamicLayerView3D\")], V);\nconst N = V,\n  z = y();\nexport { N as default };"],
  "mappings": "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",
  "names": ["u", "n", "i", "s", "m", "l", "t", "e", "w", "b", "c", "y", "M", "I", "a", "y", "e", "t", "c", "l", "i", "u", "a", "w", "s", "n", "m", "g", "E", "N"]
}
