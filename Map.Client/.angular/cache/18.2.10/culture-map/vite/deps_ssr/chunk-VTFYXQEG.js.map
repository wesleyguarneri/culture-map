{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/support/engineContent/line.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { set as t, dist as e } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { ONES as o } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { getReferenceEllipsoid as n } from \"../../../../geometry/ellipsoidUtils.js\";\nimport { lonLatToWebMercatorComparable as i } from \"../../../../geometry/projection/projectors.js\";\nimport { newDoubleArray as a } from \"../../../../geometry/support/DoubleArray.js\";\nimport { newFloatArray as l } from \"../../../../geometry/support/FloatArray.js\";\nimport { getZeroIndexArray as u } from \"../../../../geometry/support/Indices.js\";\nimport { ViewingMode as s } from \"../../../ViewingMode.js\";\nimport { Attribute as c } from \"../../webgl-engine/lib/Attribute.js\";\nimport { ContentObjectType as p } from \"../../webgl-engine/lib/ContentObjectType.js\";\nimport { Geometry as f } from \"../../webgl-engine/lib/Geometry.js\";\nimport { VertexAttribute as m } from \"../../webgl-engine/lib/VertexAttribute.js\";\nfunction b(t, e, r = null) {\n  const o = [],\n    n = e.mapPositions;\n  g(e, o);\n  const i = o[0][1].data,\n    a = o[0][1].indices.length,\n    l = u(a);\n  return h(e, o, l), j(e, o, l), T(e, o, l), D(e, o, l), w(e, o, l), y(e, o, l), E(e, o, i), new f(t, o, n, p.Line, r);\n}\nfunction g(t, e) {\n  const {\n      attributeData: {\n        position: r\n      },\n      removeDuplicateStartEnd: o\n    } = t,\n    n = A(r) && o,\n    i = r.length / 3 - (n ? 1 : 0),\n    a = new Array(2 * (i - 1)),\n    l = n ? r.slice(0, -3) : r;\n  let u = 0;\n  for (let s = 0; s < i - 1; s++) a[u++] = s, a[u++] = s + 1;\n  e.push([m.POSITION, new c(l, a, 3, n)]);\n}\nfunction h(t, e, r) {\n  if (null != t.attributeData.colorFeature) return;\n  const n = t.attributeData.color;\n  e.push([m.COLOR, new c(n ?? o, r, 4)]);\n}\nfunction T(t, e, r) {\n  t.attributeData.normal && e.push([m.NORMAL, new c(t.attributeData.normal, r, 3)]);\n}\nfunction D(t, e, r) {\n  null != t.attributeData.colorFeature && e.push([m.COLORFEATUREATTRIBUTE, new c([t.attributeData.colorFeature], r, 1, !0)]);\n}\nfunction j(t, e, r) {\n  null == t.attributeData.sizeFeature && e.push([m.SIZE, new c([t.attributeData.size ?? 1], r, 1, !0)]);\n}\nfunction w(t, e, r) {\n  null != t.attributeData.sizeFeature && e.push([m.SIZEFEATUREATTRIBUTE, new c([t.attributeData.sizeFeature], r, 1, !0)]);\n}\nfunction y(t, e, r) {\n  null != t.attributeData.opacityFeature && e.push([m.OPACITYFEATUREATTRIBUTE, new c([t.attributeData.opacityFeature], r, 1, !0)]);\n}\nfunction E(r, o, u) {\n  if (null == r.overlayInfo || r.overlayInfo.renderCoordsHelper.viewingMode !== s.Global || !r.overlayInfo.spatialReference.isGeographic) return;\n  const p = a(u.length),\n    f = n(r.overlayInfo.spatialReference);\n  for (let t = 0; t < p.length; t += 3) i(u, t, p, t, f);\n  const b = u.length / 3,\n    g = l(b + 1);\n  let h = I,\n    T = F,\n    D = 0,\n    j = 0;\n  t(h, p[j++], p[j++]), j++, g[0] = 0;\n  for (let n = 1; n < b + 1; ++n) n === b && (j = 0), t(T, p[j++], p[j++]), j++, D += e(h, T), g[n] = D, [h, T] = [T, h];\n  o.push([m.DISTANCETOSTART, new c(g, o[0][1].indices, 1, !0)]);\n}\nfunction A(t) {\n  const e = t.length;\n  return t[0] === t[e - 3] && t[1] === t[e - 2] && t[2] === t[e - 1];\n}\nconst I = r(),\n  F = r();\nfunction R(t, e) {\n  if (null == t || 0 === t.length) return [];\n  const r = [];\n  return t.forEach(t => {\n    const o = t.length,\n      n = a(3 * o);\n    t.forEach((t, e) => {\n      n[3 * e] = t[0], n[3 * e + 1] = t[1], n[3 * e + 2] = t[2];\n    });\n    const i = {\n      attributeData: {\n        position: n,\n        normal: e\n      },\n      removeDuplicateStartEnd: !1\n    };\n    r.push(i);\n  }), r;\n}\nexport { b as createGeometry, R as lineStripsToParameters };"],
  "mappings": "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",
  "names": ["t", "e", "o", "n", "l", "A", "s", "b", "g", "h", "I", "T", "D", "j"]
}
