{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/layers/GraphicsLayerView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport r from \"../../../core/Error.js\";\nimport { destroyMaybe as s } from \"../../../core/maybe.js\";\nimport { when as t } from \"../../../core/reactiveUtils.js\";\nimport { property as i } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { LayerView3D as a } from \"./LayerView3D.js\";\nimport { elevationAlignPointsInFeatures as n } from \"./graphics/elevationAlignPointsInFeatures.js\";\nimport { GraphicsProcessor as p } from \"./graphics/GraphicsProcessor.js\";\nimport { queryForSymbologySnapping as l } from \"./graphics/queryForSymbologySnapping.js\";\nimport { LayerViewPerformanceInfo as c } from \"./support/LayerViewPerformanceInfo.js\";\nimport { toViewIfLocal as h } from \"./support/projectExtentUtils.js\";\nimport { UpdatePolicy as d } from \"../webgl-engine/lib/UpdatePolicy.js\";\nimport u from \"../../layers/LayerView.js\";\nlet m = class extends a(u) {\n  constructor() {\n    super(...arguments), this.type = \"graphics-3d\", this.symbologySnappingSupported = !0, this._slicePlaneEnabled = !1, this.fullExtentInLocalViewSpatialReference = null, this.ignoresMemoryFactor = !0;\n  }\n  initialize() {\n    this._set(\"processor\", new p({\n      owner: this,\n      scaleVisibilityEnabled: !0,\n      frustumVisibilityEnabled: !0\n    })), this.addResolvingPromise(this.processor.initializePromise), this.addHandles(this.layer.on(\"graphic-update\", e => this.processor.graphicsCore.graphicUpdateHandler(e))), this.addResolvingPromise(h(this).then(e => this.fullExtentInLocalViewSpatialReference = e)), this.layer.internal ? this.notifyChange(\"updating\") : this.addHandles(t(() => this.view?.basemapTerrain?.ready, () => () => this.notifyChange(\"updating\"), {\n      once: !0\n    }));\n  }\n  destroy() {\n    this._updatingHandles.removeAll(), this._set(\"processor\", s(this.processor));\n  }\n  get loadedGraphics() {\n    return this.layer.graphics;\n  }\n  get legendEnabled() {\n    return this.canResume() && !this.processor?.frustumVisibilitySuspended;\n  }\n  get visibleAtCurrentScale() {\n    return !this.processor?.scaleVisibilitySuspended;\n  }\n  get slicePlaneEnabled() {\n    const e = this.layer.internal;\n    return this._slicePlaneEnabled && !e;\n  }\n  set slicePlaneEnabled(e) {\n    this._slicePlaneEnabled = e;\n  }\n  getSuspendInfo() {\n    const e = super.getSuspendInfo();\n    return e.outsideOfView = this.processor?.frustumVisibilitySuspended ?? !1, e;\n  }\n  getHit(e) {\n    return this.processor.getHit(e);\n  }\n  whenGraphicBounds(e, r) {\n    return this.processor.whenGraphicBounds(e, r);\n  }\n  computeAttachmentOrigin(e, r) {\n    return this.processor?.computeAttachmentOrigin(e, r);\n  }\n  getSymbolLayerSize(e, r) {\n    return this.processor.getSymbolLayerSize(e, r);\n  }\n  queryGraphics() {\n    return Promise.resolve(this.loadedGraphics);\n  }\n  maskOccludee(e) {\n    return this.processor.maskOccludee(e);\n  }\n  highlight(e) {\n    return this.processor.highlight(e);\n  }\n  async elevationAlignPointsInFeatures(e, s) {\n    const {\n      processor: t\n    } = this;\n    if (null == t?.graphics3DGraphics) throw new r(\"graphicslayerview3d:missing-processor\", \"A Graphics3D processor is needed to resolve graphics elevation.\");\n    const {\n        graphics3DGraphics: i\n      } = t,\n      o = e => \"number\" == typeof e ? i.get(e) : void 0;\n    return n(this.view, this.layer, o, e, s);\n  }\n  async queryForSymbologySnapping(e, r) {\n    return l(this.processor, e, r);\n  }\n  get updatePolicy() {\n    return this.processor?.graphicsCore.effectiveUpdatePolicy || d.SYNC;\n  }\n  isUpdating() {\n    return this.view && this.layer && !(!this.processor?.updating && (this.layer.internal || this.view.basemapTerrain?.ready));\n  }\n  get performanceInfo() {\n    return new c(this.usedMemory, this.loadedGraphics.length, -1, -1);\n  }\n  get usedMemory() {\n    return this.processor?.graphicsCore?.usedMemory ?? 0;\n  }\n  get unloadedMemory() {\n    return this.processor?.graphicsCore?.unprocessedMemoryEstimate;\n  }\n  get test() {\n    return {\n      graphics3DProcessor: this.processor,\n      loadedGraphics: this.loadedGraphics\n    };\n  }\n};\ne([i()], m.prototype, \"loadedGraphics\", null), e([i({\n  readOnly: !0\n})], m.prototype, \"legendEnabled\", null), e([i()], m.prototype, \"layer\", void 0), e([i({\n  readOnly: !0\n})], m.prototype, \"processor\", void 0), e([i({\n  readOnly: !0\n})], m.prototype, \"visibleAtCurrentScale\", null), e([i()], m.prototype, \"_slicePlaneEnabled\", void 0), e([i({\n  type: Boolean\n})], m.prototype, \"slicePlaneEnabled\", null), m = e([o(\"esri.views.3d.layers.GraphicsLayerView3D\")], m);\nconst g = m;\nexport { g as default };"],
  "mappings": "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",
  "names": ["m", "y", "e", "l", "r", "s", "t"]
}
