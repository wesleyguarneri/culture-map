import { createRequire } from 'module';const require = createRequire(import.meta.url);
import {
  L,
  W
} from "./chunk-LFVCDSAE.js";
import "./chunk-SGTIVMVY.js";
import "./chunk-DU4CPDF3.js";
import "./chunk-S5FY2EPM.js";
import "./chunk-727KBFZ6.js";
import "./chunk-PCDJV6LA.js";
import "./chunk-XJ6YJASZ.js";
import "./chunk-3ILFY654.js";
import "./chunk-AEX7USXS.js";
import "./chunk-JPJAW3N6.js";
import "./chunk-LUORW76W.js";
import "./chunk-Y4563USE.js";
import "./chunk-ZWGLR3ES.js";
import "./chunk-3ZYRP2W5.js";
import "./chunk-BGWWZY5C.js";
import "./chunk-YJSSLMB3.js";
import "./chunk-TFJN5Q7A.js";
import {
  e as e4
} from "./chunk-5L5LGHM5.js";
import "./chunk-HZS5HO34.js";
import "./chunk-XJ4XZPHY.js";
import "./chunk-LTKDZMRF.js";
import "./chunk-P6I54QB7.js";
import "./chunk-VQJITNCG.js";
import "./chunk-TZTWNLH5.js";
import "./chunk-GXX7GUFH.js";
import "./chunk-QBSYSL2F.js";
import "./chunk-2AZDYW2O.js";
import "./chunk-R3RRJKEI.js";
import "./chunk-NDXKLAFE.js";
import "./chunk-YEDQK53F.js";
import "./chunk-WYPPXVX7.js";
import "./chunk-T2SCEBLQ.js";
import {
  e as e3
} from "./chunk-FYGR4X6I.js";
import "./chunk-HRIGBQ5I.js";
import "./chunk-5ZLERKFB.js";
import "./chunk-62NDSO75.js";
import "./chunk-OEC3KBO5.js";
import "./chunk-HKAONIBH.js";
import "./chunk-H65MVS3B.js";
import "./chunk-WS7U2AGS.js";
import "./chunk-U4NXHH3L.js";
import "./chunk-EFLOBCAZ.js";
import "./chunk-BY3XBMAH.js";
import "./chunk-OO7WNZEW.js";
import "./chunk-LU7PU2CS.js";
import "./chunk-4O23HCRT.js";
import "./chunk-T5C2TZNO.js";
import "./chunk-AOGKNBDG.js";
import "./chunk-F4FQ67JP.js";
import "./chunk-FDI2X6GO.js";
import "./chunk-3XHDZQO5.js";
import "./chunk-2BLQXT54.js";
import "./chunk-JSWVKNBA.js";
import "./chunk-UZFXFPGS.js";
import "./chunk-BK3AMA5C.js";
import "./chunk-FJ3AI2QH.js";
import "./chunk-XUSZNRTW.js";
import "./chunk-W26QF64E.js";
import "./chunk-D3XX7CQS.js";
import "./chunk-D5ZVYTUT.js";
import "./chunk-MY2HOJQI.js";
import "./chunk-CAYYEMNX.js";
import "./chunk-6NY22YWY.js";
import "./chunk-JBJJW35I.js";
import "./chunk-PXTZCDRW.js";
import "./chunk-GVEKX2VV.js";
import "./chunk-MM5HQGRH.js";
import "./chunk-JA5GJ7PX.js";
import "./chunk-Q6OCJ3NG.js";
import "./chunk-DD6UQHSS.js";
import "./chunk-FALQTRQL.js";
import "./chunk-GGTDLTZW.js";
import "./chunk-2W7YKBRA.js";
import "./chunk-GLFGRGCP.js";
import "./chunk-WQZJGTGX.js";
import "./chunk-VFQA3B5S.js";
import "./chunk-NOH3NLJ5.js";
import "./chunk-LX5BT6XP.js";
import "./chunk-PLGJMWC5.js";
import "./chunk-UGFQYEND.js";
import "./chunk-XC5RDNAY.js";
import "./chunk-KXVPQVTB.js";
import "./chunk-ARN5GJBK.js";
import "./chunk-MPLS4PY6.js";
import "./chunk-AGBPYPP3.js";
import "./chunk-IKBXTTSU.js";
import "./chunk-VMZV7772.js";
import "./chunk-3FR2T2I2.js";
import "./chunk-LOZRWPGI.js";
import "./chunk-GZ64OOAB.js";
import "./chunk-WR2NVDOI.js";
import "./chunk-EPLJRYUV.js";
import "./chunk-VYRCS5VR.js";
import "./chunk-OOK3QTWF.js";
import "./chunk-VFYCIIDC.js";
import "./chunk-PQUZDC3L.js";
import "./chunk-UUQ5O7GK.js";
import "./chunk-6XY35LS7.js";
import "./chunk-T42EJVJR.js";
import "./chunk-D3QK4EV3.js";
import "./chunk-JTDKNK44.js";
import "./chunk-RR7OQLEK.js";
import "./chunk-NAG6YX7T.js";
import "./chunk-WFNAKG2H.js";
import "./chunk-EKHRAAS6.js";
import "./chunk-IEB4ZCRH.js";
import "./chunk-7QOUHKW5.js";
import "./chunk-NHYYZMJR.js";
import "./chunk-WVSTX2NW.js";
import "./chunk-EXPZNTF3.js";
import "./chunk-ORYC4PVJ.js";
import "./chunk-DXIKKLD7.js";
import "./chunk-VQNXE43R.js";
import "./chunk-VZ37C3ID.js";
import "./chunk-5R3HARKC.js";
import "./chunk-BKSTWG4S.js";
import "./chunk-FSG7HOZQ.js";
import "./chunk-Q5TIVVER.js";
import "./chunk-ZPMUEGLK.js";
import "./chunk-GNFDYYU3.js";
import "./chunk-X36BR2QB.js";
import "./chunk-RGG3YJQA.js";
import "./chunk-GBJYL7OX.js";
import "./chunk-GHKVDSKU.js";
import "./chunk-NVOJILW6.js";
import "./chunk-KYPTWEOO.js";
import {
  c
} from "./chunk-WVFB3H4O.js";
import "./chunk-C7BQE556.js";
import "./chunk-ZREJ3Y2F.js";
import "./chunk-IR6CVPPC.js";
import "./chunk-BBUQOCRA.js";
import "./chunk-YBUJLIWZ.js";
import "./chunk-DL2B6IFJ.js";
import "./chunk-VOOO6FU5.js";
import "./chunk-IUPJR3FF.js";
import "./chunk-TGZW6QWO.js";
import "./chunk-OYIDHTXG.js";
import "./chunk-KUBMHTYA.js";
import "./chunk-42ZAWY2C.js";
import "./chunk-TVHVZK5G.js";
import "./chunk-P2MUOE6G.js";
import "./chunk-E5NWFBZG.js";
import "./chunk-FP37456K.js";
import "./chunk-VSQZQLTQ.js";
import "./chunk-K43CZ3M5.js";
import "./chunk-6EIBUVMG.js";
import "./chunk-XCCMILGI.js";
import "./chunk-NBJSAHZT.js";
import "./chunk-BD24XM4D.js";
import "./chunk-YCXNHEGB.js";
import "./chunk-CSATD3VX.js";
import "./chunk-NXXQ35YM.js";
import "./chunk-3BXPVUY5.js";
import "./chunk-LM3JDV4W.js";
import "./chunk-34V2CLL5.js";
import "./chunk-CXNERL22.js";
import "./chunk-7V4JSBFA.js";
import "./chunk-REIMIECM.js";
import "./chunk-EO2EW5KR.js";
import "./chunk-JEFPXTYT.js";
import "./chunk-MVS2BECH.js";
import "./chunk-UZ7IOCF3.js";
import "./chunk-OS542PQQ.js";
import "./chunk-3B5GODXR.js";
import "./chunk-NKXXHQDD.js";
import "./chunk-7TBQUMV3.js";
import "./chunk-TPLUZX3A.js";
import "./chunk-BGLJ2FAH.js";
import "./chunk-2EJFYNM7.js";
import "./chunk-DC5LRNPY.js";
import "./chunk-ASCK5HJ5.js";
import "./chunk-5X5U7R6O.js";
import "./chunk-XNLAOXPY.js";
import "./chunk-ZT7V2AVD.js";
import "./chunk-C2OXE4NQ.js";
import "./chunk-KOI252FF.js";
import "./chunk-I2TVVMQ6.js";
import "./chunk-5EGQYY2H.js";
import "./chunk-JKPUNUQA.js";
import "./chunk-SR7PRON4.js";
import "./chunk-HGHPYGKP.js";
import "./chunk-4DSGTDZJ.js";
import "./chunk-VYTPFEL2.js";
import "./chunk-RLGDH6IY.js";
import "./chunk-MRPCXIVS.js";
import "./chunk-YTKVV2Y3.js";
import "./chunk-GCVQXAS4.js";
import "./chunk-UFQD6AL4.js";
import "./chunk-HEG4CVDM.js";
import {
  B,
  e2
} from "./chunk-UVQYXHKM.js";
import {
  n as n2
} from "./chunk-M5N6UHWJ.js";
import "./chunk-EBCBYN6Y.js";
import {
  g
} from "./chunk-ODFKYX74.js";
import "./chunk-EGBDRLCX.js";
import "./chunk-THZPD5CT.js";
import "./chunk-OBCA6CWH.js";
import "./chunk-2JI245BP.js";
import "./chunk-ZEZ3LI2L.js";
import "./chunk-N34BRXVM.js";
import "./chunk-KETDH2J4.js";
import "./chunk-7QV7DHWN.js";
import "./chunk-4L4Y34YK.js";
import "./chunk-BXONKQKI.js";
import "./chunk-2HDBQXAR.js";
import "./chunk-RNF7VOCU.js";
import "./chunk-TIRJMGGG.js";
import "./chunk-ZDRQSPB6.js";
import "./chunk-DCXDXGAR.js";
import "./chunk-BCCDYCTQ.js";
import "./chunk-AYL3HQHD.js";
import "./chunk-66YQWHHE.js";
import "./chunk-QGBMZIP4.js";
import "./chunk-AOEBZVTA.js";
import "./chunk-2OZSYJDX.js";
import "./chunk-MZM4INJV.js";
import "./chunk-J4GMQHGL.js";
import "./chunk-MHPE4SZA.js";
import "./chunk-6SSA7P3A.js";
import "./chunk-FQBTLEUI.js";
import "./chunk-GS7Y3YOG.js";
import "./chunk-Y2HYKTTT.js";
import "./chunk-XLEC46FY.js";
import "./chunk-4AZPIP7K.js";
import "./chunk-G73HQZEL.js";
import {
  P,
  d,
  v,
  w
} from "./chunk-LZSLQ24Q.js";
import "./chunk-U3RHUXYK.js";
import "./chunk-7DBI6LQG.js";
import "./chunk-AUUN7RFQ.js";
import "./chunk-JAMSDYD6.js";
import "./chunk-PH6NPTP7.js";
import {
  e
} from "./chunk-NUICEVIH.js";
import {
  S,
  i
} from "./chunk-NXK752PZ.js";
import {
  y
} from "./chunk-UVNLCXWD.js";
import "./chunk-PNUA7JOS.js";
import "./chunk-OR2FKGUM.js";
import {
  a3 as a
} from "./chunk-UDMPWVPF.js";
import "./chunk-XJNKCEWL.js";
import "./chunk-AIZ3T7E3.js";
import "./chunk-6UEMNP3E.js";
import "./chunk-6WGE3IUL.js";
import "./chunk-MLYB2YW4.js";
import {
  n2 as n
} from "./chunk-6JFGZTLU.js";
import "./chunk-2ZJE6ZFX.js";
import "./chunk-L4CMR4WM.js";
import "./chunk-7JIACICA.js";
import "./chunk-IE4UBD3F.js";
import "./chunk-IAO6HACY.js";
import {
  __async,
  __spreadValues
} from "./chunk-XBPEBUD5.js";

// ../../../node_modules/@arcgis/core/widgets/Popup/css.js
var t = "esri-popup";
var o = `${t}--is-docked`;
var e5 = {
  base: t,
  baseHidden: `${t}--hidden`,
  main: `${t}__main-container`,
  shadow: `${t}--shadow`,
  isDocked: o,
  isDockedTopLeft: `${o}-top-left`,
  isDockedTopCenter: `${o}-top-center`,
  isDockedTopRight: `${o}-top-right`,
  isDockedBottomLeft: `${o}-bottom-left`,
  isDockedBottomCenter: `${o}-bottom-center`,
  isDockedBottomRight: `${o}-bottom-right`,
  alignTopCenter: `${t}--aligned-top-center`,
  alignBottomCenter: `${t}--aligned-bottom-center`,
  alignTopLeft: `${t}--aligned-top-left`,
  alignBottomLeft: `${t}--aligned-bottom-left`,
  alignTopRight: `${t}--aligned-top-right`,
  alignBottomRight: `${t}--aligned-bottom-right`,
  pointer: `${t}__pointer`,
  pointerDirection: `${t}__pointer-direction`
};

// ../../../node_modules/@arcgis/core/widgets/Popup/PopupViewModel.js
var e6 = class extends W {
  constructor(o2) {
    super(o2);
  }
};
e6 = e([a("esri.widgets.Popup.PopupViewModel")], e6);
var t2 = e6;

// ../../../node_modules/@arcgis/core/widgets/Popup/PopupVisibleElements.js
var s = class extends S {
  constructor() {
    super(...arguments), this.actionBar = true, this.closeButton = true, this.collapseButton = true, this.featureNavigation = true, this.featureListLayerTitle = true, this.heading = true, this.spinner = true;
  }
};
e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "actionBar", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "closeButton", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "collapseButton", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "featureNavigation", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "featureListLayerTitle", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "heading", void 0), e([y({
  type: Boolean,
  nonNullable: true
})], s.prototype, "spinner", void 0), s = e([a("esri.widgets.Popup.PopupVisibleElements")], s);
var p = s;

// ../../../node_modules/@arcgis/core/widgets/Popup.js
var _ = {
  buttonEnabled: true,
  position: "auto",
  breakpoint: {
    width: 544
  }
};
var E = class extends B {
  constructor(e7, t3) {
    super(e7, t3), this._dockAction = new c({
      id: "popup-dock-action"
    }), this._featuresWidget = new L({
      responsiveActionsEnabled: true
    }), this._containerNode = null, this._mainContainerNode = null, this._pointerOffsetInPx = 16, this.alignment = "auto", this.dockEnabled = false, this.headingLevel = 2, this.messages = null, this.viewModel = new t2(), this.visibleElements = new p();
  }
  initialize() {
    this.addHandles([d(() => [this.viewModel?.view?.widthBreakpoint, this.dockEnabled], () => this._handleDockIcon(), P), d(() => [this.dockEnabled, this.messages?.undock, this.messages?.dock], () => this._handleDockEnabled(), P), d(() => this.dockOptions, (e7) => {
      const {
        _dockAction: t3
      } = this, i2 = this._featuresWidget.headerActions;
      i2.remove(t3), e7.buttonEnabled && i2.add(t3);
    }, P), d(() => this.viewModel?.screenLocation, () => this._positionContainer()), d(() => [this.viewModel?.active, this.dockEnabled], () => this._toggleScreenLocationEnabled()), d(() => [this.viewModel?.screenLocation, this.viewModel?.view?.padding, this.viewModel?.view?.size, this.viewModel?.active, this.viewModel?.location, this.alignment], () => this.reposition()), d(() => this.viewModel?.view?.size, (e7, t3) => this._updateDockEnabledForViewSize(e7, t3)), d(() => this.viewModel?.view, (e7, t3) => this._viewChange(e7, t3)), d(() => this.viewModel?.view?.ready, (e7, t3) => this._viewReadyChange(e7 ?? false, t3 ?? false)), d(() => this.viewModel, () => this._featuresWidget.viewModel = this.viewModel, P), d(() => this._featureNavigationTop, (e7) => this._featuresWidget.featureNavigationTop = e7, P), d(() => this.headingLevel, (e7) => this._featuresWidget.headingLevel = e7, P), d(() => this.visibleElements.actionBar, (e7) => this._featuresWidget.visibleElements.actionBar = !!e7, P), d(() => this.visibleElements.closeButton, (e7) => this._featuresWidget.visibleElements.closeButton = !!e7, P), d(() => this.visibleElements.collapseButton, (e7) => this._featuresWidget.visibleElements.collapseButton = !!e7, P), d(() => this.visibleElements.heading, (e7) => this._featuresWidget.visibleElements.heading = !!e7, P), d(() => this.visibleElements.spinner, (e7) => this._featuresWidget.visibleElements.spinner = !!e7, P), d(() => this.visibleElements.featureNavigation, (e7) => this._featuresWidget.visibleElements.featureNavigation = !!e7, P), d(() => this.visibleElements.featureListLayerTitle, (e7) => this._featuresWidget.visibleElements.featureListLayerTitle = !!e7, P), v(() => this._featuresWidget, "trigger-header-action", (e7) => {
      e7.action === this._dockAction && (this.dockEnabled = !this.dockEnabled);
    })]);
  }
  normalizeCtorArgs(e7) {
    const t3 = __spreadValues({}, e7);
    return null != e7?.visibleElements && (t3.visibleElements = new p(e7.visibleElements), null != e7.collapseEnabled && (t3.visibleElements.collapseButton = e7.collapseEnabled), null != e7.spinnerEnabled && (t3.visibleElements.spinner = e7.spinnerEnabled)), t3;
  }
  destroy() {
    this._dockAction.destroy(), this._featuresWidget?.destroy();
  }
  get _featureNavigationTop() {
    const {
      currentAlignment: e7,
      currentDockPosition: t3
    } = this;
    return "bottom-left" === e7 || "bottom-center" === e7 || "bottom-right" === e7 || "top-left" === t3 || "top-center" === t3 || "top-right" === t3;
  }
  get actions() {
    return this.viewModel.actions;
  }
  set actions(e7) {
    this.viewModel.actions = e7;
  }
  get active() {
    return this.viewModel.active;
  }
  get autoCloseEnabled() {
    return this.viewModel.autoCloseEnabled;
  }
  set autoCloseEnabled(e7) {
    this.viewModel.autoCloseEnabled = e7;
  }
  get defaultPopupTemplateEnabled() {
    return this.viewModel.defaultPopupTemplateEnabled;
  }
  set defaultPopupTemplateEnabled(e7) {
    this.viewModel.defaultPopupTemplateEnabled = e7;
  }
  get content() {
    return this.viewModel.content;
  }
  set content(e7) {
    this.viewModel.content = e7;
  }
  get collapsed() {
    return this._featuresWidget.collapsed;
  }
  set collapsed(e7) {
    this._featuresWidget.collapsed = e7;
  }
  get collapseEnabled() {
    return i(n.getLogger(this), "collapseEnabled", {
      replacement: "PopupVisibleElements.collapseButton",
      version: "4.29"
    }), this.visibleElements.collapseButton;
  }
  set collapseEnabled(e7) {
    i(n.getLogger(this), "collapseEnabled", {
      replacement: "PopupVisibleElements.collapseButton",
      version: "4.29"
    }), this.visibleElements.collapseButton = e7;
  }
  get currentAlignment() {
    return this._getCurrentAlignment();
  }
  get currentDockPosition() {
    return this._getCurrentDockPosition();
  }
  get dockOptions() {
    return this._get("dockOptions") || _;
  }
  set dockOptions(e7) {
    const t3 = __spreadValues({}, _), i2 = this.viewModel?.view?.breakpoints, o2 = {};
    i2 && (o2.width = i2.xsmall, o2.height = i2.xsmall);
    const n3 = __spreadValues(__spreadValues({}, t3), e7), s2 = __spreadValues(__spreadValues({}, t3.breakpoint), o2), {
      breakpoint: r
    } = n3;
    "object" == typeof r ? n3.breakpoint = __spreadValues(__spreadValues({}, s2), r) : r && (n3.breakpoint = s2), this._set("dockOptions", n3), this._setCurrentDockPosition(), this.reposition();
  }
  get featureCount() {
    return this.viewModel.featureCount;
  }
  get featureMenuOpen() {
    return this.viewModel.featureMenuOpen;
  }
  set featureMenuOpen(e7) {
    this.viewModel.featureMenuOpen = e7;
  }
  get features() {
    return this.viewModel.features;
  }
  set features(e7) {
    this.viewModel.features = e7;
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e7) {
    this.viewModel.goToOverride = e7;
  }
  get highlightEnabled() {
    return this.viewModel.highlightEnabled;
  }
  set highlightEnabled(e7) {
    this.viewModel.highlightEnabled = e7;
  }
  get icon() {
    return "popup";
  }
  set icon(e7) {
    this._overrideIfSome("icon", e7);
  }
  get location() {
    return this.viewModel.location;
  }
  set location(e7) {
    this.viewModel.location = e7;
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e7) {
    this._overrideIfSome("label", e7);
  }
  get promises() {
    return this.viewModel.promises;
  }
  set promises(e7) {
    this.viewModel.promises = e7;
  }
  get selectedFeature() {
    return this.viewModel.selectedFeature;
  }
  get selectedFeatureIndex() {
    return this.viewModel.selectedFeatureIndex;
  }
  set selectedFeatureIndex(e7) {
    this.viewModel.selectedFeatureIndex = e7;
  }
  get selectedFeatureWidget() {
    return this._featuresWidget.selectedFeatureWidget;
  }
  get spinnerEnabled() {
    return i(n.getLogger(this), "spinnerEnabled", {
      replacement: "PopupVisibleElements.spinner",
      version: "4.29"
    }), this.visibleElements.spinner;
  }
  set spinnerEnabled(e7) {
    i(n.getLogger(this), "spinnerEnabled", {
      replacement: "PopupVisibleElements.spinner",
      version: "4.29"
    }), this.visibleElements.spinner = e7;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e7) {
    this.viewModel.title = e7;
  }
  get updateLocationEnabled() {
    return this.viewModel.updateLocationEnabled;
  }
  set updateLocationEnabled(e7) {
    this.viewModel.updateLocationEnabled = e7;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e7) {
    this.viewModel.view = e7;
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(e7) {
    this.viewModel.visible = e7;
  }
  blur() {
    const {
      active: e7
    } = this.viewModel;
    e7 || n.getLogger(this).warn("Popup can only be blurred when currently active."), this._featuresWidget.blur();
  }
  clear() {
    return this.viewModel.clear();
  }
  close() {
    this.visible = false;
  }
  fetchFeatures(e7, t3) {
    return this.viewModel.fetchFeatures(e7, t3);
  }
  focus() {
    const {
      active: e7
    } = this.viewModel;
    e7 || n.getLogger(this).warn("Popup can only be focused when currently active."), this.reposition(), requestAnimationFrame(() => {
      this._featuresWidget.focus();
    });
  }
  next() {
    return this.viewModel.next();
  }
  open(e7) {
    const t3 = !!e7 && !!e7.featureMenuOpen, i2 = {
      collapsed: !!e7 && !!e7.collapsed,
      featureMenuOpen: t3
    };
    this.set(i2), this.viewModel.open(e7), this._shouldFocus(e7);
  }
  previous() {
    return this.viewModel.previous();
  }
  reposition() {
    this.renderNow(), this._positionContainer(), this._setCurrentAlignment();
  }
  triggerAction(e7) {
    return this.viewModel.triggerAction(e7);
  }
  render() {
    const {
      dockEnabled: e7,
      currentAlignment: t3,
      currentDockPosition: i2
    } = this, {
      active: o2,
      screenLocation: n3
    } = this.viewModel, s2 = o2 && e7, r = o2 && !e7, l = this.selectedFeature?.layer?.title, a2 = this.selectedFeature?.layer?.id, d2 = {
      [e5.alignTopCenter]: "top-center" === t3,
      [e5.alignBottomCenter]: "bottom-center" === t3,
      [e5.alignTopLeft]: "top-left" === t3,
      [e5.alignBottomLeft]: "bottom-left" === t3,
      [e5.alignTopRight]: "top-right" === t3,
      [e5.alignBottomRight]: "bottom-right" === t3,
      [e5.isDocked]: s2,
      [e5.shadow]: r,
      [e5.isDockedTopLeft]: "top-left" === i2,
      [e5.isDockedTopCenter]: "top-center" === i2,
      [e5.isDockedTopRight]: "top-right" === i2,
      [e5.isDockedBottomLeft]: "bottom-left" === i2,
      [e5.isDockedBottomCenter]: "bottom-center" === i2,
      [e5.isDockedBottomRight]: "bottom-right" === i2
    };
    return n2("div", {
      afterCreate: this._positionContainer,
      afterUpdate: this._positionContainer,
      bind: this,
      class: this.classes(e5.base, d2, {
        [e5.baseHidden]: !n3 && !e7
      }),
      "data-layer-id": a2,
      "data-layer-title": l,
      role: "presentation"
    }, o2 ? [this._renderMainContainer(), this._renderPointer()] : null);
  }
  _renderPointer() {
    return this.dockEnabled ? null : n2("div", {
      class: e5.pointer,
      key: "popup-pointer",
      role: "presentation"
    }, n2("div", {
      class: this.classes(e5.pointerDirection, e5.shadow)
    }));
  }
  _renderMainContainer() {
    const {
      dockEnabled: e7
    } = this, t3 = {
      [e5.shadow]: e7
    };
    return n2("div", {
      afterCreate: this._setMainContainerNode,
      afterUpdate: this._setMainContainerNode,
      bind: this,
      class: this.classes(e5.main, e3.widget, t3)
    }, this._featuresWidget.render());
  }
  _shouldFocus(e7) {
    return __async(this, null, function* () {
      e7?.shouldFocus && (yield w(() => true === this.viewModel?.active), this.focus());
    });
  }
  _isOutsideView(e7) {
    const {
      popupHeight: t3,
      popupWidth: i2,
      screenLocation: o2,
      side: n3,
      view: s2
    } = e7;
    if (isNaN(i2) || isNaN(t3) || !s2 || !o2) return false;
    const r = s2.padding;
    return "right" === n3 && o2.x + i2 / 2 > s2.width - r.right || "left" === n3 && o2.x - i2 / 2 < r.left || "top" === n3 && o2.y - t3 < r.top || "bottom" === n3 && o2.y + t3 > s2.height - r.bottom;
  }
  _calculateAutoAlignment(e7) {
    if ("auto" !== e7) return e7;
    const {
      _pointerOffsetInPx: t3,
      _containerNode: i2,
      _mainContainerNode: o2,
      viewModel: n3
    } = this, {
      screenLocation: s2,
      view: r
    } = n3;
    if (null == s2 || !r || !i2) return "top-center";
    function l(e8) {
      return parseInt(e8.replaceAll(/[^-\d.]/g, ""), 10);
    }
    const a2 = o2 ? window.getComputedStyle(o2, null) : null, d2 = a2 ? l(a2.getPropertyValue("max-height")) : 0, c2 = a2 ? l(a2.getPropertyValue("height")) : 0, {
      height: p2,
      width: h
    } = i2.getBoundingClientRect(), u = h + t3, g2 = Math.max(p2, d2, c2) + t3, v2 = this._isOutsideView({
      popupHeight: g2,
      popupWidth: u,
      screenLocation: s2,
      side: "right",
      view: r
    }), m = this._isOutsideView({
      popupHeight: g2,
      popupWidth: u,
      screenLocation: s2,
      side: "left",
      view: r
    }), b = this._isOutsideView({
      popupHeight: g2,
      popupWidth: u,
      screenLocation: s2,
      side: "top",
      view: r
    }), f = this._isOutsideView({
      popupHeight: g2,
      popupWidth: u,
      screenLocation: s2,
      side: "bottom",
      view: r
    });
    return m ? b ? "bottom-right" : "top-right" : v2 ? b ? "bottom-left" : "top-left" : b ? f ? "top-center" : "bottom-center" : "top-center";
  }
  _callCurrentAlignment(e7) {
    return "function" == typeof e7 ? e7.call(this) : e7;
  }
  _getCurrentAlignment() {
    const {
      alignment: e7,
      dockEnabled: t3
    } = this;
    return t3 || !this.viewModel.active ? null : this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e7)));
  }
  _setCurrentAlignment() {
    this._set("currentAlignment", this._getCurrentAlignment());
  }
  _setCurrentDockPosition() {
    this._set("currentDockPosition", this._getCurrentDockPosition());
  }
  _calculatePositionResult(e7) {
    const t3 = ["left", "right"];
    return g(this.container) && t3.reverse(), e7?.replace(/leading/gi, t3[0]).replaceAll(/trailing/gi, t3[1]);
  }
  _callDockPosition(e7) {
    return "function" == typeof e7 ? e7.call(this) : e7;
  }
  _getDockPosition() {
    return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)));
  }
  _getCurrentDockPosition() {
    return this.dockEnabled && this.viewModel.active ? this._getDockPosition() : null;
  }
  _calculateAutoDockPosition(e7) {
    if ("auto" !== e7) return e7;
    const t3 = this.viewModel?.view, i2 = g(this.container) ? "top-left" : "top-right";
    if (!t3) return i2;
    const o2 = t3.padding || {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }, n3 = t3.width - o2.left - o2.right, {
      breakpoints: s2
    } = t3;
    return s2 && n3 <= s2.xsmall ? "bottom-center" : i2;
  }
  _getDockIcon() {
    const e7 = this._getDockPosition();
    if (this.dockEnabled) return "minimize";
    switch (e7) {
      case "top-left":
      case "bottom-left":
        return "dock-left";
      case "top-center":
        return "maximize";
      case "bottom-center":
        return "dock-bottom";
      default:
        return "dock-right";
    }
  }
  _handleDockIcon() {
    this._dockAction.icon = this._getDockIcon();
  }
  _handleDockEnabled() {
    this._dockAction.title = this.dockEnabled ? this.messages?.undock : this.messages?.dock;
  }
  _setMainContainerNode(e7) {
    this._mainContainerNode = e7;
  }
  _positionContainer(e7 = this._containerNode) {
    if (e7 && (this._containerNode = e7), !this._containerNode) return;
    const {
      screenLocation: t3
    } = this.viewModel, {
      width: i2
    } = this._containerNode.getBoundingClientRect(), o2 = this._calculatePositionStyle(t3, i2);
    o2 && Object.assign(this._containerNode.style, o2);
  }
  _calculateFullWidth(e7) {
    const {
      currentAlignment: t3,
      _pointerOffsetInPx: i2
    } = this;
    return "top-left" === t3 || "bottom-left" === t3 || "top-right" === t3 || "bottom-right" === t3 ? e7 + i2 : e7;
  }
  _calculateAlignmentPosition(e7, t3, i2, o2) {
    const {
      currentAlignment: n3,
      _pointerOffsetInPx: s2
    } = this;
    if (!i2) return;
    const {
      padding: r
    } = i2, l = o2 / 2, a2 = i2.height - t3, d2 = i2.width - e7;
    return "bottom-center" === n3 ? {
      top: t3 + s2 - r.top,
      left: e7 - l - r.left
    } : "top-left" === n3 ? {
      bottom: a2 + s2 - r.bottom,
      right: d2 + s2 - r.right
    } : "bottom-left" === n3 ? {
      top: t3 + s2 - r.top,
      right: d2 + s2 - r.right
    } : "top-right" === n3 ? {
      bottom: a2 + s2 - r.bottom,
      left: e7 + s2 - r.left
    } : "bottom-right" === n3 ? {
      top: t3 + s2 - r.top,
      left: e7 + s2 - r.left
    } : "top-center" === n3 ? {
      bottom: a2 + s2 - r.bottom,
      left: e7 - l - r.left
    } : void 0;
  }
  _calculatePositionStyle(e7, t3) {
    const {
      dockEnabled: i2,
      view: o2
    } = this;
    if (!o2) return;
    if (i2) return {
      left: "",
      top: "",
      right: "",
      bottom: ""
    };
    if (null == e7 || !t3) return;
    const n3 = this._calculateFullWidth(t3), s2 = this._calculateAlignmentPosition(e7.x, e7.y, o2, n3);
    return s2 ? {
      top: void 0 !== s2.top ? `${s2.top}px` : "auto",
      left: void 0 !== s2.left ? `${s2.left}px` : "auto",
      bottom: void 0 !== s2.bottom ? `${s2.bottom}px` : "auto",
      right: void 0 !== s2.right ? `${s2.right}px` : "auto"
    } : void 0;
  }
  _viewChange(e7, t3) {
    e7 && t3 && (this.close(), this.clear());
  }
  _viewReadyChange(e7, t3) {
    e7 ? this._wireUpView() : t3 && (this.close(), this.clear());
  }
  _wireUpView() {
    this._setDockEnabledForViewSize(this.dockOptions);
  }
  _dockingThresholdCrossed(e7, t3, i2) {
    const [o2, n3] = e7, [s2, r] = t3, {
      width: l = 0,
      height: a2 = 0
    } = i2 ?? {};
    return o2 <= l && s2 > l || o2 > l && s2 <= l || n3 <= a2 && r > a2 || n3 > a2 && r <= a2;
  }
  _updateDockEnabledForViewSize(e7, t3) {
    if (!e7 || !t3) return;
    const i2 = this.viewModel?.view?.padding || {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }, o2 = i2.left + i2.right, n3 = i2.top + i2.bottom, s2 = [], r = [];
    s2[0] = e7[0] - o2, s2[1] = e7[1] - n3, r[0] = t3[0] - o2, r[1] = t3[1] - n3;
    const {
      dockOptions: l
    } = this, a2 = l.breakpoint;
    this._dockingThresholdCrossed(s2, r, a2) && this._setDockEnabledForViewSize(l), this._setCurrentDockPosition();
  }
  _toggleScreenLocationEnabled() {
    const {
      dockEnabled: e7,
      viewModel: t3
    } = this;
    if (!t3) return;
    const i2 = t3.active && !e7;
    t3.screenLocationEnabled = i2;
  }
  _shouldDockAtCurrentViewSize(e7) {
    const t3 = e7.breakpoint, i2 = this.viewModel?.view?.ui;
    if (!i2) return false;
    const {
      width: o2,
      height: n3
    } = i2;
    if (isNaN(o2) || isNaN(n3)) return false;
    if (!t3) return false;
    const s2 = t3.hasOwnProperty("width") && o2 <= (t3.width ?? 0), r = t3.hasOwnProperty("height") && n3 <= (t3.height ?? 0);
    return s2 || r;
  }
  _setDockEnabledForViewSize(e7) {
    e7.breakpoint && (this.dockEnabled = this._shouldDockAtCurrentViewSize(e7));
  }
};
e([y({
  readOnly: true
})], E.prototype, "_featureNavigationTop", null), e([y()], E.prototype, "actions", null), e([y({
  readOnly: true
})], E.prototype, "active", null), e([y()], E.prototype, "alignment", void 0), e([y()], E.prototype, "autoCloseEnabled", null), e([y()], E.prototype, "defaultPopupTemplateEnabled", null), e([y()], E.prototype, "content", null), e([y()], E.prototype, "collapsed", null), e([y()], E.prototype, "collapseEnabled", null), e([y({
  readOnly: true
})], E.prototype, "currentAlignment", null), e([y({
  readOnly: true
})], E.prototype, "currentDockPosition", null), e([y()], E.prototype, "dockOptions", null), e([y()], E.prototype, "dockEnabled", void 0), e([y({
  readOnly: true
})], E.prototype, "featureCount", null), e([y()], E.prototype, "featureMenuOpen", null), e([y()], E.prototype, "features", null), e([y()], E.prototype, "goToOverride", null), e([y()], E.prototype, "headingLevel", void 0), e([y()], E.prototype, "highlightEnabled", null), e([y()], E.prototype, "icon", null), e([y()], E.prototype, "location", null), e([y()], E.prototype, "label", null), e([y(), e2("esri/widgets/Popup/t9n/Popup")], E.prototype, "messages", void 0), e([y()], E.prototype, "promises", null), e([y({
  readOnly: true
})], E.prototype, "selectedFeature", null), e([y()], E.prototype, "selectedFeatureIndex", null), e([y({
  readOnly: true
})], E.prototype, "selectedFeatureWidget", null), e([y()], E.prototype, "spinnerEnabled", null), e([y()], E.prototype, "title", null), e([y()], E.prototype, "updateLocationEnabled", null), e([y()], E.prototype, "view", null), e([y({
  type: t2
}), e4(["triggerAction", "trigger-action"])], E.prototype, "viewModel", void 0), e([y()], E.prototype, "visible", null), e([y({
  type: p,
  nonNullable: true
})], E.prototype, "visibleElements", void 0), E = e([a("esri.widgets.Popup")], E);
var k = E;
export {
  k as default
};
//# sourceMappingURL=Popup-FN7NZWNQ.js.map
