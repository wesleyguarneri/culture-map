{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/ManagedCanvas.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/BitBlitRenderer.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/MaterialManager.js", "../../../../../../node_modules/@arcgis/core/symbols/cim/Rasterizer.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/RectangleBinPack.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/GlyphMosaic.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/GlyphSource.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/SDFConverter.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/SpriteMosaic.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/AnimatableTextureResource.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/TextureManager.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/TextureUploadManager.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/WorldExtentClipRenderer.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/Effect.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/AnimationEffect.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BlendPrograms.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/BlendEffect.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/FeatureEffect.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightRenderer.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightSurfaces.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/HighlightEffect.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/HittestEffect.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Bloom.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Blur.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Colorize.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/DropShadow.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Opacity.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/EffectManager.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/painter/RenderPass.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueProgramCache.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/webgl/Painter.js", "../../../../../../node_modules/@arcgis/core/views/2d/engine/Stage.js", "../../../../../../node_modules/@arcgis/core/views/2d/magnifier/MagnifierView2D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { isRGB as e } from \"../../core/colorUtils.js\";\nimport { getFontFamily as r } from \"../../core/fontUtils.js\";\nimport { clone as t } from \"../../core/lang.js\";\nimport i from \"../../core/Logger.js\";\nimport { pt2px as o, px2pt as a } from \"../../core/screenUtils.js\";\nimport { numericHash as s } from \"../../core/string.js\";\nimport { CIMSymbolHelper as l } from \"./CIMSymbolHelper.js\";\nimport { defaultCIMValues as n } from \"./defaultCIMValues.js\";\nimport { Alignment as c } from \"./enums.js\";\nimport { OverrideHelper as p } from \"./OverrideHelper.js\";\nimport { getExtent as m, getSDFMetrics as f } from \"./SDFHelper.js\";\nimport { colorToArray as y, normalizeAlpha as h, getSize as d, isCIMMarkerStrokePlacement as u, getTintColor as v, getNumericValue as O, normalizePrimitiveOverrideProps as _, getDefaultCIMValue as g, getEnum as k, getFillColor as M, getStrokeColor as S, getStrokeWidth as C, fromCIMFontDecoration as b, fromCIMFontStyle as P, fromCIMHorizontalAlignment as x, fromCIMVerticalAlignment as z, isValidCIMValue as L, uncapitalize as E } from \"./utils.js\";\nimport { CIMEffectHelper as I } from \"./effects/CIMEffectHelper.js\";\nimport { randomInsidePolygonTextureSize as V } from \"../../views/2d/engine/webgl/definitions.js\";\nconst N = () => i.getLogger(\"esri.symbols.cim.cimAnalyzer\");\nfunction w(e) {\n  const r = e.markerPlacement;\n  return r && r.angleToLine ? c.MAP : c.SCREEN;\n}\nclass R {\n  constructor(e) {\n    this._cimLayers = [], this._poMap = {}, this._primitiveOverrides = [], e && (this._resourceManager = e);\n  }\n  analyzeSymbolReference(r, t, i) {\n    if (this._cimLayers = i ?? [], !r) return this._cimLayers;\n    if (this._reset(), r.primitiveOverrides) {\n      this._primitiveOverrides = r.primitiveOverrides;\n      for (const r of this._primitiveOverrides) {\n        const t = r.valueExpressionInfo;\n        if (t) this._setPoMap(r.primitiveName, r.propertyName, t);else if (null != r.value) {\n          let t = r.value;\n          r.propertyName.includes(\"Color\") && (e(t) && (t = y(t)), t = h(t)), this._setPoMap(r.primitiveName, r.propertyName, t);\n        }\n      }\n    }\n    return this._analyzeSymbol(r.symbol, t), this._cimLayers;\n  }\n  _reset() {\n    this._cimLayers = [], this._poMap = {}, this._primitiveOverrides = [];\n  }\n  _analyzeSymbol(e, r) {\n    switch (e?.type) {\n      case \"CIMPointSymbol\":\n      case \"CIMLineSymbol\":\n      case \"CIMPolygonSymbol\":\n        this._analyzeMultiLayerSymbol(e, r);\n    }\n  }\n  _analyzeMultiLayerSymbol(e, r) {\n    const t = e?.symbolLayers;\n    if (!t) return;\n    const i = e.effects;\n    let o = c.SCREEN;\n    const a = d(e) ?? 0;\n    \"CIMPointSymbol\" === e.type && \"Map\" === e.angleAlignment && (o = c.MAP);\n    const s = \"CIMPolygonSymbol\" === e.type;\n    let l = t.length;\n    for (; l--;) {\n      const n = t[l];\n      if (!n || !1 === n.enable) continue;\n      let c;\n      i?.length && (c = [...i]);\n      const m = n.effects;\n      m?.length && (i ? c.push(...m) : c = [...m]);\n      let f = null;\n      if (c) {\n        f = [];\n        for (const e of c) {\n          const r = p.findEffectOverrides(e, this._primitiveOverrides);\n          r && f.push(r);\n        }\n      }\n      const y = [];\n      switch (p.findApplicableOverrides(n, this._primitiveOverrides, y), n.type) {\n        case \"CIMSolidFill\":\n          this._analyzeSolidFill(n, f);\n          break;\n        case \"CIMPictureFill\":\n          this._analyzePictureFill(n, f);\n          break;\n        case \"CIMHatchFill\":\n          this._analyzeHatchFill(n, f);\n          break;\n        case \"CIMGradientFill\":\n          this._analyzeGradientFill(n, f);\n          break;\n        case \"CIMSolidStroke\":\n          this._analyzeSolidStroke(n, f, s, a);\n          break;\n        case \"CIMPictureStroke\":\n          this._analyzePictureStroke(n, f, s, a);\n          break;\n        case \"CIMGradientStroke\":\n          this._analyzeGradientStroke(n, f, s, a);\n          break;\n        case \"CIMCharacterMarker\":\n        case \"CIMPictureMarker\":\n        case \"CIMVectorMarker\":\n          {\n            \"CIMLineSymbol\" !== e.type && \"CIMPolygonSymbol\" !== e.type || (o = w(n));\n            const t = [],\n              i = n.primitiveName;\n            i && t.push(i);\n            const l = s && u(n.markerPlacement);\n            this._analyzeMarker(n, f, null, t, o, a, r, [], !1, l);\n            break;\n          }\n        default:\n          N().error(\"Cannot analyze CIM layer\", n.type);\n      }\n    }\n  }\n  _analyzeSolidFill(e, r) {\n    const {\n        primitiveName: t,\n        type: i\n      } = e,\n      o = h(e.color);\n    this._cimLayers.push({\n      type: \"fill\",\n      spriteRasterizationParam: null,\n      colorLocked: !!e.colorLocked,\n      color: this._getValueOrOverrideExpression(i, t, \"Color\", o),\n      height: 0,\n      angle: 0,\n      offsetX: 0,\n      offsetY: 0,\n      scaleX: 1,\n      effects: r,\n      applyRandomOffset: !1,\n      sampleAlphaOnly: !0,\n      hasUnresolvedReplacementColor: !1\n    });\n  }\n  _analyzePictureFill(e, r) {\n    const {\n        primitiveName: t,\n        type: i\n      } = e,\n      o = v(e),\n      a = O(e.height, n.CIMPictureFill.height);\n    let s = O(e.scaleX, 1);\n    if (\"width\" in e && \"number\" == typeof e.width) {\n      const r = e.width;\n      let t = 1;\n      const i = this._resourceManager.getResource(e.url);\n      null != i && (t = i.width / i.height), s /= t * (a / r);\n    }\n    const l = {\n      type: \"sprite-rasterization-param\",\n      resource: e,\n      overrides: this._getPrimitiveMaterialOverrides(t, i)\n    };\n    this._cimLayers.push({\n      type: \"fill\",\n      spriteRasterizationParam: l,\n      colorLocked: !!e.colorLocked,\n      effects: r,\n      color: this._getValueOrOverrideExpression(i, t, \"TintColor\", o),\n      height: this._getValueOrOverrideExpression(i, t, \"Height\", a),\n      scaleX: this._getValueOrOverrideExpression(i, t, \"ScaleX\", s),\n      angle: this._getValueOrOverrideExpression(i, t, \"Rotation\", O(e.rotation)),\n      offsetX: this._getValueOrOverrideExpression(i, t, \"OffsetX\", O(e.offsetX)),\n      offsetY: this._getValueOrOverrideExpression(i, t, \"OffsetY\", O(e.offsetY)),\n      applyRandomOffset: !1,\n      sampleAlphaOnly: !1,\n      hasUnresolvedReplacementColor: !1\n    });\n  }\n  _analyzeHatchFill(e, r) {\n    const {\n        primitiveName: t,\n        type: i\n      } = e,\n      o = this._analyzeMaterialOverrides(t, [\"Rotation\", \"OffsetX\", \"OffsetY\"]),\n      a = _(o);\n    let s = [255, 255, 255, 1],\n      l = !1;\n    if (e.lineSymbol?.symbolLayers) for (const n of e.lineSymbol.symbolLayers) {\n      if (\"CIMSolidStroke\" !== n.type) continue;\n      const e = n.primitiveName ?? t;\n      l || !e || n.colorLocked || null == this._poMap[e]?.Color && null == this._poMap[e]?.StrokeColor || (s = h(n.color), s = this._maybeGetValueOrOverrideExpression(e, \"StrokeColor\") ?? this._getValueOrOverrideExpression(i, e, \"Color\", s), l = !0);\n      const r = this._maybeGetValueOrOverrideExpression(e, \"StrokeWidth\");\n      if (r) {\n        let t = null,\n          o = null;\n        \"number\" == typeof r ? t = r : o = r.valueExpressionInfo;\n        let s = a.find(e => \"strokeWidth\" === e.propertyName);\n        s ? s.propertyName = \"width\" : (s = {\n          type: \"CIMPrimitiveOverride\",\n          primitiveName: e,\n          propertyName: \"width\",\n          valueExpressionInfo: o,\n          value: t,\n          defaultValue: g(i, \"width\")\n        }, a.push(s));\n      }\n    }\n    const c = {\n      type: \"sprite-rasterization-param\",\n      resource: e,\n      overrides: a\n    };\n    this._cimLayers.push({\n      type: \"fill\",\n      spriteRasterizationParam: c,\n      colorLocked: !!e.colorLocked,\n      effects: r,\n      color: s,\n      height: this._getValueOrOverrideExpression(i, t, \"Separation\", O(e.separation, n.CIMHatchFill.separation)),\n      scaleX: 1,\n      angle: this._getValueOrOverrideExpression(i, t, \"Rotation\", O(e.rotation)),\n      offsetX: this._getValueOrOverrideExpression(i, t, \"OffsetX\", O(e.offsetX)),\n      offsetY: this._getValueOrOverrideExpression(i, t, \"OffsetY\", O(e.offsetY)),\n      applyRandomOffset: !1,\n      sampleAlphaOnly: !0,\n      hasUnresolvedReplacementColor: !l\n    });\n  }\n  _analyzeGradientFill(e, r) {\n    this._cimLayers.push({\n      type: \"fill\",\n      spriteRasterizationParam: null,\n      colorLocked: !!e.colorLocked,\n      effects: r,\n      color: [128, 128, 128, 1],\n      height: 0,\n      angle: 0,\n      offsetX: 0,\n      offsetY: 0,\n      scaleX: 1,\n      applyRandomOffset: !1,\n      sampleAlphaOnly: !1,\n      hasUnresolvedReplacementColor: !1\n    });\n  }\n  _analyzeSolidStroke(e, r, t, i) {\n    const {\n        primitiveName: o,\n        type: a\n      } = e,\n      s = h(e.color),\n      l = O(e.width, n.CIMSolidStroke.width),\n      c = k(e.capStyle, n.CIMSolidStroke.capstyle),\n      p = k(e.joinStyle, n.CIMSolidStroke.joinstyle),\n      m = e.miterLimit;\n    let f,\n      y,\n      d = [];\n    if (this._analyzePrimitiveOverrides(o, r, null, null) && (d = this._getPrimitiveMaterialOverrides(o, a)), r && Array.isArray(r) && r.length > 0) {\n      const e = r[r.length - 1].effect;\n      e && \"CIMGeometricEffectDashes\" === e.type && \"NoConstraint\" === e.lineDashEnding && null === e.offsetAlongLine && (f = e.dashTemplate, y = e.scaleDash, (r = [...r]).pop());\n    }\n    const u = void 0 !== f ? {\n      type: \"sprite-rasterization-param\",\n      resource: {\n        type: \"dash\",\n        dashTemplate: f,\n        capStyle: c\n      },\n      overrides: d\n    } : null;\n    this._cimLayers.push({\n      type: \"line\",\n      spriteRasterizationParam: u,\n      isOutline: t,\n      colorLocked: !!e.colorLocked,\n      effects: r,\n      color: this._getValueOrOverrideExpression(a, o, \"Color\", s),\n      width: this._getValueOrOverrideExpression(a, o, \"Width\", l),\n      cap: this._getValueOrOverrideExpression(a, o, \"CapStyle\", c),\n      join: this._getValueOrOverrideExpression(a, o, \"JoinStyle\", p),\n      miterLimit: m && this._getValueOrOverrideExpression(a, o, \"MiterLimit\", m),\n      referenceWidth: i,\n      zOrder: G(e.name),\n      dashTemplate: f,\n      scaleDash: y,\n      sampleAlphaOnly: !0\n    });\n  }\n  _analyzePictureStroke(e, r, t, i) {\n    const {\n        primitiveName: o,\n        type: a\n      } = e,\n      s = v(e),\n      l = O(e.width, n.CIMPictureStroke.width),\n      c = k(e.capStyle, n.CIMPictureStroke.capstyle),\n      p = k(e.joinStyle, n.CIMPictureStroke.joinstyle),\n      m = e.miterLimit,\n      f = {\n        type: \"sprite-rasterization-param\",\n        resource: e,\n        overrides: this._getPrimitiveMaterialOverrides(o, a)\n      };\n    this._cimLayers.push({\n      type: \"line\",\n      spriteRasterizationParam: f,\n      isOutline: t,\n      colorLocked: !!e.colorLocked,\n      effects: r,\n      color: this._getValueOrOverrideExpression(a, o, \"TintColor\", s),\n      width: this._getValueOrOverrideExpression(a, o, \"Width\", l),\n      cap: this._getValueOrOverrideExpression(a, o, \"CapStyle\", c),\n      join: this._getValueOrOverrideExpression(a, o, \"JoinStyle\", p),\n      miterLimit: m && this._getValueOrOverrideExpression(a, o, \"MiterLimit\", m),\n      referenceWidth: i,\n      zOrder: G(e.name),\n      dashTemplate: null,\n      scaleDash: !1,\n      sampleAlphaOnly: !1\n    });\n  }\n  _analyzeGradientStroke(e, r, t, i) {\n    const {\n        primitiveName: o,\n        type: a\n      } = e,\n      s = O(e.width, n.CIMSolidStroke.width),\n      l = k(e.capStyle, n.CIMGradientStroke.capstyle),\n      c = k(e.joinStyle, n.CIMGradientStroke.joinstyle),\n      p = e.miterLimit;\n    this._cimLayers.push({\n      type: \"line\",\n      spriteRasterizationParam: null,\n      isOutline: t,\n      colorLocked: !!e.colorLocked,\n      effects: r,\n      color: [128, 128, 128, 1],\n      width: this._getValueOrOverrideExpression(a, o, \"Width\", s),\n      cap: this._getValueOrOverrideExpression(a, o, \"CapStyle\", l),\n      join: this._getValueOrOverrideExpression(a, o, \"JoinStyle\", c),\n      miterLimit: p && this._getValueOrOverrideExpression(a, o, \"MiterLimit\", p),\n      referenceWidth: i,\n      zOrder: G(e.name),\n      dashTemplate: null,\n      scaleDash: !1,\n      sampleAlphaOnly: !1\n    });\n  }\n  _analyzeMarker(e, r, t, i, o, a, s, l, c = !1, p = !1) {\n    if (c ||= !!e.colorLocked, this._analyzeMarkerInsidePolygon(e, r, c)) return;\n    const m = O(e.size, n.CIMVectorMarker.size),\n      f = O(e.rotation),\n      y = O(e.offsetX),\n      h = O(e.offsetY),\n      {\n        primitiveName: d,\n        type: u\n      } = e,\n      v = this._getValueOrOverrideExpression(u, d, \"Size\", m),\n      _ = this._getValueOrOverrideExpression(u, d, \"Rotation\", f),\n      g = this._getValueOrOverrideExpression(u, d, \"OffsetX\", y),\n      k = this._getValueOrOverrideExpression(u, d, \"OffsetY\", h);\n    switch (e.type) {\n      case \"CIMPictureMarker\":\n        this._analyzePictureMarker(e, r, t, i, o, a, v, _, g, k, l, c, p);\n        break;\n      case \"CIMVectorMarker\":\n        this._analyzeVectorMarker(e, r, t, i, o, a, v, _, g, k, l, s, c, p);\n    }\n  }\n  _analyzeMarkerInsidePolygon(e, r, t) {\n    const {\n      markerPlacement: i,\n      type: o\n    } = e;\n    if (!i || \"CIMMarkerPlacementInsidePolygon\" !== i.type) return !1;\n    if (\"CIMVectorMarker\" === o || \"CIMPictureMarker\" === o) {\n      const t = e.primitiveName;\n      if (t && this._analyzePrimitiveOverrides([t], r, null, null)) return !1;\n      const a = i.primitiveName;\n      if (a && this._analyzePrimitiveOverrides([a], r, null, null)) return !1;\n      if (\"CIMVectorMarker\" === o) {\n        const {\n          markerGraphics: r\n        } = e;\n        if (r) for (const e of r) {\n          const {\n            symbol: r\n          } = e;\n          if (\"CIMPolygonSymbol\" === r?.type && r.symbolLayers) {\n            const {\n              symbolLayers: e\n            } = r;\n            for (const r of e) if (\"CIMSolidStroke\" === r.type) return !1;\n          }\n        }\n      } else {\n        const {\n          animatedSymbolProperties: r\n        } = e;\n        if (r) return !1;\n      }\n    }\n    const s = Math.abs(i.stepX),\n      l = Math.abs(i.stepY);\n    if (0 === s || 0 === l) return !0;\n    let n, c;\n    if (\"Random\" === i.gridType) {\n      const e = a(V),\n        r = Math.max(Math.floor(e / s), 1);\n      n = l * Math.max(Math.floor(e / l), 1);\n      c = r * s / n;\n    } else i.shiftOddRows ? (n = 2 * l, c = s / l * .5) : (n = l, c = s / l);\n    const p = v(e),\n      m = \"CIMCharacterMarker\" === e.type ? null : {\n        type: \"sprite-rasterization-param\",\n        resource: e,\n        overrides: []\n      };\n    return this._cimLayers.push({\n      type: \"fill\",\n      spriteRasterizationParam: m,\n      colorLocked: t,\n      effects: r,\n      color: p,\n      height: n,\n      scaleX: c,\n      angle: i.gridAngle,\n      offsetX: O(i.offsetX),\n      offsetY: O(i.offsetY),\n      applyRandomOffset: \"Random\" === i.gridType,\n      sampleAlphaOnly: \"CIMPictureMarker\" !== e.type,\n      hasUnresolvedReplacementColor: !0\n    }), !0;\n  }\n  _analyzePictureMarker(e, r, i, o, a, l, n, c, p, m, f, y, h) {\n    const {\n      animatedSymbolProperties: d,\n      primitiveName: u,\n      type: _\n    } = e;\n    let g = O(e.scaleX, 1);\n    const k = v(e);\n    i || (i = this._createMarkerPlacementOverrideExpression(e.markerPlacement));\n    const M = this._createGIFAnimatedSymbolPropertiesOverrideExpression(d),\n      S = e.anchorPoint ?? {\n        x: 0,\n        y: 0\n      };\n    if (\"width\" in e && \"number\" == typeof e.width) {\n      const r = e.width;\n      let t = 1;\n      const i = this._resourceManager.getResource(e.url);\n      null != i && (t = i.width / i.height);\n      g /= t * (O(e.size) / r);\n    }\n    const C = [...o];\n    let b;\n    e.primitiveName && C.push(e.primitiveName), d || M ? b = {\n      type: \"animated\",\n      url: e.url,\n      urlHash: \"H\" + s(e.url),\n      playAnimation: e.animatedSymbolProperties?.playAnimation,\n      reverseAnimation: e.animatedSymbolProperties?.reverseAnimation,\n      randomizeStartTime: e.animatedSymbolProperties?.randomizeStartTime,\n      randomizeStartSeed: e.animatedSymbolProperties?.randomizeStartSeed,\n      startTimeOffset: e.animatedSymbolProperties?.startTimeOffset,\n      duration: e.animatedSymbolProperties?.duration,\n      repeatType: e.animatedSymbolProperties?.repeatType,\n      repeatDelay: e.animatedSymbolProperties?.repeatDelay\n    } : (b = t(e), b.markerPlacement = null);\n    const P = {\n      type: \"sprite-rasterization-param\",\n      resource: b,\n      overrides: this._getMaterialOverrides(C, _)\n    };\n    M && P.overrides.push(...M.overrides), this._cimLayers.push({\n      type: \"marker\",\n      spriteRasterizationParam: P,\n      colorLocked: y,\n      effects: r,\n      scaleSymbolsProportionally: !1,\n      alignment: a,\n      size: n,\n      scaleX: this._getValueOrOverrideExpression(_, u, \"ScaleX\", g),\n      rotation: c,\n      offsetX: p,\n      offsetY: m,\n      transform: {\n        type: \"cim-marker-transform-param\",\n        params: f\n      },\n      color: this._getValueOrOverrideExpression(_, u, \"TintColor\", k),\n      anchorPoint: {\n        x: S.x,\n        y: S.y\n      },\n      isAbsoluteAnchorPoint: \"Relative\" !== e.anchorPointUnits,\n      outlineColor: [0, 0, 0, 0],\n      outlineWidth: 0,\n      frameHeight: 0,\n      widthRatio: 1,\n      rotateClockwise: !!e.rotateClockwise,\n      referenceSize: l,\n      sizeRatio: 1,\n      isOutline: h,\n      markerPlacement: i\n    });\n  }\n  _analyzeVectorMarker(e, r, t, i, o, a, s, l, n, c, p, m, f, y) {\n    const h = e.markerGraphics;\n    if (!h) return;\n    const d = e.frame;\n    let u = 0;\n    if (u = d ? d.ymax - d.ymin : a, u) {\n      const r = {\n        offsetX: n,\n        offsetY: c,\n        rotation: l,\n        size: s,\n        frameHeight: u,\n        rotateClockWise: !!e.rotateClockwise\n      };\n      p = [...p, r];\n    }\n    t || (t = this._createMarkerPlacementOverrideExpression(e.markerPlacement));\n    for (const v of h) if (v) {\n      const s = v.symbol;\n      if (!s) continue;\n      const l = v.primitiveName;\n      let n;\n      if (l && i.push(l), (\"CIMPointSymbol\" === s.type || \"CIMTextSymbol\" === s.type) && d) {\n        let r = 0,\n          t = 0;\n        const i = v.geometry;\n        \"x\" in i && \"y\" in i && (r += i.x - .5 * (d.xmin + d.xmax), t += i.y - .5 * (d.ymin + d.ymax));\n        const o = e.anchorPoint;\n        o && (\"Absolute\" === e.anchorPointUnits ? (r -= o.x, t -= o.y) : d && (r -= (d.xmax - d.xmin) * o.x, t -= (d.ymax - d.ymin) * o.y));\n        const a = {\n          offsetX: r,\n          offsetY: t,\n          rotation: 0,\n          size: 0,\n          frameHeight: 0,\n          rotateClockWise: !1\n        };\n        n = [...p, a];\n      }\n      switch (s.type) {\n        case \"CIMPointSymbol\":\n        case \"CIMLineSymbol\":\n        case \"CIMPolygonSymbol\":\n          m || T(s) ? this._analyzeMultiLayerGraphicNonSDF(e, r, t, v, i, o, a, n ?? p, u, f, y) : this._analyzeMultiLayerGraphic(e, r, t, v, i, o, a, n ?? p, u, f, y);\n          break;\n        case \"CIMTextSymbol\":\n          this._analyzeTextGraphic(r, t, v, i, o, a, n ?? p, f);\n      }\n      l && i.pop();\n    }\n  }\n  _analyzeMultiLayerGraphic(e, r, t, i, o, a, s, l, n, c, p) {\n    const y = i.symbol,\n      d = y.symbolLayers;\n    if (!d) return;\n    let u = d.length;\n    if (F(d)) return void this._analyzeCompositeMarkerGraphic(e, r, t, i, d, a, s, l, n, c, p);\n    const v = this._resourceManager.geometryEngine,\n      O = I.applyEffects(y.effects, i.geometry, v);\n    if (O) for (; u--;) {\n      const y = d[u];\n      if (!y || !1 === y.enable) continue;\n      const _ = y.primitiveName;\n      switch (_ && o.push(_), y.type) {\n        case \"CIMSolidFill\":\n        case \"CIMSolidStroke\":\n          {\n            const o = I.applyEffects(y.effects, O, v),\n              d = m(o);\n            if (!d) continue;\n            const u = \"Relative\" !== e.anchorPointUnits,\n              [g, k, b, P] = f(d, e.frame, e.size, e.anchorPoint, u),\n              x = \"CIMSolidFill\" === y.type,\n              z = {\n                type: \"sdf\",\n                geom: o,\n                asFill: x\n              },\n              {\n                path: L\n              } = y,\n              E = x ? h(M(y)) : null == L ? h(S(y)) : [0, 0, 0, 0],\n              V = x ? [0, 0, 0, 0] : h(S(y)),\n              N = C(y) ?? 0;\n            if (!x && !N) break;\n            const w = i.primitiveName;\n            let R = null;\n            x && !y.colorLocked && (R = this._maybeGetValueOrOverrideExpression(w, \"FillColor\"));\n            let A = null;\n            x || y.colorLocked || (A = this._maybeGetValueOrOverrideExpression(w, \"StrokeColor\"));\n            const G = R ?? this._getValueOrOverrideExpression(y.type, _, \"Color\", E),\n              X = A ?? this._getValueOrOverrideExpression(y.type, _, \"Color\", V),\n              F = this._maybeGetValueOrOverrideExpression(w, \"StrokeWidth\") ?? this._getValueOrOverrideExpression(y.type, _, \"Width\", N),\n              T = L ? {\n                type: \"sprite-rasterization-param\",\n                resource: {\n                  type: \"path\",\n                  path: L,\n                  asFill: x\n                },\n                overrides: []\n              } : {\n                type: \"sprite-rasterization-param\",\n                resource: z,\n                overrides: []\n              };\n            this._cimLayers.push({\n              type: \"marker\",\n              spriteRasterizationParam: T,\n              colorLocked: !!y.colorLocked || !!c,\n              effects: r,\n              scaleSymbolsProportionally: !!e.scaleSymbolsProportionally,\n              alignment: a,\n              anchorPoint: {\n                x: k,\n                y: b\n              },\n              isAbsoluteAnchorPoint: u,\n              size: n,\n              rotation: 0,\n              offsetX: 0,\n              offsetY: 0,\n              scaleX: 1,\n              transform: {\n                type: \"cim-marker-transform-param\",\n                params: l\n              },\n              frameHeight: n,\n              widthRatio: P,\n              rotateClockwise: !1,\n              referenceSize: s,\n              sizeRatio: g,\n              color: G,\n              outlineColor: X,\n              outlineWidth: F,\n              isOutline: p,\n              markerPlacement: t\n            });\n            break;\n          }\n        case \"CIMPictureMarker\":\n        case \"CIMVectorMarker\":\n          y.markerPlacement ? this._analyzeMultiLayerGraphicNonSDF(e, r, t, i, o, a, s, l, n, !!y.colorLocked || !!c, p) : this._analyzeMarker(y, r, t, o, a, s, !1, l, c, p);\n          break;\n        default:\n          this._analyzeMultiLayerGraphicNonSDF(e, r, t, i, o, a, s, l, n, !!y.colorLocked || !!c, p);\n      }\n      _ && o.pop();\n    }\n  }\n  _analyzeTextGraphic(e, t, i, o, a, s, l, c) {\n    const m = [];\n    p.findApplicableOverrides(i, this._primitiveOverrides, m);\n    const f = i.geometry;\n    if (!(\"x\" in f) || !(\"y\" in f)) return;\n    const y = i.symbol,\n      d = b(y),\n      u = P(y.fontStyleName),\n      v = r(y.fontFamilyName);\n    y.font = {\n      family: v,\n      decoration: d,\n      ...u\n    };\n    const _ = O(y.height, n.CIMTextSymbol.height),\n      g = O(y.angle),\n      k = O(y.offsetX),\n      L = O(y.offsetY),\n      E = h(M(y));\n    let I = h(S(y)),\n      V = C(y) ?? 0;\n    V || (I = h(M(y.haloSymbol)), V = O(y.haloSize));\n    let N = !1;\n    if (y.symbol?.symbolLayers) for (const r of y.symbol.symbolLayers) {\n      null != h(M(r)) && (N = !!r.colorLocked);\n    }\n    const w = i.primitiveName;\n    let R = null;\n    N || (R = this._maybeGetValueOrOverrideExpression(w, \"FillColor\"));\n    const A = this._maybeGetValueOrOverrideExpression(w, \"TextSize\"),\n      G = this._maybeGetValueOrOverrideExpression(w, \"TextAngle\"),\n      X = this._maybeGetValueOrOverrideExpression(w, \"TextOffsetX\"),\n      F = this._maybeGetValueOrOverrideExpression(w, \"TextOffsetY\");\n    let T = null,\n      Y = null,\n      j = 0;\n    if (y.callout && \"CIMBackgroundCallout\" === y.callout.type) {\n      const e = y.callout;\n      if (e.backgroundSymbol) {\n        const r = e.backgroundSymbol.symbolLayers;\n        if (r) for (const e of r) \"CIMSolidFill\" === e.type ? T = h(e.color) : \"CIMSolidStroke\" === e.type && (Y = h(e.color), j = O(e.width, n.CIMSolidStroke.width));\n      }\n    }\n    const W = this._getValueOrOverrideExpression(y.type, i.primitiveName, \"TextString\", i.textString ?? \"\");\n    if (null == W) return;\n    const {\n        fontStyleName: D\n      } = y,\n      H = v + (D ? \"-\" + D.toLowerCase() : \"-regular\"),\n      U = this._getMaterialOverrides(o, y.type);\n    U.push(...this._getPrimitiveMaterialOverrides(i.primitiveName, y.type));\n    const J = {\n      type: \"text-rasterization-param\",\n      resource: {\n        type: \"text\",\n        textString: i.textString ?? \"\",\n        font: y.font,\n        symbol: y,\n        primitiveName: i.primitiveName\n      },\n      overrides: U\n    };\n    this._cimLayers.push({\n      type: \"text\",\n      lineWidth: y.lineWidth,\n      textRasterizationParam: J,\n      colorLocked: !!c || !!N,\n      effects: e,\n      alignment: a,\n      anchorPoint: {\n        x: 0,\n        y: 0\n      },\n      isAbsoluteAnchorPoint: !1,\n      fontName: H,\n      decoration: d,\n      weight: u.weight,\n      style: u.style,\n      size: A ?? _,\n      angle: G ?? g,\n      offsetX: X ?? k,\n      offsetY: F ?? L,\n      transform: {\n        type: \"cim-marker-transform-param\",\n        params: l\n      },\n      horizontalAlignment: x(y.horizontalAlignment),\n      verticalAlignment: z(y.verticalAlignment),\n      text: W,\n      color: R ?? this._getValueOrOverrideExpression(y.type, i.primitiveName, \"Color\", E),\n      outlineColor: I,\n      outlineSize: V,\n      backgroundColor: T,\n      borderLineColor: Y,\n      borderLineWidth: j,\n      referenceSize: s,\n      sizeRatio: 1,\n      markerPlacement: t\n    });\n  }\n  _analyzeMultiLayerGraphicNonSDF(e, r, t, i, a, s, n, c, p, m, f) {\n    const y = A(e, i),\n      h = e.primitiveName,\n      d = this._analyzeMaterialOverrides(h, [\"Rotation\", \"OffsetX\", \"OffsetY\"]),\n      u = _(d),\n      [v, O, g] = l.getTextureAnchor(y, this._resourceManager),\n      k = this._getMaterialOverrides(a, e.type);\n    k.push(...u);\n    const M = {\n      type: \"sprite-rasterization-param\",\n      resource: {\n        ...y,\n        avoidSDFRasterization: !0\n      },\n      overrides: k\n    };\n    this._cimLayers.push({\n      type: \"marker\",\n      spriteRasterizationParam: M,\n      colorLocked: m,\n      effects: r,\n      scaleSymbolsProportionally: !!e.scaleSymbolsProportionally,\n      alignment: s,\n      anchorPoint: {\n        x: v,\n        y: O\n      },\n      isAbsoluteAnchorPoint: !1,\n      size: p,\n      rotation: 0,\n      offsetX: 0,\n      offsetY: 0,\n      transform: {\n        type: \"cim-marker-transform-param\",\n        params: c\n      },\n      color: [255, 255, 255, 1],\n      outlineColor: [0, 0, 0, 0],\n      outlineWidth: 0,\n      scaleX: 1,\n      frameHeight: p,\n      widthRatio: 1,\n      rotateClockwise: !!e.rotateClockwise,\n      referenceSize: n,\n      sizeRatio: g / o(e.size),\n      isOutline: f,\n      markerPlacement: t\n    });\n  }\n  _createMarkerPlacementOverrideExpression(e) {\n    if (!e) return null;\n    const r = [];\n    return p.findApplicableOverrides(e, this._primitiveOverrides, r), {\n      type: \"cim-marker-placement-param\",\n      placement: e,\n      overrides: Y(r)\n    };\n  }\n  _createGIFAnimatedSymbolPropertiesOverrideExpression(e) {\n    if (!e) return null;\n    const r = [];\n    return p.findApplicableOverrides(e, this._primitiveOverrides, r), {\n      type: \"cim-gif-animation-params\",\n      animation: e,\n      overrides: Y(r)\n    };\n  }\n  _analyzeCompositeMarkerGraphic(e, r, t, i, o, a, s, l, c, p, y) {\n    const d = i.geometry,\n      u = o[0],\n      v = o[1],\n      _ = m(d);\n    if (!_) return;\n    const g = \"Relative\" !== e.anchorPointUnits,\n      [k, M, S, C] = f(_, e.frame, e.size, e.anchorPoint, g),\n      {\n        path: b\n      } = v,\n      P = v.primitiveName,\n      x = u.primitiveName,\n      z = i.primitiveName;\n    let L = null;\n    v.colorLocked || p || (L = this._maybeGetValueOrOverrideExpression(z, \"FillColor\"));\n    const E = L ?? this._getValueOrOverrideExpression(v.type, P, \"Color\", h(v.color));\n    let I = null;\n    u.colorLocked || p || (I = this._maybeGetValueOrOverrideExpression(z, \"StrokeColor\"));\n    const V = I ?? this._getValueOrOverrideExpression(u.type, x, \"Color\", h(u.color)),\n      N = this._maybeGetValueOrOverrideExpression(z, \"StrokeWidth\") ?? this._getValueOrOverrideExpression(u.type, x, \"Width\", O(u.width, n.CIMSolidStroke.width)),\n      w = {\n        type: \"sprite-rasterization-param\",\n        resource: b ? {\n          type: \"path\",\n          path: b,\n          asFill: !0\n        } : {\n          type: \"sdf\",\n          geom: d,\n          asFill: !0\n        },\n        overrides: []\n      };\n    this._cimLayers.push({\n      type: \"marker\",\n      spriteRasterizationParam: w,\n      colorLocked: p,\n      effects: r,\n      scaleSymbolsProportionally: !!e.scaleSymbolsProportionally,\n      alignment: a,\n      anchorPoint: {\n        x: M,\n        y: S\n      },\n      isAbsoluteAnchorPoint: g,\n      size: c,\n      rotation: 0,\n      offsetX: 0,\n      offsetY: 0,\n      scaleX: 1,\n      transform: {\n        type: \"cim-marker-transform-param\",\n        params: l\n      },\n      frameHeight: c,\n      widthRatio: C,\n      rotateClockwise: !1,\n      referenceSize: s,\n      sizeRatio: k,\n      color: E,\n      outlineColor: V,\n      outlineWidth: N,\n      isOutline: y,\n      markerPlacement: t\n    });\n  }\n  _setPoMap(e, r, t) {\n    let i;\n    this._poMap[e] ? i = this._poMap[e] : (i = {}, this._poMap[e] = i), i[r] = t;\n  }\n  _maybeGetValueOrOverrideExpression(e, r, t) {\n    return this._getValueOrOverrideExpression(\"\", e, r, t, !1);\n  }\n  _getValueOrOverrideExpression(e, r, t, i, o = !0) {\n    if (o && !L(i) && (i = g(e, t.toLowerCase())), null == r) return i;\n    const a = this._poMap[r];\n    if (null == a) return i;\n    const s = a[t];\n    return \"string\" == typeof s || \"number\" == typeof s || Array.isArray(s) ? s : s ? {\n      valueExpressionInfo: s,\n      defaultValue: i\n    } : i;\n  }\n  _analyzePrimitiveOverrides(e, r, t, i) {\n    if (null == e) return !1;\n    \"string\" == typeof e && (e = [e]);\n    for (const o of this._primitiveOverrides) if (e.includes(o.primitiveName) && o.valueExpressionInfo) return !0;\n    if (null != r) for (const o of r) if (o?.overrides.length > 0) return !0;\n    if (null != t) for (const o of t) if (o?.overrides.length > 0) return !0;\n    if (null != i) for (const o of i) if (o?.overrides.length > 0) return !0;\n    return !1;\n  }\n  _getMaterialOverrides(e, r) {\n    if (!e) return [];\n    const t = [];\n    for (const i of e) t.push(...this._getPrimitiveMaterialOverrides(i, r));\n    return t;\n  }\n  _getPrimitiveMaterialOverrides(e, r) {\n    if (!e) return [];\n    const t = _(this._primitiveOverrides.filter(r => r.primitiveName === e));\n    return t.forEach(e => e.defaultValue = g(r, e.propertyName.toLowerCase())), t;\n  }\n  _analyzeMaterialOverrides(e, r) {\n    return this._primitiveOverrides.filter(t => t.primitiveName !== e || !r.includes(t.propertyName));\n  }\n}\nfunction A(e, r) {\n  return {\n    type: e.type,\n    enable: !0,\n    name: e.name,\n    colorLocked: e.colorLocked,\n    primitiveName: e.primitiveName,\n    anchorPoint: e.anchorPoint,\n    anchorPointUnits: e.anchorPointUnits,\n    offsetX: 0,\n    offsetY: 0,\n    rotateClockwise: e.rotateClockwise,\n    rotation: 0,\n    size: e.size,\n    billboardMode3D: e.billboardMode3D,\n    depth3D: e.depth3D,\n    frame: e.frame,\n    markerGraphics: [r],\n    scaleSymbolsProportionally: e.scaleSymbolsProportionally,\n    respectFrame: e.respectFrame,\n    clippingPath: e.clippingPath\n  };\n}\nfunction G(e) {\n  if (e && 0 === e.indexOf(\"Level_\")) {\n    const r = parseInt(e.substr(6), 10);\n    if (!isNaN(r)) return r;\n  }\n  return 0;\n}\nfunction X(e, r) {\n  if (!r || 0 === r.length) return e;\n  const i = t(e);\n  return p.applyOverrides(i, r), i;\n}\nconst F = e => e && 2 === e.length && e[0].enable && e[1].enable && \"CIMSolidStroke\" === e[0].type && \"CIMSolidFill\" === e[1].type && null == e[0].path && null == e[1].path && !e[0].effects && !e[1].effects;\nfunction T(e) {\n  const r = e.symbolLayers;\n  if (!r || 2 !== r.length) return !1;\n  const t = r.find(e => e.effects?.find(e => \"CIMGeometricEffectDashes\" === e.type && null != e.dashTemplate)),\n    i = r.find(e => e.effects?.find(e => \"CIMGeometricEffectAddControlPoints\" === e.type));\n  return !!t || !!i;\n}\nfunction Y(e) {\n  return t(e).map(e => ({\n    ...e,\n    propertyName: E(e.propertyName)\n  }));\n}\nexport { R as CIMAnalyzer, X as analyzeCIMResource };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Evented.js\";\nimport { on as t } from \"../../../core/events.js\";\nimport { handlesGroup as a } from \"../../../core/handleUtils.js\";\nimport has from \"../../../core/has.js\";\nimport { deg2rad as s } from \"../../../core/mathUtils.js\";\nimport { identity as r, scale as i, rotate as o, translate as n } from \"../../../core/libs/gl-matrix-2/math/mat2d.js\";\nimport { create as h } from \"../../../core/libs/gl-matrix-2/factories/mat2df64.js\";\nimport { createContext as c } from \"../../webgl/contextUtils.js\";\nclass l {\n  constructor(s) {\n    this.events = new e(), this._hasMajorPerformanceCaveat = !1, this._lastRenderFrameCounter = 0, this._canvas = document.createElement(\"canvas\"), this._canvas.setAttribute(\"style\", \"width: 100%; height:100%; display:block; willChange:transform\");\n    const r = {\n      failIfMajorPerformanceCaveat: !0,\n      alpha: !0,\n      antialias: !1,\n      depth: !0,\n      stencil: !0\n    };\n    s.appendChild(this._canvas);\n    let i = c(this._canvas, r);\n    i || (i = c(this._canvas, {\n      ...r,\n      failIfMajorPerformanceCaveat: !1\n    }), this._hasMajorPerformanceCaveat = !0), this._gl = i, this._handles = a([t(this._canvas, \"webglcontextlost\", e => this.events.emit(\"webgl-context-lost\", e))]);\n  }\n  destroy() {\n    this._canvas.parentNode?.removeChild(this._canvas), this._canvas = null, this._handles.remove(), this._gl = null;\n  }\n  get gl() {\n    return this._gl;\n  }\n  render(e, t) {\n    if (this._hasMajorPerformanceCaveat || has(\"esri-force-performance-mode\")) {\n      if (++this._lastRenderFrameCounter >= has(\"esri-performance-mode-frames-between-render\") && (t(), this._lastRenderViewState = e.state.clone(), this._lastRenderFrameCounter = 0), this._lastRenderViewState) {\n        const [t, a, s, r, i, o] = this._computeViewTransform(this._lastRenderViewState, e.state);\n        this._canvas.style.transform = `matrix(${t}, ${a}, ${s}, ${r}, ${i}, ${o})`;\n      }\n    } else t();\n  }\n  resize(e) {\n    const t = this._canvas,\n      a = t.style,\n      {\n        state: {\n          size: s\n        },\n        pixelRatio: r\n      } = e,\n      i = s[0],\n      o = s[1],\n      n = Math.round(i * r),\n      h = Math.round(o * r);\n    t.width === n && t.height === h || (t.width = n, t.height = h), a.width = i + \"px\", a.height = o + \"px\";\n  }\n  _computeViewTransform(e, t) {\n    const [a, c] = e.center,\n      [l, m] = t.center,\n      [d, f] = e.toScreen([0, 0], l, m),\n      [_, v] = e.toScreen([0, 0], a, c),\n      p = _ - d,\n      g = v - f,\n      w = e.scale / t.scale,\n      u = t.rotation - e.rotation,\n      j = h();\n    return r(j), i(j, j, [w, w]), o(j, j, s(u)), n(j, j, [p, g]), j;\n  }\n}\nexport { l as ManagedCanvas };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as r } from \"../../../../core/maybe.js\";\nimport { PosTex2b as t } from \"./DefaultVertexAttributeLayouts.js\";\nimport { bitBlit as e } from \"./shaders/BitBlitPrograms.js\";\nimport { BufferObject as i } from \"../../../webgl/BufferObject.js\";\nimport { BlendFactor as s, PrimitiveType as o, Usage as a } from \"../../../webgl/enums.js\";\nimport { createProgram as m } from \"../../../webgl/ProgramTemplate.js\";\nimport { VertexArrayObject as n } from \"../../../webgl/VertexArrayObject.js\";\nclass _ {\n  constructor() {\n    this._initialized = !1;\n  }\n  dispose() {\n    this._program = r(this._program), this._vertexArrayObject = r(this._vertexArrayObject);\n  }\n  render(r, t, e, i) {\n    r && (this._initialized || this._initialize(r), r.setBlendFunctionSeparate(s.ONE, s.ONE_MINUS_SRC_ALPHA, s.ONE, s.ONE_MINUS_SRC_ALPHA), r.bindVAO(this._vertexArrayObject), r.useProgram(this._program), t.setSamplingMode(e), r.bindTexture(t, 0), this._program.setUniform1i(\"u_tex\", 0), this._program.setUniform1f(\"u_opacity\", i), r.drawArrays(o.TRIANGLE_STRIP, 0, 4), r.bindTexture(null, 0), r.bindVAO());\n  }\n  _initialize(r) {\n    if (this._initialized) return !0;\n    const s = m(r, e);\n    if (!s) return !1;\n    const o = new Int8Array(16);\n    o[0] = -1, o[1] = -1, o[2] = 0, o[3] = 0, o[4] = 1, o[5] = -1, o[6] = 1, o[7] = 0, o[8] = -1, o[9] = 1, o[10] = 0, o[11] = 1, o[12] = 1, o[13] = 1, o[14] = 1, o[15] = 1;\n    const _ = e.attributes,\n      p = new n(r, _, t, {\n        geometry: i.createVertex(r, a.STATIC_DRAW, o)\n      });\n    return this._program = s, this._vertexArrayObject = p, this._initialized = !0, !0;\n  }\n}\nexport { _ as BitBlitRenderer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { createProgramTemplate as r } from \"./shaders/MaterialPrograms.js\";\nclass e {\n  constructor(r) {\n    this._rctx = r, this._programByKey = new Map();\n  }\n  dispose() {\n    this._programByKey.forEach(r => r.dispose()), this._programByKey.clear();\n  }\n  getProgram(e, t = []) {\n    const a = e.vsPath + \".\" + e.fsPath + JSON.stringify(t);\n    if (this._programByKey.has(a)) return this._programByKey.get(a);\n    const s = {\n        ...t.map(r => \"string\" == typeof r ? {\n          name: r,\n          value: !0\n        } : r).reduce((r, e) => ({\n          ...r,\n          [e.name]: e.value\n        }), {})\n      },\n      {\n        vsPath: o,\n        fsPath: h,\n        attributes: i\n      } = e,\n      g = r(o, h, i, s),\n      m = this._rctx.programCache.acquire(g.shaders.vertexShader, g.shaders.fragmentShader, g.attributes);\n    if (!m) throw new Error(\"Unable to get program for key: ${key}\");\n    return this._programByKey.set(a, m), m;\n  }\n}\nexport { e as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { CIMSymbolHelper as e } from \"./CIMSymbolHelper.js\";\nimport { rasterizeFillStyle as r, rasterizeDash as t } from \"./rasterizingUtils.js\";\nimport a from \"./Rect.js\";\nimport { getSDFInfo as n, buildSDF as s } from \"./SDFHelper.js\";\nimport { resampleHermite as i } from \"./utils.js\";\nimport { patternFillRasterizationScale as o } from \"../../views/2d/engine/webgl/definitions.js\";\nconst c = 512;\nclass l {\n  constructor(e) {\n    this._resourceManager = e, this._cachedRasterizationCanvas = null;\n  }\n  dispose() {\n    this._cachedRasterizationCanvas = null;\n  }\n  get _canvas() {\n    return this._cachedRasterizationCanvas || (this._cachedRasterizationCanvas = document.createElement(\"canvas\")), this._cachedRasterizationCanvas;\n  }\n  rasterizeJSONResource(e) {\n    switch (e.type) {\n      case \"dash\":\n        {\n          const r = e.dashTemplate,\n            a = e.capStyle,\n            [n, s, i] = t(r, a);\n          return {\n            size: [s, i],\n            image: new Uint32Array(n.buffer),\n            sdf: !0,\n            simplePattern: !0,\n            anchorX: 0,\n            anchorY: 0\n          };\n        }\n      case \"fill-style\":\n        {\n          const [t, a, n, s] = r(this._canvas, e, o);\n          return {\n            size: [a, n],\n            image: new Uint32Array(t.buffer),\n            sdf: !1,\n            simplePattern: !0,\n            anchorX: 0,\n            anchorY: 0,\n            rasterizationScale: s\n          };\n        }\n      case \"sdf\":\n        return h(e);\n      case \"CIMHatchFill\":\n      case \"CIMVectorMarker\":\n      case \"CIMPictureMarker\":\n        return this._rasterizeCIMJSONResource(e);\n    }\n  }\n  _rasterizeCIMJSONResource(r) {\n    switch (r.type) {\n      case \"CIMHatchFill\":\n        {\n          const t = e.fromCIMHatchFill(r, o);\n          return this._rasterizeCIMVectorMarker(t);\n        }\n      case \"CIMPictureMarker\":\n        {\n          const t = e.fromCIMInsidePolygon(r);\n          return this._rasterizeCIMVectorMarker(t);\n        }\n      case \"CIMVectorMarker\":\n        {\n          if (\"CIMMarkerPlacementInsidePolygon\" === r.markerPlacement?.type) {\n            const t = e.fromCIMInsidePolygon(r);\n            return this._rasterizeCIMVectorMarker(t);\n          }\n          const t = n(r);\n          return t && !r.avoidSDFRasterization ? h(t) : this._rasterizeCIMVectorMarker(r, !1);\n        }\n    }\n  }\n  _rasterizeCIMVectorMarker(r, t = !0) {\n    const n = t ? a.fromExtent(r.frame) : null,\n      [s, i, o, c, l] = e.rasterize(this._canvas, r, n, this._resourceManager);\n    return s ? {\n      size: [i, o],\n      image: new Uint32Array(s.buffer),\n      sdf: !1,\n      simplePattern: !1,\n      anchorX: c,\n      anchorY: l\n    } : null;\n  }\n  rasterizeImageResource(e, r, t, a) {\n    this._canvas.width = e, this._canvas.height = r;\n    const n = this._canvas.getContext(\"2d\", {\n      willReadFrequently: !0\n    });\n    t instanceof ImageData ? n.putImageData(t, 0, 0) : (t.setAttribute(\"width\", `${e}px`), t.setAttribute(\"height\", `${r}px`), n.drawImage(t, 0, 0, e, r));\n    const s = n.getImageData(0, 0, e, r),\n      o = new Uint8Array(s.data);\n    if (a) for (const i of a) if (i && i.oldColor && 4 === i.oldColor.length && i.newColor && 4 === i.newColor.length) {\n      const [e, r, t, a] = i.oldColor,\n        [n, s, c, l] = i.newColor;\n      if (e === n && r === s && t === c && a === l) continue;\n      for (let i = 0; i < o.length; i += 4) e === o[i] && r === o[i + 1] && t === o[i + 2] && a === o[i + 3] && (o[i] = n, o[i + 1] = s, o[i + 2] = c, o[i + 3] = l);\n    }\n    let l;\n    for (let i = 0; i < o.length; i += 4) l = o[i + 3] / 255, o[i] = o[i] * l, o[i + 1] = o[i + 1] * l, o[i + 2] = o[i + 2] * l;\n    let h = o,\n      u = e,\n      f = r;\n    const m = c;\n    if (u >= m || f >= m) {\n      const t = u / f;\n      t > 1 ? (u = m, f = Math.round(m / t)) : (f = m, u = Math.round(m * t)), h = new Uint8Array(4 * u * f);\n      const a = new Uint8ClampedArray(h.buffer);\n      i(o, e, r, a, u, f, !1);\n    }\n    return {\n      size: [u, f],\n      image: new Uint32Array(h.buffer),\n      sdf: !1,\n      simplePattern: !1,\n      anchorX: 0,\n      anchorY: 0\n    };\n  }\n}\nfunction h(e) {\n  if (!e) return null;\n  const [r, t, a] = s(e);\n  return r ? {\n    size: [t, a],\n    image: new Uint32Array(r.buffer),\n    sdf: !0,\n    simplePattern: !0,\n    anchorX: 0,\n    anchorY: 0\n  } : null;\n}\nexport { l as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport h from \"./Rect.js\";\nclass t {\n  constructor(t, e) {\n    this._width = 0, this._height = 0, this._free = [], this._width = t, this._height = e, this._free.push(new h(0, 0, t, e));\n  }\n  get width() {\n    return this._width;\n  }\n  get height() {\n    return this._height;\n  }\n  allocate(t, e) {\n    if (t > this._width || e > this._height) return new h();\n    let i = null,\n      s = -1;\n    for (let h = 0; h < this._free.length; ++h) {\n      const r = this._free[h];\n      t <= r.width && e <= r.height && (null === i || r.y <= i.y && r.x <= i.x) && (i = r, s = h);\n    }\n    return null === i ? new h() : (this._free.splice(s, 1), i.width < i.height ? (i.width > t && this._free.push(new h(i.x + t, i.y, i.width - t, e)), i.height > e && this._free.push(new h(i.x, i.y + e, i.width, i.height - e))) : (i.width > t && this._free.push(new h(i.x + t, i.y, i.width - t, i.height)), i.height > e && this._free.push(new h(i.x, i.y + e, t, i.height - e))), new h(i.x, i.y, t, e));\n  }\n  release(h) {\n    for (let t = 0; t < this._free.length; ++t) {\n      const e = this._free[t];\n      if (e.y === h.y && e.height === h.height && e.x + e.width === h.x) e.width += h.width;else if (e.x === h.x && e.width === h.width && e.y + e.height === h.y) e.height += h.height;else if (h.y === e.y && h.height === e.height && h.x + h.width === e.x) e.x = h.x, e.width += h.width;else {\n        if (h.x !== e.x || h.width !== e.width || h.y + h.height !== e.y) continue;\n        e.y = h.y, e.height += h.height;\n      }\n      this._free.splice(t, 1), this.release(h);\n    }\n    this._free.push(h);\n  }\n}\nexport { t as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from \"../../../../core/has.js\";\nimport { throwIfNotAbortError as t } from \"../../../../core/promiseUtils.js\";\nimport e from \"./Rect.js\";\nimport i from \"./RectangleBinPack.js\";\nimport { PixelFormat as h, TextureWrapMode as s } from \"../../../webgl/enums.js\";\nimport { Texture as r } from \"../../../webgl/Texture.js\";\nimport { TextureDescriptor as a } from \"../../../webgl/TextureDescriptor.js\";\nconst n = 256,\n  o = t => Math.floor(t / 256);\nfunction c(t) {\n  const e = new Set();\n  for (const i of t) e.add(o(i));\n  return e;\n}\nfunction l(e, i, h) {\n  return e.has(i) || e.set(i, h().then(() => {\n    e.delete(i);\n  }).catch(h => {\n    e.delete(i), t(h);\n  })), e.get(i);\n}\nconst g = t => ({\n  rect: new e(0, 0, 0, 0),\n  page: 0,\n  metrics: {\n    left: 0,\n    width: 0,\n    height: 0,\n    advance: 0,\n    top: 0\n  },\n  code: t,\n  sdf: !0\n});\nclass p {\n  constructor(t, e, h) {\n    this.width = 0, this.height = 0, this._dirties = [], this._glyphData = [], this._currentPage = 0, this._glyphCache = {}, this._textures = [], this._rangePromises = new Map(), this._preloadCache = {}, this.width = t, this.height = e, this._glyphSource = h, this._binPack = new i(t - 4, e - 4), this._glyphData.push(new Uint8Array(t * e)), this._dirties.push(!0), this._textures.push(null), this._initDecorationGlyphs();\n  }\n  dispose() {\n    this._binPack = null;\n    for (const t of this._textures) t && t.dispose();\n    this._textures.length = 0, this._glyphData.length = 0;\n  }\n  _initDecorationGlyphs() {\n    const t = [117, 149, 181, 207, 207, 181, 149, 117],\n      e = [],\n      i = [];\n    for (let r = 0; r < t.length; r++) {\n      const h = t[r];\n      for (let t = 0; t < 11; t++) {\n        const s = r >= 3 && r < 5 && t >= 3 && t < 8 ? 255 : 0;\n        e.push(h), i.push(s);\n      }\n    }\n    const h = {\n        metrics: {\n          width: 5,\n          height: 2,\n          left: 0,\n          top: 0,\n          advance: 0\n        },\n        bitmap: new Uint8Array(e)\n      },\n      s = {\n        metrics: {\n          width: 5,\n          height: 2,\n          left: 0,\n          top: 0,\n          advance: 0\n        },\n        bitmap: new Uint8Array(i)\n      };\n    this._recordGlyph(h), this._recordGlyph(s);\n  }\n  getTexture(t, e) {\n    if (!this._textures[e]) {\n      const i = new a();\n      i.pixelFormat = h.ALPHA, i.wrapMode = s.CLAMP_TO_EDGE, i.width = this.width, i.height = this.height, this._textures[e] = new r(t, i, new Uint8Array(this.width * this.height));\n    }\n    return this._dirties[e] && (this._textures[e].setData(this._glyphData[e]), this._dirties[e] = !1), this._textures[e];\n  }\n  async getGlyphItems(t, e, i) {\n    const h = this._getGlyphCache(t);\n    return await this._fetchRanges(t, e, i), e.map(e => this._getMosaicItem(h, t, e));\n  }\n  bind(t, e, i, h) {\n    const s = this.getTexture(t, i);\n    s.setSamplingMode(e), t.bindTexture(s, h);\n  }\n  preloadASCIIGlyphCache(t) {\n    const e = this._preloadCache[t];\n    if (null != e) return e;\n    const i = this._glyphSource.preloadASCIIRange(t).then(() => {\n      const e = this._getGlyphCache(t);\n      for (let i = 0; i < 256; i++) this._getMosaicItem(e, t, i);\n    });\n    return this._preloadCache[t] = i, i;\n  }\n  _getGlyphCache(t) {\n    return this._glyphCache[t] || (this._glyphCache[t] = {}), this._glyphCache[t];\n  }\n  _invalidate() {\n    this._dirties[this._currentPage] = !0;\n  }\n  async _fetchRanges(t, e, i) {\n    const h = c(e),\n      s = [];\n    h.forEach(e => {\n      s.push(this._fetchRange(t, e, i));\n    }), await Promise.all(s);\n  }\n  async _fetchRange(t, e, i) {\n    if (e > n) return;\n    const h = t + e;\n    return l(this._rangePromises, h, () => this._glyphSource.getRange(t, e, i));\n  }\n  _getMosaicItem(t, e, i) {\n    if (!t[i]) {\n      const h = this._glyphSource.getGlyph(e, i);\n      if (!h?.metrics) return g(i);\n      const s = this._recordGlyph(h),\n        r = this._currentPage,\n        a = h.metrics;\n      t[i] = {\n        rect: s,\n        page: r,\n        metrics: a,\n        code: i,\n        sdf: !0\n      }, this._invalidate();\n    }\n    return t[i];\n  }\n  _recordGlyph(t) {\n    const h = t.metrics;\n    let s;\n    if (0 === h.width) s = new e(0, 0, 0, 0);else {\n      const e = 3,\n        r = h.width + 2 * e,\n        a = h.height + 2 * e;\n      s = this._binPack.allocate(r, a), s.isEmpty && (this._dirties[this._currentPage] || (this._glyphData[this._currentPage] = null), this._currentPage = this._glyphData.length, this._glyphData.push(new Uint8Array(this.width * this.height)), this._dirties.push(!0), this._textures.push(null), this._initDecorationGlyphs(), this._binPack = new i(this.width - 4, this.height - 4), s = this._binPack.allocate(r, a));\n      const n = this._glyphData[this._currentPage],\n        o = t.bitmap;\n      let c, l;\n      if (o) for (let t = 0; t < a; t++) {\n        c = r * t, l = this.width * (s.y + t) + s.x;\n        for (let t = 0; t < r; t++) n[l + t] = o[c + t];\n      }\n      has(\"esri-glyph-debug\") && this._showDebugPage(n);\n    }\n    return s;\n  }\n  _showDebugPage(t) {\n    const e = document.createElement(\"canvas\"),\n      i = e.getContext(\"2d\"),\n      h = new ImageData(this.width, this.height),\n      s = h.data;\n    e.width = this.width, e.height = this.height, e.style.border = \"1px solid black\";\n    for (let r = 0; r < t.length; ++r) s[4 * r] = t[r], s[4 * r + 1] = 0, s[4 * r + 2] = 0, s[4 * r + 3] = 255;\n    i.putImageData(h, 0, 0), document.body.appendChild(e);\n  }\n}\nexport { p as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../request.js\";\nimport t from \"../../../../core/pbf.js\";\nclass a {\n  constructor(e) {\n    for (this._metrics = [], this._bitmaps = []; e.next();) switch (e.tag()) {\n      case 1:\n        {\n          const t = e.getMessage();\n          for (; t.next();) switch (t.tag()) {\n            case 3:\n              {\n                const e = t.getMessage();\n                let a, s, r, n, i, c, g;\n                for (; e.next();) switch (e.tag()) {\n                  case 1:\n                    a = e.getUInt32();\n                    break;\n                  case 2:\n                    s = e.getBytes();\n                    break;\n                  case 3:\n                    r = e.getUInt32();\n                    break;\n                  case 4:\n                    n = e.getUInt32();\n                    break;\n                  case 5:\n                    i = e.getSInt32();\n                    break;\n                  case 6:\n                    c = e.getSInt32();\n                    break;\n                  case 7:\n                    g = e.getUInt32();\n                    break;\n                  default:\n                    e.skip();\n                }\n                e.release(), a && (this._metrics[a] = {\n                  width: r,\n                  height: n,\n                  left: i,\n                  top: c,\n                  advance: g\n                }, this._bitmaps[a] = s);\n                break;\n              }\n            default:\n              t.skip();\n          }\n          t.release();\n          break;\n        }\n      default:\n        e.skip();\n    }\n  }\n  getMetrics(e) {\n    return this._metrics[e];\n  }\n  getBitmap(e) {\n    return this._bitmaps[e];\n  }\n}\nclass s {\n  constructor() {\n    this._ranges = [];\n  }\n  getRange(e) {\n    return this._ranges[e];\n  }\n  addRange(e, t) {\n    this._ranges[e] = t;\n  }\n}\nclass r {\n  constructor(e) {\n    this._glyphInfo = {}, this._baseURL = e;\n  }\n  getRange(s, r, n) {\n    const i = this._getFontStack(s);\n    if (i.getRange(r)) return Promise.resolve();\n    const c = 256 * r,\n      g = c + 255,\n      o = this._baseURL.replace(\"{fontstack}\", s).replace(\"{range}\", c + \"-\" + g);\n    return e(o, {\n      responseType: \"array-buffer\",\n      ...n\n    }).then(e => {\n      i.addRange(r, new a(new t(new Uint8Array(e.data), new DataView(e.data))));\n    });\n  }\n  async preloadASCIIRange(s) {\n    const r = this._getFontStack(s),\n      n = 0,\n      i = 255,\n      c = this._baseURL.replace(\"{fontstack}\", s).replace(\"{range}\", n + \"-\" + i),\n      g = await e(c, {\n        responseType: \"array-buffer\"\n      }),\n      o = new a(new t(new Uint8Array(g.data), new DataView(g.data)));\n    for (let e = n; e <= i; e++) r.getRange(e) || r.addRange(e, o);\n  }\n  getGlyph(e, t) {\n    const a = this._getFontStack(e);\n    if (!a) return;\n    const s = Math.floor(t / 256),\n      r = a.getRange(s);\n    return r ? {\n      metrics: r.getMetrics(t),\n      bitmap: r.getBitmap(t)\n    } : void 0;\n  }\n  _getFontStack(e) {\n    let t = this._glyphInfo[e];\n    return t || (t = this._glyphInfo[e] = new s()), t;\n  }\n}\nexport { r as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { packFloatRGBA as t } from \"../../../../core/floatRGBA.js\";\nimport { onAbort as e, createAbortError as i } from \"../../../../core/promiseUtils.js\";\nconst s = 1e20;\nclass r {\n  constructor(t, e = 2) {\n    this._textureSize = t, this._rasterizationScale = e, this._canvasSize = this._textureSize * this._rasterizationScale, this._svg = null;\n    const {\n        _canvasSize: i\n      } = this,\n      s = document.createElement(\"canvas\");\n    s.width = s.height = i, this._context = s.getContext(\"2d\", {\n      willReadFrequently: !1\n    }), this._gridOuter = new Float64Array(i * i), this._gridInner = new Float64Array(i * i), this._f = new Float64Array(i), this._d = new Float64Array(i), this._z = new Float64Array(i + 1), this._v = new Int16Array(i);\n  }\n  dispose() {\n    this._context = this._gridOuter = this._gridInner = this._f = this._d = this._z = this._v = null, this._svg && (document.body.removeChild(this._svg), this._svg = null);\n  }\n  draw(r, n, o) {\n    const {\n        _canvasSize: h,\n        _textureSize: a,\n        _rasterizationScale: l\n      } = this,\n      d = a / 4;\n    this._initSVG();\n    const _ = this.createSVGString(r, n);\n    return new Promise((r, n) => {\n      const c = new Image();\n      c.src = \"data:image/svg+xml; charset=utf8, \" + encodeURIComponent(_), c.onload = () => {\n        c.onload = null, this._context.clearRect(0, 0, h, h), this._context.drawImage(c, 0, 0, h, h);\n        const e = this._context.getImageData(0, 0, h, h),\n          i = new Uint8Array(a * a * 4);\n        for (let t = 0; t < h * h; t++) {\n          const i = e.data[4 * t + 3] / 255;\n          this._gridOuter[t] = 1 === i ? 0 : 0 === i ? s : Math.max(0, .5 - i) ** 2, this._gridInner[t] = 1 === i ? s : 0 === i ? 0 : Math.max(0, i - .5) ** 2;\n        }\n        this._edt(this._gridOuter, h, h), this._edt(this._gridInner, h, h);\n        for (let s = 0; s < a * a; s++) {\n          let e = 0;\n          for (let t = 0; t < l; t++) {\n            const i = Math.floor(s / a) * l + t;\n            for (let t = 0; t < l; t++) {\n              const r = i * h + (s % a * l + t);\n              e += this._gridOuter[r] - this._gridInner[r];\n            }\n          }\n          e /= l * l, e /= l;\n          t(.5 - e / (2 * d), i, 4 * s);\n        }\n        r(i);\n      };\n      const g = o?.signal;\n      g && e(g, () => n(i()));\n    });\n  }\n  _initSVG() {\n    if (!this._svg) {\n      const t = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n      t.setAttribute(\"style\", \"position: absolute;\"), t.setAttribute(\"width\", \"0\"), t.setAttribute(\"height\", \"0\"), t.setAttribute(\"aria-hidden\", \"true\"), t.setAttribute(\"role\", \"presentation\"), document.body.appendChild(t), this._svg = t;\n    }\n    return this._svg;\n  }\n  createSVGString(t, e) {\n    const i = this._initSVG(),\n      s = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    s.setAttribute(\"d\", t), i.appendChild(s);\n    const r = s.getBBox(),\n      n = r.width / r.height,\n      o = this._canvasSize / 2;\n    let h, a, l;\n    if (n > 1) {\n      h = o / r.width;\n      const t = o * (1 / n);\n      a = this._canvasSize / 4, l = o - t / 2;\n    } else {\n      h = o / r.height;\n      a = o - o * n / 2, l = this._canvasSize / 4;\n    }\n    const d = -r.x * h + a,\n      _ = -r.y * h + l;\n    s.setAttribute(\"style\", `transform: matrix(${h}, 0, 0, ${h}, ${d}, ${_})`), s.setAttribute(\"stroke-width\", \"\" + .5 / h);\n    const c = `<svg style=\"fill:${e ? \"red\" : \"none\"}; stroke:${e ? \"none\" : \"red\"}\" height=\"${this._canvasSize}\" width=\"${this._canvasSize}\" xmlns=\"http://www.w3.org/2000/svg\">${i.innerHTML}</svg>`;\n    return i.removeChild(s), c;\n  }\n  _edt(t, e, i) {\n    const s = this._f,\n      r = this._d,\n      n = this._v,\n      o = this._z;\n    for (let h = 0; h < e; h++) {\n      for (let r = 0; r < i; r++) s[r] = t[r * e + h];\n      this._edt1d(s, r, n, o, i);\n      for (let s = 0; s < i; s++) t[s * e + h] = r[s];\n    }\n    for (let h = 0; h < i; h++) {\n      for (let i = 0; i < e; i++) s[i] = t[h * e + i];\n      this._edt1d(s, r, n, o, e);\n      for (let i = 0; i < e; i++) t[h * e + i] = Math.sqrt(r[i]);\n    }\n  }\n  _edt1d(t, e, i, r, n) {\n    i[0] = 0, r[0] = -s, r[1] = +s;\n    for (let o = 1, h = 0; o < n; o++) {\n      let e = (t[o] + o * o - (t[i[h]] + i[h] * i[h])) / (2 * o - 2 * i[h]);\n      for (; e <= r[h];) h--, e = (t[o] + o * o - (t[i[h]] + i[h] * i[h])) / (2 * o - 2 * i[h]);\n      h++, i[h] = o, r[h] = e, r[h + 1] = +s;\n    }\n    for (let s = 0, o = 0; s < n; s++) {\n      for (; r[o + 1] < s;) o++;\n      e[s] = (s - i[o]) * (s - i[o]) + t[i[o]];\n    }\n  }\n}\nexport { r as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from \"../../../../core/Error.js\";\nimport has from \"../../../../core/has.js\";\nimport { spritePadding as e } from \"./definitions.js\";\nimport { log2 as i } from \"./GeometryUtils.js\";\nimport s from \"./Rect.js\";\nimport a from \"./RectangleBinPack.js\";\nimport { TextureWrapMode as r } from \"../../../webgl/enums.js\";\nimport { Texture as o } from \"../../../webgl/Texture.js\";\nimport { TextureDescriptor as h } from \"../../../webgl/TextureDescriptor.js\";\nfunction c(t) {\n  return t && \"static\" === t.type;\n}\nclass n {\n  constructor(t, e, i = 0) {\n    this._mosaicPages = [], this._maxItemSize = 0, this._currentPage = 0, this._pageWidth = 0, this._pageHeight = 0, this._mosaicRects = new Map(), this._spriteCopyQueue = [], this.pixelRatio = 1, this._pageWidth = t, this._pageHeight = e, i > 0 && (this._maxItemSize = i), this.pixelRatio = window.devicePixelRatio || 1, this._binPack = new a(this._pageWidth, this._pageHeight);\n    const s = Math.floor(this._pageWidth),\n      r = Math.floor(this._pageHeight);\n    this._mosaicPages.push({\n      mosaicsData: {\n        type: \"static\",\n        data: new Uint32Array(s * r)\n      },\n      size: [this._pageWidth, this._pageHeight],\n      dirty: !0,\n      texture: void 0\n    });\n  }\n  getWidth(t) {\n    return t >= this._mosaicPages.length ? -1 : this._mosaicPages[t].size[0];\n  }\n  getHeight(t) {\n    return t >= this._mosaicPages.length ? -1 : this._mosaicPages[t].size[1];\n  }\n  getPageTexture(t) {\n    return t < this._mosaicPages.length ? this._mosaicPages[t].texture : null;\n  }\n  has(t) {\n    return this._mosaicRects.has(t);\n  }\n  get itemCount() {\n    return this._mosaicRects.size;\n  }\n  getSpriteItem(t) {\n    return this._mosaicRects.get(t);\n  }\n  addSpriteItem(t, i, a, r, o, h, n = 1) {\n    if (this._mosaicRects.has(t)) return this._mosaicRects.get(t);\n    let g, p, m;\n    if (c(a)) [g, p, m] = this._allocateImage(i[0], i[1]);else {\n      g = new s(0, 0, i[0], i[1]), p = this._mosaicPages.length;\n      const t = void 0;\n      this._mosaicPages.push({\n        mosaicsData: a,\n        size: [i[0] + 2 * e, i[1] + 2 * e],\n        dirty: !0,\n        texture: t\n      });\n    }\n    if (g.width <= 0 || g.height <= 0) return null;\n    const d = {\n      type: \"sprite\",\n      rect: g,\n      width: i[0],\n      height: i[1],\n      sdf: o,\n      simplePattern: h,\n      rasterizationScale: n,\n      page: p\n    };\n    return this._mosaicRects.set(t, d), c(a) && (has(\"esri-mosaic-debug\") && this._showDebugSprite(i, a.data), this._copy({\n      rect: g,\n      spriteSize: i,\n      spriteData: a.data,\n      page: p,\n      pageSize: m,\n      repeat: r,\n      sdf: o\n    })), d;\n  }\n  hasItemsToProcess() {\n    return 0 !== this._spriteCopyQueue.length;\n  }\n  processNextItem() {\n    const t = this._spriteCopyQueue.pop();\n    t && this._copy(t);\n  }\n  getMosaicItemPosition(t) {\n    const i = this.getSpriteItem(t),\n      s = i?.rect;\n    if (!s) return null;\n    s.width = i.width, s.height = i.height;\n    const a = i.width,\n      r = i.height,\n      o = e,\n      h = this._mosaicPages[i.page].size;\n    return {\n      size: [i.width, i.height],\n      tl: [(s.x + o) / h[0], (s.y + o) / h[1]],\n      br: [(s.x + o + a) / h[0], (s.y + o + r) / h[1]],\n      page: i.page\n    };\n  }\n  bind(t, e, i = 0, s = 0) {\n    const a = this._mosaicPages[i],\n      r = a.mosaicsData;\n    let o = a.texture;\n    if (o || (o = p(t, a.size), a.texture = o), o.setSamplingMode(e), c(r)) t.bindTexture(o, s), a.dirty && (o.setData(new Uint8Array(r.data.buffer)), o.generateMipmap(), has(\"esri-mosaic-debug\") && this._showDebugPage(i));else {\n      r.data.loadFrame(o), t.bindTexture(o, s), o.generateMipmap();\n    }\n    a.dirty = !1;\n  }\n  getTexture(t, e = 0) {\n    const i = this._mosaicPages[e],\n      s = i.mosaicsData;\n    let a = i.texture;\n    if (a || (a = p(t, i.size), i.texture = a), c(s)) i.dirty && (a.setData(new Uint8Array(s.data.buffer)), a.generateMipmap(), has(\"esri-mosaic-debug\") && this._showDebugPage(e));else {\n      s.data.loadFrame(a), a.generateMipmap();\n    }\n    return i.dirty = !1, a;\n  }\n  dispose() {\n    this._binPack = null;\n    for (const t of this._mosaicPages) {\n      const e = t.texture;\n      e && e.dispose();\n      const i = t.mosaicsData;\n      if (!c(i)) {\n        i.data.destroy();\n      }\n    }\n    this._mosaicPages = null, this._mosaicRects.clear();\n  }\n  static _copyBits(t, e, i, s, a, r, o, h, c, n, g) {\n    let p = s * e + i,\n      m = h * r + o;\n    if (g) {\n      m -= r;\n      for (let o = -1; o <= n; o++, p = ((o + n) % n + s) * e + i, m += r) for (let e = -1; e <= c; e++) a[m + e] = t[p + (e + c) % c];\n    } else for (let d = 0; d < n; d++) {\n      for (let e = 0; e < c; e++) a[m + e] = t[p + e];\n      p += e, m += r;\n    }\n  }\n  _copy(i) {\n    if (i.page >= this._mosaicPages.length) return;\n    const s = this._mosaicPages[i.page],\n      a = s.mosaicsData;\n    if (!c(s.mosaicsData)) throw new t(\"mapview-invalid-resource\", \"unsuitable data type!\");\n    const r = i.spriteData,\n      o = a.data;\n    n._copyBits(r, i.spriteSize[0], 0, 0, o, i.pageSize[0], i.rect.x + e, i.rect.y + e, i.spriteSize[0], i.spriteSize[1], i.repeat), s.dirty = !0;\n  }\n  _allocateImage(t, r) {\n    t += 2 * e, r += 2 * e;\n    const o = Math.max(t, r);\n    if (this._maxItemSize && this._maxItemSize < o) {\n      const e = 2 ** Math.ceil(i(t)),\n        a = 2 ** Math.ceil(i(r)),\n        o = new s(0, 0, t, r);\n      return this._mosaicPages.push({\n        mosaicsData: {\n          type: \"static\",\n          data: new Uint32Array(e * a)\n        },\n        size: [e, a],\n        dirty: !0,\n        texture: void 0\n      }), [o, this._mosaicPages.length - 1, [e, a]];\n    }\n    const h = this._binPack.allocate(t, r);\n    if (h.width <= 0) {\n      const e = this._mosaicPages[this._currentPage];\n      return !e.dirty && c(e.mosaicsData) && (e.mosaicsData.data = null), this._currentPage = this._mosaicPages.length, this._mosaicPages.push({\n        mosaicsData: {\n          type: \"static\",\n          data: new Uint32Array(this._pageWidth * this._pageHeight)\n        },\n        size: [this._pageWidth, this._pageHeight],\n        dirty: !0,\n        texture: void 0\n      }), this._binPack = new a(this._pageWidth, this._pageHeight), this._allocateImage(t, r);\n    }\n    return [h, this._currentPage, [this._pageWidth, this._pageHeight]];\n  }\n  _showDebugSprite([t, e], i) {\n    const s = document.createElement(\"canvas\");\n    s.width = t, s.height = e, s.setAttribute(\"style\", `position: absolute; top: ${4 + 204 * g++}px; right: 208px; width: 200px; height: 200px; border: 1px solid black;`);\n    const a = s.getContext(\"2d\"),\n      r = new ImageData(t, e);\n    r.data.set(new Uint8Array(i.buffer)), a.putImageData(r, 0, 0), document.body.appendChild(s);\n  }\n  _showDebugPage(t) {\n    const e = this._mosaicPages[t],\n      {\n        size: [i, s],\n        mosaicsData: a\n      } = e;\n    if (!c(a)) return;\n    const r = `mosaicDebugPage${t}`,\n      o = document.getElementById(r) ?? document.createElement(\"canvas\");\n    o.id = r, o.width = i, o.height = s, o.setAttribute(\"style\", `position: absolute; top: ${4 + 204 * t}px; right: 4px; width: 200px; height: 200px; border: 1px solid black;`);\n    const h = o.getContext(\"2d\"),\n      n = new ImageData(i, s);\n    n.data.set(new Uint8Array(a.data.buffer)), h.putImageData(n, 0, 0), document.body.appendChild(o);\n  }\n}\nlet g = 0;\nfunction p(t, e) {\n  const i = new h();\n  return i.width = e[0], i.height = e[1], i.wrapMode = r.CLAMP_TO_EDGE, new o(t, i, null);\n}\nexport { n as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { spritePadding as t } from \"../definitions.js\";\nimport { play as i } from \"./utils.js\";\nclass a {\n  constructor(t, a, h, e) {\n    this._animation = t, this._frameData = null;\n    const n = t => {\n      this._frameData = t, a.requestRender();\n    };\n    this.frameCount = this._animation.frameDurations.length, this.width = this._animation.width, this.height = this._animation.height, this._playHandle = i(this._animation, h, e, n);\n  }\n  destroy() {\n    this._playHandle.remove();\n  }\n  loadFrame(i) {\n    const a = this._frameData;\n    if (null == a) return;\n    const h = \"width\" in a ? a.width : a.codedWidth,\n      e = \"height\" in a ? a.height : a.codedHeight;\n    i.updateData(0, t, t, h, e, a), this._frameData = null;\n  }\n}\nexport { a as AnimatableTextureResource };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../config.js\";\nimport t from \"../../../../request.js\";\nimport { bidiText as i } from \"../../../../core/BidiText.js\";\nimport s from \"../../../../core/Error.js\";\nimport { getFullyQualifiedFontName as r } from \"../../../../core/fontUtils.js\";\nimport has from \"../../../../core/has.js\";\nimport a from \"../../../../core/Logger.js\";\nimport { throwIfAborted as n, isAbortError as o } from \"../../../../core/promiseUtils.js\";\nimport { pt2px as c } from \"../../../../core/screenUtils.js\";\nimport { numericHash as h } from \"../../../../core/string.js\";\nimport u from \"../../../../symbols/cim/CIMResourceManager.js\";\nimport { CIMSymbolHelper as l } from \"../../../../symbols/cim/CIMSymbolHelper.js\";\nimport p from \"../../../../symbols/cim/Rasterizer.js\";\nimport { svgSdfTextureInnerSize as m, textureBindingSpriteAtlas as g, textureBindingGlyphAtlas as d } from \"./definitions.js\";\nimport { MosaicType as f } from \"./enums.js\";\nimport y from \"./GlyphMosaic.js\";\nimport _ from \"./GlyphSource.js\";\nimport M from \"./SDFConverter.js\";\nimport I from \"./SpriteMosaic.js\";\nimport { charCodes as w, discardUrlIfHasUrlHash as z, isSVGImage as S } from \"./Utils.js\";\nimport { AnimatableTextureResource as T } from \"./animatedFormats/AnimatableTextureResource.js\";\nimport { QueueProcessor as R } from \"../../../support/QueueProcessor.js\";\nimport { TextureSamplingMode as x } from \"../../../webgl/enums.js\";\nconst C = \"arial-unicode-ms-regular\",\n  P = () => a.getLogger(\"esri.views.2d.engine.webgl.TextureManager\"),\n  b = (e, t, i) => P().error(new s(e, t, i));\nclass v {\n  static fromMosaic(e, t) {\n    return new v(e, t.page, t.sdf);\n  }\n  constructor(e, t, i) {\n    this.mosaicType = e, this.page = t, this.sdf = i;\n  }\n}\nclass j {\n  constructor(i) {\n    this._requestRender = i, this._resourceManager = new u(), this._invalidFontsMap = new Map(), this._sdfConverter = new M(m), this._bindingInfos = new Array(), this._hashToBindingIndex = new Map(), this._ongoingRasterizations = new Map(), this._imageRequestQueue = new R({\n      concurrency: 10,\n      process: async (e, i) => {\n        n(i);\n        try {\n          return await t(e, {\n            responseType: \"image\",\n            signal: i\n          });\n        } catch (r) {\n          if (!o(r)) throw new s(\"mapview-invalid-resource\", `Could not fetch requested resource at ${e}`, r);\n          throw r;\n        }\n      }\n    }), this._spriteMosaic = new I(2048, 2048, 500), this._glyphSource = new _(`${e.fontsUrl}/{fontstack}/{range}.pbf`), this._glyphMosaic = new y(1024, 1024, this._glyphSource), this._rasterizer = new p(this.resourceManager);\n  }\n  dispose() {\n    this._spriteMosaic.dispose(), this._glyphMosaic.dispose(), this._rasterizer.dispose(), this._sdfConverter.dispose(), this._spriteMosaic = null, this._glyphMosaic = null, this._sdfConverter = null, this._hashToBindingIndex.clear(), this._hashToBindingIndex = null, this._bindingInfos = null, this._ongoingRasterizations.clear(), this._ongoingRasterizations = null, this._imageRequestQueue.clear(), this._imageRequestQueue = null, this._resourceManager.destroy();\n  }\n  get sprites() {\n    return this._spriteMosaic;\n  }\n  get glyphs() {\n    return this._glyphMosaic;\n  }\n  get resourceManager() {\n    return this._resourceManager;\n  }\n  async rasterizeItem(e, t) {\n    if (null == e) return b(\"mapview-null-resource\", \"Unable to rasterize null resource\"), null;\n    if (\"cim-rasterization-info\" !== e.type) return b(\"mapview-unexpected-resource\", \"Unable to rasterize resource\"), null;\n    const {\n      resource: i\n    } = e;\n    if (\"text\" === i.type) {\n      const e = await this._rasterizeText(i, t);\n      for (const t of e.glyphs) this._setTextureBinding(f.GLYPH, t);\n      return e;\n    }\n    const s = await this._rasterizeSprite(i, t);\n    return s && this._setTextureBinding(f.SPRITE, s), s;\n  }\n  getMosaicInfo(e, t, i = !1) {\n    const s = this._getTextureBindingInfo(e, t, i);\n    return s ? {\n      size: s.size,\n      texture: {\n        texture: s.texture,\n        unit: \"sprite\" === s.type ? g : d\n      }\n    } : (b(\"mapview-invalid-resource\", `Unable to find resource for ${t}`), {\n      size: [0, 0],\n      texture: {\n        texture: null,\n        unit: 0\n      }\n    });\n  }\n  _getTextureBindingInfo(e, t, i) {\n    const s = this._bindingInfos[t - 1],\n      r = s.page,\n      a = i ? x.LINEAR_MIPMAP_LINEAR : x.LINEAR;\n    switch (s.mosaicType) {\n      case f.SPRITE:\n        {\n          const t = [this.sprites.getWidth(r), this.sprites.getHeight(r)],\n            i = this._spriteMosaic.getTexture(e, r);\n          return i.setSamplingMode(a), {\n            type: \"sprite\",\n            texture: i,\n            size: t\n          };\n        }\n      case f.GLYPH:\n        {\n          const t = [this.glyphs.width, this.glyphs.height],\n            i = this._glyphMosaic.getTexture(e, r);\n          return this._glyphMosaic.bind(e, a, r, d), i.setSamplingMode(a), {\n            type: \"glyph\",\n            texture: i,\n            size: t\n          };\n        }\n      default:\n        return b(\"mapview-texture-manager\", `Cannot handle unknown type ${s.mosaicType}`), null;\n    }\n  }\n  _hashMosaic(e, t) {\n    return 1 | e << 1 | (t.sdf ? 1 : 0) << 2 | t.page << 3;\n  }\n  _setTextureBinding(e, t) {\n    const i = this._hashMosaic(e, t);\n    if (!this._hashToBindingIndex.has(i)) {\n      const s = v.fromMosaic(e, t),\n        r = this._bindingInfos.length + 1;\n      this._hashToBindingIndex.set(i, r), this._bindingInfos.push(s);\n    }\n    t.textureBinding = this._hashToBindingIndex.get(i);\n  }\n  async _rasterizeText(e, t) {\n    const {\n        font: s,\n        textString: a\n      } = e,\n      n = r(s),\n      o = this._invalidFontsMap.has(n),\n      [c, h] = i(a),\n      u = w(c);\n    try {\n      const e = o ? C : n;\n      has(\"esri-2d-stabilize-glyphs\") && (await this._glyphMosaic.preloadASCIIGlyphCache(e));\n      return {\n        type: \"glyphs\",\n        glyphs: await this._glyphMosaic.getGlyphItems(e, u, t),\n        isRightToLeft: h\n      };\n    } catch (l) {\n      b(\"mapview-invalid-resource\", `Couldn't find font ${n}. Falling back to Arial Unicode MS Regular`), this._invalidFontsMap.set(n, !0);\n      return {\n        type: \"glyphs\",\n        glyphs: await this._glyphMosaic.getGlyphItems(C, u, t),\n        isRightToLeft: h\n      };\n    }\n  }\n  _hashSpriteResource(e) {\n    switch (e.type) {\n      case \"path\":\n        return `path:${e.path}.${e.asFill ? 1 : 0}`;\n      case \"CIMPictureMarker\":\n        return `${e.type}:${e.url}:${e.size}`;\n      case \"CIMPictureFill\":\n        return `${e.type}:${e.url}:${e.height}`;\n      case \"CIMPictureStroke\":\n        return `${e.type}:${e.url}:${e.width}`;\n      case \"dash\":\n        return `dash:${e.capStyle}.${e.dashTemplate.join(\"\")}`;\n      case \"sdf\":\n        return `sdf:${JSON.stringify(e.geom)}.${e.asFill ? 1 : 0}`;\n      case \"fill-style\":\n        return `fill_style:${e.style}`;\n      case \"animated\":\n        return JSON.stringify(z(e));\n      case \"CIMHatchFill\":\n      case \"CIMVectorMarker\":\n        return JSON.stringify(e);\n    }\n  }\n  async _rasterizeSprite(e, t) {\n    if (!e) return null;\n    const i = h(this._hashSpriteResource(e));\n    if (this._spriteMosaic.has(i)) return this._spriteMosaic.getSpriteItem(i);\n    if (\"url\" in e && e.url || \"CIMPictureFill\" === e.type || \"CIMPictureStroke\" === e.type || \"CIMPictureMarker\" === e.type || \"CIMVectorMarker\" === e.type) {\n      const t = [];\n      l.fetchResources({\n        type: \"CIMPointSymbol\",\n        symbolLayers: [e]\n      }, this._resourceManager, t), t.length > 0 && (await Promise.all(t));\n    }\n    switch (e.type) {\n      case \"CIMPictureMarker\":\n        return \"CIMMarkerPlacementInsidePolygon\" === e.markerPlacement?.type ? this._rasterizeJSONResource(i, e) : this._handleAsyncResource(i, e, t);\n      case \"animated\":\n      case \"CIMPictureFill\":\n      case \"CIMPictureStroke\":\n      case \"path\":\n        return this._handleAsyncResource(i, e, t);\n      case \"sdf\":\n      case \"dash\":\n      case \"fill-style\":\n      case \"CIMVectorMarker\":\n      case \"CIMHatchFill\":\n        return this._rasterizeJSONResource(i, e);\n    }\n  }\n  _rasterizeJSONResource(e, t) {\n    const i = this._rasterizer.rasterizeJSONResource(t);\n    if (i) {\n      const {\n        size: s,\n        image: r,\n        sdf: a,\n        simplePattern: n,\n        rasterizationScale: o\n      } = i;\n      return this._addItemToMosaic(e, s, {\n        type: \"static\",\n        data: r\n      }, $(t), a, n, o);\n    }\n    return null;\n  }\n  async _handleAsyncResource(e, t, i) {\n    if (this._ongoingRasterizations.has(e)) return this._ongoingRasterizations.get(e);\n    let s;\n    return s = \"path\" === t.type ? this._handleSVG(t, e, i) : this._handleImage(t, e, i), this._ongoingRasterizations.set(e, s), s.finally(() => this._ongoingRasterizations.delete(e)), s;\n  }\n  async _handleSVG(e, t, i) {\n    const s = [m, m],\n      {\n        asFill: r\n      } = e,\n      a = await this._sdfConverter.draw(e.path, r, i);\n    return this._addItemToMosaic(t, s, {\n      type: \"static\",\n      data: new Uint32Array(a.buffer)\n    }, !1, !0, !0);\n  }\n  async _handleGIFOrPNG(e, t, i) {\n    const s = e.url,\n      r = this.resourceManager.getResource(s);\n    if (null == r) return null;\n    const {\n      width: a,\n      height: n\n    } = r;\n    if (r instanceof HTMLImageElement) {\n      if (\"animated\" === e.type) return b(\"mapview-unexpected-resource\", \"Attempt to configure animations for a non-animated image.\"), null;\n      const i = \"colorSubstitutions\" in e ? e.colorSubstitutions : void 0,\n        {\n          size: s,\n          sdf: o,\n          image: c\n        } = this._rasterizer.rasterizeImageResource(a, n, r, i);\n      return this._addItemToMosaic(t, s, {\n        type: \"static\",\n        data: c\n      }, $(e), o, !1);\n    }\n    let o, c, h;\n    \"animated\" === e.type ? (o = !1, c = {\n      playAnimation: e.playAnimation,\n      reverseAnimation: e.reverseAnimation,\n      randomizeStartTime: e.randomizeStartTime,\n      randomizeStartSeed: e.randomizeStartSeed,\n      startTimeOffset: e.startTimeOffset,\n      duration: e.duration,\n      repeatType: e.repeatType,\n      repeatDelay: e.repeatDelay\n    }, h = e.startGroup || 0) : (o = $(e), c = {}, h = 0);\n    const u = new T(r, this._requestRender, c, h);\n    return this._addItemToMosaic(t, [u.width, u.height], {\n      type: \"animated\",\n      data: u\n    }, o, !1, !1);\n  }\n  async _handleImage(e, t, i) {\n    const r = e.url;\n    if (A(r) || G(r)) return this._handleGIFOrPNG(e, t, i);\n    if (\"animated\" === e.type) return b(\"mapview-unexpected-resource\", \"Attempt to configure animations for a non-animated image.\"), null;\n    try {\n      let s;\n      const a = this.resourceManager.getResource(r);\n      if (null != a && a instanceof HTMLImageElement) s = a;else {\n        const {\n          data: e\n        } = await this._imageRequestQueue.push(r, {\n          ...i\n        });\n        s = e;\n      }\n      if (S(r)) if (\"width\" in e && \"height\" in e) s.width = c(e.width), s.height = c(e.height);else if (\"cim\" in e) {\n        const t = e;\n        s.width = c(t.width ?? t.scaleX * t.size), s.height = c(t.size);\n      }\n      if (!s.width || !s.height) return null;\n      const n = s.width,\n        o = s.height,\n        h = \"colorSubstitutions\" in e ? e.colorSubstitutions : void 0,\n        {\n          size: u,\n          sdf: l,\n          image: p\n        } = this._rasterizer.rasterizeImageResource(n, o, s, h);\n      return this._addItemToMosaic(t, u, {\n        type: \"static\",\n        data: p\n      }, $(e), l, !1);\n    } catch (b) {\n      if (!o(b)) throw new s(\"mapview-invalid-resource\", `Could not fetch requested resource at ${r}. ${b.message}`);\n      throw b;\n    }\n  }\n  _addItemToMosaic(e, t, i, s, r, a, n) {\n    return this._spriteMosaic.addSpriteItem(e, t, i, s, r, a, n);\n  }\n}\nfunction $(e) {\n  switch (e.type) {\n    case \"CIMVectorMarker\":\n    case \"CIMPictureMarker\":\n      return B(e);\n    default:\n      return !0;\n  }\n}\nconst k = e => null != e && e.startsWith(\"data:image/gif\"),\n  A = e => e && (e.includes(\".gif\") || k(e)),\n  F = e => null != e && e.startsWith(\"data:image/png\"),\n  G = e => e && (e.includes(\".png\") || F(e)),\n  B = e => e && \"markerPlacement\" in e && e.markerPlacement && \"CIMMarkerPlacementInsidePolygon\" === e.markerPlacement.type;\nexport { j as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { createResolver as e, throwIfAborted as t, onAbortOrThrow as s } from \"../../../../core/promiseUtils.js\";\nimport { textureUploadManagerBudget as o, textureUploadManagerChunkSize as u } from \"./definitions.js\";\nclass r {\n  constructor(e) {\n    this._queue = [], this._refreshable = e;\n  }\n  destroy() {\n    this._queue = [];\n  }\n  enqueueTextureUpdate(o, r) {\n    const n = e(),\n      h = o,\n      i = u,\n      a = Math.ceil(h.height / i);\n    t(r);\n    for (let e = 0; e < a; e++) {\n      const t = e * i,\n        s = e === a - 1,\n        u = s ? h.height - i * e : i;\n      this._queue.push({\n        type: \"chunk\",\n        request: o,\n        resolver: n,\n        chunk: e,\n        chunkOffset: t,\n        destHeight: u,\n        chunkIsLast: s,\n        options: r\n      });\n    }\n    return s(r, e => n.reject(e)), n.promise;\n  }\n  upload() {\n    let e = 0;\n    for (; this._queue.length;) {\n      const t = performance.now(),\n        s = this._queue.shift();\n      if (s) {\n        if (null != s.options.signal && s.options.signal.aborted) continue;\n        switch (s.type) {\n          case \"chunk\":\n            this._uploadChunk(s);\n            break;\n          case \"no-chunk\":\n            this._uploadNoChunk(s);\n        }\n        const u = performance.now() - t;\n        if (e += u, e + u >= o) break;\n      }\n    }\n    this._queue.length && this._refreshable.requestRender();\n  }\n  _uploadChunk(e) {\n    const {\n        request: t,\n        resolver: s,\n        chunkOffset: o,\n        chunkIsLast: u,\n        destHeight: r\n      } = e,\n      {\n        data: n,\n        texture: h,\n        width: i\n      } = t;\n    null != n && (h.updateData(0, 0, o, i, r, n, o), u && s.resolve());\n  }\n  _uploadNoChunk(e) {\n    const {\n        request: t,\n        resolver: s\n      } = e,\n      {\n        data: o,\n        texture: u\n      } = t;\n    u.setData(o), s.resolve();\n  }\n}\nexport { r as TextureUploadManager };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as t } from \"../../../../core/maybe.js\";\nimport { toRadian as i } from \"../../../../core/libs/gl-matrix-2/math/common.js\";\nimport { fromTranslation as e, scale as r, rotate as s, translate as o } from \"../../../../core/libs/gl-matrix-2/math/mat3.js\";\nimport { create as a } from \"../../../../core/libs/gl-matrix-2/factories/mat3f32.js\";\nimport { fromValues as n } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { s as l } from \"../../../../chunks/vec32.js\";\nimport { create as m } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport c from \"./VertexStream.js\";\nimport { stencil as h } from \"./shaders/StencilPrograms.js\";\nimport { CompareFunction as _, StencilOperation as d } from \"../../../webgl/enums.js\";\nimport { createProgram as p } from \"../../../webgl/ProgramTemplate.js\";\nconst f = n(-.5, -.5);\nclass u {\n  constructor() {\n    this._centerNdc = m(), this._pxToNdc = m(), this._worldDimensionsPx = m(), this._mat3 = a(), this._initialized = !1;\n  }\n  dispose() {\n    this._program = t(this._program), this._quad = t(this._quad);\n  }\n  render(t, i, e) {\n    const {\n        context: r\n      } = t,\n      s = this._updateGeometry(t, e);\n    if (null != i) {\n      const {\n        r: t,\n        g: e,\n        b: s,\n        a: o\n      } = i;\n      r.setClearColor(o * t / 255, o * e / 255, o * s / 255, o);\n    } else r.setClearColor(0, 0, 0, 0);\n    if (r.setStencilFunction(_.ALWAYS, 0, 255), r.setStencilWriteMask(255), !s) return r.setClearStencil(1), void r.clear(r.gl.STENCIL_BUFFER_BIT | r.gl.COLOR_BUFFER_BIT);\n    r.setClearStencil(0), r.clear(r.gl.STENCIL_BUFFER_BIT | r.gl.COLOR_BUFFER_BIT), this._initialized || this._initialize(r), r.setDepthWriteEnabled(!1), r.setDepthTestEnabled(!1), r.setColorMask(!1, !1, !1, !1), r.setBlendingEnabled(!1), r.setStencilOp(d.KEEP, d.KEEP, d.REPLACE), r.setStencilFunction(_.ALWAYS, 1, 255), r.setStencilTestEnabled(!0), r.useProgram(this._program), this._program.setUniformMatrix3fv(\"u_worldExtent\", this._mat3), this._quad.draw(), this._quad.unbind();\n  }\n  _initialize(t) {\n    if (this._initialized) return;\n    const i = p(t, h);\n    i && (this._program = i, this._quad = new c(t, [0, 0, 1, 0, 0, 1, 1, 1]), this._initialized = !0);\n  }\n  _updateGeometry(t, a) {\n    const {\n        state: n,\n        pixelRatio: m\n      } = t,\n      {\n        size: c,\n        rotation: h\n      } = n,\n      _ = Math.round(c[0] * m),\n      d = Math.round(c[1] * m);\n    if (!n.spatialReference.isWrappable) return !1;\n    const p = i(h),\n      u = Math.abs(Math.cos(p)),\n      g = Math.abs(Math.sin(p)),\n      b = Math.round(_ * u + d * g),\n      x = Math.round(m * n.worldScreenWidth);\n    if (b <= x) return !1;\n    const E = _ * g + d * u,\n      S = (a.left - a.right) * m / _,\n      C = (a.bottom - a.top) * m / d;\n    l(this._worldDimensionsPx, x, E, 1), l(this._pxToNdc, 2 / _, -2 / d, 1), l(this._centerNdc, S, C, 1);\n    const T = this._mat3;\n    return e(T, this._centerNdc), r(T, T, this._pxToNdc), 0 !== h && s(T, T, p), r(T, T, this._worldDimensionsPx), o(T, T, f), !0;\n  }\n}\nexport { u as WorldExtentRenderer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t {\n  constructor() {\n    this.name = this.constructor.name;\n  }\n  createOptions(t, r) {\n    return null;\n  }\n}\nexport { t as Effect };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from \"../../../../../core/has.js\";\nimport { AttributeDataType as e } from \"../definitions.js\";\nimport t from \"../VertexStream.js\";\nimport { Effect as r } from \"./Effect.js\";\nclass i extends r {\n  constructor() {\n    super(...arguments), this.defines = [], this._desc = {\n      vsPath: \"fx/integrate\",\n      fsPath: \"fx/integrate\",\n      attributes: new Map([[\"a_position\", 0]])\n    };\n  }\n  dispose() {\n    this._quad && this._quad.dispose();\n  }\n  bind() {}\n  unbind() {}\n  draw(r, i) {\n    if (!i?.size) return;\n    const {\n      context: n,\n      renderingOptions: o\n    } = r;\n    this._quad || (this._quad = new t(n, [0, 0, 1, 0, 0, 1, 1, 1]));\n    const a = n.getBoundFramebufferObject(),\n      {\n        x: s,\n        y: u,\n        width: m,\n        height: d\n      } = n.getViewport(),\n      f = i.getBlock(e.Animation);\n    if (null == f) return;\n    const l = i.getUniforms(n);\n    n.setViewport(0, 0, i.size, i.size);\n    const c = l.filterFlags,\n      x = l.animation,\n      p = has(\"featurelayer-animation-enabled\") ? o.labelsAnimationTime : 1,\n      _ = f.getFBO(n, 1);\n    n.unbindTexture(_.colorTexture), this._computeDelta(r, _, x, c, p);\n    const g = f.getFBO(n);\n    n.unbindTexture(g.colorTexture), this._updateAnimationState(r, _, g), n.bindFramebuffer(a), n.setViewport(s, u, m, d);\n  }\n  _computeDelta(e, t, r, i, n) {\n    const {\n        context: o,\n        painter: a,\n        displayLevel: s\n      } = e,\n      u = a.materialManager.getProgram(this._desc, [\"delta\"]);\n    if (o.bindFramebuffer(t), o.setColorMask(!0, !0, !0, !0), o.setClearColor(0, 0, 0, 0), o.clear(o.gl.COLOR_BUFFER_BIT), o.useProgram(u), !(\"type\" in i.texture) || !(\"type\" in r.texture)) throw new Error(\"InternalError: Expected to find texture\");\n    o.bindTexture(i.texture, i.unit), o.bindTexture(r.texture, r.unit), u.setUniform1i(\"u_maskTexture\", i.unit), u.setUniform1i(\"u_sourceTexture\", r.unit), u.setUniform1f(\"u_timeDelta\", e.deltaTime), u.setUniform1f(\"u_animationTime\", n), u.setUniform1f(\"u_zoomLevel\", Math.round(10 * s)), this._quad.draw();\n  }\n  _updateAnimationState(e, t, r) {\n    const {\n        context: i,\n        painter: n\n      } = e,\n      o = n.materialManager.getProgram(this._desc, [\"update\"]);\n    i.bindTexture(t.colorTexture, 1), i.useProgram(o), o.setUniform1i(\"u_sourceTexture\", 1), i.bindFramebuffer(r), i.setColorMask(!0, !0, !0, !0), i.setClearColor(0, 0, 0, 0), i.clear(i.gl.COLOR_BUFFER_BIT), this._quad.draw();\n  }\n}\nexport { i as AnimationEffect };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { resolveIncludes as e } from \"./sources/resolver.js\";\nconst r = e => e.replace(\"-\", \"_\").toUpperCase(),\n  t = e => `#define ${r(e)}\\n`;\nfunction n(r) {\n  return {\n    attributes: new Map([[\"a_pos\", 0], [\"a_tex\", 1]]),\n    shaders: {\n      vertexShader: t(r) + e(\"blend/blend.vert\"),\n      fragmentShader: t(r) + e(\"blend/blend.frag\")\n    }\n  };\n}\nexport { n as createProgramTemplate };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Error.js\";\nimport r from \"../../../../../core/Logger.js\";\nimport { disposeMaybe as t } from \"../../../../../core/maybe.js\";\nimport { WGLDrawPhase as s } from \"../enums.js\";\nimport i from \"../VertexStream.js\";\nimport { createProgramTemplate as n } from \"../shaders/BlendPrograms.js\";\nimport { BlendFactor as o, PixelFormat as a, TextureWrapMode as d } from \"../../../../webgl/enums.js\";\nimport { Texture as u } from \"../../../../webgl/Texture.js\";\nimport { TextureDescriptor as f } from \"../../../../webgl/TextureDescriptor.js\";\nconst c = () => r.getLogger(\"esri.views.2d.engine.webgl.effects.blendEffects.BlendEffect\");\nclass m {\n  constructor() {\n    this._size = [0, 0];\n  }\n  dispose(e) {\n    this._backBufferTexture = t(this._backBufferTexture), this._quad = t(this._quad);\n  }\n  draw(r, t, i, a, d) {\n    const {\n      context: u,\n      drawPhase: f\n    } = r;\n    if (this._setupShader(u), a && \"normal\" !== a && f !== s.LABEL) return void this._drawBlended(r, t, i, a, d);\n    const m = n(\"normal\"),\n      h = u.programCache.acquire(m.shaders.vertexShader, m.shaders.fragmentShader, m.attributes);\n    if (!h) return void c().error(new e(\"mapview-BlendEffect\", 'Error creating shader program for blend mode \"normal\"'));\n    u.useProgram(h), t.setSamplingMode(i), u.bindTexture(t, 0), h.setUniform1i(\"u_layerTexture\", 0), h.setUniform1f(\"u_opacity\", d), u.setBlendingEnabled(!0), u.setBlendFunction(o.ONE, o.ONE_MINUS_SRC_ALPHA);\n    const l = this._quad;\n    l.draw(), l.unbind(), h.dispose();\n  }\n  _drawBlended(r, t, s, i, a) {\n    const {\n        context: d,\n        state: u,\n        pixelRatio: f,\n        inFadeTransition: m\n      } = r,\n      {\n        size: h\n      } = u,\n      l = d.getBoundFramebufferObject();\n    let _, p;\n    null != l ? (_ = l.width, p = l.height) : (_ = Math.round(f * h[0]), p = Math.round(f * h[1])), this._createOrResizeTexture(r, _, p);\n    const b = this._backBufferTexture;\n    l.copyToTexture(0, 0, _, p, 0, 0, b), d.setStencilTestEnabled(!1), d.setStencilWriteMask(0), d.setBlendingEnabled(!0), d.setDepthTestEnabled(!1), d.setDepthWriteEnabled(!1);\n    const g = n(i),\n      x = d.programCache.acquire(g.shaders.vertexShader, g.shaders.fragmentShader, g.attributes);\n    if (!x) return void c().error(new e(\"mapview-BlendEffect\", `Error creating shader program for blend mode ${i}`));\n    d.useProgram(x), b.setSamplingMode(s), d.bindTexture(b, 0), x.setUniform1i(\"u_backbufferTexture\", 0), t.setSamplingMode(s), d.bindTexture(t, 1), x.setUniform1i(\"u_layerTexture\", 1), x.setUniform1f(\"u_opacity\", a), x.setUniform1f(\"u_inFadeOpacity\", m ? 1 : 0), d.setBlendFunction(o.ONE, o.ZERO);\n    const T = this._quad;\n    T.draw(), T.unbind(), x.dispose(), d.setBlendFunction(o.ONE, o.ONE_MINUS_SRC_ALPHA);\n  }\n  _setupShader(e) {\n    this._quad || (this._quad = new i(e, [-1, -1, 1, -1, -1, 1, 1, 1]));\n  }\n  _createOrResizeTexture(e, r, t) {\n    const {\n      context: s\n    } = e;\n    if (null === this._backBufferTexture || r !== this._size[0] || t !== this._size[1]) {\n      if (this._backBufferTexture) this._backBufferTexture.resize(r, t);else {\n        const e = new f();\n        e.internalFormat = a.RGBA, e.wrapMode = d.CLAMP_TO_EDGE, e.width = r, e.height = t, this._backBufferTexture = new u(s, e);\n      }\n      this._size[0] = r, this._size[1] = t;\n    }\n  }\n}\nexport { m as BlendEffect };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { Effect as e } from \"./Effect.js\";\nimport { TextureSamplingMode as t } from \"../../../../webgl/enums.js\";\nclass s extends e {\n  constructor(e) {\n    super(), this.name = this.constructor.name, this.defines = [e];\n  }\n  dispose() {}\n  bind({\n    context: e,\n    painter: t\n  }) {\n    this._prev = e.getBoundFramebufferObject();\n    const s = t.getFbos().effect0;\n    e.bindFramebuffer(s), e.setColorMask(!0, !0, !0, !0), e.setClearColor(0, 0, 0, 0), e.clear(e.gl.COLOR_BUFFER_BIT);\n  }\n  unbind() {}\n  draw(e, s) {\n    const {\n        context: r,\n        painter: o\n      } = e,\n      n = o.getPostProcessingEffects(s),\n      c = r.getBoundFramebufferObject();\n    for (const {\n      postProcessingEffect: t,\n      effect: f\n    } of n) t.draw(e, c, f);\n    r.bindFramebuffer(this._prev), r.setStencilTestEnabled(!1), o.blitTexture(r, c.colorTexture, t.NEAREST), r.setStencilTestEnabled(!0);\n  }\n}\nexport { s as FeatureEffect };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { textureBindingHighlight0 as r, textureBindingHighlight1 as e } from \"../../definitions.js\";\nimport { alphaToRgbaChannelSelectorMatrix as s, rgbaToRgbaChannelSelectorMatrix as i, sigma as t } from \"./parameters.js\";\nimport { highlight as o, blur as u } from \"../../shaders/HighlightPrograms.js\";\nimport { BufferObject as h } from \"../../../../../webgl/BufferObject.js\";\nimport { PrimitiveType as a, BlendFactor as m, Usage as n, DataType as _ } from \"../../../../../webgl/enums.js\";\nimport { createProgram as g } from \"../../../../../webgl/ProgramTemplate.js\";\nimport { VertexArrayObject as d } from \"../../../../../webgl/VertexArrayObject.js\";\nimport { VertexElementDescriptor as l } from \"../../../../../webgl/VertexElementDescriptor.js\";\nclass c {\n  constructor() {\n    this._width = void 0, this._height = void 0, this._resources = null;\n  }\n  dispose() {\n    this._resources && (this._resources.quadGeometry.dispose(), this._resources.quadVAO.dispose(), this._resources.highlightProgram.dispose(), this._resources.blurProgram.dispose(), this._resources = null);\n  }\n  preBlur(e, i) {\n    e.bindTexture(i, r), e.useProgram(this._resources.blurProgram), this._resources.blurProgram.setUniform4fv(\"u_direction\", [1, 0, 1 / this._width, 0]), this._resources.blurProgram.setUniformMatrix4fv(\"u_channelSelector\", s), e.bindVAO(this._resources.quadVAO), e.drawArrays(a.TRIANGLE_STRIP, 0, 4), e.bindVAO();\n  }\n  finalBlur(e, s) {\n    e.bindTexture(s, r), e.useProgram(this._resources.blurProgram), this._resources.blurProgram.setUniform4fv(\"u_direction\", [0, 1, 0, 1 / this._height]), this._resources.blurProgram.setUniformMatrix4fv(\"u_channelSelector\", i), e.bindVAO(this._resources.quadVAO), e.drawArrays(a.TRIANGLE_STRIP, 0, 4), e.bindVAO();\n  }\n  renderHighlight(e, s, i) {\n    e.bindTexture(s, r), e.useProgram(this._resources.highlightProgram), i.applyHighlightOptions(e, this._resources.highlightProgram), e.bindVAO(this._resources.quadVAO), e.setBlendingEnabled(!0), e.setBlendFunction(m.ONE, m.ONE_MINUS_SRC_ALPHA), e.drawArrays(a.TRIANGLE_STRIP, 0, 4), e.bindVAO();\n  }\n  _initialize(s, i, a) {\n    this._width = i, this._height = a;\n    const m = h.createVertex(s, n.STATIC_DRAW, new Int8Array([-1, -1, 0, 0, 1, -1, 1, 0, -1, 1, 0, 1, 1, 1, 1, 1]).buffer),\n      c = new d(s, new Map([[\"a_position\", 0], [\"a_texcoord\", 1]]), {\n        geometry: [new l(\"a_position\", 2, _.BYTE, 0, 4), new l(\"a_texcoord\", 2, _.UNSIGNED_BYTE, 2, 4)]\n      }, {\n        geometry: m\n      }),\n      f = g(s, o),\n      b = g(s, u);\n    s.useProgram(f), f.setUniform1i(\"u_texture\", r), f.setUniform1i(\"u_shade\", e), f.setUniform1f(\"u_sigma\", t), s.useProgram(b), b.setUniform1i(\"u_texture\", r), b.setUniform1f(\"u_sigma\", t), this._resources = {\n      quadGeometry: m,\n      quadVAO: c,\n      highlightProgram: f,\n      blurProgram: b\n    };\n  }\n  setup(r, e, s) {\n    this._resources ? (this._width = e, this._height = s) : this._initialize(r, e, s);\n  }\n}\nexport { c as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { TextureWrapMode as r, RenderbufferFormat as e } from \"../../../../../webgl/enums.js\";\nimport { FramebufferObject as s } from \"../../../../../webgl/FramebufferObject.js\";\nimport { RenderbufferDescriptor as t } from \"../../../../../webgl/RenderbufferDescriptor.js\";\nimport { TextureDescriptor as o } from \"../../../../../webgl/TextureDescriptor.js\";\nfunction i(i, h, u) {\n  const l = new o(h, u);\n  return l.wrapMode = r.CLAMP_TO_EDGE, new s(i, l, new t(e.STENCIL_INDEX8, h, u));\n}\nclass h {\n  constructor() {\n    this._width = void 0, this._height = void 0, this._resources = null;\n  }\n  dispose() {\n    this._resources && (this._resources.sharedBlur1Fbo.dispose(), this._resources.sharedBlur2Fbo.dispose(), this._resources = null);\n  }\n  _initialize(r, e, s) {\n    this._width = e, this._height = s;\n    const t = i(r, e, s),\n      o = i(r, e, s);\n    this._resources = {\n      sharedBlur1Fbo: t,\n      sharedBlur2Fbo: o\n    };\n  }\n  setup(r, e, s) {\n    !this._resources || this._width === e && this._height === s || this.dispose(), this._resources || this._initialize(r, e, s);\n  }\n  get sharedBlur1Tex() {\n    return this._resources.sharedBlur1Fbo.colorTexture;\n  }\n  get sharedBlur1Fbo() {\n    return this._resources.sharedBlur1Fbo;\n  }\n  get sharedBlur2Tex() {\n    return this._resources.sharedBlur2Fbo.colorTexture;\n  }\n  get sharedBlur2Fbo() {\n    return this._resources.sharedBlur2Fbo;\n  }\n}\nexport { h as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../../core/has.js\";\nimport { BitBlitRenderer as e } from \"../BitBlitRenderer.js\";\nimport { Effect as t } from \"./Effect.js\";\nimport s from \"./highlight/HighlightRenderer.js\";\nimport r from \"./highlight/HighlightSurfaces.js\";\nimport { TextureSamplingMode as i } from \"../../../../webgl/enums.js\";\nconst h = 4,\n  d = 4 / h;\nclass l extends t {\n  constructor() {\n    super(...arguments), this.defines = [\"highlight\"], this._hlRenderer = new s(), this._width = void 0, this._height = void 0, this._boundFBO = null, this._hlSurfaces = new r(), this._adjustedWidth = void 0, this._adjustedHeight = void 0, this._blitRenderer = new e();\n  }\n  dispose() {\n    this._hlSurfaces?.dispose(), this._hlRenderer?.dispose(), this._boundFBO = null;\n  }\n  bind(e) {\n    const {\n        context: t,\n        painter: s\n      } = e,\n      {\n        width: r,\n        height: i\n      } = t.getViewport(),\n      h = s.getFbos().effect0;\n    this.setup(e, r, i), t.bindFramebuffer(h), t.setColorMask(!0, !0, !0, !0), t.setClearColor(0, 0, 0, 0), t.clear(t.gl.COLOR_BUFFER_BIT);\n  }\n  unbind() {}\n  setup({\n    context: e\n  }, t, s) {\n    this._width = t, this._height = s;\n    const r = t % h,\n      i = s % h;\n    t += r < h / 2 ? -r : h - r, s += i < h / 2 ? -i : h - i, this._adjustedWidth = t, this._adjustedHeight = s, this._boundFBO = e.getBoundFramebufferObject();\n    const l = Math.round(t * d),\n      o = Math.round(s * d);\n    this._hlRenderer.setup(e, l, o), this._hlSurfaces.setup(e, l, o);\n  }\n  draw(e) {\n    const {\n        context: t,\n        passOptions: s\n      } = e,\n      r = s.activeGradient,\n      h = t.getBoundFramebufferObject();\n    t.setViewport(0, 0, this._adjustedWidth * d, this._adjustedHeight * d), t.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo), t.setStencilTestEnabled(!1), t.setClearColor(0, 0, 0, 0), t.clear(t.gl.COLOR_BUFFER_BIT), this._blitRenderer.render(t, h.colorTexture, i.NEAREST, 1), t.setStencilTestEnabled(!1), t.setBlendingEnabled(!1), t.setColorMask(!1, !1, !1, !0), t.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo), t.setClearColor(0, 0, 0, 0), t.clear(t.gl.COLOR_BUFFER_BIT), this._hlRenderer.preBlur(t, this._hlSurfaces.sharedBlur1Tex), t.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo), t.setClearColor(0, 0, 0, 0), t.clear(t.gl.COLOR_BUFFER_BIT), this._hlRenderer.finalBlur(t, this._hlSurfaces.sharedBlur2Tex), t.bindFramebuffer(this._boundFBO), t.setBlendingEnabled(!0), t.setColorMask(!0, !0, !0, !0), t.setViewport(0, 0, this._width, this._height), this._hlRenderer.renderHighlight(t, this._hlSurfaces.sharedBlur1Tex, r), this._boundFBO = null;\n  }\n}\nexport { l as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from \"../../../../../core/has.js\";\nimport { AttributeDataType as t, hittestToleranceMobile as e, hittestToleranceDesktop as s, hittestToleranceSmallSymbol as i, hittestSmallSymbolThreshold as o } from \"../definitions.js\";\nimport { Effect as r } from \"./Effect.js\";\nimport { PixelFormat as n, PixelType as l } from \"../../../../webgl/enums.js\";\nclass c extends r {\n  constructor() {\n    super(...arguments), this.name = this.constructor.name, this.defines = [\"hittest\"];\n  }\n  dispose() {\n    null != this._fbo && this._fbo.dispose();\n  }\n  createOptions({\n    pixelRatio: t\n  }, r) {\n    if (!r.length) return null;\n    const n = r.shift(),\n      l = n.x,\n      c = n.y;\n    this._outstanding = n;\n    const a = has(\"esri-mobile\");\n    return {\n      type: \"hittest\",\n      distance: (a ? e : s) * t,\n      smallSymbolDistance: (a ? e : i) * t,\n      smallSymbolSizeThreshold: o,\n      position: [l, c]\n    };\n  }\n  bind(e) {\n    const {\n      context: s,\n      attributeView: i\n    } = e;\n    if (!i.size) return;\n    const o = i.getBlock(t.GPGPU);\n    if (null == o) return;\n    const r = o.getFBO(s);\n    s.setViewport(0, 0, i.size, i.size), s.bindFramebuffer(r), s.setColorMask(!0, !0, !0, !0), s.setClearColor(0, 0, 0, 0), s.clear(s.gl.COLOR_BUFFER_BIT | s.gl.DEPTH_BUFFER_BIT);\n  }\n  unbind() {}\n  draw(t) {\n    if (null == this._outstanding) return;\n    const e = this._outstanding;\n    this._outstanding = null, this._resolve(t, e.resolvers);\n  }\n  async _resolve(e, s) {\n    const {\n        context: i,\n        attributeView: o\n      } = e,\n      r = o.getBlock(t.GPGPU);\n    if (null == r) return void s.forEach(t => t.resolve([]));\n    const c = r.getFBO(i),\n      a = new Uint8Array(c.width * c.height * 4);\n    try {\n      await c.readPixelsAsync(0, 0, c.width, c.height, n.RGBA, l.UNSIGNED_BYTE, a);\n    } catch (u) {\n      return void s.forEach(t => t.resolve([]));\n    }\n    const h = [];\n    for (let t = 0; t < a.length; t += 4) {\n      const e = t / 4;\n      a[t] && h.push(e);\n    }\n    s.forEach(t => t.resolve(h));\n  }\n}\nexport { c as HittestEffect };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as t } from \"../../../../../../core/maybe.js\";\nimport e from \"../../VertexStream.js\";\nimport { BlendFactor as s, PixelFormat as i, TextureWrapMode as r } from \"../../../../../webgl/enums.js\";\nimport { FramebufferObject as o } from \"../../../../../webgl/FramebufferObject.js\";\nimport { TextureDescriptor as n } from \"../../../../../webgl/TextureDescriptor.js\";\nconst a = 5,\n  u = [1, 0],\n  l = [0, 1],\n  m = [1, .8, .6, .4, .2],\n  _ = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\nclass h {\n  constructor() {\n    this._intensityFBO = null, this._compositeFBO = null, this._mipsFBOs = new Array(a), this._nMips = a, this._kernelSizeArray = [3, 5, 7, 9, 11], this._size = [0, 0], this._programDesc = {\n      luminosityHighPass: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/bloom/luminosityHighPass\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      gaussianBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/bloom/gaussianBlur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      composite: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/bloom/composite\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      blit: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blit\",\n        attributes: new Map([[\"a_position\", 0]])\n      }\n    };\n  }\n  dispose() {\n    if (this._quad = t(this._quad), this._intensityFBO = t(this._intensityFBO), this._compositeFBO = t(this._compositeFBO), this._mipsFBOs) {\n      for (let t = 0; t < this._nMips; t++) this._mipsFBOs[t] && (this._mipsFBOs[t].horizontal.dispose(), this._mipsFBOs[t].vertical.dispose());\n      this._mipsFBOs = null;\n    }\n  }\n  draw(t, i, r) {\n    const {\n        width: o,\n        height: n\n      } = i,\n      {\n        context: h,\n        painter: p\n      } = t,\n      {\n        materialManager: c\n      } = p,\n      d = h.gl,\n      f = this._programDesc,\n      {\n        strength: b,\n        radius: F,\n        threshold: O\n      } = r;\n    this._quad || (this._quad = new e(h, [-1, -1, 1, -1, -1, 1, 1, 1])), this._createOrResizeResources(t, o, n), h.setStencilTestEnabled(!1), h.setBlendingEnabled(!0), h.setBlendFunction(s.ONE, s.ONE_MINUS_SRC_ALPHA), h.setStencilWriteMask(0);\n    const B = this._quad;\n    B.bind(), h.bindFramebuffer(this._intensityFBO);\n    const g = c.getProgram(f.luminosityHighPass);\n    h.useProgram(g), h.bindTexture(i.colorTexture, 0), g.setUniform1i(\"u_texture\", 0), g.setUniform3fv(\"u_defaultColor\", [0, 0, 0]), g.setUniform1f(\"u_defaultOpacity\", 0), g.setUniform1f(\"u_luminosityThreshold\", O), g.setUniform1f(\"u_smoothWidth\", .01);\n    const T = [Math.round(o / 2), Math.round(n / 2)];\n    h.setViewport(0, 0, T[0], T[1]), h.setClearColor(0, 0, 0, 0), h.clear(d.COLOR_BUFFER_BIT), B.draw(), h.setBlendingEnabled(!1);\n    let x = this._intensityFBO.colorTexture;\n    for (let e = 0; e < this._nMips; e++) {\n      const t = c.getProgram(f.gaussianBlur, [{\n        name: \"radius\",\n        value: this._kernelSizeArray[e]\n      }]);\n      h.useProgram(t), h.bindTexture(x, e + 1), t.setUniform1i(\"u_colorTexture\", e + 1), t.setUniform2fv(\"u_texSize\", T), t.setUniform2fv(\"u_direction\", u), h.setViewport(0, 0, T[0], T[1]);\n      const s = this._mipsFBOs[e];\n      h.bindFramebuffer(s.horizontal), B.draw(), x = s.horizontal.colorTexture, h.bindFramebuffer(s.vertical), h.bindTexture(x, e + 1), t.setUniform2fv(\"u_direction\", l), B.draw(), x = s.vertical.colorTexture, T[0] = Math.round(T[0] / 2), T[1] = Math.round(T[1] / 2);\n    }\n    h.setViewport(0, 0, o, n);\n    const w = c.getProgram(f.composite, [{\n      name: \"nummips\",\n      value: a\n    }]);\n    h.bindFramebuffer(this._compositeFBO), h.useProgram(w), w.setUniform1f(\"u_bloomStrength\", b), w.setUniform1f(\"u_bloomRadius\", F), w.setUniform1fv(\"u_bloomFactors\", m), w.setUniform3fv(\"u_bloomTintColors\", _), h.bindTexture(this._mipsFBOs[0].vertical.colorTexture, 1), w.setUniform1i(\"u_blurTexture1\", 1), h.bindTexture(this._mipsFBOs[1].vertical.colorTexture, 2), w.setUniform1i(\"u_blurTexture2\", 2), h.bindTexture(this._mipsFBOs[2].vertical.colorTexture, 3), w.setUniform1i(\"u_blurTexture3\", 3), h.bindTexture(this._mipsFBOs[3].vertical.colorTexture, 4), w.setUniform1i(\"u_blurTexture4\", 4), h.bindTexture(this._mipsFBOs[4].vertical.colorTexture, 5), w.setUniform1i(\"u_blurTexture5\", 5), B.draw(), h.bindFramebuffer(i), h.setBlendingEnabled(!0);\n    const M = c.getProgram(f.blit);\n    h.useProgram(M), h.bindTexture(this._compositeFBO.colorTexture, 6), M.setUniform1i(\"u_texture\", 6), h.setBlendFunction(s.ONE, s.ONE), B.draw(), B.unbind(), h.setBlendFunction(s.ONE, s.ONE_MINUS_SRC_ALPHA), h.setStencilTestEnabled(!0);\n  }\n  _createOrResizeResources(t, e, s) {\n    const {\n      context: a\n    } = t;\n    if (this._compositeFBO && this._size[0] === e && this._size[1] === s) return;\n    this._size[0] = e, this._size[1] = s;\n    const u = [Math.round(e / 2), Math.round(s / 2)];\n    if (this._compositeFBO) this._compositeFBO.resize(e, s);else {\n      const t = new n(e, s);\n      t.internalFormat = i.RGBA, t.wrapMode = r.CLAMP_TO_EDGE, this._compositeFBO = new o(a, t);\n    }\n    if (this._intensityFBO) this._intensityFBO.resize(u[0], u[1]);else {\n      const t = new n(u[0], u[1]);\n      t.internalFormat = i.RGBA, t.wrapMode = r.CLAMP_TO_EDGE, this._intensityFBO = new o(a, t);\n    }\n    for (let l = 0; l < this._nMips; l++) {\n      if (this._mipsFBOs[l]) this._mipsFBOs[l].horizontal.resize(u[0], u[1]), this._mipsFBOs[l].vertical.resize(u[0], u[1]);else {\n        const t = new n(u[0], u[1]);\n        t.internalFormat = i.RGBA, t.wrapMode = r.CLAMP_TO_EDGE, this._mipsFBOs[l] = {\n          horizontal: new o(a, t),\n          vertical: new o(a, t)\n        };\n      }\n      u[0] = Math.round(u[0] / 2), u[1] = Math.round(u[1] / 2);\n    }\n  }\n}\nexport { h as Bloom };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../VertexStream.js\";\nimport { BlendFactor as t, PixelFormat as s, TextureWrapMode as r } from \"../../../../../webgl/enums.js\";\nimport { FramebufferObject as i } from \"../../../../../webgl/FramebufferObject.js\";\nimport { TextureDescriptor as a } from \"../../../../../webgl/TextureDescriptor.js\";\nconst n = [1, 0],\n  o = [0, 1];\nclass u {\n  constructor() {\n    this._blurFBO = null, this._size = [0, 0], this._programDesc = {\n      gaussianBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/gaussianBlur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      radialBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/radial-blur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      blit: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blit\",\n        attributes: new Map([[\"a_position\", 0]])\n      }\n    };\n  }\n  dispose() {\n    this._blurFBO && (this._blurFBO.dispose(), this._blurFBO = null);\n  }\n  draw(t, s, r) {\n    const {\n        context: i\n      } = t,\n      {\n        type: a,\n        radius: n\n      } = r;\n    if (0 === n) return;\n    this._createOrResizeResources(t), this._quad || (this._quad = new e(i, [-1, -1, 1, -1, -1, 1, 1, 1]));\n    const o = this._quad;\n    o.bind(), \"blur\" === a ? this._gaussianBlur(t, s, n) : this._radialBlur(t, s), o.unbind();\n  }\n  _gaussianBlur(e, s, r) {\n    const {\n        context: i,\n        state: a,\n        painter: u,\n        pixelRatio: l\n      } = e,\n      {\n        size: d\n      } = a,\n      {\n        materialManager: b\n      } = u,\n      c = this._programDesc,\n      _ = this._quad,\n      p = [Math.round(l * d[0]), Math.round(l * d[1])],\n      h = this._blurFBO,\n      m = b.getProgram(c.gaussianBlur, [{\n        name: \"radius\",\n        value: Math.ceil(r)\n      }]);\n    i.useProgram(m), i.setBlendingEnabled(!1), i.bindFramebuffer(h), i.bindTexture(s.colorTexture, 4), m.setUniform1i(\"u_colorTexture\", 4), m.setUniform2fv(\"u_texSize\", p), m.setUniform2fv(\"u_direction\", n), m.setUniform1f(\"u_sigma\", r), _.draw(), i.bindFramebuffer(s), i.setStencilWriteMask(0), i.setStencilTestEnabled(!1), i.setDepthWriteEnabled(!1), i.setDepthTestEnabled(!1), i.bindTexture(h?.colorTexture, 5), m.setUniform1i(\"u_colorTexture\", 5), m.setUniform2fv(\"u_direction\", o), _.draw(), i.setBlendingEnabled(!0), i.setBlendFunction(t.ONE, t.ONE_MINUS_SRC_ALPHA), i.setStencilTestEnabled(!0);\n  }\n  _radialBlur(e, s) {\n    const {\n        context: r,\n        painter: i\n      } = e,\n      {\n        materialManager: a\n      } = i,\n      n = this._programDesc,\n      o = this._quad,\n      u = this._blurFBO;\n    r.bindFramebuffer(u);\n    const l = a.getProgram(n.radialBlur);\n    r.useProgram(l), r.setBlendingEnabled(!1), r.bindTexture(s.colorTexture, 4), l.setUniform1i(\"u_colorTexture\", 4), o.draw(), r.bindFramebuffer(s), r.setStencilWriteMask(0), r.setStencilTestEnabled(!1), r.setDepthWriteEnabled(!1), r.setDepthTestEnabled(!1), r.setBlendingEnabled(!0);\n    const d = a.getProgram(n.blit);\n    r.useProgram(d), r.bindTexture(u?.colorTexture, 5), d.setUniform1i(\"u_texture\", 5), r.setBlendFunction(t.ONE, t.ONE_MINUS_SRC_ALPHA), o.draw();\n  }\n  _createOrResizeResources(e) {\n    const {\n        context: t,\n        state: n,\n        pixelRatio: o\n      } = e,\n      {\n        size: u\n      } = n,\n      l = Math.round(o * u[0]),\n      d = Math.round(o * u[1]);\n    if (!this._blurFBO || this._size[0] !== l || this._size[1] !== d) if (this._size[0] = l, this._size[1] = d, this._blurFBO) this._blurFBO.resize(l, d);else {\n      const e = new a(l, d);\n      e.internalFormat = s.RGBA, e.wrapMode = r.CLAMP_TO_EDGE, this._blurFBO = new i(t, e);\n    }\n  }\n}\nexport { u as Blur };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as e } from \"../../../../../../core/maybe.js\";\nimport t from \"../../VertexStream.js\";\nimport { BlendFactor as r, PixelFormat as s, TextureWrapMode as i } from \"../../../../../webgl/enums.js\";\nimport { Texture as o } from \"../../../../../webgl/Texture.js\";\nimport { TextureDescriptor as a } from \"../../../../../webgl/TextureDescriptor.js\";\nclass n {\n  constructor() {\n    this._layerFBOTexture = null, this._size = [0, 0], this._programDesc = {\n      vsPath: \"post-processing/pp\",\n      fsPath: \"post-processing/filterEffect\",\n      attributes: new Map([[\"a_position\", 0]])\n    };\n  }\n  dispose() {\n    this._layerFBOTexture = e(this._layerFBOTexture);\n  }\n  draw(e, t, s) {\n    const {\n      width: i,\n      height: o\n    } = t;\n    this._createOrResizeResources(e, i, o);\n    const {\n        context: a,\n        painter: n\n      } = e,\n      {\n        materialManager: c\n      } = n,\n      l = this._programDesc,\n      u = this._quad,\n      _ = s.colorMatrix;\n    u.bind();\n    const h = this._layerFBOTexture;\n    a.bindFramebuffer(t), t.copyToTexture(0, 0, i, o, 0, 0, h), a.setBlendingEnabled(!1), a.setStencilTestEnabled(!1);\n    const m = c.getProgram(l);\n    a.useProgram(m), a.bindTexture(h, 2), m.setUniformMatrix4fv(\"u_coefficients\", _), m.setUniform1i(\"u_colorTexture\", 2), u.draw(), a.setBlendingEnabled(!0), a.setBlendFunction(r.ONE, r.ONE_MINUS_SRC_ALPHA), a.setStencilTestEnabled(!0), u.unbind();\n  }\n  _createOrResizeResources(e, r, n) {\n    const {\n      context: c\n    } = e;\n    if (!this._layerFBOTexture || this._size[0] !== r || this._size[1] !== n) {\n      if (this._size[0] = r, this._size[1] = n, this._layerFBOTexture) this._layerFBOTexture.resize(r, n);else {\n        const e = new a();\n        e.internalFormat = s.RGBA, e.wrapMode = i.CLAMP_TO_EDGE, e.width = r, e.height = n, this._layerFBOTexture = new o(c, e);\n      }\n      this._quad || (this._quad = new t(c, [-1, -1, 1, -1, -1, 1, 1, 1]));\n    }\n  }\n}\nexport { n as Colorize };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as e } from \"../../../../../../core/maybe.js\";\nimport { pt2px as t } from \"../../../../../../core/screenUtils.js\";\nimport r from \"../../VertexStream.js\";\nimport { BlendFactor as s, PixelFormat as i, TextureWrapMode as o } from \"../../../../../webgl/enums.js\";\nimport { FramebufferObject as a } from \"../../../../../webgl/FramebufferObject.js\";\nimport { Texture as n } from \"../../../../../webgl/Texture.js\";\nimport { TextureDescriptor as l } from \"../../../../../webgl/TextureDescriptor.js\";\nconst u = [1, 0],\n  h = [0, 1];\nclass _ {\n  constructor() {\n    this._layerFBOTexture = null, this._horizontalBlurFBO = null, this._verticalBlurFBO = null, this._size = [0, 0], this._quad = null, this._programDesc = {\n      blur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/gaussianBlur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      composite: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/drop-shadow/composite\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      blit: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blit\",\n        attributes: new Map([[\"a_position\", 0]])\n      }\n    };\n  }\n  dispose() {\n    this._layerFBOTexture = e(this._layerFBOTexture), this._horizontalBlurFBO = e(this._horizontalBlurFBO), this._verticalBlurFBO = e(this._verticalBlurFBO);\n  }\n  draw(e, i, o) {\n    const {\n        context: a,\n        state: n,\n        painter: l\n      } = e,\n      {\n        materialManager: _\n      } = l,\n      c = this._programDesc,\n      p = i.width,\n      m = i.height,\n      f = [Math.round(p), Math.round(m)],\n      {\n        blurRadius: B,\n        offsetX: d,\n        offsetY: b,\n        color: O\n      } = o,\n      F = [t(d), t(b)];\n    this._createOrResizeResources(e, p, m, f);\n    const w = this._horizontalBlurFBO,\n      T = this._verticalBlurFBO;\n    a.setStencilWriteMask(0), a.setStencilTestEnabled(!1), a.setDepthWriteEnabled(!1), a.setDepthTestEnabled(!1);\n    const x = this._layerFBOTexture;\n    i.copyToTexture(0, 0, p, m, 0, 0, x), this._quad || (this._quad = new r(a, [-1, -1, 1, -1, -1, 1, 1, 1])), a.setViewport(0, 0, f[0], f[1]);\n    const g = this._quad;\n    g.bind(), a.setBlendingEnabled(!1);\n    const z = _.getProgram(c.blur, [{\n      name: \"radius\",\n      value: Math.ceil(B)\n    }]);\n    a.useProgram(z), a.bindFramebuffer(w), a.bindTexture(i.colorTexture, 4), z.setUniform1i(\"u_colorTexture\", 4), z.setUniform2fv(\"u_texSize\", f), z.setUniform2fv(\"u_direction\", u), z.setUniform1f(\"u_sigma\", B), g.draw(), a.bindFramebuffer(T), a.bindTexture(w?.colorTexture, 5), z.setUniform1i(\"u_colorTexture\", 5), z.setUniform2fv(\"u_direction\", h), g.draw(), a.bindFramebuffer(i), a.setViewport(0, 0, p, m);\n    const M = _.getProgram(c.composite);\n    a.useProgram(M), a.bindTexture(T?.colorTexture, 2), M.setUniform1i(\"u_blurTexture\", 2), a.bindTexture(x, 3), M.setUniform1i(\"u_layerFBOTexture\", 3), M.setUniform4fv(\"u_shadowColor\", [O[3] * (O[0] / 255), O[3] * (O[1] / 255), O[3] * (O[2] / 255), O[3]]), M.setUniformMatrix3fv(\"u_displayViewMat3\", n.displayMat3), M.setUniform2fv(\"u_shadowOffset\", F), g.draw(), a.setBlendingEnabled(!0), a.setStencilTestEnabled(!0), a.setBlendFunction(s.ONE, s.ONE_MINUS_SRC_ALPHA), g.unbind();\n  }\n  _createOrResizeResources(e, t, r, s) {\n    const {\n      context: u\n    } = e;\n    if (!this._horizontalBlurFBO || this._size[0] !== t || this._size[1] !== r) {\n      if (this._size[0] = t, this._size[1] = r, this._horizontalBlurFBO) this._horizontalBlurFBO.resize(s[0], s[1]);else {\n        const e = new l(s[0], s[1]);\n        e.internalFormat = i.RGBA, e.wrapMode = o.CLAMP_TO_EDGE, this._horizontalBlurFBO = new a(u, e);\n      }\n      if (this._verticalBlurFBO) this._verticalBlurFBO.resize(s[0], s[1]);else {\n        const e = new l(s[0], s[1]);\n        e.internalFormat = i.RGBA, e.wrapMode = o.CLAMP_TO_EDGE, this._verticalBlurFBO = new a(u, e);\n      }\n      if (this._layerFBOTexture) this._layerFBOTexture.resize(t, r);else {\n        const e = new l();\n        e.internalFormat = i.RGBA, e.wrapMode = o.CLAMP_TO_EDGE, e.width = t, e.height = r, this._layerFBOTexture = new n(u, e);\n      }\n    }\n  }\n}\nexport { _ as DropShadow };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as e } from \"../../../../../../core/maybe.js\";\nimport { TextureSamplingMode as t, PixelFormat as r, TextureWrapMode as s } from \"../../../../../webgl/enums.js\";\nimport { Texture as i } from \"../../../../../webgl/Texture.js\";\nimport { TextureDescriptor as o } from \"../../../../../webgl/TextureDescriptor.js\";\nclass l {\n  constructor() {\n    this._size = [0, 0], this._layerFBOTexture = null;\n  }\n  dispose() {\n    this._layerFBOTexture = e(this._layerFBOTexture);\n  }\n  draw(e, r, s) {\n    const {\n      width: i,\n      height: o\n    } = r;\n    this._createOrResizeResources(e, i, o);\n    const {\n        context: l,\n        painter: a\n      } = e,\n      {\n        amount: n\n      } = s,\n      h = l.gl,\n      u = this._layerFBOTexture;\n    l.bindFramebuffer(r), r.copyToTexture(0, 0, i, o, 0, 0, u), l.setBlendingEnabled(!0), l.setStencilTestEnabled(!1), l.setDepthTestEnabled(!1), l.setClearColor(0, 0, 0, 0), l.clear(h.COLOR_BUFFER_BIT), a.blitTexture(l, u, t.NEAREST, n);\n  }\n  _createOrResizeResources(e, l, a) {\n    const {\n      context: n\n    } = e;\n    if (!this._layerFBOTexture || this._size[0] !== l || this._size[1] !== a) if (this._size[0] = l, this._size[1] = a, this._layerFBOTexture) this._layerFBOTexture.resize(l, a);else {\n      const e = new o();\n      e.internalFormat = r.RGBA, e.wrapMode = s.CLAMP_TO_EDGE, e.samplingMode = t.NEAREST, e.width = l, e.height = a, this._layerFBOTexture = new i(n, e);\n    }\n  }\n}\nexport { l as Opacity };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { Bloom as o } from \"./Bloom.js\";\nimport { Blur as e } from \"./Blur.js\";\nimport { Colorize as t } from \"./Colorize.js\";\nimport { DropShadow as s } from \"./DropShadow.js\";\nimport { Opacity as r } from \"./Opacity.js\";\nfunction c(o) {\n  switch (o) {\n    case \"bloom\":\n    case \"blur\":\n    case \"opacity\":\n    case \"drop-shadow\":\n      return o;\n    default:\n      return \"colorize\";\n  }\n}\nconst f = {\n  colorize: () => new t(),\n  blur: () => new e(),\n  bloom: () => new o(),\n  opacity: () => new r(),\n  \"drop-shadow\": () => new s()\n};\nclass i {\n  constructor() {\n    this._effectMap = new Map();\n  }\n  dispose() {\n    this._effectMap.forEach(o => o.dispose()), this._effectMap.clear();\n  }\n  getPostProcessingEffects(o) {\n    if (!o || 0 === o.length) return [];\n    const e = [];\n    for (const t of o) {\n      const o = c(t.type);\n      let s = this._effectMap.get(o);\n      s || (s = f[o](), this._effectMap.set(o, s)), e.push({\n        postProcessingEffect: s,\n        effect: t\n      });\n    }\n    return e;\n  }\n}\nexport { i as EffectManager };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { isArrayLike as e } from \"../../../../../core/arrayUtils.js\";\nimport { WGLDrawPhase as r } from \"../enums.js\";\nclass t {\n  constructor(e, t) {\n    this.brushes = e, this.name = t.name, this.drawPhase = t.drawPhase || r.MAP, this._targetFn = t.target, this.effects = t.effects || [], this.enableDefaultDraw = t.enableDefaultDraw ?? (() => !0), this.forceDrawByDisplayOrder = !!t.forceDrawByDisplayOrder;\n  }\n  render(e) {\n    const {\n        context: r,\n        profiler: t\n      } = e,\n      s = this._targetFn(),\n      a = this.drawPhase & e.drawPhase;\n    if (t.recordPassStart(this.name), a) {\n      this.enableDefaultDraw() && this._doRender(e, s), t.recordPassEnd();\n      for (const t of this.effects) {\n        if (!t.enable()) continue;\n        const a = t.apply,\n          n = t.args?.(),\n          i = r.getViewport(),\n          o = r.getBoundFramebufferObject(),\n          d = e.passOptions;\n        this._bindEffect(e, a, n), this._doRender(e, s, a.defines), this._drawAndUnbindEffect(e, a, i, o, d, n);\n      }\n    }\n  }\n  _doRender(e, r, t) {\n    if (null == r) return;\n    const {\n      profiler: s,\n      context: a\n    } = e;\n    for (const n of this.brushes) {\n      if (s.recordBrushStart(n.name), null != n.brushEffect) {\n        const s = a.getViewport(),\n          i = a.getBoundFramebufferObject(),\n          o = e.passOptions;\n        this._bindEffect(e, n.brushEffect), this._drawWithBrush(n, e, r, t), this._drawAndUnbindEffect(e, n.brushEffect, s, i, o);\n      } else this._drawWithBrush(n, e, r, t);\n      s.recordBrushEnd();\n    }\n  }\n  _drawWithBrush(r, t, s, a) {\n    e(s) ? (r.prepareState(t, a), r.drawMany(t, s, a)) : s.visible && (r.prepareState(t, a), r.draw(t, s, a));\n  }\n  _bindEffect(e, r, t) {\n    const {\n      profiler: s\n    } = e;\n    s.recordPassStart(this.name + \".\" + r.name), r.bind(e, t);\n    const a = r.createOptions(e, t);\n    e.passOptions = a;\n  }\n  _drawAndUnbindEffect(e, r, t, s, a, n) {\n    const {\n      profiler: i,\n      context: o\n    } = e;\n    e.passOptions = a, i.recordBrushStart(r.name), r.draw(e, n), r.unbind(e, n), o.bindFramebuffer(s);\n    const {\n      x: d,\n      y: f,\n      width: h,\n      height: c\n    } = t;\n    o.setViewport(d, f, h, c), i.recordBrushEnd(), i.recordPassEnd();\n  }\n}\nexport { t as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass r {\n  constructor() {\n    this._programCache = new Map();\n  }\n  destroy() {\n    for (const r of this._programCache.values()) r.destroy();\n    this._programCache.clear();\n  }\n  getProgram(r, e, t, a, o) {\n    const s = r.getShaderKey(e, t, a, o);\n    let c = this._programCache.get(s);\n    return c || (c = r.getProgram(e, t, a, o), this._programCache.set(s, c)), c;\n  }\n}\nexport { r as TechniqueProgramCache };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { disposeMaybe as e } from \"../../../../core/maybe.js\";\nimport { brushes as t } from \"../brushes.js\";\nimport s from \"../vectorTiles/shaders/VTLMaterialManager.js\";\nimport { BitBlitRenderer as r } from \"./BitBlitRenderer.js\";\nimport { WGLDrawPhase as i } from \"./enums.js\";\nimport n from \"./MaterialManager.js\";\nimport a from \"./TextureManager.js\";\nimport { TextureUploadManager as o } from \"./TextureUploadManager.js\";\nimport l from \"./VertexStream.js\";\nimport { WorldExtentRenderer as h } from \"./WorldExtentClipRenderer.js\";\nimport { AnimationEffect as f } from \"./effects/AnimationEffect.js\";\nimport { BlendEffect as c } from \"./effects/BlendEffect.js\";\nimport { FeatureEffect as d } from \"./effects/FeatureEffect.js\";\nimport p from \"./effects/HighlightEffect.js\";\nimport { HittestEffect as u } from \"./effects/HittestEffect.js\";\nimport { EffectManager as _ } from \"./effects/post-processing/EffectManager.js\";\nimport b from \"./painter/RenderPass.js\";\nimport { TechniqueProgramCache as m } from \"./shaderGraph/techniques/TechniqueProgramCache.js\";\nimport { TextureSamplingMode as E, TextureWrapMode as g, CompareFunction as S, BlendFactor as w, RenderbufferFormat as P, BlendOperation as M, Face as C } from \"../../../webgl/enums.js\";\nimport { FramebufferObject as B } from \"../../../webgl/FramebufferObject.js\";\nimport { Renderbuffer as F } from \"../../../webgl/Renderbuffer.js\";\nimport { RenderbufferDescriptor as R } from \"../../../webgl/RenderbufferDescriptor.js\";\nimport { TextureDescriptor as T } from \"../../../webgl/TextureDescriptor.js\";\nclass A {\n  constructor(e, t) {\n    this.context = e, this._currentPipelineStateNeedsUpdate = !1, this._blitRenderer = new r(), this._worldExtentRenderer = new h(), this._brushCache = new Map(), this._lastWidth = null, this._lastHeight = null, this._vtlMaterialManager = new s(), this._blendEffect = new c(), this._stencilBuf = null, this._prevBeforeLayerFBOStack = [], this._fboPool = [], this.effects = {\n      highlight: new p(),\n      hittest: new u(),\n      integrate: new f(),\n      insideEffect: new d(\"inside\"),\n      outsideEffect: new d(\"outside\")\n    }, this._programCache = new m(), this._shaderState = {\n      shader: null,\n      uniforms: null,\n      defines: null,\n      optionalAttributes: null,\n      useComputeBuffer: !1\n    }, this.materialManager = new n(e), this.textureManager = new a(t), this.textureUploadManager = new o(t), this._effectsManager = new _(), this._quadMesh = new l(e, [0, 0, 1, 0, 0, 1, 1, 1]);\n  }\n  dispose() {\n    if (this._programCache.destroy(), this.materialManager.dispose(), this.textureManager.dispose(), this.textureUploadManager.destroy(), this._blitRenderer = e(this._blitRenderer), this._worldExtentRenderer = e(this._worldExtentRenderer), this._quadMesh.dispose(), this._brushCache && (this._brushCache.forEach(e => e.dispose()), this._brushCache.clear(), this._brushCache = null), this._fbos) {\n      let e;\n      for (e in this._fbos) this._fbos[e] && this._fbos[e].dispose();\n    }\n    for (const e of this._fboPool) e.dispose();\n    if (this._fboPool.length = 0, this.effects) {\n      let e;\n      for (e in this.effects) this.effects[e] && this.effects[e].dispose();\n    }\n    this._effectsManager.dispose(), this._blendEffect.dispose(this.context), this._vtlMaterialManager = e(this._vtlMaterialManager);\n  }\n  clearShaderCache() {\n    this._programCache.destroy(), this._programCache = new m();\n  }\n  get blitRenderer() {\n    return this._blitRenderer;\n  }\n  get vectorTilesMaterialManager() {\n    return this._vtlMaterialManager;\n  }\n  getFbos() {\n    if (!this._fbos) throw new Error(\"InternalError: Painter FBOs not initialized\");\n    return this._fbos;\n  }\n  acquireFbo(e, t) {\n    let s;\n    if (this._fboPool.length > 0) s = this._fboPool.pop();else {\n      const r = new T(e, t);\n      r.samplingMode = E.NEAREST, r.wrapMode = g.CLAMP_TO_EDGE, s = new B(this.context, r, this._stencilBuf);\n    }\n    return s.width === e && s.height === t || s.resize(e, t), s;\n  }\n  releaseFbo(e) {\n    this._fboPool.push(e);\n  }\n  getSharedStencilBuffer() {\n    return this._stencilBuf;\n  }\n  beforeRenderPhases(e, t, s) {\n    const {\n      context: r\n    } = e;\n    this._worldExtentRenderer.render(e, t, s);\n    const {\n      width: i,\n      height: n\n    } = r.getViewport();\n    if (this.updateFBOs(i, n), this._prevFBO = r.getBoundFramebufferObject(), r.bindFramebuffer(this.getFbos().output), r.setColorMask(!0, !0, !0, !0), null != t) {\n      const {\n        r: e,\n        g: s,\n        b: i,\n        a: n\n      } = t;\n      r.setClearColor(n * e / 255, n * s / 255, n * i / 255, n);\n    } else r.setClearColor(0, 0, 0, 0);\n    r.setDepthWriteEnabled(!0), r.setClearDepth(1), r.clear(r.gl.COLOR_BUFFER_BIT | r.gl.DEPTH_BUFFER_BIT), r.setDepthWriteEnabled(!1);\n  }\n  afterRenderPhases(e) {\n    const {\n      context: t\n    } = e;\n    t.bindFramebuffer(this._prevFBO), t.setStencilFunction(S.EQUAL, 1, 255), t.setStencilTestEnabled(!0), t.setDepthTestEnabled(!1), this.blitTexture(t, this.getFbos().output.colorTexture, E.NEAREST);\n  }\n  beforeRenderLayer(e, t, s) {\n    const {\n      context: r,\n      blendMode: i,\n      effects: n,\n      drawPhase: a,\n      requireFBO: o\n    } = e;\n    if (o || N(a, i, n, s)) {\n      const e = r.getBoundFramebufferObject();\n      this._prevBeforeLayerFBOStack.push(e);\n      const {\n          width: t,\n          height: s\n        } = r.getViewport(),\n        i = this.acquireFbo(t, s);\n      r.bindFramebuffer(i), r.setColorMask(!0, !0, !0, !0), r.setClearColor(0, 0, 0, 0), r.setDepthWriteEnabled(!0), r.setClearDepth(1), r.clear(r.gl.COLOR_BUFFER_BIT | r.gl.DEPTH_BUFFER_BIT), r.setDepthWriteEnabled(!1);\n    }\n    r.setDepthWriteEnabled(!1), r.setDepthTestEnabled(!1), r.setStencilTestEnabled(!0), r.setClearStencil(t), r.setStencilWriteMask(255), r.clear(r.gl.STENCIL_BUFFER_BIT);\n  }\n  afterRenderLayer(e, t) {\n    const {\n      context: s,\n      blendMode: r,\n      effects: n,\n      requireFBO: a,\n      drawPhase: o\n    } = e;\n    if (a || N(o, r, n, t)) {\n      const a = s.getBoundFramebufferObject();\n      null != n && n.length > 0 && o === i.MAP && (s.setColorMask(!0, !0, !0, !0), this._applyEffects(e, n, a)), s.bindFramebuffer(this._prevBeforeLayerFBOStack.pop()), s.setStencilTestEnabled(!1), s.setStencilWriteMask(0), s.setBlendingEnabled(!0), s.setBlendFunctionSeparate(w.ONE, w.ONE_MINUS_SRC_ALPHA, w.ONE, w.ONE_MINUS_SRC_ALPHA), s.setColorMask(!0, !0, !0, !0);\n      const l = null == r || o === i.HIGHLIGHT ? \"normal\" : r;\n      this._blendEffect.draw(e, a.colorTexture, E.NEAREST, l, t), this.releaseFbo(a);\n    }\n  }\n  renderObject(e, s, r, i) {\n    const n = t[r];\n    if (!n) return;\n    let a = this._brushCache.get(n);\n    void 0 === a && (a = new n(), this._brushCache.set(n, a)), a.prepareState(e), a.draw(e, s, i);\n  }\n  renderObjects(e, s, r, i) {\n    const n = t[r];\n    if (!n) return;\n    let a = this._brushCache.get(n);\n    void 0 === a && (a = new n(), this._brushCache.set(n, a)), a.drawMany(e, s, i);\n  }\n  registerRenderPass(e) {\n    const t = e.brushes.map(e => (this._brushCache.has(e) || this._brushCache.set(e, new e()), this._brushCache.get(e)));\n    return new b(t, e);\n  }\n  blitTexture(e, t, s, r = 1) {\n    e.setBlendingEnabled(!0), e.setBlendFunctionSeparate(w.ONE, w.ONE_MINUS_SRC_ALPHA, w.ONE, w.ONE_MINUS_SRC_ALPHA), e.setColorMask(!0, !0, !0, !0), this._blitRenderer.render(e, t, s, r), this._currentPipelineStateNeedsUpdate = !0;\n  }\n  getPostProcessingEffects(e) {\n    return this._effectsManager.getPostProcessingEffects(e);\n  }\n  updateFBOs(e, t) {\n    if (e !== this._lastWidth || t !== this._lastHeight) {\n      if (this._lastWidth = e, this._lastHeight = t, this._fbos) {\n        let s;\n        for (s in this._fbos) this._fbos[s].resize(e, t);\n        return;\n      }\n      const s = new T(e, t);\n      s.samplingMode = E.NEAREST, s.wrapMode = g.CLAMP_TO_EDGE;\n      const r = new R(P.DEPTH_STENCIL, e, t);\n      this._stencilBuf = new F(this.context, r), this._fbos = {\n        output: new B(this.context, s, this._stencilBuf),\n        effect0: new B(this.context, s, this._stencilBuf)\n      };\n    }\n  }\n  _applyEffects(e, t, s) {\n    const {\n        context: r\n      } = e,\n      i = this._effectsManager.getPostProcessingEffects(t);\n    for (const {\n      postProcessingEffect: n,\n      effect: a\n    } of i) r.bindFramebuffer(s), n.draw(e, s, a);\n    this._currentPipelineStateNeedsUpdate = !0;\n  }\n  setShader(e) {\n    this._shaderState.shader = e.shader, this._shaderState.uniforms = e.uniforms, this._shaderState.defines = e.defines, this._shaderState.optionalAttributes = e.optionalAttributes, this._shaderState.useComputeBuffer = e.useComputeBuffer ?? !1;\n  }\n  setPipelineState(e) {\n    e !== this._currentPipelineState && (this._currentPipelineState = e, this._currentPipelineStateNeedsUpdate = !0);\n  }\n  submitDraw(e, t) {\n    const {\n        shader: s,\n        uniforms: r,\n        defines: i,\n        optionalAttributes: n\n      } = this._shaderState,\n      a = e.context,\n      o = t.getAttributePrecisionPackFactors(),\n      l = this._programCache.getProgram(s, o, r, i ?? {}, n ?? {});\n    return l.setUniforms(r), l.bind(a), this.updatePipelineState(a), this.setStencilRef(a, t), t.draw(e, s.locationInfo), l.cleanupTemporaryTextures(), {\n      vertexShader: l.vertexShader,\n      fragmentShader: l.fragmentShader\n    };\n  }\n  submitDrawQuad(e) {\n    const {\n        shader: t,\n        uniforms: s,\n        defines: r,\n        optionalAttributes: i\n      } = this._shaderState,\n      n = this._programCache.getProgram(t, {}, s, r ?? {}, i ?? {});\n    n.setUniforms(s), n.bind(e), this.updatePipelineState(e), this._quadMesh.draw(), e.bindVAO(null), n.cleanupTemporaryTextures();\n  }\n  submitDrawMesh(e, t, s) {\n    const {\n        shader: r,\n        uniforms: i,\n        defines: n,\n        optionalAttributes: a\n      } = this._shaderState,\n      o = this._programCache.getProgram(r, {}, i, n ?? {}, a ?? {});\n    if (o.setUniforms(i), o.bind(e), this.updatePipelineState(e), s) for (const l of s) t.bind(e, l), t.draw(e);else for (let l = 0; l < t.parts.length; l++) t.bind(e, l), t.draw(e);\n    t.unbind(e), o.cleanupTemporaryTextures();\n  }\n  updatePipelineState(e) {\n    this._currentPipelineStateNeedsUpdate && (this._currentPipelineStateNeedsUpdate = !1, this._updatePipelineState(e));\n  }\n  _updatePipelineState(e) {\n    if (null == this._currentPipelineState) throw new Error(\"Pipeline state not defined. Call setPipelineState before calling submitDraw \");\n    const {\n      color: t,\n      depth: s,\n      stencil: r\n    } = this._currentPipelineState;\n    if (t) {\n      const {\n        blendMode: s,\n        write: r\n      } = t;\n      switch (e.setColorMask(...r), e.setBlendingEnabled(!0), e.setBlendEquation(M.ADD), s) {\n        case \"composite\":\n          e.setBlendFunctionSeparate(w.ONE, w.ONE_MINUS_SRC_ALPHA, w.ONE, w.ONE_MINUS_SRC_ALPHA);\n          break;\n        case \"additive\":\n          e.setBlendFunctionSeparate(w.ONE, w.ONE, w.ONE, w.ONE);\n          break;\n        case \"custom\":\n          {\n            const {\n                blendParameters: s\n              } = t,\n              {\n                dstAlpha: r,\n                dstRGB: i,\n                srcAlpha: n,\n                srcRGB: a\n              } = s;\n            e.setBlendFunctionSeparate(a, i, n, r);\n            break;\n          }\n        case \"delete\":\n          e.setBlendEquation(M.REVERSE_SUBTRACT), e.setBlendFunctionSeparate(w.ONE, w.ONE_MINUS_SRC_ALPHA, w.ONE, w.ONE_MINUS_SRC_ALPHA);\n      }\n    }\n    if (s) {\n      const {\n        test: t,\n        write: r\n      } = s;\n      r ? (e.setDepthWriteEnabled(!0), e.setDepthRange(r.zNear, r.zFar)) : e.setDepthWriteEnabled(!1), t ? (e.setDepthTestEnabled(!0), e.setDepthFunction(t)) : e.setDepthTestEnabled(!1);\n    } else e.setDepthTestEnabled(!1), e.setDepthWriteEnabled(!1);\n    if (r) {\n      const {\n        test: t,\n        write: s\n      } = r;\n      if (t) {\n        const {\n          compare: s,\n          mask: r,\n          op: i,\n          ref: n\n        } = t;\n        e.setStencilTestEnabled(!0), \"function\" != typeof n && e.setStencilFunctionSeparate(C.FRONT_AND_BACK, s, n, r), e.setStencilOpSeparate(C.FRONT_AND_BACK, i.fail, i.zFail, i.zPass);\n      } else e.setStencilTestEnabled(!1);\n      if (s) {\n        const {\n          mask: t\n        } = s;\n        e.setStencilWriteMask(t);\n      } else e.setStencilWriteMask(0);\n    } else e.setStencilTestEnabled(!1), e.setStencilWriteMask(0);\n  }\n  setStencilRef(e, t) {\n    if (null == this._currentPipelineState) throw new Error(\"Pipeline state not defined. Call setPipelineState before calling submitDraw \");\n    const {\n      stencil: s\n    } = this._currentPipelineState;\n    if (s) {\n      const {\n        test: r\n      } = s;\n      if (r) {\n        const {\n          compare: s,\n          mask: i,\n          ref: n\n        } = r;\n        if (\"function\" == typeof n) {\n          const r = t.getStencilReference();\n          if (null === r) throw new Error(\"InternalError: Stencil reference expected for target but not defined\");\n          e.setStencilFunctionSeparate(C.FRONT_AND_BACK, s, r, i);\n        }\n      }\n    }\n  }\n}\nfunction N(e, t, s, r) {\n  return e !== i.LABEL_ALPHA && e !== i.LABEL && e !== i.HIGHLIGHT && (1 !== r || null != t && \"normal\" !== t || null != s && s.length > 0);\n}\nexport { A as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport has from \"../../../core/has.js\";\nimport { removeMaybe as t } from \"../../../core/maybe.js\";\nimport { addFrameTask as r } from \"../../../core/scheduling.js\";\nimport { signal as s } from \"../../../core/signal.js\";\nimport { create as i } from \"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";\nimport { CIMAnalyzer as n } from \"../../../symbols/cim/cimAnalyzer.js\";\nimport { Container as a } from \"./Container.js\";\nimport { ManagedCanvas as o } from \"./ManagedCanvas.js\";\nimport { MAX_TILE_RESHUFFLES_PER_FRAME as h } from \"./webgl/definitions.js\";\nimport { WGLDrawPhase as d } from \"./webgl/enums.js\";\nimport l from \"./webgl/Painter.js\";\nimport { ArrayBufferPool as m } from \"./webgl/PooledUint32Array.js\";\nimport { Profiler as c } from \"./webgl/Profiler.js\";\nimport { TileReshuffleManager as u } from \"./webgl/TileReshuffleManager.js\";\nimport { startup as p, shutdown as f } from \"./webgl/shaderGraph/techniques/TechniqueRegistry.js\";\nimport { MeshWriterRegistry as g } from \"./webgl/shaderGraph/techniques/mesh/MeshWriterRegistry.js\";\nimport { Timeline as _ } from \"../support/Timeline.js\";\nimport { resampleHermite as b } from \"../../support/screenshotUtils.js\";\nimport { TextureWrapMode as w, SizedPixelFormat as R, RenderbufferFormat as y, PixelFormat as x, PixelType as P } from \"../../webgl/enums.js\";\nimport { FramebufferObject as j } from \"../../webgl/FramebufferObject.js\";\nimport { RenderbufferDescriptor as C } from \"../../webgl/RenderbufferDescriptor.js\";\nimport { RenderingContext as T } from \"../../webgl/RenderingContext.js\";\nimport { TextureDescriptor as M } from \"../../webgl/TextureDescriptor.js\";\nimport { createEmptyImageData as O } from \"../../../core/imageUtils.js\";\nconst v = 2e3;\nclass q extends a {\n  constructor(t, i) {\n    super(), this.meshWriterRegistry = new g(), this._trash = new Set(), this._renderRemainingTime = 0, this._lastFrameRenderTime = 0, this._renderRequested = s(!1), this.stage = this, this._stationary = !0, this._reshuffleManager = new u(), this._canvas = new o(t), this.context = new T(this._canvas.gl, i.contextOptions ?? {}), this.painter = new l(this.context, this), this._cimAnalyzer = new n(this.painter.textureManager.resourceManager), has(\"esri-2d-profiler\") && (this._debugOutput = document.createElement(\"div\"), this._debugOutput.setAttribute(\"style\", \"margin: 24px 64px; position: absolute; color: red;\"), t.appendChild(this._debugOutput));\n    const a = () => this._highlightGradient;\n    this._renderParameters = {\n      drawPhase: 0,\n      state: this.state,\n      pixelRatio: window.devicePixelRatio,\n      stationary: !1,\n      globalOpacity: 1,\n      blendMode: null,\n      deltaTime: -1,\n      time: 0,\n      inFadeTransition: !1,\n      effects: null,\n      context: this.context,\n      painter: this.painter,\n      timeline: i.timeline || new _(),\n      renderingOptions: i.renderingOptions,\n      requestRender: () => this.requestRender(),\n      allowDelayedRender: !1,\n      requireFBO: !1,\n      profiler: new c(this.context, this._debugOutput),\n      dataUploadCounter: 0,\n      get highlightGradient() {\n        return a();\n      },\n      reshuffleManager: this._reshuffleManager,\n      backgroundColor: i.backgroundColor\n    }, this._taskHandle = r({\n      render: e => this.renderFrame(e)\n    }), this._taskHandle.pause(), this._lostWebGLContextHandle = this._canvas.events.on(\"webgl-context-lost\", t => this.emit(\"webgl-error\", {\n      error: new e(\"webgl-context-lost\", t.statusMessage)\n    })), this._bufferPool = new m(), p();\n  }\n  destroy() {\n    f(this.context), this.removeAllChildren(), this._emptyTrash(), this._taskHandle = t(this._taskHandle), this._lostWebGLContextHandle = t(this._lostWebGLContextHandle), this._canvas.destroy(), this._debugOutput?.parentNode?.removeChild(this._debugOutput), this._bufferPool.destroy(), this.painter.dispose(), this.context.dispose(), this._canvas = null;\n  }\n  get textureManager() {\n    return this.painter.textureManager;\n  }\n  get backgroundColor() {\n    return this._renderParameters.backgroundColor;\n  }\n  set backgroundColor(e) {\n    this._renderParameters.backgroundColor = e, this.requestRender();\n  }\n  get bufferPool() {\n    return this._bufferPool;\n  }\n  get cimAnalyzer() {\n    return this._cimAnalyzer;\n  }\n  get renderingOptions() {\n    return this._renderingOptions;\n  }\n  set renderingOptions(e) {\n    this._renderingOptions = e, this.requestRender();\n  }\n  get renderRequested() {\n    return this._renderRequested.value;\n  }\n  get state() {\n    return this._state;\n  }\n  set state(e) {\n    this._state = e, this.requestRender();\n  }\n  get stationary() {\n    return this._stationary;\n  }\n  set stationary(e) {\n    this._stationary !== e && (this._stationary = e, this.requestRender());\n  }\n  trashDisplayObject(e) {\n    this._trash.add(e), this.requestRender();\n  }\n  untrashDisplayObject(e) {\n    return this._trash.delete(e);\n  }\n  requestRender() {\n    this._renderRemainingTime = v, this.renderRequested || (this._renderRequested.value = !0, this._taskHandle.resume());\n  }\n  renderFrame(e) {\n    const t = this._lastFrameRenderTime ? e.time - this._lastFrameRenderTime : 0;\n    this._renderRemainingTime -= t, this._renderRemainingTime <= 0 && this._taskHandle.pause(), this._lastFrameRenderTime = e.time, this._renderRequested.value = !1, this._renderParameters.state = this._state, this._renderParameters.stationary = this.stationary, this._renderParameters.pixelRatio = window.devicePixelRatio, this._renderParameters.globalOpacity = 1, this._renderParameters.time = e.time, this._renderParameters.deltaTime = e.deltaTime, this._renderParameters.effects = null, this.processRender(this._renderParameters), this._emptyTrash();\n  }\n  _createTransforms() {\n    return {\n      displayViewScreenMat3: i()\n    };\n  }\n  renderChildren(e) {\n    for (const t of this.children) t.beforeRender(e);\n    this._reshuffleManager.reshuffle(h), this._canvas.render(e, () => this._renderChildren(this.children, e));\n    for (const t of this.children) t.afterRender(e);\n  }\n  _renderChildren(e, t) {\n    const r = this.context;\n    this.painter.textureUploadManager.upload(), r.resetInfo(), t.profiler.recordStart(\"drawLayers\"), t.dataUploadCounter = 0, this.painter.beforeRenderPhases(t, t.backgroundColor, this.state.padding), t.drawPhase = d.MAP;\n    for (const s of e) s.processRender(t);\n    if (this.children.some(e => e.hasHighlight)) {\n      t.drawPhase = d.HIGHLIGHT;\n      for (const r of e) r.processRender(t);\n    }\n    if (this.children.some(e => e.hasLabels)) {\n      t.drawPhase = d.LABEL;\n      for (const r of e) r.processRender(t);\n    }\n    if (has(\"esri-tiles-debug\")) {\n      t.drawPhase = d.DEBUG;\n      for (const r of e) r.processRender(t);\n    }\n    this.painter.afterRenderPhases(t), t.profiler.recordEnd(\"drawLayers\"), r.logInfo();\n  }\n  doRender(e) {\n    const t = this.context,\n      {\n        state: r,\n        pixelRatio: s\n      } = e;\n    this._canvas.resize(e), t.setViewport(0, 0, s * r.size[0], s * r.size[1]), t.setDepthWriteEnabled(!0), t.setStencilWriteMask(255), this.renderChildren(e);\n  }\n  async takeScreenshot(e, t, r, s) {\n    const i = Math.round(this.state.size[0] * e.resolutionScale),\n      n = Math.round(this.state.size[1] * e.resolutionScale),\n      a = e.resolutionScale,\n      o = this.context,\n      h = this._state.clone();\n    if (null != s) {\n      const e = h.viewpoint;\n      h.viewpoint.rotation = s, h.viewpoint = e;\n    }\n    const d = {\n        ...this._renderParameters,\n        drawPhase: null,\n        globalOpacity: 1,\n        stationary: !0,\n        state: h,\n        pixelRatio: a,\n        time: performance.now(),\n        deltaTime: 0,\n        blendMode: null,\n        effects: null,\n        inFadeTransition: !1,\n        backgroundColor: r\n      },\n      l = new M(i, n);\n    l.wrapMode = w.CLAMP_TO_EDGE, l.internalFormat = R.RGBA8, l.isImmutable = !0;\n    const m = new j(o, l, new C(y.DEPTH_STENCIL, i, n)),\n      c = o.getBoundFramebufferObject(),\n      u = o.getViewport();\n    o.bindFramebuffer(m), o.setViewport(0, 0, i, n), this._renderChildren(t ?? this.children, d);\n    const p = this._readbackScreenshot(m, {\n      ...e.cropArea,\n      y: n - (e.cropArea.y + e.cropArea.height)\n    });\n    o.bindFramebuffer(c), o.setViewport(u.x, u.y, u.width, u.height), this.requestRender();\n    const f = await p;\n    let g;\n    return 1 === e.outputScale ? g = f : (g = new ImageData(Math.round(f.width * e.outputScale), Math.round(f.height * e.outputScale)), b(f, g, !0)), m.dispose(), g;\n  }\n  async _readbackScreenshot(e, t) {\n    const r = O(t.width, t.height, document.createElement(\"canvas\"));\n    return await e.readPixelsAsync(t.x, t.y, t.width, t.height, x.RGBA, P.UNSIGNED_BYTE, new Uint8Array(r.data.buffer)), r;\n  }\n  _emptyTrash() {\n    for (; this._trash.size > 0;) {\n      const e = Array.from(this._trash);\n      this._trash.clear();\n      for (const t of e) t.processDetach();\n    }\n  }\n}\nexport { q as Stage, v as extraRenderTime };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../request.js\";\nimport { createTask as r } from \"../../../core/asyncUtils.js\";\nimport s from \"../../../core/Handles.js\";\nimport { clamp as t } from \"../../../core/mathUtils.js\";\nimport { destroyMaybe as i, abortMaybe as o, disposeMaybe as a } from \"../../../core/maybe.js\";\nimport { watch as n, initial as l } from \"../../../core/reactiveUtils.js\";\nimport { isSVG as h } from \"../../../core/urlUtils.js\";\nimport { create as m } from \"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";\nimport { UpdatingHandles as u } from \"../../../core/support/UpdatingHandles.js\";\nimport { DisplayObject as c } from \"../engine/DisplayObject.js\";\nimport { Pos2us as d } from \"../engine/webgl/DefaultVertexAttributeLayouts.js\";\nimport { WGLDrawPhase as _ } from \"../engine/webgl/enums.js\";\nimport { createMagnifierProgram as p, magnifierProgramTemplate as f } from \"../engine/webgl/shaders/MagnifierPrograms.js\";\nimport { loadMagnifierResources as g } from \"../../magnifier/resources.js\";\nimport { BufferObject as x } from \"../../webgl/BufferObject.js\";\nimport { PrimitiveType as b, Usage as T, PixelFormat as y, TextureWrapMode as k, TextureSamplingMode as R } from \"../../webgl/enums.js\";\nimport { Texture as v } from \"../../webgl/Texture.js\";\nimport { TextureDescriptor as j } from \"../../webgl/TextureDescriptor.js\";\nimport { VertexArrayObject as w } from \"../../webgl/VertexArrayObject.js\";\nclass A extends c {\n  constructor() {\n    super(), this._handles = new s(), this._resourcePixelRatio = 1, this.updatingHandles = new u(), this.visible = !1;\n  }\n  destroy() {\n    this._handles = i(this._handles), this._disposeRenderResources(), this._resourcesTask = o(this._resourcesTask);\n  }\n  get backgroundColor() {\n    return this._backgroundColor;\n  }\n  set backgroundColor(e) {\n    this._backgroundColor = e, this.requestRender();\n  }\n  get magnifier() {\n    return this._magnifier;\n  }\n  set magnifier(e) {\n    this._magnifier = e, this._handles.removeAll(), this._handles.add([n(() => e.version, () => {\n      this.visible = e.visible && null != e.position && e.size > 0, this.requestRender();\n    }, l), n(() => [e.maskUrl, e.overlayUrl], () => this._reloadResources()), n(() => e.size, () => {\n      this._disposeRenderResources(), this.requestRender();\n    })]);\n  }\n  _createTransforms() {\n    return {\n      displayViewScreenMat3: m()\n    };\n  }\n  doRender(e) {\n    const r = e.context;\n    if (!this._resourcesTask) return void this._reloadResources();\n    if (e.drawPhase !== _.MAP || !this._canRender()) return;\n    this._updateResources(e);\n    const s = this._magnifier;\n    if (null == s.position) return;\n    const i = e.pixelRatio,\n      o = s.size * i,\n      a = 1 / s.factor,\n      n = Math.ceil(a * o);\n    this._readbackTexture.resize(n, n);\n    const {\n        size: l\n      } = e.state,\n      h = i * l[0],\n      m = i * l[1],\n      u = .5 * n,\n      c = .5 * n,\n      d = t(i * s.position.x, u, h - u - 1),\n      p = t(m - i * s.position.y, c, m - c - 1);\n    r.setBlendingEnabled(!0);\n    const f = d - u,\n      g = p - c,\n      x = this._readbackTexture;\n    r.bindTexture(x, 0), r.gl.copyTexImage2D(x.descriptor.target, 0, x.descriptor.pixelFormat, f, g, n, n, 0);\n    const T = this.backgroundColor,\n      y = T ? [T.a * T.r / 255, T.a * T.g / 255, T.a * T.b / 255, T.a] : [1, 1, 1, 1],\n      k = (d + s.offset.x * i) / h * 2 - 1,\n      R = (p - s.offset.y * i) / m * 2 - 1,\n      v = o / h * 2,\n      j = o / m * 2,\n      w = this._program;\n    r.bindVAO(this._vertexArrayObject), r.bindTexture(this._overlayTexture, 6), r.bindTexture(this._maskTexture, 7), r.useProgram(w), w.setUniform4fv(\"u_background\", y), w.setUniform1i(\"u_readbackTexture\", 0), w.setUniform1i(\"u_overlayTexture\", 6), w.setUniform1i(\"u_maskTexture\", 7), w.setUniform4f(\"u_drawPos\", k, R, v, j), w.setUniform1i(\"u_maskEnabled\", s.maskEnabled ? 1 : 0), w.setUniform1i(\"u_overlayEnabled\", s.overlayEnabled ? 1 : 0), r.setStencilTestEnabled(!1), r.setColorMask(!0, !0, !0, !0), r.drawArrays(b.TRIANGLE_STRIP, 0, 4), r.bindVAO();\n  }\n  _canRender() {\n    return this._mask && this._overlay && null != this._magnifier;\n  }\n  _reloadResources() {\n    this._resourcesTask && this._resourcesTask.abort();\n    const s = null != this._magnifier ? this._magnifier.maskUrl : null,\n      t = null != this._magnifier ? this._magnifier.overlayUrl : null;\n    this._resourcesTask = r(async r => {\n      const i = null == s || null == t ? g(r) : null,\n        o = null != s ? e(s, {\n          responseType: \"image\",\n          signal: r\n        }).then(e => e.data) : i.then(e => e.mask),\n        a = null != t ? e(t, {\n          responseType: \"image\",\n          signal: r\n        }).then(e => e.data) : i.then(e => e.overlay),\n        [n, l] = await Promise.all([o, a]);\n      this._mask = n, this._overlay = l, this._disposeRenderResources(), this.requestRender();\n    }), this.updatingHandles.addPromise(this._resourcesTask.promise);\n  }\n  _disposeRenderResources() {\n    this._readbackTexture = a(this._readbackTexture), this._overlayTexture = a(this._overlayTexture), this._maskTexture = a(this._maskTexture), this._vertexArrayObject = a(this._vertexArrayObject), this._program = a(this._program);\n  }\n  _updateResources(e) {\n    if (e.pixelRatio !== this._resourcePixelRatio && this._disposeRenderResources(), this._readbackTexture) return;\n    const r = e.context;\n    this._resourcePixelRatio = e.pixelRatio;\n    const s = Math.ceil(this._magnifier.size * e.pixelRatio);\n    this._program = p(r);\n    const t = new Uint16Array([0, 1, 0, 0, 1, 1, 1, 0]),\n      i = f.attributes;\n    this._vertexArrayObject = new w(r, i, d, {\n      geometry: x.createVertex(r, T.STATIC_DRAW, t)\n    }), this._overlay.width = s, this._overlay.height = s;\n    const o = new j();\n    o.internalFormat = y.RGBA, o.wrapMode = k.CLAMP_TO_EDGE, o.samplingMode = R.NEAREST, o.flipped = !0, o.preMultiplyAlpha = !h(this._overlay.src) || !e.context.driverTest.svgPremultipliesAlpha.result, this._overlayTexture = new v(r, o, this._overlay), this._mask.width = s, this._mask.height = s, o.pixelFormat = o.internalFormat = y.ALPHA, this._maskTexture = new v(r, o, this._mask);\n    const a = 1 / this._magnifier.factor;\n    o.pixelFormat = o.internalFormat = y.RGBA, o.width = o.height = Math.ceil(a * s), o.samplingMode = R.LINEAR, o.flipped = !1, this._readbackTexture = new v(r, o);\n  }\n}\nexport { A as default };"],
  "mappings": "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",
  "names": ["N", "w", "e", "r", "R", "t", "i", "o", "f", "a", "s", "l", "n", "c", "m", "y", "b", "h", "p", "d", "u", "G", "v", "_", "g", "k", "M", "S", "C", "P", "T", "F", "O", "x", "L", "E", "V", "A", "X", "I", "Y", "j", "W", "D", "H", "U", "F", "e", "T", "r", "t", "i", "l", "s", "o", "r", "i", "t", "e", "a", "n", "h", "c", "m", "d", "f", "_", "v", "p", "g", "w", "u", "j", "_", "r", "t", "e", "i", "R", "E", "s", "o", "p", "e", "r", "t", "a", "s", "o", "h", "i", "g", "m", "c", "l", "e", "r", "a", "n", "s", "i", "t", "h", "o", "u", "f", "m", "t", "e", "i", "s", "h", "r", "n", "o", "t", "c", "e", "i", "l", "h", "p", "r", "s", "a", "a", "e", "t", "s", "r", "n", "i", "c", "g", "o", "s", "r", "t", "e", "i", "n", "o", "h", "a", "l", "d", "_", "c", "g", "m", "u", "c", "t", "n", "e", "i", "s", "r", "a", "o", "h", "g", "p", "m", "d", "a", "t", "h", "e", "n", "f", "i", "C", "P", "b", "e", "t", "i", "s", "v", "j", "r", "n", "p", "l", "A", "x", "a", "L", "f", "o", "c", "h", "u", "M", "G", "y", "B", "F", "r", "e", "o", "n", "h", "i", "a", "s", "t", "u", "f", "r", "u", "n", "e", "t", "i", "s", "o", "O", "I", "h", "a", "m", "c", "_", "d", "p", "g", "b", "x", "E", "S", "C", "T", "l", "t", "r", "i", "t", "r", "n", "o", "h", "a", "s", "u", "m", "d", "f", "L", "l", "c", "x", "p", "_", "g", "e", "r", "e", "t", "n", "c", "m", "e", "r", "t", "i", "a", "d", "u", "f", "E", "n", "h", "s", "R", "l", "_", "p", "b", "g", "x", "T", "s", "t", "e", "r", "o", "n", "c", "f", "L", "c", "e", "i", "t", "E", "s", "R", "a", "m", "o", "f", "b", "r", "I", "i", "h", "u", "l", "e", "E", "r", "s", "t", "o", "h", "d", "l", "t", "c", "_", "e", "s", "r", "i", "o", "L", "c", "t", "r", "n", "l", "a", "T", "e", "s", "i", "o", "L", "U", "u", "h", "a", "u", "l", "m", "_", "h", "r", "t", "i", "o", "n", "p", "c", "d", "f", "b", "F", "O", "R", "B", "g", "T", "x", "e", "s", "w", "M", "E", "n", "o", "u", "t", "s", "r", "i", "a", "h", "e", "l", "d", "b", "c", "_", "p", "m", "R", "E", "n", "r", "e", "t", "s", "i", "o", "a", "c", "l", "u", "_", "h", "m", "R", "u", "h", "_", "r", "e", "i", "o", "a", "n", "l", "c", "p", "m", "f", "B", "d", "b", "O", "F", "w", "T", "x", "g", "M", "R", "t", "s", "E", "l", "r", "e", "s", "i", "o", "a", "n", "h", "u", "L", "c", "c", "o", "f", "n", "u", "h", "l", "_", "i", "e", "t", "s", "t", "e", "E", "r", "s", "a", "n", "i", "o", "d", "f", "h", "c", "r", "e", "t", "a", "o", "s", "c", "A", "e", "t", "_", "u", "p", "m", "l", "c", "i", "s", "r", "j", "h", "L", "E", "n", "O", "a", "o", "N", "R", "T", "v", "q", "h", "t", "i", "W", "r", "s", "l", "y", "A", "R", "a", "e", "n", "T", "w", "E", "o", "d", "P", "m", "c", "u", "p", "f", "g", "U", "A", "s", "h", "e", "d", "r", "E", "i", "o", "a", "n", "l", "m", "u", "c", "p", "f", "g", "x", "T", "y", "k", "R", "v", "j", "w", "t", "L"]
}
