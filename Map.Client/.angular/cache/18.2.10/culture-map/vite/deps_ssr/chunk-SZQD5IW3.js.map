{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/chunks/Magnifier.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { screenPointObjectToArray as e, createScreenPointArray as r, createRenderScreenPointArray as o } from \"../core/screenUtils.js\";\nimport { s as a } from \"./vec42.js\";\nimport { create as t } from \"../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { BooleanPassUniform as n } from \"../views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js\";\nimport { Float4PassUniform as i } from \"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";\nimport { NoParameters as s, glsl as l } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as d } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as m } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nimport { VertexAttribute as u } from \"../views/3d/webgl-engine/lib/VertexAttribute.js\";\nclass f extends s {\n  constructor() {\n    super(...arguments), this.mask = null, this.overlay = null, this.input = null, this.size = 0;\n  }\n}\nfunction v() {\n  const e = new d();\n  return e.attributes.add(u.POSITION, \"vec2\"), e.vertex.uniforms.add(new i(\"drawPosition\", (e, r) => c(e, r))), e.varyings.add(\"vUV\", \"vec2\"), e.vertex.code.add(l`void main(void) {\nvUV = position;\ngl_Position = vec4(drawPosition.xy + vec2(position - 0.5) * drawPosition.zw, 0.0, 1.0);\n}`), e.fragment.uniforms.add(new m(\"textureInput\", e => e.input)), e.fragment.uniforms.add(new m(\"textureMask\", e => e.mask)), e.fragment.uniforms.add(new m(\"textureOverlay\", e => e.overlay)), e.fragment.uniforms.add(new n(\"maskEnabled\", e => e.magnifier.maskEnabled)), e.fragment.uniforms.add(new n(\"overlayEnabled\", e => e.magnifier.overlayEnabled)), e.fragment.code.add(l`const float barrelFactor = 1.1;\nvec2 barrel(vec2 uv) {\nvec2 uvn = uv * 2.0 - 1.0;\nif (uvn.x == 0.0 && uvn.y == 0.0) {\nreturn vec2(0.5, 0.5);\n}\nfloat theta = atan(uvn.y, uvn.x);\nfloat r = pow(length(uvn), barrelFactor);\nreturn r * vec2(cos(theta), sin(theta)) * 0.5 + 0.5;\n}\nvoid main() {\nfloat mask = maskEnabled ? texture(textureMask, vUV).a : 1.0;\nvec4 inputColor = texture(textureInput, barrel(vUV)) * mask;\nvec4 overlayColor = overlayEnabled ? texture(textureOverlay, vUV) : vec4(0);\nfragColor = overlayColor + (1.0 - overlayColor.a) * inputColor;\n}`), e;\n}\nfunction c(r, o) {\n  const t = o.camera.pixelRatio,\n    n = r.magnifier.offset.x * t,\n    i = r.magnifier.offset.y * t;\n  e(r.magnifier.position, g);\n  const s = o.camera.screenToRender(g, b),\n    l = Math.ceil(t * r.magnifier.size),\n    d = o.camera.fullWidth,\n    m = o.camera.fullHeight;\n  return a(p, (s[0] + n) / d * 2 - 1, (s[1] - i) / m * 2 - 1, l / d * 2, l / m * 2);\n}\nconst g = r(),\n  b = o(),\n  p = t(),\n  w = Object.freeze(Object.defineProperty({\n    __proto__: null,\n    MagnifierPassParameters: f,\n    build: v\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nexport { f as M, w as a, v as b };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaA,IAAM,IAAN,cAAgBA,GAAE;AAAA,EAChB,cAAc;AACZ,UAAM,GAAG,SAAS,GAAG,KAAK,OAAO,MAAM,KAAK,UAAU,MAAM,KAAK,QAAQ,MAAM,KAAK,OAAO;AAAA,EAC7F;AACF;AACA,SAAS,IAAI;AACX,QAAMC,KAAI,IAAIC,GAAE;AAChB,SAAOD,GAAE,WAAW,IAAI,EAAE,UAAU,MAAM,GAAGA,GAAE,OAAO,SAAS,IAAI,IAAIA,GAAE,gBAAgB,CAACA,IAAG,MAAM,EAAEA,IAAG,CAAC,CAAC,CAAC,GAAGA,GAAE,SAAS,IAAI,OAAO,MAAM,GAAGA,GAAE,OAAO,KAAK,IAAI;AAAA;AAAA;AAAA,EAG/J,GAAGA,GAAE,SAAS,SAAS,IAAI,IAAIE,GAAE,gBAAgB,CAAAF,OAAKA,GAAE,KAAK,CAAC,GAAGA,GAAE,SAAS,SAAS,IAAI,IAAIE,GAAE,eAAe,CAAAF,OAAKA,GAAE,IAAI,CAAC,GAAGA,GAAE,SAAS,SAAS,IAAI,IAAIE,GAAE,kBAAkB,CAAAF,OAAKA,GAAE,OAAO,CAAC,GAAGA,GAAE,SAAS,SAAS,IAAI,IAAIE,GAAE,eAAe,CAAAF,OAAKA,GAAE,UAAU,WAAW,CAAC,GAAGA,GAAE,SAAS,SAAS,IAAI,IAAIE,GAAE,kBAAkB,CAAAF,OAAKA,GAAE,UAAU,cAAc,CAAC,GAAGA,GAAE,SAAS,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAenX,GAAGA;AACL;AACA,SAAS,EAAE,GAAGC,IAAG;AACf,QAAM,IAAIA,GAAE,OAAO,YACjBF,KAAI,EAAE,UAAU,OAAO,IAAI,GAC3BI,KAAI,EAAE,UAAU,OAAO,IAAI;AAC7B,IAAE,EAAE,UAAU,UAAU,CAAC;AACzB,QAAMD,KAAID,GAAE,OAAO,eAAe,GAAG,CAAC,GACpC,IAAI,KAAK,KAAK,IAAI,EAAE,UAAU,IAAI,GAClCG,KAAIH,GAAE,OAAO,WACb,IAAIA,GAAE,OAAO;AACf,SAAOC,GAAE,IAAIA,GAAE,CAAC,IAAIH,MAAKK,KAAI,IAAI,IAAIF,GAAE,CAAC,IAAIC,MAAK,IAAI,IAAI,GAAG,IAAIC,KAAI,GAAG,IAAI,IAAI,CAAC;AAClF;AACA,IAAM,IAAI,EAAE;AAAZ,IACE,IAAI,EAAE;AADR,IAEE,IAAI,EAAE;AAFR,IAGE,IAAI,OAAO,OAAO,OAAO,eAAe;AAAA,EACtC,WAAW;AAAA,EACX,yBAAyB;AAAA,EACzB,OAAO;AACT,GAAG,OAAO,aAAa;AAAA,EACrB,OAAO;AACT,CAAC,CAAC;",
  "names": ["n", "e", "o", "s", "i", "d"]
}
