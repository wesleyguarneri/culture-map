{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/testUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { fromValues as r } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nclass s {\n  constructor(r, s) {\n    this.vec3 = r, this.id = s;\n  }\n}\nfunction t(t, o, c, e) {\n  return new s(r(t, o, c), e);\n}\nexport { s as LocalOrigin, t as fromValues };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst n = {\n    stableRendering: !1\n  },\n  e = {\n    rootOrigin: null\n  };\nexport { e as gridLocalOriginFactory, n as textTextureAtlas };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { generateUID as t } from \"../../../../core/uid.js\";\nimport { f as i } from \"../../../../chunks/vec32.js\";\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as o } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { projectBuffer as s } from \"../../../../geometry/projection/projectBuffer.js\";\nimport { Attribute as e } from \"./Attribute.js\";\nimport { ContentObjectType as n } from \"./ContentObjectType.js\";\nimport { Geometry as a } from \"./Geometry.js\";\nimport { fromValues as h } from \"./LocalOriginFactory.js\";\nimport { Object3D as m } from \"./Object3D.js\";\nimport { gridLocalOriginFactory as c } from \"./testUtils.js\";\nimport { VertexAttribute as g } from \"./VertexAttribute.js\";\nimport { WebGLLayer as d } from \"./WebGLLayer.js\";\nimport { RibbonLineMaterial as f } from \"../materials/RibbonLineMaterial.js\";\nclass _ {\n  constructor(i) {\n    this._originSR = i, this._rootOriginId = \"root/\" + t(), this._origins = new Map(), this._objects = new Map(), this._gridSize = 5e5;\n  }\n  getOrigin(t) {\n    const r = this._origins.get(this._rootOriginId);\n    if (null == r) {\n      const i = c.rootOrigin;\n      if (null != i) return this._origins.set(this._rootOriginId, h(i[0], i[1], i[2], this._rootOriginId)), this.getOrigin(t);\n      const r = h(t[0] + Math.random() - .5, t[1] + Math.random() - .5, t[2] + Math.random() - .5, this._rootOriginId);\n      return this._origins.set(this._rootOriginId, r), r;\n    }\n    const o = this._gridSize,\n      s = Math.round(t[0] / o),\n      e = Math.round(t[1] / o),\n      n = Math.round(t[2] / o),\n      a = `${s}/${e}/${n}`;\n    let m = this._origins.get(a);\n    const g = .5 * o;\n    if (i(l, t, r.vec3), l[0] = Math.abs(l[0]), l[1] = Math.abs(l[1]), l[2] = Math.abs(l[2]), l[0] < g && l[1] < g && l[2] < g) {\n      if (m) {\n        const r = Math.max(...l);\n        i(l, t, m.vec3), l[0] = Math.abs(l[0]), l[1] = Math.abs(l[1]), l[2] = Math.abs(l[2]);\n        if (Math.max(...l) < r) return m;\n      }\n      return r;\n    }\n    return m || (m = h(s * o, e * o, n * o, a), this._origins.set(a, m)), m;\n  }\n  _drawOriginBox(t, i = o(1, 1, 0, 1)) {\n    const r = window.view,\n      h = r._stage,\n      c = i.toString();\n    if (!this._objects.has(c)) {\n      this._material = new f({\n        width: 2,\n        color: i\n      }), h.add(this._material);\n      const t = new d(h, {\n          pickable: !1\n        }),\n        r = new m({\n          castShadow: !1\n        });\n      h.add(r), t.add(r), this._objects.set(c, r);\n    }\n    const _ = this._objects.get(c),\n      l = [0, 1, 5, 4, 0, 2, 1, 7, 6, 2, 0, 1, 3, 7, 5, 4, 6, 2, 0],\n      p = l.length,\n      j = new Array(3 * p),\n      b = new Array(),\n      u = .5 * this._gridSize;\n    for (let o = 0; o < p; o++) j[3 * o] = t[0] + (1 & l[o] ? u : -u), j[3 * o + 1] = t[1] + (2 & l[o] ? u : -u), j[3 * o + 2] = t[2] + (4 & l[o] ? u : -u), o > 0 && b.push(o - 1, o);\n    s(j, this._originSR, 0, j, r.renderSpatialReference, 0, p);\n    const M = new a(this._material, [[g.POSITION, new e(j, b, 3, !0)]], null, n.Line);\n    h.add(M), _.addGeometry(M);\n  }\n  get test() {}\n}\nconst l = r();\nexport { _ as GridLocalOriginFactory };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,IAAM,IAAN,MAAQ;AAAA,EACN,YAAYA,IAAGC,IAAG;AAChB,SAAK,OAAOD,IAAG,KAAK,KAAKC;AAAA,EAC3B;AACF;AACA,SAASC,GAAEA,IAAG,GAAG,GAAGC,IAAG;AACrB,SAAO,IAAI,EAAE,EAAED,IAAG,GAAG,CAAC,GAAGC,EAAC;AAC5B;;;ACRA,IAAMC,KAAI;AAAA,EACN,iBAAiB;AACnB;AAFF,IAGEC,KAAI;AAAA,EACF,YAAY;AACd;;;ACUF,IAAM,IAAN,MAAQ;AAAA,EACN,YAAY,GAAG;AACb,SAAK,YAAY,GAAG,KAAK,gBAAgB,UAAU,EAAE,GAAG,KAAK,WAAW,oBAAI,IAAI,GAAG,KAAK,WAAW,oBAAI,IAAI,GAAG,KAAK,YAAY;AAAA,EACjI;AAAA,EACA,UAAUC,IAAG;AACX,UAAMC,KAAI,KAAK,SAAS,IAAI,KAAK,aAAa;AAC9C,QAAI,QAAQA,IAAG;AACb,YAAM,IAAIC,GAAE;AACZ,UAAI,QAAQ,EAAG,QAAO,KAAK,SAAS,IAAI,KAAK,eAAeF,GAAE,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,aAAa,CAAC,GAAG,KAAK,UAAUA,EAAC;AACtH,YAAMC,KAAID,GAAEA,GAAE,CAAC,IAAI,KAAK,OAAO,IAAI,KAAIA,GAAE,CAAC,IAAI,KAAK,OAAO,IAAI,KAAIA,GAAE,CAAC,IAAI,KAAK,OAAO,IAAI,KAAI,KAAK,aAAa;AAC/G,aAAO,KAAK,SAAS,IAAI,KAAK,eAAeC,EAAC,GAAGA;AAAA,IACnD;AACA,UAAM,IAAI,KAAK,WACbE,KAAI,KAAK,MAAMH,GAAE,CAAC,IAAI,CAAC,GACvBE,KAAI,KAAK,MAAMF,GAAE,CAAC,IAAI,CAAC,GACvBI,KAAI,KAAK,MAAMJ,GAAE,CAAC,IAAI,CAAC,GACvBK,KAAI,GAAGF,EAAC,IAAID,EAAC,IAAIE,EAAC;AACpB,QAAI,IAAI,KAAK,SAAS,IAAIC,EAAC;AAC3B,UAAM,IAAI,MAAK;AACf,QAAIH,GAAE,GAAGF,IAAGC,GAAE,IAAI,GAAG,EAAE,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,GAAG;AAC1H,UAAI,GAAG;AACL,cAAMA,KAAI,KAAK,IAAI,GAAG,CAAC;AACvB,QAAAC,GAAE,GAAGF,IAAG,EAAE,IAAI,GAAG,EAAE,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC,CAAC;AACnF,YAAI,KAAK,IAAI,GAAG,CAAC,IAAIC,GAAG,QAAO;AAAA,MACjC;AACA,aAAOA;AAAA,IACT;AACA,WAAO,MAAM,IAAID,GAAEG,KAAI,GAAGD,KAAI,GAAGE,KAAI,GAAGC,EAAC,GAAG,KAAK,SAAS,IAAIA,IAAG,CAAC,IAAI;AAAA,EACxE;AAAA,EACA,eAAeL,IAAG,IAAIC,GAAE,GAAG,GAAG,GAAG,CAAC,GAAG;AACnC,UAAMA,KAAI,OAAO,MACf,IAAIA,GAAE,QACN,IAAI,EAAE,SAAS;AACjB,QAAI,CAAC,KAAK,SAAS,IAAI,CAAC,GAAG;AACzB,WAAK,YAAY,IAAI,EAAE;AAAA,QACrB,OAAO;AAAA,QACP,OAAO;AAAA,MACT,CAAC,GAAG,EAAE,IAAI,KAAK,SAAS;AACxB,YAAMD,KAAI,IAAI,EAAE,GAAG;AAAA,QACf,UAAU;AAAA,MACZ,CAAC,GACDC,KAAI,IAAI,EAAE;AAAA,QACR,YAAY;AAAA,MACd,CAAC;AACH,QAAE,IAAIA,EAAC,GAAGD,GAAE,IAAIC,EAAC,GAAG,KAAK,SAAS,IAAI,GAAGA,EAAC;AAAA,IAC5C;AACA,UAAMK,KAAI,KAAK,SAAS,IAAI,CAAC,GAC3BC,KAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,GAC5D,IAAIA,GAAE,QACN,IAAI,IAAI,MAAM,IAAI,CAAC,GACnB,IAAI,IAAI,MAAM,GACd,IAAI,MAAK,KAAK;AAChB,aAAS,IAAI,GAAG,IAAI,GAAG,IAAK,GAAE,IAAI,CAAC,IAAIP,GAAE,CAAC,KAAK,IAAIO,GAAE,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,IAAIP,GAAE,CAAC,KAAK,IAAIO,GAAE,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,IAAIP,GAAE,CAAC,KAAK,IAAIO,GAAE,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,KAAK,EAAE,KAAK,IAAI,GAAG,CAAC;AACjL,IAAAH,GAAE,GAAG,KAAK,WAAW,GAAG,GAAGH,GAAE,wBAAwB,GAAG,CAAC;AACzD,UAAM,IAAI,IAAI,EAAE,KAAK,WAAW,CAAC,CAACC,GAAE,UAAU,IAAI,EAAE,GAAG,GAAG,GAAG,IAAE,CAAC,CAAC,GAAG,MAAMA,GAAE,IAAI;AAChF,MAAE,IAAI,CAAC,GAAGI,GAAE,YAAY,CAAC;AAAA,EAC3B;AAAA,EACA,IAAI,OAAO;AAAA,EAAC;AACd;AACA,IAAM,IAAI,EAAE;",
  "names": ["r", "s", "t", "e", "n", "e", "t", "r", "e", "s", "n", "a", "_", "l"]
}
