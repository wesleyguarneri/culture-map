{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/layers/RouteLayerView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport r from \"../../../core/Collection.js\";\nimport t from \"../../../core/CollectionFlattener.js\";\nimport { destroyMaybe as s } from \"../../../core/maybe.js\";\nimport { initial as o, when as i, watch as n } from \"../../../core/reactiveUtils.js\";\nimport { property as a } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as p } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport l from \"../../../rest/support/DirectionLine.js\";\nimport c from \"../../../rest/support/DirectionPoint.js\";\nimport d from \"../../../rest/support/PointBarrier.js\";\nimport h from \"../../../rest/support/PolygonBarrier.js\";\nimport u from \"../../../rest/support/PolylineBarrier.js\";\nimport m from \"../../../rest/support/RouteInfo.js\";\nimport y from \"../../../rest/support/Stop.js\";\nimport { LayerView3D as f } from \"./LayerView3D.js\";\nimport { GraphicsProcessor as g } from \"./graphics/GraphicsProcessor.js\";\nimport { LayerViewPerformanceInfo as b } from \"./support/LayerViewPerformanceInfo.js\";\nimport { toViewIfLocal as j } from \"./support/projectExtentUtils.js\";\nimport { EventedSet as w } from \"../support/EventedSet.js\";\nimport { UpdatePolicy as I } from \"../webgl-engine/lib/UpdatePolicy.js\";\nimport _ from \"../../layers/LayerView.js\";\nfunction v(e) {\n  return e instanceof l || e instanceof c || e instanceof d || e instanceof h || e instanceof u || e instanceof m || e instanceof y;\n}\nlet S = class extends f(_) {\n  constructor() {\n    super(...arguments), this.type = \"route-3d\", this.loadedGraphics = new w(), this._byObjectID = new Map(), this.slicePlaneEnabled = !1, this.fullExtentInLocalViewSpatialReference = null;\n  }\n  initialize() {\n    this._set(\"processor\", new g({\n      owner: this,\n      scaleVisibilityEnabled: !0,\n      frustumVisibilityEnabled: !0\n    })), this.addResolvingPromise(this.processor.initializePromise), this._updatingHandles.addOnCollectionChange(() => this._routeItems, e => this._routeItemsChanged(e), o), this.addResolvingPromise(j(this).then(e => this.fullExtentInLocalViewSpatialReference = e)), this.addHandles(i(() => this.view?.basemapTerrain?.ready, () => () => this.notifyChange(\"updating\"), {\n      once: !0\n    }));\n  }\n  destroy() {\n    this._updatingHandles.removeAll(), this._set(\"processor\", s(this.processor)), this._get(\"_routeItems\")?.destroy();\n  }\n  get _routeItems() {\n    return new t({\n      getCollections: () => [this.layer.pointBarriers, this.layer.polygonBarriers, this.layer.polylineBarriers, this.layer.stops, this.layer.directionLines, this.layer.directionPoints, null != this.layer.routeInfo ? new r([this.layer.routeInfo]) : null]\n    });\n  }\n  _routeItemsChanged(e) {\n    if (e.removed.length) {\n      this.loadedGraphics.removeMany(e.removed.map(e => {\n        const r = this._byObjectID.get(e);\n        return this._byObjectID.delete(e), r;\n      }));\n      for (const r of e.removed) this.removeHandles(r);\n    }\n    if (e.added.length) {\n      this.loadedGraphics.addMany(e.added.map(e => {\n        const r = e.toGraphic();\n        return this._byObjectID.set(e, r), r;\n      }));\n      for (const r of e.added) this.addHandles([n(() => r.geometry, (e, t) => {\n        this._updateGraphic(r, \"geometry\", e, t);\n      }), n(() => r.symbol, (e, t) => {\n        this._updateGraphic(r, \"symbol\", e, t);\n      })], r);\n    }\n  }\n  get legendEnabled() {\n    return this.canResume() && !this.processor?.frustumVisibilitySuspended;\n  }\n  get visibleAtCurrentScale() {\n    return !this.processor?.scaleVisibilitySuspended;\n  }\n  getSuspendInfo() {\n    const e = super.getSuspendInfo();\n    return e.outsideOfView = this.processor?.frustumVisibilitySuspended ?? !1, e;\n  }\n  getHit(e) {\n    return this.processor.getHit(e);\n  }\n  whenGraphicBounds(e, r) {\n    return this.processor.whenGraphicBounds(e, r);\n  }\n  computeAttachmentOrigin(e, r) {\n    return this.processor?.computeAttachmentOrigin(e, r);\n  }\n  getSymbolLayerSize(e, r) {\n    return this.processor.getSymbolLayerSize(e, r);\n  }\n  async queryGraphics() {\n    return new r(this.loadedGraphics.toArray());\n  }\n  maskOccludee(e) {\n    return this.processor.maskOccludee(e);\n  }\n  highlight(e) {\n    return v(e) && (e = this._byObjectID.get(e)), this.processor.highlight(e);\n  }\n  get updatePolicy() {\n    return this.processor?.graphicsCore.effectiveUpdatePolicy || I.SYNC;\n  }\n  isUpdating() {\n    return !(!this.processor?.updating && this.view?.basemapTerrain?.ready);\n  }\n  get performanceInfo() {\n    return new b(this.processor?.graphicsCore.usedMemory ?? 0, this.loadedGraphics.length, -1, -1, 0, this.processor?.graphicsCore.performanceInfo ?? null);\n  }\n  _updateGraphic(e, r, t, s) {\n    const o = this._byObjectID.get(e);\n    o[r] = t, C.graphic = o, C.property = r, C.oldValue = s, C.newValue = t, this.processor?.graphicsCore.graphicUpdateHandler(C);\n  }\n};\ne([a()], S.prototype, \"_routeItems\", null), e([a()], S.prototype, \"loadedGraphics\", void 0), e([a({\n  readOnly: !0\n})], S.prototype, \"legendEnabled\", null), e([a({\n  readOnly: !0\n})], S.prototype, \"visibleAtCurrentScale\", null), e([a()], S.prototype, \"layer\", void 0), e([a({\n  readOnly: !0\n})], S.prototype, \"processor\", void 0), e([a({\n  type: Boolean\n})], S.prototype, \"slicePlaneEnabled\", void 0), S = e([p(\"esri.views.3d.layers.RouteLayerView3D\")], S);\nconst C = {\n    graphic: null,\n    property: null,\n    oldValue: null,\n    newValue: null\n  },\n  V = S;\nexport { V as default };"],
  "mappings": "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",
  "names": ["e", "y", "S", "l", "t", "C", "V"]
}
