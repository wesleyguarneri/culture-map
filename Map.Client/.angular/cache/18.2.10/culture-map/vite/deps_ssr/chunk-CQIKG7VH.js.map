{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/geometry/support/heightModelInfoUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport e from \"../../core/Error.js\";\nimport t from \"../HeightModelInfo.js\";\nimport { parse as n } from \"../../layers/support/arcgisLayerUrl.js\";\nfunction i(n, i) {\n  if (!n) return null;\n  if (!s(n)) return new e(\"webscene:unsupported-height-model-info\", \"The vertical coordinate system of the scene is not supported\", {\n    heightModelInfo: n\n  });\n  const a = n.heightUnit,\n    o = t.deriveUnitFromSR(n, i).heightUnit;\n  return a !== o ? new e(\"webscene:incompatible-height-unit\", `The vertical units of the scene (${a}) must match the horizontal units of the scene (${o})`, {\n    verticalUnit: a,\n    horizontalUnit: o\n  }) : null;\n}\nfunction a(n, i, a) {\n  const s = l(n),\n    h = i,\n    u = o(s, h, a);\n  if (s) {\n    const i = t.deriveUnitFromSR(s, n.spatialReference).heightUnit;\n    if (!a && i !== s.heightUnit) {\n      const t = new e(\"layerview:unmatched-height-unit\", `The vertical units of the layer must match the horizontal units (${i})`, {\n        horizontalUnit: i\n      });\n      return new e(\"layerview:unsupported-height-model-info\", \"The vertical coordinate system of the layer is not supported\", {\n        heightModelInfo: s,\n        error: t\n      });\n    }\n  }\n  if (!c(n) || u === r.Unsupported) return new e(\"layerview:unsupported-height-model-info\", \"The vertical coordinate system of the layer is not supported\", {\n    heightModelInfo: s\n  });\n  switch (u) {\n    case r.Units:\n      {\n        const t = s?.heightUnit || \"unknown\",\n          n = h?.heightUnit || \"unknown\",\n          i = new e(\"layerview:incompatible-height-unit\", `The vertical units of the layer (${t}) must match the vertical units of the scene (${n})`, {\n            layerUnit: t,\n            sceneUnit: n\n          });\n        return new e(\"layerview:incompatible-height-model-info\", \"The vertical coordinate system of the layer is incompatible with the scene\", {\n          layerHeightModelInfo: s,\n          sceneHeightModelInfo: h,\n          error: i\n        });\n      }\n    case r.HeightModel:\n      {\n        const t = s?.heightModel || \"unknown\",\n          n = h?.heightModel || \"unknown\",\n          i = new e(\"layerview:incompatible-height-model\", `The height model of the layer (${t}) must match the height model of the scene (${n})`, {\n            layerHeightModel: t,\n            sceneHeightModel: n\n          });\n        return new e(\"layerview:incompatible-height-model-info\", \"The vertical coordinate system of the layer is incompatible with the scene\", {\n          layerHeightModelInfo: s,\n          sceneHeightModelInfo: h,\n          error: i\n        });\n      }\n    case r.CRS:\n      {\n        const t = s?.vertCRS || \"unknown\",\n          n = h?.vertCRS || \"unknown\",\n          i = new e(\"layerview:incompatible-vertical-datum\", `The vertical datum of the layer (${t}) must match the vertical datum of the scene (${n})`, {\n            layerDatum: t,\n            sceneDatum: n\n          });\n        return new e(\"layerview:incompatible-height-model-info\", \"The vertical coordinate system of the layer is incompatible with the scene\", {\n          layerHeightModelInfo: s,\n          sceneHeightModelInfo: h,\n          error: i\n        });\n      }\n  }\n  return null;\n}\nfunction o(e, t, n) {\n  if (!s(e) || !s(t)) return r.Unsupported;\n  if (null == e || null == t) return r.Ok;\n  if (!n && e.heightUnit !== t.heightUnit) return r.Units;\n  if (e.heightModel !== t.heightModel) return r.HeightModel;\n  switch (e.heightModel) {\n    case \"gravity-related-height\":\n      return r.Ok;\n    case \"ellipsoidal\":\n      return e.vertCRS === t.vertCRS ? r.Ok : r.CRS;\n    default:\n      return r.Unsupported;\n  }\n}\nvar r;\nfunction s(e) {\n  return null == e || null != e.heightModel && null != e.heightUnit;\n}\nfunction c(e) {\n  return \"heightModelInfo\" in e && null != e.heightModelInfo || null != e.spatialReference || !d(e);\n}\nfunction l(e) {\n  if (\"integrated-mesh-3dtiles\" === e.type) return null;\n  const i = e.url ? n(e.url) : void 0,\n    a = e.spatialReference?.vcsWkid;\n  return !(null == a && null != i && \"ImageServer\" === i.serverType) && h(e) && e.heightModelInfo ? e.heightModelInfo : d(e) ? t.deriveUnitFromSR(p, e.spatialReference) : null;\n}\nfunction h(e) {\n  return \"heightModelInfo\" in e;\n}\nfunction u(e) {\n  if (\"unknown\" === e.type || !(\"capabilities\" in e)) return !1;\n  switch (e.type) {\n    case \"catalog\":\n    case \"catalog-footprint\":\n    case \"csv\":\n    case \"feature\":\n    case \"geojson\":\n    case \"subtype-group\":\n    case \"ogc-feature\":\n    case \"oriented-imagery\":\n    case \"wfs\":\n    case \"knowledge-graph-sublayer\":\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction d(e) {\n  return u(e) ? !!(e.capabilities && e.capabilities.data && e.capabilities.data.supportsZ) : f(e);\n}\nfunction g(e) {\n  return null != e.layers || f(e) || u(e) || h(e);\n}\nfunction f(e) {\n  switch (e.type) {\n    case \"building-scene\":\n    case \"elevation\":\n    case \"integrated-mesh\":\n    case \"integrated-mesh-3dtiles\":\n    case \"point-cloud\":\n    case \"scene\":\n    case \"voxel\":\n      return !0;\n    case \"base-dynamic\":\n    case \"base-elevation\":\n    case \"base-tile\":\n    case \"bing-maps\":\n    case \"catalog\":\n    case \"catalog-footprint\":\n    case \"catalog-dynamic-group\":\n    case \"csv\":\n    case \"dimension\":\n    case \"geojson\":\n    case \"feature\":\n    case \"subtype-group\":\n    case \"geo-rss\":\n    case \"graphics\":\n    case \"group\":\n    case \"imagery\":\n    case \"imagery-tile\":\n    case \"kml\":\n    case \"knowledge-graph\":\n    case \"link-chart\":\n    case \"knowledge-graph-sublayer\":\n    case \"line-of-sight\":\n    case \"map-image\":\n    case \"map-notes\":\n    case \"media\":\n    case \"ogc-feature\":\n    case \"open-street-map\":\n    case \"oriented-imagery\":\n    case \"route\":\n    case \"stream\":\n    case \"tile\":\n    case \"unknown\":\n    case \"unsupported\":\n    case \"vector-tile\":\n    case \"video\":\n    case \"wcs\":\n    case \"web-tile\":\n    case \"wfs\":\n    case \"wms\":\n    case \"wmts\":\n    case null:\n      return !1;\n  }\n  return !1;\n}\n!function (e) {\n  e[e.Ok = 0] = \"Ok\", e[e.Units = 1] = \"Units\", e[e.HeightModel = 2] = \"HeightModel\", e[e.CRS = 3] = \"CRS\", e[e.Unsupported = 4] = \"Unsupported\";\n}(r || (r = {}));\nconst p = new t({\n  heightModel: \"gravity-related-height\"\n});\nexport { l as deriveHeightModelInfoFromLayer, a as rejectLayerError, g as supportsHeightModelInfo, i as validateWebSceneError };"],
  "mappings": "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",
  "names": ["i", "s", "a", "o", "h", "u", "n", "d"]
}
