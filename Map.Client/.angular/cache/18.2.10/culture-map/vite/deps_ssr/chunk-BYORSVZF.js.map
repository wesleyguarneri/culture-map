{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/analysis/LineOfSightAnalysis.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../chunks/tslib.es6.js\";\nimport e from \"./Analysis.js\";\nimport o from \"./LineOfSightAnalysisObserver.js\";\nimport r from \"./LineOfSightAnalysisTarget.js\";\nimport s from \"../core/Collection.js\";\nimport { referenceSetter as i, castForReferenceSetter as n } from \"../core/collectionUtils.js\";\nimport { watch as l, syncAndInitial as p } from \"../core/reactiveUtils.js\";\nimport { property as a } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/Logger.js\";\nimport \"../core/RandomLCG.js\";\nimport { subclass as u } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { projectOrLoad as c } from \"../geometry/projection.js\";\nimport { fromValues as m, expandWithVec3 as g, toExtent as f } from \"../geometry/support/aaBoundingBox.js\";\nimport { getGeometryEffectiveElevationMode as h } from \"../support/elevationInfoUtils.js\";\nconst y = s.ofType(r);\nlet d = class extends e {\n  constructor(t) {\n    super(t), this.type = \"line-of-sight\", this.observer = null, this.extent = null;\n  }\n  initialize() {\n    this.addHandles(l(() => this._computeExtent(), t => {\n      null == t?.pending && this._set(\"extent\", null != t ? t.extent : null);\n    }, p));\n  }\n  get targets() {\n    return this._get(\"targets\") || new y();\n  }\n  set targets(t) {\n    this._set(\"targets\", i(t, this.targets, y));\n  }\n  get spatialReference() {\n    return null != this.observer?.position ? this.observer.position.spatialReference : null;\n  }\n  get requiredPropertiesForEditing() {\n    return [this.observer?.position];\n  }\n  async waitComputeExtent() {\n    const t = this._computeExtent();\n    return null != t ? t.pending : Promise.resolve();\n  }\n  _computeExtent() {\n    const t = this.spatialReference;\n    if (null == this.observer?.position || null == t) return null;\n    const e = t => \"absolute-height\" === h(t.position, t.elevationInfo),\n      o = this.observer.position,\n      r = m(o.x, o.y, o.z, o.x, o.y, o.z);\n    for (const i of this.targets) if (null != i.position) {\n      const e = c(i.position, t);\n      if (null != e.pending) return {\n        pending: e.pending,\n        extent: null\n      };\n      if (null != e.geometry) {\n        const {\n          x: t,\n          y: o,\n          z: s\n        } = e.geometry;\n        g(r, [t, o, s]);\n      }\n    }\n    const s = f(r, t);\n    return e(this.observer) && this.targets.every(e) || (s.zmin = void 0, s.zmax = void 0), {\n      pending: null,\n      extent: s\n    };\n  }\n  clear() {\n    this.observer = null, this.targets.removeAll();\n  }\n};\nt([a({\n  type: [\"line-of-sight\"]\n})], d.prototype, \"type\", void 0), t([a({\n  type: o,\n  json: {\n    read: !0,\n    write: !0\n  }\n})], d.prototype, \"observer\", void 0), t([a({\n  cast: n,\n  type: y,\n  nonNullable: !0,\n  json: {\n    read: !0,\n    write: !0\n  }\n})], d.prototype, \"targets\", null), t([a({\n  value: null,\n  readOnly: !0\n})], d.prototype, \"extent\", void 0), t([a({\n  readOnly: !0\n})], d.prototype, \"spatialReference\", null), t([a({\n  readOnly: !0\n})], d.prototype, \"requiredPropertiesForEditing\", null), d = t([u(\"esri.analysis.LineOfSightAnalysis\")], d);\nconst v = d;\nexport { v as default };"],
  "mappings": "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",
  "names": ["y", "d", "t", "e", "a", "i", "V", "o", "s"]
}
