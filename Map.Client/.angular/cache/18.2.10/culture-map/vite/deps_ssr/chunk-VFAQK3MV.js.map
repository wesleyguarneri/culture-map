{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { ShaderOutput as t } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { NoParameters as r } from \"../core/shaderModules/interfaces.js\";\nimport { ReloadableShaderModule as i } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as o } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { parameter as s } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { CullFaceOptions as n } from \"../lib/basicInterfaces.js\";\nimport { oitBlending as a, oitDepthTest as l, oitDepthWrite as p, oitDrawBuffers as c, getOITPolygonOffset as u } from \"../lib/OrderIndependentTransparency.js\";\nimport { Program as h } from \"../lib/Program.js\";\nimport { stencilWriteMaskOn as d, stencilToolMaskBaseParams as m, stencilBaseAllZerosParams as f } from \"../lib/StencilUtils.js\";\nimport { TransparencyPassType as y } from \"../lib/TransparencyPassType.js\";\nimport { VertexAttribute as b } from \"../lib/VertexAttribute.js\";\nimport { DefaultTechniqueConfiguration as P } from \"../materials/DefaultTechniqueConfiguration.js\";\nimport { I as g } from \"../../../../chunks/ImageMaterial.glsl.js\";\nimport { BlendFactor as T } from \"../../../webgl/enums.js\";\nimport { simpleBlendingParams as O, makePipelineState as j, cullingParams as S, defaultDepthWriteParams as v, defaultColorWriteParams as I } from \"../../../webgl/renderState.js\";\nclass N extends r {}\nclass E extends o {\n  initializeProgram(e) {\n    return new h(e.rctx, E.shader.get().build(this.configuration), _);\n  }\n  _setPipelineState(e, r) {\n    const i = this.configuration,\n      o = e === y.NONE,\n      s = e === y.FrontFace;\n    return j({\n      blending: i.output === t.Color && i.transparent ? o ? w : a(e) : null,\n      culling: S(i.cullFace),\n      depthTest: {\n        func: l(e)\n      },\n      depthWrite: o ? i.writeDepth ? v : null : p(e),\n      drawBuffers: c(e),\n      colorWrite: I,\n      stencilWrite: i.hasOccludees ? d : null,\n      stencilTest: i.hasOccludees ? r ? m : f : null,\n      polygonOffset: o || s ? null : u(i.enableOffset)\n    });\n  }\n  initializePipeline() {\n    return this._occludeePipelineState = this._setPipelineState(this.configuration.transparencyPassType, !0), this._setPipelineState(this.configuration.transparencyPassType, !1);\n  }\n  getPipeline(e) {\n    return e ? this._occludeePipelineState : super.getPipeline();\n  }\n}\nE.shader = new i(g, () => import(\"./ImageMaterial.glsl.js\"));\nconst w = O(T.ONE, T.ONE_MINUS_SRC_ALPHA);\nclass C extends P {\n  constructor() {\n    super(...arguments), this.output = t.Color, this.cullFace = n.None, this.hasSlicePlane = !1, this.transparent = !1, this.enableOffset = !0, this.writeDepth = !0, this.hasOccludees = !1, this.transparencyPassType = y.NONE, this.multipassEnabled = !1, this.cullAboveGround = !1, this.perspectiveInterpolation = !0;\n  }\n}\ne([s({\n  count: t.COUNT\n})], C.prototype, \"output\", void 0), e([s({\n  count: n.COUNT\n})], C.prototype, \"cullFace\", void 0), e([s()], C.prototype, \"hasSlicePlane\", void 0), e([s()], C.prototype, \"transparent\", void 0), e([s()], C.prototype, \"enableOffset\", void 0), e([s()], C.prototype, \"writeDepth\", void 0), e([s()], C.prototype, \"hasOccludees\", void 0), e([s({\n  count: y.COUNT\n})], C.prototype, \"transparencyPassType\", void 0), e([s()], C.prototype, \"multipassEnabled\", void 0), e([s()], C.prototype, \"cullAboveGround\", void 0), e([s()], C.prototype, \"perspectiveInterpolation\", void 0), e([s({\n  constValue: !1\n})], C.prototype, \"occlusionPass\", void 0);\nconst _ = new Map([[b.POSITION, 0], [b.UV0, 2], [b.PERSPECTIVEDIVIDE, 3]]);\nexport { N as ImageMaterialPassParameters, E as ImageMaterialTechnique, C as ImageMaterialTechniqueConfiguration, _ as vertexAttributeLocations };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { BufferViewFloat as e } from \"../../../../geometry/support/buffer/BufferView.js\";\nimport { isOIDorHighlight as t, isColor as r, ShaderOutput as s } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { CullFaceOptions as a } from \"../lib/basicInterfaces.js\";\nimport { GLTextureMaterial as i } from \"../lib/GLTextureMaterial.js\";\nimport { MaterialParameters as n } from \"../lib/Material.js\";\nimport { OITPolygonOffsetLimit as o } from \"../lib/OrderIndependentTransparency.js\";\nimport { RenderSlot as p } from \"../lib/RenderSlot.js\";\nimport { assert as u } from \"../lib/Util.js\";\nimport { VertexAttribute as c } from \"../lib/VertexAttribute.js\";\nimport { DefaultBufferWriter as l } from \"./DefaultBufferWriter.js\";\nimport { PositionUVLayout as h } from \"./DefaultLayouts.js\";\nimport { TriangleMaterial as m } from \"./TriangleMaterial.js\";\nimport { writeBufferFloat as f, writeDefaultAttribute as d } from \"./internal/bufferWriterUtils.js\";\nimport { vertexAttributeLocations as _, ImageMaterialTechniqueConfiguration as E, ImageMaterialTechnique as T } from \"../shaders/ImageMaterialTechnique.js\";\nclass g extends m {\n  constructor(e) {\n    super(e, new P()), this.supportsEdges = !0, this.produces = new Map([[p.OPAQUE_MATERIAL, e => t(e) || r(e) && !this.parameters.transparent], [p.TRANSPARENT_MATERIAL, e => r(e) && this.parameters.transparent && this.parameters.writeDepth], [p.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL, e => r(e) && this.parameters.transparent && !this.parameters.writeDepth], [p.DRAPED_MATERIAL, e => r(e) || t(e)]]), this._vertexAttributeLocations = _, this._configuration = new E();\n  }\n  getConfiguration(e, t) {\n    return this._configuration.output = e, this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.transparent = this.parameters.transparent, this._configuration.writeDepth = this.parameters.writeDepth, this._configuration.hasOccludees = this.parameters.hasOccludees, this._configuration.transparencyPassType = t.transparencyPassType, this._configuration.enableOffset = t.camera.relativeElevation < o, this._configuration.multipassEnabled = t.multipassEnabled, this._configuration.cullAboveGround = t.multipassTerrain.cullAboveGround, this._configuration.perspectiveInterpolation = this.parameters.perspectiveInterpolation, this._configuration;\n  }\n  createGLMaterial(e) {\n    return new I(e);\n  }\n  createBufferWriter() {\n    const e = h.clone();\n    return this.parameters.perspectiveInterpolation && e.f32(c.PERSPECTIVEDIVIDE), new b(e);\n  }\n}\nclass I extends i {\n  constructor(e) {\n    super({\n      ...e,\n      ...e.material.parameters\n    });\n  }\n  _updateParameters(e) {\n    return this.updateTexture(this._material.parameters.textureId), this._material.setParameters(this.textureBindParameters), this.ensureTechnique(T, e);\n  }\n  _updateOccludeeState(e) {\n    e.hasOccludees !== this._material.parameters.hasOccludees && (this._material.setParameters({\n      hasOccludees: e.hasOccludees\n    }), this._updateParameters(e));\n  }\n  beginSlot(e) {\n    return this._output === s.Color && this._updateOccludeeState(e), this._updateParameters(e);\n  }\n}\nclass b extends l {\n  write(t, r, s, a, i) {\n    for (const n of this.vertexBufferLayout.fields.keys()) {\n      const o = s.attributes.get(n);\n      if (o) if (n === c.PERSPECTIVEDIVIDE) {\n        u(1 === o.size);\n        const t = a.getField(n, e);\n        t && f(o, t, i);\n      } else d(n, o, t, r, a, i);\n    }\n  }\n}\nclass P extends n {\n  constructor() {\n    super(...arguments), this.transparent = !1, this.writeDepth = !0, this.hasSlicePlane = !1, this.cullFace = a.None, this.hasOccludees = !1, this.opacity = 1, this.textureId = null, this.initTextureTransparent = !0, this.perspectiveInterpolation = !1;\n  }\n}\nexport { g as ImageMaterial, P as Parameters };"],
  "mappings": "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",
  "names": ["E", "r", "e", "_", "i", "o", "s", "h", "f", "t", "e", "E", "_", "t", "f", "r", "s", "i", "n", "o", "u"]
}
