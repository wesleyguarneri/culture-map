import { createRequire } from 'module';const require = createRequire(import.meta.url);
import {
  u as u4
} from "./chunk-OVZCDMLP.js";
import {
  u as u3
} from "./chunk-BQIZESK5.js";
import "./chunk-CG3HCSGN.js";
import {
  M as M2
} from "./chunk-G3GRFYNY.js";
import {
  e as e8
} from "./chunk-YNMAPIWB.js";
import {
  e as e7
} from "./chunk-YQGPDXSM.js";
import {
  e as e6
} from "./chunk-K2LPE2X5.js";
import "./chunk-5E5FRWDI.js";
import {
  R
} from "./chunk-6VIW23IK.js";
import {
  f as f2
} from "./chunk-VFDQ2IPM.js";
import "./chunk-DYMQWLSL.js";
import {
  e as e5
} from "./chunk-Q23C3NFQ.js";
import "./chunk-FVMSCDY4.js";
import "./chunk-MH54QISY.js";
import "./chunk-ZUFYTMSS.js";
import "./chunk-PPORR5ZR.js";
import {
  F as F2,
  q,
  z
} from "./chunk-SPTEUQ5I.js";
import {
  a as a3
} from "./chunk-ARMSKPOE.js";
import "./chunk-IA5UKRA2.js";
import "./chunk-7HWP2QWI.js";
import "./chunk-DUZT23UA.js";
import "./chunk-CP2IGGT7.js";
import "./chunk-ZEZCWQFR.js";
import {
  o
} from "./chunk-2FVMT5KX.js";
import "./chunk-MZ5BWUSD.js";
import {
  c as c2
} from "./chunk-6AG7CVLS.js";
import {
  e as e4,
  ee,
  f
} from "./chunk-73EW5OP6.js";
import {
  h as h3,
  p as p2
} from "./chunk-J5J3QXIV.js";
import "./chunk-NCXTRC7L.js";
import "./chunk-F2LQGEBE.js";
import "./chunk-7RXQQ22H.js";
import {
  E2 as E,
  P as P3,
  p
} from "./chunk-VC76DE2W.js";
import "./chunk-O3EWP5OO.js";
import {
  t
} from "./chunk-6NBMJUQX.js";
import "./chunk-WXECQAUG.js";
import "./chunk-RFURERTV.js";
import "./chunk-CATQ6UZ5.js";
import {
  N
} from "./chunk-MIWJLMUG.js";
import "./chunk-MDOKECP3.js";
import "./chunk-IVVINOEJ.js";
import "./chunk-DUSY4H5O.js";
import "./chunk-XUM2DDAI.js";
import "./chunk-SF5T5ZX3.js";
import "./chunk-7ZLUUE5X.js";
import "./chunk-4Y6TKPBN.js";
import "./chunk-BV256A2V.js";
import "./chunk-KJGRJNY4.js";
import "./chunk-AJ474NL3.js";
import "./chunk-X3HF4XA3.js";
import "./chunk-AP543QXG.js";
import "./chunk-6SSO6SUU.js";
import "./chunk-ATL6GPJC.js";
import {
  x
} from "./chunk-IPGNBAEV.js";
import "./chunk-N7TLJ6LV.js";
import {
  a as a2
} from "./chunk-INUNNFZT.js";
import "./chunk-NF2MOJH5.js";
import "./chunk-2NPPOPEZ.js";
import "./chunk-JP4VYCP3.js";
import "./chunk-BKOZEXTL.js";
import "./chunk-NLRSH3TD.js";
import "./chunk-3Q4YEFJ3.js";
import "./chunk-K6JW77RY.js";
import "./chunk-377KSYNB.js";
import "./chunk-PSH57UZT.js";
import "./chunk-KRRPY5PU.js";
import "./chunk-YUYMEQ3T.js";
import "./chunk-ZTTGFJJT.js";
import "./chunk-TFCCIKDP.js";
import "./chunk-FT6GF7ST.js";
import "./chunk-4B3LNBOC.js";
import "./chunk-KAKCJGSZ.js";
import {
  st
} from "./chunk-LEBOC3ZD.js";
import "./chunk-FSYMZVRK.js";
import "./chunk-T4DTOVU4.js";
import "./chunk-GYNRSS5Q.js";
import "./chunk-TO2KOAJE.js";
import "./chunk-JZISCETB.js";
import "./chunk-DM6DHTKZ.js";
import "./chunk-OEBP4L4N.js";
import "./chunk-L3REUUFH.js";
import "./chunk-JMJZXQF3.js";
import "./chunk-UT2ZOLZR.js";
import "./chunk-DTMLHZFB.js";
import {
  n as n3
} from "./chunk-WQIJCG2D.js";
import "./chunk-WOWVQEU2.js";
import "./chunk-JRL65HQ7.js";
import "./chunk-LUORW76W.js";
import "./chunk-62PN4TEW.js";
import "./chunk-OPXEKSUB.js";
import "./chunk-PAFRRTJD.js";
import "./chunk-ZCCDVQ3H.js";
import "./chunk-T2SCEBLQ.js";
import {
  e as e3
} from "./chunk-FYGR4X6I.js";
import "./chunk-PZKTCBLJ.js";
import "./chunk-O7RCHW3H.js";
import "./chunk-N4FQBAT2.js";
import "./chunk-K7U66W6G.js";
import "./chunk-WQMUOLHB.js";
import "./chunk-LVERV6OU.js";
import "./chunk-3FFTEL3W.js";
import "./chunk-4WON4QDF.js";
import "./chunk-45GTM6LF.js";
import "./chunk-XUZTWNKD.js";
import "./chunk-Q5PBA64J.js";
import "./chunk-TIAWSZQK.js";
import "./chunk-KWHFMZEB.js";
import "./chunk-FBMJVQWQ.js";
import "./chunk-WUTM5T74.js";
import "./chunk-ONVI4SC3.js";
import "./chunk-2IRGMYX2.js";
import "./chunk-OU2TYICP.js";
import "./chunk-DZAXDRPA.js";
import "./chunk-RV5QLAWU.js";
import "./chunk-AA5NMQ6N.js";
import "./chunk-Z4PRO5ND.js";
import "./chunk-MHGADXDL.js";
import "./chunk-VYJ7IUDT.js";
import "./chunk-2ZXVDYHF.js";
import "./chunk-22UDIQGJ.js";
import "./chunk-XFLPRRYT.js";
import "./chunk-Z5ZLX3BE.js";
import "./chunk-23Q4INNG.js";
import "./chunk-LZSSTWLW.js";
import "./chunk-ALQIX2AS.js";
import "./chunk-D3VQCVGJ.js";
import "./chunk-PFTDB6ZJ.js";
import "./chunk-6YHZYHJS.js";
import "./chunk-UVHNQY4M.js";
import "./chunk-FCVY35OB.js";
import "./chunk-TSTMST4X.js";
import "./chunk-I47GCEJP.js";
import "./chunk-LA4GCRJY.js";
import "./chunk-ZTMARHUQ.js";
import "./chunk-P5MJSFMN.js";
import "./chunk-HMPRRFR4.js";
import "./chunk-UE7ZYRIH.js";
import "./chunk-W24M6HII.js";
import "./chunk-FWGI52X4.js";
import "./chunk-E5RXQH35.js";
import "./chunk-62ZEBDPC.js";
import "./chunk-ZFMS3XGM.js";
import "./chunk-QWQJOAVR.js";
import "./chunk-YLQMUXQA.js";
import "./chunk-4U7LUZFD.js";
import "./chunk-T257OY4U.js";
import "./chunk-BMO2W6EC.js";
import "./chunk-QA265FYQ.js";
import "./chunk-HUOFTIIK.js";
import "./chunk-6NVF5BZF.js";
import "./chunk-ZDFN6OZC.js";
import "./chunk-DUV7OLAZ.js";
import "./chunk-KSOKDIBG.js";
import "./chunk-3NWWTJOW.js";
import "./chunk-TRF6JO5N.js";
import "./chunk-ZHVMMFTW.js";
import "./chunk-HKAONIBH.js";
import {
  c
} from "./chunk-RHVUMKCC.js";
import "./chunk-2B3WLK32.js";
import "./chunk-EPIUUGS2.js";
import "./chunk-TMXHZTIG.js";
import "./chunk-FIQ7DCCC.js";
import {
  h as h2
} from "./chunk-SNHVHW2N.js";
import "./chunk-HVJMAP6C.js";
import "./chunk-MDEPINSI.js";
import "./chunk-QATJRB5Q.js";
import "./chunk-7Z4UWMRU.js";
import "./chunk-YEB36ZCF.js";
import "./chunk-WHVSAUHM.js";
import "./chunk-LQUVB46M.js";
import "./chunk-GHPF24X4.js";
import "./chunk-UC4DX4SE.js";
import "./chunk-44O4APOL.js";
import "./chunk-LCPLUSDH.js";
import "./chunk-KINQ7OJ3.js";
import "./chunk-KYLW5XXS.js";
import "./chunk-B63XAMYJ.js";
import "./chunk-THUD7LGO.js";
import "./chunk-YSJVVDDH.js";
import "./chunk-DLWZ3HVT.js";
import "./chunk-B76NC7GX.js";
import {
  h
} from "./chunk-HFXXFWYN.js";
import "./chunk-EXKCGLRO.js";
import "./chunk-WRLGLGM6.js";
import "./chunk-47DYJR3W.js";
import "./chunk-QRWQ6QBB.js";
import "./chunk-ZSJNH2BT.js";
import "./chunk-2W7YKBRA.js";
import "./chunk-RIZOHDTP.js";
import "./chunk-ZFES27RA.js";
import "./chunk-XP2AJZUL.js";
import "./chunk-CZA7RDJP.js";
import "./chunk-NCMX3DAD.js";
import "./chunk-BCNABTAE.js";
import "./chunk-3PPEJ4QJ.js";
import "./chunk-ZEOLGKXL.js";
import "./chunk-HITI6WDM.js";
import "./chunk-IS4RJOPJ.js";
import "./chunk-XK3CKE5Q.js";
import "./chunk-AMH7CZMY.js";
import "./chunk-EAVSYZXD.js";
import "./chunk-7GHUVMBI.js";
import "./chunk-Q5JLNMWZ.js";
import "./chunk-AABDXAD3.js";
import "./chunk-LGS63R4F.js";
import "./chunk-L6FG3WIC.js";
import "./chunk-6ZLH7XBS.js";
import "./chunk-44ZUWZXU.js";
import {
  D,
  F,
  G,
  P as P2
} from "./chunk-NAG6YX7T.js";
import "./chunk-NHYYZMJR.js";
import "./chunk-U4EMQMDC.js";
import "./chunk-AVCKPV77.js";
import "./chunk-MNBTLVRM.js";
import "./chunk-GNCXYHNE.js";
import "./chunk-CSK4VZQ7.js";
import "./chunk-2TNGEJGS.js";
import "./chunk-OYGNGIHQ.js";
import "./chunk-GSG4T2KM.js";
import "./chunk-D7C26LZP.js";
import "./chunk-BZHHBBFX.js";
import "./chunk-GK5M6FUR.js";
import "./chunk-MRP3FBLV.js";
import "./chunk-Y7SJWJAL.js";
import "./chunk-A2FDYA6M.js";
import "./chunk-YGAXDKHF.js";
import "./chunk-4TOSJLKR.js";
import "./chunk-ORYC4PVJ.js";
import "./chunk-DXIKKLD7.js";
import "./chunk-VQNXE43R.js";
import "./chunk-VZ37C3ID.js";
import "./chunk-FSG7HOZQ.js";
import "./chunk-Q5TIVVER.js";
import "./chunk-NVOJILW6.js";
import "./chunk-KYPTWEOO.js";
import "./chunk-WVFB3H4O.js";
import "./chunk-C7BQE556.js";
import "./chunk-ZREJ3Y2F.js";
import "./chunk-IR6CVPPC.js";
import "./chunk-BBUQOCRA.js";
import "./chunk-YBUJLIWZ.js";
import "./chunk-DL2B6IFJ.js";
import "./chunk-VOOO6FU5.js";
import "./chunk-IUPJR3FF.js";
import "./chunk-TGZW6QWO.js";
import "./chunk-OYIDHTXG.js";
import {
  u as u2
} from "./chunk-KUBMHTYA.js";
import "./chunk-VSQZQLTQ.js";
import "./chunk-K43CZ3M5.js";
import "./chunk-6EIBUVMG.js";
import "./chunk-S4XQLN73.js";
import "./chunk-NXXQ35YM.js";
import "./chunk-LM3JDV4W.js";
import "./chunk-34V2CLL5.js";
import "./chunk-7V4JSBFA.js";
import "./chunk-2EJFYNM7.js";
import "./chunk-DC5LRNPY.js";
import "./chunk-ASCK5HJ5.js";
import "./chunk-5X5U7R6O.js";
import "./chunk-XNLAOXPY.js";
import "./chunk-C2OXE4NQ.js";
import "./chunk-KOI252FF.js";
import "./chunk-I2TVVMQ6.js";
import "./chunk-5EGQYY2H.js";
import "./chunk-JKPUNUQA.js";
import "./chunk-SR7PRON4.js";
import "./chunk-HGHPYGKP.js";
import "./chunk-4DSGTDZJ.js";
import "./chunk-VYTPFEL2.js";
import "./chunk-RLGDH6IY.js";
import "./chunk-MRPCXIVS.js";
import "./chunk-YTKVV2Y3.js";
import "./chunk-GCVQXAS4.js";
import "./chunk-UFQD6AL4.js";
import {
  B,
  e2
} from "./chunk-UVQYXHKM.js";
import {
  n
} from "./chunk-M5N6UHWJ.js";
import "./chunk-EBCBYN6Y.js";
import "./chunk-ODFKYX74.js";
import "./chunk-EGBDRLCX.js";
import "./chunk-THZPD5CT.js";
import "./chunk-OBCA6CWH.js";
import "./chunk-2JI245BP.js";
import "./chunk-N34BRXVM.js";
import "./chunk-7QV7DHWN.js";
import "./chunk-4L4Y34YK.js";
import "./chunk-BXONKQKI.js";
import "./chunk-2HDBQXAR.js";
import "./chunk-RNF7VOCU.js";
import {
  _
} from "./chunk-TIRJMGGG.js";
import "./chunk-ZDRQSPB6.js";
import "./chunk-DCXDXGAR.js";
import "./chunk-BCCDYCTQ.js";
import "./chunk-AYL3HQHD.js";
import "./chunk-66YQWHHE.js";
import "./chunk-QGBMZIP4.js";
import "./chunk-AOEBZVTA.js";
import "./chunk-2OZSYJDX.js";
import "./chunk-MZM4INJV.js";
import {
  n as n2
} from "./chunk-J4GMQHGL.js";
import "./chunk-MHPE4SZA.js";
import {
  M
} from "./chunk-6SSA7P3A.js";
import "./chunk-FQBTLEUI.js";
import "./chunk-GS7Y3YOG.js";
import "./chunk-Y2HYKTTT.js";
import "./chunk-XLEC46FY.js";
import "./chunk-4AZPIP7K.js";
import "./chunk-JSKTDZU2.js";
import "./chunk-G73HQZEL.js";
import {
  A,
  P,
  d as d2
} from "./chunk-LZSLQ24Q.js";
import "./chunk-U3RHUXYK.js";
import "./chunk-7DBI6LQG.js";
import "./chunk-AUUN7RFQ.js";
import "./chunk-JAMSDYD6.js";
import "./chunk-PH6NPTP7.js";
import {
  e
} from "./chunk-NUICEVIH.js";
import {
  S
} from "./chunk-NXK752PZ.js";
import {
  y
} from "./chunk-UVNLCXWD.js";
import "./chunk-PNUA7JOS.js";
import "./chunk-OR2FKGUM.js";
import {
  a3 as a
} from "./chunk-UDMPWVPF.js";
import "./chunk-XJNKCEWL.js";
import {
  d
} from "./chunk-AIZ3T7E3.js";
import "./chunk-6UEMNP3E.js";
import {
  u
} from "./chunk-6WGE3IUL.js";
import "./chunk-MLYB2YW4.js";
import "./chunk-6JFGZTLU.js";
import "./chunk-2ZJE6ZFX.js";
import "./chunk-L4CMR4WM.js";
import "./chunk-7JIACICA.js";
import "./chunk-IE4UBD3F.js";
import "./chunk-IAO6HACY.js";
import {
  __spreadProps,
  __spreadValues
} from "./chunk-XBPEBUD5.js";

// ../../../node_modules/@arcgis/core/analysis/DirectLineMeasurementAnalysis.js
var n4 = class extends c {
  constructor(t2) {
    super(t2), this.type = "direct-line-measurement", this.startPoint = null, this.endPoint = null, this.unit = null;
  }
  get requiredPropertiesForEditing() {
    return [this.startPoint, this.endPoint];
  }
  clear() {
    this.startPoint = null, this.endPoint = null;
  }
};
e([y({
  type: ["direct-line-measurement"]
})], n4.prototype, "type", void 0), e([y({
  type: _
})], n4.prototype, "startPoint", void 0), e([y({
  type: _
})], n4.prototype, "endPoint", void 0), e([y({
  type: M,
  value: null
})], n4.prototype, "unit", void 0), e([y({
  readOnly: true
})], n4.prototype, "requiredPropertiesForEditing", null), n4 = e([a("esri.analysis.DirectLineMeasurementAnalysis")], n4);
var p3 = n4;

// ../../../node_modules/@arcgis/core/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DView.js
var L;
!function(e9) {
  e9.Manipulators = "manipulators", e9.AnalysisViewDestroyed = "analysis-view-destroyed", e9.AnalysisView = "analysis-view";
}(L || (L = {}));
var P4 = class extends S {
  constructor(e9) {
    super(e9), this.cursorPoint = null, this._visible = false, this._laserLine = null, this.laserLineEnabled = true, this._lastDraggedHandle = null;
  }
  initialize() {
    this._laserLine = new c2({
      view: this.view,
      attached: true,
      isDecoration: true
    }), this._updateVisibility(this._visible), this._connectToAnalysisView(), this.addHandles(d2(() => this._params, ({
      laserLineGlowColor: e9,
      laserLineInnerColor: i,
      laserLineGlobalAlpha: t2
    }) => {
      const s = this._laserLine, o2 = s.style;
      s.style = __spreadProps(__spreadValues({}, o2), {
        innerColor: i,
        glowColor: e9,
        globalAlpha: t2
      });
    }));
  }
  destroy() {
    this._laserLine = u(this._laserLine);
  }
  get _params() {
    const {
      accentColor: e9
    } = this.view.effectiveTheme;
    return {
      laserLineGlowColor: u2.toUnitRGB(e9),
      laserLineGlowWidth: 8,
      laserLineGlowFalloff: 8,
      laserLineInnerColor: u2.toUnitRGB(G(e9)),
      laserLineInnerWidth: 0.75,
      laserLineGlobalAlpha: 0.75 * e9.a,
      handleColor: F(e9, 0.5),
      handleRadius: 5
    };
  }
  get visible() {
    return this._visible;
  }
  set visible(e9) {
    e9 ? this.show() : this.hide();
  }
  get testData() {
  }
  get _cursorPosition() {
    const e9 = n2(), i = this.cursorPoint;
    return i && this.view.renderCoordsHelper.toRenderCoords(i, e9), e9;
  }
  get _startPosition() {
    const e9 = n2(), i = this.analysis.startPoint;
    return i && this.view.renderCoordsHelper.toRenderCoords(i, e9), e9;
  }
  get _endPosition() {
    const e9 = n2(), i = this.analysis.endPoint;
    return i && this.view.renderCoordsHelper.toRenderCoords(i, e9), e9;
  }
  get _laserLineParams() {
    const e9 = this._focusPosition, {
      active: i,
      lineState: t2
    } = this.toolState, s = this.analysisViewData, o2 = this.laserLineEnabled && !!e9 && "measured" !== t2 && i;
    if (!o2 || !this.visible || null == s || s.destroyed) return {
      heightManifoldTarget: null,
      pointDistanceLine: null,
      lineVerticalPlaneSegment: null
    };
    const n5 = s.actualVisualizedMeasurement, a4 = "local" !== this.view.viewingMode && o2 && !!this.analysis.startPoint && "geodesic" === n5, r = o2 && s.viewMode === e8.Triangle;
    return {
      heightManifoldTarget: "euclidean" === n5 ? e9 : null,
      pointDistanceLine: a4 ? this._pointDistanceLine : null,
      lineVerticalPlaneSegment: r ? h2(this._startPosition, this._endPosition) : null
    };
  }
  get _focusPosition() {
    const {
      lineState: e9
    } = this.toolState, i = this.analysisViewData, t2 = null != i && !i.destroyed && i.measurementMode === e7.Euclidean && i.viewMode === e8.Direct;
    switch (e9) {
      case "drawing":
        return t2 ? this._startPosition : this.analysis.endPoint ? this._endPosition : this._startPosition;
      case "editing":
        return t2 ? "start" === this._lastDraggedHandle ? this._endPosition : this._startPosition : "start" === this._lastDraggedHandle ? this._startPosition : this._endPosition;
      default:
        return null != this.cursorPoint ? this._cursorPosition : null;
    }
  }
  get _pointDistanceLine() {
    return {
      origin: "drawing" === this.toolState.lineState || "end" === this._lastDraggedHandle ? this._startPosition : this._endPosition,
      target: this._focusPosition
    };
  }
  createManipulators() {
    const e9 = this._params, {
      view: i
    } = this, t2 = () => {
      const t3 = f(e9.handleColor), s2 = [new e4(st(t3, 1, 32, 32))], o3 = new ee({
        view: i,
        renderObjects: s2
      });
      return o3.available = false, o3.radius = e9.handleRadius, [o3, t3];
    }, [s, o2] = t2(), [r, d4] = t2(), h4 = new ee({
      view: this.view,
      available: false,
      interactive: false
    });
    null != this.analysis.startPoint && (s.location = this.analysis.startPoint, s.available = true), null != this.analysis.endPoint && (r.location = this.analysis.endPoint, r.available = true);
    const c5 = () => {
      let e10 = this._lastDraggedHandle;
      s.grabbing && !r.grabbing && (e10 = "start"), r.grabbing && !s.grabbing && (e10 = "end"), s.grabbing || r.grabbing || (e10 = null), this._lastDraggedHandle = e10;
    }, p6 = s.events.on("grab-changed", c5), u5 = r.events.on("grab-changed", c5);
    return this.addHandles([p6, u5, d2(() => D(this._params.handleColor), (e10) => {
      o2.setParameters({
        color: e10
      }), d4.setParameters({
        color: e10
      });
    }, {
      equals: P2
    })], L.Manipulators), {
      start: s,
      end: r,
      cursor: h4
    };
  }
  show() {
    this.destroyed || this._visible || this._updateVisibility(true);
  }
  hide() {
    !this.destroyed && this._visible && this._updateVisibility(false);
  }
  _connectToAnalysisView() {
    this.removeHandles(L.AnalysisView), this.addHandles([d2(() => this.analysisViewData?.destroyed, (e9) => {
      e9 && this.removeHandles(L.AnalysisView);
    }, P), d2(() => ["measured" === this.toolState.lineState, this.analysisViewData], ([e9, i]) => {
      null == i || i.destroyed || (i.allowVisualElementsOrientationChange = !e9);
    }, P), d2(() => this._laserLineParams, (e9) => {
      const i = this._laserLine;
      i.heightManifoldTarget = e9.heightManifoldTarget, i.pointDistanceLine = e9.pointDistanceLine, i.lineVerticalPlaneSegment = e9.lineVerticalPlaneSegment;
    }, P)], L.AnalysisView);
  }
  _updateVisibility(e9) {
    this.initialized && (this._visible = e9, e9 ? this._laserLine.style = {
      innerColor: this._params.laserLineInnerColor,
      innerWidth: this._params.laserLineInnerWidth,
      glowColor: this._params.laserLineGlowColor,
      glowWidth: this._params.laserLineGlowWidth,
      glowFalloff: this._params.laserLineGlowFalloff,
      globalAlpha: this._params.laserLineGlobalAlpha
    } : this.view.cursor = null, this._laserLine.visible = e9);
  }
};
e([y({
  constructOnly: true
})], P4.prototype, "view", void 0), e([y()], P4.prototype, "_params", null), e([y({
  constructOnly: true
})], P4.prototype, "analysis", void 0), e([y({
  constructOnly: true
})], P4.prototype, "analysisViewData", void 0), e([y()], P4.prototype, "cursorPoint", void 0), e([y()], P4.prototype, "toolState", void 0), e([y()], P4.prototype, "visible", null), e([y()], P4.prototype, "testData", null), e([y()], P4.prototype, "_visible", void 0), e([y()], P4.prototype, "_laserLine", void 0), e([y({
  constructOnly: true
})], P4.prototype, "laserLineEnabled", void 0), e([y()], P4.prototype, "_cursorPosition", null), e([y()], P4.prototype, "_startPosition", null), e([y()], P4.prototype, "_endPosition", null), e([y()], P4.prototype, "_lastDraggedHandle", void 0), e([y()], P4.prototype, "_laserLineParams", null), e([y()], P4.prototype, "_focusPosition", null), e([y()], P4.prototype, "_pointDistanceLine", null), P4 = e([a("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DView")], P4);

// ../../../node_modules/@arcgis/core/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool.js
var x2 = class extends o {
  constructor(t2) {
    super(t2), this._updatingHandles = new h(), this._emulatedDrag = null, this.lineState = "initial", this.startPointSurfaceLocation = null, this.endPointSurfaceLocation = null, this.cursorPointSurfaceLocation = null, this.startManipulator = null, this.endManipulator = null, this.cursorManipulator = null, this._getSnappingContext = t((t3) => new e5({
      elevationInfo: {
        mode: "absolute-height",
        offset: 0
      },
      pointer: t3,
      editGeometryOperations: new E(new p("point", P3(true, false, this.view.spatialReference)), this.view.state.viewingMode),
      visualizer: new R()
    }));
  }
  initialize() {
    const {
      view: t2,
      analysis: e9,
      analysisViewData: i,
      visible: s
    } = this;
    this.measurementView = new P4({
      toolState: this,
      view: t2,
      analysis: e9,
      analysisViewData: i,
      visible: s
    });
    const r = a3(t2);
    this._snappingManagerResult = r, this.addHandles(r);
    const {
      start: o2,
      end: u5,
      cursor: p6
    } = this.measurementView.createManipulators(), c5 = (t3, e10, i2) => p2(t3, (t4, n5, a4, s2) => {
      const r2 = q(t4), o3 = this._snappingManager, u6 = this._getSnappingContext(s2), p7 = this._updatingHandles, {
        lineState: c6
      } = this;
      a4 = a4.next(r2).next(h3(this, [i2, e10])).next((i3) => {
        if ("cursorPoint" !== e10) {
          const i4 = this.analysis[e10];
          null != i4 && (t4.location = i4);
        }
        return i3;
      });
      const h4 = z(this.view), g2 = (t5) => {
        const n6 = h4(t5);
        return n6 || "drawing" !== this.lineState && "initial" !== this.lineState || (this[e10] = null, this[i2] = null), n6;
      };
      let v2 = n5.next(r2).next(g2);
      if ("touch" !== s2 || "editing" === c6) {
        const {
          snappingStep: t5,
          cancelSnapping: e11
        } = f2({
          snappingManager: o3,
          snappingContext: u6,
          updatingHandles: p7
        });
        a4 = a4.next(e11), v2 = v2.next(...t5);
      }
      v2.next((t5) => "start" !== t5.action ? t5 : null).next((n6) => {
        const a5 = x(n6.mapEnd, new _());
        this[e10] = a5, t4.location = a5, this[i2] = this._surfaceLocation(a5, n6.surfaceType);
      });
    }), g = (t3) => t3.events.on("grab-changed", () => {
      const t4 = o2.grabbing || u5.grabbing;
      this.lineState = t4 ? "editing" : "measured";
    });
    this.addHandles([c5(o2, "startPoint", "startPointSurfaceLocation"), c5(u5, "endPoint", "endPointSurfaceLocation"), c5(p6, "cursorPoint", "cursorPointSurfaceLocation"), g(o2), g(u5)]), this.manipulators.add(o2), this.manipulators.add(u5), this.manipulators.add(p6), this.startManipulator = o2, this.endManipulator = u5, this.cursorManipulator = p6, this.addHandles(d2(() => this.state, (t3) => {
      "measured" === t3 && this.finishToolCreation();
    }, A)), N(this);
  }
  destroy() {
    this._updatingHandles = u(this._updatingHandles), this.measurementView = u(this.measurementView);
  }
  get _snappingManager() {
    return this._snappingManagerResult.snappingManager;
  }
  get state() {
    const {
      analysis: t2
    } = this;
    if (null == t2.startPoint && null == t2.endPoint) return "ready";
    const {
      lineState: e9
    } = this;
    return this.validMeasurement && "editing" !== e9 && "drawing" !== e9 ? "measured" : "measuring";
  }
  get cursor() {
    return "ready" === this.state || "drawing" === this.lineState ? "crosshair" : null;
  }
  get startPoint() {
    return this.analysis.startPoint;
  }
  set startPoint(t2) {
    this.analysis.startPoint = t2;
  }
  get endPoint() {
    return this.analysis.endPoint;
  }
  set endPoint(t2) {
    this.analysis.endPoint = t2;
  }
  get cursorPoint() {
    return this.measurementView.cursorPoint;
  }
  set cursorPoint(t2) {
    this.measurementView.cursorPoint = t2;
  }
  get snappingOptions() {
    return this._snappingManager.options;
  }
  get validMeasurement() {
    return null != this.analysis.startPoint && null != this.analysis.endPoint;
  }
  get updating() {
    return this._updatingHandles.updating || this._snappingManager.updating;
  }
  onShow() {
    this.measurementView.show(), this._updateManipulatorAvailability();
  }
  onHide() {
    this.measurementView.hide();
  }
  onDeactivate() {
    this._emulatedDrag?.cancel(), this._emulatedDrag = null;
  }
  onInputEvent(t2) {
    switch (t2.type) {
      case "immediate-click":
        this._handleImmediateClick(t2);
        break;
      case "pointer-move":
        this._handlePointerMove(t2);
    }
    this._updateManipulatorAvailability();
  }
  _handlePointerMove(t2) {
    if (!this.active || this.view.navigating) return;
    const {
      pointerType: e9
    } = t2;
    if ("mouse" !== e9) return;
    const i = n3(t2), {
      lineState: n5,
      cursorManipulator: a4,
      endManipulator: s
    } = this;
    let r = false;
    null == this.cursorPoint && (this._emulatedDrag?.cancel(), this._emulatedDrag = V(a4, e9, i), r = true), "initial" === n5 && (this._emulatedDrag?.update(i), r = true), "drawing" === n5 && (s.events.emit("drag", {
      action: "update",
      start: i,
      screenPoint: i
    }), r = true), r && t2.stopPropagation();
  }
  _handleImmediateClick(t2) {
    if (!this.active) return;
    if (!M2(t2)) return;
    const e9 = n3(t2), {
      pointerType: i
    } = t2, {
      cursorManipulator: n5,
      startManipulator: a4,
      endManipulator: s,
      lineState: r
    } = this;
    let o2 = false;
    switch (null == this.cursorPoint && (this._emulatedDrag?.cancel(), this._emulatedDrag = V(n5, i, e9)), r) {
      case "initial":
        if (this._emulatedDrag?.update(e9), null != this.cursorPoint) {
          this._emulatedDrag?.end(e9), this._emulatedDrag = null;
          const {
            cursorPoint: t3
          } = this;
          this.startPoint = t3, this.startPointSurfaceLocation = this.cursorPointSurfaceLocation, a4.location = t3, a4.interactive = false, s.interactive = false, this.lineState = "drawing", this._emulatedDrag = V(s, i, e9), o2 = true;
        }
        break;
      case "drawing":
        this._emulatedDrag?.update(e9), null != this.endPoint && (this._emulatedDrag?.end(e9), this._emulatedDrag = null, a4.interactive = true, s.interactive = true, this.lineState = "measured", o2 = true);
    }
    o2 && t2.stopPropagation();
  }
  _surfaceLocation(t2, e9) {
    return e9 === F2.GROUND ? "on-the-surface" : (t2.z ?? 0) >= this._getElevation(t2) ? "above-the-surface" : "below-the-surface";
  }
  _updateManipulatorAvailability() {
    this.startManipulator.available = null != this.analysis.startPoint, this.endManipulator.available = null != this.analysis.endPoint;
  }
  _getElevation(t2) {
    return this.view.basemapTerrain.ready ? a2(this.view.elevationProvider, t2) ?? 0 : 0;
  }
  get test() {
  }
};
function V(t2, e9, i) {
  return t2.events.emit("drag", {
    action: "start",
    pointerType: e9,
    start: i,
    screenPoint: i
  }), {
    update: (e10) => t2.events.emit("drag", {
      action: "update",
      start: e10,
      screenPoint: e10
    }),
    end: (e10) => t2.events.emit("drag", {
      action: "end",
      start: e10,
      screenPoint: e10
    }),
    cancel: () => t2.events.emit("drag", {
      action: "cancel"
    })
  };
}
e([y({
  readOnly: true
})], x2.prototype, "state", null), e([y()], x2.prototype, "lineState", void 0), e([y({
  readOnly: true
})], x2.prototype, "cursor", null), e([y()], x2.prototype, "startPoint", null), e([y()], x2.prototype, "endPoint", null), e([y()], x2.prototype, "cursorPoint", null), e([y({
  constructOnly: true
})], x2.prototype, "analysis", void 0), e([y({
  constructOnly: true
})], x2.prototype, "analysisViewData", void 0), e([y()], x2.prototype, "measurementView", void 0), e([y({
  constructOnly: true
})], x2.prototype, "view", void 0), e([y({
  readOnly: true
})], x2.prototype, "validMeasurement", null), e([y({
  value: null
})], x2.prototype, "startPointSurfaceLocation", void 0), e([y({
  value: null
})], x2.prototype, "endPointSurfaceLocation", void 0), e([y({
  value: null
})], x2.prototype, "cursorPointSurfaceLocation", void 0), e([y()], x2.prototype, "updating", null), x2 = e([a("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool")], x2);
var H = x2;

// ../../../node_modules/@arcgis/core/widgets/DirectLineMeasurement3D/DirectLineMeasurement3DViewModel.js
var p4 = class extends u4 {
  constructor(t2) {
    super(t2), this.analysis = null, this.supportedViewType = "3d", this.unsupportedErrorMessage = "DirectLineMeasurement3DViewModel is only supported in 3D views.", this._userUnit = null, this._userUnitOptions = null;
  }
  initialize() {
    this.addHandles(d2(() => ({
      analysis: this.analysis,
      unit: this.unit
    }), ({
      analysis: t2,
      unit: e9
    }) => {
      null != t2 && (t2.unit = e9);
    }, A));
  }
  get state() {
    return this.disabled || !this.ready ? "disabled" : null == this.tool ? "ready" : this.tool.state;
  }
  get measurement() {
    const {
      tool: t2
    } = this;
    if (null == t2) return null;
    const e9 = () => ({
      text: null,
      state: "unavailable"
    }), i = (t3) => ({
      text: t3,
      state: "available"
    }), {
      analysisViewData: s
    } = t2, n5 = null != s.result;
    return {
      mode: s.result?.mode ?? "euclidean",
      directDistance: n5 && "euclidean" === s.actualVisualizedMeasurement ? i(s.directLabelText) : e9(),
      horizontalDistance: n5 ? i(s.horizontalLabelText) : e9(),
      verticalDistance: n5 ? i(s.verticalLabelText) : e9()
    };
  }
  set unitOptions(t2) {
    this._userUnitOptions = t2, this._set("unitOptions", this._filteredOrAllUnits(this._userUnitOptions));
  }
  get unitOptions() {
    return this._filteredOrAllUnits(this._userUnitOptions);
  }
  set unit(t2) {
    this._userUnit = t2 ? this._findSelectableUnit(t2, this._userUnit) : null;
  }
  get unit() {
    return this._userUnit ? (this._userUnit = this._findSelectableUnit(this._userUnit, this.defaultUnit), this._userUnit) : this._findSelectableUnit(this.defaultUnit);
  }
  constructAnalysis() {
    return new p3();
  }
  constructTool() {
    return new H({
      view: this.view,
      analysis: this.analysis,
      analysisViewData: this.analysisView,
      visible: this.visible
    });
  }
  _findSelectableUnit(t2, e9) {
    const i = this.unitOptions;
    return i.includes(t2) ? t2 : e9 ? this._findSelectableUnit(e9) : i[0];
  }
  _filteredOrAllUnits(t2) {
    if (!t2) return M.slice();
    const e9 = t2.filter((t3) => M.includes(t3));
    return 0 === e9.length ? M.slice() : e9;
  }
};
e([y({
  type: p3
})], p4.prototype, "analysis", void 0), e([y({
  readOnly: true
})], p4.prototype, "state", null), e([y({
  readOnly: true
})], p4.prototype, "measurement", null), e([y()], p4.prototype, "unitOptions", null), e([y()], p4.prototype, "unit", null), e([y(e6)], p4.prototype, "defaultUnit", void 0), e([y()], p4.prototype, "_userUnit", void 0), e([y()], p4.prototype, "_userUnitOptions", void 0), p4 = e([a("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel")], p4);
var c3 = p4;

// ../../../node_modules/@arcgis/core/widgets/DirectLineMeasurement3D.js
var p5 = "esri-direct-line-measurement-3d";
var m = {
  base: p5,
  newMeasurementButton: `${p5}__clear-button`
};
var c4 = class extends B {
  constructor(e9, t2) {
    super(e9, t2), this.messages = null, this.messagesCommon = null, this.viewModel = new c3();
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e9) {
    this.viewModel.view = e9;
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(e9) {
    this.viewModel.visible = e9;
  }
  get active() {
    return this.viewModel.active;
  }
  get analysis() {
    return this.viewModel.analysis;
  }
  set analysis(e9) {
    this.viewModel.analysis = e9;
  }
  get icon() {
    return "measure-line";
  }
  set icon(e9) {
    this._overrideIfSome("icon", e9);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e9) {
    this._overrideIfSome("label", e9);
  }
  get unitOptions() {
    return this.viewModel.unitOptions;
  }
  set unitOptions(e9) {
    this.viewModel.unitOptions = e9;
  }
  get unit() {
    return this.viewModel.unit;
  }
  set unit(e9) {
    this.viewModel.unit = e9;
  }
  render() {
    const {
      messages: e9,
      messagesCommon: s,
      unit: i,
      unitOptions: o2,
      viewModel: r
    } = this, {
      active: a4,
      measurement: p6,
      state: c5,
      supported: v2
    } = r;
    return n("div", {
      "aria-label": this.messages.widgetLabel,
      class: this.classes(m.base, e3.widget, e3.panel),
      key: this,
      role: "presentation"
    }, this.visible ? n(u3, {
      active: a4,
      measurementItems: [{
        key: "direct",
        title: e9.direct,
        value: d3(p6?.directDistance)
      }, {
        key: "horizontal",
        title: e9.horizontal,
        value: d3(p6?.horizontalDistance)
      }, {
        key: "vertical",
        title: e9.vertical,
        value: d3(p6?.verticalDistance)
      }],
      messages: __spreadProps(__spreadValues({}, e9), {
        notApplicable: s?.notApplicable
      }),
      newMeasurementButtonClass: m.newMeasurementButton,
      state: c5,
      supported: v2,
      unit: i,
      unitOptions: o2,
      onNewMeasurementClick: () => {
        d(this.viewModel.start());
      },
      onUnitChange: (e10) => {
        this.unit = e10;
      }
    }) : null);
  }
};
function d3(e9) {
  return "available" === e9?.state ? e9.text : null;
}
e([y()], c4.prototype, "view", null), e([y()], c4.prototype, "visible", null), e([y()], c4.prototype, "active", null), e([y({
  constructOnly: true,
  nonNullable: true
})], c4.prototype, "analysis", null), e([y()], c4.prototype, "icon", null), e([y()], c4.prototype, "label", null), e([y(), e2("esri/widgets/DirectLineMeasurement3D/t9n/DirectLineMeasurement3D")], c4.prototype, "messages", void 0), e([y(), e2("esri/t9n/common")], c4.prototype, "messagesCommon", void 0), e([y()], c4.prototype, "uiStrings", void 0), e([y({
  type: c3
})], c4.prototype, "viewModel", void 0), e([y()], c4.prototype, "unitOptions", null), e([y()], c4.prototype, "unit", null), c4 = e([a("esri.widgets.DirectLineMeasurement3D")], c4);
var v = c4;
export {
  v as default
};
//# sourceMappingURL=DirectLineMeasurement3D-RRC2LHZ5.js.map
