{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js", "../../../../../../node_modules/@arcgis/core/geometry/support/UByteArray.js", "../../../../../../node_modules/@arcgis/core/views/3d/support/GraphicsMap.js", "../../../../../../node_modules/@arcgis/core/views/3d/support/LimitGraphicsMap.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/I3SMeshViewLabeler.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/I3SMeshViewPerformanceInfo.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/I3SMeshWorkerHandle.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/i3s/Highlights.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/i3s/I3SAsyncElevationUpdater.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/i3s/I3SCrossfadeHelper.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/i3s/I3SIntersectionHandler.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/i3s/IDBCache.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/i3s/IDBMockCache.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/I3SMeshView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { t, g as e } from \"../../../../chunks/vec32.js\";\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { projectBuffer as o } from \"../../../../geometry/projection/projectBuffer.js\";\nimport { create as n, set as a, negativeInfinity as m, expandWithBuffer as s, zero as f } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { newDoubleArray as i } from \"../../../../geometry/support/DoubleArray.js\";\nfunction u(t, e, r) {\n  const n = i(24);\n  return i => {\n    let u = i.meta.featureExtents;\n    if (null == u) {\n      u = new Float64Array(6 * i.meta.featureIds.length), i.meta.featureExtents = u;\n      for (let t = 0; t < u.length; t += 6) u[t] = Number.POSITIVE_INFINITY;\n    }\n    const l = new Float64Array(u.buffer, 6 * i.index * Float64Array.BYTES_PER_ELEMENT, 6);\n    return l[0] === Number.POSITIVE_INFINITY && (c(i.index, r, i.meta.objectHandle, n, 0), o(n, e, 0, n, t, 0, 8) ? (a(l, m), s(l, n, 0, 8)) : a(l, f)), l;\n  };\n}\nfunction c(r, o, n, a, m) {\n  const s = o.getComponentAabb(n, r, p),\n    f = o.getObjectTransform(n);\n  for (let i = 0; i < 8; ++i) I[0] = 1 & i ? s[0] : s[3], I[1] = 2 & i ? s[1] : s[4], I[2] = 4 & i ? s[2] : s[5], t(I, I, f.rotationScale), e(I, I, f.position), a[m++] = I[0], a[m++] = I[1], a[m++] = I[2];\n  return a;\n}\nconst l = 24,\n  p = n(),\n  I = r();\nexport { c as boundingBoxCornerPoints, l as boundingBoxCornersPointsStride, u as createGetFeatureExtent };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar n, o, E;\n!function (n) {\n  n[n.VISIBLE_ONLY = 0] = \"VISIBLE_ONLY\", n[n.ALL = 1] = \"ALL\", n[n.QUERYABLE = 2] = \"QUERYABLE\";\n}(n || (n = {})), function (n) {\n  n[n.EXIT = 0] = \"EXIT\", n[n.CONTINUE = 1] = \"CONTINUE\", n[n.SKIP = 2] = \"SKIP\";\n}(o || (o = {})), function (n) {\n  n[n.Absolute = 0] = \"Absolute\", n[n.RelativeToGround = 1] = \"RelativeToGround\", n[n.OnTheGround = 2] = \"OnTheGround\";\n}(E || (E = {}));\nexport { E as ElevationMode, n as ForAllFeaturesMode, o as ForAllFeaturesReturnType };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { nativeArrayMaxSize as r } from \"../../core/typedArrayUtil.js\";\nfunction e(e, n = !1) {\n  return e <= r ? n ? new Array(e).fill(0) : new Array(e) : new Uint8Array(e);\n}\nexport { e as newUByteArray };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Evented.js\";\nimport { someMap as t } from \"../../../core/MapUtils.js\";\nclass r extends e {\n  constructor() {\n    super(...arguments), this._map = new Map();\n  }\n  clear() {\n    if (this._map.size > 0) {\n      const e = this.toArray();\n      this._map.clear(), this.emit(\"change\", {\n        added: [],\n        removed: e\n      });\n    }\n  }\n  get length() {\n    return this._map.size;\n  }\n  get(e) {\n    return this._map.get(e);\n  }\n  addMany(e) {\n    if (0 === e.length) return;\n    const t = new Set();\n    for (let o = 0; o < e.length; o++) {\n      const r = e[o],\n        s = r.objectId,\n        n = this._map.get(s);\n      n ? (t.add(s), r !== n && (e[o] = n), n.refCount || (n.refCount = 0), ++n.refCount) : (r.refCount = 1, this._map.set(s, r));\n    }\n    const r = t.size > 0 ? e.filter(e => !t.has(e.objectId)) : e;\n    r.length > 0 && this.emit(\"change\", {\n      added: r,\n      removed: []\n    });\n  }\n  removeMany(e) {\n    const t = [];\n    for (const r of e) {\n      const e = r.objectId,\n        o = this._map.get(e);\n      null != o && (!o.refCount || --o.refCount <= 0) && (this._map.delete(e), t.push(r));\n    }\n    t.length > 0 && this.emit(\"change\", {\n      added: [],\n      removed: t\n    });\n  }\n  removeManyByObjectId(e) {\n    const t = [];\n    for (const r of e) {\n      const e = this._map.get(r);\n      null != e && (!e.refCount || --e.refCount <= 0) && (this._map.delete(r), t.push(e));\n    }\n    t.length > 0 && this.emit(\"change\", {\n      added: [],\n      removed: t\n    });\n  }\n  toArray() {\n    return [...this._map.values()];\n  }\n  find(e) {\n    let r;\n    return t(this._map, t => !!e(t) && (r = t, !0)), r;\n  }\n  forEach(e) {\n    this._map.forEach(t => e(t));\n  }\n}\nexport { r as GraphicsMap };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Evented.js\";\nimport { someMap as t } from \"../../../core/MapUtils.js\";\nimport { GraphicsMap as s } from \"./GraphicsMap.js\";\nclass i extends e {\n  constructor(e) {\n    super(), this._limit = e, this._all = new s(), this._active = new a(this), this._pending = new Map(), this._handle = this._all.on(\"change\", e => this._handleChanges(e));\n  }\n  destroy() {\n    this._handle.remove();\n  }\n  get length() {\n    return this._active.length;\n  }\n  toArray() {\n    return this._active.toArray();\n  }\n  find(e) {\n    return this._active.find(e);\n  }\n  forEach(e) {\n    this._active.forEach(e);\n  }\n  addMany(e) {\n    this._all.addMany(e);\n  }\n  removeManyByObjectId(e) {\n    this._all.removeManyByObjectId(e);\n  }\n  _handleChanges(e) {\n    let t = e.removed;\n    if (this._pending.size > 0) {\n      t = new Array();\n      for (const s of e.removed) this._pending.delete(s.objectId) || t.push(s);\n    }\n    let s = this._limit - this._active.length + t.length;\n    s < e.added.length && (this._active.removeMany(t), t = [], h.reset(1 - this._limit / (this._active.length + e.added.length)), this._active.forEach(e => {\n      h.sample() && (t.push(e), this._pending.set(e.objectId, e));\n    }), s = this._limit - this._active.length + t.length);\n    let i = e.added;\n    if (s < e.added.length) {\n      i = new Array(), h.reset(s / e.added.length);\n      for (const t of e.added) h.sample() ? i.push(t) : this._pending.set(t.objectId, t);\n    }\n    const n = s - i.length;\n    n > 0 && this._pending.size > 0 && (h.reset(n / this._pending.size), this._pending.forEach(e => {\n      h.sample() && (i.push(e), this._pending.delete(e.objectId));\n    })), this._active.addAndRemove(i, t);\n  }\n}\nclass n {\n  constructor() {\n    this._percentage = 1, this._last = -1, this._index = 0;\n  }\n  reset(e) {\n    this._percentage = e, this._last = -1;\n  }\n  sample() {\n    const e = Math.floor(this._index * this._percentage);\n    return ++this._index, e !== this._last && (this._last = e, !0);\n  }\n}\nconst h = new n();\nclass a {\n  constructor(e) {\n    this._parent = e, this._map = new Map();\n  }\n  get length() {\n    return this._map.size;\n  }\n  forEach(e) {\n    this._map.forEach(t => e(t));\n  }\n  find(e) {\n    let s;\n    return t(this._map, t => !!e(t) && (s = t, !0)), s;\n  }\n  toArray() {\n    return [...this._map.values()];\n  }\n  addAndRemove(e, t) {\n    for (const s of e) this._map.set(s.objectId, s);\n    for (const s of t) this._map.delete(s.objectId);\n    (e.length > 0 || t.length > 0) && this._parent.emit(\"change\", {\n      added: e,\n      removed: t\n    });\n  }\n  removeMany(e) {\n    for (const t of e) this._map.delete(t.objectId);\n    e.length > 0 && this._parent.emit(\"change\", {\n      added: [],\n      removed: e\n    });\n  }\n}\nexport { i as LimitGraphicsMap };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../symbols.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { filterInPlace as r } from \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport { equalsShallow as o } from \"../../../core/lang.js\";\nimport { floatEqualUlp as s } from \"../../../core/mathUtils.js\";\nimport { destroyMaybe as i } from \"../../../core/maybe.js\";\nimport { watch as a } from \"../../../core/reactiveUtils.js\";\nimport { generateUID as n } from \"../../../core/uid.js\";\nimport { property as p } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as c } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { diff as h } from \"../../../core/accessorSupport/diffUtils.js\";\nimport { projectBuffer as l } from \"../../../geometry/projection/projectBuffer.js\";\nimport { create as d, set as u, negativeInfinity as m, expandWithBuffer as f } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { newDoubleArray as g } from \"../../../geometry/support/DoubleArray.js\";\nimport { makeDehydratedPoint as y } from \"../../../layers/graphics/dehydratedPoint.js\";\nimport { Graphics3DCore as b } from \"./graphics/Graphics3DCore.js\";\nimport { Graphics3DScaleVisibility as I } from \"./graphics/Graphics3DScaleVisibility.js\";\nimport { boundingBoxCornersPointsStride as _, boundingBoxCornerPoints as v } from \"./i3s/I3SGeometryUtil.js\";\nimport { LimitGraphicsMap as M } from \"../support/LimitGraphicsMap.js\";\nimport { UpdatePolicy as E } from \"../webgl-engine/lib/UpdatePolicy.js\";\nimport j from \"../../../symbols/PointSymbol3D.js\";\nclass G {\n  constructor(e, t) {\n    this.meta = e, this.index = t;\n  }\n}\nclass D {\n  constructor(e, t) {\n    this.graphic = e, this.geometry = t, this.components = [], this.overridesDirty = !1;\n  }\n}\nlet w = class extends t {\n  get updating() {\n    return this._graphicsCore?.updating ?? !1;\n  }\n  constructor(e) {\n    super(e), this.loadedGraphics = new M(5e4), this.slicePlaneEnabled = !1, this._renderingInfo = {\n      symbol: new j()\n    }, this._featuresMap = new Map();\n  }\n  initialize() {\n    const e = this.view.basemapTerrain;\n    this._graphicsCore = new b({\n      owner: this,\n      layer: this.layer,\n      preferredUpdatePolicy: E.ASYNC,\n      elevationFeatureExpressionEnabled: !1,\n      graphicSymbolSupported: !1,\n      getRenderingInfoWithoutRenderer: !0,\n      hasZ: !0,\n      hasM: !1,\n      componentFactories: {\n        deconflictor: e => this.view.deconflictor.addGraphicsOwner(e),\n        labeler: (e, t) => this.view.labeler.addGraphicsOwner(e, t, {\n          emptySymbolLabelSupported: !0,\n          elevationInfoOverride: {\n            mode: \"absolute-height\",\n            offset: 0\n          },\n          disablePlacement: {\n            logEntityDescription: \"3D Object Scene Layer features\"\n          }\n        }),\n        scaleVisibility: (t, r) => new I({\n          graphicsCoreOwner: this,\n          layer: this.layer,\n          queryGraphicUIDsInExtent: r,\n          graphicsCore: t,\n          basemapTerrain: e,\n          layerScaleEnabled: !1\n        })\n      }\n    }), this._graphicsCore.initializePromise.then(() => this._graphicsCore.startCreateGraphics()).catch(() => {}), this.addHandles(a(() => this.layer.labelingInfo, (e, t) => {\n      h(e, t) && this._graphicsCore.updateLabelingInfo();\n    }));\n  }\n  destroy() {\n    this._graphicsCore = i(this._graphicsCore), this.loadedGraphics = i(this.loadedGraphics), this.view = null;\n  }\n  addNodeMeta(e, t) {\n    let r = 0;\n    const o = e.filteredIds,\n      s = this.view.spatialReference,\n      i = [];\n    for (let a = 0; a < e.featureIds.length; a++) {\n      const p = e.featureIds[a];\n      let c = null == o;\n      if (o && r < o.length && p === o[r] && (c = !0, r++), !this._enabledForFeatureInNode(e, a)) continue;\n      const h = this._featuresMap.get(p);\n      if (h) {\n        h.components.push(new G(e, a)), this._updateLabelPosition(p);\n        continue;\n      }\n      const l = t(a, e),\n        d = y(0, 0, 0, s),\n        u = {\n          objectId: p,\n          uid: n(),\n          attributes: l,\n          visible: c,\n          geometry: d\n        },\n        m = new D(u, d);\n      m.components.push(new G(e, a)), this._featuresMap.set(p, m), this._updateLabelGeometry(p), i.push(u);\n    }\n    this.loadedGraphics.addMany(i);\n  }\n  updateLabelPositions(e) {\n    const t = this.view.renderCoordsHelper;\n    this._forEachGraphic(e, (r, o, s) => {\n      const i = this._graphicsCore.getGraphics3DGraphicById(o.uid);\n      null != i && this._updateLabelGeometry(e.featureIds[r]) && i.alignWithAbsoluteElevation(s.z ?? 0, t, !1);\n    });\n  }\n  setNodeMetaAttributes(e, t) {\n    const r = new Array();\n    this._forEachGraphic(e, (s, i) => {\n      const a = t(s, e);\n      o(i.attributes, a) || (i.attributes = a, r.push(i.uid));\n    }), this._graphicsCore.updateLabelingInfo(r);\n  }\n  applyFilterChange(e) {\n    this._forEachFeature(e, (t, r, o) => {\n      if (!this._enabledForFeatureInNode(e, t)) {\n        const o = e.featureIds[t];\n        switch (this._removeFeature(r, e, t)) {\n          case F.REMOVED:\n            this.loadedGraphics.removeManyByObjectId([o]);\n            break;\n          case F.MODIFIED:\n            this._updateLabelPosition(o);\n        }\n        return;\n      }\n      const s = r.graphic,\n        i = s.visible;\n      i !== o && (s.visible = o, C.graphic = s, C.property = \"visible\", C.oldValue = i, C.newValue = o, this._graphicsCore.graphicUpdateHandler(C));\n    });\n  }\n  removeNodeMeta(e) {\n    const t = [];\n    this._forEachGraphic(e, r => {\n      const o = e.featureIds[r],\n        s = this._featuresMap.get(o);\n      if (!s) return;\n      switch (this._removeFeature(s, e, r)) {\n        case F.MODIFIED:\n          this._updateLabelPosition(o);\n          break;\n        case F.REMOVED:\n          t.push(o);\n      }\n    }), this.loadedGraphics.removeManyByObjectId(t);\n  }\n  _removeFeature(e, t, o) {\n    const s = e.components.length;\n    return r(e.components, e => !(e.meta === t && e.index === o)), 0 === e.components.length ? (this._featuresMap.delete(t.featureIds[o]), F.REMOVED) : s !== e.components.length ? F.MODIFIED : F.UNMODIFIED;\n  }\n  getRenderingInfo() {\n    return this._renderingInfo;\n  }\n  notifyGraphicGeometryChanged() {}\n  notifyGraphicVisibilityChanged() {}\n  _updateLabelPosition(e) {\n    const t = this._featuresMap.get(e);\n    t && this._updateLabelGeometry(e) && (this.loadedGraphics.removeManyByObjectId([e]), this.loadedGraphics.addMany([t.graphic]));\n  }\n  _updateLabelGeometry(e) {\n    const t = this._featuresMap.get(e);\n    if (!t) return !1;\n    const r = t.geometry,\n      o = this.view.spatialReference,\n      i = this.view.renderCoordsHelper,\n      a = r.x,\n      n = r.y,\n      p = r.z ?? 0,\n      c = t.components.length,\n      h = g(c * _);\n    let d = 0;\n    for (const {\n      meta: s,\n      index: l\n    } of t.components) v(l, this.collection, s.objectHandle, h, d), d += _;\n    return l(h, i.spatialReference, 0, h, o, 0, h.length / 3), u(O, m), f(O, h), r.x = (O[0] + O[3]) / 2, r.y = (O[1] + O[4]) / 2, r.z = O[5], !s(r.x, a) || !s(r.y, n) || !s(r.z, p);\n  }\n  _forEachGraphic(e, t) {\n    this._forEachFeature(e, (r, {\n      graphic: o,\n      geometry: s\n    }, i) => {\n      this._enabledForFeatureInNode(e, r) && t(r, o, s, i);\n    });\n  }\n  _forEachFeature(e, t) {\n    let r = 0;\n    for (let o = 0; o < e.featureIds.length; o++) {\n      const s = this._featuresMap.get(e.featureIds[o]);\n      let i = null == e.filteredIds;\n      e.filteredIds && e.filteredIds[r] === e.featureIds[o] && (i = !0, r++), s && t(o, s, i);\n    }\n  }\n  _enabledForFeatureInNode(e, t) {\n    return e.node.index < 0 || !this.overrides?.featureHasGeometryChanges(e.featureIds[t]);\n  }\n  get updatePolicy() {\n    return this._graphicsCore.effectiveUpdatePolicy;\n  }\n  get usedMemory() {\n    return this._graphicsCore.usedMemory;\n  }\n  get unloadedMemoryEstimate() {\n    return this._graphicsCore.unprocessedMemoryEstimate;\n  }\n  get test() {}\n};\ne([p()], w.prototype, \"view\", void 0), e([p()], w.prototype, \"layer\", void 0), e([p()], w.prototype, \"collection\", void 0), e([p()], w.prototype, \"loadedGraphics\", void 0), e([p()], w.prototype, \"overrides\", void 0), e([p()], w.prototype, \"updating\", null), e([p()], w.prototype, \"slicePlaneEnabled\", void 0), e([p()], w.prototype, \"_graphicsCore\", void 0), w = e([c(\"esri.views.3d.layers.I3SMeshViewLabeler\")], w);\nconst C = {\n  graphic: null,\n  property: null,\n  oldValue: null,\n  newValue: null\n};\nvar F;\n!function (e) {\n  e[e.UNMODIFIED = 0] = \"UNMODIFIED\", e[e.MODIFIED = 1] = \"MODIFIED\", e[e.REMOVED = 2] = \"REMOVED\";\n}(F || (F = {}));\nconst O = d(),\n  L = w;\nexport { L as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { LayerViewPerformanceInfo as t } from \"./support/LayerViewPerformanceInfo.js\";\nclass e extends t {\n  constructor(t, e, r, s, o, i, p) {\n    super(t, 0, 0, 0, e), this.gpuMB = r, this.geometryMB = s, this.textureMB = o, this.unloadedMB = i, this.idbHitRate = p;\n  }\n}\nexport { e as I3SMeshViewPerformanceInfo };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport s from \"../../../core/Logger.js\";\nimport e from \"../../../core/PooledArray.js\";\nimport { create as o } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { WorkerHandle as t } from \"../../../core/workers/WorkerHandle.js\";\nimport { canProjectWithoutEngine as r } from \"../../../geometry/projection.js\";\nimport { projectVectorToVector as p } from \"../../../geometry/projection/projectVectorToVector.js\";\nimport { ModificationType as i } from \"../../../libs/i3s/enums.js\";\nclass h extends t {\n  constructor(s) {\n    super(\"SceneLayerWorker\", \"process\", {\n      process: s => [s.geometryBuffer],\n      project: s => [s.positions.buffer],\n      transformNormals: s => [s.normals.buffer]\n    }, s, {\n      hasInitialize: !0\n    });\n  }\n  setModifications(s, e, o, t) {\n    const r = {\n      context: s,\n      modifications: a(e, o, t),\n      isGeodetic: t.isGeographic\n    };\n    this.broadcast(r, \"setModifications\");\n  }\n  setLegacySchema(s, e) {\n    const o = JSON.stringify(e);\n    return this.broadcast({\n      context: s,\n      jsonSchema: o\n    }, \"setLegacySchema\");\n  }\n  destroyContext(s) {\n    return this.broadcast(s, \"destroyContext\");\n  }\n  project(s, e) {\n    return this.invokeMethod(\"project\", s, e);\n  }\n  transformNormals(s, e) {\n    return this.invokeMethod(\"transformNormals\", s, e);\n  }\n}\nconst n = new e({\n    deallocator: null\n  }),\n  u = o();\nfunction a(e, o, t) {\n  n.clear();\n  let h = 1 / 0,\n    a = 1 / 0,\n    c = -1 / 0,\n    f = -1 / 0,\n    l = !1;\n  for (const d of o) {\n    const e = \"clip\" === d.type ? i.Inside : \"mask\" === d.type ? i.Outside : i.Replace,\n      o = d.geometry;\n    let m = s => s;\n    if (o.spatialReference) {\n      if (!r(o.spatialReference, t)) {\n        s.getLogger(\"esri.views.3d.layers.I3SMeshWorkerHandle\").warn(\"Can't project modification polygon into layer spatial reference, ignoring modification\");\n        continue;\n      }\n      m = s => (p(s, o.spatialReference, u, t), u);\n    } else o.hasZ || (u[2] = 0, m = s => (u[0] = s[0], u[1] = s[1], u));\n    l = l || e === i.Outside, n.push(e), n.push(o.rings.length);\n    for (const s of o.rings) {\n      n.push(s.length);\n      for (const e of s) {\n        const s = m(e);\n        n.push(s[0]), n.push(s[1]), n.push(s[2]), h = Math.min(h, s[0]), a = Math.min(a, s[1]), c = Math.max(c, s[0]), f = Math.max(f, s[1]);\n      }\n    }\n  }\n  if (null != e) if (l) {\n    const s = 1e-4;\n    n.push(i.Inside), n.push(2), n.push(4), n.push(h - s), n.push(a - s), n.push(0), n.push(c + s), n.push(a - s), n.push(0), n.push(c + s), n.push(f + s), n.push(0), n.push(h - s), n.push(f + s), n.push(0), n.push(4), n.push(e[0]), n.push(e[1]), n.push(0), n.push(e[2]), n.push(e[1]), n.push(0), n.push(e[2]), n.push(e[3]), n.push(0), n.push(e[0]), n.push(e[3]), n.push(0);\n  } else n.push(i.Outside), n.push(1), n.push(4), n.push(e[0]), n.push(e[1]), n.push(0), n.push(e[2]), n.push(e[1]), n.push(0), n.push(e[2]), n.push(e[3]), n.push(0), n.push(e[0]), n.push(e[3]), n.push(0);\n  n.push(i.Finished);\n  const m = new Float64Array(n.length);\n  for (let s = 0; s < n.length; ++s) m[s] = n.at(s);\n  return m;\n}\nexport { h as I3SMeshWorkerHandle, a as toWasmModification };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { removeUnordered as t } from \"../../../../core/arrayUtils.js\";\nimport { makeHandle as e } from \"../../../../core/handleUtils.js\";\nimport { ForAllFeaturesReturnType as i } from \"../II3SMeshView3D.js\";\nclass s {\n  constructor() {\n    this.ids = new Set();\n  }\n}\nclass h {\n  constructor({\n    collection: t,\n    forAllFeatures: e,\n    forAllFeaturesOfNode: i\n  }) {\n    this._highlights = [], this._collection = t, this._forAllFeatures = e, this._forAllFeaturesOfNode = i;\n  }\n  destroy() {\n    this._highlights.forEach(t => this._releaseSet(t)), this._highlights = null;\n  }\n  acquireSet() {\n    const i = new s();\n    this._highlights.push(i);\n    const h = e(() => {\n      this._highlights && (this._releaseSet(i), t(this._highlights, i));\n    });\n    return {\n      set: i,\n      handle: h\n    };\n  }\n  setFeatureIds(t, e) {\n    e.forEach(e => t.ids.add(e)), this._initializeSet(t);\n  }\n  _initializeSet(t) {\n    this._forAllFeatures((e, s, h) => (t.ids.has(e) && this._collection.addComponentHighlight(h.objectHandle, s), i.CONTINUE));\n  }\n  _releaseSet(t) {\n    this._forAllFeatures((e, s, h) => (t.ids.has(e) && this._collection.removeComponentHighlight(h.objectHandle, s), i.CONTINUE));\n  }\n  objectCreated(t) {\n    this._highlights.forEach(e => {\n      this._forAllFeaturesOfNode(t, (s, h) => (e.ids.has(s) && this._collection.addComponentHighlight(t.objectHandle, h), i.CONTINUE));\n    });\n  }\n  objectDeleted(t) {\n    this._collection.clearHighlights(t.objectHandle);\n  }\n}\nexport { h as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../core/Accessor.js\";\nimport { property as s } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as r } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { ElevationMode as i } from \"../II3SMeshView3D.js\";\nimport { ExtentSet as o } from \"../graphics/ExtentSet.js\";\nimport { TaskPriority as n } from \"../../../support/Scheduler.js\";\nlet a = class extends e {\n  constructor(t, e, s, r) {\n    super({}), this._updateExtent = e, this._updateNode = s, this._getElevationMode = r, this.running = !1, this._extentSet = new o(), this._nodeSet = new Set();\n    const i = this._taskPriority,\n      n = t.registerTask(this._taskPriority, this);\n    this.addHandles(n), this._task = n, this._lastTaskPriority = i;\n  }\n  get _taskPriority() {\n    const t = this._getElevationMode();\n    return t && t === i.RelativeToGround ? n.ELEVATION_ALIGNMENT_SCENE : n.ELEVATION_ALIGNMENT;\n  }\n  _updateTaskPriority() {\n    const t = this._taskPriority;\n    t !== this._lastTaskPriority && (this._task.priority = t, this._lastTaskPriority = t);\n  }\n  normalizeCtorArgs() {\n    return {};\n  }\n  addExtent(t) {\n    this._extentSet.add(t), this._updateTaskPriority(), this.running = !0;\n  }\n  schedule(t) {\n    this._nodeSet.add(t), this._updateTaskPriority(), this.running = !0;\n  }\n  remove(t) {\n    this._nodeSet.delete(t), this._updateRunning();\n  }\n  runTask(t) {\n    const e = this._extentSet;\n    for (t.run(() => e.merge(t)); !e.empty && !t.done;) {\n      const s = this._updateExtent(e.pop());\n      null != s && s.forAll(t => this.schedule(t)), t.madeProgress();\n    }\n    if (t.done) return;\n    const s = this._nodeSet;\n    for (const r of s) if (s.delete(r), this._updateNode(r), t.madeProgress(), t.done) break;\n    this._updateRunning();\n  }\n  _updateRunning() {\n    this.running = this._nodeSet.size > 0 || this._extentSet.size > 0;\n  }\n};\nt([s()], a.prototype, \"running\", void 0), a = t([r(\"esri.views.3d.layers.i3s.I3SAsyncElevationUpdater\")], a);\nexport { a as I3SAsyncElevationUpdater };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { removeMaybe as e } from \"../../../../core/maybe.js\";\nimport { addFrameTask as s } from \"../../../../core/scheduling.js\";\nimport { FadeDirection as d } from \"../support/I3SLayerView.js\";\nclass o {\n  constructor() {\n    this.lodCrossfadeSignedDuration = 0;\n  }\n}\nclass i {\n  constructor(e) {\n    this._view = e, this._preRenderFrameTaskHandle = null, this._currentFrameStartTime = null, this._numFadingNodes = 0;\n  }\n  destroy() {\n    this._preRenderFrameTaskHandle?.remove(), this._preRenderFrameTaskHandle = null, this._view = null;\n  }\n  get updating() {\n    return this._numFadingNodes > 0;\n  }\n  stopNodeFading(s) {\n    null != s.lodCrossfadeProgress && (this._numFadingNodes--, s.lodCrossfadeProgress = null, 0 === this._numFadingNodes && (null != this._preRenderFrameTaskHandle && (this._preRenderFrameTaskHandle = e(this._preRenderFrameTaskHandle)), this._view.notifyLODUpdate(), this._view.notifyUpdate()));\n  }\n  _startNodeFading(e, d, o) {\n    0 === this._numFadingNodes && (this._preRenderFrameTaskHandle = s({\n      preRender: e => this._updateAllNodeFading(e)\n    }), this._view.notifyLODUpdate()), null == e.lodCrossfadeProgress && (this._numFadingNodes++, this._view.notifyUpdate()), e.lodCrossfadeSignedDuration = o, e.lodCrossfadeProgress = d;\n  }\n  _updateAllNodeFading(e) {\n    const s = this._view.nodeCrossfadingEnabled;\n    this._view.foreachCrossfadeNode((d, o) => {\n      if (null != d?.lodCrossfadeProgress) {\n        const i = d.lodCrossfadeSignedDuration,\n          t = i > 0 ? this._view.fullOpacity : 0,\n          r = e.deltaTime / i,\n          a = d.lodCrossfadeProgress + Math.abs(r),\n          n = !s || a >= 1 || 0 === i,\n          l = t - (n ? 0 : i > 0 ? 1 : -1) * (1 - a);\n        n ? (this.stopNodeFading(d), i < 0 && this._view.markNodeToRemove(o)) : d.lodCrossfadeProgress = a, this._view.setNodeOpacityByIndex(o, l);\n      }\n    }), this._view.removeMarkedNodes();\n  }\n  stopAllNodeFading() {\n    this._view.foreachCrossfadeNode((e, s) => {\n      if (null != e?.lodCrossfadeProgress) {\n        this.stopNodeFading(e);\n        const d = e.lodCrossfadeSignedDuration;\n        d < 0 && this._view.markNodeToRemove(s);\n        const o = d > 0 ? this._view.fullOpacity : 0;\n        this._view.setNodeOpacityByIndex(s, o);\n      }\n    }), this._view.removeMarkedNodes();\n  }\n  fadeNode(e, s, o, i) {\n    null == this._currentFrameStartTime && (this._currentFrameStartTime = Date.now());\n    const r = this._view,\n      a = r.nodeCrossfadingEnabled,\n      n = o === d.FadeIn ? r.fullOpacity : 0,\n      l = a ? i ? o === d.FadeIn ? r.lodCrossfadeinDuration : r.lodCrossfadeoutDuration : r.lodCrossfadeUncoveredDuration : 0,\n      h = this._view.getNodeOpacityByIndex(e);\n    if (a && h !== n && l > 0) {\n      const e = 1 - Math.abs(n - h);\n      this._startNodeFading(s, e, t(o) * l);\n    } else this.stopNodeFading(s), this._view.setNodeOpacityByIndex(e, n), o === d.FadeOut && this._view.removeNode(e);\n  }\n  isNodeFullyFadedIn(e) {\n    const s = this._view.getNodeCrossfadeMetaData(e);\n    return null == s || null == s.lodCrossfadeProgress && this._view.getNodeOpacityByIndex(e) === this._view.fullOpacity;\n  }\n}\nfunction t(e) {\n  return e === d.FadeIn ? 1 : -1;\n}\nexport { i as I3SCrossfadeHelper, o as NodeCrossfadeMetaData };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ViewingMode as e } from \"../../../ViewingMode.js\";\nimport { isValidMbs as t } from \"./I3SUtil.js\";\nimport { I3sTarget as i } from \"./Intersector.js\";\nimport { newIntersectorResult as r } from \"../../webgl-engine/lib/Intersector.js\";\nimport { IntersectorType as s, StoreResults as n } from \"../../webgl-engine/lib/IntersectorInterfaces.js\";\nimport { MeshIntersectionOptions as l } from \"../../webgl-engine/lib/RayIntersections.js\";\nimport { getVerticalOffsetI3S as o } from \"../../webgl-engine/lib/verticalOffsetUtils.js\";\nclass c {\n  constructor(e) {\n    this.type = s.I3S, this._needVerticalOffset = !1, this.layerUid = e.layerUid, this.sublayerUid = e.sublayerUid, this._collection = e.collection, this._traverseNodeHierarchy = e.traverseNodeHierarchy, this.slicePlaneEnabled = e.slicePlaneEnabled, this.isGround = e.isGround;\n  }\n  updateElevationAlignState(t, i) {\n    this._needVerticalOffset = t && i === e.Global;\n  }\n  intersect(e, s, c, d, u, b) {\n    const f = b ?? !1,\n      m = e.results,\n      h = e.options.store === n.ALL,\n      y = e.ray.direction,\n      p = e.tolerance;\n    let R = e => e,\n      g = e => e;\n    const I = o(e.verticalOffset ?? (this._needVerticalOffset ? 0 : null));\n    null != e.verticalOffset && null != I && (R = e => I.applyToMbs(e), g = e => I.applyToObb(e));\n    const v = new l(f, e.options.normalRequired),\n      O = (n, l) => {\n        if (0 === n.childrenLoaded) return !1;\n        const o = n.serviceObbInRenderSR?.isValid ? n.serviceObbInRenderSR : null;\n        return !(o && !g(o).intersectRay(c, y, p)) && (!l || !o && t(n.serviceMbsInRenderSR) && !a(R(n.serviceMbsInRenderSR), c, y, p) || null != n.geometryObbInRenderSR && !g(n.geometryObbInRenderSR).intersectRay(c, y, p) || this._collection.intersect(l, c, d, p, I, v, (t, l, o, a) => {\n          if (l < 0 || null != s && !s(c, d, l)) return;\n          const u = e => {\n            const r = new i(this.layerUid, this.sublayerUid, n.index, t, a);\n            e.set(this.type, r, l, o);\n          };\n          if (this.isGround && (null == m.ground.dist || l < m.ground.dist) && u(m.ground), !e.options.isFiltered && ((null == m.min.dist || l < m.min.dist) && u(m.min), (null == m.max.dist || l > m.max.dist) && u(m.max), h)) {\n            const t = r(e.ray);\n            u(t), e.results.all.push(t);\n          }\n        }), !0);\n      };\n    this._traverseNodeHierarchy(O);\n  }\n}\nfunction a(e, t, i, r = 0) {\n  const s = e[3] + r,\n    n = t[0] - e[0],\n    l = t[1] - e[1],\n    o = t[2] - e[2],\n    c = i[0],\n    a = i[1],\n    d = i[2],\n    u = c * n + a * l + d * o;\n  return u * u - (c * c + a * a + d * d) * (n * n + l * l + o * o - s * s) >= 0;\n}\nexport { c as I3SIntersectionHandler };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ByteSizeUnit as e } from \"../../../../core/ByteSizeUnit.js\";\nimport t from \"../../../../core/Error.js\";\nimport { onAbort as s, throwIfAborted as r } from \"../../../../core/promiseUtils.js\";\nconst o = 14;\nclass i {\n  constructor(t, s, r = o) {\n    this._version = r, this._db = null, this._quotaReductionPromise = null, this._gcCounter = 0, this._hit = 0, this._miss = 0, this._destroyed = !1, this.gcFrequency = 50, this.maxByteSize = e.GIGABYTES, this.quotaReductionFactor = .2, this._dbName = t, this._storeName = s;\n  }\n  init() {\n    return Promise.resolve().then(() => {\n      const e = indexedDB.open(this._dbName, this._version);\n      return e.onupgradeneeded = t => {\n        const s = e.result,\n          r = e.transaction,\n          o = s.objectStoreNames.contains(this._storeName) ? r.objectStore(this._storeName) : s.createObjectStore(this._storeName),\n          i = s.objectStoreNames.contains(\"last_access\") ? r.objectStore(\"last_access\") : s.createObjectStore(\"last_access\");\n        i.indexNames.contains(\"date\") || i.createIndex(\"date\", \"date\", {\n          unique: !1\n        }), i.indexNames.contains(\"byteSize\") || i.createIndex(\"byteSize\", \"byteSize\", {\n          unique: !1\n        }), t.oldVersion < this._version && (o.clear(), i.clear());\n      }, c(e);\n    }).then(e => {\n      this._destroyed ? e.close() : this._db = e;\n    });\n  }\n  destroy() {\n    this._db && (this._db.close(), this._db = null), this._destroyed = !0;\n  }\n  get initialized() {\n    return null != this._db;\n  }\n  getHitRate() {\n    return this._hit / (this._hit + this._miss);\n  }\n  put(e, s) {\n    if (null == this._db) return Promise.reject(new t(\"indexedb:not-initialized\", \"IndexedDB Cache is not initialized\"));\n    return (null != this._quotaReductionPromise ? this._quotaReductionPromise : Promise.resolve()).then(() => this._put(e, s)).catch(t => {\n      if (t && \"QuotaExceededError\" === t.name) return null == this._quotaReductionPromise && (this._quotaReductionPromise = this._getCacheSize().then(e => this._removeLeastRecentlyAccessed(s.byteSize + Math.ceil(e * this.quotaReductionFactor))), this._quotaReductionPromise.then(() => this._quotaReductionPromise = null, () => this._quotaReductionPromise = null)), this._quotaReductionPromise.then(() => this._put(e, s));\n      throw t;\n    }).then(() => {\n      this._gcCounter--, this._gcCounter < 0 && null != this._db && (this._gcCounter = this.gcFrequency, this._getCacheSize().then(e => this._removeLeastRecentlyAccessed(e - this.maxByteSize)));\n    });\n  }\n  get(e, t) {\n    const o = this._db;\n    if (null == o) return Promise.resolve(void 0);\n    let i = null;\n    return Promise.resolve().then(() => {\n      const r = o.transaction(this._storeName, \"readonly\");\n      i = s(t, () => {\n        r.abort();\n      });\n      return c(r.objectStore(this._storeName).get(e));\n    }).then(t => {\n      if (null == t) ++this._miss;else if (this._db) {\n        ++this._hit;\n        this._db.transaction(\"last_access\", \"readwrite\").objectStore(\"last_access\").put({\n          date: Date.now(),\n          byteSize: t.byteSize\n        }, e);\n      }\n      return null != i && i.remove(), t;\n    }).catch(() => {\n      ++this._miss, r(t), null != i && i.remove();\n    });\n  }\n  remove(e) {\n    const t = this._db;\n    return null == t ? Promise.resolve() : Promise.resolve().then(async () => {\n      const s = t.transaction([this._storeName, \"last_access\"], \"readwrite\"),\n        r = s.objectStore(this._storeName),\n        o = s.objectStore(\"last_access\"),\n        i = r.delete(e),\n        a = o.delete(e);\n      await Promise.all([c(i), c(a), n(s)]);\n    });\n  }\n  _put(e, t) {\n    const s = this._db;\n    if (null == s) return Promise.resolve();\n    const r = s.transaction([this._storeName, \"last_access\"], \"readwrite\"),\n      o = r.objectStore(this._storeName),\n      i = r.objectStore(\"last_access\"),\n      a = o.put(t, e),\n      l = i.put({\n        date: Date.now(),\n        byteSize: t.byteSize\n      }, e);\n    return Promise.all([c(a), c(l), n(r)]);\n  }\n  _removeLeastRecentlyAccessed(e) {\n    if (e <= 0 || !this._db) return Promise.resolve();\n    const t = this._db.transaction([this._storeName, \"last_access\"], \"readwrite\"),\n      s = t.objectStore(this._storeName),\n      r = t.objectStore(\"last_access\");\n    let o = 0;\n    const i = r.index(\"date\").openCursor(null, \"next\");\n    return i.onsuccess = () => {\n      const t = i.result;\n      null != t && (null != t.value.byteSize && (o += t.value.byteSize), s.delete(t.primaryKey), r.delete(t.primaryKey), o < e && t.continue());\n    }, n(t);\n  }\n  _getCacheSize() {\n    const e = this._db;\n    if (null == e) return Promise.resolve(0);\n    const t = e.transaction(\"last_access\"),\n      s = t.objectStore(\"last_access\");\n    let r = 0;\n    const o = s.index(\"byteSize\").openKeyCursor();\n    return o.onsuccess = () => {\n      const e = o.result;\n      if (!e) return;\n      const t = e.key;\n      null != t && (r += t), e.continue();\n    }, n(t).then(() => r);\n  }\n}\nfunction n(e) {\n  return new Promise((t, s) => {\n    e.oncomplete = () => t(), e.onerror = () => s(e.error), e.onabort = () => s(e.error);\n  });\n}\nfunction c(e) {\n  return new Promise((t, s) => {\n    \"done\" === e.readyState ? null != e.error ? s(e.error) : t(e.result) : (e.onsuccess = () => t(e.result), e.onerror = () => s(e.error));\n  });\n}\nexport { i as IDBCache, c as whenRequest, n as whenTransaction };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst t = new WeakMap();\nclass s {\n  constructor(s, e) {\n    switch (this._miss = 0, this._hit = 0, this.initialized = !0, e) {\n      case \"layer\":\n        this._data = new Map();\n        break;\n      case \"view\":\n        {\n          const e = t.get(s);\n          if (e) {\n            this._data = e;\n            break;\n          }\n          const i = new Map();\n          this._data = i, t.set(s, i);\n        }\n    }\n  }\n  init() {\n    return Promise.resolve();\n  }\n  async get(t, s) {\n    if (this._data.has(t)) return this._hit++, this._data.get(t) ?? void 0;\n    this._miss++;\n  }\n  destroy() {}\n  put(t, s) {\n    return this._data.set(t, s), Promise.resolve();\n  }\n  remove(t) {\n    return this._data.delete(t), Promise.resolve();\n  }\n  getHitRate() {\n    return this._hit / (this._hit + this._miss);\n  }\n}\nexport { s as IDBMockCache };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Color.js\";\nimport i from \"../../../Graphic.js\";\nimport \"../../../symbols.js\";\nimport { isSome as s, removeUnordered as r } from \"../../../core/arrayUtils.js\";\nimport { ByteSizeUnit as o } from \"../../../core/ByteSizeUnit.js\";\nimport n from \"../../../core/Collection.js\";\nimport { makeHandle as a } from \"../../../core/handleUtils.js\";\nimport has from \"../../../core/has.js\";\nimport l from \"../../../core/Logger.js\";\nimport { someMap as d } from \"../../../core/MapUtils.js\";\nimport { destroyMaybe as h } from \"../../../core/maybe.js\";\nimport c from \"../../../core/PooledArray.js\";\nimport { isAbortError as u, throwIfAborted as _, createResolver as g } from \"../../../core/promiseUtils.js\";\nimport { initial as m, watch as p } from \"../../../core/reactiveUtils.js\";\nimport { schedule as f } from \"../../../core/scheduling.js\";\nimport { isArrayBuffer as b } from \"../../../core/typedArrayUtil.js\";\nimport { property as y } from \"../../../core/accessorSupport/decorators/property.js\";\nimport { subclass as v } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { fromMat4 as I, invert as M } from \"../../../core/libs/gl-matrix-2/math/mat3.js\";\nimport { create as C } from \"../../../core/libs/gl-matrix-2/factories/mat3f64.js\";\nimport { multiply as x, getTranslation as E } from \"../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { clone as O, create as j } from \"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { fromValues as w } from \"../../../core/libs/gl-matrix-2/factories/quatf64.js\";\nimport { s as R, h as S, t as A, z as D, g as T, j as N, f as V, H as F } from \"../../../chunks/vec32.js\";\nimport { create as P } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { s as H } from \"../../../chunks/vec42.js\";\nimport { fromValues as U } from \"../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { UpdatingHandles as G } from \"../../../core/support/UpdatingHandles.js\";\nimport { localLinearScaleFactors as L } from \"../../../geometry/projection/localLinearScaleFactors.js\";\nimport { projectBoundingSphere as k } from \"../../../geometry/projection/projectBoundingSphere.js\";\nimport { projectBuffer as B } from \"../../../geometry/projection/projectBuffer.js\";\nimport { getProjectorName as q } from \"../../../geometry/projection/projectors.js\";\nimport { projectVectorToVector as W } from \"../../../geometry/projection/projectVectorToVector.js\";\nimport { create as z, empty as K, expandWithBuffer as $, toRect as Q } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { create as X, intersects as Y } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { newDoubleArray as J } from \"../../../geometry/support/DoubleArray.js\";\nimport { compactFloatArray as Z } from \"../../../geometry/support/FloatArray.js\";\nimport { compactIndices as ee } from \"../../../geometry/support/Indices.js\";\nimport { g as te, f as ie, b as se } from \"../../../chunks/sphere.js\";\nimport { newUByteArray as re } from \"../../../geometry/support/UByteArray.js\";\nimport { fallbackObjectIDAttribute as oe } from \"../../../layers/LayerConstants.js\";\nimport ne from \"../../../layers/graphics/controllers/I3SOnDemandController.js\";\nimport { fixFields as ae } from \"../../../layers/support/fieldUtils.js\";\nimport le from \"../../../layers/support/SceneModification.js\";\nimport { getColor as de, getOpacity as he } from \"../../../renderers/visualVariables/support/visualVariableUtils.js\";\nimport { loadArcade as ce } from \"../../../support/arcadeOnDemand.js\";\nimport { isBasemapLayer as ue } from \"../../../support/basemapUtils.js\";\nimport { getElevationOffset as _e } from \"../../../support/elevationInfoUtils.js\";\nimport ge from \"../../../symbols/Symbol3D.js\";\nimport me from \"./I3SMeshViewLabeler.js\";\nimport { I3SMeshViewPerformanceInfo as pe } from \"./I3SMeshViewPerformanceInfo.js\";\nimport { I3SMeshWorkerHandle as fe, toWasmModification as be } from \"./I3SMeshWorkerHandle.js\";\nimport { ElevationMode as ye, ForAllFeaturesReturnType as ve, ForAllFeaturesMode as Ie } from \"./II3SMeshView3D.js\";\nimport { initialize as Me, setModificationsSync as Ce, filterObbsForModificationsSync as xe, interpretObbModificationResults as Ee } from \"./SceneLayerWorker.js\";\nimport { overrideColor as Oe } from \"./graphics/graphicUtils.js\";\nimport { areLabelsVisible as je } from \"./graphics/Labeler.js\";\nimport { TextureUsage as we, TextureEncoding as Re } from \"./i3s/enums.js\";\nimport Se from \"./i3s/Highlights.js\";\nimport { I3SAsyncElevationUpdater as Ae } from \"./i3s/I3SAsyncElevationUpdater.js\";\nimport { I3SCrossfadeHelper as De, NodeCrossfadeMetaData as Te } from \"./i3s/I3SCrossfadeHelper.js\";\nimport { boundingBoxCornerPoints as Ne } from \"./i3s/I3SGeometryUtil.js\";\nimport { I3SIntersectionHandler as Ve } from \"./i3s/I3SIntersectionHandler.js\";\nimport { getSupportedEncodings as Fe, selectEncoding as Pe, defaultMaterial as He, createTexture as Ue, configureMaterial as Ge } from \"./i3s/I3SMaterialUtil.js\";\nimport { NodeIMModificationImpact as Le, NodeState as ke } from \"./i3s/I3SNode.js\";\nimport { I3SOverrides as Be } from \"./i3s/I3SOverrides.js\";\nimport { computeGlobalTransformation as qe } from \"./i3s/I3SProjectionUtil.js\";\nimport { rendererNeedsTextures as We, checkSceneLayerValid as ze, checkSceneLayerCompatibleWithView as Ke, getCacheKeySuffix as $e, whenGraphicAttributes as Qe, computeVisibilityObb as Xe, filterInPlace as Ye, getCachedAttributeValue as Je, intersectBoundingRectWithMbs as Ze, MbsIntersectResult as et, addWraparound as tt, getSymbolInfo as it, transparentEdgeMaterial as st, getClipRect as rt } from \"./i3s/I3SUtil.js\";\nimport { IDBCache as ot } from \"./i3s/IDBCache.js\";\nimport { IDBMockCache as nt } from \"./i3s/IDBMockCache.js\";\nimport { LayerElevationProvider as at } from \"./i3s/LayerElevationProvider.js\";\nimport { attributeLookup as lt } from \"./support/attributeUtils.js\";\nimport { makeScheduleFunction as dt } from \"./support/makeScheduleFunction.js\";\nimport { ColorMixModeEnum as ht } from \"./support/symbolColorUtils.js\";\nimport { debugFlags as ct } from \"../support/debugFlags.js\";\nimport { ElevationRange as ut } from \"../support/ElevationRange.js\";\nimport { toBoundingRect as _t } from \"../support/extentUtils.js\";\nimport { Obb as gt } from \"../support/orientedBoundingBox.js\";\nimport { updatingProgress as mt } from \"../support/updatingProperties.js\";\nimport { glLayout as pt } from \"../support/buffer/glUtil.js\";\nimport { ObjectParameters as ft } from \"../webgl-engine/collections/Component/ObjectParameters.js\";\nimport { createVertexBufferLayout as bt } from \"../webgl-engine/collections/Component/SourceGeometry.js\";\nimport { Transform as yt } from \"../webgl-engine/collections/Component/Transform.js\";\nimport { TextureCoordinateAttributeType as vt } from \"../webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";\nimport { loadBasis as It } from \"../webgl-engine/lib/BasisUtil.js\";\nimport { Transparency as Mt } from \"../webgl-engine/lib/edgeRendering/interfaces.js\";\nimport Ct from \"../../../symbols/SimpleFillSymbol.js\";\nconst xt = \"esri.views.3d.layers.I3SMeshView3D\",\n  Et = () => l.getLogger(xt),\n  Ot = [1, 1, 1, 1];\nclass jt extends Te {\n  constructor(e, t, i, s, r, o, n, a, l) {\n    super(), this.node = e, this.featureIds = t, this.objectHandle = i, this.cachedRendererVersion = s, this.attributeInfo = r, this.material = o, this.textures = n, this.anchorIds = a, this.anchors = l, this.cachedElevationAnchors = null, this.cachedEdgeMaterials = new Array(), this.edgeMemoryUsage = 0;\n  }\n}\nvar wt;\n!function (e) {\n  e[e.CastShadows = 4] = \"CastShadows\", e[e.Pickable = 5] = \"Pickable\";\n}(wt || (wt = {}));\nconst Rt = 24,\n  St = 100 * o.MEGABYTES,\n  At = t => {\n    let o = class extends t {\n      constructor() {\n        super(...arguments), this._needsNormals = !0, this._updatingHandles = new G(), this._nodeId2Meta = new Map(), this._nodeId2MetaReloading = new Map(), this._i3sWasmLoaded = !1, this._snappingSourcesTrackers = [], this._hasLoadedPBRTextures = !1, this._asyncModuleLoading = 0, this._addTasks = new Map(), this._currentRenderer = null, this._rendererVersion = 0, this._colorVariable = null, this._opacityVariable = null, this._rendererFields = null, this._symbologyFields = null, this._symbologyOverride = null, this._symbologyOverrideFields = null, this._symbolInfos = new Map(), this._visibleGeometryChangedSchedulerHandle = null, this._hasComponentData = !1, this._hasVertexColors = !1, this._nodeColorOverride = null, this.updating = !0, this.holeFilling = \"auto\", this._hasColors = !1, this._hasTextures = !1, this._hasData = !1, this.slicePlaneEnabled = !1, this._modifications = new Array(), this.ignoresMemoryFactor = !1, this._layerUrl = \"\", this._cacheKeySuffix = null, this._planetRadiusInGlobalMode = 0, this._elevationTask = null, this._filters = [], this._arcade = null, this._tmpAttributeOnlyGraphic = new i(), this._crossfadeHelper = new De(this);\n      }\n      get lodCrossfadeoutDuration() {\n        return 0;\n      }\n      get lodCrossfadeinDuration() {\n        return 0;\n      }\n      get lodCrossfadeUncoveredDuration() {\n        return 0;\n      }\n      get layerUid() {\n        return this.i3slayer && this.i3slayer.uid;\n      }\n      get sublayerUid() {\n        return null;\n      }\n      get layerId() {\n        return this.i3slayer && this.i3slayer.id;\n      }\n      get sublayerId() {\n        return null;\n      }\n      get contentVisible() {\n        return !this.suspended && this._controller?.rootNodeVisible;\n      }\n      get legendEnabled() {\n        return this.contentVisible && !0 === this.i3slayer?.legendEnabled;\n      }\n      get updatingProgressValue() {\n        return this._controller?.updatingProgress ?? 0;\n      }\n      get hasTexturesOrVertexColors() {\n        return this._hasData ? this._hasTextures || this._hasColors ? \"yes\" : \"probably-not\" : \"unknown\";\n      }\n      get rendererTextureUsage() {\n        return We(this._currentRenderer) ? this._usePBR || this._hasLoadedPBRTextures ? we.AllTexturesPBR : we.AllTextures : this._usePBR || this._hasLoadedPBRTextures ? we.GeometryTexturesPBR : we.GeometryTextures;\n      }\n      get elevationOffset() {\n        const e = null != this.i3slayer ? this.i3slayer.elevationInfo : null;\n        return null != e && \"absolute-height\" === e.mode ? _e(e, this.i3slayer.spatialReference) : 0;\n      }\n      get elevationInfo() {\n        const e = null != this.i3slayer ? this.i3slayer.elevationInfo : null;\n        if (null == e) return new $t(ye.Absolute, 0);\n        const t = _e(e, this.i3slayer.spatialReference);\n        switch (e.mode) {\n          case \"absolute-height\":\n            return new $t(ye.Absolute, t);\n          case \"relative-to-ground\":\n            return new $t(ye.RelativeToGround, t);\n          case \"on-the-ground\":\n            return new $t(ye.OnTheGround, 0);\n          default:\n            return new $t(ye.Absolute, 0);\n        }\n      }\n      get supportedTextureEncodings() {\n        return Fe(this.view._stage.renderView.capabilities);\n      }\n      get uncompressedTextureDownsamplingEnabled() {\n        const e = this.view?.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled,\n          t = !(this.supportedTextureEncodings & Re.DDS_S3TC);\n        return e && t;\n      }\n      get clientGeometry() {\n        return this.i3sOverrides.geometryOverrides;\n      }\n      get elevationRange() {\n        const e = this._nodeId2Meta,\n          t = new ut();\n        for (const i of e.values()) {\n          if (null == i) continue;\n          const {\n              node: {\n                serviceMbsInIndexSR: e\n              }\n            } = i,\n            [s, r, o, n] = e;\n          t.expandElevationRangeValues(o - n, o + n);\n        }\n        return t.elevationRangeValid ? t : null;\n      }\n      get fullExtent() {\n        return this.i3slayer.fullExtent;\n      }\n      initialize() {\n        const e = has(\"enable-feature:idb-mock-cache\");\n        this._idbCache = e ? new nt(this.view, e) : new ot(\"esri-scenelayer-cache\", \"geometries\"), this._preLoadBasis(), this.addResolvingPromise(this.i3slayer.indexInfo);\n        const t = this.view.resourceController,\n          i = t.memoryController;\n        this.i3sOverrides = new Be({\n          view: this.view,\n          layer: this.i3slayer,\n          memoryController: i\n        }), this._worker = new fe(dt(t)), this.addResolvingPromise(this._worker.promise);\n        const s = this.i3slayer.store;\n        this._worker.setLegacySchema(this.uid, s.defaultGeometrySchema), ze(this.i3slayer), Ke(this.i3slayer, this.view), this._layerUrl = this.i3slayer.parsedUrl.path, this._controller = new ne({\n          layerView: this,\n          worker: this._worker\n        }), this._gpuMemoryEstimate = 0, this._texMemoryEstimate = 0, this._geoMemoryEstimate = 0, this._stage = this.view._stage, this._collection = this._stage.renderView.componentObjectCollection, this.resetHighlights();\n        const r = s.defaultGeometrySchema;\n        if (this._isIntegratedMesh || !r) this._hasComponentData = !1;else {\n          const e = r.featureAttributes;\n          this._hasComponentData = !!(e && e.faceRange && e.id);\n        }\n        this._hasVertexColors = null != (r?.vertexAttributes.color ?? null) && !this.i3slayer.cachedDrawingInfo?.color;\n        const o = this.view.resourceController.memoryController.newCache(`sl-${this.uid}`, e => this._deleteComponentObject(e));\n        this._memCache = o;\n        const n = this._controller,\n          a = this._nodeId2Meta,\n          l = this._nodeId2MetaReloading,\n          d = e => {\n            const t = n.index;\n            if (!t) return;\n            const i = t.rootNode;\n            if (!i) return;\n            const s = t => {\n              const i = t.index,\n                s = a.get(i) || l.get(i);\n              return e(t, s?.objectHandle ?? null);\n            };\n            t.traverse(i, s);\n          };\n        this._intersectionHandler = new Ve({\n          layerUid: this.layerUid,\n          sublayerUid: this.sublayerUid,\n          collection: this._collection,\n          slicePlaneEnabled: this.slicePlaneEnabled,\n          isGround: this._isIntegratedMesh,\n          traverseNodeHierarchy: d\n        }), this._updatingHandles.add(() => this.layerUid, e => this._intersectionHandler.layerUid = e), this._updatingHandles.add(() => this.sublayerUid, e => this._intersectionHandler.sublayerUid = e), this._elevationProvider = new at({\n          view: this.view,\n          layerElevationSource: this,\n          intersectionHandler: this._intersectionHandler\n        }), this._hasLoadedPBRTextures = this._usePBR, this._updatingHandles.add(() => this.view.clippingArea, () => this._clippingAreaChanged(), m), this._updatingHandles.add(() => this.fullOpacity, e => this._opacityChange(e)), this._updatingHandles.add(() => this.slicePlaneEnabled, e => this._slicePlaneEnabledChange(e)), this._updatingHandles.add(() => this.elevationOffset, (e, t) => {\n          this._reloadAll(t), this._controller.invalidateVisibilityObbs();\n        }), this._updatingHandles.add(() => this.elevationInfo, (e, t) => this._elevationInfoChanged(e, t), m), this._updatingHandles.add(() => !this.suspended && this.elevationInfo.mode !== ye.Absolute, (e, t) => {\n          e ? this.addHandles(this.view.basemapTerrain.on(\"elevation-change\", ({\n            extent: e\n          }) => this._ensureElevationTask().addExtent(e)), Yt) : t && this.removeHandles(Yt);\n        }, m), this._updatingHandles.add(() => this._usePBR, e => this._updatePBR(e));\n        const c = () => {\n          this._reloadAll(), this.clearMemCache();\n        };\n        this._updatingHandles.add(() => this.rendererTextureUsage, c), this._updatingHandles.add(() => this.uncompressedTextureDownsamplingEnabled, c), this._updatingHandles.add(() => this.contentVisible, e => this._contentVisibleChanged(e), m), this._updatingHandles.add(() => this.i3slayer.labelsVisible, () => this._labelingChanged(), m), this._updatingHandles.add(() => this.i3slayer.labelingInfo, () => this._labelingChanged(), m), this._updatingHandles.add(() => this._modifications, () => this._modificationsChanged(), m), this.addHandles([p(() => ct.I3S_TREE_SHOW_TILES, e => {\n          if (e && !this._treeDebugger) {\n            const e = this._controller.crsIndex;\n            import(\"./support/I3STreeDebugger.js\").then(({\n              I3STreeDebugger: t\n            }) => {\n              !this._treeDebugger && ct.I3S_TREE_SHOW_TILES && (this._treeDebugger = new t({\n                lv: this,\n                view: this.view,\n                nodeSR: e\n              }));\n            });\n          } else e || ct.I3S_TREE_SHOW_TILES || (this._treeDebugger = h(this._treeDebugger));\n        }, m), p(() => ct.I3S_SHOW_MODIFICATIONS, () => this._showModifications(), m)]), this._cacheKeySuffix = $e(this.i3slayer.spatialReference, this.view.renderSpatialReference), this._idbCache.init().catch(e => Et().warn(`Failed to initialize IndexedDB cache: ${e}`));\n        const {\n            view: u\n          } = this,\n          {\n            viewingMode: _,\n            renderCoordsHelper: g\n          } = u;\n        this._planetRadiusInGlobalMode = \"local\" === _ ? 0 : g.referenceEllipsoid.radius;\n      }\n      destroy() {\n        this._clearAddTasks(), this._elevationTask = h(this._elevationTask), this.i3sOverrides = h(this.i3sOverrides), this._elevationProvider && (this._elevationProvider.objectsChanged(this.getVisibleObbs()), this.view.elevationProvider.unregister(this._elevationProvider), this._elevationProvider = null), this._intersectionHandler && (this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler), this._intersectionHandler = null);\n        const e = this._worker;\n        e && (e.destroyContext(this.uid).then(() => e.destroy()), this._worker = null), this._removeAllNodeDataFromStage(), this._memCache = h(this._memCache), this._collection = null, this._stage = null, this._edgeView = null, this._labeler = h(this._labeler), this._treeDebugger = h(this._treeDebugger), this._controller = h(this._controller), this._highlights.destroy(), this._nodeId2Meta.clear(), this._nodeId2MetaReloading.clear(), this._crossfadeHelper = h(this._crossfadeHelper), this.emit(\"visible-geometry-changed\"), this._visibleGeometryChangedSchedulerHandle && (this._visibleGeometryChangedSchedulerHandle.remove(), this._visibleGeometryChangedSchedulerHandle = null), this._updatingHandles = h(this._updatingHandles);\n      }\n      _memEstimateTextureAdded(e) {\n        const t = e.memoryEstimate;\n        return this._gpuMemoryEstimate += t, this._texMemoryEstimate += t, t;\n      }\n      _memEstimateTextureRemoved(e) {\n        if (null != e) {\n          const t = e.memoryEstimate;\n          this._gpuMemoryEstimate -= t, this._texMemoryEstimate -= t;\n        }\n      }\n      _memEstimateGeometryAdded(e) {\n        const t = this._collection.getObjectGPUMemoryUsage(e);\n        return this._gpuMemoryEstimate += t, this._geoMemoryEstimate += t, t;\n      }\n      _memEstimateGeometryRemoved(e) {\n        const t = this._collection.getObjectGPUMemoryUsage(e);\n        this._gpuMemoryEstimate -= t, this._geoMemoryEstimate -= t;\n      }\n      isNodeLoaded(e) {\n        return this._nodeId2Meta.has(e);\n      }\n      isNodeReloading(e) {\n        return this._nodeId2MetaReloading.has(e);\n      }\n      get usedMemory() {\n        let e = null != this._labeler ? this._labeler.usedMemory : 0;\n        return this._nodeId2Meta.forEach(t => e += null != t ? t.node.memory : 0), this._nodeId2MetaReloading.forEach(t => e += null != t ? t.node.memory : 0), e;\n      }\n      get unloadedMemory() {\n        return (null != this._controller ? this._controller.unloadedMemoryEstimate : 0) + (null != this._labeler ? this._labeler.unloadedMemoryEstimate : 0);\n      }\n      _labelingChanged() {\n        if (!(je(this.i3slayer) && this._supportsLabeling)) return void (null != this._labeler && (this._labeler.destroy(), this._labeler = null));\n        if (null != this._labeler) return;\n        const e = new me({\n          view: this.view,\n          layer: this.i3slayer,\n          collection: this._collection,\n          overrides: this.i3sOverrides\n        });\n        this._nodeId2Meta.forEach(t => null != t && this._addMetaToLabeler(e, t)), this._labeler = e;\n      }\n      _loadAsyncModule(e) {\n        return ++this._asyncModuleLoading, e.then(e => (--this._asyncModuleLoading, e), e => {\n          throw --this._asyncModuleLoading, e;\n        });\n      }\n      _modificationsChanged() {\n        if (!this._i3sWasmLoaded && this.hasModifications) return this._i3sWasmLoaded = Me().then(() => {\n          this._i3sWasmLoaded = !0, this._modificationsChanged(), this.notifyUpdate();\n        }), void this.notifyUpdate();\n        if (!0 !== this._i3sWasmLoaded) return;\n        const e = this.uid,\n          t = this.i3slayer.spatialReference;\n        this._worker.setModifications(e, this._layerClippingArea, this._modifications, t);\n        const i = be(this._layerClippingArea, this._modifications, t);\n        Ce({\n          context: e,\n          modifications: i,\n          isGeodetic: t.isGeographic\n        }), this._controller.modificationsChanged();\n        const s = this.hasModifications ? new c() : null;\n        this._nodeId2Meta.forEach((e, t) => {\n          null == e ? (this._nodeId2Meta.delete(t), this._controller.updateLoadStatus(t, !1)) : e.node.hasModifications ? (this._nodeId2Meta.delete(t), this._nodeId2MetaReloading.set(t, e)) : null != s && s.push(e.node);\n        }), this.notifyChange(\"elevationRange\"), null != s && this._nodeId2MetaReloading.forEach(e => s.push(e.node)), null != s && s.length > 0 && (this.updateNodeModificationStatus(s), s.forAll(e => {\n          if (e.imModificationImpact !== Le.Culled) {\n            const t = this._nodeId2Meta.get(e.index);\n            this._controller.invalidateGeometryVisibility(e.index), null != t ? (this._nodeId2Meta.delete(e.index), this._nodeId2MetaReloading.set(e.index, t), this.notifyChange(\"elevationRange\")) : this._nodeId2Meta.has(e.index) && (this._nodeId2Meta.delete(e.index), this._controller.updateLoadStatus(e.index, !1));\n          }\n        })), this.clearMemCache(), this._controller.restartNodeLoading(), this._showModifications();\n      }\n      _showModifications() {\n        if (null != this._modificationGraphics && (this.view.graphics.removeMany(this._modificationGraphics), this._modificationGraphics = null), !ct.I3S_SHOW_MODIFICATIONS || 0 === this._modifications.length) return;\n        const e = {\n            clip: [227, 227, 79, .8],\n            mask: [227, 139, 79, .8],\n            replace: [139, 227, 79, .8]\n          },\n          t = {\n            outline: {\n              color: [255, 255, 255],\n              width: 1\n            }\n          };\n        this._modificationGraphics = new Array();\n        for (const s of this._modifications) {\n          const r = s.geometry;\n          r.spatialReference = this.i3slayer.spatialReference;\n          const o = new Ct({\n            ...t,\n            color: e[s.type]\n          });\n          this._modificationGraphics.push(new i({\n            geometry: r,\n            symbol: o\n          }));\n        }\n        this.view.graphics.addMany(this._modificationGraphics);\n      }\n      _addMetaToLabeler(e, t) {\n        e.addNodeMeta(t, (e, t) => this._createAttributes(e, t));\n      }\n      _contentVisibleChanged(e) {\n        e ? (this.view.elevationProvider.register(this._elevationContext, this._elevationProvider), this._stage.view.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler)) : (this._removeAllNodeDataFromStage(), this.view.elevationProvider && this.view.elevationProvider.unregister(this._elevationProvider), this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler));\n      }\n      getLoadedAttributes(e) {\n        const t = this._nodeId2Meta.get(e);\n        if (null != t?.attributeInfo) return t.attributeInfo.loadedAttributes;\n      }\n      getAttributeData(e) {\n        const t = this._nodeId2Meta.get(e);\n        if (null != t?.attributeInfo) return t.attributeInfo.attributeData;\n      }\n      setAttributeData(e, t) {\n        const i = this._nodeId2Meta.get(e);\n        null != i?.attributeInfo && (i.attributeInfo.attributeData = t, this._attributeValuesChanged(i));\n      }\n      async updateAttributes(e, t, i) {\n        const s = this._nodeId2Meta.get(e);\n        null != s && (await this.i3sOverrides.applyAttributeOverrides(s.featureIds, t, i, this._controller.requiredAttributes), s.attributeInfo = t, this._controller.reschedule(() => this._attributeValuesChanged(s), i).catch(e => {\n          u(e) || Et().warn(\"Error while updating attribute values. Layer might not display correctly.\", e);\n        }));\n      }\n      _attributeValuesChanged(e) {\n        e.cachedRendererVersion = this._getInvalidRendererVersion(), e.filteredIds = null, null != this._labeler && this._labeler.setNodeMetaAttributes(e, (e, t) => this._createAttributes(e, t)), this._updateEngineObject(e);\n      }\n      clearMemCache() {\n        null != this._memCache && this._memCache.clear();\n      }\n      getVisibleNodes() {\n        const e = new Array();\n        return this._nodeId2Meta.forEach(t => null != t && e.push(t.node)), e;\n      }\n      getVisibleObbs() {\n        const e = new Array();\n        return this._nodeId2Meta.forEach(t => {\n          if (null != t) {\n            const i = this.getNodeComponentObb(t.node);\n            null != i && e.push(i);\n          }\n        }), e;\n      }\n      getNodeComponentObb(e) {\n        const t = this._nodeId2Meta.get(e.index) ?? this._nodeId2MetaReloading.get(e.index);\n        return null != t ? this._collection.getComponentObb(t.objectHandle) : null;\n      }\n      getLoadedNodeIndices(e) {\n        this._nodeId2Meta.forEach((t, i) => e.push(i)), this._nodeId2MetaReloading.forEach((t, i) => e.push(i));\n      }\n      _preLoadBasis() {\n        !has(\"disable-feature:i3s-basis\") && this.supportedTextureEncodings & Re.Basis && this.i3slayer.textureSetDefinitions?.some(e => e.formats.some(e => \"basis\" === e.format || \"ktx2\" === e.format)) && It();\n      }\n      _getVertexBufferLayout(e, t) {\n        const i = {\n          hasTexture: Lt(e.params.material),\n          hasNormals: t.normal,\n          hasRegions: t.uvRegion\n        };\n        return pt(bt(this._getGeometryParameters(i)));\n      }\n      _getObjectIdField() {\n        return this.i3slayer.objectIdField || oe;\n      }\n      _getGlobalIdField() {\n        return this.i3slayer.associatedLayer?.globalIdField;\n      }\n      _findGraphicNodeAndIndex(e) {\n        const t = lt(this.i3slayer.fieldsIndex, e.attributes, this._getObjectIdField());\n        let i = null;\n        return d(this._nodeId2Meta, e => {\n          if (null == e) return !1;\n          const s = e.featureIds.indexOf(t);\n          return -1 !== s && (i = {\n            node: e.node,\n            index: s\n          }, !0);\n        }), i;\n      }\n      _getGraphicIndices(e, t) {\n        const i = this._nodeId2Meta.get(e.index);\n        if (null == i) return [];\n        const s = [],\n          r = this._getObjectIdField(),\n          o = this.i3slayer.fieldsIndex;\n        for (const n of t) {\n          const e = lt(o, n.attributes, r),\n            t = i.featureIds.indexOf(e);\n          -1 !== t && s.push(t);\n        }\n        return s;\n      }\n      whenGraphicBounds(e) {\n        const t = this._findGraphicNodeAndIndex(e);\n        if (!t) return Promise.reject();\n        const i = this._getAABB(t.node.index, t.index);\n        return null == i ? Promise.reject() : Promise.resolve({\n          boundingBox: i,\n          screenSpaceObjects: []\n        });\n      }\n      getAABBFromIntersectorTarget(e) {\n        return null == e.nodeIndex || null == e.componentIndex ? null : this._getAABB(e.nodeIndex, e.componentIndex);\n      }\n      _getAABB(e, t) {\n        const i = this._nodeId2Meta.get(e);\n        if (null == i?.featureIds || t >= i.featureIds.length) return null;\n        const s = i.objectHandle,\n          r = Ne(t, this._collection, s, J(24), 0),\n          o = this.view.renderSpatialReference,\n          n = this.view.spatialReference;\n        if (!B(r, o, 0, r, n, 0, 8)) return null;\n        const a = K();\n        return $(a, r, 0, 8), a;\n      }\n      whenGraphicAttributes(e, t) {\n        return Qe(this.i3slayer, e, this._getObjectIdField(), t, () => [...this._nodeId2Meta.values()].filter(s));\n      }\n      getGraphicFromIntersectorTarget(e) {\n        if (null == e.nodeIndex || null == e.componentIndex) return null;\n        const t = this._nodeId2Meta.get(e.nodeIndex);\n        return null == t?.featureIds || e.componentIndex >= t.featureIds.length ? null : this._createGraphic(e.componentIndex, t);\n      }\n      _getCacheKey(e) {\n        return `${this._layerUrl}/v${Rt}/${e}${this._cacheKeySuffix}`;\n      }\n      _getMemCacheKey(e, t = this.elevationOffset) {\n        return e + \"#\" + t;\n      }\n      get _idbCacheEnabled() {\n        return !this._controller.disableIDBCache && !this.hasModifications && 0 === this.elevationOffset && null != this._cacheKeySuffix;\n      }\n      loadCachedGPUData(e) {\n        return null != this._memCache ? this._memCache.pop(this._getMemCacheKey(e)) : null;\n      }\n      deleteCachedGPUData(e) {\n        null != e && this._deleteComponentObject(e);\n      }\n      _cacheGPUData(e, t = this.elevationOffset) {\n        if (null == this._memCache) return void this._deleteComponentObject(e);\n        const i = this._controller.indexDepth - e.node.level;\n        this._memCache.put(this._getMemCacheKey(e.node.index, t), e, e.node.memory, i);\n      }\n      loadMissingTextures(e, t, i, s) {\n        const r = e?.filter((e, i) => {\n          if (!(e.usage & this.rendererTextureUsage)) return !1;\n          if (null == t) return !0;\n          const s = Pe(e.encodings, this.supportedTextureEncodings),\n            r = t[i];\n          return !!(null == r?.data || s && r.encoding !== s.encoding);\n        }) ?? [];\n        return 0 === r.length ? Promise.resolve(!1) : i(r, s).then(i => {\n          let s = 0;\n          for (let r = 0; r < e.length; r++) s < i.length && i[s].id === e[r].id && (t[r] = i[s], s++);\n          return !0;\n        });\n      }\n      loadCachedNodeData(e, t, i) {\n        return this._idbCacheEnabled ? this._idbCache.get(this._getCacheKey(e.id), t).then(s => null == s ? null : s.nodeVersion !== e.version ? (this._idbCache.remove(this._getCacheKey(e.id)), null) : (this.elevationInfo.mode === ye.Absolute && (e.geometryObbInRenderSR = gt.fromData(s.geometryObbData)), this.loadMissingTextures(s.requiredTextures, s.textureData, i, t).then(i => (i && this._idbCache.initialized && null != s.textureData && (s.byteSize = qt(s.transformedGeometry, s.textureData), s.textureData.every(Bt) && Wt(e, s) && this._idbCache.put(this._getCacheKey(e.id), s).catch(t => Et().warn(`Failed to update node with textures in IndexedDB cache: ${e.id}: ${t}`))), _(t), s)))) : Promise.resolve(null);\n      }\n      addNode(e, t, i) {\n        return kt(t) ? null == t.geometryBuffer ? (this._addNodeMeta(e.index, null), Promise.resolve()) : this._addData(e, t.attributeDataInfo, () => this._transformNode(e, t, i).then(s => this._safeReschedule(() => {\n          if (null == s) return e.hasModifications = !1, this._addCachedNodeData(e, null, i);\n          e.hasModifications = s.transformedGeometry.hasModifications;\n          const {\n              obb: r,\n              componentOffsets: o,\n              featureIds: n,\n              anchorIds: a,\n              anchors: l,\n              transformedGeometry: d,\n              globalTrafo: h\n            } = s,\n            c = R(Qt, r.center.x, r.center.y, r.center.z);\n          S(c, c, h);\n          const u = new gt(c, [r.extents.x, r.extents.y, r.extents.z], w(r.orientation.x, r.orientation.y, r.orientation.z, r.orientation.w));\n          this.elevationInfo.mode === ye.Absolute && (e.geometryObbInRenderSR = u), t.geometryData.componentOffsets = o, n && (t.geometryData.featureIds = Array.from(n)), t.geometryData.anchorIds = a, t.geometryData.anchors = l;\n          const _ = {\n            nodeVersion: e.version,\n            geometryData: t.geometryData,\n            requiredTextures: t.requiredTextures,\n            textureData: t.textureData,\n            transformedGeometry: d,\n            globalTrafo: h,\n            geometryObbData: u.data,\n            byteSize: qt(d, t.textureData)\n          };\n          if (this._idbCacheEnabled && this._idbCache.initialized && Wt(e, _)) {\n            const t = null != _.textureData ? _.textureData.map(e => Bt(e) ? e : null) : null;\n            this._idbCache.put(this._getCacheKey(e.id), {\n              ..._,\n              textureData: t\n            }).catch(t => Et().warn(`Failed to store node in IndexedDB cache: ${e.id}: ${t}`));\n          }\n          return this._addCachedNodeData(e, _, i);\n        }, i))) : Promise.reject();\n      }\n      getElevationRange(e) {\n        const t = new ut(),\n          i = this._controller,\n          {\n            index: s\n          } = i;\n        if (!s) return t;\n        const {\n          rootNode: r\n        } = s;\n        if (!r) return t;\n        const o = this._nodeId2Meta,\n          n = e[3],\n          a = i.viewportQueries,\n          l = this._planetRadiusInGlobalMode,\n          {\n            view: d\n          } = this,\n          {\n            renderCoordsHelper: h\n          } = d,\n          c = h.referenceEllipsoid.radius,\n          u = this._collection,\n          _ = i => {\n            const {\n              childrenLoaded: s\n            } = i;\n            if (0 === s) return !1;\n            const r = a.getAndUpdateVisibilityObbInRenderSR(i);\n            let d = null,\n              _ = -1;\n            if (r) {\n              if (_ = r.radius, !r.intersectSphereWithMBS(e, _)) return !1;\n            } else d = a.getServiceMbsInRenderSR(i), d && (_ = d[3]);\n            if (_ >= 0 && n >= 1 * _) return null != r ? ei(t, r, l) : null != d && d[3] >= 0 && ti(t, d, l), !1;\n            const g = Zt;\n            if (g.elevationRangeMin = 1 / 0, g.elevationRangeMax = -1 / 0, (null != r || null != d) && (null != r ? ei(g, r, l) : null != d && ti(g, d, l), g.elevationRangeMin >= t.elevationRangeMin && g.elevationRangeMax <= t.elevationRangeMax)) return !1;\n            const m = o.get(i.index);\n            if (m) {\n              const {\n                geometryObbInRenderSR: s\n              } = i;\n              if (!s || s.intersectSphereWithMBS(e)) {\n                if (s) {\n                  if (n > 0 * s.radius) return ei(t, s, l), !1;\n                }\n                const {\n                    objectHandle: e\n                  } = m,\n                  i = u.getObjectTransform(e),\n                  r = h.getAltitude(i.position);\n                u.expandRangeWithComponentObjectElevationRange(e, r, c, t);\n              }\n            }\n            return s - (m ? 1 : 0) > 0;\n          };\n        return s.traverse(r, _), t;\n      }\n      computeVisibilityObb(e) {\n        return Xe(e, this.view.renderSpatialReference, this._controller.crsIndex, this.i3slayer.spatialReference, this.elevationOffset, this._modifications, this.view.renderCoordsHelper.sphericalPCPF);\n      }\n      _transformNode(e, t, i) {\n        const s = t.geometryData.geometries ?? [],\n          r = new Array(s.length);\n        for (let p = 0; p < s.length; ++p) r[p] = this._getVertexBufferLayout(s[p], t.geometryDescriptor);\n        const o = this.i3slayer.normalReferenceFrame,\n          n = t.normalReferenceFrame ?? o ?? \"none\",\n          a = e.serviceMbsInIndexSR,\n          l = this.elevationOffset,\n          d = this._controller.crsIndex,\n          h = this._controller.crsVertex,\n          c = this.view.renderSpatialReference,\n          u = qe(a, l, n, d, c),\n          _ = q(d, h),\n          g = q(h, c);\n        if (null == _ || null == g) return Promise.resolve(null);\n        const m = {\n          context: this.uid,\n          geometryBuffer: t.geometryBuffer,\n          geometryData: t.geometryData,\n          geometryDescriptor: t.geometryDescriptor,\n          layouts: r,\n          globalTrafo: u,\n          mbs: a,\n          obbData: e.serviceObbInIndexSR?.data,\n          elevationOffset: l,\n          needNormals: this._needsNormals && this._controller.isMeshPyramid,\n          normalReferenceFrame: n,\n          indexToVertexProjector: _,\n          vertexToRenderProjector: g\n        };\n        return this._worker.invoke(m, i);\n      }\n      get _supportsNodeCrossFading() {\n        return !this.view?._stage?.renderer.shadowsEnabled;\n      }\n      get nodeCrossfadingEnabled() {\n        return this._supportsNodeCrossFading && (this.lodCrossfadeinDuration > 0 || this.lodCrossfadeoutDuration > 0 || this.lodCrossfadeUncoveredDuration > 0);\n      }\n      get nodeFadeoutEnabled() {\n        return this._supportsNodeCrossFading && this.lodCrossfadeoutDuration > 0;\n      }\n      _setNewNodeOpacity(e) {\n        const t = this.nodeCrossfadingEnabled ? 0 : this.fullOpacity;\n        this._setNodeOpacity(e, t);\n      }\n      addCachedGPUData(e, t, i) {\n        if (this.elevationInfo.mode === ye.Absolute && (e.geometryObbInRenderSR = this._collection.getComponentObb(t.objectHandle).clone()), !this._controller.isGeometryVisible(e)) return void this._cacheGPUData(t);\n        null != this._labeler && this._addMetaToLabeler(this._labeler, t);\n        const s = e.index;\n        this._addNodeMeta(s, t), this.updateNodeState(s, i), this._collection.setObjectVisibility(t.objectHandle, !0), this._updateMaterial(t), this._setNewNodeOpacity(t), this.elevationInfo.mode !== ye.Absolute && this._ensureElevationTask().schedule(s), this._updateEngineObject(t), this._highlights.objectCreated(t), null != this._treeDebugger && this._treeDebugger.update();\n      }\n      addCachedNodeData(e, t, i, s) {\n        return this._addData(e, i, () => this._addCachedNodeData(e, t, s));\n      }\n      async deleteCachedNodeData(e) {\n        if (this._idbCacheEnabled) return this._idbCache.remove(this._getCacheKey(e));\n      }\n      async _addCachedNodeData(e, t, i) {\n        if (!this.contentVisible || !this._controller.isGeometryVisible(e)) return void this._removeNodeStageData(e.index, this.elevationOffset, this._nodeId2MetaReloading);\n        if (null == t) return void this._addNodeMeta(e.index, null);\n        const s = this._addTasks.get(e.index),\n          {\n            geometryData: r,\n            transformedGeometry: o,\n            globalTrafo: n\n          } = t;\n        await this.i3sOverrides.applyAttributeOverrides(r.featureIds, s.attributeInfo, i, this._controller.requiredAttributes);\n        const a = null != t.textureData ? t.textureData.filter(e => null != e && !!(e.usage & this.rendererTextureUsage)) : [];\n        !has(\"disable-feature:i3s-basis\") && a.some(e => null != e && (e.encoding === Re.Basis || e.encoding === Re.KTX2)) && (await It()), e.memory = 0;\n        const {\n            componentOffsets: l,\n            geometries: d,\n            featureIds: h,\n            anchorIds: c,\n            anchors: u\n          } = r,\n          _ = this._collection,\n          g = d[0],\n          {\n            layout: m,\n            indices: p,\n            interleavedVertexData: f,\n            positionData: b,\n            hasColors: y\n          } = o,\n          {\n            material: v,\n            geometryParameters: w\n          } = this._materialParameters(g, m),\n          R = l || new Uint32Array([0, p ? p.length : f.byteLength / m[0].stride]),\n          S = {\n            vertices: {\n              data: f,\n              count: f.byteLength / m[0].stride,\n              layoutParameters: w\n            },\n            positionData: {\n              positions: Z(b.data),\n              indices: ee(b.indices)\n            },\n            indices: p,\n            componentOffsets: R\n          },\n          T = g.transformation ? O(g.transformation) : j();\n        x(T, n, T);\n        const N = E(P(), T),\n          V = I(C(), T),\n          F = this.view.renderSpatialReference,\n          H = this.view.basemapTerrain.spatialReference,\n          G = gt.fromData(t.geometryObbData).center,\n          k = [1, 1, 1];\n        L(G, F, k, H) || Et().errorOnce(\"Unsupported coordinate system for IM overlay\");\n        const B = P();\n        W(G, F, B, H);\n        const q = C();\n        M(q, V);\n        const z = P();\n        A(z, D(z, G, N), q);\n        const K = B[0] - z[0] * k[0],\n          $ = B[1] - z[1] * k[1],\n          Q = _.createObject(new ft(U(K, $, k[0], k[1]), new yt(N, V), gt.fromData(t.geometryObbData), S)),\n          X = w.textureCoordinates === vt.Atlas,\n          {\n            textures: Y,\n            texturePromise: J\n          } = this._initMaterialAndTextures(Q, v, a, X);\n        e.memory += this._memEstimateGeometryAdded(Q), e.memory += Y.reduce((e, t) => e + (null != t ? this._memEstimateTextureAdded(t) : 0), 0);\n        const te = !!v.hasParametersFromSource,\n          ie = \"blend\" !== v.alphaMode && v.metallicRoughness.baseColorFactor[3] >= 1,\n          se = new jt(e, h, Q, this._getInvalidRendererVersion(), s.attributeInfo, {\n            hasParametersFromSource: te,\n            isOpaque: ie\n          }, Y, c, u);\n        s.meta = se, !this._hasTextures && t.requiredTextures?.some(({\n          usage: e\n        }) => !!(e & we.ColorTextures)) && (this._hasTextures = !0), this._hasData = !0, this._hasColors = this._hasColors || y, this._hasTextures = this._hasTextures || !!e.resources.texture, this.notifyChange(\"hasTexturesOrVertexColors\");\n        const re = this.slicePlaneEnabled;\n        return Promise.all([this._addOrUpdateEdgeRendering(se), J]).then(([t, s]) => (this._addTasks.has(e.index) && t?.updateObjectVisibility(se.objectHandle, !1).catch(e => Dt(e, this.i3slayer.title)), this._safeReschedule(() => {\n          const i = this._addTasks.get(e.index);\n          if (!i) return;\n          if (this._addNodeMeta(e.index, se), i.meta = null, !this.contentVisible) return void this._removeNodeStageData(e.index, this.elevationOffset);\n          _.setObjectVisibility(Q, !0), t?.updateObjectVisibility(se.objectHandle, !0).catch(e => Dt(e, this.i3slayer.title)), se.attributeInfo = i.attributeInfo;\n          const s = se.cachedRendererVersion !== this._rendererVersion,\n            r = re !== this.slicePlaneEnabled;\n          this._updateElevationOffsets(se);\n          const o = se.elevationOffsets;\n          this._updateComponentData(se);\n          const n = this._applyFiltersToNode(se);\n          (s || null != t && (r || n || o)) && this._addOrUpdateEdgeRendering(se), null != this._labeler && this._addMetaToLabeler(this._labeler, se), this._visibleGeometryChanged(se, Tt.ADD), this._highlights.objectCreated(se), this._updateMaterial(se), this._setNewNodeOpacity(se), null != this._treeDebugger && this._treeDebugger.update();\n        }, i))).catch(e => {\n          throw null != s.meta && (this._cacheGPUData(s.meta), s.meta = null), e;\n        });\n      }\n      _addNodeMeta(e, t) {\n        if (this._removeNodeStageData(e, this.elevationOffset, this._nodeId2MetaReloading), this._nodeId2Meta.has(e)) {\n          Et().error(\"Removing duplicated node\");\n          const t = this._nodeId2Meta.get(e);\n          null != t && this._deleteComponentObject(t);\n        } else this._controller.updateLoadStatus(e, !0);\n        null != t && (t.lodCrossfadeProgress = null, this.nodeCrossfadingEnabled && Kt(t.cachedEdgeMaterials, 0)), this._nodeId2Meta.set(e, t), this.notifyChange(\"elevationRange\");\n      }\n      _updateElevationOffsets(e) {\n        const t = this.view.renderSpatialReference,\n          i = this._controller.crsIndex,\n          s = this.elevationInfo,\n          r = this.view.basemapTerrain,\n          o = r.spatialReference,\n          n = s.mode;\n        if (null == t || null == o || n === ye.Absolute) return void (e.elevationOffsets = null);\n        const a = this._collection.getObjectTransform(e.objectHandle);\n        e.elevationOffsets = e.elevationOffsets ?? [];\n        const l = Qt,\n          d = Xt,\n          h = n === ye.OnTheGround,\n          c = this.view.renderCoordsHelper,\n          u = e.featureIds.length,\n          _ = (() => {\n            if (e.cachedElevationAnchors) return e.cachedElevationAnchors;\n            const s = J(3 * u);\n            e.cachedElevationAnchors = s;\n            for (let r = 0; r < u; r++) {\n              const n = 3 * r,\n                h = e.anchorIds?.indexOf(r) ?? -1;\n              e.anchors && h >= 0 ? (R(l, e.anchors[3 * h], e.anchors[3 * h + 1], e.anchors[3 * h + 2]), T(l, l, te(e.node.serviceMbsInIndexSR)), W(l, i, l, o), s[n] = l[0], s[n + 1] = l[1], s[n + 2] = c.getAltitude(l)) : (this._collection.getComponentAabb(e.objectHandle, r, d, !0), R(l, (d[0] + d[3]) / 2, (d[1] + d[4]) / 2, d[2]), A(l, l, a.rotationScale), T(l, l, a.position), s[n + 2] = c.getAltitude(l), W(l, t, l, o), s[n] = l[0], s[n + 1] = l[1]);\n            }\n            return s;\n          })(),\n          g = s.offset,\n          m = e.elevationOffsets,\n          p = (e, t) => {\n            const i = h ? _[3 * e + 2] : 0;\n            m[e] = g + (null != t ? t - i : 0);\n          };\n        r.getElevations(_, u, p);\n      }\n      _ensureElevationTask() {\n        return null != this._elevationTask || (this._elevationTask = new Ae(this.view.resourceController.scheduler, e => {\n          const t = this._controller.updateElevationChanged(e, this.view.basemapTerrain.spatialReference);\n          return null != t ? t.filterInPlace(e => null != this._nodeId2Meta.get(e)) : null;\n        }, e => {\n          const t = this._nodeId2Meta.get(e);\n          this._nodeElevationAlignmentChanged(t);\n        }, () => this.elevationInfo?.mode)), this._elevationTask;\n      }\n      _elevationInfoChanged(e, t) {\n        const i = e.mode !== ye.Absolute,\n          s = !!t && t !== e && t.mode !== ye.Absolute;\n        this._intersectionHandler.updateElevationAlignState(i, this.view.state.viewingMode), i && !s && this._controller.removeAllGeometryObbs(), this._nodeId2Meta.forEach(e => this._nodeElevationAlignmentChanged(e));\n      }\n      _nodeElevationAlignmentChanged(e) {\n        null != e && (this._updateElevationOffsets(e), this._updateComponentData(e), this._updateEdgeRendering(e), null != this._labeler && this._labeler.updateLabelPositions(e), this._updateSnappingSources(e, Tt.UPDATE));\n      }\n      _safeReschedule(e, t) {\n        return _(t), this._controller.reschedule(e, t);\n      }\n      _materialParameters(e, t) {\n        const i = null != e.params.material ? e.params.material : He(),\n          s = t.some(e => \"uvRegion\" === e.name),\n          r = t.some(e => \"normalCompressed\" === e.name),\n          o = Lt(i);\n        return {\n          geometryParameters: this._getGeometryParameters({\n            hasTexture: o,\n            hasNormals: r,\n            hasRegions: s\n          }),\n          material: i\n        };\n      }\n      _initMaterialAndTextures(e, t, i, s) {\n        const r = this._stage.renderView,\n          o = i.map(e => Ue(e, t, s, r));\n        this._stage.addMany(o);\n        let n = null;\n        return this._collection.updateMaterial(e, e => {\n          n = Ge(e, t, o, i, this.view._stage.renderView.textures, {\n            rendererTextureUsage: this.rendererTextureUsage,\n            usePBR: this._usePBR,\n            isIntegratedMesh: this._isIntegratedMesh,\n            slicePlaneEnabled: this.slicePlaneEnabled,\n            viewSpatialReference: this.view.spatialReference\n          }), this._updateMaterialOverlay(e);\n        }), {\n          textures: o,\n          texturePromise: n\n        };\n      }\n      _getGeometryParameters(e) {\n        return {\n          textureCoordinates: e.hasTexture ? e.hasRegions ? vt.Atlas : vt.Default : vt.None,\n          colors: this._hasVertexColors,\n          hasNormals: e.hasNormals && this._needsNormals,\n          needsNormals: this._needsNormals\n        };\n      }\n      _addData(e, t, i) {\n        let s = this._addTasks.get(e.index);\n        return s ? s.attributeInfo = t : (s = {\n          ...g(),\n          attributeInfo: t,\n          meta: null\n        }, this._addTasks.set(e.index, s), i().then(s.resolve, s.reject).then(() => this._addTasks.delete(e.index)).catch(t => {\n          throw this._addTasks.delete(e.index), t;\n        })), s.promise;\n      }\n      _clearAddTasks() {\n        this._addTasks.forEach(e => {\n          null != e.meta && (this._cacheGPUData(e.meta), e.meta = null);\n        }), this._addTasks.clear();\n      }\n      _clippingAreaChanged() {\n        const e = this.view.renderSpatialReference,\n          t = this.i3slayer.spatialReference,\n          i = X();\n        this._renderClippingArea = _t(this.view.clippingArea, i, e) ? i : null;\n        const s = X();\n        this._layerClippingArea = _t(this.view.clippingArea, s, t) ? s : null, this._filterChange(), this._controller && this._controller.updateClippingArea(this.view.clippingArea), this._isIntegratedMesh && this._modificationsChanged();\n      }\n      get hasGeometryFilter() {\n        return !1;\n      }\n      _geometryFilterChange() {\n        const e = this.hasGeometryFilter;\n        this._controller.geometryFilterChanged(e), this._applyFilters(e);\n      }\n      _filterChange() {\n        this._applyFilters(this.hasGeometryFilter);\n      }\n      _applyFilters(e) {\n        this._filters = this.getFilters(), e ? this._controller && this._controller.requestUpdate() : this._nodeId2Meta.forEach(e => {\n          null != e && this._applyFiltersToNode(e) && (this._addOrUpdateEdgeRendering(e), this._visibleGeometryChanged(e, Tt.UPDATE));\n        });\n      }\n      getFilters() {\n        const e = [],\n          t = this._renderClippingArea;\n        return null != t && e.push((e, i) => this._boundingRectFilter(e, i, t)), e;\n      }\n      addSqlFilter(e, t, i) {\n        if (null != t) {\n          const s = t.fieldNames;\n          e.push((e, r) => this._sqlFilter(e, r, t, s, i));\n        }\n      }\n      _sqlFilter(e, t, i, s, r) {\n        const o = {},\n          n = this._createLayerGraphic(o),\n          a = this.i3slayer.objectIdField,\n          l = t.featureIds,\n          d = t.attributeInfo?.attributeData;\n        s.every(e => e === a || null != d?.[e]) && Ye(e, l, e => {\n          o[a] = l[e];\n          for (const i of s) i !== a && (o[i] = d ? Je(d[i], e) : null);\n          try {\n            return i.testFeature(n);\n          } catch (t) {\n            return r(t), !1;\n          }\n        });\n      }\n      _boundingRectNodeTest(e, t) {\n        return k(e.node.serviceMbsInIndexSR, this._controller.crsIndex, Gt, this.view.renderSpatialReference), Ze(t, Gt);\n      }\n      _boundingRectFeatureTest(e, t, i) {\n        return this._collection.getComponentAabb(e.objectHandle, t, Nt), Q(Nt, Vt), Y(i, Vt);\n      }\n      _boundingRectFilter(e, t, i) {\n        const s = this._collection,\n          r = this._boundingRectNodeTest(t, i);\n        if (r === et.INSIDE) return;\n        if (r === et.OUTSIDE) return void (e.length = 0);\n        const o = s.getComponentCount(t.objectHandle);\n        if (o.invisible + o.visible !== t.featureIds.length) return;\n        const n = this._transformClippingArea(Ft, i, t.objectHandle);\n        Ye(e, t.featureIds, e => this._boundingRectFeatureTest(t, e, n));\n      }\n      _transformClippingArea(e, t, i) {\n        const s = this._collection.getObjectTransform(i),\n          r = s.position,\n          o = s.rotationScale;\n        return e[0] = (t[0] - r[0]) / o[0], e[1] = (t[1] - r[1]) / o[4], e[2] = (t[2] - r[0]) / o[0], e[3] = (t[3] - r[1]) / o[4], e;\n      }\n      async _addOrUpdateEdgeRendering(e, t = !0) {\n        const i = e.objectHandle,\n          {\n            hasEdges: s,\n            perFeatureEdgeMaterials: r\n          } = this._getFilteredEdgeMaterials(e),\n          o = {\n            hasSlicePlane: this.slicePlaneEnabled\n          };\n        s && !this._edgeView && (this._edgeView = await this._stage.renderer.loadEdgeView());\n        const n = this._edgeView;\n        if (!n) return null;\n        const a = n.hasObject(i);\n        if (s) {\n          if (a) {\n            if (this.nodeCrossfadingEnabled) {\n              Kt(r, this.getNodeOpacity(e));\n            }\n            return n.updateAllComponentMaterials(i, r, o, t).catch(e => Dt(e, this.i3slayer.title)), n.updateObjectVisibility(i, !0).catch(e => Dt(e, this.i3slayer.title)), n.updateAllVerticalOffsets(i, e.elevationOffsets).catch(e => Dt(e, this.i3slayer.title)), n;\n          }\n          const s = await this._collection.addEdges(i, n, r, o, e.elevationOffsets);\n          return e.edgeMemoryUsage = s, e.node.memory += s, n;\n        }\n        return a && (e.node.memory -= e.edgeMemoryUsage, e.edgeMemoryUsage = 0, n.removeObject(i)), null;\n      }\n      _applyFiltersToNode(e) {\n        return !!this._applyFiltersToNodeComponents(e) && (null != this._labeler && this._labeler.applyFilterChange(e), !0);\n      }\n      _applyFiltersToNodeComponents(e) {\n        const t = this._collection,\n          i = t.getComponentCount(e.objectHandle),\n          s = null != e.filteredIds,\n          r = 0 === i.invisible;\n        if (t.setAllComponentVisibilities(e.objectHandle, \"all\"), 0 === this._filters.length) return e.filteredIds = null, !r;\n        if (this._updateCachedFilteredIds(e), s && e.filteredIds === e.featureIds) return !r;\n        const o = this._computeFilteredComponentIndices(e);\n        return t.setAllComponentVisibilities(e.objectHandle, o), !0;\n      }\n      _updateCachedFilteredIds(e) {\n        null != e.filteredIds && e.appliedFilters === this._filters || (e.filteredIds = this._computeFilteredIds(e), e.appliedFilters = this._filters);\n      }\n      _computeFilteredIds(e) {\n        const t = e.featureIds.slice();\n        for (const i of this._filters) if (i(t, e), 0 === t.length) break;\n        return t.length === e.featureIds.length ? e.featureIds : t;\n      }\n      _computeFilteredComponentIndices(e) {\n        const t = new Array(),\n          i = e.filteredIds;\n        return null != i && e.featureIds.forEach((e, s) => {\n          i[t.length] === e && t.push(s);\n        }), t;\n      }\n      _removeAllNodeDataFromStage(e = this.elevationOffset) {\n        this._nodeId2Meta.forEach((t, i) => this._removeNodeStageData(i, e)), this._nodeId2MetaReloading.forEach((t, i) => this._removeNodeStageData(i, e, this._nodeId2MetaReloading)), this._elevationTask = h(this._elevationTask);\n      }\n      removeNode(e) {\n        const t = this.elevationOffset;\n        this._removeNodeStageData(e, t), this._removeNodeStageData(e, t, this._nodeId2MetaReloading), null != this._elevationTask && this._elevationTask.remove(e);\n      }\n      _removeNodeStageData(e, t, i = this._nodeId2Meta) {\n        i.has(e) && this._controller.updateLoadStatus(e, !1);\n        const s = i.get(e);\n        null != s ? (this._collection.setObjectVisibility(s.objectHandle, !1), null != this._edgeView && this._edgeView.hasObject(s.objectHandle) && this._edgeView.updateObjectVisibility(s.objectHandle, !1).catch(e => Dt(e, this.i3slayer.title)), this._visibleGeometryChanged(s, Tt.REMOVE), null != this._labeler && this._labeler.removeNodeMeta(s), i.delete(e), this._highlights.objectDeleted(s), i === this._nodeId2Meta ? (this._cacheGPUData(s, t), this.nodeCrossfadingEnabled && this._crossfadeHelper.stopNodeFading(s)) : this._deleteComponentObject(s), null != this._treeDebugger && this._treeDebugger.update()) : i.delete(e);\n      }\n      _deleteComponentObject(e) {\n        if (null != this._edgeView && this._edgeView.removeObject(e.objectHandle), this._memEstimateGeometryRemoved(e.objectHandle), this._collection.destroyObject(e.objectHandle), e.textures) for (const t of e.textures) this._memEstimateTextureRemoved(t), this._stage.remove(t);\n      }\n      updateNodeState(e, t) {\n        const i = this._nodeId2Meta.get(e);\n        null != i && this._collection.updateMaterial(i.objectHandle, e => e.polygonOffsetEnabled = t === ke.Hole);\n      }\n      updateNodeIndex(e, t) {\n        if (this._nodeId2Meta.has(e)) {\n          const i = this._nodeId2Meta.get(e);\n          this._nodeId2Meta.delete(e), this._nodeId2Meta.set(t, i), this.notifyChange(\"elevationRange\");\n        }\n        const i = this._nodeId2MetaReloading.get(e);\n        i && (this._nodeId2MetaReloading.delete(e), this._nodeId2MetaReloading.set(t, i));\n      }\n      _invalidateAllSymbols() {\n        this._rendererVersion = tt(this._rendererVersion, 1), this._controller && this._controller.requestUpdate();\n      }\n      _getInvalidRendererVersion() {\n        return tt(this._rendererVersion, -1);\n      }\n      async _rendererChange(e) {\n        if (this._currentRenderer = e, this.notifyChange(\"rendererTextureUsage\"), this._rendererVersion = tt(this._rendererVersion, 1), this._rendererFields = null, this._colorVariable = null, this._opacityVariable = null, this._invalidateAllSymbols(), e && (this._rendererFields = await e.getRequiredFields(this.i3slayer.fieldsIndex)), this._updateSymbologyFields(), !this._arcade && e && \"arcadeRequired\" in e && e.arcadeRequired && (this._arcade = await ce()), e && \"visualVariables\" in e && e.visualVariables) for (const t of e.visualVariables) \"color\" === t.type ? this._colorVariable = t : \"opacity\" === t.type ? this._opacityVariable = t : Et().warn(`Unsupported visual variable type for 3D Object Scene Services: ${t.type}`);\n        if (e) for (const t of e.getSymbols()) \"mesh-3d\" !== t.type && Et().error(`Symbols of type '${t.type}' are not supported for 3D Object Scene Services.`);\n        this._controller && this._controller.requestUpdate();\n      }\n      _getCachedEdgeMaterials(e) {\n        return this._hasComponentData && e.cachedRendererVersion !== this._rendererVersion && this._updateCachedRendererData(e), e.cachedEdgeMaterials;\n      }\n      _getComponentParameters(e) {\n        this._hasComponentData && e.cachedRendererVersion !== this._rendererVersion && this._updateCachedRendererData(e);\n        const t = e.cachedSymbology;\n        return (i, s) => {\n          const r = 5 * i;\n          if (H(s.externalColor, t[r] / 255, t[r + 1] / 255, t[r + 2] / 255, t[r + 3] / 255), null != this._stage.renderView.objectAndLayerIdRenderHelper) {\n            const t = e.featureIds[i],\n              r = ue(this.view.map, this.layerUid);\n            this._stage.renderView.objectAndLayerIdRenderHelper.setUidToObjectAndLayerId(t, t, this.layerId, this.layerUid + \"_\" + this.sublayerId, this.layerPopupEnabledAndHasTemplate && !r, e.node.resources.attributes, i, this.sublayerId), s.objectAndLayerIdColor = this._stage.renderView.getObjectAndLayerIdColor({\n              graphicUid: t,\n              layerUid: this.layerUid + \"_\" + this.sublayerId\n            });\n          }\n          s.externalColorMixMode = t[r + 4] & (1 << wt.CastShadows) - 1, s.castShadows = !!(t[r + 4] & 1 << wt.CastShadows), s.pickable = !!(t[r + 4] & 1 << wt.Pickable), s.elevationOffset = e.elevationOffsets?.[i] ?? 0;\n        };\n      }\n      _getSymbolInfo(e, t) {\n        const i = e?.getSymbol(t, {\n          arcade: this._arcade\n        });\n        if (!(i instanceof ge)) return null;\n        const s = i.id;\n        if (this._symbolInfos.has(s)) return this._symbolInfos.get(s);\n        const r = it(i);\n        return this._symbolInfos.set(s, r), r;\n      }\n      _setSymbologyOverride(e, t) {\n        this._symbologyOverride !== e && (this._symbologyOverride = e, this._symbologyOverrideFields = t, this._invalidateAllSymbols(), this._updateSymbologyFields());\n      }\n      _updateSymbologyFields() {\n        this._symbologyFields = null != this._symbologyOverrideFields && this._symbologyOverrideFields.length > 0 ? null != this._rendererFields && this._rendererFields.length > 0 ? ae(this.i3slayer.fieldsIndex, [...this._rendererFields, ...this._symbologyOverrideFields]) : this._symbologyOverrideFields : this._rendererFields;\n      }\n      _updateCachedRendererData(e) {\n        if (e.cachedRendererVersion = this._rendererVersion, !this._hasComponentData) return;\n        const t = this._tmpAttributeOnlyGraphic,\n          i = {};\n        t.attributes = i;\n        const s = this._currentRenderer,\n          r = e.attributeInfo?.attributeData,\n          o = null != e.featureIds ? this.i3slayer.objectIdField : null,\n          n = null != r && null != this._symbologyFields && this._symbologyFields.length > 0;\n        let a = null,\n          l = null;\n        if (n && null != this._symbologyFields) {\n          a = [], l = [];\n          for (const e of this._symbologyFields) {\n            const t = r[e];\n            t && (a.push(e), l.push(t));\n          }\n        }\n        e.cachedSymbology || (e.cachedSymbology = re(5 * e.featureIds.length));\n        const d = {\n            color: Ht,\n            castShadows: !0,\n            pickable: !0,\n            colorMixMode: ht.Multiply,\n            edgeMaterial: null\n          },\n          h = this.fullOpacity,\n          c = this.nodeCrossfadingEnabled ? this.getNodeOpacity(e) : h;\n        let u = null,\n          _ = Mt.OPAQUE,\n          g = st,\n          m = 0;\n        for (let p = 0; p < e.featureIds.length; p++) {\n          if (null != o && (i[o] = e.featureIds[p]), n && a) for (let e = 0; e < a.length; e++) i[a[e]] = Je(l[e], p);\n          const r = s ? this._getSymbolInfo(s, t) : null;\n          let h = null,\n            f = null;\n          if (s && \"visualVariables\" in s) {\n            if (this._colorVariable) {\n              const e = de(this._colorVariable, t, {\n                color: Ut,\n                arcade: this._arcade\n              });\n              e && (h = Ht, h[0] = e.r / 255, h[1] = e.g / 255, h[2] = e.b / 255, this._opacityVariable || null === e.a || (f = e.a));\n            }\n            this._opacityVariable && (f = he(this._opacityVariable, t, {\n              arcade: this._arcade\n            }));\n          }\n          if (r?.material) {\n            const e = r.material;\n            h = null == h || null == f ? Oe(h, f, e.color, e.alpha, Ot, Ht) : Oe(h, f, null, null, Ot, Ht);\n          }\n          if (null == h && (h = Ht, h[0] = 1, h[1] = 1, h[2] = 1, h[3] = 1), d.pickable = !0, d.castShadows = !r || r.castShadows, d.colorMixMode = r?.material ? r.material.colorMixMode : ht.Multiply, d.edgeMaterial = r ? r.edgeMaterial : null, null != this._symbologyOverride && (d.color = h, this._symbologyOverride(t, d), h = d.color), null != this._nodeColorOverride && (this._nodeColorOverride(e.node, h), d.colorMixMode = ht.Replace), null != d.edgeMaterial) {\n            const t = h[3] <= 0 ? Mt.INVISIBLE : h[3] >= 1 && (e.material.isOpaque || d.colorMixMode === ht.Replace) ? Mt.OPAQUE : Mt.TRANSPARENT;\n            d.edgeMaterial === u && t === _ || (g = {\n              ...d.edgeMaterial,\n              opacity: c,\n              objectTransparency: t\n            }, u = d.edgeMaterial, _ = t), e.cachedEdgeMaterials[p] = g;\n          } else e.cachedEdgeMaterials[p] = st;\n          e.cachedSymbology[m++] = Math.round(255 * h[0]), e.cachedSymbology[m++] = Math.round(255 * h[1]), e.cachedSymbology[m++] = Math.round(255 * h[2]), e.cachedSymbology[m++] = Math.round(255 * h[3]), e.cachedSymbology[m++] = d.colorMixMode | +d.castShadows << wt.CastShadows | +d.pickable << wt.Pickable;\n        }\n      }\n      _getFilteredEdgeMaterials(e) {\n        const t = this._getCachedEdgeMaterials(e);\n        this.nodeCrossfadingEnabled || Kt(t, this.fullOpacity);\n        const i = e.filteredIds;\n        if (null == i) {\n          return {\n            hasEdges: t.some(e => e !== st),\n            perFeatureEdgeMaterials: t\n          };\n        }\n        let s = 0,\n          r = !1;\n        const o = t.map((t, o) => e.featureIds[o] !== i[s] ? st : (r = r || t !== st, s++, t));\n        return {\n          hasEdges: r,\n          perFeatureEdgeMaterials: o\n        };\n      }\n      _updateComponentData(e) {\n        if (!this._hasComponentData) return;\n        const t = e.objectHandle,\n          i = this._getComponentParameters(e);\n        this._collection.setComponentData(t, i), this._stage.renderView.requestRender();\n      }\n      _reloadAll(e = this.elevationOffset) {\n        this._removeAllNodeDataFromStage(e), null != this._controller && this._controller.restartNodeLoading();\n      }\n      _opacityChange(e) {\n        this.nodeCrossfadingEnabled && this._crossfadeHelper.stopAllNodeFading(), this._nodeId2Meta.forEach(t => {\n          null != t && (this._collection.updateMaterial(t.objectHandle, t => t.objectOpacity = e), Kt(t.cachedEdgeMaterials, e), this._updateEdgeRendering(t));\n        });\n      }\n      _updateMaterial(e) {\n        this._collection.updateMaterial(e.objectHandle, e => {\n          e.commonMaterialParameters.hasSlicePlane = this.slicePlaneEnabled, e.usePBR = this._usePBR, this._updateMaterialOverlay(e);\n        });\n      }\n      _updateMaterialOverlay(e) {}\n      _updateEngineObject(e) {\n        this._updateComponentData(e), this._applyFiltersToNode(e), this._addOrUpdateEdgeRendering(e), this._visibleGeometryChanged(e, Tt.UPDATE);\n      }\n      _slicePlaneEnabledChange(e) {\n        this._intersectionHandler && (this._intersectionHandler.slicePlaneEnabled = e), null != this._labeler && (this._labeler.slicePlaneEnabled = e), this._nodeId2Meta.forEach(t => {\n          null != t && (this._collection.updateMaterial(t.objectHandle, t => t.commonMaterialParameters.hasSlicePlane = e), this._updateEdgeRendering(t, !1));\n        });\n      }\n      _updatePBR(e) {\n        this._nodeId2Meta.forEach(t => {\n          null != t && this._collection.updateMaterial(t.objectHandle, t => t.usePBR = e);\n        }), this._hasLoadedPBRTextures = !0;\n      }\n      get _usePBR() {\n        return this._needsNormals && this.view.qualitySettings.physicallyBasedRenderingEnabled;\n      }\n      _updateEdgeRendering(e, t = !0) {\n        null != this._edgeView && this._edgeView.hasObject(e.objectHandle) && this._addOrUpdateEdgeRendering(e, t);\n      }\n      _forAllNodes(e) {\n        this._nodeId2Meta.forEach(e);\n      }\n      _ignoreClientNodeOverriddenFeatures(e) {\n        return this.i3sOverrides.hasGeometryChanges ? (t, i, s) => s.node.index >= 0 && this.i3sOverrides.featureHasGeometryChanges(t) ? ve.CONTINUE : e(t, i, s) : e;\n      }\n      _forAllFeatures(e, t, i) {\n        d(this._nodeId2Meta, s => {\n          if (null == s) return !1;\n          if (null != t) {\n            switch (t(s)) {\n              case ve.EXIT:\n                return !0;\n              case ve.SKIP:\n                return !1;\n            }\n          }\n          let r = ve.CONTINUE;\n          switch (i) {\n            case Ie.ALL:\n              r = this._forAllFeaturesOfNode(s, e);\n              break;\n            case Ie.VISIBLE_ONLY:\n              r = this._forAllVisibleFeaturesOfNode(s, e);\n              break;\n            case Ie.QUERYABLE:\n              r = this._forAllQueryableFeaturesOfNode(s, e);\n          }\n          return r === ve.EXIT;\n        });\n      }\n      _forAllFeaturesOfNode(e, t) {\n        let i = ve.CONTINUE;\n        const s = e.featureIds;\n        for (let r = 0; r < s.length; r++) if (i = t(s[r], r, e), i === ve.EXIT) return i;\n        return i;\n      }\n      _forAllVisibleFeaturesOfNode(e, t) {\n        let i = ve.CONTINUE;\n        const s = e.featureIds;\n        return this._collection.forEachVisibleComponent(e.objectHandle, r => (i = t(s[r], r, e), i === ve.CONTINUE)), i;\n      }\n      _forAllQueryableFeaturesOfNode(e, t) {\n        const i = this._ignoreClientNodeOverriddenFeatures(t);\n        if (null == this._renderClippingArea) return this._forAllFeaturesOfNode(e, i);\n        const s = this._boundingRectNodeTest(e, this._renderClippingArea);\n        if (s === et.OUTSIDE) return ve.CONTINUE;\n        if (s === et.INSIDE) return this._forAllFeaturesOfNode(e, i);\n        const r = ve.CONTINUE,\n          o = e.featureIds,\n          n = e.objectHandle,\n          a = rt(this._renderClippingArea, this._collection.getObjectTransform(n));\n        for (let l = 0; l < o.length; l++) {\n          if (!this._boundingRectFeatureTest(e, l, a)) continue;\n          const t = i(o[l], l, e);\n          if (t === ve.EXIT) return t;\n        }\n        return r;\n      }\n      _createAttributes(e, t) {\n        const i = {};\n        null != t.featureIds && (i[this._getObjectIdField()] = t.featureIds[e]);\n        const s = t.attributeInfo?.attributeData;\n        if (null != s) for (const r of Object.keys(s)) i[r] = Je(s[r], e);\n        return i;\n      }\n      _createGraphic(e, t) {\n        return this._createLayerGraphic(this._createAttributes(e, t));\n      }\n      highlight(e) {\n        if (\"number\" == typeof e || e instanceof i ? e = [e] : e instanceof n && (e = e.toArray()), Array.isArray(e) && e.length > 0) {\n          if (e[0] instanceof i) {\n            const t = e,\n              i = this.i3slayer.fieldsIndex,\n              s = this._getObjectIdField(),\n              r = t.map(e => lt(i, e.attributes, s)),\n              {\n                set: o,\n                handle: n\n              } = this._highlights.acquireSet();\n            return this._highlights.setFeatureIds(o, r), n;\n          }\n          if (\"number\" == typeof e[0]) {\n            const t = e,\n              {\n                set: i,\n                handle: s\n              } = this._highlights.acquireSet();\n            return this._highlights.setFeatureIds(i, t), s;\n          }\n        }\n        return a();\n      }\n      resetHighlights() {\n        h(this._highlights), this._highlights = new Se({\n          collection: this._collection,\n          forAllFeatures: e => this._forAllFeatures(e, null, Ie.ALL),\n          forAllFeaturesOfNode: (e, t) => this._forAllFeaturesOfNode(e, t)\n        });\n      }\n      _visibleGeometryChanged(e, t) {\n        if (!this._elevationProvider) return;\n        const i = this.getNodeComponentObb(e.node);\n        i && this._elevationProvider.objectChanged(i), null == this._visibleGeometryChangedSchedulerHandle && (this._visibleGeometryChangedSchedulerHandle = f(() => {\n          this.emit(\"visible-geometry-changed\"), this._visibleGeometryChangedSchedulerHandle = null;\n        })), this._updateSnappingSources(e, t);\n      }\n      get performanceInfo() {\n        return new pe(this.usedMemory, this._nodeId2Meta.size, Math.round(this._gpuMemoryEstimate / 1048576), Math.round(this._geoMemoryEstimate / 1048576), Math.round(this._texMemoryEstimate / 1048576), Math.round(this.unloadedMemory / 1048576), this._idbCacheEnabled ? Math.round(100 * this._idbCache.getHitRate()) : 0);\n      }\n      get test() {}\n      getNodeOpacityByIndex(e) {\n        const t = this._nodeId2Meta.get(e);\n        return this.getNodeOpacity(t);\n      }\n      getNodeOpacity(e) {\n        return null != e ? this._collection.getMaterial(e.objectHandle).objectOpacity : 0;\n      }\n      isNodeFullyFadedIn(e) {\n        return this._crossfadeHelper.isNodeFullyFadedIn(e);\n      }\n      getNodeCrossfadeMetaData(e) {\n        return this._nodeId2Meta.get(e);\n      }\n      markNodeToRemove(e) {\n        this._controller && this._controller.markNodeToRemove(e);\n      }\n      removeMarkedNodes() {\n        this._controller && this._controller.removeMarkedNodes();\n      }\n      foreachCrossfadeNode(e) {\n        this._nodeId2Meta.forEach(e);\n      }\n      fadeNode(e, t, i) {\n        if (!this.nodeCrossfadingEnabled) return;\n        const s = this._nodeId2Meta.get(e);\n        null != s && this._crossfadeHelper.fadeNode(e, s, t, i);\n      }\n      setNodeOpacityByIndex(e, t) {\n        const i = this._nodeId2Meta.get(e);\n        null != i && this._setNodeOpacity(i, t);\n      }\n      _setNodeOpacity(e, t) {\n        this._collection.updateMaterial(e.objectHandle, e => e.objectOpacity = t), this._setNodeEdgeOpacity(e, t);\n      }\n      _setNodeEdgeOpacity(e, t) {\n        if (null == this._edgeView || !e.cachedEdgeMaterials) return;\n        Kt(e.cachedEdgeMaterials, t);\n        const i = e.objectHandle;\n        this._edgeView.hasObject(i) && this._edgeView.updateAllComponentOpacities(i, t).catch(e => Dt(e, this.i3slayer.title));\n      }\n      get hasModifications() {\n        return this._isIntegratedMesh && null != this._layerClippingArea || this._modifications && this._modifications.length > 0;\n      }\n      updateNodeModificationStatus(e) {\n        const t = e.length;\n        if (!this.hasModifications || t <= 0 || !0 !== this._i3sWasmLoaded) return;\n        const i = this.uid,\n          s = zt(e);\n        if (s) {\n          const t = {\n            context: i,\n            buffer: s.buffer\n          };\n          xe(t);\n          const r = new Float64Array(s.buffer);\n          e.forAll((e, t) => {\n            const i = r[t],\n              s = Ee(i);\n            e.imModificationImpact = s, s !== Le.Unmodified && this._controller.invalidateGeometryVisibility(e.index);\n          });\n        }\n      }\n      notifyUpdate() {\n        this.notifyChange(\"updating\");\n      }\n      notifyLODUpdate() {\n        this._controller.notifyLODUpdate();\n      }\n      isUpdating() {\n        return !(!this._controller || !this._controller.updating) || !!this._visibleGeometryChangedSchedulerHandle || null != this._labeler && this._labeler.updating || this._crossfadeHelper?.updating || this._i3sWasmLoaded instanceof Promise || this._asyncModuleLoading > 0 || null != this._elevationTask && this._elevationTask.running;\n      }\n      trackSnappingSources(e) {\n        const t = {\n          events: e,\n          fetchEdgeLocations: async (e, t, i) => {\n            const s = this._nodeId2Meta.get(e);\n            if (null == s) throw new Error(\"invalid-node\");\n            const {\n              origin: r,\n              buffer: o\n            } = await this._collection.extractEdgeInformation(s.objectHandle, t, i);\n            return this._snappingLocationsApplyElevation(s, o, r), {\n              type: \"components\",\n              objectIds: s.featureIds,\n              locations: o,\n              origin: r\n            };\n          },\n          remove: () => r(this._snappingSourcesTrackers, t)\n        };\n        return this._snappingSourcesTrackers.push(t), this._nodeId2Meta.forEach((t, i) => {\n          if (null == t) return;\n          const s = this._controller.getRenderMbs(t.node);\n          s && e.add(i, s);\n        }), t;\n      }\n      _snappingLocationsApplyElevation(e, t, i) {\n        if (!e.elevationOffsets || this.elevationInfo.mode === ye.Absolute) return;\n        const s = t.position0,\n          r = t.position1,\n          o = t.componentIndex,\n          n = P(),\n          a = P(),\n          l = (e, t) => {\n            T(e, e, i), this.view.renderCoordsHelper.worldUpAtPosition(e, a), T(e, e, N(a, a, t)), V(e, e, i);\n          };\n        for (let d = 0; d < s.count; d++) {\n          const t = e.elevationOffsets[o.get(d)];\n          s.getVec(d, n), l(n, t), s.setVec(d, n), r.getVec(d, n), l(n, t), r.setVec(d, n);\n        }\n      }\n      _updateSnappingSources(e, t) {\n        const {\n            index: i\n          } = e.node,\n          s = this._controller.getRenderMbs(e.node);\n        if (null != s) for (const r of this._snappingSourcesTrackers) t !== Tt.REMOVE && t !== Tt.UPDATE || r.events.remove(i), t !== Tt.ADD && t !== Tt.UPDATE || r.events.add(i, s);\n      }\n    };\n    return e([y()], o.prototype, \"_hasLoadedPBRTextures\", void 0), e([y()], o.prototype, \"_asyncModuleLoading\", void 0), e([y()], o.prototype, \"_visibleGeometryChangedSchedulerHandle\", void 0), e([y()], o.prototype, \"view\", void 0), e([y()], o.prototype, \"i3slayer\", void 0), e([y()], o.prototype, \"_controller\", void 0), e([y()], o.prototype, \"_labeler\", void 0), e([y()], o.prototype, \"updating\", void 0), e([y()], o.prototype, \"suspended\", void 0), e([y()], o.prototype, \"contentVisible\", null), e([y({\n      readOnly: !0\n    })], o.prototype, \"legendEnabled\", null), e([y()], o.prototype, \"holeFilling\", void 0), e([y(mt)], o.prototype, \"updatingProgress\", void 0), e([y()], o.prototype, \"updatingProgressValue\", null), e([y()], o.prototype, \"hasTexturesOrVertexColors\", null), e([y()], o.prototype, \"rendererTextureUsage\", null), e([y()], o.prototype, \"elevationOffset\", null), e([y()], o.prototype, \"elevationInfo\", null), e([y({\n      type: Boolean\n    })], o.prototype, \"slicePlaneEnabled\", void 0), e([y()], o.prototype, \"supportedTextureEncodings\", null), e([y()], o.prototype, \"uncompressedTextureDownsamplingEnabled\", null), e([y({\n      type: [le]\n    })], o.prototype, \"_modifications\", void 0), e([y({\n      readOnly: !0\n    })], o.prototype, \"clientGeometry\", null), e([y()], o.prototype, \"elevationRange\", null), e([y()], o.prototype, \"fullExtent\", null), e([y()], o.prototype, \"_elevationTask\", void 0), e([y({\n      readOnly: !0\n    })], o.prototype, \"_usePBR\", null), o = e([v(xt)], o), o;\n  };\nfunction Dt(e, t) {\n  u(e) || Et().warn(\"Error while processing edges. Edges on this layer might not display correctly\", t, e);\n}\nvar Tt;\n!function (e) {\n  e[e.ADD = 0] = \"ADD\", e[e.REMOVE = 1] = \"REMOVE\", e[e.UPDATE = 2] = \"UPDATE\";\n}(Tt || (Tt = {}));\nconst Nt = z(),\n  Vt = X(),\n  Ft = X(),\n  Pt = new gt(),\n  Ht = [0, 0, 0, 0],\n  Ut = new t([0, 0, 0, 0]),\n  Gt = ie(0, 0, 0, 0);\nfunction Lt(e) {\n  if (null == e) return !1;\n  const t = e.metallicRoughness;\n  return t && t.baseColorTextureId >= 0 || t && t.metallicRoughnessTextureId >= 0 || e.normalTextureId >= 0 || e.emissiveTextureId >= 0 || e.occlusionTextureId >= 0;\n}\nfunction kt(e) {\n  return \"geometryData\" in e;\n}\nfunction Bt(e) {\n  return null != e && b(e.data);\n}\nfunction qt(e, t) {\n  let i = 1024 + e.interleavedVertexData.byteLength + (e.indices ? e.indices.byteLength : 0) + e.positionData.data.byteLength + e.positionData.indices.byteLength;\n  if (null != t) for (const s of t) null != s && b(s.data) && (i += s.data.byteLength);\n  return i;\n}\nfunction Wt(e, t) {\n  return t.byteSize > St ? (Et().warn(`Node is too big to store in IndexedDB cache: ${e.id} (${t.byteSize} bytes)`), !1) : t.byteSize > 0;\n}\nfunction zt(e) {\n  if (0 === e.length) return;\n  const t = 10 * e.length,\n    i = new Float64Array(t);\n  let s = 0;\n  return e.forAll(e => {\n    let t = e.serviceObbInIndexSR;\n    null == t && (t = Pt, t.center = te(e.serviceMbsInIndexSR), t.halfSize = [e.serviceMbsInIndexSR[3], e.serviceMbsInIndexSR[3], e.serviceMbsInIndexSR[3]]);\n    const r = t.data;\n    i[s++] = r[0], i[s++] = r[1], i[s++] = r[2], i[s++] = r[3], i[s++] = r[4], i[s++] = r[5], i[s++] = r[6], i[s++] = r[7], i[s++] = r[8], i[s++] = r[9];\n  }), i;\n}\nfunction Kt(e, t) {\n  e.forEach(e => e.opacity = t);\n}\nclass $t {\n  constructor(e, t) {\n    this.mode = e, this.offset = t;\n  }\n}\nconst Qt = P(),\n  Xt = z(),\n  Yt = \"elevation-change\",\n  Jt = [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n  Zt = new ut();\nfunction ei(e, t, i) {\n  let s = e.elevationRangeMin,\n    r = e.elevationRangeMax;\n  const o = i;\n  if (o > 0) {\n    t.getCorners(Jt);\n    for (const e of Jt) {\n      const t = F(e) - o;\n      s = Math.min(s, t), r = Math.max(r, t);\n    }\n  } else {\n    t.getCorners(Jt);\n    for (const e of Jt) {\n      const t = e[2];\n      s = Math.min(s, t), r = Math.max(r, t);\n    }\n  }\n  e.expandElevationRangeValues(s, r);\n}\nfunction ti(e, t, i) {\n  const s = te(t),\n    r = i > 0 ? F(s) - i : s[2],\n    o = se(t);\n  e.expandElevationRangeValues(r - o, r + o);\n}\nexport { At as I3SMeshView3D };"],
  "mappings": "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",
  "names": ["u", "t", "e", "r", "n", "i", "l", "c", "O", "o", "a", "m", "s", "f", "I", "S", "n", "o", "E", "e", "n", "r", "e", "t", "o", "s", "n", "i", "e", "r", "a", "t", "s", "h", "n", "G", "e", "t", "D", "w", "S", "i", "C", "r", "u", "d", "o", "s", "a", "p", "c", "h", "l", "m", "F", "n", "O", "L", "e", "t", "r", "s", "o", "i", "p", "h", "s", "e", "o", "t", "r", "a", "n", "l", "u", "c", "f", "d", "m", "s", "h", "t", "e", "i", "o", "a", "S", "t", "e", "s", "r", "i", "n", "E", "I", "o", "i", "e", "s", "d", "t", "r", "a", "n", "l", "h", "c", "e", "i", "t", "l", "s", "d", "u", "b", "f", "m", "h", "y", "p", "R", "g", "I", "L", "v", "O", "n", "o", "a", "r", "o", "i", "t", "s", "r", "E", "e", "c", "a", "n", "l", "t", "s", "e", "i", "o", "e", "t", "i", "s", "r", "n", "a", "l", "E", "h", "d", "G", "K", "c", "x", "J", "u", "_", "g", "L", "S", "P", "A", "D", "I", "O", "m", "p", "f", "b", "y", "v", "w", "R", "N", "V", "F", "k", "B", "q", "Q", "Y", "C"]
}
