{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/ElevationQuery.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/enums.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryWithMapPositions.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/ElevationAligners.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphicCreationContext.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObject3DGraphicLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectMetadata.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPathSymbolLayerConstants.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodResources.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/primitiveObjectSymbolUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/SymbolComplexity.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/defaultSymbolComplexity.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/interfaces.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Loadable.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/pointUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineCalloutTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineCalloutTechniqueConfiguration.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/LineCalloutMaterial.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLineCalloutSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCalloutSymbolLayerFactory.js", "../../../../../../node_modules/@arcgis/core/renderers/support/renderingInfoUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/constants.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextHelperCanvas.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/FontMetrics.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextRenderer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/placementUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/LabelParameters.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextRenderParameters.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTextureAtlas.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolCreationContext.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphic.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/polygonUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/support/renderInfoUtils/polygon.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DExtrudeSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DDrapedGraphicLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DIconSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/lineUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLineSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/meshAutoFastUpdateConstants.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DMeshObject3DGraphicLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/MeshFastUpdateProcessor.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/NativeLineTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/NativeLineTechniqueConfiguration.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/NativeLineMaterial.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DMeshFillSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLodInstanceGraphicLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/lodResourceUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/webStyleUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Path.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathBuilder.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathCapBuilder.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathExtruder.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathGeometry.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathGeometryData.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/pathGeometryUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathProfile.js", "../../../../../../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat2.js", "../../../../../../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2f64.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathVertex.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PathTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PathMaterial.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPathSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/support/uvUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PatternTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PatternMaterial.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/support/patternUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPolygonFillSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTextureFactory.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DTextSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterTechnique.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterGLMaterial.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js", "../../../../../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/waterMaterialUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DWaterSymbolLayer.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolLayerFactory.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbol.js", "../../../../../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DWebStyleSymbol.js", "../../../../../../node_modules/@arcgis/core/views/3d/support/intersectionUtils.js", "../../../../../../node_modules/@arcgis/core/views/3d/support/FrustumExtentIntersection.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../geometry.js\";\nimport { remove as e } from \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport { createAbortError as t, createResolver as r, onAbort as s } from \"../../../../core/promiseUtils.js\";\nimport { TaskPriority as i, noBudget as o } from \"../../../support/Scheduler.js\";\nimport n from \"../../../../geometry/Multipoint.js\";\nclass l {\n  constructor(e, t) {\n    this.spatialReference = e, this._view = t;\n  }\n  getElevation(e, t, r) {\n    return this._view.elevationProvider.getElevation(e, t, 0, this.spatialReference, r);\n  }\n  async queryElevation(e, t, r, s, i) {\n    return this._view.elevationProvider.queryElevation(e, t, 0, this.spatialReference, i, r, s);\n  }\n}\nclass a {\n  constructor(e, t, r, s) {\n    this.spatialReference = t, this._getElevationQueryProvider = r, this._queries = new Array(), this._queryOptions = {\n      ...s,\n      ignoreInvisibleLayers: !0\n    }, this._frameTask = e.registerTask(i.ELEVATION_QUERY, this);\n  }\n  destroy({\n    completeTasks: e\n  } = {\n    completeTasks: !1\n  }) {\n    if (this._frameTask.remove(), this.running) if (e) this.runTask(o);else for (const r of this._queries) r.result.reject(t());\n  }\n  queryElevation(i, o, n, l = 0) {\n    const a = r(),\n      u = {\n        x: i,\n        y: o,\n        minDemResolution: l,\n        result: a,\n        signal: n\n      };\n    return this._queries.push(u), s(n, () => {\n      e(this._queries, u), a.reject(t());\n    }), a.promise;\n  }\n  get running() {\n    return this._queries.length > 0;\n  }\n  runTask(e) {\n    const r = this._queries;\n    this._queries = [];\n    const i = this._getElevationQueryProvider();\n    if (!i) return r.forEach(e => e.result.reject()), void e.madeProgress();\n    const o = r.map(e => [e.x, e.y]),\n      l = r.reduce((e, t) => Math.min(e, t.minDemResolution), 1 / 0),\n      a = new n({\n        points: o,\n        spatialReference: this.spatialReference\n      }),\n      u = r.length > 1 && r.some(e => !!e.signal) ? new AbortController() : null,\n      c = null != u ? u.signal : r[0].signal;\n    if (null != u) {\n      let e = 0;\n      r.forEach(i => s(i.signal, () => {\n        e++, i.result.reject(t()), e === r.length && u.abort();\n      }));\n    }\n    const h = {\n      ...this._queryOptions,\n      minDemResolution: l,\n      signal: c\n    };\n    i.queryElevation(a, h).then(e => {\n      r.forEach((r, s) => {\n        null != r.signal && r.signal.aborted ? r.result.reject(t()) : r.result.resolve(e.geometry.points[s][2]);\n      });\n    }).catch(e => {\n      r.forEach(t => t.result.reject(e));\n    }), e.madeProgress();\n  }\n  get test() {}\n}\nexport { a as ElevationQuery, l as ViewElevationProvider };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar L, A;\n!function (L) {\n  L[L.USER = 1] = \"USER\", L[L.SCALE_RANGE = 2] = \"SCALE_RANGE\", L[L.FILTER = 4] = \"FILTER\", L[L.DECONFLICTION = 8] = \"DECONFLICTION\", L[L.ALL_GRAPHIC = 15] = \"ALL_GRAPHIC\", L[L.ALL_LABEL = 255] = \"ALL_LABEL\";\n}(L || (L = {})), function (L) {\n  L[L.GRAPHIC = 1] = \"GRAPHIC\", L[L.LABEL = 16] = \"LABEL\";\n}(A || (A = {}));\nexport { L as VisibilityFlag, A as VisibilityGroup };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { Geometry as o } from \"./Geometry.js\";\nclass t extends o {}\nfunction e(o) {\n  return null != o.mapPositions;\n}\nexport { t as GeometryWithMapPositions, e as isGeometryWithMapPositions };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { copy as t } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as e } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { s as o } from \"../../../../chunks/vec32.js\";\nimport { create as n } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { computeTranslationToOriginAndRotation as r } from \"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";\nimport { projectBuffer as a } from \"../../../../geometry/projection/projectBuffer.js\";\nimport { updateVertexPointGroundDistance as s, SampleElevationInfo as i } from \"./elevationAlignmentUtils.js\";\nimport { debugFlags as l } from \"../../support/debugFlags.js\";\nimport { SamplePosition as m } from \"../../support/ElevationProvider.js\";\nimport { isGeometryWithMapPositions as f } from \"../../webgl-engine/lib/GeometryWithMapPositions.js\";\nimport { VertexAttribute as c } from \"../../webgl-engine/lib/VertexAttribute.js\";\nfunction u(t, e, o, n, r) {\n  const a = t.stageObject,\n    s = a.geometries;\n  let i = 0;\n  for (const l of s) {\n    if (!f(l)) continue;\n    const {\n      update: t,\n      averageGeometrySampledElevation: s\n    } = M(l, e, o, n, r);\n    i += s, t && a.geometryVertexAttributeUpdated(l, c.POSITION);\n  }\n  return i / s.length;\n}\nfunction p(e, n, a, i, m, f) {\n  const c = e.stageObject,\n    u = n.centerPointInElevationSR;\n  let p = 0;\n  if (c.usesVerticalDistanceToGround) i(u, E), s(c, E.verticalDistanceToGround), p = E.sampledElevation;else {\n    i(u, E);\n    \"absolute-height\" !== n.mode && (p = E.sampledElevation);\n  }\n  const b = t(g, f ?? c.transformation),\n    I = o(v, b[12], b[13], b[14]);\n  l.TESTS_DISABLE_OPTIMIZATIONS ? (T[0] = u.x, T[1] = u.y, T[2] = E.z, r(u.spatialReference, T, b, m.spatialReference) && (f ? t(f, b) : c.transformation = b)) : m.setAltitudeOfTransformation(E.z, b);\n  const S = d / m.unitInMeters;\n  return (Math.abs(b[12] - I[0]) >= S || Math.abs(b[13] - I[1]) >= S || Math.abs(b[14] - I[2]) >= S) && (f ? t(f, b) : c.transformation = b), p;\n}\nconst g = e();\nfunction b(t, e, n, a, s) {\n  const i = t.graphics3DSymbolLayer.lodRenderer;\n  if (null == i) return 0;\n  const m = e.centerPointInElevationSR;\n  a(m, E);\n  const f = \"absolute-height\" !== e.mode ? E.sampledElevation : 0,\n    c = i.instanceData,\n    u = t.instanceIndex,\n    p = h;\n  c.getGlobalTransform(u, p);\n  const g = o(v, p[12], p[13], p[14]);\n  l.TESTS_DISABLE_OPTIMIZATIONS ? (T[0] = m.x, T[1] = m.y, T[2] = E.z, r(m.spatialReference, T, p, s.spatialReference) && c.setGlobalTransform(u, p)) : s.setAltitudeOfTransformation(E.z, p);\n  const b = d / s.unitInMeters;\n  return (l.TESTS_DISABLE_OPTIMIZATIONS || Math.abs(p[12] - g[0]) >= b || Math.abs(p[13] - g[1]) >= b || Math.abs(p[14] - g[2]) >= b) && c.setGlobalTransform(u, p), f;\n}\nfunction I(t, e, o, n, r) {\n  const a = t.stageObject,\n    s = a.geometries;\n  if (0 === s.length) return 0;\n  let i = 0,\n    l = null,\n    m = 0,\n    u = !1;\n  for (const p of s) {\n    if (!f(p)) continue;\n    const t = p.attributes.get(c.POSITION);\n    if (t !== l) {\n      const {\n        update: a,\n        averageGeometrySampledElevation: s\n      } = M(p, e, o, n, r);\n      m = s, l = t, u = a;\n    }\n    u && a.geometryVertexAttributeUpdated(p, c.POSITION), i += m;\n  }\n  return i / s.length;\n}\nconst d = .01,\n  T = n(),\n  S = n(),\n  O = n(),\n  h = e(),\n  v = n(),\n  E = new i();\nfunction M(t, e, o, n, r) {\n  let s = !1;\n  const i = t.transformation,\n    f = e.requiresSampledElevationInfo;\n  S[0] = i[12], S[1] = i[13], S[2] = i[14], t.invalidateBoundingInfo();\n  const u = t.getMutableAttribute(c.POSITION),\n    p = u.data,\n    g = u.size,\n    b = p.length / g,\n    I = new m(t.mapPositions, o);\n  let h = 0,\n    v = 0;\n  for (let m = 0; m < b; m++) {\n    if (O[0] = p[h], O[1] = p[h + 1], O[2] = p[h + 2], n(I, E), f && (v += E.sampledElevation), l.TESTS_DISABLE_OPTIMIZATIONS) p[h] = I.array[I.offset], p[h + 1] = I.array[I.offset + 1], p[h + 2] = E.z, a(p, o, h, p, r.spatialReference, h, 1), p[h] -= S[0], p[h + 1] -= S[1], p[h + 2] -= S[2], s = !0;else {\n      T[0] = p[h] + S[0], T[1] = p[h + 1] + S[1], T[2] = p[h + 2] + S[2], r.setAltitude(T, E.z), p[h] = T[0] - S[0], p[h + 1] = T[1] - S[1], p[h + 2] = T[2] - S[2];\n      const t = d / r.unitInMeters;\n      (Math.abs(O[0] - p[h]) >= t || Math.abs(O[1] - p[h + 1]) >= t || Math.abs(O[2] - p[h + 2]) >= t) && (s = !0);\n    }\n    h += g, I.offset += 3;\n  }\n  return v /= b, {\n    update: s,\n    averageGeometrySampledElevation: v\n  };\n}\nexport { b as perLodInstanceElevationAligner, p as perObjectElevationAligner, u as perVertexElevationAligner, I as sharedGeometryElevationAligner };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass r {\n  constructor(r, s, t) {\n    this.graphic = r, this.renderingInfo = s, this.layer = t;\n  }\n}\nexport { r as Graphics3DGraphicCreationContext };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { c as e, h as t, g as i } from \"../../../../chunks/vec32.js\";\nimport { create as s } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { setMin as a, setMax as n, create as r, isPoint as o, empty as l, center as c, offset as g } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { g as d } from \"../../../../chunks/sphere.js\";\nimport { evaluateElevationInfoAtPoint as h } from \"./elevationAlignmentUtils.js\";\nimport { setContextFeature as u } from \"./featureExpressionInfoUtils.js\";\nimport { demResolutionForBoundingBox as b } from \"./graphicUtils.js\";\nimport { Object3DState as m } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Transparency as O } from \"../../webgl-engine/lib/edgeRendering/interfaces.js\";\nclass j {\n  constructor(e, t, i) {\n    this.baseMaterial = e, this.edgeMaterials = t, this.properties = i;\n  }\n}\nclass p {\n  get isElevationSource() {\n    return !!this.stageObject.lastValidElevationBB;\n  }\n  constructor(e, t, i, s, a, n, r, o = null) {\n    this.graphics3DSymbolLayer = e, this.stageObject = t, this._uniqueGeometries = i, this._uniqueMaterials = s, this._sharedResource = a, this.elevationAligner = n, this.elevationContext = r, this._edgeState = o, this.type = \"object3d\", this._stageLayer = null, this._visible = !1, this._addedToStage = !1, this.alignedSampledElevation = 0, this.needsElevationUpdates = !1, this.useObjectOriginAsAttachmentOrigin = !1;\n  }\n  initialize(e) {\n    this._stageLayer = e;\n    const t = e.stage;\n    t.addMany(this._uniqueMaterials), t.addMany(this._uniqueGeometries), t.add(this.stageObject);\n  }\n  destroy() {\n    if (!this._stageLayer) return;\n    const e = this._stageLayer.stage;\n    e.removeMany(this._uniqueMaterials), e.removeMany(this._uniqueGeometries), e.remove(this.stageObject), this._addedToStage && (this._stageLayer.remove(this.stageObject), this._addedToStage = !1), e.renderer.edgeView?.removeObject(this.stageObject), this.stageObject.dispose(), this._sharedResource?.release(), this._visible = !1, this._stageLayer = null;\n  }\n  layerOpacityChanged(e, t) {\n    const {\n      stageObject: i,\n      _edgeState: s,\n      _stageLayer: a\n    } = this;\n    if (null == s) return;\n    const n = v(s.baseMaterial);\n    let r = !1;\n    for (const o of s.edgeMaterials) o.objectTransparency !== n && (o.objectTransparency = n, r = !0);\n    r && this.resetEdgeObject(t), a.stage.renderer.withEdgeView(t => {\n      t.updateAllComponentOpacities(i, [e]);\n    });\n  }\n  slicePlaneEnabledChanged(e, t) {\n    const {\n      stageObject: i,\n      _edgeState: s,\n      _stageLayer: a\n    } = this;\n    null != s && a.stage.renderer.withEdgeView(a => {\n      a.updateAllComponentMaterials(i, s.edgeMaterials, {\n        hasSlicePlane: e\n      }, !t), s.properties.hasSlicePlane = e;\n    });\n  }\n  setVisibility(e) {\n    const {\n      _edgeState: t,\n      stageObject: i,\n      _stageLayer: s\n    } = this;\n    null != s && this.visible !== e && (this._visible = e, i.visible = e, e && !this._addedToStage && (s.add(i), this._addedToStage = !0), null != t && s.stage.renderer.withEdgeView(s => {\n      s.hasObject(i) ? s.updateObjectVisibility(i, e) : e && this._addOrUpdateEdgeObject(t, s, !1);\n    }));\n  }\n  get visible() {\n    return this._visible;\n  }\n  alignWithElevation(e, t, i, s) {\n    if (null == this.elevationAligner) return;\n    null != i && u(this.elevationContext.featureExpressionInfoContext, i);\n    const a = (i, s) => h(i, e, this.elevationContext, t, s);\n    this.alignedSampledElevation = this.elevationAligner(this, this.elevationContext, e.spatialReference, a, t), this.resetEdgeObject(s);\n  }\n  alignWithAbsoluteElevation(e, t, i) {\n    const s = (t, i) => {\n      i.sampledElevation = e, i.verticalDistanceToGround = 0, i.z = e;\n    };\n    this.alignedSampledElevation = this.elevationAligner(this, this.elevationContext, null, s, t), this.resetEdgeObject(i);\n  }\n  getCenterObjectSpace(t = s()) {\n    return e(t, d(this.stageObject.boundingVolumeObjectSpace.bounds));\n  }\n  getBoundingBoxObjectSpace(e = r()) {\n    const t = this.stageObject.boundingVolumeObjectSpace;\n    return a(e, t.min), n(e, t.max), e;\n  }\n  computeAttachmentOrigin(e) {\n    const s = this.stageObject.effectiveTransformation;\n    if (this.useObjectOriginAsAttachmentOrigin) e.render.origin[0] += s[12], e.render.origin[1] += s[13], e.render.origin[2] += s[14], e.render.num++;else for (const a of this.stageObject.geometries) a.computeAttachmentOrigin(y) && (t(y, y, s), i(e.render.origin, e.render.origin, y), e.render.num++);\n  }\n  async getProjectedBoundingBox(e, i, s, a, n) {\n    const r = this.getBoundingBoxObjectSpace(n),\n      d = E,\n      h = o(r) ? 1 : d.length;\n    for (let o = 0; o < h; o++) {\n      const e = d[o];\n      _[0] = r[e[0]], _[1] = r[e[1]], _[2] = r[e[2]], t(_, _, this.stageObject.transformation), f[3 * o] = _[0], f[3 * o + 1] = _[1], f[3 * o + 2] = _[2];\n    }\n    if (!e(f, 0, h)) return null;\n    l(r);\n    let u = null;\n    this.calculateRelativeScreenBounds && (u = this.calculateRelativeScreenBounds());\n    for (let t = 0; t < 3 * h; t += 3) {\n      for (let e = 0; e < 3; e++) r[e] = Math.min(r[e], f[t + e]), r[e + 3] = Math.max(r[e + 3], f[t + e]);\n      u && s.push({\n        location: f.slice(t, t + 3),\n        screenSpaceBoundingRect: u\n      });\n    }\n    if (i?.service && \"absolute-height\" !== this.elevationContext.mode) {\n      c(r, y);\n      const e = \"relative-to-scene\" === this.elevationContext.mode ? \"scene\" : \"ground\";\n      let t = 0;\n      if (i.useViewElevation) t = i.service.getElevation(y[0], y[1], e) ?? 0;else try {\n        const s = b(r, i.service.spatialReference, i);\n        t = (await i.service.queryElevation(y[0], y[1], a, s, e)) ?? 0;\n      } catch (m) {}\n      g(r, 0, 0, -this.alignedSampledElevation + t);\n    }\n    return r;\n  }\n  addObjectState(e, t) {\n    e === m.Highlight && t.addObject(this.stageObject, this.stageObject.highlight()), e === m.MaskOccludee && t.addObject(this.stageObject, this.stageObject.maskOccludee());\n  }\n  removeObjectState(e) {\n    e.removeObject(this.stageObject);\n  }\n  resetEdgeObject(e) {\n    const {\n      _edgeState: t,\n      stageObject: i,\n      _stageLayer: s,\n      _visible: a\n    } = this;\n    null != t && s.stage.renderer.withEdgeView(s => {\n      a ? this._addOrUpdateEdgeObject(t, s, e) : s.removeObject(i);\n    });\n  }\n  _addOrUpdateEdgeObject(e, t, i) {\n    const s = v(e.baseMaterial);\n    for (const a of e.edgeMaterials) a.objectTransparency = s;\n    t.addOrUpdateObject3D(this.stageObject, e.edgeMaterials, e.properties, !i).then(() => this._stageLayer?.sync());\n  }\n}\nfunction v(e) {\n  return e.isVisible() ? e.parameters.transparent ? O.TRANSPARENT : O.OPAQUE : O.INVISIBLE;\n}\nconst f = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  _ = s(),\n  y = s(),\n  E = [[0, 1, 2], [3, 1, 2], [0, 4, 2], [3, 4, 2], [0, 1, 5], [3, 1, 5], [0, 4, 5], [3, 4, 5]];\nexport { p as Graphics3DObject3DGraphicLayer, j as Object3DEdgeState };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t {\n  constructor(t, e = null) {\n    this.labelText = e, this.elevationOffset = t ?? 0;\n  }\n}\nexport { t as Graphics3DObjectMetadata };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst o = 3,\n  t = 3,\n  c = 10;\nexport { c as pathNumCircleProfileSubdivisions, t as pathNumRoundCapExtrusionSubdivisions, o as pathNumRoundJoinSubdivisions };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { unique as e } from \"../../../../../core/arrayUtils.js\";\nimport { VertexAttribute as t } from \"../VertexAttribute.js\";\nclass s {\n  constructor(e, t = null) {\n    this.geometry = e, this.textures = t;\n  }\n}\nclass r {\n  constructor(e, s, r) {\n    this.components = e, this.minScreenSpaceRadius = s, this.pivotOffset = r;\n    const n = this.geometries;\n    this.numVertices = n.reduce((e, s) => e + s.attributes.get(t.POSITION).indices.length, 0);\n  }\n  get geometries() {\n    return e(this.components.map(e => e.geometry));\n  }\n}\nclass n {\n  constructor(e) {\n    this.levels = e, this.levels.sort((e, t) => e.minScreenSpaceRadius === t.minScreenSpaceRadius ? e.numVertices - t.numVertices : e.minScreenSpaceRadius - t.minScreenSpaceRadius);\n  }\n}\nfunction c(t) {\n  const s = [];\n  return t.levels.forEach(e => e.components.forEach(e => s.push(e.geometry.material))), e(s);\n}\nfunction o(t) {\n  const s = new Array();\n  return t.levels.forEach(e => e.components.forEach(e => {\n    null != e.textures && s.push(...e.textures);\n  })), e(s);\n}\nfunction i(t) {\n  const s = new Array();\n  return t.levels.forEach(e => e.components.forEach(e => s.push(e.geometry))), e(s);\n}\nexport { s as LodComponentResources, r as LodLevelResources, n as LodResources, i as geometriesFromLodResources, c as materialsFromLodResources, o as texturesFromLodResources };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { cgToGIS as e, createDiamondGeometry as n, createTetrahedronGeometry as s, createCylinderGeometry as a, createConeGeometry as c, createBoxGeometry as i, createPolySphereGeometry as t } from \"../../webgl-engine/lib/GeometryUtil.js\";\nimport { LodResources as r, LodLevelResources as o, LodComponentResources as u } from \"../../webgl-engine/lib/lodRendering/LodResources.js\";\nfunction d(e) {\n  switch (e) {\n    case \"sphere\":\n    case \"cube\":\n    case \"diamond\":\n    case \"cylinder\":\n    case \"cone\":\n    case \"inverted-cone\":\n    case \"tetrahedron\":\n      return !0;\n  }\n  return !1;\n}\nfunction S(d, S) {\n  const m = (n, s, a = !1) => new r(n.map(n => {\n    const c = s(n.tesselation);\n    return a && e(c), new o([new u(c)], n.minScreenSpaceRadius);\n  }));\n  switch (d) {\n    case \"sphere\":\n      return m([{\n        tesselation: 0,\n        minScreenSpaceRadius: 0\n      }, {\n        tesselation: 1,\n        minScreenSpaceRadius: 8\n      }, {\n        tesselation: 2,\n        minScreenSpaceRadius: 16\n      }, {\n        tesselation: 3,\n        minScreenSpaceRadius: 50\n      }, {\n        tesselation: 4,\n        minScreenSpaceRadius: 250\n      }], e => t(S, .5, e, !0));\n    case \"cube\":\n      return m([{\n        tesselation: 0,\n        minScreenSpaceRadius: 0\n      }], () => i(S, 1));\n    case \"cone\":\n      return m(l, e => c(S, 1, .5, e, !1), !0);\n    case \"inverted-cone\":\n      return m(l, e => c(S, 1, .5, e, !0), !0);\n    case \"cylinder\":\n      return m(l, e => a(S, 1, .5, e, [0, 0, 1], [0, 0, .5]));\n    case \"tetrahedron\":\n      return m([{\n        tesselation: 0,\n        minScreenSpaceRadius: 0\n      }], () => s(S, 1), !0);\n    case \"diamond\":\n      return m([{\n        tesselation: 0,\n        minScreenSpaceRadius: 0\n      }], () => n(S, 1), !0);\n    default:\n      return;\n  }\n}\nconst l = [{\n  tesselation: 6,\n  minScreenSpaceRadius: 0\n}, {\n  tesselation: 18,\n  minScreenSpaceRadius: 7\n}, {\n  tesselation: 64,\n  minScreenSpaceRadius: 65\n}];\nexport { d as isValidPrimitive, S as primitiveLodResources };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass e {\n  constructor(e) {\n    this.estimated = !1, this.verticesPerFeature = e.verticesPerFeature ?? 0, this.verticesPerCoordinate = e.verticesPerCoordinate ?? 0, this.drawCallsPerFeature = e.drawCallsPerFeature ?? 0, this.memory = e.memory ?? new a();\n  }\n}\nclass t extends e {\n  constructor(e) {\n    super(e), this.estimated = !0;\n  }\n}\nclass s extends e {\n  constructor(e, t) {\n    super(t), this.numComplexities = e;\n  }\n}\nclass r extends t {\n  constructor(e, t) {\n    super(t), this.numComplexities = e;\n  }\n}\nclass a {\n  constructor() {\n    this.bytesPerFeature = 0, this.bytesPerFeatureLabel = 0, this.resourceBytes = 0, this.draped = {\n      bytesPerFeature: 0,\n      bytesPerFeatureLabel: 0\n    };\n  }\n}\nexport { s as AggregateSymbolComplexity, r as EstimatedAggregateSymbolComplexity, t as EstimatedSymbolComplexity, e as SymbolComplexity, a as SymbolComplexityMemory };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { neverReached as e } from \"../../../../core/compilerUtils.js\";\nimport { defaultPrimitive as r } from \"../../../../symbols/support/ObjectSymbol3DLayerResource.js\";\nimport { pathNumRoundCapExtrusionSubdivisions as t, pathNumCircleProfileSubdivisions as a, pathNumRoundJoinSubdivisions as s } from \"./Graphics3DPathSymbolLayerConstants.js\";\nimport { primitiveLodResources as u } from \"./primitiveObjectSymbolUtils.js\";\nimport { EstimatedSymbolComplexity as o, EstimatedAggregateSymbolComplexity as b, AggregateSymbolComplexity as y, SymbolComplexity as i, SymbolComplexityMemory as c } from \"./SymbolComplexity.js\";\nimport { hasEdges as n } from \"../support/edgeUtils.js\";\nimport { DefaultMaterial as P } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nconst l = new o({});\nfunction m(e) {\n  if (\"web-style\" === e.type) return l;\n  return F(e.symbolLayers.toArray().map(r => p(e, r)));\n}\nfunction F(e) {\n  let r = 0,\n    t = 0,\n    a = 0,\n    s = !1,\n    u = 0;\n  const o = new c();\n  for (const b of e) null != b && (r += b.verticesPerFeature, t += b.verticesPerCoordinate, a += b.drawCallsPerFeature, o.bytesPerFeature += b.memory.bytesPerFeature, o.bytesPerFeatureLabel += b.memory.bytesPerFeatureLabel, o.resourceBytes += b.memory.resourceBytes, o.draped.bytesPerFeature += b.memory.bytesPerFeature, o.draped.bytesPerFeatureLabel += b.memory.bytesPerFeatureLabel, s = s || b.estimated, ++u);\n  return s ? new b(u, {\n    verticesPerFeature: r,\n    verticesPerCoordinate: t,\n    drawCallsPerFeature: a,\n    memory: o\n  }) : new y(u, {\n    verticesPerFeature: r,\n    verticesPerCoordinate: t,\n    drawCallsPerFeature: a,\n    memory: o\n  });\n}\nfunction d(e) {\n  const r = F(e);\n  return r.numComplexities > 0 && (r.verticesPerFeature /= r.numComplexities, r.verticesPerCoordinate /= r.numComplexities, r.drawCallsPerFeature /= r.numComplexities, r.memory.bytesPerFeature /= r.numComplexities, r.memory.bytesPerFeatureLabel /= r.numComplexities, r.memory.resourceBytes /= r.numComplexities, r.memory.draped.bytesPerFeature /= r.numComplexities, r.memory.draped.bytesPerFeatureLabel /= r.numComplexities), r;\n}\nconst L = {};\nfunction p(u, b) {\n  const y = C(u, b),\n    c = n(b) ? 2 : 0;\n  switch (b.type) {\n    case \"extrude\":\n      return new i({\n        verticesPerFeature: -12,\n        verticesPerCoordinate: 12,\n        drawCallsPerFeature: c,\n        memory: y\n      });\n    case \"fill\":\n      if (\"mesh-3d\" === u.type) return new i({\n        drawCallsPerFeature: c,\n        memory: y\n      });\n      if (null != b.outline && b.outline.size > 0) return new i({\n        verticesPerFeature: -12,\n        verticesPerCoordinate: 9,\n        memory: y\n      });\n    case \"water\":\n      return new i({\n        verticesPerFeature: -6,\n        verticesPerCoordinate: 3,\n        memory: y\n      });\n    case \"line\":\n      return new i({\n        verticesPerFeature: -6,\n        verticesPerCoordinate: 6,\n        memory: y\n      });\n    case \"object\":\n      return b.resource?.href ? new o({\n        verticesPerFeature: 100,\n        memory: y\n      }) : {\n        ...f(b.resource?.primitive ?? r),\n        memory: y\n      };\n    case \"path\":\n      {\n        let r = 0,\n          u = 0;\n        switch (b.profile) {\n          case \"circle\":\n            r = a;\n            break;\n          case \"quad\":\n            r = 4;\n            break;\n          default:\n            return void e(b.profile);\n        }\n        switch (b.join) {\n          case \"round\":\n            u = s;\n            break;\n          case \"miter\":\n          case \"bevel\":\n            u = 1;\n            break;\n          default:\n            return;\n        }\n        const o = 2 * r,\n          c = r * u * 2,\n          n = c + o;\n        let P = -2 * c - o;\n        switch (b.cap) {\n          case \"none\":\n            break;\n          case \"butt\":\n          case \"square\":\n            P += 2 * (r - 1);\n            break;\n          case \"round\":\n            P += 2 * (r * (t - 1) * 2 + r);\n            break;\n          default:\n            return;\n        }\n        return new i({\n          verticesPerFeature: P,\n          verticesPerCoordinate: n,\n          memory: y\n        });\n      }\n    case \"text\":\n    case \"icon\":\n      return new i({\n        verticesPerFeature: 6,\n        memory: y\n      });\n    default:\n      return;\n  }\n}\nfunction C(r, t) {\n  const a = \"point-3d\" === r.type;\n  switch (t.type) {\n    case \"extrude\":\n      return t.edges && t.edges.size > 0 ? E.EXTRUDE_EDGES : E.EXTRUDE;\n    case \"fill\":\n      return null != t.outline && t.outline.size > 0 ? E.FILL_OUTLINE : E.FILL;\n    case \"water\":\n      return E.FILL;\n    case \"line\":\n      return \"round\" === t.join ? E.LINE_ROUND : E.LINE_MITER;\n    case \"path\":\n      switch (t.join) {\n        case \"round\":\n          switch (t.profile) {\n            case \"circle\":\n              return E.PATH_ROUND_CIRCLE;\n            case \"quad\":\n              return E.PATH_ROUND_QUAD;\n            default:\n              return void e(t.profile);\n          }\n        case \"miter\":\n        case \"bevel\":\n          switch (t.profile) {\n            case \"circle\":\n              return E.PATH_MITER_CIRCLE;\n            case \"quad\":\n              return E.PATH_MITER_QUAD;\n            default:\n              return void e(t.profile);\n          }\n        default:\n          return;\n      }\n    case \"object\":\n      return a ? E.OBJECT_POINT : E.OBJECT_POLYGON;\n    case \"icon\":\n    case \"text\":\n      return a ? E.ICON_POINT : E.ICON_POLYGON;\n    default:\n      return;\n  }\n}\nfunction f(e) {\n  const r = L[e];\n  if (r) return r;\n  const t = w(u(e, new P({})).levels);\n  return L[e] = new i({\n    verticesPerFeature: t\n  }), L[e];\n}\nfunction w(e) {\n  return e.reduce((e, r, t) => e + r.numVertices * (1 / 10 ** t), 0) / e.reduce((e, r, t) => e + 1 / 10 ** t, 0);\n}\nconst E = {\n  ICON_POINT: {\n    bytesPerFeature: 2379.8272296852992,\n    bytesPerFeatureLabel: 852.246235,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 1868.2382921559424,\n      bytesPerFeatureLabel: 839.205415\n    }\n  },\n  ICON_POLYGON: {\n    bytesPerFeature: 2957.8429876524656,\n    bytesPerFeatureLabel: 862.5307816666666,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 2579.7767085451133,\n      bytesPerFeatureLabel: 856.9298550000001\n    }\n  },\n  OBJECT_POINT: {\n    bytesPerFeature: 603.543820573039,\n    bytesPerFeatureLabel: 717.4551849999999,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 603.543820573039,\n      bytesPerFeatureLabel: 717.4551849999999\n    }\n  },\n  OBJECT_POLYGON: {\n    bytesPerFeature: 1111.1693389308373,\n    bytesPerFeatureLabel: 707.4535949999998,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 1111.1693389308373,\n      bytesPerFeatureLabel: 707.4535949999998\n    }\n  },\n  LINE_MITER: {\n    bytesPerFeature: 3081.208408220661,\n    bytesPerFeatureLabel: 858.6749016666668,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 2682.57863388475,\n      bytesPerFeatureLabel: 844.6118016666666\n    }\n  },\n  LINE_ROUND: {\n    bytesPerFeature: 3209.3236242927915,\n    bytesPerFeatureLabel: 858.1810416666667,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 2687.6256038096126,\n      bytesPerFeatureLabel: 849.578535\n    }\n  },\n  PATH_MITER_CIRCLE: {\n    bytesPerFeature: 38708.74276663992,\n    bytesPerFeatureLabel: 858.70415,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 38708.74276663992,\n      bytesPerFeatureLabel: 858.70415\n    }\n  },\n  PATH_ROUND_CIRCLE: {\n    bytesPerFeature: 42098.00590216518,\n    bytesPerFeatureLabel: 868.3632500000001,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 42098.00590216518,\n      bytesPerFeatureLabel: 868.3632500000001\n    }\n  },\n  PATH_MITER_QUAD: {\n    bytesPerFeature: 25037.823002405767,\n    bytesPerFeatureLabel: 835.93355,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 25037.823002405767,\n      bytesPerFeatureLabel: 835.93355\n    }\n  },\n  PATH_ROUND_QUAD: {\n    bytesPerFeature: 40320.254760224525,\n    bytesPerFeatureLabel: 851.66955,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 40320.254760224525,\n      bytesPerFeatureLabel: 851.66955\n    }\n  },\n  FILL: {\n    bytesPerFeature: 3147.43349219103,\n    bytesPerFeatureLabel: 850.7598550000001,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 2673.7898488975106,\n      bytesPerFeatureLabel: 846.6459950000002\n    }\n  },\n  FILL_OUTLINE: {\n    bytesPerFeature: 4565.099993465867,\n    bytesPerFeatureLabel: 855.334515,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 3904.46969705314,\n      bytesPerFeatureLabel: 844.7081016666667\n    }\n  },\n  EXTRUDE: {\n    bytesPerFeature: 7551.2282834569505,\n    bytesPerFeatureLabel: 849.5513283333333,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 7551.2282834569505,\n      bytesPerFeatureLabel: 849.5513283333333\n    }\n  },\n  EXTRUDE_EDGES: {\n    bytesPerFeature: 2959.8379634500698,\n    bytesPerFeatureLabel: 602.0969283333335,\n    resourceBytes: 0,\n    draped: {\n      bytesPerFeature: 2959.8379634500698,\n      bytesPerFeatureLabel: 602.0969283333335\n    }\n  }\n};\nexport { d as averageSymbolComplexities, m as defaultSymbolComplexity, p as defaultSymbolLayerComplexity, C as defaultSymbolLayerMemoryComplexity, l as emptySymbolComplexity, w as estimateNumVerticesForLods, E as memoryEstimators, F as totalSymbolComplexities };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar e;\n!function (e) {\n  e[e.RecreateSymbol = 0] = \"RecreateSymbol\", e[e.RecreateGraphics = 1] = \"RecreateGraphics\", e[e.FastUpdate = 2] = \"FastUpdate\";\n}(e || (e = {}));\nexport { e as ApplyRendererDiffResult };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { abortMaybe as t } from \"../../../../core/maybe.js\";\nimport { isAbortError as o } from \"../../../../core/promiseUtils.js\";\nclass r {\n  constructor(t) {\n    this.schedule = t, this._abortController = null, this._loadStatus = l.LOADING, this._loadError = null, this._loader = null, this.logger = null;\n  }\n  destroy() {\n    this.abortLoad();\n  }\n  get loadStatus() {\n    return this._loadStatus;\n  }\n  load(t, r) {\n    return this._loadStatus === l.LOADED ? (t && t(), this._loader ?? Promise.resolve()) : this._loadStatus === l.FAILED ? (r && r(this._loadError), this._loader ?? Promise.resolve()) : (null == this._loader && (this._abortController = new AbortController(), this._loader = this.doLoad(this._abortController.signal).then(() => {\n      this._abortController = null, this._loadStatus = l.LOADED;\n    }, t => {\n      throw this._loadError = t, this._abortController = null, this._loadStatus = l.FAILED, !o(t) && this.logger && t.message && this.logger.warn(t.message), t;\n    })), this._loader.then(t, r).catch(() => {}), this._loader);\n  }\n  abortLoad() {\n    null != this._abortController ? this._abortController = t(this._abortController) : this._loadStatus === l.LOADING && (this._loadStatus = l.FAILED), this._loader = null;\n  }\n}\nvar l;\n!function (t) {\n  t[t.LOADING = 0] = \"LOADING\", t[t.LOADED = 1] = \"LOADED\", t[t.FAILED = 2] = \"FAILED\";\n}(l || (l = {}));\nexport { l as LoadStatus, r as Loadable };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport \"../../../../core/has.js\";\nimport t from \"../../../../core/Logger.js\";\nimport { ONES as i } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as r } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { closeRings as o } from \"../../../../geometry/support/coordsUtils.js\";\nimport { defaultSymbolLayerComplexity as n } from \"./defaultSymbolComplexity.js\";\nimport { SymbolUpdateType as s } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as a } from \"./ElevationContext.js\";\nimport { zeroContext as l } from \"./featureExpressionInfoUtils.js\";\nimport { mixinColorAndOpacity as p } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as c } from \"./interfaces.js\";\nimport { Loadable as d } from \"./Loadable.js\";\nimport { getAttributeValue as h } from \"../support/FastSymbolUpdates.js\";\nconst u = () => t.getLogger(\"esri.views.3d.layers.graphics.Graphics3DSymbolLayer\");\nclass y extends d {\n  constructor(e, t, i, r) {\n    super(i.schedule), this.symbol = e, this.symbolLayer = t, this._context = i, this.ignoreDrivers = !1, this._drivenProperties = {\n      color: !1,\n      opacity: !1,\n      opacityAlwaysOpaque: !0,\n      size: !1\n    }, this._materials = [], this.usedMemory = 0, this.logger = u(), this._elevationOptions = {\n      supportsOffsetAdjustment: !1,\n      supportsOnTheGround: !0\n    }, this.skipHighSymbolLodsChanged = !0, this._renderPriority = r.renderPriority, this._renderPriorityStep = r.renderPriorityStep, this._elevationContext = new a(), this.complexity = this.computeComplexity(), this.ignoreDrivers = r.ignoreDrivers, this.ignoreDrivers || (this._drivenProperties = f(this._context.renderer)), this._updateElevationContext();\n  }\n  getCachedSize() {\n    return null;\n  }\n  get extentPadding() {\n    return 0;\n  }\n  get materials() {\n    return this._materials;\n  }\n  _drivenPropertiesChanged(e) {\n    if (this.ignoreDrivers) return !1;\n    const t = this._drivenProperties,\n      i = f(e);\n    return i.color !== t.color || i.opacity !== t.opacity || i.opacityAlwaysOpaque !== t.opacityAlwaysOpaque || i.size !== t.size;\n  }\n  get needsDrivenTransparentPass() {\n    return this._drivenProperties.opacity && !this._drivenProperties.opacityAlwaysOpaque;\n  }\n  _logGeometryCreationWarnings(e, t, i, r) {\n    const o = e.projectionSuccess,\n      n = \"polygons\" in e ? e.polygons : null,\n      s = `${r} geometry failed to be created`;\n    o ? !this._logGeometryValidationWarnings(t, i, r) && n && 0 === n.length && \"rings\" === i && t.length > 0 && t[0].length > 2 && u().warnOncePerTick(`${s} (filled rings should use clockwise winding - try reversing the order of vertices)`) : u().warnOncePerTick(`${s} (failed to project geometry to view spatial reference)`);\n  }\n  _logGeometryValidationWarnings(e, t, i) {\n    const r = `${i} geometry failed to be created`;\n    return !e.length || 1 === e.length && !e[0].length ? (u().warnOncePerTick(`${r} (no ${t} were defined)`), !0) : (!Array.isArray(e) || !Array.isArray(e[0])) && (u().warnOncePerTick(`${r} (${t} should be defined as a 2D array)`), !0);\n  }\n  _validateGeometry(e, t = null, i = null) {\n    if (null != t && !t.includes(e.type)) return this.logger.warn(\"unsupported geometry type for \" + i + ` symbol: ${e.type}`), !1;\n    switch (e.type) {\n      case \"point\":\n        {\n          const t = e;\n          if (!isFinite(t.x) || !isFinite(t.y)) return u().warn(\"point coordinate is not a valid number, graphic skipped\"), !1;\n          break;\n        }\n      case \"polygon\":\n        o(e) && u().warnOncePerTick(\"Fixed a non-closed polygon ring.\");\n    }\n    return !0;\n  }\n  _defaultElevationInfoNoZ() {\n    return g;\n  }\n  _defaultElevationInfoZ() {\n    return m;\n  }\n  _updateElevationContext() {\n    null != this._elevationInfoOverride ? (this._elevationContext.setFromElevationInfo(this._elevationInfoOverride), this._elevationContext.updateFeatureExpressionInfoContext(null)) : this._context.layer.elevationInfo ? (this._elevationContext.setFromElevationInfo(this._context.layer.elevationInfo), this._elevationContext.updateFeatureExpressionInfoContext(this._context.featureExpressionInfoContext)) : this._elevationContext.reset();\n  }\n  getDefaultElevationInfo(e) {\n    return e.hasZ ? this._defaultElevationInfoZ() : this._defaultElevationInfoNoZ();\n  }\n  getGeometryElevationMode(e, t = this.getDefaultElevationInfo(e)) {\n    return this._elevationContext.mode || t.mode;\n  }\n  setElevationInfoOverride(e) {\n    this._elevationInfoOverride = e, this._updateElevationContext();\n  }\n  setGraphicElevationContext(e, t = new a()) {\n    const i = e.geometry,\n      r = this.getDefaultElevationInfo(i);\n    t.unit = null != this._elevationContext.unit ? this._elevationContext.unit : r.unit, t.mode = this.getGeometryElevationMode(i, r), t.offsetMeters = this._elevationContext.meterUnitOffset ?? r.offset ?? 0;\n    const o = !this._elevationOptions.supportsOnTheGround && \"on-the-ground\" === t.mode;\n    o && (t.mode = \"relative-to-ground\", t.offsetMeters = 0);\n    const n = o ? l : this._elevationContext.featureExpressionInfoContext;\n    return t.updateFeatureExpressionInfoContext(n, e, this._context.layer), t;\n  }\n  prepareSymbolLayerPatch(e) {}\n  updateGeometry(e, t) {\n    return !1;\n  }\n  updateTransform(e, t, i, r) {\n    return !1;\n  }\n  onRemoveGraphic(e) {}\n  _getLayerOpacity() {\n    if (this._context.graphicsCoreOwner && \"fullOpacity\" in this._context.graphicsCoreOwner) return this._context.graphicsCoreOwner.fullOpacity ?? 0;\n    const e = this._context.layer.opacity;\n    return e ?? 1;\n  }\n  _getCombinedOpacity(e, t = v) {\n    let i = 1;\n    return this.draped || (i *= this._getLayerOpacity()), this._drivenProperties.opacity || (null != e ? i *= e.a : t.hasIntrinsicColor || (i = 0)), i;\n  }\n  _getCombinedOpacityAndColor(t, r = v) {\n    const o = this._getCombinedOpacity(t, r);\n    if (this._drivenProperties.color) return p(null, o);\n    const n = null != t ? e.toUnitRGB(t) : i;\n    return p(n, o);\n  }\n  _getVertexOpacityAndColor(e, t = null) {\n    const i = this._drivenProperties.color ? e.color : null,\n      r = this._drivenProperties.opacity ? e.opacity : null,\n      o = p(i, r);\n    return t && (o[0] *= t, o[1] *= t, o[2] *= t, o[3] *= t), o;\n  }\n  isFastUpdatesEnabled() {\n    return null != this._fastUpdates;\n  }\n  computeComplexity() {\n    return n(this.symbol, this.symbolLayer);\n  }\n  globalPropertyChanged(e, t, i) {\n    switch (e) {\n      case \"opacity\":\n        return this.layerOpacityChanged(t, i), !0;\n      case \"elevationInfo\":\n        {\n          const e = this._elevationContext.mode;\n          this._updateElevationContext();\n          return this.layerElevationInfoChanged(t, i, e) !== s.RECREATE;\n        }\n      case \"slicePlaneEnabled\":\n        return this.slicePlaneEnabledChanged(t, i);\n      case \"physicalBasedRenderingEnabled\":\n        return this.physicalBasedRenderingChanged();\n      case \"pixelRatio\":\n        return this.pixelRatioChanged;\n      case \"skipHighSymbolLods\":\n        return this.skipHighSymbolLodsChanged;\n      default:\n        return !1;\n    }\n  }\n  get pixelRatioChanged() {\n    return !0;\n  }\n  updateGraphics3DGraphicElevationInfo(e, t, i) {\n    let r = s.UPDATE;\n    return e.forEach(e => {\n      const o = t(e);\n      if (null != o) {\n        const t = e.graphic;\n        this.setGraphicElevationContext(t, o.elevationContext), o.needsElevationUpdates = i(o.elevationContext.mode);\n      } else r = s.RECREATE;\n    }), r;\n  }\n  applyRendererDiff(e, t) {\n    return c.RecreateSymbol;\n  }\n  getFastUpdateAttrValues(e) {\n    if (!this._fastUpdates) return null;\n    const t = this._fastUpdates.visualVariables,\n      i = t.size ? h(t.size.field, e) : 0,\n      o = t.color ? h(t.color.field, e) : 0,\n      n = t.opacity ? h(t.opacity.field, e) : 0;\n    return r(i, o, n, 0);\n  }\n  get draped() {\n    return this._draped;\n  }\n  ensureDrapedStatus(e) {\n    return null == this._draped ? (this._draped = e, !0) : (e !== this.draped && u().warnOnce(\"A symbol can only produce either draped or non-draped visualizations. Use two separate symbol instances for draped and non-draped graphics if necessary.\"), !1);\n  }\n  test() {\n    const e = () => ({\n      size: this._fastUpdates?.visualVariables.size?.field ?? null,\n      color: this._fastUpdates?.visualVariables.color?.field ?? null,\n      opacity: this._fastUpdates?.visualVariables.opacity?.field ?? null,\n      rotation: this._fastUpdates?.visualVariables.rotation?.field ?? null\n    });\n    return {\n      drivenProperties: this._drivenProperties,\n      getVisVarFields: e\n    };\n  }\n}\nfunction f(e) {\n  const t = {\n    color: !1,\n    opacity: !1,\n    opacityAlwaysOpaque: !0,\n    size: !1\n  };\n  return e && \"visualVariables\" in e && e.visualVariables && e.visualVariables.forEach(e => {\n    switch (e.type) {\n      case \"color\":\n        if (t.color = !0, e.stops) for (let i = 0; i < e.stops.length; i++) {\n          const r = e.stops[i].color;\n          r && (t.opacity = !0, r.a < 1 && (t.opacityAlwaysOpaque = !1));\n        }\n        break;\n      case \"opacity\":\n        t.opacity = !0, t.opacityAlwaysOpaque = !1;\n        break;\n      case \"size\":\n        t.size = !0;\n    }\n  }), t;\n}\nconst g = {\n    mode: \"on-the-ground\",\n    offset: 0,\n    unit: \"meters\"\n  },\n  m = {\n    mode: \"absolute-height\",\n    offset: 0,\n    unit: \"meters\"\n  },\n  v = {\n    hasIntrinsicColor: !1\n  };\nexport { y as Graphics3DSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as e } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { projectPointToVector as r } from \"../../../../geometry/projection/projectPointToVector.js\";\nimport { containsPoint as t } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { getPointOnPath as o, getPathLength as n } from \"../../../../geometry/support/coordsUtils.js\";\nimport { makeDehydratedPoint as i } from \"../../../../layers/graphics/dehydratedPoint.js\";\nimport { applyElevationAlignmentForHUD as l } from \"./elevationAlignmentUtils.js\";\nimport { computeCentroid as s } from \"./graphicUtils.js\";\nimport { Object3D as c } from \"../../webgl-engine/lib/Object3D.js\";\nfunction a(e, r, t, o, n) {\n  if (u(e, r)) return null;\n  t.localOrigin = d(e, r);\n  const i = new c({\n    geometries: [t],\n    castShadow: !1,\n    layerUid: e.layer.uid,\n    graphicUid: n,\n    usesVerticalDistanceToGround: !0\n  });\n  return {\n    object: i,\n    sampledElevation: l(i, r, e.elevationProvider, e.renderCoordsHelper, o)\n  };\n}\nfunction p(e, r, t, o) {\n  if (u(r, t)) return null;\n  return l(e, t, r.elevationProvider, r.renderCoordsHelper, o);\n}\nfunction u(e, o) {\n  const n = e.clippingExtent;\n  return !!n && (r(o, g, e.elevationProvider.spatialReference), !t(n, g));\n}\nfunction m(e, t, o) {\n  const n = e.elevationContext,\n    l = o.spatialReference;\n  r(t, g, l), n.centerPointInElevationSR = i(g[0], g[1], t.hasZ ? g[2] : 0, null != l ? l : null);\n}\nfunction f(e) {\n  switch (e.type) {\n    case \"point\":\n      return e;\n    case \"polygon\":\n    case \"extent\":\n      return s(e);\n    case \"polyline\":\n      {\n        const r = e.paths[0];\n        if (!r || 0 === r.length) return null;\n        const t = o(r, n(r) / 2);\n        return i(t[0], t[1], t[2], e.spatialReference);\n      }\n    case \"mesh\":\n      return e.origin;\n  }\n  return null;\n}\nfunction d(e, t) {\n  return r(t, g, e.renderCoordsHelper.spatialReference), e.localOriginFactory.getOrigin(g);\n}\nconst g = e();\nexport { a as createStageObject, m as extendPointGraphicElevationContext, d as getLocalOriginForPoint, f as placePointOnGeometry, p as updateStageObjectGeometry };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ViewingMode as e } from \"../../../ViewingMode.js\";\nimport { ReloadableShaderModule as i } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as t } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { Default3D as r } from \"../lib/DefaultVertexAttributeLocations.js\";\nimport { Program as o } from \"../lib/Program.js\";\nimport { L as n } from \"../../../../chunks/LineCallout.glsl.js\";\nimport { CompareFunction as s, BlendFactor as l } from \"../../../webgl/enums.js\";\nimport { makePipelineState as a, defaultDepthWriteParams as u, separateBlendingParams as d, defaultColorWriteParams as m } from \"../../../webgl/renderState.js\";\nclass h extends t {\n  initializeConfiguration(i, t) {\n    t.spherical = i.viewingMode === e.Global;\n  }\n  initializeProgram(e) {\n    return new o(e.rctx, h.shader.get().build(this.configuration), r);\n  }\n  setPipelineState(e) {\n    const i = e ? s.ALWAYS : s.LESS;\n    return this.configuration.depthHudEnabled ? a({\n      depthTest: {\n        func: i\n      },\n      depthWrite: u\n    }) : a({\n      blending: d(l.ONE, l.SRC_ALPHA, l.ONE_MINUS_SRC_ALPHA, l.ONE_MINUS_SRC_ALPHA),\n      depthTest: {\n        func: i\n      },\n      colorWrite: m\n    });\n  }\n  initializePipeline() {\n    return this.setPipelineState(this.configuration.multipassEnabled);\n  }\n}\nh.shader = new i(n, () => import(\"./LineCallout.glsl.js\"));\nexport { h as LineCalloutTechnique };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { parameter as t } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { DefaultTechniqueConfiguration as o } from \"../materials/DefaultTechniqueConfiguration.js\";\nclass s extends o {\n  constructor() {\n    super(...arguments), this.screenCenterOffsetUnitsEnabled = !1, this.spherical = !1, this.occlusionTestEnabled = !0, this.hasVerticalOffset = !1, this.hasScreenSizePerspective = !1, this.depthHudEnabled = !1, this.depthHudAlignStartEnabled = !1, this.hasSlicePlane = !1, this.multipassEnabled = !1;\n  }\n}\ne([t()], s.prototype, \"screenCenterOffsetUnitsEnabled\", void 0), e([t()], s.prototype, \"spherical\", void 0), e([t()], s.prototype, \"occlusionTestEnabled\", void 0), e([t()], s.prototype, \"hasVerticalOffset\", void 0), e([t()], s.prototype, \"hasScreenSizePerspective\", void 0), e([t()], s.prototype, \"depthHudEnabled\", void 0), e([t()], s.prototype, \"depthHudAlignStartEnabled\", void 0), e([t()], s.prototype, \"hasSlicePlane\", void 0), e([t()], s.prototype, \"multipassEnabled\", void 0), e([t({\n  constValue: !0\n})], s.prototype, \"hasSliceInVertexProgram\", void 0), e([t({\n  constValue: !1\n})], s.prototype, \"draped\", void 0);\nexport { s as LineCalloutTechniqueConfiguration };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { safeToString as e } from \"../../../../core/string.js\";\nimport { fromValues as t } from \"../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";\nimport { newLayout as r } from \"../../support/buffer/InterleavedLayout.js\";\nimport { ShaderOutput as i } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport s from \"../lib/GLMaterial.js\";\nimport { Material as n, MaterialParameters as a } from \"../lib/Material.js\";\nimport { RenderSlot as o } from \"../lib/RenderSlot.js\";\nimport { VertexAttribute as l } from \"../lib/VertexAttribute.js\";\nimport { writePosition as c, writeNormal as u, writeBufferVec4 as f } from \"./internal/bufferWriterUtils.js\";\nimport { LineCalloutTechnique as h } from \"../shaders/LineCalloutTechnique.js\";\nimport { LineCalloutTechniqueConfiguration as d } from \"../shaders/LineCalloutTechniqueConfiguration.js\";\nclass m extends n {\n  get uniqueMaterialIdentifier() {\n    return this._uniqueMaterialIdentifier;\n  }\n  constructor(e) {\n    super(e, new g()), this.produces = new Map([[o.LINE_CALLOUTS, e => e === i.Color], [o.LINE_CALLOUTS_HUD_DEPTH, e => e === i.Color]]), this._configuration = new d(), this._uniqueMaterialIdentifier = m.uniqueMaterialIdentifier(this.parameters);\n  }\n  passParameters() {\n    return this.parameters;\n  }\n  getConfiguration(e, t) {\n    const r = t?.slot !== o.LINE_CALLOUTS;\n    return this._configuration.occlusionTestEnabled = this.parameters.occlusionTest, this._configuration.hasVerticalOffset = null != this.parameters.verticalOffset, this._configuration.hasScreenSizePerspective = null != this.parameters.screenSizePerspective, this._configuration.depthHudEnabled = r, this._configuration.depthHudAlignStartEnabled = !!this.parameters.depthHUDAlignStart, this._configuration.screenCenterOffsetUnitsEnabled = \"screen\" === this.parameters.centerOffsetUnits, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.multipassEnabled = t.multipassEnabled, this._configuration;\n  }\n  intersect() {}\n  createGLMaterial(e) {\n    return new p(e);\n  }\n  createBufferWriter() {\n    return new b();\n  }\n  validateParameters(e) {\n    const t = m.uniqueMaterialIdentifier(e);\n    t !== this._uniqueMaterialIdentifier && (this._uniqueMaterialIdentifier = t);\n  }\n  static uniqueMaterialIdentifier({\n    renderOccluded: t,\n    isDecoration: r,\n    horizontalScreenOffset: i,\n    color: s,\n    size: n,\n    occlusionTest: a,\n    shaderPolygonOffset: o,\n    depthHUDAlignStart: l,\n    centerOffsetUnits: c,\n    hasSlicePlane: u,\n    screenSizePerspective: f,\n    verticalOffset: h,\n    borderColor: d\n  }) {\n    return e`${t}:${r}:${i}:[${s}]:${n}:${a}:${o}:${l}:${c}:${u}:${null != f}:{${h.screenLength}:${h.minWorldLength}:${h.maxWorldLength}}:[${d}]`;\n  }\n}\nclass p extends s {\n  beginSlot(e) {\n    return this.ensureTechnique(h, e);\n  }\n}\nclass g extends a {\n  constructor() {\n    super(...arguments), this.horizontalScreenOffset = 0, this.color = [0, 0, 0, 1], this.size = 1, this.occlusionTest = !1, this.shaderPolygonOffset = 1e-5, this.depthHUDAlignStart = !1, this.centerOffsetUnits = \"world\", this.hasSlicePlane = !1;\n  }\n}\nconst O = r().vec3f(l.POSITION).vec3f(l.NORMAL).vec2f(l.UV0).vec4f(l.CENTEROFFSETANDDISTANCE),\n  S = [t(0, 0), t(1, 0), t(0, 1), t(1, 0), t(1, 1), t(0, 1)];\nclass b {\n  constructor() {\n    this.vertexBufferLayout = O;\n  }\n  elementCount(e) {\n    return 6 * e.attributes.get(l.POSITION).indices.length;\n  }\n  write(e, t, r, i, s) {\n    c(r.attributes.get(l.POSITION), e, i.position, s, 6), u(r.attributes.get(l.NORMAL), t, i.normal, s, 6), f(r.attributes.get(l.CENTEROFFSETANDDISTANCE), i.centerOffsetAndDistance, s, 6);\n    for (let n = 0; n < S.length; ++n) i.uv0.setVec(s + n, S[n]);\n  }\n}\nexport { m as LineCalloutMaterial, g as Parameters };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport { pt2px as t } from \"../../../../core/screenUtils.js\";\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { create as i } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { textSymbolLayerSupportsVerticalOffset as n } from \"../../../../symbols/callouts/calloutUtils.js\";\nimport { perObjectElevationAligner as a } from \"./ElevationAligners.js\";\nimport { SymbolUpdateType as o, elevationModeChangeUpdateType as s, needsElevationUpdates2D as l } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as c } from \"./ElevationContext.js\";\nimport { Graphics3DGraphicCreationContext as m } from \"./Graphics3DGraphicCreationContext.js\";\nimport { Graphics3DObject3DGraphicLayer as h } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DObjectMetadata as d } from \"./Graphics3DObjectMetadata.js\";\nimport { Graphics3DSymbolLayer as p } from \"./Graphics3DSymbolLayer.js\";\nimport { computeCentroid as f } from \"./graphicUtils.js\";\nimport { createStageObject as u, extendPointGraphicElevationContext as g } from \"./pointUtils.js\";\nimport { SymbolComplexity as y } from \"./SymbolComplexity.js\";\nimport { Attribute as v } from \"../../webgl-engine/lib/Attribute.js\";\nimport { ContentObjectType as b } from \"../../webgl-engine/lib/ContentObjectType.js\";\nimport { Geometry as C } from \"../../webgl-engine/lib/Geometry.js\";\nimport { VertexAttribute as x } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { LineCalloutMaterial as O, Parameters as _ } from \"../../webgl-engine/materials/LineCalloutMaterial.js\";\nclass E extends p {\n  constructor(e, t) {\n    super(e, null, t, w), this._elevationOptions = {\n      supportsOffsetAdjustment: !0,\n      supportsOnTheGround: !1\n    }, this.ensureDrapedStatus(!1);\n  }\n  async doLoad() {\n    this._materials[0] = new O(this._materialParameters), this._context.stage.add(this._materials[0]);\n  }\n  destroy() {\n    super.destroy(), this._context.stage.remove(this._materials[0]), this._materials.length = 0;\n  }\n  _perInstanceMaterialParameters(e) {\n    const t = this._materialParameters;\n    return t.horizontalScreenOffset = e.horizontalScreenOffset ?? 0, t.centerOffsetUnits = e.centerOffsetUnits || \"world\", t;\n  }\n  get _materialParameters() {\n    const r = new _(),\n      i = this.symbol,\n      n = i.callout;\n    if (r.color = null != n.color ? e.toUnitRGBA(n.color) : [0, 0, 0, 0], r.color[3] *= this._getLayerOpacity(), r.size = t(n.size || 0), i.verticalOffset) {\n      const {\n        screenLength: e,\n        minWorldLength: n,\n        maxWorldLength: a\n      } = i.verticalOffset;\n      r.verticalOffset = {\n        screenLength: t(e),\n        minWorldLength: n || 0,\n        maxWorldLength: null != a ? a : 1 / 0\n      };\n    }\n    r.borderColor = null != n.border?.color ? e.toUnitRGBA(n.border.color) : null;\n    const a = \"object\" === i.symbolLayers.at(0).type,\n      o = \"label-3d\" === i.type;\n    return r.occlusionTest = !a, r.shaderPolygonOffset = a ? 0 : void 0, r.depthHUDAlignStart = o, r.hasSlicePlane = this._context.slicePlaneEnabled, r.screenSizePerspective = this._context.screenSizePerspectiveEnabled ? this._context.sharedResources.screenSizePerspectiveSettings : null, r;\n  }\n  _defaultElevationInfoNoZ() {\n    return U;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.renderingInfo,\n      r = e.graphic,\n      i = this.setGraphicElevationContext(r, new c(), t.elevationOffset || 0),\n      a = t.symbol,\n      o = \"on-the-ground\" === this._elevationContext.mode && (\"cim\" === a.type || !a.symbolLayers.some(e => \"object\" === e.type || \"text\" === e.type));\n    if (\"label-3d\" !== a.type && o) return null;\n    if (\"point-3d\" === a.type && a.symbolLayers.every(e => \"text\" === e.type && !n(e))) return null;\n    const s = f(r.geometry);\n    return null == s ? null : this._createAs3DShape(s, i, t, r.uid);\n  }\n  layerOpacityChanged() {\n    this._materials[0]?.setParameters(this._materialParameters);\n  }\n  layerElevationInfoChanged(e, t, r) {\n    const i = this._elevationContext.mode,\n      n = s(E.elevationModeChangeTypes, r, i);\n    return n !== o.UPDATE || e.forEach(e => {\n      const r = t(e);\n      null != r && this.updateGraphicElevationContext(e.graphic, r);\n    }), n;\n  }\n  slicePlaneEnabledChanged() {\n    return this._materials[0]?.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return !0;\n  }\n  setGraphicElevationContext(e, t, r = 0) {\n    return super.setGraphicElevationContext(e, t), t.addOffsetRenderUnits(r), t;\n  }\n  updateGraphicElevationContext(e, t) {\n    this.setGraphicElevationContext(e, t.elevationContext, null != t.metadata ? t.metadata.elevationOffset : 0), t.needsElevationUpdates = l(t.elevationContext.mode);\n  }\n  computeComplexity() {\n    return new y({\n      verticesPerFeature: 6\n    });\n  }\n  _getOrCreateMaterial(e) {\n    const t = this._perInstanceMaterialParameters(e),\n      r = O.uniqueMaterialIdentifier(t);\n    if (r === this._materials[0]?.uniqueMaterialIdentifier) return {\n      material: this._materials[0],\n      isUnique: !1\n    };\n    if (null != e.materialCollection) {\n      let i = e.materialCollection.get(r);\n      return null == i && (i = new O(t), e.materialCollection.add(r, i)), {\n        material: i,\n        isUnique: !1\n      };\n    }\n    return {\n      material: new O(t),\n      isUnique: !0\n    };\n  }\n  _createAs3DShape(e, t, r, i) {\n    const n = this._context.layer.uid,\n      o = this._context.stage.renderView.getObjectAndLayerIdColor({\n        graphicUid: i,\n        layerUid: n\n      }),\n      s = this._getOrCreateMaterial(r),\n      c = new C(s.material, j(r), null, b.Point, o),\n      m = u(this._context, e, c, t, i);\n    if (null == m) return null;\n    const p = new h(this, m.object, [c], s.isUnique ? [s.material] : null, null, a, t);\n    return p.metadata = new d(r.elevationOffset), p.alignedSampledElevation = m.sampledElevation, p.needsElevationUpdates = l(t.mode), g(p, e, this._context.elevationProvider), p;\n  }\n}\nfunction j(e) {\n  const {\n      translation: t,\n      centerOffset: r\n    } = e,\n    i = new v(t ? [t[0], t[1], t[2]] : [0, 0, 0], P, 3, !0),\n    n = new v(r ? [r[0], r[1], r[2], r[3]] : [0, 0, 0, 1], P, 4, !0);\n  return [[x.POSITION, i], [x.NORMAL, new v([0, 0, 1], P, 3, !0)], [x.CENTEROFFSETANDDISTANCE, n]];\n}\nE.elevationModeChangeTypes = {\n  definedChanged: o.UPDATE,\n  staysOnTheGround: o.UPDATE,\n  onTheGroundChanged: o.RECREATE\n};\nconst P = [0],\n  U = {\n    mode: \"relative-to-ground\",\n    offset: 0\n  },\n  w = {\n    ignoreDrivers: !0,\n    renderPriority: 0,\n    renderPriorityStep: 1\n  };\nclass G {\n  constructor(e, t, n = r(), a = i(), o = 0, s = \"world\", l = 0, c = null) {\n    this.renderer = e, this.symbol = t, this.translation = n, this.centerOffset = a, this.horizontalScreenOffset = o, this.centerOffsetUnits = s, this.elevationOffset = l, this.materialCollection = c;\n  }\n}\nclass S extends m {}\nexport { E as Graphics3DLineCalloutSymbolLayer, S as LineCalloutCreationContext, G as LineCalloutSymbolLayerRenderingInfo };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport o from \"../../../../core/Logger.js\";\nimport { hasCalloutSupport as r } from \"../../../../symbols/callouts/calloutUtils.js\";\nimport { Graphics3DLineCalloutSymbolLayer as l } from \"./Graphics3DLineCalloutSymbolLayer.js\";\nconst t = () => o.getLogger(\"esri.views.3d.layers.graphics.Graphics3DCalloutSymbolLayerFactory\");\nfunction e(o, l) {\n  if (!r(o)) return t().error(\"Graphics3DCalloutSymbolLayerFactory#make\", `symbol of type '${o.type}' does not support callouts`), null;\n  if (!o.callout) return null;\n  const e = a[o.callout.type];\n  return e ? new e(o, l) : (t().error(\"Graphics3DCalloutSymbolLayerFactory#make\", `unknown or unsupported callout type ${o.callout.type}`), null);\n}\nconst a = {\n  line: l\n};\nexport { e as make };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from \"../../Color.js\";\nimport { getVisualVariableValues as e } from \"../visualVariables/support/visualVariableUtils.js\";\nfunction o(t, e) {\n  if (!t || t.symbol) return null;\n  const o = e?.renderer;\n  return t && null != o && o.getObservationRenderer ? o.getObservationRenderer(t) : o;\n}\nfunction r(t, e) {\n  if (null != t.symbol) return t.symbol;\n  const r = o(t, e);\n  return null != r && \"dot-density\" !== r.type ? r.getSymbol(t, e) : null;\n}\nfunction i(t, i) {\n  const n = o(t, i),\n    l = r(t, i);\n  if (null == l) return null;\n  const a = {\n    renderer: n,\n    symbol: l\n  };\n  if (null == n || !(\"visualVariables\" in n) || !n.visualVariables) return a;\n  const s = e(n, t, i) ?? [],\n    u = [\"proportional\", \"proportional\", \"proportional\"];\n  for (const {\n    variable: e,\n    value: o\n  } of s) switch (e.type) {\n    case \"color\":\n      a.color = o.toRgba();\n      break;\n    case \"size\":\n      if (\"outline\" === e.target) a.outlineSize = o;else {\n        const t = e.axis,\n          r = e.useSymbolValue ? \"symbol-value\" : o;\n        switch (t) {\n          case \"width\":\n            u[0] = r;\n            break;\n          case \"depth\":\n            u[1] = r;\n            break;\n          case \"height\":\n            u[2] = r;\n            break;\n          case \"width-and-depth\":\n            u[0] = u[1] = r;\n            break;\n          default:\n            u[0] = u[1] = u[2] = r;\n        }\n      }\n      break;\n    case \"opacity\":\n      a.opacity = o;\n      break;\n    case \"rotation\":\n      switch (e.axis) {\n        case \"tilt\":\n          a.tilt = o;\n          break;\n        case \"roll\":\n          a.roll = o;\n          break;\n        default:\n          a.heading = o;\n      }\n  }\n  return \"proportional\" === u[0] && \"proportional\" === u[1] && \"proportional\" === u[2] || (a.size = u), a;\n}\nasync function n(t, e) {\n  if (null != t.symbol) return t.symbol;\n  const r = o(t, e);\n  return null != r ? r.getSymbolAsync(t, e) : null;\n}\nasync function l(r, i) {\n  const l = o(r, i),\n    a = await n(r, i);\n  if (!a) return null;\n  const s = {\n    renderer: l,\n    symbol: a\n  };\n  if (!l || !(\"visualVariables\" in l) || !l.visualVariables) return s;\n  const u = e(l, r, i) ?? [],\n    c = [\"proportional\", \"proportional\", \"proportional\"];\n  for (const {\n    variable: e,\n    value: o\n  } of u) if (\"color\" === e.type) s.color = t.toUnitRGBA(o);else if (\"size\" === e.type) {\n    if (\"outline\" === e.target) s.outlineSize = o;else {\n      const t = e.axis,\n        r = e.useSymbolValue ? \"symbol-value\" : o;\n      \"width\" === t ? c[0] = r : \"depth\" === t ? c[1] = r : \"height\" === t ? c[2] = r : c[0] = c[1] = \"width-and-depth\" === t ? r : c[2] = r;\n    }\n  } else \"opacity\" === e.type ? s.opacity = o : \"rotation\" === e.type && \"tilt\" === e.axis ? s.tilt = o : \"rotation\" === e.type && \"roll\" === e.axis ? s.roll = o : \"rotation\" === e.type && (s.heading = o);\n  return (isFinite(c[0]) || isFinite(c[1]) || isFinite(c[2])) && (s.size = c), s;\n}\nfunction a(t, e = 0) {\n  const o = t[e];\n  return \"number\" == typeof o && isFinite(o) ? o : null;\n}\nfunction s(t) {\n  for (let e = 0; e < 3; e++) {\n    const o = t[e];\n    if (\"number\" == typeof o) return isFinite(o) ? o : 0;\n  }\n  return 0;\n}\nexport { a as getDriverAxisSizeValue, s as getDriverAxisSizeValueAny, o as getRenderer, i as getRenderingInfo, l as getRenderingInfoAsync, n as getSymbolAsync };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ZEROS as o } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nconst r = 1.2,\n  t = o,\n  c = 4;\nexport { c as labelMarginPx, r as suspendResumeExtentOptimism, t as transparentUnit };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nfunction a(a, n, c) {\n  return a.canvas || (a.canvas = document.createElement(\"canvas\")), a.canvas.width = n, a.canvas.height = c, a.canvas;\n}\nexport { a as getTextHelperCanvas };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { getTextHelperCanvas as t } from \"./TextHelperCanvas.js\";\nfunction e(e) {\n  const {\n      size: c\n    } = e.definition,\n    a = e.fontString(c);\n  let i = n.get(a);\n  if (!i) {\n    const u = t(o, 0, 0).getContext(\"2d\");\n    e.setFontProperties(u, c);\n    const x = u.measureText(r);\n    i = new s(x.actualBoundingBoxAscent, x.actualBoundingBoxDescent), n.set(a, i);\n  }\n  return i;\n}\nconst n = new Map();\nclass s {\n  get maxHeight() {\n    return this.maxAscent + this.maxDescent;\n  }\n  constructor(t, e) {\n    this.maxAscent = t, this.maxDescent = e;\n  }\n}\nconst o = {\n    canvas: null\n  },\n  r = (() => {\n    let t = \"\";\n    for (let e = 32; e < 127; e++) t += String.fromCharCode(e);\n    return t;\n  })();\nexport { e as getFontMetrics };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { clamp as t } from \"../../../../core/mathUtils.js\";\nimport { debugFlags as e } from \"../../support/debugFlags.js\";\nimport { getFontMetrics as i } from \"./FontMetrics.js\";\nimport { getTextHelperCanvas as n } from \"./TextHelperCanvas.js\";\nconst s = 1;\nclass r {\n  constructor(t, e, i, n) {\n    this.text = t, this._alignment = e, this._parameters = i, this._maxSize = n, this._textWidths = [], this._lineWidths = [], this._renderPixelRatio = null, this._metricsCached = null, this.key = `TextRenderer-${this._parameters.key}-${this._alignment}--${t}`, this._lines = t.replaceAll(\" \", \"\").split(/\\r?\\n/);\n  }\n  get displayWidth() {\n    return Math.ceil(this._displayWidth + 2 * this._horizontalPadding);\n  }\n  get displayHeight() {\n    let t = this._metrics.firstLineAscent;\n    for (let e = 0; e < this._lines.length - 1; e++) t += this._lineSpacing;\n    return t += this._metrics.lastLineDescent, Math.ceil(t + 2 * this._haloSize + 2 * this._verticalPadding);\n  }\n  get renderedWidth() {\n    return this._toRoundedRenderUnit(this.displayWidth);\n  }\n  get renderedHeight() {\n    return this._toRoundedRenderUnit(this.displayHeight);\n  }\n  get firstRenderedBaselinePosition() {\n    return this._toRenderUnit(this._firstLineYOffset + this._metrics.firstLineAscent);\n  }\n  get _firstLineYOffset() {\n    return this._verticalPadding + this._haloSize;\n  }\n  get _metrics() {\n    if (null == this._metricsCached) {\n      const t = n(a, l, l).getContext(\"2d\"),\n        e = this._parameters.definition.pixelRatio,\n        s = this._fontSize * e;\n      this._parameters.setFontProperties(t, s);\n      let r = 2 * this._haloSize;\n      const h = this._parameters.definition.font;\n      \"italic\" !== h.style && \"oblique\" !== h.style && \"bold\" !== h.weight && \"bolder\" !== h.weight || (r += .3 * t.measureText(\"A\").width), this._textWidths.length = 0, this._lineWidths.length = 0;\n      let o = 0,\n        d = 0,\n        _ = 0,\n        g = 0,\n        m = 0;\n      this._lines.forEach((i, n) => {\n        const s = t.measureText(i),\n          h = s.width / e,\n          a = h + r;\n        this._textWidths.push(h), this._lineWidths.push(a), o = Math.max(o, a), g = Math.max(g, s.actualBoundingBoxAscent / e), m = Math.max(m, s.actualBoundingBoxDescent / e), 0 === n && (d = s.actualBoundingBoxAscent / e), n === this._lines.length - 1 && (_ = s.actualBoundingBoxDescent / e);\n      });\n      const f = i(this._parameters),\n        u = Math.max(g, f.maxAscent),\n        p = Math.max(m, f.maxDescent),\n        x = d,\n        R = \"underline\" === this._parameters.definition.font.decoration ? p : _,\n        S = o;\n      this._metricsCached = new c(x, R, u, p, S);\n    }\n    return this._metricsCached;\n  }\n  get _lineSpacing() {\n    return (this._midLineHeight + this._linePadding) * this._parameters.definition.lineSpacingFactor;\n  }\n  get _midLineHeight() {\n    return this._metrics.midLineHeight;\n  }\n  get _linePadding() {\n    return this._midLineHeight * d;\n  }\n  get _midLineAscent() {\n    return this._metrics.maxLineAscent;\n  }\n  get _renderedFontSize() {\n    return this._toRenderUnit(this._fontSize);\n  }\n  get _fontSize() {\n    return this._parameters.definition.size;\n  }\n  get _renderedHaloSize() {\n    return this._toRenderUnit(this._haloSize);\n  }\n  get _haloSize() {\n    return this._parameters.haloSize;\n  }\n  get _horizontalPadding() {\n    return this._hasBackground ? this._parameters.definition.background.padding[0] : 0;\n  }\n  get _verticalPadding() {\n    return Math.max(this._hasBackground ? this._parameters.definition.background.padding[1] : 0, s);\n  }\n  get _hasBackground() {\n    return !!this._parameters.backgroundStyle;\n  }\n  get renderPixelRatio() {\n    if (null == this._renderPixelRatio) {\n      const t = this._parameters.definition.pixelRatio;\n      this._renderPixelRatio = Math.min(t, Math.min(this._maxSize[0] / this.displayWidth, this._maxSize[1] / this.displayHeight));\n    }\n    return this._renderPixelRatio;\n  }\n  _getLineXOffset(t) {\n    switch (this._alignment) {\n      case o.Left:\n        return this._horizontalPadding;\n      case o.Center:\n        return (this.displayWidth - this._lineWidths[t]) / 2;\n      case o.Right:\n        return this.displayWidth - this._horizontalPadding - this._lineWidths[t];\n    }\n  }\n  render(t, i, n) {\n    t.save();\n    const s = i /= this.renderPixelRatio,\n      r = n /= this.renderPixelRatio,\n      h = this._haloSize,\n      o = this._firstLineYOffset + this._metrics.firstLineAscent;\n    i += h, n += o;\n    const a = this._haloSize > 0;\n    a && this._renderHalo(t, s, r, h, o), this._parameters.setFontProperties(t, this._renderedFontSize);\n    for (let e = 0; e < this._lines.length; ++e) {\n      const s = this._lines[e],\n        r = this._getLineXOffset(e);\n      a && (t.globalCompositeOperation = \"destination-out\", t.fillStyle = \"rgb(0, 0, 0)\", this._fillText(t, s, i + r, n), this._renderLineDecoration(t, i + r, n, this._textWidths[e])), t.globalCompositeOperation = \"source-over\", t.fillStyle = this._parameters.textStyle, this._fillText(t, s, i + this._getLineXOffset(e), n), this._renderLineDecoration(t, i + r, n, this._textWidths[e]), n += this._lineSpacing;\n    }\n    if (e.TEXT_SHOW_BASELINE) {\n      t.strokeStyle = _, t.setLineDash([2, 2]), t.lineWidth = 1;\n      let e = r + o;\n      for (let i = 0; i < this._lines.length; ++i) this._drawLine(t, [s, e], [s + this.displayWidth, e]), e += this._lineSpacing;\n    }\n    if (e.TEXT_SHOW_BORDER && (t.strokeStyle = _, t.setLineDash([]), t.lineWidth = 1, this._drawBox(t, [s, r], [this.displayWidth, this.displayHeight])), this._hasBackground) {\n      const e = this._parameters.definition.background.borderRadius * this.renderPixelRatio;\n      this._roundedRect(t, s, r, e), t.globalCompositeOperation = \"destination-over\", t.fillStyle = this._parameters.backgroundStyle, t.fill();\n    }\n    t.restore();\n  }\n  _renderLineDecoration(t, e, i, n, s = !1) {\n    if (\"none\" === this._parameters.definition.font.decoration || 0 === n) return;\n    const r = 1,\n      h = Math.max(this._parameters.definition.size / 16, r);\n    switch (this._parameters.definition.font.decoration) {\n      case \"underline\":\n        i += 2 * h;\n        break;\n      case \"line-through\":\n        i -= .33 * this._midLineAscent;\n    }\n    const o = s ? this._haloSize : 0;\n    t.strokeStyle = s ? this._parameters.haloStyle : this._parameters.textStyle, t.lineWidth = this._toRenderUnit(h + 2 * o), t.beginPath(), t.moveTo(this._toRenderUnit(e - o), this._toRenderUnit(i)), t.lineTo(this._toRenderUnit(e + n + o), this._toRenderUnit(i)), t.stroke();\n  }\n  _roundedRect(e, i, n, s) {\n    i = this._toRenderUnit(i), n = this._toRenderUnit(n);\n    const r = this.renderedWidth,\n      h = this.renderedHeight;\n    0 !== s ? (s = t(s, 0, Math.floor(h / 2)), e.beginPath(), e.moveTo(i, n + s), e.arcTo(i, n, i + s, n, s), e.lineTo(i + r - s, n), e.arcTo(i + r, n, i + r, n + s, s), e.lineTo(i + r, n + h - s), e.arcTo(i + r, n + h, i + r - s, n + h, s), e.lineTo(i + s, n + h), e.arcTo(i, n + h, i, n + h - s, s), e.closePath()) : e.rect(i, n, r, h);\n  }\n  _renderHalo(t, e, i, s, r) {\n    const h = this.renderedWidth,\n      o = this.renderedHeight,\n      d = n(a, Math.max(h, l), Math.max(o, l)),\n      _ = d.getContext(\"2d\");\n    _.clearRect(0, 0, h, o), this._parameters.setFontProperties(_, this._renderedFontSize), _.fillStyle = this._parameters.haloStyle, _.strokeStyle = this._parameters.haloStyle;\n    const c = this._renderedHaloSize < 3;\n    _.lineJoin = c ? \"miter\" : \"round\", c ? this._renderHaloEmulated(_, s, r) : this._renderHaloNative(_, s, r);\n    let g = r;\n    for (let n = 0; n < this._lines.length; ++n) {\n      const t = this._getLineXOffset(n);\n      this._renderLineDecoration(_, s + t, g, this._textWidths[n], !0), g += this._lineSpacing;\n    }\n    t.globalAlpha = this._parameters.definition.halo.color[3], t.drawImage(d, 0, 0, h, o, this._toRenderUnit(e), this._toRenderUnit(i), h, o), t.globalAlpha = 1;\n  }\n  _renderHaloEmulated(t, e, i) {\n    for (let n = 0; n < this._lines.length; ++n) {\n      const s = this._lines[n],\n        r = this._getLineXOffset(n);\n      for (const [n, o] of h) this._fillText(t, s, e + r + this._haloSize * n, i + this._haloSize * o);\n      i += this._lineSpacing;\n    }\n  }\n  _renderHaloNative(t, e, i) {\n    const n = 2 * this._haloSize;\n    for (let s = 0; s < this._lines.length; ++s) {\n      const r = this._lines[s],\n        h = this._getLineXOffset(s),\n        o = 5,\n        a = .1;\n      for (let s = 0; s < o; s++) {\n        const d = 1 - (o - 1) * a + s * a;\n        t.lineWidth = this._toRenderUnit(d * n), this._strokeText(t, r, e + h, i);\n      }\n      i += this._lineSpacing;\n    }\n  }\n  get _displayWidth() {\n    return this._metrics.displayWidth;\n  }\n  _toRenderUnit(t) {\n    return t * this.renderPixelRatio;\n  }\n  _toRoundedRenderUnit(t) {\n    return Math.round(t * this.renderPixelRatio);\n  }\n  _fillText(t, e, i, n) {\n    t.fillText(e, this._toRenderUnit(i), this._toRenderUnit(n));\n  }\n  _strokeText(t, e, i, n) {\n    t.strokeText(e, this._toRenderUnit(i), this._toRenderUnit(n));\n  }\n  _drawLine(t, e, i) {\n    t.beginPath(), t.moveTo(this._toRoundedRenderUnit(e[0]) + .5, this._toRoundedRenderUnit(e[1]) + .5), t.lineTo(this._toRoundedRenderUnit(i[0]) + .5, this._toRoundedRenderUnit(i[1]) + .5), t.stroke();\n  }\n  _drawBox(t, e, i) {\n    const n = this._toRenderUnit(e[0]),\n      s = this._toRenderUnit(e[1]),\n      r = this._toRenderUnit(i[0]),\n      h = this._toRenderUnit(i[1]),\n      o = Math.floor(n) + .5,\n      a = Math.ceil(n + r) - .5,\n      d = Math.floor(s) + .5,\n      l = Math.ceil(s + h) - .5;\n    t.beginPath(), t.moveTo(o, d), t.lineTo(a, d), t.lineTo(a, l), t.lineTo(o, l), t.lineTo(o, d), t.stroke();\n  }\n}\nconst h = [];\n{\n  const t = 16;\n  for (let e = 0; e < 360; e += 360 / t) h.push([Math.cos(Math.PI * e / 180), Math.sin(Math.PI * e / 180)]);\n}\nvar o;\n!function (t) {\n  t[t.Left = 0] = \"Left\", t[t.Center = 1] = \"Center\", t[t.Right = 2] = \"Right\";\n}(o || (o = {}));\nconst a = {\n    canvas: null\n  },\n  d = .2,\n  l = 512,\n  _ = \"rgb(255, 0, 255, 0.5)\";\nclass c {\n  get firstLineHeight() {\n    return this.firstLineAscent + this.maxLineDescent;\n  }\n  get midLineHeight() {\n    return this.maxLineAscent + this.maxLineDescent;\n  }\n  get lastLineHeight() {\n    return this.maxLineAscent + this.lastLineDescent;\n  }\n  constructor(t, e, i, n, s) {\n    this.firstLineAscent = t, this.lastLineDescent = e, this.maxLineAscent = i, this.maxLineDescent = n, this.displayWidth = s;\n  }\n}\nexport { o as TextRenderAlignment, r as TextRenderer, s as textVerticalPaddingPx };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { copy as t, set as e } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { fromValues as r, ZEROS as o } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { TextRenderAlignment as c, textVerticalPaddingPx as n } from \"../../webgl-engine/lib/TextRenderer.js\";\nconst i = Object.freeze({\n    left: 0,\n    center: .5,\n    right: 1\n  }),\n  s = Object.freeze({\n    \"bottom-left\": r(0, 0),\n    bottom: r(.5, 0),\n    \"bottom-right\": r(1, 0),\n    left: r(0, .5),\n    center: r(.5, .5),\n    right: r(1, .5),\n    \"top-left\": r(0, 1),\n    top: r(.5, 1),\n    \"top-right\": r(1, 1)\n  });\nfunction f(t) {\n  switch (t) {\n    case \"left\":\n      return c.Left;\n    case \"right\":\n      return c.Right;\n    default:\n      return c.Center;\n  }\n}\nfunction a(t) {\n  switch (t) {\n    case \"bottom-left\":\n    case \"left\":\n    case \"top-left\":\n      return \"left\";\n    case \"bottom\":\n    case \"center\":\n    case \"top\":\n      return \"center\";\n    case \"bottom-right\":\n    case \"right\":\n    case \"top-right\":\n      return \"right\";\n  }\n}\nfunction l(t) {\n  switch (t) {\n    case \"bottom-left\":\n    case \"bottom\":\n    case \"bottom-right\":\n      return \"bottom\";\n    case \"left\":\n    case \"center\":\n    case \"right\":\n      return \"center\";\n    case \"top-left\":\n    case \"top\":\n    case \"top-right\":\n      return \"top\";\n  }\n}\nfunction m(t, e) {\n  switch (e) {\n    case \"bottom\":\n      return \"left\" === t ? \"bottom-left\" : \"right\" === t ? \"bottom-right\" : \"bottom\";\n    case \"center\":\n      return t;\n    case \"top\":\n      return \"left\" === t ? \"top-left\" : \"right\" === t ? \"top-right\" : \"top\";\n  }\n}\nfunction u(t) {\n  return \"middle\" === t ? \"center\" : t;\n}\nfunction h(r, c) {\n  switch (r) {\n    case \"top\":\n      return e(c, 0, n);\n    case \"bottom\":\n      return e(c, 0, -n);\n    default:\n      return t(c, o);\n  }\n}\nexport { m as anchorFromPlacements, a as horizontalPlacementFromAnchor, i as horizontalPlacementToAnchorX, s as namedAnchorToHUDMaterialAnchorPos, f as textRenderAlignmentFromHorizontalPlacement, u as verticalPlacementFromAlignment, l as verticalPlacementFromAnchor, h as verticalScreenOffsetFromAlignment };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as t } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { create as e } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as s } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nclass i {\n  constructor(i, r = \"center\", c = !1, a = t(), o = s(0, 0, 0, -1), l = \"world\", f = e(), n = 0) {\n    this.verticalOffset = i, this.anchor = r, this.hasLabelVerticalOffset = c, this.screenOffset = a, this.centerOffset = o, this.centerOffsetUnits = l, this.translation = f, this.elevationOffset = n;\n  }\n}\nclass r {\n  constructor(e, s = \"center\", i = \"center\", r = null, c = t()) {\n    this.placement = e, this.horizontalPlacement = s, this.verticalPlacement = i, this.text = r, this.displaySize = c;\n  }\n}\nexport { r as LabelParameters, i as LabelPlacement };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport o from \"../../../../Color.js\";\nimport { isCachedFontFace as t, loadFont as e } from \"../../../../core/fontUtils.js\";\nimport i from \"../../../../core/Logger.js\";\nimport { pt2px as r } from \"../../../../core/screenUtils.js\";\nimport { ZEROS as n } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nclass s {\n  constructor(o) {\n    this.definition = o, this.key = JSON.stringify(o), this.haloSize = Math.round(o.halo.size), this.textStyle = a(o.color), this.haloStyle = l(o.halo.color), this.backgroundStyle = 0 !== o.background.color[3] ? a(o.background.color) : null;\n  }\n  fontString(o) {\n    const t = this.definition.font,\n      e = \"sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji\";\n    return `${t.style} ${t.weight} ${o}px ${t.family}, ${e}`;\n  }\n  setFontProperties(o, t) {\n    o.font = this.fontString(t), o.textAlign = \"left\", o.textBaseline = \"alphabetic\";\n  }\n  static async fromSymbol(l, a) {\n    const f = l?.material?.color,\n      m = o.toUnitRGBA(f) ?? n,\n      g = null != l.size ? r(l.size) : 12,\n      u = l.lineHeight,\n      d = null != l.background ? o.toUnitRGBA(l.background.color) : n,\n      h = {\n        family: l.font?.family ?? \"sans-serif\",\n        decoration: l.font?.decoration ?? \"none\",\n        weight: l.font?.weight ?? \"normal\",\n        style: l.font?.style ?? \"normal\"\n      },\n      y = l.halo,\n      b = null != y?.color && y.size > 0 ? {\n        size: r(y.size),\n        color: o.toUnitRGBA(y.color)\n      } : {\n        size: 0,\n        color: n\n      },\n      p = new s({\n        color: m,\n        size: g,\n        background: {\n          color: d,\n          padding: null != l.background ? [.65 * g, .5 * g] : [0, 0],\n          borderRadius: null != l.background ? g * (6 / 16) : 0\n        },\n        lineSpacingFactor: u,\n        font: h,\n        halo: b,\n        pixelRatio: a\n      });\n    if (l.font) {\n      let o = !1;\n      const r = p.fontString(g);\n      try {\n        o = (await document.fonts.load(r)).some(o => !t(o));\n      } catch (S) {\n        i.getLogger(\"esri.views.3d.webgl-engine.lib.TextRenderParameters\").warnOnce(`Failed to preload font '${r}'. Some text symbology may be rendered using the default browser font.`);\n      }\n      if (!o && !c.has(l.font.family)) try {\n        await e(l.font);\n      } catch (S) {}\n    }\n    return p;\n  }\n}\nfunction l(o) {\n  return `rgb(${o.slice(0, 3).map(o => Math.floor(255 * o)).toString()})`;\n}\nfunction a(o) {\n  return `rgba(${o.slice(0, 3).map(o => Math.floor(255 * o)).toString()},${o[3]})`;\n}\nconst c = new Set([\"Arial\", \"Times New Roman\", \"Courier New\", \"serif\", \"sans-serif\", \"monospace\", \"cursive\", \"fantasy\", \"system-ui\", \"ui-serif\", \"ui-sans-serif\", \"ui-monospace\", \"ui-rounded\", \"math\", \"emoji\", \"fangsong\"]);\nexport { s as TextRenderParameters };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../core/Accessor.js\";\nimport s from \"../../../../core/Evented.js\";\nimport \"../../../../core/has.js\";\nimport { disposeMaybe as i, removeMaybe as r } from \"../../../../core/maybe.js\";\nimport { generateUID as h } from \"../../../../core/uid.js\";\nimport { property as n } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/RandomLCG.js\";\nimport { subclass as a } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { s as o } from \"../../../../chunks/vec42.js\";\nimport { create as _, ZEROS as l } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { ContentObjectType as c } from \"./ContentObjectType.js\";\nimport { textTextureAtlas as d } from \"./testUtils.js\";\nimport { applyTextureResizeModulo as u } from \"./textureUtils.js\";\nimport { VertexAttribute as m } from \"./VertexAttribute.js\";\nimport { TaskPriority as g } from \"../../../support/Scheduler.js\";\nimport { Yield as p } from \"../../../support/Yield.js\";\nimport { TextureWrapMode as f, TextureSamplingMode as x } from \"../../../webgl/enums.js\";\nimport { Texture as w } from \"../../../webgl/Texture.js\";\nimport { TextureDescriptor as T } from \"../../../webgl/TextureDescriptor.js\";\nconst b = 4096;\nlet v = class extends e {\n  constructor(t) {\n    super(t), this.type = c.Texture, this.id = h(), this.events = new s(), this._glTexture = null, this._atlas = new E(256, 256), this._needsRepack = !1, this._canRepack = !0, this._elementsToRender = new Map(), this._elements = new Map(), this._stageObjects = new Map(), this.updating = !1;\n  }\n  initialize() {\n    this._canvas = document.createElement(\"canvas\"), this._canvas.setAttribute(\"id\", \"textAtlasCanvas\"), this._canvas.setAttribute(\"style\", \"display:none\"), this._ctx = this._canvas.getContext(\"2d\"), this._stage = this.view._stage, this._stage.add(this), this._updateCanvasElementSize(this._atlas), this._reset();\n  }\n  unload() {\n    this._glTexture = i(this._glTexture), this.updating = !1, this.events.emit(\"unloaded\");\n  }\n  get glTexture() {\n    return this._glTexture;\n  }\n  static get maxSize() {\n    return S = d.stableRendering ? R : 0, [b - R - S, b - R - S - A];\n  }\n  load(t) {\n    if (this._glTexture) return this._glTexture;\n    const e = new T();\n    return e.wrapMode = f.CLAMP_TO_EDGE, e.samplingMode = x.LINEAR_MIPMAP_LINEAR, e.hasMipmap = !0, e.preMultiplyAlpha = !0, e.maxAnisotropy = t.parameters.maxMaxAnisotropy, this._glTexture = new w(t, e, this._canvas), this._frameWorker = this.view.resourceController.scheduler.registerTask(g.TEXT_TEXTURE_ATLAS, this), this.setDirty(), this._glTexture;\n  }\n  dispose() {\n    this._elements.clear(), this._elementsToRender.clear(), this._frameWorker = r(this._frameWorker), this._glTexture && (this._stage.remove(this), this._glTexture = i(this._glTexture)), this._canvas.width = 0, this._canvas.height = 0, this._canvas = null, this._ctx = null;\n  }\n  _updateCanvasElementSize(t) {\n    this._canvas.setAttribute(\"width\", t.width.toString()), this._canvas.setAttribute(\"height\", t.height.toString());\n  }\n  _resizeAtlas(t, e) {\n    const {\n      width: s,\n      height: i\n    } = this._atlas;\n    s === t && i === e || (this._atlas.width = t, this._atlas.height = e, this._glTexture?.resize(t, e), this._glTexture?.updateData(0, 0, 0, s, i, this._canvas), this._updateCanvasElementSize(this._atlas), this._elements.forEach(t => {\n      const e = this._stageObjects.get(t.textRenderer.key);\n      e?.forEach(e => y(e, t));\n    }), this._reset());\n  }\n  _reset() {\n    this._elementsToRender.clear(), this._atlas.reset(), this._needsRepack = !0, this.setDirty();\n  }\n  _addAtlasElement(t, e, s, i) {\n    const r = this._atlas;\n    if (r.width < s || r.height < i) return !1;\n    let h = r.cursors.get(i);\n    if (!h) {\n      if (r.height < r.nextY + i) return !1;\n      h = [new k(r.nextY)], r.cursors.set(i, h), r.nextY += i;\n    }\n    let n = h.find(t => r.width >= t.x + s);\n    if (null == n) {\n      if (r.height < r.nextY + i) return !1;\n      n = new k(r.nextY), r.nextY += i, h.push(n);\n    }\n    return t.setNewPosition(n), this._elements.set(e, t), this._elementsToRender.set(e, t), n.x += s, !0;\n  }\n  _ensureStageObjects(t) {\n    const e = this._stageObjects.get(t);\n    if (e) return e;\n    const s = new Set();\n    return this._stageObjects.set(t, s), s;\n  }\n  _addStageObject(t, e) {\n    this._ensureStageObjects(t).add(e);\n  }\n  _removeStageObject(t, e) {\n    const s = this._stageObjects.get(t);\n    s?.delete(e) && (e.geometries[0].setAttributeData(m.SIZE, [0, 0]), e.geometryVertexAttributeUpdated(e.geometries[0], m.SIZE), this._elementsToRender.delete(t));\n  }\n  _processAddition(t) {\n    const e = t.textRenderer.key;\n    if (this._needsRepack) return void this._elements.set(e, t);\n    const s = this._atlas,\n      i = t.textRenderer.renderedWidth,\n      r = t.textRenderer.renderedHeight,\n      h = i + R,\n      n = r + R + A;\n    if (!this._addAtlasElement(t, e, h, n)) {\n      if (this._canRepack) this._reset();else if (s.width < h) {\n        const t = Math.min(u(Math.max(h, 1.5 * s.width)), b);\n        this._resizeAtlas(t, s.height);\n      } else {\n        const t = s.nextY + n,\n          e = Math.min(u(Math.max(t, 1.5 * s.height)), b);\n        if (e > s.height) this._resizeAtlas(s.width, e);else if (s.width < b) {\n          const t = Math.min(u(1.5 * s.width), b);\n          this._resizeAtlas(t, s.height);\n        }\n      }\n      this._elements.set(e, t);\n    }\n  }\n  _renderElement(t) {\n    const e = t.commitNewPosition(),\n      s = t.textRenderer;\n    this._ctx.clearRect(e[0] - R, e[1] - R, s.renderedWidth + 2 * R, s.renderedHeight + 2 * R), s.render(this._ctx, e[0], e[1]);\n    const i = this._stageObjects.get(s.key);\n    i?.forEach(e => y(e, t));\n  }\n  get running() {\n    return this.updating;\n  }\n  runTask(t) {\n    if (null == this._glTexture) return p;\n    for (; this._needsRepack && (this._canRepack || this._atlas.height < b && this._atlas.height < b);) {\n      this._canRepack = this._needsRepack = !1;\n      const e = this._elements;\n      this._elements = new Map(), e.forEach(t => this._processAddition(t)), t.madeProgress();\n    }\n    if (this._elementsToRender.size > 0) {\n      for (const [e, s] of this._elementsToRender) {\n        if (t.done) break;\n        this._renderElement(s), this._elementsToRender.delete(e), t.madeProgress();\n      }\n      this._glTexture.setData(this._canvas);\n    }\n    this.updating = this._elementsToRender.size > 0;\n  }\n  addTextTexture(t, e) {\n    const s = t.key;\n    this._addStageObject(s, e);\n    let i = this._elements.get(s);\n    null == i && (i = new O(this._atlas, t), this._processAddition(i), this.setDirty()), j(e, i), y(e, i);\n  }\n  removeTextTexture(t, e) {\n    const s = t.key;\n    if (!this._elements.get(s)) return;\n    this._removeStageObject(s, e);\n    const i = this._stageObjects.get(s);\n    i && 0 !== i.size || this._elements.delete(s), 0 === i?.size && this._stageObjects.delete(s), this._canRepack = !0;\n  }\n  setDirty() {\n    this._glTexture && (this.updating = !0);\n  }\n  get test() {}\n};\nfunction j(t, e) {\n  t.geometries[0].setAttributeData(m.SIZE, [e.textRenderer.displayWidth, e.textRenderer.displayHeight]), t.geometryVertexAttributeUpdated(t.geometries[0], m.SIZE);\n}\nfunction y(t, e) {\n  t.geometries[0].setAttributeData(m.UV0, e.uv), t.geometryVertexAttributeUpdated(t.geometries[0], m.UV0, !0);\n}\nt([n({\n  constructOnly: !0\n})], v.prototype, \"view\", void 0), t([n({\n  type: Boolean\n})], v.prototype, \"updating\", void 0), v = t([a(\"esri.views.3d.webgl-engine.lib.TextTextureAtlas\")], v);\nconst R = 2,\n  A = 2;\nclass O {\n  constructor(t, e) {\n    this._atlas = t, this.textRenderer = e, this._uv = _(), this._newPosition = [0, 0];\n  }\n  get uv() {\n    if (null == this._xOffset || null == this._yOffset) return l;\n    const {\n      renderedWidth: t,\n      renderedHeight: e\n    } = this.textRenderer;\n    return o(this._uv, this._xOffset / this._atlas.width, (this._yOffset + e) / this._atlas.height, (this._xOffset + t) / this._atlas.width, this._yOffset / this._atlas.height);\n  }\n  setNewPosition(t) {\n    this._newPosition[0] = t.x, this._newPosition[1] = t.y;\n  }\n  commitNewPosition() {\n    return this._xOffset = this._newPosition[0], this._yOffset = this._newPosition[1], this._newPosition;\n  }\n  get xOffset() {\n    return this._xOffset;\n  }\n  get yOffset() {\n    return this._yOffset;\n  }\n}\nclass E {\n  constructor(t, e) {\n    this.width = t, this.height = e, this.cursors = new Map(), this.nextY = 0;\n  }\n  reset() {\n    this.cursors.clear(), this.nextY = S;\n  }\n}\nclass k {\n  constructor(t) {\n    this.y = t, this.x = S;\n  }\n}\nlet S = 0;\nexport { v as TextTextureAtlas };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass e {\n  constructor(e, s) {\n    this.scheduler = e, this.schedule = s, this.sharedResources = null, this.streamDataRequester = null, this.elevationProvider = null, this.renderer = null, this.stage = null, this.clippingExtent = null, this.renderCoordsHelper = null, this.overlaySR = null, this.layer = null, this.drapeSourceRenderer = null, this.graphicsCoreOwner = null, this.localOriginFactory = null, this.featureExpressionInfoContext = null, this.screenSizePerspectiveEnabled = !0, this.slicePlaneEnabled = !1, this.physicalBasedRenderingEnabled = !1, this.skipHighSymbolLods = !1, this.isAsync = !1;\n  }\n}\nclass s {\n  constructor() {\n    this.renderPriority = 0, this.renderPriorityStep = 1, this.ignoreDrivers = !1;\n  }\n}\nexport { e as Graphics3DSymbolCreationContext, s as Graphics3DSymbolLayerCreationContext };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { emptyArray as e } from \"../../../../core/arrayUtils.js\";\nimport { forEach as t } from \"../../../../core/asyncUtils.js\";\nimport { estimateAttributesObjectSize as i } from \"../../../../core/byteSizeEstimations.js\";\nimport \"../../../../core/has.js\";\nimport r from \"../../../../core/ObjectPool.js\";\nimport { scale as s } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as a } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { j as o } from \"../../../../chunks/vec32.js\";\nimport { create as l } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport n from \"../../../../geometry/Polygon.js\";\nimport { projectBoundingRect as h } from \"../../../../geometry/projection/projectBoundingRect.js\";\nimport { set as c, zero as p, empty as y, expandWithAABB as m, allFinite as u, toRect as d } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { create as b, allFinite as g } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { equals as f } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport { computeAABR as _ } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport { convertFromGeometry as L } from \"../../../../layers/graphics/featureConversionUtils.js\";\nimport { VisibilityFlag as E, VisibilityGroup as G } from \"./enums.js\";\nimport { createFeature as j } from \"./featureExpressionInfoUtils.js\";\nconst x = new r(Array, e => c(e, p), null, 10, 5),\n  v = b();\nclass A {\n  get labelLayers() {\n    return this._labelLayers || e;\n  }\n  get extent() {\n    return this._extent;\n  }\n  get isElevationSource() {\n    return this.layers.some(e => e?.isElevationSource);\n  }\n  constructor(e, t, i, r, s) {\n    this.graphic = e, this.graphics3DSymbol = t, this.layers = i, this._visibleFlags = E.ALL_LABEL, this.deconflictionPriority = 0, ++t.referenced, this._featureExpressionFeature = s ? j(s, e, r) : null;\n  }\n  initialize(e) {\n    this._layer = e, this._forEachSymbolLayerGraphic(t => {\n      t.initialize(e), t.setVisibility(this.isVisible());\n    });\n  }\n  destroy() {\n    this._forEachSymbolLayerGraphic(e => e.destroy()), this._calloutLayer = null, --this.graphics3DSymbol.referenced, this.graphics3DSymbol = null;\n  }\n  get destroyed() {\n    return null == this.layers;\n  }\n  clearLabelGraphics() {\n    this._forEachLabelGraphic(e => e.destroy()), this._labelLayers = null;\n  }\n  addLabelGraphic(e, t) {\n    this._labelLayers || (this._labelLayers = new Array()), this._labelLayers.push(e), e.initialize(t), e.setVisibility(this.isVisible(G.LABEL));\n  }\n  setCalloutGraphic(e) {\n    this._calloutLayer = e, this._layer && (e.initialize(this._layer), e.setVisibility(this.isVisible()));\n  }\n  get calloutLayer() {\n    return this._calloutLayer;\n  }\n  get isDraped() {\n    let e = !1;\n    return this._forEachSymbolLayerGraphic(t => {\n      \"draped\" === t.type && (e = !0);\n    }), e;\n  }\n  isVisible(e = G.GRAPHIC, t) {\n    const i = t ? this._visibleFlags | t | G.LABEL * t : this._visibleFlags;\n    return e === G.GRAPHIC ? (i & E.ALL_GRAPHIC) === E.ALL_GRAPHIC : (i & E.ALL_LABEL) === E.ALL_LABEL;\n  }\n  setVisibilityFlag(e, t, i) {\n    const r = this.isVisible(e);\n    i ? this._visibleFlags |= e * t : this._visibleFlags &= ~(e * t);\n    const s = this.isVisible(e);\n    if (r === s) return !1;\n    if (e === G.LABEL) this._forEachLabelGraphic(e => e.setVisibility(s));else {\n      this._forEachSymbolLayerGraphic(e => e.setVisibility(s));\n      const e = this.isVisible(G.LABEL);\n      this._forEachLabelGraphic(t => t.setVisibility(e));\n    }\n    return !0;\n  }\n  getVisibilityFlag(e, t) {\n    return !!(this._visibleFlags & e * t);\n  }\n  computeExtent(e) {\n    if (!this._extent) {\n      const t = this.graphic.geometry;\n      if (null == t) return !1;\n      this._extent = b(), _(t, this._extent);\n      const i = t.spatialReference;\n      if (!f(i, e) && !h(this._extent, i, this._extent, e)) return this._extent = null, !1;\n    }\n    return !0;\n  }\n  getAsOptimizedGeometry(e, t) {\n    return this._optimizedGeometry || (this._optimizedGeometry = this._convertGraphicToOptimizedGeometry(this.graphic, e, t)), this._optimizedGeometry;\n  }\n  _convertGraphicToOptimizedGeometry(e, t, i) {\n    let r = e.geometry;\n    return \"mesh\" !== r.type && \"extent\" !== r.type || (r = n.fromExtent(\"mesh\" === r.type ? r.extent : r)), L(r, t, i);\n  }\n  get usedMemory() {\n    let e = i(this.graphic.attributes);\n    return this._forEachSymbolLayerGraphic(t => e += t.graphics3DSymbolLayer.usedMemory), e;\n  }\n  computeAttachmentOrigin() {\n    const e = {\n      render: {\n        origin: l(),\n        num: 0\n      },\n      draped: {\n        origin: a(),\n        num: 0\n      }\n    };\n    for (const t of this.layers) null != t && t.computeAttachmentOrigin(e);\n    return e.render.num > 1 && o(e.render.origin, e.render.origin, 1 / e.render.num), e.draped.num > 1 && s(e.draped.origin, e.draped.origin, 1 / e.draped.num), e;\n  }\n  async getProjectedBoundingBox(e, i, r, s, a) {\n    return a || (a = {\n      boundingBox: null,\n      requiresDrapedElevation: !1,\n      screenSpaceObjects: []\n    }), a.boundingBox ? y(a.boundingBox) : a.boundingBox = y(), a.requiresDrapedElevation = !1, await t(this.layers, async t => {\n      if (null == t) return;\n      const o = \"draped\" === t.type ? i : e,\n        l = x.acquire(),\n        n = await t.getProjectedBoundingBox(o, r, a.screenSpaceObjects, s, l);\n      isFinite(n[2]) && isFinite(n[5]) || (a.requiresDrapedElevation = !0), n && m(a.boundingBox, l), x.release(l);\n    }), u(a.boundingBox) || g(d(a.boundingBox, v)) ? a : null;\n  }\n  needsElevationUpdates() {\n    for (const e of this.layers) if (null != e && (\"object3d\" === e.type || \"lod-instance\" === e.type) && e.needsElevationUpdates) return !0;\n    return this._labelLayers?.some(e => e?.needsElevationUpdates ?? !1) ?? !1;\n  }\n  alignWithElevation(e, t, i) {\n    this._forEachRenderedGraphic(r => {\n      \"object3d\" !== r.type && \"lod-instance\" !== r.type || r.alignWithElevation(e, t, this._featureExpressionFeature, i);\n    });\n  }\n  alignWithAbsoluteElevation(e, t, i) {\n    this._forEachRenderedGraphic(r => {\n      \"object3d\" === r.type && r.alignWithAbsoluteElevation(e, t, i);\n    });\n  }\n  addObjectStateSet(e, t) {\n    this._forEachSymbolLayerGraphic(i => i.addObjectState(e, t));\n  }\n  removeObjectState(e) {\n    this._forEachSymbolLayerGraphic(t => t.removeObjectState(e));\n  }\n  _forEachGraphicList(e, t) {\n    e?.forEach(e => e && t(e));\n  }\n  _forEachSymbolLayerGraphic(e) {\n    this._forEachGraphicList(this.layers, e), this._calloutLayer && e(this._calloutLayer);\n  }\n  _forEachLabelGraphic(e) {\n    this._forEachGraphicList(this._labelLayers, e);\n  }\n  _forEachRenderedGraphic(e) {\n    this._forEachSymbolLayerGraphic(e), this._forEachLabelGraphic(e);\n  }\n  get test() {}\n}\nexport { A as Graphics3DGraphic };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../geometry.js\";\nimport { e as t } from \"../../../../chunks/earcut.js\";\nimport { Axis as e } from \"../../../../geometry/support/Axis.js\";\nimport { getZeroIndexArray as r } from \"../../../../geometry/support/Indices.js\";\nimport { leastSignificantAxis as i } from \"../../../../geometry/support/polygonUtils.js\";\nimport { Attribute as o } from \"../../webgl-engine/lib/Attribute.js\";\nimport { ContentObjectType as n } from \"../../webgl-engine/lib/ContentObjectType.js\";\nimport { Geometry as a } from \"../../webgl-engine/lib/Geometry.js\";\nimport { VertexAttribute as s } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport u from \"../../../../geometry/Extent.js\";\nimport c from \"../../../../geometry/Polygon.js\";\nfunction p(r, o, n) {\n  const a = (o.length > 0 ? o[0] : r.length / 3) - 1,\n    s = i(r, a, n);\n  if (s !== e.Z) {\n    r = r.slice();\n    for (let t = 0; t < r.length; t += 3) r[t + s] = r[t + 2];\n  }\n  return t(r, o, 3);\n}\nfunction m(t) {\n  const e = [[s.POSITION, new o(t.attributeData.position, t.indices, 3, !0)]],\n    i = r(t.indices.length);\n  return null != t.attributeData.colorFeature ? e.push([s.COLORFEATUREATTRIBUTE, new o([t.attributeData.colorFeature], i, 1, !0)]) : t.attributeData.color && e.push([s.COLOR, new o(t.attributeData.color, i, 4, !0)]), t.attributeData.uvMapSpace && e.push([s.UVMAPSPACE, new o(t.attributeData.uvMapSpace, t.indices, 4, !0)]), t.attributeData.boundingRect && e.push([s.BOUNDINGRECT, new o(t.attributeData.boundingRect, t.indices, 9, !0)]), new a(t.material, e, t.mapPositions, n.Mesh, t.attributeData.objectAndLayerIdColor);\n}\nfunction l(t, e = null) {\n  const r = [[s.POSITION, new o(t.attributeData.position, t.indices, 3, !0)], [s.UV0, new o(t.attributeData.uv0, t.indices, 2, !0)]];\n  return new a(t.material, r, t.mapPositions, n.Mesh, e);\n}\nfunction b(t) {\n  switch (t.type) {\n    case \"extent\":\n      if (t instanceof u) return c.fromExtent(t);\n      break;\n    case \"polygon\":\n      return t;\n  }\n  return null;\n}\nclass g {\n  constructor(t, e, r) {\n    this.renderData = t, this.layerUid = e, this.graphicUid = r, this.outGeometries = new Array();\n  }\n}\nexport { g as PolygonCreationDataBase, m as createColorGeometry, p as createIndices3D, l as createWaterGeometry, b as geometryAsPolygon };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { projectBuffer as o } from \"../../../../geometry/projection/projectBuffer.js\";\nimport { newDoubleArray as t, doubleSubArray as n } from \"../../../../geometry/support/DoubleArray.js\";\nimport { ringsToTriangulationInfo as s, CounterClockwiseMode as i } from \"../../../../geometry/support/triangulationUtils.js\";\nimport { applyPerVertexElevationAlignment as e } from \"../../layers/graphics/elevationAlignmentUtils.js\";\nimport { drapedZ as r } from \"../../terrain/OverlayRenderer.js\";\nfunction p(o, n, r, p) {\n  const c = s(o.rings, !!o.hasZ && \"on-the-ground\" !== p.mode, i.CCW_IS_HOLE, o.spatialReference),\n    h = t(c.position.length),\n    a = e(c.position, o.spatialReference, 0, h, 0, c.position, 0, c.position.length / 3, n, r, p),\n    g = null != a;\n  return new f(c.position, h, u(c.polygons, c.position, h), l(c.outlines, c.position, h), g, a);\n}\nfunction c(t, n) {\n  const e = s(t.rings, !1, i.CCW_IS_HOLE),\n    p = o(e.position, t.spatialReference, 0, e.position, n, 0, e.position.length / 3);\n  for (let o = 2; o < e.position.length; o += 3) e.position[o] = r;\n  return {\n    position: e.position,\n    polygons: u(e.polygons, e.position),\n    outlines: l(e.outlines, e.position),\n    projectionSuccess: p\n  };\n}\nfunction l(o, t, s = null) {\n  return o.filter(({\n    count: o\n  }) => o > 1).map(({\n    index: o,\n    count: i\n  }) => {\n    const e = 3 * o,\n      r = 3 * i;\n    return null != s ? new a(o, i, n(t, e, r), n(s, e, r)) : new h(o, i, n(t, e, r));\n  });\n}\nfunction u(o, t, s = null) {\n  const i = new Array();\n  for (const {\n    index: e,\n    count: r,\n    holeIndices: p,\n    pathLengths: c\n  } of o) {\n    if (r <= 1) continue;\n    const o = 3 * e,\n      l = 3 * r,\n      u = p.map(o => o - e),\n      h = null != s ? new g(e, r, n(t, 3 * e, 3 * r), n(s, o, l), u, c) : new m(e, r, n(t, 3 * e, 3 * r), u, c);\n    i.push(h);\n  }\n  return i;\n}\nclass h {\n  constructor(o, t, n) {\n    this.index = o, this.count = t, this.position = n;\n  }\n}\nclass a extends h {\n  constructor(o, t, n, s) {\n    super(o, t, n), this.mapPositions = s;\n  }\n}\nclass g extends a {\n  constructor(o, t, n, s, i, e) {\n    super(o, t, n, s), this.holeIndices = i, this.pathLengths = e;\n  }\n}\nclass m extends h {\n  constructor(o, t, n, s, i) {\n    super(o, t, n), this.holeIndices = s, this.pathLengths = i;\n  }\n}\nclass f {\n  constructor(o, t, n, s, i, e) {\n    this.position = o, this.mapPositions = t, this.polygons = n, this.outlines = s, this.projectionSuccess = i, this.sampledElevation = e;\n  }\n}\nexport { f as PolygonRenderInfo, g as PolygonVertexData, m as PolygonVertexDataDraped, p as geometryToRenderInfo, c as geometryToRenderInfoDraped };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport t from \"../../../../core/Error.js\";\nimport { clone as e } from \"../../../../core/lang.js\";\nimport { getMetersPerVerticalUnitForSR as r } from \"../../../../core/unitUtils.js\";\nimport { e as s } from \"../../../../chunks/earcut.js\";\nimport { normalFromMat4 as o } from \"../../../../core/libs/gl-matrix-2/math/mat3.js\";\nimport { create as n } from \"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";\nimport { invert as i, invertOrIdentity as a } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as l } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { c, n as m, s as p, f as h, b as g, h as d, z as u } from \"../../../../chunks/vec32.js\";\nimport { fromArray as f, create as y } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { computeTranslationToOriginAndRotation as b } from \"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";\nimport { create as _, empty as x, expandWithBuffer as S, intersectsClippingArea as j } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { newDoubleArray as P } from \"../../../../geometry/support/DoubleArray.js\";\nimport { newIndexArray as E, getZeroIndexArray as M } from \"../../../../geometry/support/Indices.js\";\nimport { a as O } from \"../../../../chunks/vec3.js\";\nimport { makeVertexCandidate as w, makeEdgeCandidate as C } from \"../../../../layers/graphics/data/SnappingCandidate.js\";\nimport { getDriverAxisSizeValue as I } from \"../../../../renderers/support/renderingInfoUtils.js\";\nimport { ViewingMode as v } from \"../../../ViewingMode.js\";\nimport { needsElevationUpdates3D as A, SampleElevationInfo as L } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DObject3DGraphicLayer as z } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as B } from \"./Graphics3DSymbolLayer.js\";\nimport { validateSymbolLayerSize as D, computeCentroid as R } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as T } from \"./interfaces.js\";\nimport { geometryAsPolygon as G } from \"./polygonUtils.js\";\nimport { createMaterial as U } from \"../support/edgeUtils.js\";\nimport { debugFlags as N } from \"../../support/debugFlags.js\";\nimport { SamplePosition as V } from \"../../support/ElevationProvider.js\";\nimport { geometryToRenderInfo as F } from \"../../support/renderInfoUtils/polygon.js\";\nimport { NormalType as k } from \"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";\nimport { Attribute as H } from \"../../webgl-engine/lib/Attribute.js\";\nimport { CullFaceOptions as W } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { ContentObjectType as q } from \"../../webgl-engine/lib/ContentObjectType.js\";\nimport { Geometry as Z } from \"../../webgl-engine/lib/Geometry.js\";\nimport { isGeometryWithMapPositions as J } from \"../../webgl-engine/lib/GeometryWithMapPositions.js\";\nimport { compressNormals as K, compressNormal as Q } from \"../../webgl-engine/lib/Normals.js\";\nimport { Object3D as X } from \"../../webgl-engine/lib/Object3D.js\";\nimport { VertexAttribute as Y } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { DefaultMaterial as $ } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nconst tt = [\"polygon\", \"extent\"];\nclass et extends B {\n  constructor(t, e, r, s) {\n    super(t, e, r, s), this.ensureDrapedStatus(!1);\n  }\n  async doLoad() {\n    if (!this._drivenProperties.size) {\n      const e = D(this._getSymbolSize());\n      if (e) throw new t(\"graphics3dextrudesymbollayer:invalid-size\", e);\n    }\n    const e = this.symbolLayer?.material?.color,\n      r = this._getCombinedOpacityAndColor(e),\n      s = f(r),\n      o = r[3],\n      n = o < 1 || this.needsDrivenTransparentPass,\n      i = {\n        usePBR: this._context.physicalBasedRenderingEnabled,\n        isSchematic: !0,\n        diffuse: s,\n        ambient: s,\n        opacity: o,\n        transparent: n,\n        cullFace: n ? W.None : W.Back,\n        hasVertexColors: !0,\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        castShadows: this.symbolLayer.castShadows,\n        offsetTransparentBackfaces: !0,\n        normalType: k.Compressed\n      };\n    this._materials[wt.Main] = new $(i), this._materials[wt.Bottom] = new $({\n      ...i,\n      cullFace: W.Back\n    }), this._context.stage.addMany(this._materials);\n  }\n  destroy() {\n    super.destroy(), this._context.stage.removeMany(this._materials), this._materials.length = 0;\n  }\n  createGraphics3DGraphic(t) {\n    const e = t.graphic;\n    if (!this._validateGeometry(e.geometry, tt, this.symbolLayer.type)) return null;\n    const r = this._getVertexOpacityAndColor(t.renderingInfo, 255),\n      s = this.setGraphicElevationContext(e);\n    return this._createAs3DShape(e, t.renderingInfo, r, s, e.uid);\n  }\n  layerOpacityChanged(t, e) {\n    const r = this.symbolLayer?.material?.color,\n      s = this._getCombinedOpacity(r),\n      o = s < 1 || this.needsDrivenTransparentPass;\n    this._materials[wt.Main]?.setParameters({\n      opacity: s,\n      transparent: o\n    }), this._materials[wt.Bottom]?.setParameters({\n      opacity: s,\n      transparent: o\n    });\n    const n = this._getLayerOpacity();\n    t.forEach(t => {\n      const r = e(t);\n      null != r && r.layerOpacityChanged(n, this._context.isAsync);\n    });\n  }\n  layerElevationInfoChanged(t, e) {\n    return this.updateGraphics3DGraphicElevationInfo(t, e, A);\n  }\n  slicePlaneEnabledChanged(t, e) {\n    return this._materials[wt.Main]?.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), this._materials[wt.Bottom]?.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), t.forEach(t => {\n      const r = e(t);\n      null != r && r.slicePlaneEnabledChanged(this._context.slicePlaneEnabled, this._context.isAsync);\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    const t = {\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    };\n    return this._materials[wt.Main]?.setParameters(t), this._materials[wt.Bottom]?.setParameters(t), !0;\n  }\n  _getExtrusionSize(t) {\n    let e;\n    return e = t.size && this._drivenProperties.size ? I(t.size, 2) ?? 0 : this._getSymbolSize(), e /= this._context.renderCoordsHelper.unitInMeters, e;\n  }\n  applyRendererDiff(t, e) {\n    return this._drivenPropertiesChanged(e) ? T.RecreateSymbol : T.RecreateGraphics;\n  }\n  async queryForSnapping(t, s, o, n) {\n    const i = this._getExtrusionSize(o) * this._context.renderCoordsHelper.unitInMeters / r(s),\n      {\n        objectId: a,\n        target: l\n      } = t,\n      c = e(l);\n    switch (c.z = (c.z ?? 0) + i, t.type) {\n      case \"edge\":\n        {\n          const {\n              start: r,\n              end: s\n            } = t,\n            o = e(r),\n            n = e(s);\n          return o.z = (o.z ?? 0) + i, n.z = (n.z ?? 0) + i, [C(a, c, 1 / 0, o, n)];\n        }\n      case \"vertex\":\n        return [w(a, c, 1 / 0), C(a, l, 1 / 0, l, c)];\n      default:\n        return [];\n    }\n  }\n  _getSymbolSize() {\n    return this.symbolLayer.size ?? 1;\n  }\n  _createAs3DShape(t, e, r, a, c) {\n    const m = G(t.geometry);\n    if (null == m) return null;\n    if (0 === m.rings.length || !m.rings.some(t => t.length > 0)) return this._logGeometryValidationWarnings(m.rings, \"rings\", \"ExtrudeSymbol3DLayer\"), null;\n    const p = F(m, this._context.elevationProvider, this._context.renderCoordsHelper, a);\n    this._logGeometryCreationWarnings(p, m.rings, \"rings\", \"ExtrudeSymbol3DLayer\");\n    const h = R(m);\n    if (null == h) return null;\n    const g = new Array(),\n      d = new Array(),\n      u = _(),\n      f = l(),\n      M = y(),\n      w = this._context.renderCoordsHelper.viewingMode === v.Global;\n    w || this._context.renderCoordsHelper.worldUpAtPosition(null, M), b(m.spatialReference, [h.x, h.y, 0], f, this._context.renderCoordsHelper.spatialReference);\n    const C = l();\n    i(C, f);\n    const I = n();\n    o(I, C);\n    const {\n        polygons: L,\n        mapPositions: B,\n        position: D\n      } = p,\n      T = new Map(),\n      N = this._materials[wt.Main];\n    for (const o of L) {\n      const t = o.count;\n      if (this._context.clippingExtent && (x(u), S(u, o.mapPositions), !j(u, this._context.clippingExtent))) continue;\n      const n = s(o.mapPositions, o.holeIndices, 3);\n      if (0 === n.length) continue;\n      const i = n.length,\n        a = 6 * t,\n        l = E(a + i),\n        m = E(i),\n        p = P(3 * a),\n        h = P(3 * a),\n        y = P(3 * a),\n        b = P(a);\n      st(D, B, n, o, p, y, h, b, l, m, this._getExtrusionSize(e), M, w), O(p, p, C);\n      const _ = this._context.stage.renderView.getObjectAndLayerIdColor({\n          graphicUid: c,\n          layerUid: this._context.layer.uid\n        }),\n        I = new Ct(p, y, K(h), b),\n        v = rt(N, l, l.length - m.length, I, r, _),\n        A = t,\n        L = t,\n        z = 2 * o.count,\n        R = new It(A, L, z, i / 3);\n      ft(v, R, f), T.set(v, R), g.push(v, rt(this._materials[wt.Bottom], m, 0, I, r, _)), d.push(I.heights);\n    }\n    if (0 === g.length) return null;\n    const V = new X({\n      geometries: g,\n      layerUid: this._context.layer.uid,\n      graphicUid: c,\n      isElevationSource: !0\n    });\n    V.transformation = f;\n    const k = U(this.symbolLayer, {\n        opacity: this._getLayerOpacity()\n      }),\n      H = null != k ? {\n        baseMaterial: this._materials[wt.Main],\n        edgeMaterials: [k],\n        properties: {\n          mergeGeometries: !0,\n          hasSlicePlane: this._context.slicePlaneEnabled\n        }\n      } : null,\n      W = new z(this, V, g, null, null, (t, e, r, s, o) => ut(t, e, r, s, o, d, T), a, H);\n    return W.alignedSampledElevation = p.sampledElevation, W.needsElevationUpdates = A(a.mode), W;\n  }\n}\nfunction rt(t, e, r, s, o, n) {\n  const i = M(e.length),\n    a = [[Y.POSITION, new H(s.positions, e, 3, !0)], [Y.NORMALCOMPRESSED, new H(s.normals, e, 2, !0)], [Y.COLOR, new H(o, i, 4, !0)]];\n  return new Z(t, a, s.elevation, q.Mesh, n, r);\n}\nfunction st(t, e, r, s, o, n, i, a, l, c, m, p, h) {\n  {\n    const g = r.length / 3,\n      d = 2 * s.count;\n    ot(t, e, s.index, s.count, r, 0, g, o, n, i, a, l, c, d, m, p, h);\n  }\n  {\n    let t = 0,\n      e = 2 * s.count,\n      r = 0;\n    const c = s.pathLengths[0];\n    at(o, n, a, i, t, c, s.count, e, l, r, m), e += 4 * c, r += 2 * c, t += c;\n    for (let p = 1; p < s.pathLengths.length; ++p) {\n      const c = s.pathLengths[p];\n      at(o, n, a, i, t, c, s.count, e, l, r, m), e += 4 * c, r += 2 * c, t += c;\n    }\n  }\n}\nfunction ot(t, e, r, s, o, n, i, a, l, p, h, g, d, u, f, y, b) {\n  c(bt, y);\n  {\n    const o = f > 0 ? 1 : -1;\n    let n = 3 * r,\n      i = 0,\n      c = 3 * i,\n      g = s,\n      d = 3 * g;\n    for (let r = 0; r < s; ++r) {\n      const r = t[n],\n        s = t[n + 1],\n        u = t[n + 2];\n      b && (bt[0] = r, bt[1] = s, bt[2] = u, m(bt, bt)), a[c + 0] = r, a[c + 1] = s, a[c + 2] = u;\n      const y = e[n + 0],\n        _ = e[n + 1],\n        x = e[n + 2];\n      l[c + 0] = y, l[c + 1] = _, l[c + 2] = x, p[c + 0] = -o * bt[0], p[c + 1] = -o * bt[1], p[c + 2] = -o * bt[2], h[i] = 0, a[d + 0] = r + f * bt[0], a[d + 1] = s + f * bt[1], a[d + 2] = u + f * bt[2], l[d + 0] = y, l[d + 1] = _, l[d + 2] = x, h[g] = f, c += 3, d += 3, n += 3, i += 1, g += 1;\n    }\n  }\n  {\n    let t = 3 * n,\n      e = 0,\n      r = 3 * u;\n    const a = f < 0 ? St : xt,\n      l = f < 0 ? xt : St;\n    for (let n = 0; n < i; ++n) d[e] = o[t + a[0]], d[e + 1] = o[t + a[1]], d[e + 2] = o[t + a[2]], g[r] = o[t + l[0]] + s, g[r + 1] = o[t + l[1]] + s, g[r + 2] = o[t + l[2]] + s, e += 3, r += 3, t += 3;\n  }\n}\nfunction nt(t, e, r, s, o, n, i) {\n  s[n] = s[i], i *= 3, t[n *= 3] = t[i], t[n + 1] = t[i + 1], t[n + 2] = t[i + 2], e[n] = e[i], e[n + 1] = e[i + 1], e[n + 2] = e[i + 2], r[n] = o[0], r[n + 1] = o[1], r[n + 2] = o[2];\n}\nconst it = y();\nfunction at(t, e, r, s, o, n, i, a, l, c, m) {\n  let p = o,\n    h = o + 1,\n    g = o + i,\n    d = o + i + 1,\n    u = a,\n    f = a + 1,\n    y = a + 2 * n,\n    b = a + 2 * n + 1;\n  m < 0 && (p = o + i + 1, d = o);\n  let _ = 3 * c;\n  for (let x = 0; x < n; ++x) x === n - 1 && (h = o, m > 0 ? d = o + i : p = o + i), gt(t, p, h, g, it), nt(t, e, s, r, it, u, p), nt(t, e, s, r, it, f, h), nt(t, e, s, r, it, y, g), nt(t, e, s, r, it, b, d), l[_] = u, l[_ + 1] = y, l[_ + 2] = b, l[_ + 3] = u, l[_ + 4] = b, l[_ + 5] = f, _ += 6, p++, h++, g++, d++, u += 2, f += 2, y += 2, b += 2;\n}\nconst lt = y(),\n  ct = y(),\n  mt = y(),\n  pt = y(),\n  ht = y();\nfunction gt(t, e, r, s, o) {\n  e *= 3, r *= 3, s *= 3, p(lt, t[e++], t[e++], t[e++]), p(ct, t[r++], t[r++], t[r++]), p(mt, t[s++], t[s++], t[s++]), h(pt, ct, lt), h(ht, mt, lt), g(o, ht, pt), m(o, o);\n}\nconst dt = y();\nfunction ut(t, e, r, s, o, n, i) {\n  const c = t.stageObject,\n    m = c.geometries,\n    h = m.length,\n    g = \"absolute-height\" !== e.mode;\n  let u = 0;\n  const f = c.transformation,\n    y = a(l(), f);\n  for (let a = 0; a < h; a += 2) {\n    const t = m[a];\n    if (!J(t)) continue;\n    const e = t.getMutableAttribute(Y.POSITION).data,\n      l = n[a / 2],\n      h = new V(t.mapPositions),\n      b = e.length / 3;\n    let _ = !1,\n      x = 0;\n    {\n      let t = 0;\n      for (let n = 0; n < b; n++) {\n        dt[0] = e[t], dt[1] = e[t + 1], dt[2] = e[t + 2], s(h, _t), g && (x += _t.sampledElevation), N.TESTS_DISABLE_OPTIMIZATIONS ? (p(yt, h.array[h.offset], h.array[h.offset + 1], _t.z + l[t / 3]), null != r && o.toRenderCoords(yt, r, yt), d(yt, yt, y)) : (p(yt, e[t], e[t + 1], e[t + 2]), d(yt, yt, f), o.setAltitude(yt, _t.z + l[t / 3]), d(yt, yt, y)), e[t] = yt[0], e[t + 1] = yt[1], e[t + 2] = yt[2];\n        const n = jt / o.unitInMeters;\n        (Math.abs(dt[0] - e[t]) >= n || Math.abs(dt[1] - e[t + 1]) >= n || Math.abs(dt[2] - e[t + 2]) >= n) && (_ = !0), h.offset += 3, t += 3;\n      }\n    }\n    if (_) {\n      const e = i.get(t);\n      e && ft(t, e, f), c.geometryVertexAttributeUpdated(m[a], Y.NORMALCOMPRESSED), t.invalidateBoundingInfo(), c.geometryVertexAttributeUpdated(m[a], Y.POSITION), m[a + 1].invalidateBoundingInfo(), c.geometryVertexAttributeUpdated(m[a + 1], Y.POSITION);\n    }\n    u += x / b;\n  }\n  return u / h;\n}\nfunction ft(t, e, r) {\n  const s = t.getMutableAttribute(Y.POSITION),\n    o = t.getMutableAttribute(Y.NORMALCOMPRESSED).data,\n    {\n      topVertexStart: n,\n      topVertexCount: i,\n      topFaceStart: a,\n      topFaceCount: l\n    } = e,\n    c = s.data,\n    h = i,\n    f = t.attributes.get(Y.POSITION).indices,\n    y = a + l,\n    b = n + i,\n    _ = P(3 * h);\n  for (let m = 0; m < h; ++m) {\n    const t = 3 * m;\n    _[t + 0] = 0, _[t + 1] = 0, _[t + 2] = 0;\n  }\n  const x = Pt,\n    S = Et,\n    j = Mt,\n    E = Ot,\n    M = bt;\n  for (let P = a; P < y; ++P) {\n    const t = 3 * P;\n    for (let e = 0; e < 3; ++e) {\n      const s = f[t + e];\n      E[e] = s;\n      const o = 3 * s;\n      p(yt, c[o + 0], c[o + 1], c[o + 2]), d(x[e], yt, r);\n    }\n    u(S, x[1], x[0]), u(j, x[2], x[0]), g(M, S, j), m(M, M);\n    for (let e = 0; e < 3; ++e) {\n      const t = 3 * (E[e] - n);\n      _[t + 0] += M[0], _[t + 1] += M[1], _[t + 2] += M[2];\n    }\n  }\n  for (let m = n; m < b; ++m) {\n    const t = 3 * (m - n),\n      e = _[t + 0],\n      r = _[t + 1],\n      s = _[t + 2],\n      i = Math.sqrt(e * e + r * r + s * s);\n    Q(o, m, e / i, r / i, s / i);\n  }\n}\nconst yt = y(),\n  bt = y(),\n  _t = new L(),\n  xt = [0, 2, 1],\n  St = [0, 1, 2],\n  jt = .01,\n  Pt = [y(), y(), y()],\n  Et = y(),\n  Mt = y(),\n  Ot = [0, 0, 0];\nvar wt;\n!function (t) {\n  t[t.Main = 0] = \"Main\", t[t.Bottom = 1] = \"Bottom\";\n}(wt || (wt = {}));\nclass Ct {\n  constructor(t, e, r, s) {\n    this.positions = t, this.elevation = e, this.normals = r, this.heights = s;\n  }\n}\nclass It {\n  constructor(t, e, r, s) {\n    this.topVertexStart = t, this.topVertexCount = e, this.topFaceStart = r, this.topFaceCount = s;\n  }\n}\nexport { et as Graphics3DExtrudeSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { s as e } from \"../../../../chunks/vec32.js\";\nimport { create as t } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { create as r, empty as i, expandWithRect as s, center as o, set as d, toRect as n } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { create as a } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { demResolutionForBoundingBox as h } from \"./graphicUtils.js\";\nimport { Object3DState as c } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { DirtyOperation as m, DirtyState as g } from \"../../webgl-engine/lib/ModelDirtyTypes.js\";\nclass l {\n  constructor(e, t, r, i) {\n    this.graphics3DSymbolLayer = e, this.renderGeometries = t, this.boundingBox = r, this._drapeSourceRenderer = i, this.type = \"draped\", this.stage = null, this._visible = !1, this._addedToStage = !1, this.isElevationSource = !1;\n  }\n  initialize(e) {\n    this.stage = e.stage;\n  }\n  setVisibility(e) {\n    if (null != this.stage && this._visible !== e) {\n      if (this._visible = e, e && !this._addedToStage) return this._addedToStage = !0, void this._drapeSourceRenderer.addGeometries(this.renderGeometries, m.ADD);\n      if (e || this._addedToStage) {\n        for (const e of this.renderGeometries) e.visible = this._visible;\n        this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, g.VISIBILITY);\n      }\n    }\n  }\n  destroy() {\n    this.stage && this._addedToStage && this._drapeSourceRenderer.removeGeometries(this.renderGeometries, m.REMOVE), this._addedToStage = !1, this._visible = !1, this.stage = null;\n  }\n  getCenterObjectSpace(r = t()) {\n    return e(r, 0, 0, 0);\n  }\n  getBoundingBoxObjectSpace(e = r()) {\n    return i(e);\n  }\n  addObjectState(e, t) {\n    e === c.Highlight && (this.renderGeometries.forEach(e => {\n      const r = e.geometry.addHighlight();\n      t.addRenderGeometry(e, r, this);\n    }), this._addedToStage && this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, g.HIGHLIGHT));\n  }\n  removeObjectState(e) {\n    this.renderGeometries.forEach(t => {\n      e.removeRenderGeometry(t);\n    });\n  }\n  removeRenderGeometryObjectState(e, t) {\n    e.geometry.removeHighlight(t), this._addedToStage && this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, g.HIGHLIGHT);\n  }\n  computeAttachmentOrigin(e) {\n    for (const t of this.renderGeometries) t.geometry.computeAttachmentOrigin(f) && (e.draped.origin[0] += f[0], e.draped.origin[1] += f[1], e.draped.num++);\n  }\n  async getProjectedBoundingBox(e, t, r, d, n) {\n    i(n);\n    for (let i = 0; i < this.renderGeometries.length; i++) {\n      const t = this.renderGeometries[i];\n      this._getRenderGeometryProjectedBoundingRect(t, e, u, r), s(n, u);\n    }\n    if (t) {\n      let e;\n      o(n, f);\n      const r = h(n, t.service.spatialReference, t);\n      try {\n        e = await t.service.queryElevation(f[0], f[1], d, r, \"ground\");\n      } catch (a) {}\n      null != e && (n[2] = Math.min(n[2], e), n[5] = Math.max(n[5], e));\n    }\n    return n;\n  }\n  _getRenderGeometryProjectedBoundingRect(e, t, r, i) {\n    if (this.boundingBox) d(p, this.boundingBox);else {\n      const t = e.boundingSphere,\n        r = t[3];\n      p[0] = t[0] - r, p[1] = t[1] - r, p[2] = t[2] - r, p[3] = t[0] + r, p[4] = t[1] + r, p[5] = t[2] + r;\n    }\n    return t(p, 0, 2), this.calculateRelativeScreenBounds && i.push({\n      location: o(p),\n      screenSpaceBoundingRect: this.calculateRelativeScreenBounds()\n    }), n(p, r);\n  }\n}\nconst u = a(),\n  p = r(),\n  f = t();\nexport { l as Graphics3DDrapedGraphicLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport { result as t, createTask as r } from \"../../../../core/asyncUtils.js\";\nimport i from \"../../../../core/Error.js\";\nimport has from \"../../../../core/has.js\";\nimport { clone as s } from \"../../../../core/lang.js\";\nimport { abortMaybe as o, releaseMaybe as a } from \"../../../../core/maybe.js\";\nimport { throwIfAbortError as n, throwIfAborted as l } from \"../../../../core/promiseUtils.js\";\nimport { pt2px as c, px2pt as h } from \"../../../../core/screenUtils.js\";\nimport { numericHash as m } from \"../../../../core/string.js\";\nimport { dataComponents as u } from \"../../../../core/urlUtils.js\";\nimport { fromValues as d, create as p } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { create as _, fromValues as f } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as y } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { projectPointToVector as g } from \"../../../../geometry/projection/projectPointToVector.js\";\nimport { containsPoint as x } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { createRendererExpression as b } from \"../../../../support/arcadeOnDemand.js\";\nimport { CIMSymbolHelper as S } from \"../../../../symbols/cim/CIMSymbolHelper.js\";\nimport { OverrideHelper as v } from \"../../../../symbols/cim/OverrideHelper.js\";\nimport { evaluateValueOrFunction as P } from \"../../../../symbols/cim/utils.js\";\nimport { scaleCIMSymbol as z } from \"../../../../symbols/support/cimSymbolUtils.js\";\nimport { defaultPrimitive as R } from \"../../../../symbols/support/IconSymbol3DLayerResource.js\";\nimport { Symbol3DAnchorPosition2D as M } from \"../../../../symbols/support/Symbol3DAnchorPosition2D.js\";\nimport { getIconHref as w } from \"../../../../symbols/support/utils.js\";\nimport C from \"../../../2d/arcade/callExpressionWithFeature.js\";\nimport { transparentUnit as O } from \"./constants.js\";\nimport { perObjectElevationAligner as j } from \"./ElevationAligners.js\";\nimport { SymbolUpdateType as I, elevationModeChangeUpdateType as T, needsElevationUpdates2D as E } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DDrapedGraphicLayer as U } from \"./Graphics3DDrapedGraphicLayer.js\";\nimport { Graphics3DObject3DGraphicLayer as D } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as F } from \"./Graphics3DSymbolLayer.js\";\nimport { validateSymbolLayerSize as G } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as A } from \"./interfaces.js\";\nimport { namedAnchorToHUDMaterialAnchorPos as L } from \"./placementUtils.js\";\nimport { placePointOnGeometry as V, updateStageObjectGeometry as H, getLocalOriginForPoint as k, extendPointGraphicElevationContext as B, createStageObject as N } from \"./pointUtils.js\";\nimport { initFastSymbolUpdatesState as W, updateFastSymbolUpdatesState as $, evaluateModelTransformScale as q, ConvertOptions as J } from \"../support/FastSymbolUpdates.js\";\nimport { createTexture as Z, requiresHalfTexelOffset as K, defaultSymbolSizeRatio as Q, defaultTexSize as X } from \"../../support/engineContent/sdfPrimitives.js\";\nimport { drapedZ as Y } from \"../../terrain/OverlayRenderer.js\";\nimport { createPointGeometry as ee } from \"../../webgl-engine/lib/GeometryUtil.js\";\nimport { RenderGeometry as te } from \"../../webgl-engine/lib/RenderGeometry.js\";\nimport { Texture as re } from \"../../webgl-engine/lib/Texture.js\";\nimport { HUDMaterial as ie } from \"../../webgl-engine/materials/HUDMaterial.js\";\nconst se = f(0, 0, 1),\n  oe = 16,\n  ae = 1.5,\n  ne = Q,\n  le = [ne / 2, ne / 2, 1 - ne / 2, 1 - ne / 2],\n  ce = [X * ne, X * ne];\nclass he extends F {\n  getCachedSize() {\n    return {\n      size: this._getIconSize()\n    };\n  }\n  constructor(e, t, r, i) {\n    super(e, t, r, i), this._cimSymbolMaterials = new Map(), this._cimSymbolTextures = new Map(), this._cimMaterialParametersInfo = null, this._size = null, this._symbolTextureRatio = 1, this._outlineSize = 0, this._patchTask = null, this._elevationOptions = {\n      supportsOffsetAdjustment: !0,\n      supportsOnTheGround: !0\n    };\n  }\n  async doLoad(e) {\n    this._validateOrThrow();\n    const t = this._prepareMaterialParameters(),\n      r = this._getPrimitive();\n    if (null != r) this._prepareResourcesPrimitive(t, r);else {\n      const r = w(this.symbolLayer),\n        i = de(r);\n      null != i ? await this._prepareResourcesCIM(t, JSON.parse(i), e) : await this._prepareResourcesHref(t, r, e);\n    }\n  }\n  _validateOrThrow() {\n    if (this._drivenProperties.size) return;\n    const e = G(this._getIconSize());\n    if (e) throw new i(\"graphics3diconsymbollayer:invalid-size\", e);\n  }\n  _getIconSize() {\n    const e = this.symbolLayer,\n      t = Math.round(null != e.size ? c(e.size) : oe);\n    return this._drivenProperties.size ? Math.max(t, 64) : t;\n  }\n  _generateTextureCIM(e) {\n    let t = this._cimData;\n    if (t && t.symbol || this.logger.error(\"Can't create texture, CIM data is undefined\"), t.primitiveOverrides) {\n      t = s(t);\n      const r = t.primitiveOverrides;\n      v.evaluateOverrides(r, e, this._arcadeInfo.geometryType, null, null), v.applyOverrides(t.symbol, r);\n    }\n    const r = m(JSON.stringify(t));\n    let i = this._cimSymbolTextures.get(r);\n    if (i) return i;\n    const o = this._context.sharedResources.cimSymbolRasterizer,\n      a = this._context.renderer && \"dictionary\" === this._context.renderer.type ? this._context.renderer.fieldMap : null;\n    a && v.applyDictionaryTextOverrides(t.symbol, e, a, null);\n    const n = null != this._cimScaleFactorOrFunction ? P(this._cimScaleFactorOrFunction, e) : 1;\n    1 !== n && t.symbol && z(t.symbol, n, !0);\n    const l = S.getEnvelope(t, null, o.resourceManager);\n    if (l?.width && l.height) {\n      const e = l.x + l.width / 2,\n        r = l.y + l.height / 2,\n        s = o.rasterize({\n          type: \"cim\",\n          data: t\n        }, l.width, l.height, e, r, 1, \"esriGeometryPoint\"),\n        a = new M({\n          x: -l.x / l.width - .5,\n          y: (l.height + l.y) / l.height - .5\n        });\n      this._cimMaterialParametersInfo.anchorPosition = pe(\"relative\", a), i = new re(s, {\n        width: s?.width ?? 1,\n        height: s?.height ?? 1,\n        reloadable: !0\n      });\n    } else i = new re(new ImageData(1, 1), {\n      width: 1,\n      height: 1,\n      reloadable: !0\n    });\n    return this._cimSymbolTextures.set(r, i), this._context.stage.add(i), i;\n  }\n  _prepareMaterialParameters() {\n    const e = {\n        anchorPosition: pe(this.symbolLayer.anchor, this.symbolLayer.anchorPosition)\n      },\n      t = this.symbol;\n    if (me(t)) {\n      const {\n        screenLength: r,\n        minWorldLength: i,\n        maxWorldLength: s\n      } = t.verticalOffset;\n      e.verticalOffset = {\n        screenLength: c(r),\n        minWorldLength: i || 0,\n        maxWorldLength: null != s ? s : 1 / 0\n      };\n    }\n    return this._context.screenSizePerspectiveEnabled && (e.screenSizePerspective = this._context.sharedResources.screenSizePerspectiveSettings), e.occlusionTest = !has(\"enable-feature:non-occluded-hud\"), e.hasSlicePlane = this._context.slicePlaneEnabled, e;\n  }\n  _prepareResourcesPrimitive(e, t) {\n    const r = this._getOutlineSize();\n    if (ue(t) && 0 === r) throw new Error(\"Nothing to render\");\n    if (this._outlineSize = r, e.color = this._getFillColor(), e.outlineColor = this._getOutlineColor(), e.outlineSize = this._outlineSize, null != this._context.sharedResources.textures) {\n      const r = this._context.sharedResources.textures.fromData(`${t}-icon`, () => Z(t));\n      this._textureHandle = r, e.textureId = r.texture.id;\n    }\n    e.textureIsSignedDistanceField = !0, e.sampleSignedDistanceFieldTexelCenter = K(t), e.distanceFieldBoundingBox = le;\n    const i = this._getIconSize();\n    this._size = [i, i], this._symbolTextureRatio = 1 / ne, this._createMaterialAndAddToStage(e, this._context.stage);\n  }\n  async _prepareResourcesHref(e, r, s) {\n    this._outlineSize = this._getOutlineSize(), e.color = this._getFillColor(), e.outlineColor = this._getOutlineColor(), e.outlineSize = this._outlineSize, e.textureIsSignedDistanceField = !1;\n    const o = this._getIconSize(),\n      a = o * this._context.graphicsCoreOwner.view.state.rasterPixelRatio;\n    if (null != this._context.sharedResources.textures) {\n      const l = await t(this._context.sharedResources.textures.fromUrl(r, a, {\n        signal: s\n      }));\n      if (!1 === l.ok) {\n        n(l.error);\n        throw new i(\"graphics3diconsymbollayer:request-failed\", `Failed to load (Request for icon resource failed: ${r})`);\n      }\n      this._textureHandle = l.value;\n      const c = l.value.texture;\n      this._size = _e(c, o), e.textureId = c.id;\n    }\n    this._createMaterialAndAddToStage(e, this._context.stage);\n  }\n  async _prepareResourcesCIM(e, t, r) {\n    if (this._cimData = t, !this._context.sharedResources.cimSymbolRasterizer) {\n      const e = (await import(\"../../../../symbols/cim/CIMSymbolRasterizer.js\")).CIMSymbolRasterizer;\n      l(r), this._context.sharedResources.cimSymbolRasterizer || (this._context.sharedResources.cimSymbolRasterizer = new e(this._context.renderCoordsHelper.spatialReference));\n    }\n    const i = this._context.sharedResources.cimSymbolRasterizer,\n      s = [],\n      o = t,\n      a = o?.symbol;\n    S.fetchResources(a, i.resourceManager, s, r), S.fetchFonts(a, i.resourceManager, s);\n    const n = this._context.layer.fields ? this._context.layer.fields.map(e => e.toJSON()) : [],\n      c = this._context.renderCoordsHelper.spatialReference;\n    if (this._arcadeInfo = {\n      spatialReference: c,\n      fields: n,\n      geometryType: \"esriGeometryPoint\"\n    }, o?.primitiveOverrides && s.push(v.createRenderExpressions(o.primitiveOverrides, this._arcadeInfo)), s.length > 0 && (await Promise.all(s), l(r)), this._context.renderer && \"dictionary\" === this._context.renderer.type && this._context.renderer.scaleExpression) {\n      const e = this._context.renderer;\n      if (e.scaleExpression) {\n        const t = e.scaleExpression,\n          r = await b(t, this._context.layer.spatialReference, n);\n        this._cimScaleFactorOrFunction = (e, t, i) => {\n          const s = C(r, e, {\n            $view: i\n          }, \"esriGeometryPoint\", t);\n          return null !== s ? s : 1;\n        };\n      }\n    }\n    l(r), this._cimMaterialParametersInfo = e, this._cimMaterialParametersInfo.color = this._getFillColor(), this._cimMaterialParametersInfo.outlineColor = [0, 0, 0, 0], this._cimMaterialParametersInfo.outlineSize = 0, this._cimMaterialParametersInfo.textureIsSignedDistanceField = !1;\n  }\n  _getPrimitive() {\n    return this.symbolLayer.resource?.href ? null : this.symbolLayer.resource?.primitive ?? R;\n  }\n  _getOutlineSize() {\n    let e = 0;\n    const t = this.symbolLayer;\n    if (null != t.outline?.size) return Math.max(c(t.outline.size), 0);\n    return e = ue(this._getPrimitive()) ? ae : 0, Math.max(e, 0);\n  }\n  _getOutlineColor() {\n    const t = this._getLayerOpacity(),\n      r = this.symbolLayer,\n      i = r?.outline?.color;\n    if (null != i) {\n      const r = e.toUnitRGB(i),\n        s = i.a * t;\n      return [r[0], r[1], r[2], s];\n    }\n    return [0, 0, 0, 0];\n  }\n  _getFillColor() {\n    if (ue(this._getPrimitive())) return O;\n    const e = null == this._getPrimitive(),\n      t = this.symbolLayer?.material?.color;\n    return this._getCombinedOpacityAndColor(t, {\n      hasIntrinsicColor: e\n    });\n  }\n  _createMaterialAndAddToStage(e, t) {\n    if (this._cimData) {\n      this._fastUpdates = null;\n      let r = e.textureId ? this._cimSymbolMaterials.get(e.textureId) : null;\n      return r || (r = new ie(e), this._cimSymbolMaterials.set(e.textureId ?? 0, r), t.add(r)), r;\n    }\n    return this._fastUpdates = W(this._context.renderer, this._fastVisualVariableConvertOptions()), this._fastUpdates && (e = {\n      ...e,\n      ...this._fastUpdates.materialParameters\n    }), this._materials[0] = new ie(e), t.add(this._materials[0]), this._materials[0];\n  }\n  _setDrapingDependentMaterialParameters() {\n    this.draped && (this._forEachMaterial(e => {\n      e.setParameters({\n        verticalOffset: null,\n        screenSizePerspective: null,\n        occlusionTest: !1,\n        hasSlicePlane: !1,\n        shaderPolygonOffset: 0,\n        draped: this.draped\n      });\n    }), this.layerOpacityChanged());\n  }\n  destroy() {\n    super.destroy(), this._patchTask = o(this._patchTask), this._forEachMaterial(e => this._context.stage.remove(e)), this._materials.length = 0, this._cimSymbolMaterials.clear(), this._cimSymbolTextures.forEach(e => this._context.stage.remove(e)), this._cimSymbolTextures.clear(), this._textureHandle = a(this._textureHandle);\n  }\n  _getScaleFactor(e, t) {\n    if (this._drivenProperties.size && e.size) {\n      for (let t = 0; t < 3; t++) {\n        const r = e.size[t];\n        r && \"symbol-value\" !== r && \"proportional\" !== r && (e.size[t] = c(r));\n      }\n      if (\"symbol-value\" === e.size[0]) return 1;\n      if (isFinite(+e.size[0])) return +e.size[0] / t;\n      if (isFinite(+e.size[2])) return +e.size[2] / t;\n    }\n    return 1;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry)) return null;\n    let r,\n      i = [0, 0];\n    if (this._cimData) {\n      if (!this._cimData.symbol) return null;\n      const e = this._generateTextureCIM(t),\n        s = {\n          textureId: e.id,\n          ...this._cimMaterialParametersInfo\n        };\n      r = this._createMaterialAndAddToStage(s, this._context.stage);\n      const o = window.devicePixelRatio || 1;\n      i = [e.parameters.width / o, e.parameters.height / o];\n    } else i = this._size, r = this._materials[0];\n    const s = V(t.geometry);\n    if (null == s) return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`), null;\n    const o = e.renderingInfo,\n      a = this._getVertexOpacityAndColor(o);\n    let n = 1;\n    if (!this._fastUpdates?.visualVariables.size) {\n      const e = i[0] > i[1] ? i[0] : i[1];\n      n = this._getScaleFactor(o, e);\n    }\n    n *= this._symbolTextureRatio;\n    const l = d(i[0] * n, i[1] * n),\n      c = this.setGraphicElevationContext(t);\n    return this.ensureDrapedStatus(\"on-the-ground\" === c.mode) && this._setDrapingDependentMaterialParameters(), this.draped ? this._createAsOverlay(t, s, r, a, l, e.layer.uid) : this._createAs3DShape(t, s, r, a, l, c, t.uid);\n  }\n  layerOpacityChanged() {\n    const e = this._getFillColor(),\n      t = this._getOutlineColor();\n    this._forEachMaterial(r => {\n      r.setParameters({\n        color: e\n      }), r.setParameters({\n        outlineColor: t\n      });\n    });\n  }\n  updateGeometry(e, t) {\n    if (this.draped || !this._validateGeometry(t)) return !1;\n    const {\n      elevationContext: r,\n      stageObject: i\n    } = e;\n    if (r.mode !== this.getGeometryElevationMode(t)) return !1;\n    const s = V(t);\n    if (!s) return !1;\n    const o = H(i, this._context, s, r);\n    if (null == o) return !1;\n    const a = k(this._context, s);\n    return i.geometries[0].localOrigin === a && (e.alignedSampledElevation = o, B(e, s, this._context.elevationProvider), !0);\n  }\n  layerElevationInfoChanged(e, t, r) {\n    const i = this._elevationContext.mode,\n      s = T(he.elevationModeChangeTypes, r, i);\n    if (s !== I.UPDATE) return s;\n    const o = E(i) || \"absolute-height\" === i;\n    return this.updateGraphics3DGraphicElevationInfo(e, t, () => o);\n  }\n  slicePlaneEnabledChanged() {\n    return this.draped || this._forEachMaterial(e => {\n      e.setParameters({\n        hasSlicePlane: this._context.slicePlaneEnabled\n      });\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return !0;\n  }\n  get pixelRatioChanged() {\n    return null != this._getPrimitive();\n  }\n  applyRendererDiff(e, t) {\n    for (const r in e.diff) {\n      if (\"visualVariables\" !== r) return A.RecreateSymbol;\n      if (!$(this._fastUpdates, t, this._fastVisualVariableConvertOptions())) return A.RecreateSymbol;\n      this._materials[0]?.setParameters(this._fastUpdates.materialParameters);\n    }\n    return A.FastUpdate;\n  }\n  prepareSymbolLayerPatch(e) {\n    if (this._patchTask?.abort(), \"partial\" !== e.diff.type) return;\n    const t = e.diff.diff;\n    this._preparePatchResource(e, t);\n  }\n  _preparePatchResource(e, s) {\n    if (!s.resource || \"partial\" !== s.resource.type) return;\n    const c = s.resource.diff;\n    if (\"complete\" !== c?.href?.type) return;\n    const h = c.href.newValue,\n      {\n        textures: m\n      } = this._context.sharedResources;\n    if (null == h || null == m || null != de(h)) return;\n    const u = this._getIconSize(),\n      d = u * this._context.graphicsCoreOwner.view.state.pixelRatio;\n    e.symbolLayerStatePatches.push(() => {\n      this._patchTask = o(this._patchTask), this._patchTask = r(e => this._context.schedule(async (e, r) => {\n        const s = await t(m.fromUrl(h, d, {\n          signal: r\n        }));\n        l(r);\n        const o = !s.ok;\n        if (o && n(s.error), this._textureHandle = a(this._textureHandle), this._patchTask = null, o) {\n          this._forEachMaterial(e => {\n            e.visible = !1, e.setParameters({\n              textureId: null\n            });\n          });\n          const e = `Failed to load (Request for icon resource failed: ${h})`;\n          return void this.logger.error(new i(\"graphics3diconsymbollayer:request-failed\", e));\n        }\n        this._textureHandle = s.value;\n        const c = s.value.texture;\n        this._size = _e(c, u), this._forEachMaterial(e => {\n          e.setParameters({\n            textureId: c.id\n          }), e.visible = !0;\n        });\n      }, e));\n    }), delete c.href;\n  }\n  _defaultElevationInfoNoZ() {\n    return fe;\n  }\n  _createAs3DShape(e, t, r, i, s, o, a) {\n    const n = this.getFastUpdateAttrValues(e),\n      l = this._context.layer.uid,\n      c = this._context.stage.renderView.getObjectAndLayerIdColor({\n        graphicUid: a,\n        layerUid: l\n      }),\n      h = ee(r, se, null, i, s, ye, null, n, c),\n      m = N(this._context, t, h, o, a);\n    if (null == m) return null;\n    const u = new D(this, m.object, [h], null, null, j, o);\n    return u.alignedSampledElevation = m.sampledElevation, u.needsElevationUpdates = E(o.mode) || \"absolute-height\" === o.mode, u.getScreenSize = this._createScreenSizeGetter(s, n), u.calculateRelativeScreenBounds = e => r.calculateRelativeScreenBounds(u.getScreenSize(), 1, e), B(u, t, this._context.elevationProvider), u;\n  }\n  _createAsOverlay(e, t, r, i, s, o) {\n    r.renderPriority = this._renderPriority;\n    const a = _();\n    g(t, a, this._context.overlaySR), a[2] = Y;\n    const n = this._context.clippingExtent;\n    if (null != n && !x(n, a)) return null;\n    const l = this.getFastUpdateAttrValues(e),\n      c = this._context.stage.renderView.getObjectAndLayerIdColor({\n        graphicUid: e.uid,\n        layerUid: this._context.layer.uid\n      }),\n      h = ee(r, se, a, i, s, null, null, l, c),\n      m = new te(h, {\n        layerUid: o,\n        graphicUid: e.uid\n      }),\n      u = new U(this, [m], null, this._context.drapeSourceRenderer);\n    return u.getScreenSize = this._createScreenSizeGetter(s, l), u.calculateRelativeScreenBounds = e => r.calculateRelativeScreenBounds(u.getScreenSize(), 1, e), u;\n  }\n  _createScreenSizeGetter(e, t) {\n    const r = this._outlineSize + 2;\n    if (this._fastUpdates && t) {\n      const i = e[0] / this._symbolTextureRatio,\n        s = e[1] / this._symbolTextureRatio;\n      return (e = p()) => {\n        const [o, a] = q(ge, this._fastUpdates.materialParameters, t);\n        return e[0] = o * i + r, e[1] = a * s + r, e;\n      };\n    }\n    const i = e[0] / this._symbolTextureRatio + r,\n      s = e[1] / this._symbolTextureRatio + r;\n    return (e = p()) => (e[0] = i, e[1] = s, e);\n  }\n  _fastVisualVariableConvertOptions() {\n    const e = Math.max(this._size[0], this._size[1]),\n      t = f(e, e, e),\n      r = h(1),\n      i = e * r,\n      s = f(i, i, i);\n    return new J({\n      size: !0,\n      color: !0,\n      rotation: !0,\n      opacity: !1\n    }, t, s, r);\n  }\n  _forEachMaterial(e) {\n    this._materials.forEach(e), this._cimSymbolMaterials.forEach(e);\n  }\n  test() {\n    return {\n      ...super.test(),\n      material: this._materials[0]\n    };\n  }\n}\nfunction me(e) {\n  return e && \"point-3d\" === e.type && e.hasVisibleVerticalOffset();\n}\nfunction ue(e) {\n  return null != e && (\"cross\" === e || \"x\" === e);\n}\nfunction de(e) {\n  const t = u(e);\n  return \"application/json\" === t?.mediaType ? t.data : void 0;\n}\nfunction pe(e, t) {\n  return \"relative\" === e ? d((t.x || 0) + .5, .5 - (t.y || 0)) : e in L ? L[e] : L.center;\n}\nfunction _e({\n  parameters: e\n}, t) {\n  const r = (e.width ?? 1) / (e.height ?? 1);\n  return r > 1 ? [t, Math.round(t / r)] : [Math.round(t * r), t];\n}\nhe.PRIMITIVE_SIZE = ce, he.elevationModeChangeTypes = {\n  definedChanged: I.UPDATE,\n  staysOnTheGround: I.NONE,\n  onTheGroundChanged: I.RECREATE\n};\nconst fe = {\n    mode: \"relative-to-ground\",\n    offset: 0\n  },\n  ye = y(0, 0, 0, 1),\n  ge = _();\nexport { he as Graphics3DIconSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { CapType as e } from \"../../webgl-engine/shaders/RibbonLineTechniqueConfiguration.js\";\nfunction n(n) {\n  switch (n) {\n    case \"butt\":\n      return e.BUTT;\n    case \"square\":\n      return e.SQUARE;\n    case \"round\":\n      return e.ROUND;\n    default:\n      return null;\n  }\n}\nfunction r(e) {\n  return \"diamond\" === e ? \"kite\" : e;\n}\nexport { n as parseCapType, r as parseLineMarkerStyle };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../geometry.js\";\nimport e from \"../../../../core/Error.js\";\nimport { px2pt as t, pt2px as r } from \"../../../../core/screenUtils.js\";\nimport { fromValues as i, clone as a } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { create as s, empty as n, expandWithBuffer as o, intersectsClippingArea as l, expandWithAABB as m } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { getDriverAxisSizeValueAny as h } from \"../../../../renderers/support/renderingInfoUtils.js\";\nimport { sharedGeometryElevationAligner as p } from \"./ElevationAligners.js\";\nimport { SymbolUpdateType as c, elevationModeChangeUpdateType as d, needsElevationUpdates2D as y } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DDrapedGraphicLayer as u } from \"./Graphics3DDrapedGraphicLayer.js\";\nimport { Graphics3DObject3DGraphicLayer as _ } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as g } from \"./Graphics3DSymbolLayer.js\";\nimport { ApplyRendererDiffResult as f } from \"./interfaces.js\";\nimport { parseCapType as b, parseLineMarkerStyle as M } from \"./lineUtils.js\";\nimport { initFastSymbolUpdatesState as L, updateFastSymbolUpdatesState as E, getAttributeValue as P, ConvertOptions as v } from \"../support/FastSymbolUpdates.js\";\nimport { debugFlags as C } from \"../../support/debugFlags.js\";\nimport { createGeometry as R } from \"../../support/engineContent/line.js\";\nimport { geometryToRenderInfo as w, geometryToRenderInfoDraped as x } from \"../../support/renderInfoUtils/line.js\";\nimport { Object3D as D } from \"../../webgl-engine/lib/Object3D.js\";\nimport { RenderGeometry as k } from \"../../webgl-engine/lib/RenderGeometry.js\";\nimport { LineMarkerMaterial as j } from \"../../webgl-engine/materials/LineMarkerMaterial.js\";\nimport { getStipplePatternForLinePattern as S } from \"../../webgl-engine/materials/lineStippleUtils.js\";\nimport { RibbonLineMaterial as A } from \"../../webgl-engine/materials/RibbonLineMaterial.js\";\nimport U from \"../../../../geometry/Extent.js\";\nimport z from \"../../../../geometry/Polygon.js\";\nconst W = [\"polyline\", \"polygon\", \"extent\"],\n  G = new v({\n    size: !0,\n    color: !0,\n    rotation: !1,\n    opacity: !0\n  });\nclass O extends g {\n  constructor(e, t, r, i) {\n    super(e, t, r, i);\n  }\n  async doLoad() {\n    if (this._fastUpdates = L(this._context.renderer, G), !this._drivenProperties.size) {\n      if ((null != this.symbolLayer.size ? this.symbolLayer.size : t(1)) < 0) throw new e(\"graphics3dlinesymbollayer:invalid-size\", \"Symbol sizes may not be negative values\");\n    }\n  }\n  _getMaterialParameters(e, t = !1) {\n    const r = this._getCombinedOpacityAndColor(t && this._markerColor || this._materialColor);\n    this._patternHidesLine && !t && (r[3] = 0);\n    const i = {\n      width: this._computeMaterialWidth(this.symbolLayer?.size),\n      color: r,\n      hasPolygonOffset: !0,\n      join: this.symbolLayer.join || \"miter\",\n      cap: b(this.symbolLayer.cap || \"butt\"),\n      hasSlicePlane: this._context.slicePlaneEnabled,\n      isClosed: e,\n      stipplePattern: S(this.symbolLayer.pattern)\n    };\n    return this._fastUpdates?.visualVariables ? {\n      ...i,\n      ...this._fastUpdates.materialParameters\n    } : i;\n  }\n  get _materialColor() {\n    return this.symbolLayer.material?.color;\n  }\n  get _markerColor() {\n    return this.symbolLayer.marker?.color;\n  }\n  get _lineMaterial() {\n    return null == this._materials[F.Line] && (this._materials[F.Line] = new A(this._getMaterialParameters(!1)), this._context.stage.add(this._materials[F.Line])), this._materials[F.Line];\n  }\n  get _ringMaterial() {\n    return null == this._materials[F.Ring] && (this._materials[F.Ring] = new A(this._getMaterialParameters(!0)), this._context.stage.add(this._materials[F.Ring])), this._materials[F.Ring];\n  }\n  get _wireframeLineMaterial() {\n    return null == this._materials[F.LineWireframe] && (this._materials[F.LineWireframe] = new A({\n      ...this._getMaterialParameters(!1),\n      wireframe: !0\n    }), this._context.stage.add(this._materials[F.LineWireframe])), this._materials[F.LineWireframe];\n  }\n  get _wireframeRingMaterial() {\n    return null == this._materials[F.RingWireframe] && (this._materials[F.RingWireframe] = new A({\n      ...this._getMaterialParameters(!0),\n      wireframe: !0\n    }), this._context.stage.add(this._materials[F.RingWireframe])), this._materials[F.RingWireframe];\n  }\n  get _markerMaterial() {\n    return null == this._materials[F.Marker] && null != this.symbolLayer.marker && (this._materials[F.Marker] = new j({\n      ...this._getMaterialParameters(!1, !0),\n      placement: this.symbolLayer.marker.placement,\n      markerPrimitive: M(this.symbolLayer.marker.style)\n    }), this._context.stage.add(this._materials[F.Marker])), this._materials[F.Marker];\n  }\n  destroy() {\n    super.destroy(), this._forEachMaterial(e => this._context.stage.remove(e)), this._materials.length = 0;\n  }\n  _getDrivenSize(e) {\n    return this._drivenProperties.size && e.size ? r(h(e.size)) : 1;\n  }\n  _getDrivenColor(e) {\n    const t = i(1, 1, 1, 1);\n    return this._drivenProperties.color && e.color && (t[0] = e.color[0], t[1] = e.color[1], t[2] = e.color[2], e.color.length > 0 && (t[3] = e.color[3])), this._drivenProperties.opacity && e.opacity && (t[3] = e.opacity), t;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry, W, this.symbolLayer.type)) return null;\n    const r = this.setGraphicElevationContext(t);\n    return this.ensureDrapedStatus(\"on-the-ground\" === r.mode), this.draped ? this._createAsOverlay(e, this._context.layer.uid) : this._createAs3DShape(e, r, t.uid);\n  }\n  applyRendererDiff(e, t) {\n    for (const r in e.diff) {\n      if (\"visualVariables\" !== r) return f.RecreateSymbol;\n      {\n        const e = this._fastUpdates;\n        if (!E(e, t, G)) return f.RecreateSymbol;\n        this._forEachMaterial(t => t?.setParameters(e.materialParameters));\n      }\n    }\n    return f.FastUpdate;\n  }\n  prepareSymbolLayerPatch(e) {\n    if (\"partial\" !== e.diff.type) return;\n    const t = e.diff.diff,\n      r = {};\n    \"complete\" === t.size?.type && (r.width = this._computeMaterialWidth(t.size.newValue), delete t.size), \"complete\" === t.cap?.type && (r.cap = b(t.cap.newValue ?? \"butt\"), delete t.cap);\n    const i = this._prepareMarkerPatch(e, t);\n    this._prepareMaterialPatch(e, t, i), e.symbolLayerStatePatches.push(() => this._forEachMaterial(e => e?.setParameters(r)));\n  }\n  layerOpacityChanged() {\n    this._forEachMaterial((e, t) => this._updateMaterialLayerOpacity(e, t === F.Marker));\n  }\n  _forEachMaterial(e) {\n    this._materials.forEach(e);\n  }\n  _updateMaterialLayerOpacity(e, t = !1) {\n    if (null == e) return;\n    const r = e.parameters.color,\n      a = this.symbolLayer?.material?.color,\n      s = this._patternHidesLine && !t ? 0 : this._getCombinedOpacity(a),\n      n = i(r[0], r[1], r[2], s);\n    e.setParameters({\n      color: n\n    });\n  }\n  layerElevationInfoChanged(e, t, r) {\n    const i = this._elevationContext.mode,\n      a = d(O.elevationModeChangeTypes, r, i);\n    if (a !== c.UPDATE) return a;\n    const s = y(i);\n    return this.updateGraphics3DGraphicElevationInfo(e, t, () => s);\n  }\n  slicePlaneEnabledChanged() {\n    const e = {\n      hasSlicePlane: this._context.slicePlaneEnabled\n    };\n    return this._forEachMaterial(t => t?.setParameters(e)), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return !0;\n  }\n  _createAs3DShape(e, t, r) {\n    const i = V(e.graphic.geometry),\n      a = \"polygon\" === i.type ? i.rings : i.paths,\n      m = new Array(),\n      h = s(),\n      c = w(i, this._context.elevationProvider, this._context.renderCoordsHelper, t),\n      d = \"polygon\" === i.type ? \"rings\" : \"paths\";\n    this._logGeometryCreationWarnings(c, a, d, \"LineSymbol3DLayer\");\n    for (let s = 0; s < c.lines.length; s++) {\n      const t = c.lines[s],\n        a = t.position,\n        p = t.mapPositions;\n      if (null != this._context.clippingExtent && (n(h), o(h, p), !l(h, this._context.clippingExtent))) continue;\n      const d = this._createGeometry(\"polygon\" === i.type ? this._ringMaterial : this._lineMaterial, e, a, p, i.type, T.ELEVATED, r);\n      m.push(d), C.LINE_WIREFRAMES && m.push(d.instantiate({\n        material: \"polygon\" === i.type ? this._wireframeRingMaterial : this._wireframeLineMaterial\n      })), null != this._markerMaterial && m.push(d.instantiate({\n        material: this._markerMaterial\n      }));\n    }\n    if (0 === m.length) return null;\n    const u = new D({\n        geometries: m,\n        castShadow: !1,\n        layerUid: this._context.layer.uid,\n        graphicUid: r\n      }),\n      g = new _(this, u, m, null, null, p, t);\n    return g.alignedSampledElevation = c.sampledElevation, g.needsElevationUpdates = y(t.mode), g;\n  }\n  _createGeometry(e, t, r, i, a, s, n) {\n    const o = s === T.DRAPED ? {\n        spatialReference: this._context.overlaySR,\n        renderCoordsHelper: this._context.renderCoordsHelper\n      } : null,\n      l = \"polygon\" === a,\n      m = this._fastUpdates?.visualVariables.color,\n      h = this._fastUpdates?.visualVariables.size,\n      p = this._fastUpdates?.visualVariables.opacity,\n      c = this._context.stage.renderView.getObjectAndLayerIdColor({\n        graphicUid: n,\n        layerUid: this._context.layer.uid\n      }),\n      d = {\n        position: r,\n        size: h ? null : this._getDrivenSize(t.renderingInfo),\n        color: m ? null : this._getDrivenColor(t.renderingInfo),\n        sizeFeature: h ? P(h.field, t.graphic) : null,\n        colorFeature: m ? P(m.field, t.graphic) : null,\n        opacityFeature: p ? P(p.field, t.graphic) : null\n      };\n    return R(e, {\n      overlayInfo: o,\n      removeDuplicateStartEnd: l,\n      mapPositions: i,\n      attributeData: d\n    }, c);\n  }\n  _createAsOverlay(e, t) {\n    const r = e.graphic,\n      i = V(r.geometry),\n      a = \"polygon\" === i.type ? i.rings : i.paths,\n      h = \"polygon\" === i.type ? this._ringMaterial : this._lineMaterial;\n    h.renderPriority = this._renderPriority;\n    const p = C.LINE_WIREFRAMES ? \"polygon\" === i.type ? this._wireframeRingMaterial : this._wireframeLineMaterial : null,\n      c = this._markerMaterial;\n    null != p && (p.renderPriority = this._renderPriority - .001), null != c && (c.renderPriority = this._renderPriority - .002);\n    const d = new Array(),\n      y = s(),\n      _ = n(),\n      g = x(i, this._context.overlaySR),\n      f = \"polygon\" === i.type ? \"rings\" : \"paths\";\n    this._logGeometryCreationWarnings(g, a, f, \"LineSymbol3DLayer\");\n    for (const s of g.lines) {\n      if (n(y), o(y, s.position), !l(y, this._context.clippingExtent)) continue;\n      m(_, y);\n      const a = a => {\n        const n = this._createGeometry(a, e, s.position, void 0, i.type, T.DRAPED, r.uid),\n          o = new k(n, {\n            layerUid: t,\n            graphicUid: r.uid\n          });\n        d.push(o);\n      };\n      if (null != c) {\n        a(c);\n        const e = this.symbolLayer.marker.placement;\n        \"begin\" !== e && \"begin-end\" !== e || o(y, s.position, 0, 1), \"end\" !== e && \"begin-end\" !== e || o(y, s.position, s.position.length - 3, 1);\n      }\n      a(h), C.LINE_WIREFRAMES && a(p);\n    }\n    return new u(this, d, _, this._context.drapeSourceRenderer);\n  }\n  get _patternHidesLine() {\n    const e = this.symbolLayer.pattern;\n    return null != e && \"style\" === e.type && \"none\" === e.style;\n  }\n  _computeMaterialWidth(e) {\n    return e = e ?? t(1), this._drivenProperties.size ? this._fastUpdates?.visualVariables.size ? r(1) : 1 : r(e);\n  }\n  _prepareMaterialPatch(e, t, r) {\n    const i = t.material;\n    if (null == i) return void (r.changed && r.useMaterialColor && I(this._getCombinedOpacityAndColor(this._materialColor), this._materials[F.Marker], e));\n    if (\"collection\" === i.type) return;\n    const s = \"complete\" === i.type ? i.newValue?.color : \"complete\" === i.diff.color?.type ? i.diff.color.newValue : null,\n      n = this._getCombinedOpacityAndColor(s);\n    r.useMaterialColor && I(a(n), this._materials[F.Marker], e), this._patternHidesLine && (n[3] = 0), I(n, this._materials[F.Line], e), delete t.material;\n  }\n  _prepareMarkerPatch(e, t) {\n    const r = t.marker,\n      i = this._markerMaterial;\n    if (null == r || \"partial\" !== r.type || null == r.diff || null != r.diff.placement || null != r.diff.style && \"complete\" !== r.diff.style.type || null != r.diff.color && \"complete\" !== r.diff.color.type || null == i) return {\n      changed: !1,\n      useMaterialColor: null == this._markerColor\n    };\n    const a = r.diff.color,\n      s = null != a,\n      n = s ? a.newValue : null,\n      o = null == n && null == this._markerColor;\n    n && I(this._getCombinedOpacityAndColor(n), i, e);\n    const l = r.diff.style?.newValue;\n    return l && e.symbolLayerStatePatches.push(() => i.setParameters({\n      markerPrimitive: M(l)\n    })), delete t.marker, {\n      changed: s,\n      useMaterialColor: o\n    };\n  }\n}\nfunction V(e) {\n  switch (e.type) {\n    case \"extent\":\n      if (e instanceof U) return z.fromExtent(e);\n      break;\n    case \"polygon\":\n    case \"polyline\":\n      return e;\n  }\n  return null;\n}\nfunction I(e, t, r) {\n  null != t && r.symbolLayerStatePatches.push(() => t.setParameters({\n    color: e\n  }));\n}\nvar T, F;\nO.elevationModeChangeTypes = {\n  definedChanged: c.RECREATE,\n  staysOnTheGround: c.NONE,\n  onTheGroundChanged: c.RECREATE\n}, function (e) {\n  e[e.DRAPED = 0] = \"DRAPED\", e[e.ELEVATED = 1] = \"ELEVATED\";\n}(T || (T = {})), function (e) {\n  e[e.Line = 0] = \"Line\", e[e.Ring = 1] = \"Ring\", e[e.LineWireframe = 2] = \"LineWireframe\", e[e.RingWireframe = 3] = \"RingWireframe\", e[e.Marker = 4] = \"Marker\";\n}(F || (F = {}));\nexport { O as Graphics3DLineSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst e = {\n  disableDelayMs: 2e3\n};\nexport { e as meshAutoFastUpdateConstants };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { getTranslation as t, multiply as e, invert as a, copy as s, fromTranslation as r } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { IDENTITY as i, create as o } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { j as n } from \"../../../../chunks/vec32.js\";\nimport { create as m } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { perObjectElevationAligner as l } from \"./ElevationAligners.js\";\nimport { evaluateElevationInfoAtPoint as f } from \"./elevationAlignmentUtils.js\";\nimport { setContextFeature as d } from \"./featureExpressionInfoUtils.js\";\nimport { Graphics3DObject3DGraphicLayer as c } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { meshAutoFastUpdateConstants as h } from \"./meshAutoFastUpdateConstants.js\";\nclass p extends c {\n  constructor() {\n    super(...arguments), this.fastTransformUpdatesAllowed = !1, this._originalGeometries = [], this._fastTransformUpdatesEnabled = !1, this._autoDisableFastUpdatesTimeoutId = 0;\n  }\n  get fastTransformUpdatesEnabled() {\n    return this._fastTransformUpdatesEnabled;\n  }\n  destroy() {\n    super.destroy(), this._cancelAutoDisableFastUpdates();\n  }\n  enableFastTransformUpdates(e, a) {\n    if (!this.fastTransformUpdatesAllowed || this._fastTransformUpdatesEnabled) return;\n    this._cancelAutoDisableFastUpdates(), this._fastTransformUpdatesEnabled = !0;\n    const {\n        stageObject: s\n      } = this,\n      r = s.geometries.slice();\n    s.removeAllGeometries();\n    const i = t(g, s.transformation),\n      o = a.getOrigin(i);\n    for (const t of r) {\n      const a = e(t.material),\n        r = t.instantiate({\n          material: a\n        });\n      r.localOrigin = o, s.addGeometry(r);\n    }\n    this._originalGeometries = r;\n  }\n  autoDisableFastTransformUpdates(t) {\n    this._cancelAutoDisableFastUpdates(), this._autoDisableFastUpdatesTimeoutId = setTimeout(() => {\n      this._autoDisableFastUpdatesTimeoutId = 0, t();\n    }, h.disableDelayMs);\n  }\n  updateAutoDisableFastTransformUpdates(t) {\n    this._autoDisableFastUpdatesTimeoutId && this.autoDisableFastTransformUpdates(t);\n  }\n  _cancelAutoDisableFastUpdates() {\n    clearTimeout(this._autoDisableFastUpdatesTimeoutId), this._autoDisableFastUpdatesTimeoutId = 0;\n  }\n  disableFastTransformUpdates(t) {\n    if (!this._fastTransformUpdatesEnabled) return;\n    this._cancelAutoDisableFastUpdates(), this._fastTransformUpdatesEnabled = !1;\n    const {\n        stageObject: e\n      } = this,\n      a = e.geometries.map(e => t(e.material));\n    e.removeAllGeometries();\n    for (let s = 0; s < this._originalGeometries.length; s++) {\n      const t = this._originalGeometries[s],\n        r = a[s];\n      r.setParameters({\n        modelTransformation: null\n      }), r === t.material ? e.addGeometry(t) : e.addGeometry(t.instantiate({\n        material: r\n      }));\n    }\n    this._originalGeometries.length = 0;\n  }\n  updateFastLocalOrigin(e, a, s) {\n    if (!this._fastTransformUpdatesEnabled) return;\n    const {\n      stageObject: r\n    } = this;\n    if (0 === r.geometries.length) return;\n    const o = r.geometries[0].localOrigin,\n      n = t(g, e),\n      m = s.getOrigin(n);\n    if (m === o) return;\n    const l = a?.localMatrix ?? i;\n    r.shaderTransformation = null, r.transformation = e, r.geometries.forEach(t => {\n      t.transformation = l, t.localOrigin = m;\n    });\n  }\n  updateTransform(t, s, r) {\n    const {\n        stageObject: o\n      } = this,\n      n = s?.localMatrix ?? i;\n    if (!this._fastTransformUpdatesEnabled) return o.shaderTransformation = null, o.transformation = t, o.geometries.forEach(t => t.transformation = n), void this._updateEdgeTransform(r);\n    const m = o.transformation,\n      l = o.geometries[0].transformation,\n      f = t,\n      d = n,\n      c = e(u, m, l),\n      h = e(T, f, d),\n      p = e(_, h, a(_, l));\n    o.shaderTransformation = p, this._setFastMaterialTransformation({\n      matA: c,\n      matB: h\n    }), this._updateEdgeTransform(r);\n  }\n  alignWithElevation(t, a, r, i) {\n    if (!this._fastTransformUpdatesEnabled) return void super.alignWithElevation(t, a, r, i);\n    null != r && d(this.elevationContext.featureExpressionInfoContext, r);\n    const o = (e, s) => f(e, t, this.elevationContext, a, s),\n      {\n        stageObject: n\n      } = this;\n    if (!n.geometries[0].material.parameters.modelTransformation) return;\n    const m = n.transformation,\n      c = n.geometries[0].transformation,\n      h = e(u, m, c),\n      p = n.effectiveTransformation,\n      g = s(b, p);\n    this.alignedSampledElevation = l(this, this.elevationContext, t.spatialReference, o, a, g), n.shaderTransformation = g;\n    const _ = n.geometries[0].transformation,\n      U = e(T, g, _);\n    this._setFastMaterialTransformation({\n      matA: h,\n      matB: U\n    }), this._updateEdgeTransform(i);\n  }\n  _setFastMaterialTransformation({\n    matA: t,\n    matB: s\n  }) {\n    const {\n      stageObject: i\n    } = this;\n    if (0 === i.geometries.length) return;\n    const o = i.geometries[0].localOrigin,\n      m = r(F, n(g, o.vec3, -1)),\n      l = e(U, m, t),\n      f = e(E, m, s),\n      d = a(U, l),\n      c = e(E, f, d);\n    for (const e of i.geometries) e.material.setParameters({\n      modelTransformation: c\n    });\n  }\n  _updateEdgeTransform(t) {\n    const {\n      stageObject: e,\n      _stageLayer: a\n    } = this;\n    a.stage.renderer.withEdgeView(a => {\n      a.fastUpdateObject3DEdgesTransform(e) || this.resetEdgeObject(t);\n    });\n  }\n}\nconst g = m(),\n  u = o(),\n  T = o(),\n  b = o(),\n  _ = o(),\n  U = o(),\n  E = o(),\n  F = o();\nexport { p as Graphics3DMeshObject3DGraphicLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { DefaultMaterial as a } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nclass r {\n  constructor() {\n    this._fastTransformOriginalMaterials = new Map(), this._fastTransformClonedMaterials = new Map(), this._graphicReferenceCount = 0;\n  }\n  enable(r, t, e) {\n    r.enableFastTransformUpdates(r => {\n      if (this._graphicReferenceCount <= 1) {\n        if (this._fastTransformOriginalMaterials.has(r)) return r;\n        const a = t.byMaterial(r);\n        return this._fastTransformOriginalMaterials.set(r, a), t.delete(r), r;\n      }\n      const s = new a(r.parameters);\n      return e.stage.add(s), this._fastTransformClonedMaterials.set(s, r), s;\n    }, e.localOriginFactory);\n  }\n  disable(a, r, t) {\n    const e = new Set(),\n      s = new Set();\n    a.disableFastTransformUpdates(a => {\n      if (!this._fastTransformClonedMaterials.has(a)) {\n        const t = a,\n          i = this._fastTransformOriginalMaterials.get(t);\n        return r.has(i.uid) ? (e.add(t), r.byUid(i.uid).material) : (s.add(t), i.material);\n      }\n      const i = a,\n        n = this._fastTransformClonedMaterials.get(i);\n      return this._fastTransformClonedMaterials.delete(i), t.stage.remove(i), n;\n    });\n    for (const i of e) this._fastTransformOriginalMaterials.delete(i), t.stage.remove(i);\n    for (const i of s) {\n      const a = this._fastTransformOriginalMaterials.get(i);\n      this._fastTransformOriginalMaterials.delete(i), r.set(a.uid, a);\n    }\n  }\n  onAddGraphic() {\n    this._graphicReferenceCount++;\n  }\n  onRemoveGraphic(a, r, t) {\n    this._graphicReferenceCount--, this.disable(a, r, t);\n  }\n  forEachMaterialInfo(a) {\n    this._fastTransformOriginalMaterials.forEach(a);\n  }\n  forEachClonedMaterial(a) {\n    this._fastTransformClonedMaterials.forEach(a);\n  }\n  destroy(a) {\n    a.removeMany(Array.from(this._fastTransformClonedMaterials.keys())), a.removeMany(Array.from(this._fastTransformOriginalMaterials.values(), ({\n      material: a\n    }) => a)), this._fastTransformClonedMaterials.clear(), this._fastTransformOriginalMaterials.clear();\n  }\n}\nclass t {\n  constructor() {\n    this._byUid = new Map(), this._byMaterial = new Map();\n  }\n  get materials() {\n    return Array.from(this._byUid.values(), a => a.material);\n  }\n  byUid(a) {\n    return this._byUid.get(a);\n  }\n  byMaterial(a) {\n    return this._byMaterial.get(a);\n  }\n  set(a, r) {\n    this._byUid.set(a, r), this._byMaterial.set(r.material, r);\n  }\n  delete(a) {\n    const r = this._byMaterial.get(a)?.uid;\n    r && (this._byUid.delete(r), this._byMaterial.delete(a));\n  }\n  has(a) {\n    return this._byUid.has(a);\n  }\n  forEachMaterialInfo(a) {\n    this._byUid.forEach(a);\n  }\n  clear() {\n    this._byUid.clear(), this._byMaterial.clear();\n  }\n}\nexport { t as MaterialInfoCache, r as MeshFastUpdateProcessor };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ShaderOutput as e } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { ReloadableShaderModule as t } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as r } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { Default3D as i } from \"../lib/DefaultVertexAttributeLocations.js\";\nimport { Program as l } from \"../lib/Program.js\";\nimport { depthCompareLess as n, stencilWriteMaskOn as o, stencilToolMaskBaseParams as s, stencilBaseAllZerosParams as a } from \"../lib/StencilUtils.js\";\nimport { N as u } from \"../../../../chunks/NativeLine.glsl.js\";\nimport { BlendFactor as c, PrimitiveType as p } from \"../../../webgl/enums.js\";\nimport { separateBlendingParams as m, makePipelineState as d, defaultColorWriteParams as h, defaultDepthWriteParams as g } from \"../../../webgl/renderState.js\";\nclass S extends r {\n  initializeProgram(e) {\n    return new l(e.rctx, S.shader.get().build(this.configuration), i);\n  }\n  initializePipeline() {\n    const t = this.configuration,\n      r = m(c.SRC_ALPHA, c.ONE, c.ONE_MINUS_SRC_ALPHA, c.ONE_MINUS_SRC_ALPHA),\n      i = (e, r = null, i = null) => d({\n        blending: r,\n        depthTest: n,\n        depthWrite: i,\n        colorWrite: h,\n        stencilWrite: t.hasOccludees ? o : null,\n        stencilTest: t.hasOccludees ? e ? s : a : null\n      });\n    return t.output === e.Color ? (this._occludeePipelineState = i(!0, t.transparent ? r : null, g), i(!1, t.transparent ? r : null, g)) : i(!1);\n  }\n  get primitiveType() {\n    return p.LINES;\n  }\n  getPipeline(e) {\n    return e ? this._occludeePipelineState : super.getPipeline();\n  }\n}\nS.shader = new t(u, () => import(\"./NativeLine.glsl.js\"));\nexport { S as NativeLineTechnique };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as o } from \"../../../../chunks/tslib.es6.js\";\nimport { ShaderOutput as t } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { parameter as e } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { DefaultTechniqueConfiguration as r } from \"../materials/DefaultTechniqueConfiguration.js\";\nclass s extends r {\n  constructor() {\n    super(...arguments), this.output = t.Color, this.hasSlicePlane = !1, this.hasVertexColors = !1, this.transparent = !1, this.hasOccludees = !1;\n  }\n}\no([e({\n  count: t.COUNT\n})], s.prototype, \"output\", void 0), o([e()], s.prototype, \"hasSlicePlane\", void 0), o([e()], s.prototype, \"hasVertexColors\", void 0), o([e()], s.prototype, \"transparent\", void 0), o([e()], s.prototype, \"hasOccludees\", void 0);\nexport { s as NativeLineTechniqueConfiguration };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { clamp as t } from \"../../../../core/mathUtils.js\";\nimport { createRenderScreenPointArray3 as r } from \"../../../../core/screenUtils.js\";\nimport { copy as s } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { s as o, f as i, m as a, j as n, g as c, c as l, l as m, p as u } from \"../../../../chunks/vec32.js\";\nimport { create as f } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { ONES as p } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { PlaneIndex as h } from \"../../../../geometry/support/frustum.js\";\nimport { create as d, distance2 as g, fromPoints as j, closestLineSegmentPoint as b } from \"../../../../geometry/support/lineSegment.js\";\nimport { create as S, fromPoints as O, signedDistance as _, getNormal as A } from \"../../../../geometry/support/plane.js\";\nimport { ShaderOutput as L } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport x from \"../lib/GLMaterial.js\";\nimport { Material as y, MaterialParameters as N } from \"../lib/Material.js\";\nimport { RenderSlot as R } from \"../lib/RenderSlot.js\";\nimport { isTranslationMatrix as E } from \"../lib/Util.js\";\nimport { VertexAttribute as M } from \"../lib/VertexAttribute.js\";\nimport { DefaultBufferWriter as T } from \"./DefaultBufferWriter.js\";\nimport { PositionColorLayout as v, PositionLayout as w } from \"./DefaultLayouts.js\";\nimport { NativeLineTechnique as C } from \"../shaders/NativeLineTechnique.js\";\nimport { NativeLineTechniqueConfiguration as P } from \"../shaders/NativeLineTechniqueConfiguration.js\";\nclass V extends y {\n  constructor(e) {\n    super(e, new U()), this._configuration = new P(), this.produces = new Map([[R.OPAQUE_MATERIAL, e => e === L.Color || e === L.Highlight || e === L.ObjectAndLayerIdColor]]);\n  }\n  getConfiguration(e) {\n    return this._configuration.output = e, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.hasVertexColors = this.parameters.hasVertexColors, this._configuration.transparent = this.parameters.color[3] < 1 || this.parameters.width < 1, this._configuration.hasOccludees = this.parameters.hasOccludees, this._configuration;\n  }\n  intersect(t, r, f, p, d, S) {\n    if (!f.options.selectionMode || !t.visible) return;\n    if (!E(r)) return void e.getLogger(\"esri.views.3d.webgl-engine.materials.NativeLineMaterial\").error(\"intersection assumes a translation-only matrix\");\n    const L = t.attributes.get(M.POSITION).data,\n      x = f.camera,\n      y = Z;\n    s(y, f.point);\n    const N = 2;\n    o(z[0], y[0] - N, y[1] + N, 0), o(z[1], y[0] + N, y[1] + N, 0), o(z[2], y[0] + N, y[1] - N, 0), o(z[3], y[0] - N, y[1] - N, 0);\n    for (let e = 0; e < 4; e++) if (!x.unprojectFromRenderScreen(z[e], J[e])) return;\n    O(x.eye, J[0], J[1], K), O(x.eye, J[1], J[2], Y), O(x.eye, J[2], J[3], $), O(x.eye, J[3], J[0], ee);\n    let R = Number.MAX_VALUE,\n      T = 0;\n    for (let e = 0; e < L.length - 5; e += 3) {\n      if (q[0] = L[e] + r[12], q[1] = L[e + 1] + r[13], q[2] = L[e + 2] + r[14], B[0] = L[e + 3] + r[12], B[1] = L[e + 4] + r[13], B[2] = L[e + 5] + r[14], _(K, q) < 0 && _(K, B) < 0 || _(Y, q) < 0 && _(Y, B) < 0 || _($, q) < 0 && _($, B) < 0 || _(ee, q) < 0 && _(ee, B) < 0) continue;\n      if (x.projectToRenderScreen(q, X), x.projectToRenderScreen(B, G), X[2] < 0 && G[2] > 0) {\n        i(D, q, B);\n        const e = x.frustum,\n          t = -_(e[h.NEAR], q) / a(D, A(e[h.NEAR]));\n        n(D, D, t), c(q, q, D), x.projectToRenderScreen(q, X);\n      } else if (X[2] > 0 && G[2] < 0) {\n        i(D, B, q);\n        const e = x.frustum,\n          t = -_(e[h.NEAR], B) / a(D, A(e[h.NEAR]));\n        n(D, D, t), c(B, B, D), x.projectToRenderScreen(B, G);\n      } else if (X[2] < 0 && G[2] < 0) continue;\n      X[2] = 0, G[2] = 0;\n      const t = g(j(X, G, H), y);\n      t < R && (R = t, l(k, q), l(F, B), T = e / 3);\n    }\n    const v = f.rayBegin,\n      w = f.rayEnd;\n    if (R < N * N) {\n      let e = Number.MAX_VALUE;\n      if (b(j(k, F, H), j(v, w, Q), W)) {\n        i(W, W, v);\n        const t = m(W);\n        n(W, W, 1 / t), e = t / u(v, w);\n      }\n      S(e, W, T, !1);\n    }\n  }\n  intersectDraped(e, r, s, o, i, a) {\n    if (!s.options.selectionMode) return;\n    const n = e.attributes.get(M.POSITION).data,\n      c = e.attributes.get(M.SIZE),\n      l = c ? c.data[0] : 0,\n      m = o[0],\n      u = o[1],\n      f = ((l + 1) / 2 + 4) * e.screenToWorldRatio;\n    let p = Number.MAX_VALUE,\n      h = 0;\n    for (let d = 0; d < n.length - 5; d += 3) {\n      const e = n[d],\n        r = n[d + 1],\n        s = m - e,\n        o = u - r,\n        i = n[d + 3] - e,\n        a = n[d + 4] - r,\n        c = t((i * s + a * o) / (i * i + a * a), 0, 1),\n        l = i * c - s,\n        f = a * c - o,\n        g = l * l + f * f;\n      g < p && (p = g, h = d / 3);\n    }\n    p < f * f && i(a.dist, a.normal, h, !1);\n  }\n  createGLMaterial(e) {\n    return new I(e);\n  }\n  createBufferWriter() {\n    const e = this.parameters.hasVertexColors ? v : w;\n    return new T(e);\n  }\n}\nclass I extends x {\n  _updateOccludeeState(e) {\n    e.hasOccludees !== this._material.parameters.hasOccludees && this._material.setParameters({\n      hasOccludees: e.hasOccludees\n    });\n  }\n  beginSlot(e) {\n    return this._output === L.Color && this._updateOccludeeState(e), this.ensureTechnique(C, e);\n  }\n}\nclass U extends N {\n  constructor() {\n    super(...arguments), this.color = p, this.hasVertexColors = !1, this.hasSlicePlane = !1, this.width = 1, this.hasOccludees = !1;\n  }\n}\nconst q = f(),\n  B = f(),\n  D = f(),\n  W = f(),\n  X = r(),\n  G = r(),\n  k = f(),\n  F = f(),\n  H = d(),\n  Q = d(),\n  Z = f(),\n  z = [r(), r(), r(), r()],\n  J = [f(), f(), f(), f()],\n  K = S(),\n  Y = S(),\n  $ = S(),\n  ee = S();\nexport { V as NativeLineMaterial, U as Parameters };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport \"../../../../core/has.js\";\nimport { deg2rad as t } from \"../../../../core/mathUtils.js\";\nimport { normalFromMat4 as r, fromMat4 as o } from \"../../../../core/libs/gl-matrix-2/math/mat3.js\";\nimport { create as n } from \"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";\nimport { fromTranslation as a, multiply as s, invert as i, getTranslation as l } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as c, IDENTITY as u, clone as m } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { ONES as f } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { s as p, g as h, j as g, h as d, t as x, n as _, r as T, m as b, f as y, b as v } from \"../../../../chunks/vec32.js\";\nimport { ZEROS as w, ONES as R, create as M } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { ONES as j } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { canProjectWithoutEngine as A } from \"../../../../geometry/projection.js\";\nimport { computeTranslationToOriginAndRotation as C } from \"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";\nimport { projectBuffer as P } from \"../../../../geometry/projection/projectBuffer.js\";\nimport { projectVectorToPoint as E } from \"../../../../geometry/projection/projectVectorToPoint.js\";\nimport { create as O, empty as N, expandWithBuffer as I, intersectsClippingArea as S } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { newFloatArray as U } from \"../../../../geometry/support/FloatArray.js\";\nimport { getZeroIndexArray as B, getContinuousIndexArray as F } from \"../../../../geometry/support/Indices.js\";\nimport D from \"../../../../geometry/support/MeshComponent.js\";\nimport G from \"../../../../geometry/support/MeshMaterialMetallicRoughness.js\";\nimport L from \"../../../../geometry/support/MeshTextureTransform.js\";\nimport { isRelativeVertexSpace as V, isAbsoluteVertexSpace as $ } from \"../../../../geometry/support/meshVertexSpaceUtils.js\";\nimport { equals as H, isPlateCarree as k } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport { a as q } from \"../../../../chunks/vec3.js\";\nimport { transformNormal as z, transformVectorENUPlateCarree as W, VectorType as Y, transformVectorWMPlateCarree as J, projectNormalToPCPF as K, transformTangent as Q, projectTangentToPCPF as X, project as Z } from \"../../../../geometry/support/meshUtils/projection.js\";\nimport { makeDehydratedPoint as ee } from \"../../../../layers/graphics/dehydratedPoint.js\";\nimport { MeshTransformUpdateAction as te } from \"../../../../layers/graphics/sources/interfaces.js\";\nimport { ViewingMode as re } from \"../../../ViewingMode.js\";\nimport { isEncodedMeshTexture as oe } from \"../../glTF/internal/resourceUtils.js\";\nimport { getTransformMatrix as ne } from \"../../glTF/internal/TextureTransformUtils.js\";\nimport { perObjectElevationAligner as ae } from \"./ElevationAligners.js\";\nimport { needsElevationUpdates3D as se, evaluateElevationInfoAtPoint as ie } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DMeshObject3DGraphicLayer as le } from \"./Graphics3DMeshObject3DGraphicLayer.js\";\nimport { Object3DEdgeState as ce } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as ue } from \"./Graphics3DSymbolLayer.js\";\nimport { MaterialInfoCache as me, MeshFastUpdateProcessor as fe } from \"./MeshFastUpdateProcessor.js\";\nimport { createMaterial as pe } from \"../support/edgeUtils.js\";\nimport { parseColorMixMode as he, encodeSymbolColor as ge } from \"../support/symbolColorUtils.js\";\nimport { debugFlags as de } from \"../../support/debugFlags.js\";\nimport { Attribute as xe } from \"../../webgl-engine/lib/Attribute.js\";\nimport { AlphaDiscardMode as _e, CullFaceOptions as Te } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { ContentObjectType as be } from \"../../webgl-engine/lib/ContentObjectType.js\";\nimport { Geometry as ye } from \"../../webgl-engine/lib/Geometry.js\";\nimport { Object3D as ve } from \"../../webgl-engine/lib/Object3D.js\";\nimport { Texture as we } from \"../../webgl-engine/lib/Texture.js\";\nimport { VertexAttribute as Re } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { DefaultMaterial as Me } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { NativeLineMaterial as je } from \"../../webgl-engine/materials/NativeLineMaterial.js\";\nimport { useSchematicPBR as Ae, defaultSchematicMRRFactors as Ce, defaultAdvancedMRRFactors as Pe } from \"../../webgl-engine/materials/pbrUtils.js\";\nimport { TextureWrapMode as Ee } from \"../../../webgl/enums.js\";\nconst Oe = [\"mesh\"];\nclass Ne extends ue {\n  constructor(e, t, r, o) {\n    super(e, t, r, o), this._materialInfoCache = new me(), this._fastUpdateProcessor = new fe(), this._textures = new Map(), this.ensureDrapedStatus(!1);\n  }\n  async doLoad() {\n    de.DRAW_MESH_GEOMETRY_NORMALS && (this._debugVertexNormalMaterial = new je({\n      color: [1, 0, 1, 1]\n    }), this._debugTangentNormalMaterial = new je({\n      color: [1, .5, 0, 1]\n    }), this._debugFaceNormalMaterial = new je({\n      color: [0, 1, 1, 1]\n    }));\n  }\n  destroy() {\n    super.destroy(), this._textures.forEach(e => e.unload()), this._context.stage.removeMany(this._materialInfoCache.materials), this._context.stage.removeMany(Array.from(this._textures.values())), this._materialInfoCache.clear(), this._textures.clear(), this._fastUpdateProcessor.destroy(this._context.stage);\n  }\n  get materials() {\n    return this._materialInfoCache.materials;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry, Oe, \"fill on mesh-3d\")) return null;\n    const r = this.setGraphicElevationContext(t),\n      o = e.renderingInfo;\n    return this._createAs3DShape(t, o, r, t.uid);\n  }\n  onRemoveGraphic(e) {\n    this._fastUpdateProcessor.onRemoveGraphic(e, this._materialInfoCache, this._context);\n  }\n  layerOpacityChanged(e, t) {\n    const r = this._getLayerOpacity();\n    this._updateMaterialParameters(e => {\n      e.material.setParameters({\n        layerOpacity: r\n      });\n      const t = e.material.parameters;\n      this._setMaterialTransparentParameter(t, e), e.material.setParameters({\n        transparent: t.transparent\n      });\n    }), e.forEach(e => t(e)?.layerOpacityChanged(r, this._context.isAsync));\n  }\n  layerElevationInfoChanged(e, t) {\n    return this.updateGraphics3DGraphicElevationInfo(e, t, se);\n  }\n  slicePlaneEnabledChanged(e, t) {\n    return this._updateMaterialParameters(({\n      material: e\n    }) => {\n      e.setParameters({\n        hasSlicePlane: this._context.slicePlaneEnabled\n      });\n    }), e.forEach(e => t(e)?.slicePlaneEnabledChanged(this._context.slicePlaneEnabled, this._context.isAsync)), !0;\n  }\n  physicalBasedRenderingChanged() {\n    const e = this._usePBR();\n    return this._updateMaterialParameters(({\n      material: t\n    }) => t.setParameters({\n      usePBR: e\n    })), !0;\n  }\n  updateTransform(e, t, r, o) {\n    if (!e.fastTransformUpdatesAllowed) return !1;\n    const n = e.fastTransformUpdatesEnabled;\n    switch (o) {\n      case te.EnableFastUpdates:\n        if (n) return !0;\n        break;\n      case te.DisableFastUpdates:\n        if (!n) return !0;\n        break;\n      default:\n        if (!n) return !!this.updateTransform(e, t, r, te.EnableFastUpdates) && (e.autoDisableFastTransformUpdates(() => this.updateTransform(e, t, r, te.DisableFastUpdates)), !0);\n    }\n    const a = this._context.renderCoordsHelper.spatialReference,\n      s = nt,\n      {\n        origin: i,\n        transform: l\n      } = r;\n    if (!C(t, p(Ze, i.x, i.y, i.z ?? 0), s, a)) return !1;\n    switch (o) {\n      case te.EnableFastUpdates:\n        this._fastUpdateProcessor.enable(e, this._materialInfoCache, this._context);\n        break;\n      case te.DisableFastUpdates:\n        this._fastUpdateProcessor.disable(e, this._materialInfoCache, this._context);\n        break;\n      case te.UpdateFastLocalOrigin:\n        e.updateFastLocalOrigin(s, l, this._context.localOriginFactory);\n    }\n    const {\n      elevationContext: c\n    } = e;\n    c.centerPointInElevationSR = this._getCenterPointInElevationSR(s);\n    const {\n        elevationProvider: u,\n        renderCoordsHelper: m\n      } = this._context,\n      f = (e, t) => ie(e, u, c, m, t);\n    return e.alignedSampledElevation = ae(e, c, u.spatialReference, f, m, s), e.updateTransform(s, l, this._context.isAsync), e.updateAutoDisableFastTransformUpdates(() => this.updateTransform(e, t, r, te.DisableFastUpdates)), !0;\n  }\n  _requiresSymbolVertexColors() {\n    return this._drivenProperties.color || this._drivenProperties.opacity;\n  }\n  _materialPropertiesDefault(e, t) {\n    const r = this._requiresSymbolVertexColors(),\n      o = !!e.vertexAttributes.color,\n      n = !!e.vertexAttributes.tangent;\n    return {\n      hasSymbolVertexColors: r,\n      hasVertexColors: o,\n      hasVertexTangents: n,\n      uid: `vc:${o},vt:${n},vct${t},svc:${r}`\n    };\n  }\n  _materialProperties(e, t, r) {\n    const o = this._materialPropertiesDefault(e, r);\n    if (!t.material) return o;\n    const {\n        color: n,\n        colorTexture: a,\n        colorTextureTransform: s,\n        normalTexture: i,\n        normalTextureTransform: l,\n        doubleSided: c,\n        alphaCutoff: u,\n        alphaMode: m\n      } = t.material,\n      f = Ye(n),\n      p = Ye(a),\n      h = Je(s),\n      g = Ye(i),\n      d = Je(l);\n    if (o.color = n, o.colorTexture = a, o.normalTexture = i, o.uid = `${o.uid},cmuid:${f},ctmuid:${p},cttuid:${h},ntmuid:${g},nttuid:${d},ds:${c},ac:${u},am:${m}`, t.material instanceof G) {\n      const {\n          metallic: e,\n          roughness: r,\n          metallicRoughnessTexture: n,\n          metallicRoughnessTextureTransform: a,\n          emissiveColor: i,\n          emissiveTexture: c,\n          emissiveTextureTransform: u,\n          occlusionTexture: m,\n          occlusionTextureTransform: f\n        } = t.material,\n        p = Ye(n),\n        h = Je(a),\n        g = Ye(i),\n        d = Ye(c),\n        x = Je(u),\n        _ = Ye(m),\n        T = Je(f);\n      o.metallic = e, o.roughness = r, o.metallicRoughnessTexture = n, o.emissiveColor = i, o.emissiveTexture = c, o.occlusionTexture = m, o.colorTextureTransform = $e(s), o.normalTextureTransform = $e(l), o.emissiveTextureTransform = $e(u), o.occlusionTextureTransform = $e(f), o.metallicRoughnessTextureTransform = $e(a), o.uid = `${o.uid},mrm:${e},mrr:${r},mrt:${p},mrtt:${h},emuid:${g},etmuid:${d},ett:${x},otmuid:${_},ott:${T}`;\n    }\n    return o;\n  }\n  _getInternalTextureId(e) {\n    const t = this._getInternalTexture(e, _e.Opaque);\n    return t?.id;\n  }\n  _getInternalTexture(e, t) {\n    const r = We(e);\n    if (!r) return null;\n    const o = `${e.contentHash}/${t}`;\n    let n = this._textures.get(o);\n    if (!n) {\n      let a = null;\n      const s = this._context.stage.renderView.renderingContext.parameters.maxMaxAnisotropy,\n        i = {\n          wrap: He(e.wrap),\n          noUnpackFlip: !0,\n          maxAnisotropy: s,\n          mipmap: s > 1\n        };\n      oe(r) ? (a = r.data, i.preMultiplyAlpha = !1, i.encoding = r.encoding) : (a = r, i.preMultiplyAlpha = t !== _e.Opaque, i.downsampleUncompressed = this._context.graphicsCoreOwner.view.qualitySettings.graphics3D.uncompressedTextureDownsamplingEnabled), n = new we(a, i), this._textures.set(o, n), n.load(this._context.stage.renderView.renderingContext), this._context.stage.add(n);\n    }\n    return n;\n  }\n  _setInternalMaterialParameters(t, r) {\n    if (null != t.color && ze(t.color, r), null != t.colorTexture) {\n      const e = this._getInternalTexture(t.colorTexture, r.textureAlphaMode);\n      e ? (r.textureId = e.id, r.textureAlphaPremultiplied = !!e.parameters.preMultiplyAlpha) : r.textureId = void 0;\n    }\n    t.normalTexture && (r.normalTextureId = this._getInternalTextureId(t.normalTexture)), t.emissiveColor && (r.emissiveFactor = e.toUnitRGB(t.emissiveColor)), t.emissiveTexture && (r.emissiveTextureId = this._getInternalTextureId(t.emissiveTexture)), t.occlusionTexture && (r.occlusionTextureId = this._getInternalTextureId(t.occlusionTexture)), t.metallicRoughnessTexture && (r.metallicRoughnessTextureId = this._getInternalTextureId(t.metallicRoughnessTexture)), r.colorTextureTransformMatrix = ne(t.colorTextureTransform), r.normalTextureTransformMatrix = ne(t.normalTextureTransform);\n    const o = null != t.normalTextureTransform?.scale ? t.normalTextureTransform?.scale : f;\n    r.scale = [o[0], o[1]], r.occlusionTextureTransformMatrix = ne(t.occlusionTextureTransform), r.emissiveTextureTransformMatrix = ne(t.emissiveTextureTransform), r.metallicRoughnessTextureTransformMatrix = ne(t.metallicRoughnessTextureTransform);\n  }\n  _setExternalMaterialParameters(t) {\n    const r = this._drivenProperties.color;\n    let o = this.symbolLayer.material?.colorMixMode ?? null;\n    if (r) t.externalColor = j;else {\n      const r = this.symbolLayer.material?.color ?? null;\n      r ? t.externalColor = e.toUnitRGBA(r) : (o = null, t.externalColor = j);\n    }\n    o && (t.colorMixMode = o), t.castShadows = !!this.symbolLayer.castShadows;\n  }\n  _getOrCreateMaterial(t, r) {\n    const o = r.material?.color,\n      n = r.material?.colorTexture,\n      a = r.material?.alphaMode,\n      s = \"blend\" === a,\n      i = !(\"opaque\" === a) && (qe(t) || null != o && o.a < 1 || n?.transparent || s),\n      l = this._materialProperties(t, r, i),\n      c = this._materialInfoCache.byUid(l.uid);\n    if (c) return c.material;\n    const u = {\n        uid: l.uid,\n        material: null,\n        isComponentTransparent: i,\n        alphaMode: r.material ? r.material.alphaMode : \"opaque\"\n      },\n      m = Ae({\n        normalTexture: l.normalTexture,\n        metallicRoughnessTexture: l.metallicRoughnessTexture,\n        metallicFactor: l.metallic,\n        roughnessFactor: l.roughness,\n        emissiveTexture: l.emissiveTexture,\n        emissiveFactor: e.toUnitRGB(l.emissiveColor),\n        occlusionTexture: l.occlusionTexture\n      }),\n      f = {\n        usePBR: this._usePBR(),\n        isSchematic: m,\n        hasVertexColors: l.hasVertexColors,\n        hasSymbolColors: l.hasSymbolVertexColors,\n        hasVertexTangents: l.hasVertexTangents,\n        ambient: w,\n        diffuse: R,\n        opacity: 1,\n        doubleSided: !0,\n        doubleSidedType: \"winding-order\",\n        cullFace: Te.None,\n        layerOpacity: this._getLayerOpacity(),\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        initTextureTransparent: !0\n      };\n    f.mrrFactors = m ? [...Ce] : [l.metallic, l.roughness, Pe[2]], r.material && (f.doubleSided = r.material.doubleSided, f.cullFace = r.material.doubleSided ? Te.None : Te.Back, f.textureAlphaCutoff = r.material.alphaCutoff), this._setExternalMaterialParameters(f), this._setMaterialTransparentParameter(f, u), this._setInternalMaterialParameters(l, f);\n    const p = new Me(f);\n    return u.material = p, this._materialInfoCache.set(l.uid, u), this._context.stage.add(p), p;\n  }\n  _usePBR() {\n    return this._context.physicalBasedRenderingEnabled;\n  }\n  _setMaterialTransparentParameter(e, t) {\n    e.transparent = this.needsDrivenTransparentPass || t.isComponentTransparent || e.layerOpacity < 1 || e.opacity < 1 || e.externalColor && e.externalColor[3] < 1, \"auto\" === t.alphaMode ? e.textureAlphaMode = e.transparent ? _e.MaskBlend : _e.Opaque : e.textureAlphaMode = \"opaque\" === t.alphaMode ? _e.Opaque : \"mask\" === t.alphaMode ? _e.Mask : _e.Blend;\n  }\n  _createFaceDebugNormals(e, t) {\n    const o = t.length,\n      a = e.spatialReference.isGeographic ? 20015077 / 180 : 1,\n      s = .1 * Math.max(e.extent.width * a, e.extent.height * a, e.extent.zmax - e.extent.zmin),\n      i = [],\n      l = [],\n      c = t[0].transformation,\n      u = r(n(), c);\n    for (let r = 0; r < o; r++) {\n      const e = t[r].attributes.get(Re.POSITION);\n      if (!e) continue;\n      const o = e.data,\n        n = e.indices;\n      for (let t = 0; t < n.length; t += 3) Le(o, n, t, rt), Ge(o, n, t, Ze, et, tt), h(Ze, Ze, et), h(Ze, Ze, tt), g(Ze, Ze, 1 / 3), d(Ze, Ze, c), i.push(...Ze), x(rt, rt, u), _(rt, rt), T(Ze, Ze, rt, s), i.push(...Ze), l.push(l.length), l.push(l.length);\n    }\n    return i.length ? new ye(this._debugFaceNormalMaterial, [[Re.POSITION, new xe(i, l, 3, !0)]], null, be.Line) : null;\n  }\n  _createPerVertexDebugVectors(e, t, a, s, i) {\n    const l = t.length,\n      c = e.spatialReference.isGeographic ? 20015077 / 180 : 1,\n      u = .1 * i * Math.max(e.extent.width * c, e.extent.height * c, e.extent.zmax - e.extent.zmin),\n      m = [],\n      f = [],\n      h = t[0].transformation,\n      g = r(n(), h);\n    a === Re.TANGENT && o(g, h);\n    for (let r = 0; r < l; r++) {\n      const e = t[r],\n        o = e.attributes.get(Re.POSITION),\n        n = e.attributes.get(a);\n      if (!o || !n) continue;\n      const s = o.data,\n        i = o.indices,\n        l = n.data,\n        c = n.indices;\n      for (let t = 0; t < i.length; t++) {\n        const e = 3 * i[t],\n          r = c[t] * n.stride;\n        p(Ze, s[e + 0], s[e + 1], s[e + 2]), d(Ze, Ze, h), m.push(...Ze), p(et, l[r + 0], l[r + 1], l[r + 2]), x(et, et, g), _(et, et), T(Ze, Ze, et, u), m.push(...Ze), f.push(f.length), f.push(f.length);\n      }\n    }\n    return m.length ? new ye(s, [[Re.POSITION, new xe(m, f, 3, !0)]], null, be.Line) : null;\n  }\n  _createAs3DShape(e, t, r, o) {\n    const n = e.geometry;\n    if (\"mesh\" !== n.type) return null;\n    const a = this._createGeometryInfo(n, t, o);\n    if (null == a) return null;\n    const {\n      geometries: s,\n      objectTransformation: i\n    } = a;\n    if (de.DRAW_MESH_GEOMETRY_NORMALS) {\n      const e = this._createPerVertexDebugVectors(n, s, Re.NORMAL, this._debugVertexNormalMaterial, 1),\n        t = this._createPerVertexDebugVectors(n, s, Re.TANGENT, this._debugTangentNormalMaterial, .5),\n        r = this._createFaceDebugNormals(n, s);\n      e && s.push(e), t && s.push(t), r && s.push(r);\n    }\n    const l = new ve({\n      geometries: s,\n      layerUid: this._context.layer.uid,\n      graphicUid: o,\n      isElevationSource: !0\n    });\n    l.transformation = i;\n    const c = pe(this.symbolLayer, {\n        opacity: this._getLayerOpacity()\n      }),\n      u = c ? new ce(s[0].material, [c], {\n        mergeGeometries: !0,\n        hasSlicePlane: this._context.slicePlaneEnabled\n      }) : null,\n      m = new le(this, l, s, null, null, ae, r, u);\n    this._fastUpdateProcessor.onAddGraphic(), m.needsElevationUpdates = se(r.mode), m.useObjectOriginAsAttachmentOrigin = !0, m.fastTransformUpdatesAllowed = this._fastTransformUpdatesAllowed(n), r.centerPointInElevationSR = this._getCenterPointInElevationSR(l.transformation);\n    const {\n        elevationProvider: f,\n        renderCoordsHelper: p\n      } = this._context,\n      h = (e, t) => ie(e, f, r, p, t);\n    return m.alignedSampledElevation = ae(m, r, f.spatialReference, h, p), m;\n  }\n  _fastTransformUpdatesAllowed(e) {\n    const {\n      vertexSpace: t,\n      spatialReference: r\n    } = e;\n    if (!V(t)) return !1;\n    const {\n        type: o\n      } = t,\n      {\n        view: n\n      } = this._context.graphicsCoreOwner,\n      {\n        viewingMode: a\n      } = n.state,\n      s = n.spatialReference;\n    return a === re.Global && \"local\" === o || a === re.Local && H(s, r) && \"georeferenced\" === o && !r.isGeographic;\n  }\n  _getCenterPointInElevationSR(e) {\n    const t = ee(0, 0, 0, null != this._context.elevationProvider.spatialReference ? this._context.elevationProvider.spatialReference : null);\n    return E([e[12], e[13], e[14]], this._context.renderCoordsHelper.spatialReference, t), t;\n  }\n  _passthroughReprojectionInfo(e) {\n    return e.reprojection === it.NONE && !!e.objectTransformation;\n  }\n  _createPositionBuffer(e, t) {\n    const r = e.vertexAttributes.position;\n    let o = r,\n      n = null;\n    if (t.reprojection === it.NONE) return {\n      position: o,\n      georeferencedPositionBuffer: n\n    };\n    const a = t.reprojection === it.RENDER ? t.transformBeforeProject : null;\n    a && (o = q(new Float64Array(o.length), o, a));\n    const {\n      normal: s,\n      tangent: i\n    } = e.vertexAttributes;\n    this._passthroughReprojectionInfo(t) || !s && !i || (n = o);\n    const l = o === r || o === n ? new Float64Array(o.length) : o;\n    return P(o, e.spatialReference, 0, l, this._context.renderCoordsHelper.spatialReference, 0, o.length / 3), {\n      position: l,\n      georeferencedPositionBuffer: n\n    };\n  }\n  _createNormalBuffer(e, t, r, o) {\n    const n = e.vertexAttributes.normal;\n    if (null == n) return null;\n    let a = n;\n    const s = o.reprojection === it.RENDER ? o.transformBeforeProject : null;\n    s && (a = z(a, new Float32Array(a.length), s));\n    const i = this._context.graphicsCoreOwner.view.viewingMode;\n    if (o.reprojection === it.NONE) return a;\n    if (\"local\" === i) {\n      if (!k(this._context.renderCoordsHelper.spatialReference)) return a;\n      if (null == r) return null;\n      if (e.spatialReference.isGeographic) {\n        const e = a === n ? new Float32Array(a.length) : a;\n        return W(a, Y.NORMAL, r, e);\n      }\n      if (e.spatialReference.isWebMercator) {\n        const e = a === n ? new Float32Array(a.length) : a;\n        return J(a, Y.NORMAL, r, e);\n      }\n      return a;\n    }\n    if (null == r) return null;\n    const l = a === n ? new Float32Array(a.length) : a;\n    return K(a, r, t, e.spatialReference, l);\n  }\n  _createTangentBuffer(e, t, r, o) {\n    const n = e.vertexAttributes.tangent;\n    if (null == n) return null;\n    let a = n;\n    const s = o.reprojection === it.RENDER ? o.transformBeforeProject : null;\n    s && (a = Q(a, new Float32Array(a.length), s));\n    const i = this._context.graphicsCoreOwner.view.viewingMode;\n    if (o.reprojection === it.NONE) return a;\n    if (\"local\" === i) {\n      if (!k(this._context.renderCoordsHelper.spatialReference)) return a;\n      if (null == r) return null;\n      if (e.spatialReference.isGeographic) {\n        const e = a === n ? new Float32Array(a.length) : a;\n        return W(a, Y.TANGENT, r, e);\n      }\n      if (e.spatialReference.isWebMercator) {\n        const e = a === n ? new Float32Array(a.length) : a;\n        return J(a, Y.TANGENT, r, e);\n      }\n      return a;\n    }\n    if (null == r) return null;\n    const l = a === n ? new Float32Array(a.length) : a;\n    return X(a, r, t, e.spatialReference, l);\n  }\n  _createSymbolColorBuffer(e) {\n    if (this._requiresSymbolVertexColors()) {\n      const t = this._getVertexOpacityAndColor(e),\n        r = he(this.symbolLayer?.material?.colorMixMode),\n        o = new Uint8Array(4);\n      return ge(t, r, o), o;\n    }\n    return null;\n  }\n  _createBuffers(e, t) {\n    const r = e.vertexAttributes && e.vertexAttributes.position;\n    if (!r) return this.logger.warn(\"Mesh geometry must contain position vertex attributes\"), null;\n    const o = e.vertexAttributes.normal,\n      n = e.vertexAttributes.uv,\n      a = e.vertexAttributes.tangent;\n    if (o && o.length !== r.length) return this.logger.warn(\"Mesh normal vertex buffer must contain the same number of elements as the position buffer\"), null;\n    if (a && a.length / 4 != r.length / 3) return this.logger.warn(\"Mesh tangent vertex buffer must contain the same number of elements as the position buffer\"), null;\n    if (n && n.length / 2 != r.length / 3) return this.logger.warn(\"Mesh uv vertex buffer must contain the same number of elements as the position buffer\"), null;\n    const s = this._computeReprojectionInfo(e),\n      {\n        position: i,\n        georeferencedPositionBuffer: l\n      } = this._createPositionBuffer(e, s),\n      u = Ke(e),\n      m = this._createSymbolColorBuffer(t),\n      f = this._createNormalBuffer(e, i, l, s),\n      p = this._createTangentBuffer(e, i, l, s),\n      h = n,\n      {\n        transformation: g,\n        position: d,\n        normal: x,\n        tangent: _\n      } = this._passthroughReprojectionInfo(s) ? {\n        transformation: s.objectTransformation,\n        position: i,\n        normal: f,\n        tangent: p\n      } : this._transformOriginLocal(e, i, f, p);\n    return {\n      positionBuffer: d,\n      normalBuffer: x,\n      tangentBuffer: _,\n      uvBuffer: h,\n      colorBuffer: u,\n      symbolColorBuffer: m,\n      objectTransformation: g,\n      geometryTransformation: s.reprojection === it.NONE && s.geometryTransformation ? s.geometryTransformation : c()\n    };\n  }\n  _computeReprojectionInfo(e) {\n    const {\n        vertexSpace: t\n      } = e,\n      r = \"georeferenced\" === t.type ? H(this._context.renderCoordsHelper.spatialReference, e.spatialReference) ? it.NONE : it.RENDER : it.NONE;\n    if ($(t)) return {\n      reprojection: r\n    };\n    const o = t.origin,\n      n = c(),\n      i = e.transform?.localMatrix ?? u;\n    if (r === it.NONE) {\n      C(e.spatialReference, o, n, this._context.renderCoordsHelper.spatialReference);\n      return {\n        reprojection: r,\n        objectTransformation: n,\n        geometryTransformation: m(i)\n      };\n    }\n    const l = a(c(), o);\n    return s(l, l, i), {\n      reprojection: r,\n      transformBeforeProject: l\n    };\n  }\n  _transformOriginLocal(e, t, r, o) {\n    const n = this._context.renderCoordsHelper.spatialReference,\n      a = e.anchor;\n    Xe[0] = a.x, Xe[1] = a.y, Xe[2] = a.z ?? 0;\n    const s = c();\n    C(e.spatialReference, Xe, s, n), i(ot, s);\n    const {\n        position: l,\n        normal: u,\n        tangent: m\n      } = e.vertexAttributes,\n      f = t === l ? new Float64Array(t.length) : t;\n    q(f, t, ot);\n    const p = r ? r === u ? new Float32Array(r.length) : r : null,\n      h = o ? o === m ? new Float32Array(o.length) : o : null;\n    return r && p && z(r, p, ot), o && h && Q(o, h, ot), {\n      transformation: s,\n      position: f,\n      normal: p,\n      tangent: h\n    };\n  }\n  _validateFaces(e, t) {\n    const r = e.vertexAttributes.position.length / 3,\n      o = t.faces;\n    if (o) {\n      let e = -1;\n      for (let t = 0; t < o.length; t++) {\n        const r = o[t];\n        r > e && (e = r);\n      }\n      if (r <= e) return this.logger.warn(`Vertex index ${e} is out of bounds of the mesh position buffer`), !1;\n    } else if (r % 3 != 0) return this.logger.warn(\"Mesh position buffer length must be a multiple of 9 if no component faces are defined (3 values per vertex * 3 vertices per triangle)\"), !1;\n    return !0;\n  }\n  _isOutsideClippingArea(e) {\n    if (!this._context.clippingExtent) return !1;\n    const t = e.vertexAttributes?.position;\n    if (!t) return !1;\n    const r = this._context.elevationProvider.spatialReference,\n      o = Z({\n        positions: t,\n        transform: e.transform,\n        vertexSpace: e.vertexSpace,\n        inSpatialReference: e.spatialReference,\n        outSpatialReference: r ?? e.spatialReference,\n        localMode: this._context.stage.viewingMode === re.Local\n      });\n    if (!o) return !1;\n    const n = o.length / 3;\n    return N(at), I(at, o, 0, n), !S(at, this._context.clippingExtent);\n  }\n  _createGeometryInfo(e, t, r) {\n    if (!A(e.spatialReference, this._context.renderCoordsHelper.spatialReference)) return this.logger.warn(\"Geometry spatial reference is not compatible with the view\"), null;\n    if (!this._validateVertexSpace(e)) return null;\n    if (this._isOutsideClippingArea(e)) return null;\n    const o = this._createBuffers(e, t);\n    if (null == o) return null;\n    const {\n        positionBuffer: n,\n        uvBuffer: a,\n        colorBuffer: s,\n        symbolColorBuffer: i,\n        normalBuffer: c,\n        tangentBuffer: u,\n        objectTransformation: m,\n        geometryTransformation: f\n      } = o,\n      p = Ve(e),\n      h = new Array();\n    let g = !1;\n    const d = l(Ze, m),\n      x = this._context.localOriginFactory.getOrigin(d);\n    for (const l of p) {\n      if (!this._validateFaces(e, l)) return null;\n      const t = Se(e, l);\n      if (0 === t.length) continue;\n      const o = Ue(n, c, l, t);\n      o.didFlipNormals && (g = !0);\n      const m = [[Re.POSITION, new xe(n, t, 3, !0)], [Re.NORMAL, new xe(o.normals, o.indices, 3, !0)]];\n      s && m.push([Re.COLOR, new xe(s, t, 4, !0)]), i && m.push([Re.SYMBOLCOLOR, new xe(i, B(t.length), 4, !0)]), a && m.push([Re.UV0, new xe(a, t, 2, !0)]), u && m.push([Re.TANGENT, new xe(u, t, 4, !0)]);\n      const p = this._context.stage.renderView.getObjectAndLayerIdColor({\n          graphicUid: r,\n          layerUid: this._context.layer.uid\n        }),\n        d = this._getOrCreateMaterial(e, l),\n        _ = new ye(d, m, null, be.Mesh, p);\n      _.transformation = f, _.localOrigin = x, h.push(_);\n    }\n    return g && this.logger.warn(\"Normals have been automatically flipped to be consistent with the counter clock wise face winding order. It is better to generate mesh geometries that have consistent normals.\"), {\n      geometries: h,\n      objectTransformation: m\n    };\n  }\n  _updateMaterialParameters(e) {\n    this._materialInfoCache.forEachMaterialInfo(e), this._fastUpdateProcessor.forEachMaterialInfo(e), this._fastUpdateProcessor.forEachClonedMaterial((e, t) => {\n      t.setParameters(e.parameters);\n    });\n  }\n  _validateVertexSpace(e) {\n    const {\n        _context: {\n          graphicsCoreOwner: {\n            view: {\n              state: {\n                viewingMode: t\n              }\n            }\n          }\n        }\n      } = this,\n      {\n        vertexSpace: r\n      } = e;\n    return t !== re.Local || \"local\" !== r.type || (this.logger.warn(\"Displaying a mesh with a local vertex space in a view in local viewing mode is not supported.\"), !1);\n  }\n  test() {\n    return {\n      ...super.test(),\n      materials: this._materialInfoCache.materials\n    };\n  }\n}\nclass Ie {\n  constructor(e, t, r) {\n    this.normals = e, this.indices = t, this.didFlipNormals = r;\n  }\n}\nfunction Se(e, t) {\n  return t.faces ?? F(e.vertexAttributes.position.length / 3);\n}\nfunction Ue(e, t, r, o) {\n  switch (r.shading || \"flat\") {\n    default:\n    case \"source\":\n      return Fe(e, t, r, o);\n    case \"flat\":\n      return Be(e, o);\n    case \"smooth\":\n      return De(e, o);\n  }\n}\nfunction Be(e, t) {\n  const r = U(t.length),\n    o = new Array(3 * t.length);\n  for (let n = 0; n < t.length; n += 3) {\n    const a = Le(e, t, n, rt);\n    for (let e = 0; e < 3; e++) r[n + e] = a[e], o[n + e] = n / 3;\n  }\n  return new Ie(r, o, !1);\n}\nfunction Fe(e, t, r, o) {\n  if (null == t) return Be(e, o);\n  let n = !1;\n  if (!r.trustSourceNormals) for (let a = 0; a < o.length; a += 3) {\n    Le(e, o, a, rt);\n    for (let e = 0; e < 3; e++) {\n      const r = 3 * o[a + e];\n      Ze[0] = t[r], Ze[1] = t[r + 1], Ze[2] = t[r + 2], b(rt, Ze) < 0 && (t[r] = -t[r], t[r + 1] = -t[r + 1], t[r + 2] = -t[r + 2], n = !0);\n    }\n  }\n  return new Ie(t, o, n);\n}\nfunction De(e, t) {\n  const r = {};\n  for (let a = 0; a < t.length; a += 3) {\n    const o = Le(e, t, a, rt);\n    for (let e = 0; e < 3; e++) {\n      const n = t[a + e];\n      let s = r[n];\n      s || (s = {\n        normal: M(),\n        count: 0\n      }, r[n] = s), h(s.normal, s.normal, o), s.count++;\n    }\n  }\n  const o = U(3 * t.length),\n    n = new Array(3 * t.length);\n  for (let a = 0; a < t.length; a++) {\n    const e = r[t[a]];\n    1 !== e.count && (_(e.normal, e.normal), e.count = 1);\n    for (let t = 0; t < 3; t++) o[3 * a + t] = e.normal[t];\n    n[a] = a;\n  }\n  return new Ie(o, n, !1);\n}\nfunction Ge(e, t, r, o, n, a) {\n  const s = 3 * t[r],\n    i = 3 * t[r + 1],\n    l = 3 * t[r + 2];\n  o[0] = e[s], o[1] = e[s + 1], o[2] = e[s + 2], n[0] = e[i], n[1] = e[i + 1], n[2] = e[i + 2], a[0] = e[l], a[1] = e[l + 1], a[2] = e[l + 2];\n}\nfunction Le(e, t, r, o) {\n  return Ge(e, t, r, Ze, et, tt), y(et, et, Ze), y(tt, tt, Ze), v(Ze, et, tt), _(o, Ze), o;\n}\nfunction Ve(e) {\n  return e.components ?? st;\n}\nfunction $e(e) {\n  if (!e) return null;\n  const {\n    scale: r,\n    offset: o,\n    rotation: n\n  } = e;\n  return {\n    scale: r,\n    offset: o,\n    rotation: t(n)\n  };\n}\nfunction He(e = \"repeat\") {\n  if (\"string\" == typeof e) {\n    const t = ke(e);\n    return {\n      s: t,\n      t\n    };\n  }\n  return {\n    s: ke(e.horizontal),\n    t: ke(e.vertical)\n  };\n}\nfunction ke(e) {\n  switch (e) {\n    case \"clamp\":\n      return Ee.CLAMP_TO_EDGE;\n    case \"mirror\":\n      return Ee.MIRRORED_REPEAT;\n    default:\n      return Ee.REPEAT;\n  }\n}\nfunction qe(e) {\n  const t = e.vertexAttributes.color;\n  if (null == t) return !1;\n  for (let r = 3; r < t.length; r += 4) if (255 !== t[r]) return !0;\n  return !1;\n}\nfunction ze(t, r) {\n  r.diffuse = e.toUnitRGB(t), r.opacity = t.a;\n}\nfunction We(e) {\n  return e.data ?? e.url;\n}\nfunction Ye(t) {\n  return null == t ? \"-\" : t instanceof e ? t.toHex() : t.contentHash;\n}\nfunction Je(e) {\n  const {\n    offset: t,\n    scale: r,\n    rotation: o\n  } = e ?? Qe;\n  return `${t[0]},${t[1]},${o},${r[0]},${r[1]}`;\n}\nfunction Ke(e) {\n  return e.vertexAttributes.color;\n}\nconst Qe = new L(),\n  Xe = M(),\n  Ze = M(),\n  et = M(),\n  tt = M(),\n  rt = M(),\n  ot = c(),\n  nt = c(),\n  at = O(),\n  st = [new D()];\nvar it;\n!function (e) {\n  e[e.NONE = 0] = \"NONE\", e[e.RENDER = 1] = \"RENDER\";\n}(it || (it = {}));\nexport { Ne as Graphics3DMeshFillSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as e } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { h as t, s as i } from \"../../../../chunks/vec32.js\";\nimport { create as n } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { empty as s, expandWithVec3 as a, create as r, isPoint as o, center as l, offset as h } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { evaluateElevationInfoAtPoint as c } from \"./elevationAlignmentUtils.js\";\nimport { setContextFeature as d } from \"./featureExpressionInfoUtils.js\";\nimport { demResolutionForBoundingBox as g } from \"./graphicUtils.js\";\nimport { Object3DState as m } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Object3DStateID as f } from \"../../webgl-engine/lib/Object3DStateID.js\";\nclass p {\n  constructor(e, t, i, n) {\n    this.graphics3DSymbolLayer = e, this.instanceIndex = t, this.elevationAligner = i, this.elevationContext = n, this.type = \"lod-instance\", this._highlights = new Set(), this.alignedSampledElevation = 0, this.isElevationSource = !1, this.needsElevationUpdates = !1;\n  }\n  initialize() {}\n  setVisibility(e) {\n    const t = this._lodRenderer.instanceData;\n    e !== t.getVisible(this.instanceIndex) && t.setVisible(this.instanceIndex, e);\n  }\n  destroy() {\n    null != this.instanceIndex && (this._lodRenderer.instanceData.removeInstance(this.instanceIndex), this.graphics3DSymbolLayer.notifyDestroyGraphicLayer(this));\n  }\n  alignWithElevation(e, t, i) {\n    if (this.elevationAligner) {\n      d(this.elevationContext.featureExpressionInfoContext, i);\n      const n = (i, n) => c(i, e, this.elevationContext, t, n),\n        s = this.elevationAligner(this, this.elevationContext, e.spatialReference, n, t);\n      null != s && (this.alignedSampledElevation = s);\n    }\n  }\n  getCenterObjectSpace(e = n()) {\n    return this._lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex, I), t(e, this._lodRenderer.baseBoundingSphere.center, I);\n  }\n  getBoundingBoxObjectSpace(e = r()) {\n    this._lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex, I);\n    const n = this._lodRenderer.baseBoundingBox;\n    s(e);\n    for (let s = 0; s < 8; ++s) i(x, 1 & s ? n[3] : n[0], 2 & s ? n[4] : n[1], 4 & s ? n[5] : n[2]), t(x, x, I), a(e, x);\n    return e;\n  }\n  computeAttachmentOrigin(e) {\n    this._lodRenderer.instanceData.getGlobalTransform(this.instanceIndex, I), e.render.origin[0] += I[12], e.render.origin[1] += I[13], e.render.origin[2] += I[14], e.render.num++;\n  }\n  async getProjectedBoundingBox(e, i, n, a, r) {\n    const c = this.getBoundingBoxObjectSpace(r),\n      d = b,\n      m = o(c) ? 1 : d.length;\n    this._lodRenderer.instanceData.getGlobalTransform(this.instanceIndex, I);\n    for (let s = 0; s < m; s++) {\n      const e = d[s];\n      x[0] = c[e[0]], x[1] = c[e[1]], x[2] = c[e[2]], t(x, x, I), u[3 * s] = x[0], u[3 * s + 1] = x[1], u[3 * s + 2] = x[2];\n    }\n    if (!e(u, 0, m)) return null;\n    s(c);\n    let f = null;\n    this.calculateRelativeScreenBounds && (f = this.calculateRelativeScreenBounds());\n    for (let t = 0; t < 3 * m; t += 3) {\n      for (let e = 0; e < 3; e++) c[e] = Math.min(c[e], u[t + e]), c[e + 3] = Math.max(c[e + 3], u[t + e]);\n      f && n.push({\n        location: u.slice(t, t + 3),\n        screenSpaceBoundingRect: f\n      });\n    }\n    if (i && (l(c, v), \"absolute-height\" !== this.elevationContext.mode)) {\n      let e;\n      const t = g(c, i.service.spatialReference, i);\n      try {\n        e = await i.service.queryElevation(v[0], v[1], a, t, \"ground\");\n      } catch (p) {}\n      null != e && h(c, 0, 0, -this.alignedSampledElevation + e);\n    }\n    return c;\n  }\n  addObjectState(e, t) {\n    if (e === m.Highlight) {\n      const i = new f(e);\n      this._addHighlightId(i), t.addExternal(e => {\n        this._removeHighlightId(e);\n      }, i);\n    }\n  }\n  removeObjectState(e) {\n    this._highlights.forEach(t => e.remove(t));\n  }\n  _addHighlightId(e) {\n    this._highlights.add(e), this._lodRenderer.instanceData.setHighlight(this.instanceIndex, !0);\n  }\n  _removeHighlightId(e) {\n    this._highlights.delete(e), this._lodRenderer.instanceData.setHighlight(this.instanceIndex, this._highlights.size > 0);\n  }\n  get _lodRenderer() {\n    return this.graphics3DSymbolLayer.lodRenderer;\n  }\n}\nconst u = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  x = n(),\n  v = n(),\n  b = [[0, 1, 2], [3, 1, 2], [0, 4, 2], [3, 4, 2], [0, 1, 5], [3, 1, 5], [0, 4, 5], [3, 4, 5]],\n  I = e();\nexport { p as Graphics3DLodInstanceGraphicLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { LodResources as e, LodComponentResources as o, LodLevelResources as t } from \"../../webgl-engine/lib/lodRendering/LodResources.js\";\nfunction n(e, n) {\n  const r = e.stageResources.geometries.map(t => new o(t, e.stageResources.textures)),\n    u = null == e.lodThreshold || 0 === e.lodThreshold && n > 0 ? s(r) : e.lodThreshold;\n  return new t(r, u, e.pivotOffset);\n}\nfunction r(o) {\n  return new e(o.map((e, o) => n(e, o)));\n}\nfunction s(e) {\n  const o = e.reduce((e, {\n    geometry: o\n  }) => e + o.indexCount / 3, 0);\n  return Math.sqrt(o * u / Math.PI);\n}\nconst u = 20;\nexport { r as makeLodResources };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport l from \"../../../../core/Error.js\";\nimport { fetchStyle as t, symbolUrlFromStyleItem as s } from \"../../../../symbols/support/styleUtils.js\";\nimport { getStyleItemFromStyle as e, fetchSymbolFromStyle as n } from \"../../../../symbols/support/webStyleSymbolUtils.js\";\nasync function r(r) {\n  if (null === r || null == r.styleName && null == r.styleUrl) return null;\n  const o = r.name;\n  if (null == o) throw new l(\"symbolstyleutils:style-symbol-reference-name-missing\", \"Missing name in style symbol reference\");\n  const u = {\n      portal: r.portal\n    },\n    i = await t(r, u).catch(() => null);\n  if (null === i) return null;\n  const m = e(o, i.data);\n  if (m && !m.formatInfos?.some(l => \"gltf_basisu\" === l.type)) return null;\n  const a = await n(i, o, u, \"webRef\", (l, t) => s(l, t, [\"gltf_basisu\", \"gltf\"])).catch(() => null);\n  if (null === a || \"point-3d\" !== a.type) return null;\n  const y = a.symbolLayers.items[0];\n  return \"object\" === y.type ? y.resource : null;\n}\nexport { r as getResourceUrlFromSymbolStyle };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { BufferObject as e } from \"../../../../webgl/BufferObject.js\";\nimport { Usage as t } from \"../../../../webgl/enums.js\";\nclass r {\n  constructor(r, i, s) {\n    this._elementSize = i, this._buffer = e.createVertex(r, t.STATIC_DRAW), this.resize(s);\n  }\n  destroy() {\n    this._buffer.dispose();\n  }\n  get elementSize() {\n    return this._elementSize;\n  }\n  get capacity() {\n    return this._capacity;\n  }\n  get array() {\n    return this._array;\n  }\n  get buffer() {\n    return this._buffer;\n  }\n  get usedMemory() {\n    return this._array.byteLength + this._buffer.usedMemory;\n  }\n  copyRange(e, t, r, i = 0) {\n    const s = new Uint8Array(this.array, e * this.elementSize, (t - e) * this.elementSize);\n    new Uint8Array(r.array, i * this.elementSize).set(s);\n  }\n  transferAll() {\n    this._buffer.setData(this._array);\n  }\n  transferRange(e, t) {\n    const r = e * this._elementSize,\n      i = t * this._elementSize;\n    this._buffer.setSubData(new Uint8Array(this._array), r, r, i);\n  }\n  resize(e) {\n    const t = e * this._elementSize,\n      r = new ArrayBuffer(t);\n    this._array && (e >= this._capacity ? new Uint8Array(r).set(new Uint8Array(this._array)) : new Uint8Array(r).set(new Uint8Array(this._array).subarray(0, e * this._elementSize))), this._array = r, this._buffer.setSize(t), this._capacity = e;\n  }\n}\nexport { r as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { reallocShrinkThreshold as t, reallocGrowthFactor as i, reallocShrinkFactor as e } from \"../../../../../core/arrayUtils.js\";\nimport { BufferViewVec3f as s, BufferViewMat3f as a, BufferViewVec4f as r, BufferViewVec4u8 as n } from \"../../../../../geometry/support/buffer/BufferView.js\";\nimport { assert as h } from \"../Util.js\";\nimport { VertexAttribute as d } from \"../VertexAttribute.js\";\nimport _ from \"./BackedBufferObject.js\";\nclass c {\n  constructor(t) {\n    this.modelOriginHi = t.getField(d.INSTANCEMODELORIGINHI, s), this.modelOriginLo = t.getField(d.INSTANCEMODELORIGINLO, s), this.model = t.getField(d.INSTANCEMODEL, a), this.modelNormal = t.getField(d.INSTANCEMODELNORMAL, a), this.featureAttribute = t.getField(d.INSTANCEFEATUREATTRIBUTE, r), this.color = t.getField(d.INSTANCECOLOR, n), this.objectAndLayerIdColor = t.getField(d.INSTANCEOBJECTANDLAYERIDCOLOR, n);\n  }\n}\nclass f {\n  constructor(t, i) {\n    this._rctx = t, this._instanceBufferLayout = i, this._headIndex = 0, this._tailIndex = 0, this._firstIndex = null, this._captureFirstIndex = !0, this._updating = !1, this._prevHeadIndex = 0, this._resized = !1, this._capacity = 1;\n  }\n  destroy() {\n    this._buffer && this._buffer.destroy();\n  }\n  get buffer() {\n    return this._buffer.buffer;\n  }\n  get view() {\n    return this._view;\n  }\n  get capacity() {\n    return this._capacity;\n  }\n  get size() {\n    const t = this._headIndex,\n      i = this._tailIndex;\n    return t >= i ? t - i : t + this._capacity - i;\n  }\n  get isEmpty() {\n    return this._headIndex === this._tailIndex;\n  }\n  get isFull() {\n    return this._tailIndex === (this._headIndex + 1) % this._capacity;\n  }\n  get headIndex() {\n    return this._headIndex;\n  }\n  get tailIndex() {\n    return this._tailIndex;\n  }\n  get firstIndex() {\n    return this._firstIndex;\n  }\n  get usedMemory() {\n    return this._buffer?.usedMemory ?? 0;\n  }\n  reset() {\n    this._headIndex = 0, this._tailIndex = 0, this._firstIndex = null;\n  }\n  startUpdateCycle() {\n    this._captureFirstIndex = !0;\n  }\n  beginUpdate() {\n    h(!this._updating, \"already updating\"), this._updating = !0, this._prevHeadIndex = this._headIndex;\n  }\n  endUpdate() {\n    h(this._updating, \"not updating\"), this.size < t * this.capacity && this._shrink(), this._resized ? (this._buffer.transferAll(), this._resized = !1) : this._transferRange(this._prevHeadIndex, this._headIndex), this._updating = !1;\n  }\n  allocateHead() {\n    h(this._updating, \"not updating\"), this.isFull && this._grow();\n    const t = this.headIndex;\n    return this._captureFirstIndex && (this._firstIndex = t, this._captureFirstIndex = !1), this._incrementHead(), h(this._headIndex !== this._tailIndex, \"invalid pointers\"), t;\n  }\n  freeTail() {\n    h(this._updating, \"not updating\"), h(this.size > 0, \"invalid size\");\n    const t = this._tailIndex === this._firstIndex;\n    this._incrementTail(), t && (this._firstIndex = this._tailIndex);\n  }\n  _grow() {\n    const t = Math.max(u, Math.floor(this._capacity * i));\n    this._resize(t);\n  }\n  _shrink() {\n    const t = Math.max(u, Math.floor(this._capacity * e));\n    this._resize(t);\n  }\n  _resize(t) {\n    if (h(this._updating, \"not updating\"), t === this._capacity) return;\n    const i = new _(this._rctx, this._instanceBufferLayout.stride, t);\n    if (this._buffer) {\n      this._firstIndex && (this._firstIndex = (this._firstIndex + this._capacity - this._tailIndex) % this._capacity);\n      const t = this.size,\n        e = this._compactInstances(i);\n      h(e === t, \"invalid compaction\"), this._buffer.destroy(), this._tailIndex = 0, this._headIndex = e, this._prevHeadIndex = 0;\n    }\n    this._resized = !0, this._capacity = t, this._buffer = i, this._view = new c(this._instanceBufferLayout.createView(this._buffer.array));\n  }\n  _compactInstances(t) {\n    const i = this._headIndex,\n      e = this._tailIndex;\n    return e < i ? (this._buffer.copyRange(e, i, t), i - e) : e > i ? (this._buffer.copyRange(e, this._capacity, t), i > 0 && this._buffer.copyRange(0, i, t, this._capacity - e), i + (this._capacity - e)) : 0;\n  }\n  _incrementHead(t = 1) {\n    this._headIndex = (this._headIndex + t) % this._capacity;\n  }\n  _incrementTail(t = 1) {\n    this._tailIndex = (this._tailIndex + t) % this._capacity;\n  }\n  _transferRange(t, i) {\n    t < i ? this._buffer.transferRange(t, i) : t > i && (i > 0 && this._buffer.transferRange(0, i), this._buffer.transferRange(t, this._capacity));\n  }\n}\nconst u = 64;\nexport { f as RenderInstanceData, c as RenderInstanceDataView, u as initialCapacity };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../../core/Accessor.js\";\nimport { reallocGrowthFactor as s } from \"../../../../../core/arrayUtils.js\";\nimport i from \"../../../../../core/Evented.js\";\nimport { property as a } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/Logger.js\";\nimport { subclass as r } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { fromMat4 as o, invert as n, transpose as l } from \"../../../../../core/libs/gl-matrix-2/math/mat3.js\";\nimport { create as c } from \"../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";\nimport { multiply as h } from \"../../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as m } from \"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { s as g } from \"../../../../../chunks/vec32.js\";\nimport { create as f } from \"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { BufferViewMat4f64 as d, BufferViewVec3f64 as T, BufferViewMat3f as _, BufferViewVec2f as u, BufferViewVec4f64 as L, BufferViewVec4f as A, BufferViewVec4u8 as E, BufferViewUint8 as p } from \"../../../../../geometry/support/buffer/BufferView.js\";\nimport { scaleFromMatrix as O } from \"../../../support/mathUtils.js\";\nimport { newLayout as v } from \"../../../support/buffer/InterleavedLayout.js\";\nimport { assert as I } from \"../Util.js\";\nimport { VertexAttribute as F } from \"../VertexAttribute.js\";\nimport { initialCapacity as S } from \"./RenderInstanceData.js\";\nvar M;\nfunction C(t) {\n  let e = v().mat4f64(F.LOCALTRANSFORM).mat4f64(F.GLOBALTRANSFORM).vec4f64(F.BOUNDINGSPHERE).vec3f64(F.MODELORIGIN).mat3f(F.INSTANCEMODEL).mat3f(F.INSTANCEMODELNORMAL).vec2f(F.MODELSCALEFACTORS);\n  return t.includes(F.FEATUREATTRIBUTE) && (e = e.vec4f(F.FEATUREATTRIBUTE)), t.includes(F.COLOR) && (e = e.vec4u8(F.COLOR)), t.includes(F.OBJECTANDLAYERIDCOLOR) && (e = e.vec4u8(F.OBJECTANDLAYERIDCOLOR)), e = e.u8(F.STATE).u8(F.LODLEVEL), e;\n}\n!function (t) {\n  t[t.ALLOCATED = 1] = \"ALLOCATED\", t[t.DEFAULT_ACTIVE = 2] = \"DEFAULT_ACTIVE\", t[t.VISIBLE = 4] = \"VISIBLE\", t[t.HIGHLIGHT = 8] = \"HIGHLIGHT\", t[t.HIGHLIGHT_ACTIVE = 16] = \"HIGHLIGHT_ACTIVE\", t[t.REMOVE = 32] = \"REMOVE\", t[t.TRANSFORM_CHANGED = 64] = \"TRANSFORM_CHANGED\", t[t.ACTIVE = 18] = \"ACTIVE\";\n}(M || (M = {}));\nclass R {\n  constructor(t) {\n    this.localTransform = t.getField(F.LOCALTRANSFORM, d), this.globalTransform = t.getField(F.GLOBALTRANSFORM, d), this.modelOrigin = t.getField(F.MODELORIGIN, T), this.model = t.getField(F.INSTANCEMODEL, _), this.modelNormal = t.getField(F.INSTANCEMODELNORMAL, _), this.modelScaleFactors = t.getField(F.MODELSCALEFACTORS, u), this.boundingSphere = t.getField(F.BOUNDINGSPHERE, L), this.featureAttribute = t.getField(F.FEATUREATTRIBUTE, A), this.color = t.getField(F.COLOR, E), this.objectAndLayerIdColor = t.getField(F.OBJECTANDLAYERIDCOLOR, E), this.state = t.getField(F.STATE, p), this.lodLevel = t.getField(F.LODLEVEL, p);\n  }\n}\nlet b = class extends e {\n  constructor(t, e) {\n    super(t), this.events = new i(), this._capacity = 0, this._size = 0, this._next = 0, this._layout = C(e), this._capacity = S, this._buffer = this._layout.createBuffer(this._capacity), this._view = new R(this._buffer);\n  }\n  get capacity() {\n    return this._capacity;\n  }\n  get size() {\n    return this._size;\n  }\n  get view() {\n    return this._view;\n  }\n  addInstance() {\n    this._size + 1 > this._capacity && this._grow();\n    const t = this._findSlot();\n    return this._view.state.set(t, M.ALLOCATED), this._size++, this.events.emit(\"instances-changed\"), t;\n  }\n  removeInstance(t) {\n    const e = this._view.state;\n    I(t >= 0 && t < this._capacity && !!(e.get(t) & M.ALLOCATED), \"invalid instance handle\"), this._getStateFlag(t, M.ACTIVE) ? this._setStateFlags(t, M.REMOVE) : this.freeInstance(t), this.events.emit(\"instances-changed\");\n  }\n  freeInstance(t) {\n    const e = this._view.state;\n    I(t >= 0 && t < this._capacity && !!(e.get(t) & M.ALLOCATED), \"invalid instance handle\"), e.set(t, 0), this._size--;\n  }\n  setLocalTransform(t, e, s = !0) {\n    this._view.localTransform.setMat(t, e), s && this.updateModelTransform(t);\n  }\n  getLocalTransform(t, e) {\n    this._view.localTransform.getMat(t, e);\n  }\n  setGlobalTransform(t, e, s = !0) {\n    this._view.globalTransform.setMat(t, e), s && this.updateModelTransform(t);\n  }\n  getGlobalTransform(t, e) {\n    this._view.globalTransform.getMat(t, e);\n  }\n  updateModelTransform(t) {\n    const e = this._view,\n      s = y,\n      i = D;\n    e.localTransform.getMat(t, N), e.globalTransform.getMat(t, V);\n    const a = h(V, V, N);\n    g(s, a[12], a[13], a[14]), e.modelOrigin.setVec(t, s), o(i, a), e.model.setMat(t, i);\n    const r = O(y, a);\n    r.sort(), e.modelScaleFactors.set(t, 0, r[1]), e.modelScaleFactors.set(t, 1, r[2]), n(i, i), l(i, i), e.modelNormal.setMat(t, i), this._setStateFlags(t, M.TRANSFORM_CHANGED), this.events.emit(\"instance-transform-changed\", {\n      index: t\n    });\n  }\n  getModelTransform(t, e) {\n    const s = this._view;\n    s.model.getMat(t, D), s.modelOrigin.getVec(t, y), e[0] = D[0], e[1] = D[1], e[2] = D[2], e[3] = 0, e[4] = D[3], e[5] = D[4], e[6] = D[5], e[7] = 0, e[8] = D[6], e[9] = D[7], e[10] = D[8], e[11] = 0, e[12] = y[0], e[13] = y[1], e[14] = y[2], e[15] = 1;\n  }\n  applyShaderTransformation(t, e) {\n    null != this.shaderTransformation && this.shaderTransformation.applyTransform(this, t, e);\n  }\n  getCombinedModelTransform(t, e) {\n    return this.getModelTransform(t, e), null != this.shaderTransformation && this.shaderTransformation.applyTransform(this, t, e), e;\n  }\n  getCombinedLocalTransform(t, e) {\n    this._view.localTransform.getMat(t, e), null != this.shaderTransformation && this.shaderTransformation.applyTransform(this, t, e);\n  }\n  getCombinedMaxScaleFactor(t) {\n    let e = this._view.modelScaleFactors.get(t, 1);\n    return null != this.shaderTransformation && (this.shaderTransformation.scaleFactor(y, this, t), e *= Math.max(y[0], y[1], y[2])), e;\n  }\n  getCombinedMedianScaleFactor(t) {\n    let e = this._view.modelScaleFactors.get(t, 0);\n    return null != this.shaderTransformation && (this.shaderTransformation.scaleFactor(y, this, t), e *= w(y[0], y[1], y[2])), e;\n  }\n  getModel(t, e) {\n    this._view.model.getMat(t, e);\n  }\n  setFeatureAttribute(t, e) {\n    this._view.featureAttribute.setVec(t, e);\n  }\n  getFeatureAttribute(t, e) {\n    this._view.featureAttribute.getVec(t, e);\n  }\n  setColor(t, e) {\n    this._view.color.setVec(t, e);\n  }\n  setObjectAndLayerIdColor(t, e) {\n    this._view.objectAndLayerIdColor.setVec(t, e);\n  }\n  setVisible(t, e) {\n    e !== this.getVisible(t) && (this._setStateFlag(t, M.VISIBLE, e), this.events.emit(\"instance-visibility-changed\", {\n      index: t\n    }));\n  }\n  getVisible(t) {\n    return this._getStateFlag(t, M.VISIBLE);\n  }\n  setHighlight(t, e) {\n    e !== this.getHighlight(t) && (this._setStateFlag(t, M.HIGHLIGHT, e), this.events.emit(\"instance-highlight-changed\"));\n  }\n  getHighlight(t) {\n    return this._getStateFlag(t, M.HIGHLIGHT);\n  }\n  getState(t) {\n    return this._view.state.get(t);\n  }\n  getLodLevel(t) {\n    return this._view.lodLevel.get(t);\n  }\n  countFlags(t) {\n    let e = 0;\n    for (let s = 0; s < this._capacity; ++s) {\n      this.getState(s) & t && ++e;\n    }\n    return e;\n  }\n  _setStateFlags(t, e) {\n    const s = this._view.state;\n    e = s.get(t) | e, s.set(t, e);\n  }\n  _clearStateFlags(t, e) {\n    const s = this._view.state;\n    e = s.get(t) & ~e, s.set(t, e);\n  }\n  _setStateFlag(t, e, s) {\n    s ? this._setStateFlags(t, e) : this._clearStateFlags(t, e);\n  }\n  _getStateFlag(t, e) {\n    return !!(this._view.state.get(t) & e);\n  }\n  _grow() {\n    this._capacity = Math.max(S, Math.floor(this._capacity * s)), this._buffer = this._layout.createBuffer(this._capacity).copyFrom(this._buffer), this._view = new R(this._buffer);\n  }\n  _findSlot() {\n    const t = this._view.state;\n    let e = this._next;\n    for (; t.get(e) & M.ALLOCATED;) e = e + 1 === this._capacity ? 0 : e + 1;\n    return this._next = e + 1 === this._capacity ? 0 : e + 1, e;\n  }\n};\nfunction w(t, e, s) {\n  return Math.max(Math.min(t, e), Math.min(Math.max(t, e), s));\n}\nt([a({\n  constructOnly: !0\n})], b.prototype, \"shaderTransformation\", void 0), t([a()], b.prototype, \"_size\", void 0), t([a({\n  readOnly: !0\n})], b.prototype, \"size\", null), b = t([r(\"esri.views.3d.webgl-engine.lib.lodRendering.InstanceData\")], b);\nconst y = f(),\n  D = c(),\n  N = m(),\n  V = m();\nexport { b as InstanceData, R as InstanceDataView, M as StateFlags };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as t } from \"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { h as e } from \"../../../../../chunks/vec32.js\";\nimport { w as s, c as i, g as r } from \"../../../../../chunks/sphere.js\";\nimport { maxScale as a } from \"../../../support/mathUtils.js\";\nimport h from \"../Octree.js\";\nclass n extends h {\n  constructor(e, r) {\n    super(t => s(this._instanceData.view.boundingSphere.getVec(t, this._tmpSphere)), {\n      maximumDepth: 25\n    }), this._instanceData = e, this._boundingSphere = r, this._tmpSphere = i(), this._tmpMat4 = t();\n  }\n  addInstance(t) {\n    const s = this._instanceData.view.boundingSphere,\n      i = this._instanceData.getCombinedModelTransform(t, this._tmpMat4);\n    e(r(this._tmpSphere), this._boundingSphere.center, i), this._tmpSphere[3] = this._boundingSphere.radius * a(i), s.setVec(t, this._tmpSphere), this.add([t]);\n  }\n  removeInstance(t) {\n    this.remove([t]);\n  }\n}\nexport { n as InstanceOctree };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass e {\n  constructor(e, i) {\n    this._worldSpaceRadius = e, this._minScreenSpaceRadii = i;\n  }\n  selectLevel(e, i, t) {\n    const c = t.computeScreenPixelSizeAt(e),\n      r = this._worldSpaceRadius * i / c;\n    let s = 0;\n    for (let a = 1; a < this._minScreenSpaceRadii.length; ++a) r >= this._minScreenSpaceRadii[a] && (s = a);\n    return s;\n  }\n}\nexport { e as LevelSelector };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { glLayout as r } from \"../../../support/buffer/glUtil.js\";\nimport { Default3D as t } from \"../DefaultVertexAttributeLocations.js\";\nimport { GLMaterials as e } from \"../GLMaterials.js\";\nimport { newIntersectorResult as s } from \"../Intersector.js\";\nimport { IntersectorType as i, StoreResults as o } from \"../IntersectorInterfaces.js\";\nimport { VertexArrayObject as a } from \"../VertexArrayObject.js\";\nimport { LodTarget as n } from \"./Intersector.js\";\nimport { BufferObject as m } from \"../../../../webgl/BufferObject.js\";\nimport { Usage as l } from \"../../../../webgl/enums.js\";\nclass u {\n  constructor(s, i) {\n    const o = s.renderContext.rctx,\n      n = i.geometry;\n    this._materials = s.materials, n.material.setParameters({\n      instancedDoublePrecision: !0\n    });\n    const u = n.material.createBufferWriter(),\n      f = u.vertexBufferLayout,\n      d = u.elementCount(n),\n      c = f.createBuffer(d);\n    u.write(null, null, n, c, 0), this.geometry = n, this.material = n.material, this.glMaterials = new e(n.material, this._materials), this.vertexBufferLayout = f, this.vbo = m.createVertex(o, l.STATIC_DRAW, c.buffer), this.vao = new a(o, t, {\n      geometry: r(f)\n    }, {\n      geometry: this.vbo\n    }), this.vertexCount = d;\n  }\n  destroy() {\n    this.glMaterials.dispose(), this.vbo.dispose(), this.vao.dispose();\n  }\n  get boundingInfo() {\n    return this.geometry.boundingInfo;\n  }\n  get triangleCount() {\n    return this.vertexCount / 3;\n  }\n  intersect(r, t, e, a, m, l, u, f) {\n    const d = this.geometry.id;\n    this.material.intersect(this.geometry, r.transform.transform, r, e, a, (e, a, c, p, h) => {\n      if (e >= 0) {\n        if (null != t && !t(r.rayBegin, r.rayEnd, e)) return;\n        const p = new n(l.layerUid, l.graphicUid(m), d, c, u, f);\n        if ((null == r.results.min.drapedLayerOrder || h >= r.results.min.drapedLayerOrder) && (null == r.results.min.dist || e < r.results.min.dist) && r.results.min.set(i.LOD, p, e, a, r.transform.transform, h), r.options.store !== o.MIN && (null == r.results.max.drapedLayerOrder || h >= r.results.max.drapedLayerOrder) && (null == r.results.max.dist || e > r.results.max.dist) && r.results.max.set(i.LOD, p, e, a, r.transform.transform, h), r.options.store === o.ALL) {\n          const t = s(r.results.min.ray);\n          t.set(i.LOD, p, e, a, r.transform.transform, h), r.results.all.push(t);\n        }\n      }\n    });\n  }\n}\nexport { u as LodComponentData };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { isSome as o } from \"../../../../../core/arrayUtils.js\";\nimport { isAborted as n, throwIfAborted as t } from \"../../../../../core/promiseUtils.js\";\nimport { create as e } from \"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { empty as r, expandWithVec3 as i, center as s, diameter as c } from \"../../../../../geometry/support/aaBoundingBox.js\";\nimport { LodComponentData as u } from \"./LodComponentData.js\";\nclass a {\n  static async create(e, r, i) {\n    const s = await Promise.allSettled(r.components.map(o => e.controller.schedule(() => new u(e, o), i))),\n      c = s.map(o => \"fulfilled\" === o.status ? o.value : null).filter(o);\n    if (n(i) || c.length !== s.length) {\n      c.forEach(o => o.destroy()), t(i);\n      for (const o of s) if (\"rejected\" === o.status) throw o.reason;\n    }\n    return new a(r.minScreenSpaceRadius, c);\n  }\n  constructor(o, n) {\n    this.minScreenSpaceRadius = o, this.components = n;\n  }\n  destroy() {\n    this.components.forEach(o => o.destroy());\n  }\n  intersect(o, n, t, e, r, i, s) {\n    this.components.forEach(c => c.intersect(o, n, t, e, r, i, this.boundingSphere, s));\n  }\n  get boundingBox() {\n    if (null == this._boundingBox) {\n      const o = r();\n      this.components.forEach(n => {\n        null != n.boundingInfo && (i(o, n.boundingInfo.bbMin), i(o, n.boundingInfo.bbMax));\n      }), this._boundingBox = o;\n    }\n    return this._boundingBox;\n  }\n  get boundingSphere() {\n    if (null == this._boundingSphere) {\n      const o = this.boundingBox,\n        n = e();\n      s(o, n), this._boundingSphere = {\n        center: n,\n        radius: .5 * c(o)\n      };\n    }\n    return this._boundingSphere;\n  }\n  get triangleCount() {\n    return this.components.reduce((o, n) => o + n.triangleCount, 0);\n  }\n}\nexport { a as LodLevel };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport { isSome as t } from \"../../../../../core/arrayUtils.js\";\nimport { destroyMaybe as r } from \"../../../../../core/maybe.js\";\nimport { isAborted as a, throwIfAborted as s } from \"../../../../../core/promiseUtils.js\";\nimport { property as n } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/Logger.js\";\nimport { subclass as i } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as o } from \"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { f as l, m as c, h } from \"../../../../../chunks/vec32.js\";\nimport { create as d } from \"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { create as u, fromValues as m } from \"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { debugFlags as f } from \"../../../support/debugFlags.js\";\nimport { glLayout as _ } from \"../../../support/buffer/glUtil.js\";\nimport { newLayout as p } from \"../../../support/buffer/InterleavedLayout.js\";\nimport g from \"../../../webgl/RenderCamera.js\";\nimport { ShaderOutput as I } from \"../../core/shaderLibrary/ShaderOutput.js\";\nimport { ASyncPreparesRenderPlugin as C } from \"../../effects/RenderPlugin.js\";\nimport { Default3D as y } from \"../DefaultVertexAttributeLocations.js\";\nimport { IntersectorType as v } from \"../IntersectorInterfaces.js\";\nimport E from \"../Octree.js\";\nimport { RenderSlot as A } from \"../RenderSlot.js\";\nimport { assert as b } from \"../Util.js\";\nimport { VertexAttribute as D } from \"../VertexAttribute.js\";\nimport { InstanceData as R, StateFlags as T } from \"./InstanceData.js\";\nimport { InstanceOctree as L } from \"./InstanceOctree.js\";\nimport { LevelSelector as S } from \"./LevelSelector.js\";\nimport { LodLevel as O } from \"./LodLevel.js\";\nimport { RenderInstanceData as j } from \"./RenderInstanceData.js\";\nimport { colorMixModes as x } from \"../../materials/internal/MaterialUtil.js\";\nimport { encodeDoubleVec3 as N } from \"../../materials/renderers/utils.js\";\nimport { DefaultMaterialDrawParameters as M } from \"../../shaders/DefaultMaterialTechnique.js\";\nimport { TaskPriority as U, noBudget as w } from \"../../../../support/Scheduler.js\";\nimport { bindVertexBufferLayout as F, unbindVertexBufferLayout as H } from \"../../../../webgl/Util.js\";\nconst V = e => {\n  const t = e.baseBoundingSphere.radius,\n    r = e.levels.map(e => e.minScreenSpaceRadius);\n  return new S(t, r);\n};\nlet B = class extends C {\n  constructor(e, t) {\n    super(e), this.type = v.LOD, this.isGround = !1, this._levels = [], this._defaultRenderInstanceData = [new Array()], this._highlightRenderInstanceData = [new Array()], this._allRenderInstanceData = [this._defaultRenderInstanceData[0], this._highlightRenderInstanceData[0]], this._instanceIndex = 0, this._cycleStartIndex = 0, this._slicePlane = !1, this._camera = new g(), this._updateCyclesWithStaticCamera = -1, this._needFullCycle = !1, this.produces = new Map([[A.OPAQUE_MATERIAL, e => this._produces(e)], [A.TRANSPARENT_MATERIAL, e => !!this._hasTransparentLevels() && this._produces(e)]]), this._instanceData = new R({\n      shaderTransformation: e.shaderTransformation\n    }, e.optionalFields), this.addHandles(t.registerTask(U.LOD_RENDERER, this));\n  }\n  initialize() {\n    this._instanceBufferLayout = q(this.optionalFields), this._glInstanceBufferLayout = _(this._instanceBufferLayout, 1), this.addHandles([this._instanceData.events.on(\"instances-changed\", () => this._requestUpdateCycle()), this._instanceData.events.on(\"instance-transform-changed\", ({\n      index: e\n    }) => {\n      this._requestUpdateCycle(), this.metadata.notifyGraphicGeometryChanged(e);\n    }), this._instanceData.events.on(\"instance-visibility-changed\", ({\n      index: e\n    }) => {\n      this._requestUpdateCycle(!0), this.metadata.notifyGraphicVisibilityChanged(e);\n    }), this._instanceData.events.on(\"instance-highlight-changed\", () => this._requestUpdateCycle(!0))]);\n  }\n  get _enableLevelSelection() {\n    return this.symbol.levels.length > 1;\n  }\n  get levels() {\n    return this._levels;\n  }\n  get baseBoundingBox() {\n    return this._levels[this._levels.length - 1].boundingBox;\n  }\n  get baseBoundingSphere() {\n    return this._levels[this._levels.length - 1].boundingSphere;\n  }\n  get baseMaterial() {\n    return this._levels[this._levels.length - 1].components[0].material;\n  }\n  get slicePlaneEnabled() {\n    return this._slicePlane;\n  }\n  set slicePlaneEnabled(e) {\n    this._slicePlane = e;\n  }\n  get layerUid() {\n    return this.metadata.layerUid;\n  }\n  get instanceData() {\n    return this._instanceData;\n  }\n  get usedMemory() {\n    return this._allRenderInstanceData.reduce((e, t) => t.reduce((e, t) => e + t.usedMemory, e), 0);\n  }\n  get renderStats() {\n    const e = this._instanceData.size,\n      t = [];\n    return this._levels.forEach((e, r) => {\n      const a = this._allRenderInstanceData[0][r].size + this._allRenderInstanceData[1][r].size,\n        s = e.triangleCount;\n      t.push({\n        renderedInstances: a,\n        renderedTriangles: a * s,\n        trianglesPerInstance: s\n      });\n    }), {\n      totalInstances: e,\n      renderedInstances: t.reduce((e, t) => e + t.renderedInstances, 0),\n      renderedTriangles: t.reduce((e, t) => e + t.renderedTriangles, 0),\n      levels: t\n    };\n  }\n  async initializeRenderContext(e, r) {\n    this._context = e;\n    const n = e.renderContext.rctx,\n      i = await Promise.allSettled(this.symbol.levels.map(t => (this._defaultRenderInstanceData[0].push(new j(n, this._instanceBufferLayout)), this._highlightRenderInstanceData[0].push(new j(n, this._instanceBufferLayout)), O.create(e, t, r)))),\n      o = i.map(e => \"fulfilled\" === e.status ? e.value : null).filter(t);\n    if (a(r) || o.length !== i.length) {\n      o.forEach(e => e.destroy()), s(r);\n      for (const e of i) if (\"rejected\" === e.status) throw e.reason;\n    }\n    this._levels = o, this._levelSelector = V(this);\n  }\n  uninitializeRenderContext() {\n    this._invalidateOctree(), this._levels.forEach(e => e.destroy()), this._defaultRenderInstanceData[0].forEach(e => e.destroy()), this._highlightRenderInstanceData[0].forEach(e => e.destroy());\n  }\n  _hasTransparentLevels() {\n    return this._levels.some(e => e.components.some(e => {\n      const t = e.material.produces.get(A.TRANSPARENT_MATERIAL);\n      return t?.(I.Color);\n    }));\n  }\n  hasHighlights() {\n    return this._highlightRenderInstanceData[0].some(e => e.size > 0);\n  }\n  _produces(e) {\n    return e !== I.Highlight && e !== I.ShadowHighlight || this.hasHighlights();\n  }\n  prepareRender(e) {\n    if (!f.LOD_INSTANCE_RENDERER_DISABLE_UPDATES) {\n      if (this._enableLevelSelection) {\n        const t = e.bindParameters.contentCamera.equals(this._camera);\n        this._camera.copyFrom(e.bindParameters.contentCamera), t || this._requestUpdateCycle();\n      }\n      this._needFullCycle && (this.runTask(w), this._needFullCycle = !1);\n    }\n  }\n  prepareTechniques(e) {\n    if (!this.baseMaterial.isVisible() || !this.baseMaterial.isVisibleForOutput(e.output)) return null;\n    const t = this._getInstanceDatas(e.output);\n    if (!t) return null;\n    const r = new Array();\n    return t.forEach(t => this.levels.forEach((a, s) => {\n      a.components.forEach(a => r.push(this._beginComponent(e, t[s], a)));\n    })), r;\n  }\n  renderNode(e, t) {\n    const r = this._getInstanceDatas(e.output);\n    if (!r || null == t) return;\n    let a = 0;\n    e.rctx.bindVAO(), r.forEach(r => this.levels.forEach((s, n) => {\n      s.components.forEach(s => this._renderComponent(e, t[a++], r[n], s, n));\n    }));\n  }\n  _getInstanceDatas(e) {\n    const t = e !== I.Highlight && e !== I.ShadowHighlight,\n      r = e !== I.ShadowExcludeHighlight;\n    return t && r ? this._allRenderInstanceData : t ? this._defaultRenderInstanceData : r ? this._highlightRenderInstanceData : null;\n  }\n  intersect(e, t, r, a) {\n    if (!this.baseMaterial.isVisible() || null == this._octree) return;\n    const s = d();\n    l(s, a, r);\n    const n = s => {\n      this._instanceData.getCombinedModelTransform(s, W), e.transform.set(W), h(K, r, e.transform.inverse), h(Y, a, e.transform.inverse);\n      const n = this._instanceData.getState(s),\n        i = this._instanceData.getLodLevel(s),\n        o = this._levels.length;\n      b(!!(n & T.ACTIVE), \"invalid instance state\"), b(i >= 0 && i < o, \"invaid lod level\"), this._levels[i].intersect(e, t, K, Y, s, this.metadata, o);\n    };\n    this.baseMaterial.parameters.verticalOffset ? this._octree.forEach(n) : this._octree.forEachAlongRay(r, s, n);\n  }\n  notifyShaderTransformationChanged() {\n    this._invalidateOctree(), this._requestUpdateCycle();\n  }\n  get _octree() {\n    if (null == this._octreeCached) {\n      const e = this._instanceData,\n        t = e.view?.state;\n      if (!t) return null;\n      this._octreeCached = new L(e, this.baseBoundingSphere);\n      for (let r = 0; r < e.capacity; ++r) t.get(r) & T.ACTIVE && this._octreeCached.addInstance(r);\n    }\n    return this._octreeCached;\n  }\n  _invalidateOctree() {\n    this._octreeCached = r(this._octreeCached);\n  }\n  queryDepthRange(e) {\n    if (null == this._octree) return {\n      near: 1 / 0,\n      far: -1 / 0\n    };\n    const t = e.viewForward,\n      r = this._octree.findClosest(t, E.DepthOrder.FRONT_TO_BACK, e.frustum),\n      a = this._octree.findClosest(t, E.DepthOrder.BACK_TO_FRONT, e.frustum);\n    if (null == r || null == a) return {\n      near: 1 / 0,\n      far: -1 / 0\n    };\n    const s = e.eye,\n      n = this._instanceData.view;\n    n.boundingSphere.getVec(r, k), l(k, k, s);\n    const i = c(k, t) - k[3];\n    n.boundingSphere.getVec(a, k), l(k, k, s);\n    const o = c(k, t) + k[3];\n    return {\n      near: Math.max(e.near, i),\n      far: Math.min(e.far, o)\n    };\n  }\n  _requestUpdateCycle(e = !1) {\n    this._updateCyclesWithStaticCamera = -1, this._cycleStartIndex = this._instanceIndex, e && (this._needFullCycle = !0, this._context.requestRender());\n  }\n  _startUpdateCycle() {\n    this._updateCyclesWithStaticCamera++, this._allRenderInstanceData.forEach(e => e.forEach(e => e.startUpdateCycle()));\n  }\n  get running() {\n    return this._instanceData.size > 0 && this._updateCyclesWithStaticCamera < 1;\n  }\n  runTask(e) {\n    const {\n      _enableLevelSelection: t,\n      _camera: r,\n      _levelSelector: a\n    } = this;\n    this._allRenderInstanceData.forEach(e => e.forEach(e => e.beginUpdate()));\n    const s = this._instanceData,\n      n = s.view;\n    let i = s.size;\n    const o = s.capacity;\n    let l = this._instanceIndex;\n    const c = Math.ceil(o / 500);\n    for (let h = 0; h < i && !e.done; ++h) {\n      l === this._cycleStartIndex && this._startUpdateCycle();\n      const h = n.state.get(l);\n      let d = 0;\n      if (!(h & T.ALLOCATED)) {\n        l = l + 1 === o ? 0 : l + 1, i++;\n        continue;\n      }\n      const u = n.lodLevel.get(l);\n      if (h & T.DEFAULT_ACTIVE && this._defaultRenderInstanceData[0][u].freeTail(), h & T.HIGHLIGHT_ACTIVE && this._highlightRenderInstanceData[0][u].freeTail(), h & T.REMOVE) s.freeInstance(l);else if (h & T.VISIBLE) {\n        let e = 0;\n        t && (n.modelOrigin.getVec(l, z), e = a.selectLevel(z, s.getCombinedMedianScaleFactor(l), r)), d = h & ~(T.ACTIVE | T.TRANSFORM_CHANGED), e >= 0 && (h & T.HIGHLIGHT ? (P(this._highlightRenderInstanceData[0][e], n, l), d |= T.HIGHLIGHT_ACTIVE) : (P(this._defaultRenderInstanceData[0][e], n, l), d |= T.DEFAULT_ACTIVE)), n.state.set(l, d), n.lodLevel.set(l, e);\n      } else d = h & ~(T.ACTIVE | T.TRANSFORM_CHANGED), n.state.set(l, d);\n      if (null != this._octreeCached) {\n        const e = !!(h & T.ACTIVE),\n          t = !!(d & T.ACTIVE);\n        !e && t ? this._octreeCached.addInstance(l) : e && !t ? this._octreeCached.removeInstance(l) : e && t && h & T.TRANSFORM_CHANGED && (this._octreeCached.removeInstance(l), this._octreeCached.addInstance(l));\n      }\n      l = l + 1 === o ? 0 : l + 1, l % c == 0 && e.madeProgress();\n    }\n    this._instanceIndex = l, this._allRenderInstanceData.forEach(e => e.forEach(e => e.endUpdate())), this._context.requestRender();\n  }\n  _beginComponent(e, t, r) {\n    if (0 === t.size) return null;\n    const a = r.glMaterials.load(e.rctx, e.bindParameters.slot, e.output);\n    return null != a ? a.beginSlot(e.bindParameters) : null;\n  }\n  _renderComponent(e, t, r, a, s) {\n    if (!t) return;\n    const {\n      bindParameters: n,\n      rctx: i\n    } = e;\n    i.runAppleAmdDriverHelper();\n    const o = i.bindTechnique(t, n, a.material.parameters, Q);\n    i.bindVAO(a.vao), t.ensureAttributeLocations(a.vao), f.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL && e.output === I.Color && (o.setUniform4fv(\"externalColor\", J[Math.min(s, J.length - 1)]), o.setUniform1i(\"colorMixMode\", x.replace));\n    const l = r.capacity,\n      c = r.headIndex,\n      h = r.tailIndex,\n      d = r.firstIndex,\n      u = this._glInstanceBufferLayout,\n      m = (e, s) => {\n        F(i, y, r.buffer, u, e), i.drawArraysInstanced(t.primitiveType, 0, a.vertexCount, s - e), H(i, y, r.buffer, u);\n      };\n    a.material.parameters.transparent && null != d ? c > h ? (b(d >= h && d <= c, \"invalid firstIndex\"), m(d, c), m(h, d)) : c < h && (d <= c ? (b(d >= 0 && d <= c, \"invalid firstIndex\"), m(d, c), m(h, l), m(0, d)) : (b(d >= h && d <= l, \"invalid firstIndex\"), m(d, l), m(0, c), m(h, d))) : c > h ? m(h, c) : c < h && (m(0, c), m(h, l)), i.bindVAO(null);\n  }\n};\nfunction P(e, t, r) {\n  const a = e.allocateHead();\n  G(t, r, e.view, a);\n}\nfunction G(e, t, r, a) {\n  N(e.modelOrigin, t, r.modelOriginHi, r.modelOriginLo, a), r.model.copyFrom(a, e.model, t), r.modelNormal.copyFrom(a, e.modelNormal, t), e.color && r.color && r.color.copyFrom(a, e.color, t), e.objectAndLayerIdColor && r.objectAndLayerIdColor && r.objectAndLayerIdColor.copyFrom(a, e.objectAndLayerIdColor, t), e.featureAttribute && r.featureAttribute && r.featureAttribute.copyFrom(a, e.featureAttribute, t);\n}\nfunction q(e) {\n  let t = p().vec3f(D.INSTANCEMODELORIGINHI).vec3f(D.INSTANCEMODELORIGINLO).mat3f(D.INSTANCEMODEL).mat3f(D.INSTANCEMODELNORMAL);\n  return null != e && e.includes(\"featureAttribute\") && (t = t.vec4f(D.INSTANCEFEATUREATTRIBUTE)), null != e && e.includes(\"color\") && (t = t.vec4u8(D.INSTANCECOLOR)), null != e && e.includes(\"objectAndLayerIdColor\") && (t = t.vec4u8(D.INSTANCEOBJECTANDLAYERIDCOLOR)), t;\n}\ne([n({\n  constructOnly: !0\n})], B.prototype, \"symbol\", void 0), e([n({\n  constructOnly: !0\n})], B.prototype, \"optionalFields\", void 0), e([n({\n  constructOnly: !0\n})], B.prototype, \"metadata\", void 0), e([n({\n  constructOnly: !0\n})], B.prototype, \"shaderTransformation\", void 0), e([n()], B.prototype, \"_instanceData\", void 0), e([n()], B.prototype, \"_cycleStartIndex\", void 0), e([n({\n  readOnly: !0\n})], B.prototype, \"_enableLevelSelection\", null), e([n()], B.prototype, \"_updateCyclesWithStaticCamera\", void 0), e([n({\n  readOnly: !0\n})], B.prototype, \"running\", null), B = e([i(\"esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer\")], B);\nconst z = d(),\n  k = u(),\n  W = o(),\n  K = d(),\n  Y = d(),\n  J = [m(1, 0, 1, 1), m(0, 0, 1, 1), m(0, 1, 0, 1), m(1, 1, 0, 1), m(1, 0, 0, 1)],\n  Q = new M();\nexport { B as LodRenderer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport has from \"../../../../core/has.js\";\nimport { throwIfAborted as t } from \"../../../../core/promiseUtils.js\";\nimport { pt2px as s } from \"../../../../core/screenUtils.js\";\nimport { estimateSize as r } from \"../../../../core/typedArrayUtil.js\";\nimport { identity as i, scale as a, translate as o, copy as n } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as l } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { l as c, k as h, c as d, B as m, g as p, s as u } from \"../../../../chunks/vec32.js\";\nimport { fromArray as y, ONES as f, ZEROS as _, fromValues as g, create as b } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { ONES as P, create as R } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { computeTranslationToOriginAndRotation as x } from \"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";\nimport { projectPointToVector as v } from \"../../../../geometry/projection/projectPointToVector.js\";\nimport { create as L, size as C, containsPoint as S, center as j } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { defaultPrimitive as w } from \"../../../../symbols/support/ObjectSymbol3DLayerResource.js\";\nimport { objectSymbolLayerPrimitiveBoundingBox as E, objectSymbolLayerSizeWithResourceSize as U } from \"../../../../symbols/support/symbolLayerUtils3D.js\";\nimport { estimateNumVerticesForLods as T, defaultSymbolLayerMemoryComplexity as O } from \"./defaultSymbolComplexity.js\";\nimport { perLodInstanceElevationAligner as B } from \"./ElevationAligners.js\";\nimport { needsElevationUpdates3D as I, evaluateElevationInfoAtPoint as G, SampleElevationInfo as A } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DLodInstanceGraphicLayer as D } from \"./Graphics3DLodInstanceGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as F } from \"./Graphics3DSymbolLayer.js\";\nimport { validateSymbolLayerSize as z, mixinColorAndOpacity as V, computeObjectScale as M, computeObjectRotation as H } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as k } from \"./interfaces.js\";\nimport { LoadStatus as W } from \"./Loadable.js\";\nimport { makeLodResources as q } from \"./lodResourceUtils.js\";\nimport { fetch as N } from \"./objectResourceUtils.js\";\nimport { placePointOnGeometry as J, extendPointGraphicElevationContext as Y } from \"./pointUtils.js\";\nimport { isValidPrimitive as $, primitiveLodResources as K } from \"./primitiveObjectSymbolUtils.js\";\nimport { SymbolComplexity as Q } from \"./SymbolComplexity.js\";\nimport { getResourceUrlFromSymbolStyle as X } from \"./webStyleUtils.js\";\nimport { initFastSymbolUpdatesState as Z, updateFastSymbolUpdatesState as ee, ConvertOptions as te, evaluateModelTransform as se, evaluateModelTransformScale as re } from \"../support/FastSymbolUpdates.js\";\nimport { CullFaceOptions as ie } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { VertexAttribute as ae } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { LodRenderer as oe } from \"../../webgl-engine/lib/lodRendering/LodRenderer.js\";\nimport { materialsFromLodResources as ne, texturesFromLodResources as le, geometriesFromLodResources as ce } from \"../../webgl-engine/lib/lodRendering/LodResources.js\";\nimport { DefaultMaterial as he } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { defaultSchematicMRRFactors as de } from \"../../webgl-engine/materials/pbrUtils.js\";\nclass me {\n  constructor(e, t, s, r, i, a, o, n, l, c, h, d) {\n    this.lodResources = e, this.lodRenderer = t, this.stageResources = s, this.originalMaterialParameters = r, this.resourceSize = i, this.isEsriSymbolResource = a, this.isWosr = o, this.resourceBoundingBox = n, this.symbolSize = l, this.extentPadding = c, this.physicalBasedRenderingEnabled = h, this.pivotOffset = d;\n  }\n}\nclass pe extends F {\n  getCachedSize() {\n    const [e, t, s] = null != this._resources ? this._resources.symbolSize : [1, 1, 1];\n    return {\n      width: e,\n      depth: t,\n      height: s\n    };\n  }\n  constructor(e, t, s, r) {\n    super(e, t, s, r), this._resources = null, this._optionalFields = new Array(), this._instanceIndexToGraphicUid = new Map(), this._hasLoadedPBRTextures = !1, this._disposeResourceHandles = new Array(), this.skipHighSymbolLodsChanged = !1, this.ensureDrapedStatus(!1), this._hasLoadedPBRTextures = s.physicalBasedRenderingEnabled;\n  }\n  async doLoad(e) {\n    if (!this._drivenProperties.size) {\n      if (z(this.symbolLayer)) throw new Error();\n    }\n    if (this._isPrimitive) {\n      const t = this.symbolLayer.resource,\n        s = t && $(t?.primitive) ? t.primitive : w;\n      this._resources = await this._createResourcesForPrimitive(s, e);\n    } else {\n      const t = await X(this.symbol.styleOrigin),\n        s = t?.href ?? this.symbolLayer.resource?.href;\n      this._resources = await this._createResourcesForUrl(s, e);\n    }\n    this.layerOpacityChanged(), this.slicePlaneEnabledChanged(), this.physicalBasedRenderingChanged(), this.complexity = this.computeComplexity();\n  }\n  get extentPadding() {\n    return null != this._resources ? this._resources.extentPadding : 0;\n  }\n  get _isPrimitive() {\n    return !this.symbolLayer.resource?.href;\n  }\n  get lodRenderer() {\n    return this._resources?.lodRenderer;\n  }\n  get materials() {\n    return this._resources?.stageResources.materials ?? [];\n  }\n  _setMaterialTransparencyParameters(e, t = this.symbolLayer?.material?.color) {\n    const s = this._getCombinedOpacity(t),\n      r = s < 1 || this.needsDrivenTransparentPass;\n    return e.transparent = r, e.opacity = s, e.cullFace = r ? ie.None : ie.Back, e;\n  }\n  async _createResourcesForPrimitive(t, r) {\n    const i = this.symbolLayer,\n      a = L(E(t)),\n      o = y(C(a)),\n      n = y(U(o, i)),\n      l = c(n),\n      h = !1,\n      d = !1,\n      m = {\n        usePBR: this._context.physicalBasedRenderingEnabled,\n        isSchematic: !0,\n        mrrFactors: [...de],\n        ambient: f,\n        diffuse: f,\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        hasSliceHighlight: !1,\n        castShadows: this.symbolLayer.castShadows,\n        offsetTransparentBackfaces: !this.symbolLayer.isPrimitive\n      },\n      p = !!m.usePBR;\n    this._setMaterialTransparencyParameters(m);\n    const u = this.symbol;\n    if (\"point-3d\" === u.type && u.verticalOffset) {\n      const {\n        screenLength: e,\n        minWorldLength: t,\n        maxWorldLength: r\n      } = u.verticalOffset;\n      m.verticalOffset = {\n        screenLength: s(e),\n        minWorldLength: t || 0,\n        maxWorldLength: null != r ? r : 1 / 0\n      }, m.castShadows = !1;\n    }\n    if (this._context.screenSizePerspectiveEnabled && (m.screenSizePerspective = this._context.sharedResources.screenSizePerspectiveSettings), this._drivenProperties.color) m.externalColor = P;else {\n      const t = null != i.material ? i.material.color : null,\n        s = null != t ? e.toUnitRGBA(t) : P;\n      m.externalColor = s;\n    }\n    this._fastUpdates = Z(this._context.renderer, this._fastVisualVariableConvertOptions(a, n, o, null)), m.isInstanced = !0, this._fastUpdates ? (Object.assign(m, this._fastUpdates.materialParameters), this._optionalFields.push(ae.FEATUREATTRIBUTE)) : this._hasPerInstanceColor() && (m.hasInstancedColor = !0, this._optionalFields.push(ae.COLOR)), has(\"enable-feature:objectAndLayerId-rendering\") && this._optionalFields.push(ae.OBJECTANDLAYERIDCOLOR);\n    const _ = new he(m),\n      g = K(t, _);\n    if (!g) throw new Error(`Unknown object symbol primitive: ${t}`);\n    const b = ne(g).map(e => ({\n        opacity: 1,\n        transparent: e.parameters.transparent\n      })),\n      R = await this._createStageResources(g, p, r),\n      x = await this._createLodRenderer(g, r);\n    return new me(g, x, R, b, o, h, d, a, n, l, p, null);\n  }\n  async _createResourcesForUrl(e, t) {\n    const r = {\n      materialParameters: {\n        isInstanced: !0,\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        castShadows: this.symbolLayer.castShadows\n      },\n      streamDataRequester: this._context.streamDataRequester,\n      cache: this._context.sharedResources.objectResourceCache\n    };\n    this._fastUpdates = Z(this._context.renderer, this._fastVisualVariableConvertOptions(null, null, null, null)), this._fastUpdates ? (Object.assign(r.materialParameters, this._fastUpdates.materialParameters), this._optionalFields.push(ae.FEATUREATTRIBUTE)) : this._hasPerInstanceColor() && (r.materialParameters.hasInstancedColor = !0, this._optionalFields.push(ae.COLOR)), has(\"enable-feature:objectAndLayerId-rendering\") && this._optionalFields.push(ae.OBJECTANDLAYERIDCOLOR);\n    const i = this.symbol;\n    if (\"point-3d\" === i.type && i.verticalOffset) {\n      const {\n        screenLength: e,\n        minWorldLength: t,\n        maxWorldLength: a\n      } = i.verticalOffset;\n      r.materialParameters.verticalOffset = {\n        screenLength: s(e),\n        minWorldLength: t || 0,\n        maxWorldLength: null != a ? a : 1 / 0\n      }, r.materialParameters.castShadows = !1;\n    }\n    const a = this._context.physicalBasedRenderingEnabled;\n    r.signal = t, r.usePBR = a, r.skipHighLods = this._context.skipHighSymbolLods;\n    const o = await N(e, r),\n      n = o.isEsriSymbolResource,\n      l = o.isWosr,\n      h = q(o.lods),\n      d = this._context,\n      m = this.symbolLayer.material,\n      p = this._getExternalColorParameters(m),\n      u = this.symbolLayer?.material?.color,\n      f = this._getCombinedOpacity(u, {\n        hasIntrinsicColor: !0\n      }),\n      _ = this.needsDrivenTransparentPass,\n      g = ne(h),\n      b = ne(h).map(e => ({\n        opacity: e.parameters.opacity || 1,\n        transparent: e.parameters.transparent\n      }));\n    g.forEach(e => {\n      const t = e.parameters;\n      e.setParameters(p);\n      const s = t.opacity * f,\n        r = s < 1 || _ || t.transparent;\n      e.setParameters({\n        opacity: s,\n        transparent: r\n      }), d.screenSizePerspectiveEnabled && e.setParameters({\n        screenSizePerspective: d.sharedResources.screenSizePerspectiveSettings\n      });\n    });\n    const P = o.referenceBoundingBox,\n      R = y(C(P)),\n      x = y(h.levels[0].pivotOffset),\n      v = y(U(R, this.symbolLayer)),\n      L = c(v),\n      S = this._fastUpdates;\n    ee(S, this._context.renderer, this._fastVisualVariableConvertOptions(P, v, R, x)) && g.forEach(e => e.setParameters(S.materialParameters));\n    const j = await this._createStageResources(h, a, t),\n      w = await this._createLodRenderer(h, t);\n    return new me(h, w, j, b, R, n, l, P, v, L, a, x);\n  }\n  _addDisposeResource(e) {\n    this._disposeResourceHandles.push(e);\n  }\n  async _createStageResources(e, s, r) {\n    const i = this._context.stage,\n      a = ne(e);\n    s !== this._context.physicalBasedRenderingEnabled && this.physicalBasedRenderingChanged(), i.addMany(a), this._addDisposeResource(() => i.removeMany(a));\n    const o = le(e);\n    i.addMany(o), this._addDisposeResource(() => {\n      o.forEach(e => e.unload()), i.removeMany(o);\n    }), await Promise.all(o.map(e => this._context.stage.schedule(() => e.load(i.renderView.renderingContext), r))), t(r);\n    const n = ce(e);\n    return i.addMany(n), this._addDisposeResource(() => i.removeMany(n)), {\n      materials: a,\n      textures: o,\n      geometries: n\n    };\n  }\n  async _createLodRenderer(e, t) {\n    const s = this._context.stage,\n      r = {\n        layerUid: this._context.layer.uid,\n        graphicUid: e => this._instanceIndexToGraphicUid.get(e),\n        notifyGraphicGeometryChanged: e => this._context.notifyGraphicGeometryChanged(this._instanceIndexToGraphicUid.get(e)),\n        notifyGraphicVisibilityChanged: e => this._context.notifyGraphicVisibilityChanged(this._instanceIndexToGraphicUid.get(e))\n      },\n      i = this._fastUpdates,\n      a = i ? {\n        applyTransform: (e, t, s) => {\n          e.getFeatureAttribute(t, be), n(s, se(i.materialParameters, be, s));\n        },\n        scaleFactor: (e, t, s) => {\n          t.getFeatureAttribute(s, be), re(e, i.materialParameters, be);\n        }\n      } : null,\n      o = new oe({\n        symbol: e,\n        optionalFields: this._optionalFields,\n        metadata: r,\n        shaderTransformation: a\n      }, this._context.scheduler);\n    return o.slicePlaneEnabled = this._context.slicePlaneEnabled, this._addDisposeResource(() => {\n      s.removeRenderPlugin(o), o.destroy();\n    }), await s.addRenderPlugin(o, t), o;\n  }\n  _getExternalColorParameters(t) {\n    const s = {};\n    return this._drivenProperties.color ? s.externalColor = P : null != t?.color ? s.externalColor = e.toUnitRGBA(t.color) : (s.externalColor = P, s.colorMixMode = \"ignore\"), s;\n  }\n  destroy() {\n    super.destroy(), this._cleanupResources();\n  }\n  _cleanupResources() {\n    this._disposeResourceHandles.forEach(e => e()), this._disposeResourceHandles.length = 0, this._resources = null;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry)) return null;\n    const s = J(t.geometry);\n    if (null == s) return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`), null;\n    const r = this.setGraphicElevationContext(t),\n      i = e.renderingInfo;\n    return this._createAs3DShape(t, s, i, r, t.uid, e.layer.uid);\n  }\n  notifyDestroyGraphicLayer(e) {\n    this._instanceIndexToGraphicUid.delete(e.instanceIndex);\n  }\n  graphicLayerToGraphicId() {\n    return 0;\n  }\n  layerOpacityChanged() {\n    if (null == this._resources) return;\n    const e = this._drivenProperties.opacity,\n      t = !this._isPrimitive,\n      s = this._resources.stageResources.materials,\n      r = this._resources.originalMaterialParameters;\n    for (let i = 0; i < s.length; i++) {\n      const a = s[i],\n        o = this.symbolLayer?.material?.color,\n        n = r[i],\n        l = this._getCombinedOpacity(o, {\n          hasIntrinsicColor: t\n        }) * n.opacity,\n        c = l < 1 || e || n.transparent;\n      a.setParameters({\n        opacity: l,\n        transparent: c\n      }), this._isPrimitive && a.setParameters({\n        cullFace: c ? ie.None : ie.Back\n      });\n    }\n  }\n  layerElevationInfoChanged(e, t) {\n    return this.updateGraphics3DGraphicElevationInfo(e, t, I);\n  }\n  slicePlaneEnabledChanged() {\n    if (null == this._resources) return !0;\n    this._resources.lodRenderer.slicePlaneEnabled = this._context.slicePlaneEnabled;\n    for (const e of this._resources.stageResources.materials) e.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    });\n    return !0;\n  }\n  physicalBasedRenderingChanged() {\n    if (null == this._resources) return !0;\n    const {\n      stageResources: e,\n      isWosr: t\n    } = this._resources;\n    for (const s of e.materials) this._isPrimitive ? s.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }) : t || s.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !1\n    });\n    return !1 !== this._hasLoadedPBRTextures || !0 !== this._context.physicalBasedRenderingEnabled || (this._hasLoadedPBRTextures = !0, !1);\n  }\n  applyRendererDiff(e, t) {\n    if (null == this._resources) return k.RecreateSymbol;\n    const {\n      stageResources: {\n        materials: s\n      },\n      lodRenderer: r,\n      resourceBoundingBox: i,\n      symbolSize: a,\n      resourceSize: o,\n      pivotOffset: n\n    } = this._resources;\n    for (const l in e.diff) {\n      if (\"visualVariables\" !== l) return k.RecreateSymbol;\n      if (!ee(this._fastUpdates, t, this._fastVisualVariableConvertOptions(i, a, o, n))) return k.RecreateSymbol;\n      for (const e of s) e.setParameters(this._fastUpdates.materialParameters);\n      r.notifyShaderTransformationChanged();\n    }\n    return k.FastUpdate;\n  }\n  computeComplexity() {\n    if (null == this._resources) return super.computeComplexity();\n    const e = this._resources.lodResources,\n      t = T(e.levels),\n      s = e => Array.from(e.attributes.values()).reduce((e, t) => e + r(t.data, t.indices), 0),\n      i = ce(e).reduce((e, t) => e + s(t), 0),\n      a = le(e).reduce((e, t) => e + t.memoryEstimate, 0) + i,\n      o = {\n        ...O(this.symbol, this.symbolLayer),\n        resourceBytes: a\n      };\n    return new Q({\n      verticesPerFeature: t,\n      memory: o\n    });\n  }\n  _hasLodRenderer() {\n    return null != this._resources;\n  }\n  _createAs3DShape(e, t, s, r, i, a) {\n    if (!this._hasLodRenderer() || null == this._resources) return null;\n    const o = this.getFastUpdateAttrValues(e),\n      n = this._context.clippingExtent;\n    if (v(t, fe, this._context.elevationProvider.spatialReference), null != n && !S(n, fe)) return null;\n    const l = ye(r),\n      c = this._computeGlobalTransform(t, r, ge, Pe),\n      h = this._computeLocalTransform(this._resources, this.symbolLayer, s, _e),\n      d = this._resources.lodRenderer.instanceData,\n      m = d.addInstance();\n    this._instanceIndexToGraphicUid.set(m, i), d.setLocalTransform(m, h, !1), d.setGlobalTransform(m, c), o && d.setFeatureAttribute(m, o), null == this._fastUpdates && this._hasPerInstanceColor() && d.setColor(m, V(s.color, s.opacity, 255)), null != this._context.stage.renderView.objectAndLayerIdRenderHelper && d.setObjectAndLayerIdColor(m, this._context.stage.renderView.objectAndLayerIdRenderHelper.getObjectAndLayerIdColor({\n      graphicUid: i,\n      layerUid: a\n    }));\n    const p = new D(this, m, B, r);\n    return l && (p.alignedSampledElevation = Pe.sampledElevation), p.needsElevationUpdates = I(r.mode), Y(p, t, this._context.elevationProvider), p;\n  }\n  _computeGlobalTransform(e, t, s, r) {\n    return G(e, this._context.elevationProvider, t, this._context.renderCoordsHelper, r), fe[0] = e.x, fe[1] = e.y, fe[2] = r.z, x(e.spatialReference, fe, s, this._context.renderCoordsHelper.spatialReference), s;\n  }\n  _computeLocalTransform(e, t, s, r) {\n    return i(r), this._applyObjectRotation(s, !1, r), this._applyObjectRotation(t, !0, r), this._applyObjectScale(e, s, r), this._applyAnchor(e, t, r), r;\n  }\n  _applyObjectScale(e, t, s) {\n    if (this._fastUpdates?.requiresShaderTransformation) return;\n    const r = this._drivenProperties.size && t.size ? t.size : e.symbolSize,\n      i = M(r, e.symbolSize, e.resourceSize, this._context.renderCoordsHelper.unitInMeters);\n    1 === i[0] && 1 === i[1] && 1 === i[2] || a(s, s, i);\n  }\n  prepareSymbolLayerPatch(e) {\n    if (\"partial\" !== e.diff.type) return;\n    const t = e.diff.diff;\n    this._preparePatchTransform(e, t), this._preparePatchColor(e, t);\n  }\n  updateGeometry(e, t) {\n    if (null == this._resources) return !0;\n    const s = t && J(t);\n    if (null == s) return !1;\n    const r = this.getGeometryElevationMode(t);\n    return e.elevationContext.mode === r && (this._computeGlobalTransform(s, e.elevationContext, ge, Pe), ye(e.elevationContext) && (e.alignedSampledElevation = Pe.sampledElevation), this._resources.lodRenderer.instanceData.setGlobalTransform(e.instanceIndex, ge, !0), Y(e, s, this._context.elevationProvider), !0);\n  }\n  _preparePatchTransform(e, t) {\n    if (!(t.heading || t.tilt || t.roll || t.width || t.height || t.depth || t.anchor || t.anchorPosition)) return;\n    if (null == this._resources) return;\n    const s = (e, t, s) => (null != e && \"complete\" === e.type ? e.newValue : t) ?? s,\n      r = s(t.heading, this.symbolLayer.heading, 0),\n      i = s(t.tilt, this.symbolLayer.tilt, 0),\n      a = s(t.roll, this.symbolLayer.roll, 0),\n      o = s(t.width, this.symbolLayer.width, void 0),\n      n = s(t.height, this.symbolLayer.height, void 0),\n      l = s(t.depth, this.symbolLayer.depth, void 0),\n      c = s(t.anchor, this.symbolLayer.anchor, void 0),\n      h = s(t.anchorPosition, this.symbolLayer.anchorPosition, void 0);\n    delete t.heading, delete t.tilt, delete t.roll, delete t.width, delete t.height, delete t.depth, delete t.anchor, delete t.anchorPosition;\n    const d = {\n        heading: r,\n        tilt: i,\n        roll: a,\n        anchor: c,\n        anchorPosition: h\n      },\n      m = this._resources;\n    this.loadStatus === W.LOADED && e.symbolLayerStatePatches.push(() => {\n      m.symbolSize = y(U(m.resourceSize, {\n        width: o,\n        height: n,\n        depth: l,\n        isPrimitive: this.symbolLayer.isPrimitive\n      }));\n    }), e.graphics3DGraphicPatches.push((e, t) => {\n      const s = this._computeLocalTransform(m, d, t, _e),\n        r = e.instanceIndex;\n      m.lodRenderer.instanceData.setLocalTransform(r, s, !0);\n    });\n  }\n  _preparePatchColor(t, s) {\n    if (!s.material || \"partial\" !== s.material.type) return;\n    const r = s.material.diff;\n    if (!r.color || \"complete\" !== r.color.type || null == r.color.newValue || null == r.color.oldValue) return;\n    const i = r.color.newValue,\n      a = null != i ? e.toUnitRGBA(i) : P;\n    delete r.color;\n    const o = this._resources;\n    null != o && t.graphics3DGraphicPatches.push(e => {\n      let t;\n      this._hasPerInstanceColor() ? (o.lodRenderer.instanceData.setColor(e.instanceIndex, a), t = this._setMaterialTransparencyParameters({}, i)) : t = this._setMaterialTransparencyParameters({\n        externalColor: a\n      }, i);\n      for (const s of o.stageResources.materials) s.setParameters(t);\n    });\n  }\n  _applyObjectRotation(e, t, s) {\n    if (!this._fastUpdates?.requiresShaderTransformation || !t) return H(e.heading, e.tilt, e.roll, s);\n  }\n  _applyAnchor(e, t, s) {\n    if (this._fastUpdates?.requiresShaderTransformation) return;\n    const r = ue(e.resourceBoundingBox, e.pivotOffset, t);\n    r && o(s, s, r);\n  }\n  _hasPerInstanceColor() {\n    return this._drivenProperties.color || this._drivenProperties.opacity;\n  }\n  _fastVisualVariableConvertOptions(e, t, s, r) {\n    const i = null != e ? y(C(e)) : f,\n      a = null != e ? ue(e, r, this.symbolLayer) : _,\n      o = this._context.renderCoordsHelper.unitInMeters,\n      n = M(null != t ? t : void 0, t, s, o),\n      l = g(this.symbolLayer.tilt || 0, this.symbolLayer.roll || 0, this.symbolLayer.heading || 0);\n    return new te({\n      size: !0,\n      color: !0,\n      rotation: !0,\n      opacity: !1\n    }, i, t ?? f, o, a, n, l);\n  }\n}\nfunction ue(e, t, s) {\n  const r = b();\n  switch (s.anchor) {\n    case \"center\":\n      d(r, j(e)), h(r, r);\n      break;\n    case \"top\":\n      {\n        const t = j(e);\n        u(r, -t[0], -t[1], -e[5]);\n        break;\n      }\n    case \"bottom\":\n      {\n        const t = j(e);\n        u(r, -t[0], -t[1], -e[2]);\n        break;\n      }\n    case \"relative\":\n      {\n        const t = j(e),\n          i = C(e),\n          a = s.anchorPosition,\n          o = a ? g(a.x, a.y, a.z) : _;\n        m(r, i, o), p(r, r, t), h(r, r);\n        break;\n      }\n    default:\n      null != t ? h(r, t) : d(r, _);\n  }\n  return r;\n}\nfunction ye(e) {\n  return \"absolute-height\" !== e.mode;\n}\nconst fe = b(),\n  _e = l(),\n  ge = l(),\n  be = R(),\n  Pe = new A();\nexport { pe as Graphics3DObjectSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { estimateSize as t } from \"../../../../core/typedArrayUtil.js\";\nimport { l as i, n as s, c as o } from \"../../../../chunks/vec32.js\";\nimport { fromValues as e } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { newFloatArray as h } from \"../../../../geometry/support/FloatArray.js\";\nclass r {\n  constructor(t, i, s, o) {\n    this.vertices = t, this.positionsES = i, this.offset = o;\n    const r = t.length,\n      n = Math.floor(r / 2),\n      g = this.offset + 3 * n,\n      v = s[g],\n      f = s[g + 1],\n      c = s[g + 2];\n    this.origin = e(v, f, c), this.positions = h(3 * r);\n    const l = this.offset + 3 * r;\n    for (let e = this.offset; e < l; e += 3) this.positions[e] = s[e] - v, this.positions[e + 1] = s[e + 1] - f, this.positions[e + 2] = s[e + 2] - c;\n    this.updatePathVertexInformation();\n  }\n  get usedMemory() {\n    return t(this.positions);\n  }\n  updatePathVertexInformation() {\n    const t = this.vertices.length,\n      e = this.vertices[0];\n    let h = this.offset;\n    const r = this.positions;\n    e.vRight[0] = r[h + 3] - r[h], e.vRight[1] = r[h + 4] - r[h + 1], e.vRight[2] = r[h + 5] - r[h + 2], h += 3;\n    let n = i(e.vRight);\n    e.vMinSiblingLength = n, s(e.vRight, e.vRight);\n    let g = e;\n    for (let v = 1; v < t; ++v) {\n      const e = this.vertices[v];\n      if (e.vLeft = g.vRight, v < t - 1) {\n        e.vRight[0] = r[h + 3] - r[h], e.vRight[1] = r[h + 4] - r[h + 1], e.vRight[2] = r[h + 5] - r[h + 2];\n        const t = i(e.vRight);\n        e.vMinSiblingLength = Math.min(n, t), n = t, s(e.vRight, e.vRight);\n      } else o(e.vRight, e.vLeft), e.vMinSiblingLength = n;\n      g = e, h += 3;\n    }\n  }\n}\nexport { r as Path };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { estimateSize as t } from \"../../../../core/typedArrayUtil.js\";\nimport { newFloatArray as e, floatSubArray as i } from \"../../../../geometry/support/FloatArray.js\";\nimport { newIntArray as s, compactIndices as r } from \"../../../../geometry/support/Indices.js\";\nclass h {\n  constructor(t, r, h, o, p, n = {}) {\n    this.path = t, this.profile = r, this.extruder = h, this.startCap = o, this.endCap = p, this.options = n, this._extrusionVertexCount = 0;\n    const l = this.path.vertices.length - 2;\n    this.numExtrusionProfiles = h.numProfilesPerJoin() * l + 2, this.numVerticesTotal = r.vertices.length * this.numExtrusionProfiles, this.startCap.vertexBufferStart = this.numVerticesTotal;\n    const a = this.startCap.numVertices;\n    this.numVerticesTotal += a, this.endCap.vertexBufferStart = this.numVerticesTotal;\n    const u = this.endCap.numVertices;\n    this.numVerticesTotal += u, this.pathVertexData = s(1 * this.numVerticesTotal), this.profileRightAxes = e(4 * this.numVerticesTotal), this.profileUpAxes = e(4 * this.numVerticesTotal), this.profileVertexAndNormals = e(4 * this.numVerticesTotal), this.positions = i(t.positions, t.offset, 3 * t.vertices.length), this._rebuildGeometry(), this.buildTopology();\n  }\n  get usedMemory() {\n    return t(this.pathVertexData, this.profileRightAxes, this.profileUpAxes, this.profileVertexAndNormals) + this.path.usedMemory + this.profile.usedMemory;\n  }\n  emitVertex(t, e, i, s, r) {\n    const h = 4 * this._extrusionVertexCount;\n    if (this.profileRightAxes[h] = e.right[0], this.profileRightAxes[h + 1] = e.right[1], this.profileRightAxes[h + 2] = e.right[2], this.profileUpAxes[h] = e.up[0], this.profileUpAxes[h + 1] = e.up[1], this.profileUpAxes[h + 2] = e.up[2], this.profileVertexAndNormals[h] = i[0], this.profileVertexAndNormals[h + 1] = i[1], this.profileVertexAndNormals[h + 2] = s[0], this.profileVertexAndNormals[h + 3] = s[1], this.pathVertexData[this._extrusionVertexCount] = t, r) {\n      const e = this.path.vertices[t],\n        i = e.maxStretchDistance;\n      this.profileRightAxes[h + 3] = e.rotationRight[0] * i, this.profileUpAxes[h + 3] = e.rotationRight[1] * i;\n    } else this.profileRightAxes[h + 3] = 0, this.profileUpAxes[h + 3] = 0;\n    ++this._extrusionVertexCount;\n  }\n  emitCapVertex(t, e, i, s, r, h) {\n    const o = 4 * this._extrusionVertexCount;\n    this.profileRightAxes[o] = e.right[0], this.profileRightAxes[o + 1] = e.right[1], this.profileRightAxes[o + 2] = e.right[2], this.profileRightAxes[o + 3] = r, this.profileUpAxes[o] = e.up[0], this.profileUpAxes[o + 1] = e.up[1], this.profileUpAxes[o + 2] = e.up[2], this.profileUpAxes[o + 3] = h, this.profileVertexAndNormals[o] = i[0], this.profileVertexAndNormals[o + 1] = i[1], this.profileVertexAndNormals[o + 2] = s[0], this.profileVertexAndNormals[o + 3] = s[1], this.pathVertexData[this._extrusionVertexCount] = t, ++this._extrusionVertexCount;\n  }\n  _rebuildGeometry() {\n    this._extrusionVertexCount = 0;\n    const {\n      positions: t,\n      offset: e,\n      vertices: s\n    } = this.path;\n    this.positions = i(t, e, 3 * s.length);\n    let r = 0;\n    const h = (t, e, i, s, h) => this.emitCapVertex(r, t, e, i, s, h),\n      o = (t, e, i, s) => this.emitVertex(r, t, e, i, s);\n    for (this.startCap.rebuildConnectingProfileGeometry(s[r], this.profile, h), r = 1; r < s.length - 1; ++r) this.extruder.extrude(s[r], this.profile, o);\n    this.endCap.rebuildConnectingProfileGeometry(s[r], this.profile, h), r = 0, this.startCap.rebuildCapGeometry(s[r], h), r = s.length - 1, this.endCap.rebuildCapGeometry(s[r], h);\n  }\n  buildTopology() {\n    const t = this.profile.vertices.length,\n      e = this.profile.numSegments,\n      i = this.numExtrusionProfiles - 1;\n    let s = 3 * (2 * (e * i));\n    this.startCap.indexBufferStart = s, this.startCap.firstProfileVertexIndex = 0, s += this.startCap.numIndices, this.endCap.indexBufferStart = s, this.endCap.firstProfileVertexIndex = t * (this.numExtrusionProfiles - 1);\n    const h = new Array(),\n      o = new Array(),\n      p = new Array(),\n      n = (t, e, i) => {\n        h.push(t), h.push(e), h.push(i), o.push(t), o.push(e), o.push(i), p.push(this.pathVertexData[t]), p.push(this.pathVertexData[e]), p.push(this.pathVertexData[i]);\n      };\n    for (let r = 0; r < e; ++r) {\n      const e = this.profile.indices[2 * r],\n        s = this.profile.indices[2 * r + 1];\n      for (let r = 0; r < i; ++r) {\n        const i = r * t + e,\n          h = (r + 1) * t + s,\n          o = r * t + s;\n        n(i, (r + 1) * t + e, h), n(i, h, o);\n      }\n    }\n    this.startCap.buildTopology(this.path.vertices[0], n), this.endCap.buildTopology(this.path.vertices[this.path.vertices.length - 1], n), this.vertexIndices = r(h), this.normalIndices = r(o), this.pathVertexIndices = r(p);\n  }\n  onPathChanged() {\n    this._rebuildGeometry();\n  }\n}\nexport { h as PathBuilder };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { set as e, subtract as t, scale as s, add as i, normalize as r } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as n } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nclass o {\n  rebuildConnectingProfileGeometry(e, t, s) {\n    for (let i = 0; i < t.vertices.length; ++i) s(e.frame, t.vertices[i], t.normals[i], 0, 0);\n  }\n}\nclass l extends o {\n  constructor() {\n    super(), this.numVertices = 0, this.numIndices = 0;\n  }\n  rebuildCapGeometry() {}\n  buildTopology() {}\n}\nclass f extends o {\n  constructor(e, t = 0, s = !1) {\n    super(), this.profile = e, this.profilePlaneOffset = t, this.flip = s;\n  }\n  get numVertices() {\n    return this.profile.vertices.length;\n  }\n  get numIndices() {\n    return 3 * this.profile.numSegments;\n  }\n  rebuildConnectingProfileGeometry(e, t, s) {\n    const i = this.profilePlaneOffset;\n    for (let r = 0; r < t.vertices.length; ++r) s(e.frame, t.vertices[r], t.normals[r], i, 0);\n  }\n  rebuildCapGeometry(t, s) {\n    const i = this.profile,\n      r = this.flip ? 1 : -1,\n      n = this.profilePlaneOffset,\n      o = m;\n    e(o, 0, 0);\n    for (let e = 0; e < i.vertices.length; ++e) s(t.frame, i.vertices[e], o, n, r);\n  }\n  buildTopology(e, t) {\n    const s = this.profile,\n      i = this.vertexBufferStart + s.indices[0];\n    for (let r = 1; r < s.numSegments; ++r) {\n      const e = s.indices[2 * r],\n        n = s.indices[2 * r + 1],\n        o = this.vertexBufferStart + e,\n        l = this.vertexBufferStart + n;\n      this.flip ? t(l, o, i) : t(i, o, l);\n    }\n  }\n}\nclass h extends o {\n  constructor(e) {\n    super(), this.flip = !1, this.sign = 0, this.breakNormals = !1, this.numSegments = 3, this.profile = e.profile, this.flip = e.flip, this.sign = this.flip ? 1 : -1, this.breakNormals = e.breakNormals, this.numSegments = e.subdivisions;\n  }\n  get numVertices() {\n    let e = this.profile.vertices.length * (this.numSegments - 1) + this.profile.poles.length;\n    return this.breakNormals && (e += this.profile.vertices.length), e;\n  }\n  get numIndices() {\n    let e = 0;\n    const t = this.profile;\n    e += 2 * t.numSegments * (this.numSegments - 1);\n    for (let s = 0; s < t.numSegments; ++s) {\n      const i = t.indices[2 * s],\n        r = t.indices[2 * s + 1];\n      t.poleIndices[i] === t.poleIndices[r] ? e += 1 : e += 2;\n    }\n    return 3 * e;\n  }\n  rebuildCapGeometry(n, o) {\n    const l = this.profile,\n      f = n.frame,\n      h = .5 * this.sign,\n      p = c,\n      a = m;\n    e(a, 0, 0);\n    for (const e of l.poles) e.normal ? o(f, e.position, e.normal, h, 0) : o(f, e.position, a, h, this.sign);\n    if (this.breakNormals) for (let e = 0; e < l.vertices.length; ++e) o(f, l.vertices[e], l.normals[e], 0, 0);\n    for (let e = 0; e < this.numSegments - 1; ++e) {\n      const n = (1 - (e + 1) / this.numSegments) * Math.PI * .5,\n        c = Math.sin(n),\n        m = Math.cos(n);\n      for (let e = 0; e < l.vertices.length; ++e) {\n        const n = l.poles[l.poleIndices[e]];\n        t(p, l.vertices[e], n.position), s(p, p, c), n.normal ? (i(p, p, n.position), o(f, p, n.normal, h * m, 0)) : (r(a, p), s(a, a, c), i(p, p, n.position), o(f, p, a, h * m, this.sign * m));\n      }\n    }\n  }\n  buildTopology(e, t) {\n    const s = this.profile,\n      i = this.breakNormals ? this.vertexBufferStart + s.poles.length : this.firstProfileVertexIndex,\n      r = this.breakNormals ? this.vertexBufferStart + s.poles.length + s.vertices.length : this.vertexBufferStart + s.poles.length;\n    for (let n = 0; n < s.numSegments; ++n) {\n      const e = s.indices[2 * n],\n        o = s.indices[2 * n + 1],\n        l = this.vertexBufferStart + s.poleIndices[e],\n        f = this.vertexBufferStart + s.poleIndices[o];\n      let h = i + e,\n        c = i + o;\n      for (let i = 0; i < this.numSegments - 1; ++i) {\n        const n = r + i * s.vertices.length + e,\n          l = r + i * s.vertices.length + o;\n        this.flip ? (t(n, c, h), t(c, n, l)) : (t(h, c, n), t(l, n, c)), h = n, c = l;\n      }\n      this.flip ? (t(l, c, h), l !== f && t(l, f, c)) : (t(h, c, l), l !== f && t(c, f, l));\n    }\n  }\n}\nconst c = n(),\n  m = n();\nexport { l as NoCapBuilder, o as PathCapBuilder, h as RoundCapBuilder, f as TriangulationCapBuilder };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { fromRotation as t } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as e } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { dot as r } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as s } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { h as i } from \"../../../../chunks/vec32.js\";\nimport { create as o } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nclass n {}\nclass c {\n  numProfilesPerJoin() {\n    return 1;\n  }\n  extrude(t, e, r) {\n    for (let s = 0; s < e.vertices.length; ++s) r(t.frame, e.vertices[s], e.normals[s], !1);\n  }\n}\nclass a {\n  constructor(t, e) {\n    this.cutoffAngle = t, this.numBendSubdivisions = e;\n  }\n  numProfilesPerJoin() {\n    return this.numBendSubdivisions + 1;\n  }\n  extrude(e, s, i) {\n    const o = h,\n      {\n        rotationAngle: n,\n        rotationRight: c,\n        frame: a\n      } = e;\n    if (Math.abs(n) >= this.cutoffAngle) {\n      const l = e.rotationFrameUp;\n      for (let h = 0; h < this.numBendSubdivisions + 1; ++h) {\n        t(u, .5 * -n + h * n / this.numBendSubdivisions, l), m(o, a, u);\n        for (let t = 0; t < s.vertices.length; ++t) {\n          if (r(s.vertices[t], c) * n >= 0) i(o, s.vertices[t], s.normals[t], !1);else {\n            i(a, e.applyMiterStretch(f, s.vertices[t]), s.normals[t], !0);\n          }\n        }\n      }\n    } else for (let t = 0; t < this.numBendSubdivisions + 1; ++t) for (let o = 0; o < s.vertices.length; ++o) {\n      const t = r(s.vertices[o], c) * n >= 0;\n      i(a, e.applyMiterStretch(f, s.vertices[o]), s.normals[o], !t);\n    }\n  }\n}\nclass l {\n  constructor() {\n    this.up = o(), this.right = o();\n  }\n}\nfunction m(t, e, r) {\n  i(t.up, e.up, r), i(t.right, e.right, r);\n}\nconst f = s(),\n  u = e(),\n  h = new l();\nexport { l as Frame2D, a as MiterExtruder, n as PathExtruder, c as SimpleExtruder };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ContentObjectType as t } from \"./ContentObjectType.js\";\nimport { Geometry as r } from \"./Geometry.js\";\nclass e extends r {\n  constructor(r, e, o, n, s, i) {\n    super(r, e, null, t.Mesh, i), this.path = o, this.geometrySR = n, this.stencilWidth = s;\n  }\n}\nvar o;\nfunction n(t) {\n  return \"path\" in t;\n}\n!function (t) {\n  t[t.World = 0] = \"World\", t[t.Path = 1] = \"Path\";\n}(o || (o = {}));\nexport { e as PathGeometry, o as UpVectorAlignment, n as isPathGeometry };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { set as t, length as e, normalize as r, dot as i, scale as s, add as o } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as a } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { s as n, b as h } from \"../../../../chunks/vec32.js\";\nimport { create as l } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as c } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { newFloatArray as u } from \"../../../../geometry/support/FloatArray.js\";\nimport { getZeroIndexArray as b } from \"../../../../geometry/support/Indices.js\";\nimport { Attribute as v, Vertices as m } from \"./Attribute.js\";\nimport { compressNormal as p } from \"./Normals.js\";\nimport { intersectTriangles as x } from \"./RayIntersections.js\";\nimport { VertexAttribute as A } from \"./VertexAttribute.js\";\nclass d {\n  constructor(t) {\n    this.builder = t;\n  }\n  onPathChanged(t) {\n    this.builder.onPathChanged();\n  }\n}\nclass f extends d {\n  constructor(t) {\n    super(t), this.vertexAttributeColor = c(255, 255, 255, 255), this.size = new Array(), this.vertexAttributePosition = u(3 * this.builder.numVerticesTotal), this.vertexAttributeNormal = new Int16Array(2 * this.builder.numVerticesTotal);\n  }\n  bakeVertexColors(t) {\n    this.vertexAttributeColor[0] = 255 * t[0], this.vertexAttributeColor[1] = 255 * t[1], this.vertexAttributeColor[2] = 255 * t[2], this.vertexAttributeColor[3] = 255 * (t.length > 3 ? t[3] : 1);\n  }\n  bake(a) {\n    this.size = a;\n    const {\n      numVerticesTotal: l,\n      pathVertexData: c,\n      path: u,\n      positions: b,\n      profileRightAxes: v,\n      profileUpAxes: m,\n      profileVertexAndNormals: x\n    } = this.builder;\n    for (let A = 0; A < l; ++A) {\n      let l = c[A];\n      const d = 0 === l || l === u.vertices.length - 1;\n      l *= 3;\n      const f = V;\n      let g = 0,\n        D = 0;\n      const N = 4 * A,\n        j = n(R, v[N], v[N + 1], v[N + 2]),\n        E = n(w, m[N], m[N + 1], m[N + 2]),\n        y = t(P, x[N] * a[0], x[N + 1] * a[1]);\n      if (d) h(f, E, j), g = v[N + 3] * a[0], D = m[N + 3];else {\n        const a = I,\n          h = C;\n        t(a, v[N + 3], m[N + 3]);\n        const l = e(a);\n        r(a, a);\n        const c = i(y, a);\n        if (Math.abs(c) > l) {\n          t(h, -a[1], a[0]);\n          const e = i(y, h);\n          s(a, a, l * Math.sign(c)), s(h, h, e), o(y, a, h);\n        }\n        n(f, 0, 0, 0);\n      }\n      const T = n(O, j[0] * y[0] + E[0] * y[1], j[1] * y[0] + E[1] * y[1], j[2] * y[0] + E[2] * y[1]),\n        L = 3 * A;\n      this.vertexAttributePosition[L] = b[l] + T[0] + f[0] * g, this.vertexAttributePosition[L + 1] = b[l + 1] + T[1] + f[1] * g, this.vertexAttributePosition[L + 2] = b[l + 2] + T[2] + f[2] * g;\n      const M = t(P, x[N + 2], x[N + 3]);\n      p(this.vertexAttributeNormal, A, j[0] * M[0] + E[0] * M[1] + f[0] * D, j[1] * M[0] + E[1] * M[1] + f[1] * D, j[2] * M[0] + E[2] * M[1] + f[2] * D);\n    }\n  }\n  createGeometryData() {\n    const t = this.builder.vertexIndices.length,\n      {\n        normalIndices: e,\n        vertexIndices: r\n      } = this.builder;\n    return [[A.POSITION, new v(this.vertexAttributePosition, r, 3, !0)], [A.NORMALCOMPRESSED, new v(this.vertexAttributeNormal, e, 2, !0)], [A.COLOR, new v(this.vertexAttributeColor, b(t), 4)]];\n  }\n  onPathChanged(t) {\n    super.onPathChanged(t), this.bake(this.size);\n  }\n  intersect(t, e, r, i) {\n    const s = this.builder.vertexIndices,\n      o = new m(this.vertexAttributePosition, 3),\n      a = s.length / 3;\n    x(t, e, 0, a, s, o, void 0, r, (t, e, r) => {\n      i(t, r, e, !1);\n    });\n  }\n}\nclass g extends d {\n  constructor(t, e, r, i) {\n    super(t), this.sizeAttributeValue = e, this.colorAttributeValue = r, this.opacityAttributeValue = i, this.vvData = null, this.baked = new f(t), this.vvData = u(4 * this.builder.path.vertices.length);\n    for (let s = 0; s < this.builder.path.vertices.length; ++s) {\n      this.vvData[4 * s] = e, this.vvData[4 * s + 1] = r, this.vvData[4 * s + 2] = i;\n      const t = 0 === s || s === this.builder.path.vertices.length - 1;\n      this.vvData[4 * s + 3] = t ? 1 : 0;\n    }\n  }\n  createGeometryData() {\n    const {\n      positions: t,\n      profileRightAxes: e,\n      profileUpAxes: r,\n      profileVertexAndNormals: i,\n      pathVertexIndices: s,\n      vertexIndices: o\n    } = this.builder;\n    return [[A.POSITION, new v(t, s, 3, !0)], [A.PROFILERIGHT, new v(e, o, 4, !0)], [A.PROFILEUP, new v(r, o, 4, !0)], [A.PROFILEVERTEXANDNORMAL, new v(i, o, 4, !0)], [A.FEATUREVALUE, new v(this.vvData, s, 4, !0)]];\n  }\n  onPathChanged(t) {\n    super.onPathChanged(t);\n    const e = t.getMutableAttribute(A.POSITION);\n    e && (e.data = this.builder.positions);\n  }\n}\nconst P = a(),\n  I = a(),\n  C = a(),\n  O = l(),\n  V = l(),\n  R = l(),\n  w = l();\nexport { g as FastUpdatePathGeometry, d as PathGeometryData, f as StaticPathGeometry };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { c as t, s as e, g as r, l as s, n as o, b as i } from \"../../../../chunks/vec32.js\";\nimport { create as m } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { create as a, fromPositionAndNormal as f, intersectRay as p } from \"../../../../geometry/support/plane.js\";\nimport { wrap as c } from \"../../../../geometry/support/ray.js\";\nimport { makeOrthoBasisDirUpFallback as g } from \"./GeometryUtil.js\";\nfunction l(l, v) {\n  let h = null;\n  const u = l.vertices.length,\n    j = .99619469809,\n    R = m(),\n    y = m(),\n    b = m(),\n    x = m(),\n    L = m(),\n    k = m(),\n    q = a();\n  let G = l.vertices[0];\n  t(y, v), e(R, 0, 1, 0), g(G.vRight, y, R, R, b, y, j), t(G.frame.up, y), t(G.frame.right, b);\n  const M = l.positions;\n  let U = l.offset;\n  h = G;\n  for (let m = 1; m < u; ++m) {\n    G = l.vertices[m], r(L, G.vLeft, G.vRight);\n    let a = s(L);\n    a > 0 ? (a = 1 / Math.sqrt(a), L[0] = L[0] * a, L[1] = L[1] * a, L[2] = L[2] * a) : (L[0] = G.vRight[0], L[1] = G.vRight[1], L[2] = G.vRight[2]), k[0] = M[U] + h.frame.up[0], k[1] = M[U + 1] + h.frame.up[1], k[2] = M[U + 2] + h.frame.up[2], U += 3;\n    const v = e(n, M[U], M[U + 1], M[U + 2]);\n    f(v, L, q);\n    p(q, c(k, G.vLeft), x) ? (x[0] -= M[U], x[1] -= M[U + 1], x[2] -= M[U + 2], o(y, x), i(b, L, y), o(b, b)) : g(L, h.frame.up, h.frame.right, R, b, y, j), t(G.frame.up, y), t(G.frame.right, b), h = G;\n  }\n}\nconst n = m();\nexport { l as computeMinimumRotationTangentFrame };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { estimateSize as t } from \"../../../../core/typedArrayUtil.js\";\nimport { fromValues as e, clone as s } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { pathNumCircleProfileSubdivisions as r } from \"../../layers/graphics/Graphics3DPathSymbolLayerConstants.js\";\nclass o {\n  constructor() {\n    this.vertices = new Array(), this.normals = new Array(), this.indices = new Array(), this.poles = new Array(), this.poleIndices = new Array();\n  }\n  addVertex(t, e) {\n    return this.vertices.push(s(t)), this.normals.push(s(e)), this.vertices.length - 1;\n  }\n  addPole(t, e = null) {\n    return this.poles.push({\n      position: s(t),\n      normal: e ? s(e) : null\n    }), this.poles.length - 1;\n  }\n  addSegment(t, e = null) {\n    this.indices.push(t.v0), this.indices.push(t.v1), e && (this.poleIndices.push(e.v0), this.poleIndices.push(e.v1));\n  }\n  get numSegments() {\n    return this.indices.length / 2;\n  }\n  translate(t, e) {\n    for (const s of this.vertices) s[0] += t, s[1] += e;\n    for (const s of this.poles) s.position[0] += t, s.position[1] += e;\n  }\n  get usedMemory() {\n    return this.vertices.length * t(this.vertices[0]) * 2 + t(this.indices);\n  }\n}\nconst n = {\n  top: [0, -.5],\n  bottom: [0, .5]\n};\nfunction i(t) {\n  const s = .5,\n    i = r,\n    d = new o(),\n    a = {\n      v0: 0,\n      v1: 0\n    };\n  d.addPole(e(0, 0));\n  for (let r = 0; r < i; ++r) {\n    const t = 2 * r * Math.PI / i,\n      o = Math.cos(t),\n      n = Math.sin(t),\n      a = e(o * s, n * s),\n      c = e(o, n);\n    d.addVertex(a, c);\n  }\n  for (let e = 0; e < i - 1; ++e) {\n    const t = {\n      v0: e,\n      v1: e + 1\n    };\n    d.addSegment(t, a);\n  }\n  const c = {\n    v0: i - 1,\n    v1: 0\n  };\n  if (d.addSegment(c, a), \"center\" !== t) {\n    const e = n[t];\n    d.translate(e[0], e[1]);\n  }\n  return d;\n}\nconst d = {\n    center: i(\"center\"),\n    top: i(\"top\"),\n    bottom: i(\"bottom\")\n  },\n  a = {\n    center: c(\"center\"),\n    top: c(\"top\"),\n    bottom: c(\"bottom\")\n  };\nfunction c(t) {\n  const s = 1,\n    r = 1,\n    i = new o(),\n    d = e(.5 * -s, .5 * -r),\n    a = e(.5 * s, .5 * -r),\n    c = e(.5 * s, .5 * r),\n    h = e(.5 * -s, .5 * r),\n    l = e(0, -1),\n    v = e(1, 0),\n    p = e(0, 1),\n    m = e(-1, 0);\n  if (i.addPole(e(0, .5 * r), p), i.addPole(e(0, .5 * r)), i.addPole(e(0, .5 * -r)), i.addPole(e(0, .5 * -r), l), i.addVertex(d, l), i.addVertex(a, l), i.addSegment({\n    v0: 0,\n    v1: 1\n  }, {\n    v0: 3,\n    v1: 3\n  }), i.addVertex(a, v), i.addVertex(c, v), i.addSegment({\n    v0: 2,\n    v1: 3\n  }, {\n    v0: 2,\n    v1: 1\n  }), i.addVertex(c, p), i.addVertex(h, p), i.addSegment({\n    v0: 4,\n    v1: 5\n  }, {\n    v0: 0,\n    v1: 0\n  }), i.addVertex(h, m), i.addVertex(d, m), i.addSegment({\n    v0: 6,\n    v1: 7\n  }, {\n    v0: 1,\n    v1: 2\n  }), \"center\" !== t) {\n    const e = n[t];\n    i.translate(e[0], e[1]);\n  }\n  return i;\n}\nexport { o as PathProfile, d as circleProfiles, a as quadProfiles };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { getEpsilon as t } from \"./common.js\";\nfunction n(t, n) {\n  return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t;\n}\nfunction r(t) {\n  return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 1, t;\n}\nfunction a(t, n, r, a, u) {\n  return t[0] = n, t[1] = r, t[2] = a, t[3] = u, t;\n}\nfunction u(t, n) {\n  if (t === n) {\n    const r = n[1];\n    t[1] = n[2], t[2] = r;\n  } else t[0] = n[0], t[1] = n[2], t[2] = n[1], t[3] = n[3];\n  return t;\n}\nfunction o(t, n) {\n  const r = n[0],\n    a = n[1],\n    u = n[2],\n    o = n[3];\n  let e = r * o - u * a;\n  return e ? (e = 1 / e, t[0] = o * e, t[1] = -a * e, t[2] = -u * e, t[3] = r * e, t) : null;\n}\nfunction e(t, n) {\n  const r = n[0];\n  return t[0] = n[3], t[1] = -n[1], t[2] = -n[2], t[3] = r, t;\n}\nfunction c(t) {\n  return t[0] * t[3] - t[2] * t[1];\n}\nfunction s(t, n, r) {\n  const a = n[0],\n    u = n[1],\n    o = n[2],\n    e = n[3],\n    c = r[0],\n    s = r[1],\n    i = r[2],\n    f = r[3];\n  return t[0] = a * c + o * s, t[1] = u * c + e * s, t[2] = a * i + o * f, t[3] = u * i + e * f, t;\n}\nfunction i(t, n, r) {\n  const a = n[0],\n    u = n[1],\n    o = n[2],\n    e = n[3],\n    c = Math.sin(r),\n    s = Math.cos(r);\n  return t[0] = a * s + o * c, t[1] = u * s + e * c, t[2] = a * -c + o * s, t[3] = u * -c + e * s, t;\n}\nfunction f(t, n, r) {\n  const a = n[0],\n    u = n[1],\n    o = n[2],\n    e = n[3],\n    c = r[0],\n    s = r[1];\n  return t[0] = a * c, t[1] = u * c, t[2] = o * s, t[3] = e * s, t;\n}\nfunction l(t, n) {\n  const r = Math.sin(n),\n    a = Math.cos(n);\n  return t[0] = a, t[1] = r, t[2] = -r, t[3] = a, t;\n}\nfunction M(t, n) {\n  return t[0] = n[0], t[1] = 0, t[2] = 0, t[3] = n[1], t;\n}\nfunction h(t) {\n  return \"mat2(\" + t[0] + \", \" + t[1] + \", \" + t[2] + \", \" + t[3] + \")\";\n}\nfunction b(t) {\n  return Math.sqrt(t[0] ** 2 + t[1] ** 2 + t[2] ** 2 + t[3] ** 2);\n}\nfunction m(t, n, r, a) {\n  return t[2] = a[2] / a[0], r[0] = a[0], r[1] = a[1], r[3] = a[3] - t[2] * r[1], [t, n, r];\n}\nfunction d(t, n, r) {\n  return t[0] = n[0] + r[0], t[1] = n[1] + r[1], t[2] = n[2] + r[2], t[3] = n[3] + r[3], t;\n}\nfunction p(t, n, r) {\n  return t[0] = n[0] - r[0], t[1] = n[1] - r[1], t[2] = n[2] - r[2], t[3] = n[3] - r[3], t;\n}\nfunction y(t, n) {\n  return t[0] === n[0] && t[1] === n[1] && t[2] === n[2] && t[3] === n[3];\n}\nfunction x(n, r) {\n  const a = n[0],\n    u = n[1],\n    o = n[2],\n    e = n[3],\n    c = r[0],\n    s = r[1],\n    i = r[2],\n    f = r[3],\n    l = t();\n  return Math.abs(a - c) <= l * Math.max(1, Math.abs(a), Math.abs(c)) && Math.abs(u - s) <= l * Math.max(1, Math.abs(u), Math.abs(s)) && Math.abs(o - i) <= l * Math.max(1, Math.abs(o), Math.abs(i)) && Math.abs(e - f) <= l * Math.max(1, Math.abs(e), Math.abs(f));\n}\nfunction S(t, n, r) {\n  return t[0] = n[0] * r, t[1] = n[1] * r, t[2] = n[2] * r, t[3] = n[3] * r, t;\n}\nfunction j(t, n, r, a) {\n  return t[0] = n[0] + r[0] * a, t[1] = n[1] + r[1] * a, t[2] = n[2] + r[2] * a, t[3] = n[3] + r[3] * a, t;\n}\nconst _ = s,\n  g = p,\n  q = Object.freeze(Object.defineProperty({\n    __proto__: null,\n    LDU: m,\n    add: d,\n    adjoint: e,\n    copy: n,\n    determinant: c,\n    equals: x,\n    exactEquals: y,\n    frob: b,\n    fromRotation: l,\n    fromScaling: M,\n    identity: r,\n    invert: o,\n    mul: _,\n    multiply: s,\n    multiplyScalar: S,\n    multiplyScalarAndAdd: j,\n    rotate: i,\n    scale: f,\n    set: a,\n    str: h,\n    sub: g,\n    subtract: p,\n    transpose: u\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nexport { m as LDU, d as add, e as adjoint, n as copy, c as determinant, x as equals, y as exactEquals, b as frob, l as fromRotation, M as fromScaling, r as identity, o as invert, q as m, _ as mul, s as multiply, S as multiplyScalar, j as multiplyScalarAndAdd, i as rotate, f as scale, a as set, h as str, g as sub, p as subtract, u as transpose };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nfunction e() {\n  return [1, 0, 0, 1];\n}\nfunction r(e) {\n  return [e[0], e[1], e[2], e[3]];\n}\nfunction t(e, r, t, n) {\n  return [e, r, t, n];\n}\nfunction n(e, r) {\n  return new Float64Array(e, r, 4);\n}\nconst o = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  clone: r,\n  create: e,\n  createView: n,\n  fromValues: t\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { r as clone, e as create, n as createView, t as fromValues, o as m };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { acosClamped as t, reciprocalClamped as i } from \"../../../../core/mathUtils.js\";\nimport { set as r } from \"../../../../core/libs/gl-matrix-2/math/mat2.js\";\nimport { create as s } from \"../../../../core/libs/gl-matrix-2/factories/mat2f64.js\";\nimport { set as e, transformMat2 as a } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { UNIT_X as h, create as o } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { c as n, g as m, n as g, j as f, m as c, f as u, b as l, k as p } from \"../../../../chunks/vec32.js\";\nimport { create as v } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { Frame2D as M } from \"./PathExtruder.js\";\nimport { UpVectorAlignment as b } from \"./PathGeometry.js\";\nclass R {\n  constructor() {\n    this.vLeft = v(), this.vRight = v(), this.vMinSiblingLength = 0, this.frame = new M();\n  }\n  setFrameFromUpVector(t) {\n    n(this.frame.up, t), m(k, this.vLeft, this.vRight), g(k, k), f(I, this.frame.up, c(k, this.frame.up)), u(D, k, I), g(D, D), l(this.frame.right, D, this.frame.up);\n  }\n  get foldingAngle() {\n    return Math.PI - this.rotationAngle;\n  }\n}\nclass x extends R {\n  get rotationFrameUp() {\n    return this.frame.up;\n  }\n  get rotationRight() {\n    return h;\n  }\n  get rotationAngle() {\n    f(w, this.frame.up, c(this.frame.up, this.vLeft)), u(w, this.vLeft, w), p(w, w), g(w, w), f(y, this.frame.up, c(this.frame.up, this.vRight)), u(y, this.vRight, y), g(y, y), l(U, this.rotationFrameUp, this.vLeft);\n    return Math.sign(c(U, this.vRight)) * (Math.PI - t(c(w, y)));\n  }\n  get maxStretchDistance() {\n    return Math.abs(this.vMinSiblingLength / Math.cos(.5 * this.foldingAngle));\n  }\n  applyMiterStretch(t, r) {\n    const s = this.rotationAngle;\n    if (Math.abs(s) <= 0) return r;\n    const a = i(Math.cos(.5 * s));\n    return e(t, (a - 1 + 1) * r[0], r[1]);\n  }\n}\nclass j extends R {\n  get rotationFrameUp() {\n    const t = Math.sign(c(this.frame.right, this.vRight));\n    return l(d, this.vRight, this.vLeft), f(d, d, t), g(d, d);\n  }\n  get rotationRight() {\n    const t = this.rotationFrameUp,\n      i = c(t, this.frame.up),\n      r = c(t, this.frame.right);\n    return f(F, this.frame.up, -r), f(P, this.frame.right, i), m(F, F, P), g(F, F), L(S, this.frame, F), S;\n  }\n  get rotationAngle() {\n    const i = Math.sign(c(this.frame.right, this.vRight));\n    return p(U, this.vLeft), -i * (Math.PI - t(c(U, this.vRight)));\n  }\n  get maxStretchDistance() {\n    return Math.abs(this.vMinSiblingLength * i(Math.cos(.5 * this.foldingAngle)));\n  }\n  applyMiterStretch(t, s) {\n    const e = this.rotationAngle;\n    if (0 === Math.abs(e)) return s;\n    const h = i(Math.cos(.5 * e)),\n      o = this.rotationRight,\n      n = r(E, 1 + (h - 1) * o[0] * o[0], (h - 1) * o[0] * o[1], (h - 1) * o[0] * o[1], 1 + (h - 1) * o[1] * o[1]);\n    return a(t, s, n);\n  }\n}\nfunction L(t, i, r) {\n  e(t, c(r, i.right), c(r, i.up));\n}\nfunction A(t) {\n  switch (t) {\n    case b.World:\n      return new x();\n    case b.Path:\n      return new j();\n  }\n}\nconst d = v(),\n  S = o(),\n  F = v(),\n  P = v(),\n  U = v(),\n  w = v(),\n  y = v(),\n  I = v(),\n  k = v(),\n  D = v(),\n  E = s();\nexport { R as PathVertex, A as newPathVertex };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { fromValues as o, create as t } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { ViewingMode as r } from \"../../../ViewingMode.js\";\nimport { ShaderOutput as i } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { PathVertexPositionPassParameters as s } from \"../core/shaderLibrary/attributes/PathVertexPosition.glsl.js\";\nimport { NormalsDoubleSidedMode as n } from \"../core/shaderLibrary/shading/Normals.glsl.js\";\nimport { PBRMode as a } from \"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";\nimport { ReloadableShaderModule as l } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as p } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { parameter as c } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { blendingDefault as u, oitBlending as d, oitDepthTest as h, oitDrawBuffers as m, OITPolygonOffset as v } from \"../lib/OrderIndependentTransparency.js\";\nimport { Program as f } from \"../lib/Program.js\";\nimport { stencilWriteMaskOn as b, stencilBaseAllZerosParams as y } from \"../lib/StencilUtils.js\";\nimport { TransparencyPassType as O } from \"../lib/TransparencyPassType.js\";\nimport { VertexAttribute as g } from \"../lib/VertexAttribute.js\";\nimport { DefaultTechniqueConfiguration as P } from \"./DefaultTechniqueConfiguration.js\";\nimport { P as T } from \"../../../../chunks/Path.glsl.js\";\nimport { SpecialDrawBuffers as j } from \"../../../webgl/enums.js\";\nimport { makePipelineState as S, frontFaceCullingParams as E, defaultDepthWriteParams as N, defaultColorWriteParams as R } from \"../../../webgl/renderState.js\";\nconst C = new Map([[g.POSITION, 0], [g.PROFILERIGHT, 1], [g.PROFILEUP, 2], [g.PROFILEVERTEXANDNORMAL, 3], [g.FEATUREVALUE, 4], [g.OBJECTANDLAYERIDCOLOR, 5]]);\nclass L extends s {\n  constructor() {\n    super(...arguments), this.ambient = o(.2, .2, .2), this.diffuse = o(.8, .8, .8), this.specular = o(0, 0, 0), this.opacity = 1, this.origin = t(), this.modelTransformation = null;\n  }\n}\nclass A extends p {\n  initializeConfiguration(e, o) {\n    o.spherical = e.viewingMode === r.Global, o.doublePrecisionRequiresObfuscation = e.rctx.driverTest.doublePrecisionRequiresObfuscation.result;\n  }\n  initializeProgram(e) {\n    return new f(e.rctx, A.shader.get().build(this.configuration), C);\n  }\n  initializePipeline() {\n    const e = this.configuration.transparencyPassType,\n      o = this.configuration,\n      t = e === O.NONE,\n      r = e === O.FrontFace;\n    return S({\n      blending: o.output === i.Color && o.transparent ? t ? u : d(e) : null,\n      culling: o.hasSlicePlane && !o.transparent && o.doubleSidedMode !== n.None ? E : null,\n      depthTest: {\n        func: h(e)\n      },\n      depthWrite: t || r ? N : null,\n      drawBuffers: o.output === i.Depth ? {\n        buffers: [j.NONE]\n      } : m(e),\n      colorWrite: R,\n      stencilWrite: o.hasOccludees ? b : null,\n      stencilTest: o.hasOccludees ? y : null,\n      polygonOffset: t || r ? null : v\n    });\n  }\n}\nA.shader = new l(T, () => import(\"../shaders/Path.glsl.js\"));\nclass V extends P {\n  constructor() {\n    super(...arguments), this.output = i.Color, this.doubleSidedMode = n.None, this.transparencyPassType = O.NONE, this.spherical = !1, this.receiveShadows = !1, this.receiveAmbientOcclusion = !1, this.vvSize = !1, this.vvColor = !1, this.vvOpacity = !1, this.hasSlicePlane = !1, this.transparent = !1, this.hasOccludees = !1, this.multipassEnabled = !1, this.cullAboveGround = !1, this.doublePrecisionRequiresObfuscation = !1, this.objectAndLayerIdColorInstanced = !1;\n  }\n}\ne([c({\n  count: i.COUNT\n})], V.prototype, \"output\", void 0), e([c({\n  count: n.COUNT\n})], V.prototype, \"doubleSidedMode\", void 0), e([c({\n  count: O.COUNT\n})], V.prototype, \"transparencyPassType\", void 0), e([c()], V.prototype, \"spherical\", void 0), e([c()], V.prototype, \"receiveShadows\", void 0), e([c()], V.prototype, \"receiveAmbientOcclusion\", void 0), e([c()], V.prototype, \"vvSize\", void 0), e([c()], V.prototype, \"vvColor\", void 0), e([c()], V.prototype, \"vvOpacity\", void 0), e([c()], V.prototype, \"hasSlicePlane\", void 0), e([c()], V.prototype, \"transparent\", void 0), e([c()], V.prototype, \"hasOccludees\", void 0), e([c()], V.prototype, \"multipassEnabled\", void 0), e([c()], V.prototype, \"cullAboveGround\", void 0), e([c()], V.prototype, \"doublePrecisionRequiresObfuscation\", void 0), e([c({\n  constValue: !1\n})], V.prototype, \"occlusionPass\", void 0), e([c({\n  constValue: a.Disabled\n})], V.prototype, \"pbrMode\", void 0), e([c({\n  constValue: !0\n})], V.prototype, \"hasVvInstancing\", void 0), e([c({\n  constValue: !1\n})], V.prototype, \"useCustomDTRExponentForWater\", void 0), e([c({\n  constValue: !1\n})], V.prototype, \"useFillLights\", void 0), e([c({\n  constValue: !1\n})], V.prototype, \"hasColorTexture\", void 0);\nexport { L as PathPassParameters, A as PathTechnique, V as PathTechniqueConfiguration, C as vertexAttributeLocations };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from \"../../../../core/has.js\";\nimport { clamp as e } from \"../../../../core/mathUtils.js\";\nimport { fromValues as t } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { newLayout as r } from \"../../support/buffer/InterleavedLayout.js\";\nimport { isShadowRelatedOutput as i, is3DGeometryOutput as s, ShaderOutput as a } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { NormalsDoubleSidedMode as o } from \"../core/shaderLibrary/shading/Normals.glsl.js\";\nimport n from \"../lib/GLMaterial.js\";\nimport { Material as u } from \"../lib/Material.js\";\nimport { isPathGeometry as h } from \"../lib/PathGeometry.js\";\nimport { MeshIntersectionOptions as c, intersectAabbInvDir as d } from \"../lib/RayIntersections.js\";\nimport { RenderSlot as l } from \"../lib/RenderSlot.js\";\nimport { VertexAttribute as p } from \"../lib/VertexAttribute.js\";\nimport { DefaultBufferWriter as m } from \"./DefaultBufferWriter.js\";\nimport { vertexAttributeLocations as f, PathTechniqueConfiguration as b, PathTechnique as S, PathPassParameters as v } from \"./PathTechnique.js\";\nclass g extends u {\n  constructor(e) {\n    super(e, new w()), this.supportsEdges = !0, this.produces = new Map([[l.OPAQUE_MATERIAL, e => (this.parameters.castShadows && i(e) || s(e)) && !this.parameters.transparent], [l.TRANSPARENT_MATERIAL, e => (this.parameters.castShadows && i(e) || s(e)) && this.parameters.transparent]]), this._vertexAttributeLocations = f, this._configuration = new b(), this._vertexBufferLayout = g.getVertexBufferLayout();\n  }\n  getConfiguration(e, t) {\n    return this._configuration.output = e, this._configuration.vvSize = !!this.parameters.vvSize, this._configuration.vvColor = !!this.parameters.vvColor, this._configuration.vvOpacity = !!this.parameters.vvOpacity, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.transparent = this.parameters.transparent, this._configuration.hasOccludees = this.parameters.hasOccludees, e === a.Color && (this._configuration.doubleSidedMode = this.parameters.doubleSided && \"normal\" === this.parameters.doubleSidedType ? o.View : this.parameters.doubleSided && \"winding-order\" === this.parameters.doubleSidedType ? o.WindingOrder : o.None, this._configuration.receiveShadows = this.parameters.receiveShadows, this._configuration.receiveAmbientOcclusion = null != t.ssao), this._configuration.transparencyPassType = t.transparencyPassType, this._configuration.multipassEnabled = t.multipassEnabled, this._configuration.cullAboveGround = t.multipassTerrain.cullAboveGround, this._configuration;\n  }\n  isVisibleForOutput(e) {\n    return e !== a.Shadow && e !== a.ShadowExcludeHighlight && e !== a.ShadowHighlight || this.parameters.castShadows;\n  }\n  isVisible() {\n    return super.isVisible() && this.parameters.opacity > 0;\n  }\n  intersect(r, i, s, a, o, n) {\n    const u = r;\n    if (!h(u)) return;\n    const l = u.path,\n      p = [this.parameters.size[0], this.parameters.size[1]];\n    if (this.parameters.vvSize) {\n      const {\n          offset: t,\n          factor: r,\n          minSize: i,\n          maxSize: s\n        } = this.parameters.vvSize,\n        a = l.sizeAttributeValue;\n      p[0] *= e(t[0] + a * r[0], i[0], s[0]), p[1] *= e(t[2] + a * r[2], i[2], s[2]);\n    }\n    const m = new c(!1, s.options.normalRequired),\n      f = Math.max(p[0], p[1]),\n      b = r.boundingInfo;\n    if (null == b) return void O(l, p, a, o, m, n);\n    const S = t(b.bbMin[0] - f, b.bbMin[1] - f, b.bbMin[2] - f, b.bbMax[0] + f, b.bbMax[1] + f, b.bbMax[2] + f),\n      v = [o[0] - a[0], o[1] - a[1], o[2] - a[2]],\n      g = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]),\n      _ = [g / v[0], g / v[1], g / v[2]];\n    d(S, a, _, s.tolerance) && O(l, p, a, o, m, n);\n  }\n  createBufferWriter() {\n    return new m(this._vertexBufferLayout);\n  }\n  createGLMaterial(e) {\n    return new _(e);\n  }\n  static getVertexBufferLayout() {\n    const e = r().vec3f(p.POSITION).vec4f(p.PROFILERIGHT).vec4f(p.PROFILEUP).vec4f(p.PROFILEVERTEXANDNORMAL).vec4f(p.FEATUREVALUE);\n    return has(\"enable-feature:objectAndLayerId-rendering\") && e.vec4u8(p.OBJECTANDLAYERIDCOLOR), e;\n  }\n}\nclass _ extends n {\n  _updateOccludeeState(e) {\n    e.hasOccludees !== this._material.parameters.hasOccludees && this._material.setParameters({\n      hasOccludees: e.hasOccludees\n    });\n  }\n  _updateShadowState(e) {\n    null != this.technique && e.shadowMap.enabled === this.technique.configuration.receiveShadows || this._material.setParameters({\n      receiveShadows: e.shadowMap.enabled\n    });\n  }\n  beginSlot(e) {\n    return this._output === a.Color && (this._updateShadowState(e), this._updateOccludeeState(e)), this.ensureTechnique(S, e);\n  }\n}\nfunction O(e, t, r, i, s, a) {\n  e.baked.size && e.baked.size[0] === t[0] && e.baked.size[1] === t[1] || e.baked.bake(t), e.baked.intersect(r, i, s, a);\n}\nclass w extends v {\n  constructor() {\n    super(...arguments), this.doubleSided = !1, this.doubleSidedType = \"normal\", this.receiveShadows = !1, this.castShadows = !0, this.hasSlicePlane = !1, this.transparent = !1, this.hasOccludees = !1;\n  }\n}\nexport { g as PathMaterial, w as PathMaterialParameters };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport e from \"../../../../core/Error.js\";\nimport { translate as t } from \"../../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { IDENTITY as i, create as r } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { set as s, scale as a } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { fromValues as o, fromArray as n } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { s as l } from \"../../../../chunks/vec32.js\";\nimport { fromArray as h, create as c } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { projectBuffer as p } from \"../../../../geometry/projection/projectBuffer.js\";\nimport { create as m, empty as f, expandWithBuffer as d, intersectsClippingArea as u } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { newDoubleArray as b, doubleArrayFrom as y } from \"../../../../geometry/support/DoubleArray.js\";\nimport { needsElevationUpdates3D as g, evaluateElevationAlignmentAtPoint as _, SampleElevationInfo as v } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DObject3DGraphicLayer as w } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { pathNumRoundJoinSubdivisions as x, pathNumRoundCapExtrusionSubdivisions as P } from \"./Graphics3DPathSymbolLayerConstants.js\";\nimport { Graphics3DSymbolLayer as j } from \"./Graphics3DSymbolLayer.js\";\nimport { isValidSize as S } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as D } from \"./interfaces.js\";\nimport { ConvertOptions as C, initFastSymbolUpdatesState as L, updateFastSymbolUpdatesState as V, getAttributeValue as U } from \"../support/FastSymbolUpdates.js\";\nimport { SamplePosition as A } from \"../../support/ElevationProvider.js\";\nimport { NormalType as E } from \"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";\nimport { CullFaceOptions as R } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Object3D as z } from \"../../webgl-engine/lib/Object3D.js\";\nimport { Path as k } from \"../../webgl-engine/lib/Path.js\";\nimport { PathBuilder as I } from \"../../webgl-engine/lib/PathBuilder.js\";\nimport { RoundCapBuilder as G, TriangulationCapBuilder as B, NoCapBuilder as O } from \"../../webgl-engine/lib/PathCapBuilder.js\";\nimport { SimpleExtruder as M, MiterExtruder as q } from \"../../webgl-engine/lib/PathExtruder.js\";\nimport { UpVectorAlignment as F, PathGeometry as H, isPathGeometry as N } from \"../../webgl-engine/lib/PathGeometry.js\";\nimport { FastUpdatePathGeometry as T, StaticPathGeometry as W } from \"../../webgl-engine/lib/PathGeometryData.js\";\nimport { computeMinimumRotationTangentFrame as Z } from \"../../webgl-engine/lib/pathGeometryUtils.js\";\nimport { quadProfiles as J, circleProfiles as K } from \"../../webgl-engine/lib/PathProfile.js\";\nimport { newPathVertex as Q } from \"../../webgl-engine/lib/PathVertex.js\";\nimport { VertexAttribute as X } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { DefaultMaterial as Y } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { PathMaterial as $ } from \"../../webgl-engine/materials/PathMaterial.js\";\nconst ee = [\"polyline\"];\nclass te extends j {\n  constructor(e, t, i, r) {\n    super(e, t, i, r), this._intrinsicSize = o(1, 1), this._upVectorAlignment = F.Path, this._stencilWidth = .1, this.usedMemory = 0, this.ensureDrapedStatus(!1);\n  }\n  async doLoad() {\n    const t = null != this.symbolLayer.width ? this.symbolLayer.width : this.symbolLayer.height,\n      i = null != this.symbolLayer.height ? this.symbolLayer.height : t;\n    this._vvConvertOptions = new C({\n      size: !0,\n      color: !0,\n      rotation: !1,\n      opacity: !0\n    }, [1, 1, 1], [t, 1, i], this._context.renderCoordsHelper.unitInMeters), this._fastUpdates = this._context.renderer?.visualVariables?.length > 0 ? L(this._context.renderer, this._vvConvertOptions) : null;\n    const r = this.symbolLayer.anchor || \"center\";\n    this._upVectorAlignment = \"heading\" === this.symbolLayer.profileRotation ? F.World : F.Path;\n    const o = this.symbolLayer.profile || \"circle\";\n    switch (o) {\n      default:\n      case \"circle\":\n        this._profile = K[r];\n        break;\n      case \"quad\":\n        this._profile = J[r];\n    }\n    switch (this.symbolLayer.join) {\n      case \"round\":\n        this._extruder = new q(0, x);\n        break;\n      case \"bevel\":\n        this._extruder = new q(0, 1);\n        break;\n      case \"miter\":\n        this._extruder = new q(.8 * Math.PI, 1);\n        break;\n      default:\n        this._extruder = new M();\n    }\n    const l = this.symbolLayer.cap || \"butt\";\n    switch (l) {\n      case \"none\":\n        this._startCap = new O(), this._endCap = new O();\n        break;\n      case \"butt\":\n      default:\n        this._startCap = new B(this._profile, 0), this._endCap = new B(this._profile, 0, !0);\n        break;\n      case \"square\":\n        this._startCap = new B(this._profile, -.5), this._endCap = new B(this._profile, .5, !0);\n        break;\n      case \"round\":\n        {\n          const e = \"quad\" === o;\n          this._startCap = new G({\n            profile: this._profile,\n            flip: !1,\n            breakNormals: e,\n            subdivisions: P\n          }), this._endCap = new G({\n            profile: this._profile,\n            flip: !0,\n            breakNormals: e,\n            subdivisions: P\n          });\n          break;\n        }\n    }\n    const c = this.symbolLayer?.material?.color,\n      p = this._getCombinedOpacityAndColor(c),\n      m = h(p),\n      f = p[3],\n      d = f < 1 || this.needsDrivenTransparentPass,\n      u = {\n        diffuse: m,\n        ambient: m,\n        opacity: f,\n        transparent: d,\n        hasVertexColors: !1,\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        castShadows: this.symbolLayer.castShadows,\n        cullFace: d || \"none\" === l ? R.None : R.Back,\n        offsetTransparentBackfaces: !0\n      };\n    if (!this._drivenProperties.size && (s(this._intrinsicSize, t, i), !S(this._intrinsicSize[0]) || !S(this._intrinsicSize[1]))) throw new e(\"graphics3dpathsymbollayer:invalid-size\", \"Symbol sizes may not be negative values\");\n    if (this._fastUpdates?.visualVariables.size || a(this._intrinsicSize, this._intrinsicSize, 1 / this._context.renderCoordsHelper.unitInMeters), this._fastUpdates) {\n      const e = {\n        ...u,\n        ...this._fastUpdates.materialParameters,\n        size: n(this._intrinsicSize)\n      };\n      this._materials[0] = new $(e);\n    } else u.hasVertexColors = this._drivenProperties.color || this._drivenProperties.opacity, u.normalType = E.Compressed, this._materials[0] = new Y(u);\n    this._materials[0].setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }), this._context.stage.add(this._materials[0]);\n  }\n  destroy() {\n    super.destroy(), this._context.stage.remove(this._materials[0]), this._materials[0] = null, this._materials.length = 0;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry, ee, this.symbolLayer.type)) return null;\n    const i = this.setGraphicElevationContext(t),\n      r = e.renderingInfo;\n    return this._createAs3DShape(t, r, i, t.uid);\n  }\n  layerOpacityChanged() {\n    const e = this.symbolLayer?.material?.color,\n      t = this._getCombinedOpacity(e),\n      i = t < 1 || this.needsDrivenTransparentPass;\n    this._materials[0]?.setParameters({\n      opacity: t,\n      transparent: i\n    });\n  }\n  layerElevationInfoChanged(e, t) {\n    return this.updateGraphics3DGraphicElevationInfo(e, t, g);\n  }\n  slicePlaneEnabledChanged() {\n    return this._materials[0]?.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return this._materials[0]?.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }), !0;\n  }\n  applyRendererDiff(e, t) {\n    for (const i in e.diff) {\n      if (\"visualVariables\" !== i) return D.RecreateSymbol;\n      if (!V(this._fastUpdates, t, this._vvConvertOptions)) return D.RecreateSymbol;\n      this._materials[0]?.setParameters(this._fastUpdates.materialParameters);\n    }\n    return D.FastUpdate;\n  }\n  _getVertexData(e) {\n    let t = 0;\n    const i = e.paths,\n      r = [],\n      s = e.spatialReference,\n      a = this._context.elevationProvider.spatialReference,\n      o = this._context.renderCoordsHelper.spatialReference;\n    for (const c of i) t += c.length;\n    const n = b(3 * t);\n    let l,\n      h = 0;\n    for (const c of i) {\n      r.push({\n        offset: h,\n        numVertices: c.length\n      });\n      for (const t of c) n[h++] = t[0], n[h++] = t[1], n[h++] = e.hasZ ? t[2] : 0;\n    }\n    return null == a || s.equals(a) || p(n, s, 0, n, a, 0, t) ? (null == a || a.equals(o) ? l = y(n) : (l = b(3 * t), p(n, a, 0, l, o, 0, t)), {\n      pathVertexDataInfos: r,\n      vertexDataES: n,\n      vertexDataRS: l\n    }) : null;\n  }\n  _createAs3DShape(e, s, a, o) {\n    this.usedMemory = 0;\n    const n = e.geometry,\n      h = this._getVertexData(n);\n    if (null == h) return this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)\"), null;\n    if (0 === h.pathVertexDataInfos.length) return 0 !== n.paths.length && n.paths.some(e => e.length > 0) || this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (no paths were defined)\"), null;\n    const c = new Array(),\n      p = n.spatialReference,\n      b = m(),\n      y = this._context.renderCoordsHelper,\n      v = new A(h.vertexDataES);\n    for (const m of h.pathVertexDataInfos) {\n      const n = m.numVertices;\n      if (n < 2) continue;\n      const g = m.offset;\n      if (null != this._context.clippingExtent && (f(b), d(b, h.vertexDataES, g, n), !u(b, this._context.clippingExtent))) continue;\n      const w = new Array(),\n        x = g + 3 * n;\n      for (let e = g; e < x; e += 3) {\n        v.offset = e;\n        const t = _(v, this._context.elevationProvider, a, y);\n        l(oe, h.vertexDataRS[e], h.vertexDataRS[e + 1], h.vertexDataRS[e + 2]), y.setAltitude(oe, t), h.vertexDataRS[e] = oe[0], h.vertexDataRS[e + 1] = oe[1], h.vertexDataRS[e + 2] = oe[2], w.push(Q(this._upVectorAlignment));\n      }\n      const P = new k(w, h.vertexDataES, h.vertexDataRS, g);\n      ie(P, this._upVectorAlignment, this._context.renderCoordsHelper);\n      const j = new I(P, this._profile, this._extruder, this._startCap, this._endCap);\n      let S = null;\n      if (this._fastUpdates) {\n        const t = this._fastUpdates.visualVariables,\n          i = U(t.size?.field, e) ?? 0,\n          r = U(t.color?.field, e) ?? 0,\n          s = U(t.opacity?.field, e) ?? 0;\n        S = new T(j, i, r, s);\n      } else {\n        const e = [this._intrinsicSize[0], this._intrinsicSize[1]];\n        if (this._drivenProperties.size) {\n          const t = s.size;\n          e[0] *= re(t[0], \"symbol-value\" === t[2] ? this.symbolLayer.height || 0 : t[2], this.symbolLayer.width || 0), e[1] *= re(t[2], \"symbol-value\" === t[0] ? this.symbolLayer.width || 0 : t[0], this.symbolLayer.height || 0);\n        }\n        let t;\n        this._drivenProperties.color && (t = s.color), this._drivenProperties.opacity && null != s.opacity && (t = t ? [t[0], t[1], t[2], s.opacity] : [1, 1, 1, s.opacity]);\n        const i = new W(j);\n        i.bake(e), t && i.bakeVertexColors(t), S = i;\n      }\n      const D = S.createGeometryData(),\n        C = this._context.stage.renderView.getObjectAndLayerIdColor({\n          graphicUid: o,\n          layerUid: this._context.layer.uid\n        }),\n        L = new H(this._materials[0], D, S, p, this._stencilWidth, C);\n      L.transformation = t(r(), i, j.path.origin), c.push(L), this.usedMemory += j.usedMemory;\n    }\n    if (0 === c.length) return null;\n    const x = new z({\n        geometries: c,\n        layerUid: this._context.layer.uid,\n        graphicUid: o\n      }),\n      P = new w(this, x, c, null, null, (e, t, i, r, s) => ae(e, t, r, s, this._upVectorAlignment), a);\n    return P.alignedSampledElevation = 0, P.needsElevationUpdates = g(a.mode), P;\n  }\n}\nfunction ie(e, t, i) {\n  const {\n    origin: r,\n    positions: s\n  } = e;\n  let a = e.offset;\n  switch (t) {\n    default:\n    case F.World:\n      for (const t of e.vertices) oe[0] = s[a++] + r[0], oe[1] = s[a++] + r[1], oe[2] = s[a++] + r[2], i.worldUpAtPosition(oe, oe), t.setFrameFromUpVector(oe);\n      break;\n    case F.Path:\n      oe[0] = s[a] + r[0], oe[1] = s[a + 1] + r[1], oe[2] = s[a + 2] + r[2], i.worldUpAtPosition(oe, oe), Z(e, oe);\n  }\n}\nfunction re(e, t, i) {\n  switch (e) {\n    case \"symbol-value\":\n      return i;\n    case \"proportional\":\n      return t;\n    default:\n      return e;\n  }\n}\nfunction se(e, t, i, r) {\n  let s = 0;\n  const {\n      origin: a,\n      vertices: o,\n      positions: n,\n      positionsES: h\n    } = e,\n    c = e.offset + 3 * o.length;\n  for (let p = e.offset; p < c; p += 3) l(oe, h[p], h[p + 1], h[p + 2]), i(oe, ne), s += ne.sampledElevation, oe[0] = n[p] + a[0], oe[1] = n[p + 1] + a[1], oe[2] = n[p + 2] + a[2], r.setAltitude(oe, ne.z), n[p] = oe[0] - a[0], n[p + 1] = oe[1] - a[1], n[p + 2] = oe[2] - a[2];\n  return e.updatePathVertexInformation(), s / o.length;\n}\nfunction ae(e, t, i, r, s) {\n  const a = e.stageObject,\n    o = a.geometries;\n  let n = 0;\n  for (const l of o) {\n    if (!N(l)) continue;\n    const e = l.path,\n      o = e.builder.path;\n    n += se(o, t, i, r), s !== F.World && ie(o, s, r), e.onPathChanged(l), l.invalidateBoundingInfo(), a.geometryVertexAttributeUpdated(l, X.POSITION);\n  }\n  return n / o.length;\n}\nconst oe = c(),\n  ne = new v();\nexport { te as Graphics3DPathSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as t } from \"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { set as o } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { s as e, m as s, f as i, j as m, g as a, c as n, r as c, n as l, b as f } from \"../../../../chunks/vec32.js\";\nimport { create as I } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { getReferenceEllipsoid as p } from \"../../../../geometry/ellipsoidUtils.js\";\nimport { lonLatToWebMercatorComparable as N } from \"../../../../geometry/projection/projectors.js\";\nimport { newDoubleArray as g } from \"../../../../geometry/support/DoubleArray.js\";\nimport { create as h, fromArray as b, getNormal as u } from \"../../../../geometry/support/plane.js\";\nimport { ViewingMode as j } from \"../../../ViewingMode.js\";\nfunction T(t, r, e, s, i = 1) {\n  if (e.isGeographic && s === j.Global) {\n    const t = g(r.length),\n      o = r.length,\n      s = p(e);\n    for (let e = 0; e < o; e += 3) N(r, e, t, e, s);\n    r = t;\n  }\n  o(y, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n  for (let o = 0; o < r.length; o += 3) y[0] = Math.min(y[0], r[o]), y[1] = Math.min(y[1], r[o + 1]);\n  const m = y[0] % i,\n    a = y[1] % i,\n    n = y[0] - m,\n    c = y[1] - a;\n  for (let o = 0; o < r.length; o += 3) {\n    const e = o / 3 * 4;\n    t[e] = (r[o] - n) / i, t[e + 1] = (r[o + 1] - c) / i, t[e + 2] = n / i, t[e + 3] = c / i;\n  }\n}\nfunction M(t, r, n, c, l = 1) {\n  e(F, 1, 0, 0), e(Y, 0, 1, 0), e(_, 0, 0, 1), D(x, n), b(V, n) && O(V, F, Y, _, c, x), o(y, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY), o(P, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\n  for (let o = 0; o < n.length; o += 3) {\n    e(E, n[o], n[o + 1], n[o + 2]);\n    const t = s(F, E),\n      r = s(Y, E);\n    y[0] = Math.min(y[0], t), y[1] = Math.min(y[1], r), P[0] = Math.max(P[0], t), P[1] = Math.max(P[1], r);\n  }\n  const f = s(_, x);\n  q(v, y[0], y[1], f, F, Y, _), q(A, P[0], y[1], f, F, Y, _), q(G, y[0], P[1], f, F, Y, _), i(A, A, v), m(A, A, .5), i(G, G, v), m(G, G, .5), a(v, v, A), a(v, v, G);\n  const I = y[0] % l,\n    p = y[1] % l,\n    N = y[0] - I,\n    g = y[1] - p;\n  for (let o = 0; o < n.length; o += 3) {\n    e(E, n[o], n[o + 1], n[o + 2]);\n    const i = o / 3,\n      m = 4 * i;\n    t[m] = (s(F, E) - N) / l, t[m + 1] = (s(Y, E) - g) / l, t[m + 2] = N / l, t[m + 3] = g / l;\n    const a = 9 * i;\n    for (let t = 0; t < 3; t++) r[a + t] = v[t], r[a + t + 3] = A[t], r[a + t + 6] = G[t];\n  }\n}\nconst x = I(),\n  E = I(),\n  V = h(),\n  F = I(),\n  Y = I(),\n  _ = I(),\n  y = r(),\n  P = r(),\n  v = I(),\n  A = I(),\n  G = I();\nfunction O(t, o, r, i, a, I) {\n  null != a ? (a.basisMatrixAtPosition(I, S), e(d, S[0], S[1], S[2]), e(k, S[4], S[5], S[6]), e(w, S[8], S[9], S[10])) : (e(d, 1, 0, 0), e(k, 0, 1, 0), e(w, 0, 0, 1));\n  const p = u(t);\n  s(p, w) < 0 && m(p, p, -1), n(i, p);\n  const N = s(p, k),\n    g = s(p, d);\n  Math.abs(N) > Math.abs(g) ? (c(o, d, p, -g), l(o, o), f(r, o, p), l(r, r), m(r, r, -1)) : (c(r, k, p, -N), l(r, r), f(o, r, p), l(o, o));\n}\nconst S = t(),\n  d = I(),\n  k = I(),\n  w = I();\nfunction D(t, o) {\n  e(U, 0, 0, 0);\n  for (let r = 0; r < o.length - 3; r += 3) U[0] += o[r], U[1] += o[r + 1], U[2] += o[r + 2];\n  m(t, U, 1 / (o.length / 3 - 1));\n}\nconst U = I();\nfunction q(t, o, r, s, i, m, a) {\n  e(t, o * i[0] + r * m[0] + s * a[0], o * i[1] + r * m[1] + s * a[1], o * i[2] + r * m[2] + s * a[2]);\n}\nexport { M as createMapSpaceUVCoords, T as createMapSpaceUVCoordsDraped };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport has from \"../../../../core/has.js\";\nimport { ShaderOutput as t } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { ReloadableShaderModule as o } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as r } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { parameter as i } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { CullFaceOptions as s } from \"../lib/basicInterfaces.js\";\nimport { blendingDefault as n, oitBlending as a, oitDepthTest as p, oitDepthWrite as l, oitDrawBuffers as c, getOITPolygonOffset as u } from \"../lib/OrderIndependentTransparency.js\";\nimport { Program as d } from \"../lib/Program.js\";\nimport { stencilWriteMaskOn as h, stencilToolMaskBaseParams as f, stencilBaseAllZerosParams as m } from \"../lib/StencilUtils.js\";\nimport { TransparencyPassType as y } from \"../lib/TransparencyPassType.js\";\nimport { VertexAttribute as O } from \"../lib/VertexAttribute.js\";\nimport { DefaultTechniqueConfiguration as T } from \"../materials/DefaultTechniqueConfiguration.js\";\nimport { Style as v } from \"../materials/PatternStyle.js\";\nimport { P } from \"../../../../chunks/Pattern.glsl.js\";\nimport { SpecialDrawBuffers as b } from \"../../../webgl/enums.js\";\nimport { makePipelineState as g, cullingParams as C, defaultDepthWriteParams as j, defaultColorWriteParams as S } from \"../../../webgl/renderState.js\";\nclass N extends r {\n  initializeProgram(e) {\n    return new d(e.rctx, N.shader.get().build(this.configuration), has(\"enable-feature:objectAndLayerId-rendering\") ? R : I);\n  }\n  _setPipelineState(e, o) {\n    const r = this.configuration,\n      i = e === y.NONE,\n      s = e === y.FrontFace;\n    return g({\n      blending: r.output === t.Color ? i ? n : a(e) : null,\n      culling: C(r.cullFace),\n      depthTest: r.draped ? null : {\n        func: p(e)\n      },\n      depthWrite: r.draped ? null : i ? j : l(e),\n      drawBuffers: r.output === t.Depth ? {\n        buffers: [b.NONE]\n      } : c(e),\n      colorWrite: S,\n      stencilWrite: r.hasOccludees ? h : null,\n      stencilTest: r.hasOccludees ? o ? f : m : null,\n      polygonOffset: i || s ? r.polygonOffset ? E : null : u(r.enableOffset)\n    });\n  }\n  initializePipeline() {\n    return this._occludeePipelineState = this._setPipelineState(this.configuration.transparencyPassType, !0), this._setPipelineState(this.configuration.transparencyPassType, !1);\n  }\n  getPipeline(e) {\n    return e ? this._occludeePipelineState : super.getPipeline();\n  }\n}\nN.shader = new o(P, () => import(\"./Pattern.glsl.js\"));\nconst E = {\n  factor: 1,\n  units: 1\n};\nclass A extends T {\n  constructor() {\n    super(...arguments), this.output = t.Color, this.cullFace = s.None, this.transparencyPassType = y.NONE, this.hasSlicePlane = !1, this.hasVertexColors = !1, this.polygonOffset = !1, this.hasOccludees = !1, this.enableOffset = !0, this.multipassEnabled = !1, this.cullAboveGround = !1, this.vvColor = !1, this.objectAndLayerIdColorInstanced = !1;\n  }\n}\ne([i({\n  count: t.COUNT\n})], A.prototype, \"output\", void 0), e([i({\n  count: s.COUNT\n})], A.prototype, \"cullFace\", void 0), e([i({\n  count: v.COUNT\n})], A.prototype, \"style\", void 0), e([i({\n  count: y.COUNT\n})], A.prototype, \"transparencyPassType\", void 0), e([i()], A.prototype, \"hasSlicePlane\", void 0), e([i()], A.prototype, \"hasVertexColors\", void 0), e([i()], A.prototype, \"polygonOffset\", void 0), e([i()], A.prototype, \"hasOccludees\", void 0), e([i()], A.prototype, \"patternSpacing\", void 0), e([i()], A.prototype, \"lineWidth\", void 0), e([i()], A.prototype, \"enableOffset\", void 0), e([i()], A.prototype, \"draped\", void 0), e([i()], A.prototype, \"multipassEnabled\", void 0), e([i()], A.prototype, \"cullAboveGround\", void 0), e([i()], A.prototype, \"vvColor\", void 0), e([i({\n  constValue: !0\n})], A.prototype, \"writeDepth\", void 0), e([i({\n  constValue: !1\n})], A.prototype, \"occlusionPass\", void 0), e([i({\n  constValue: !1\n})], A.prototype, \"hasVvInstancing\", void 0), e([i({\n  constValue: !1\n})], A.prototype, \"vvSize\", void 0), e([i({\n  constValue: !1\n})], A.prototype, \"vvOpacity\", void 0);\nconst I = new Map([[O.POSITION, 0], [O.COLOR, 3], [O.UVMAPSPACE, 4], [O.COLORFEATUREATTRIBUTE, 5], [O.BOUNDINGRECT, 6]]),\n  R = new Map([[O.POSITION, 0], [O.COLOR, 3], [O.UVMAPSPACE, 4], [O.COLORFEATUREATTRIBUTE, 5], [O.BOUNDINGRECT, 6], [O.OBJECTANDLAYERIDCOLOR, 9]]);\nexport { N as PatternTechnique, A as PatternTechniqueConfiguration, I as vertexAttributeLocations, R as vertexAttributeLocationsOID };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from \"../../../../core/has.js\";\nimport { fromValues as e } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { BufferViewMat3f as t, BufferViewVec4f as r } from \"../../../../geometry/support/buffer/BufferView.js\";\nimport { newLayout as s } from \"../../support/buffer/InterleavedLayout.js\";\nimport { isOIDorHighlight as i, isColor as a, isDepth as o, ShaderOutput as n } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { CullFaceOptions as c } from \"../lib/basicInterfaces.js\";\nimport l from \"../lib/GLMaterial.js\";\nimport { OITPolygonOffsetLimit as u } from \"../lib/OrderIndependentTransparency.js\";\nimport { RenderSlot as f } from \"../lib/RenderSlot.js\";\nimport { assert as p } from \"../lib/Util.js\";\nimport { VertexAttribute as h } from \"../lib/VertexAttribute.js\";\nimport { DefaultBufferWriter as m } from \"./DefaultBufferWriter.js\";\nimport { Style as d } from \"./PatternStyle.js\";\nimport { TriangleMaterial as g } from \"./TriangleMaterial.js\";\nimport { VisualVariablePassParameters as _ } from \"./VisualVariablePassParameters.js\";\nimport { writeDefaultAttributes as b, writeBufferVec4 as A } from \"./internal/bufferWriterUtils.js\";\nimport { vertexAttributeLocationsOID as O, vertexAttributeLocations as T, PatternTechniqueConfiguration as y, PatternTechnique as P } from \"../shaders/PatternTechnique.js\";\nclass v extends g {\n  constructor(e) {\n    super(e, new C()), this.supportsEdges = !0, this.produces = new Map([[f.OPAQUE_MATERIAL, e => i(e)], [f.TRANSPARENT_MATERIAL, e => a(e)], [f.TRANSPARENT_NO_SSAO_DEPTH, e => o(e) && this.parameters.writeLinearDepth], [f.DRAPED_MATERIAL, e => this.parameters.draped && e === n.Color || i(e)]]), this._vertexAttributeLocations = has(\"enable-feature:objectAndLayerId-rendering\") ? O : T, this._configuration = new y();\n  }\n  getConfiguration(e, t) {\n    return this._configuration.output = e, this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasVertexColors = this.parameters.hasVertexColors && !this.parameters.vvColor, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.polygonOffset = this.parameters.polygonOffset, this._configuration.style = this.parameters.style, this._configuration.patternSpacing = this.parameters.patternSpacing, this._configuration.lineWidth = this.parameters.lineWidth, this._configuration.draped = this.parameters.draped, this._configuration.transparencyPassType = t.transparencyPassType, this._configuration.enableOffset = t.camera.relativeElevation < u, this._configuration.multipassEnabled = t.multipassEnabled, this._configuration.cullAboveGround = t.multipassTerrain.cullAboveGround, this._configuration.vvColor = !!this.parameters.vvColor, this._configuration;\n  }\n  createGLMaterial(e) {\n    return new E(e);\n  }\n  createBufferWriter() {\n    const e = s().vec3f(h.POSITION).vec4f(h.UVMAPSPACE);\n    return this.parameters.draped || e.mat3f(h.BOUNDINGRECT), this.parameters.vvColor ? e.f32(h.COLORFEATUREATTRIBUTE) : e.vec4u8(h.COLOR), has(\"enable-feature:objectAndLayerId-rendering\") && e.vec4u8(h.OBJECTANDLAYERIDCOLOR), new S(e);\n  }\n}\nclass E extends l {\n  _updateParameters(e) {\n    return this.ensureTechnique(P, e);\n  }\n  _updateOccludeeState(e) {\n    e.hasOccludees !== this._material.parameters.hasOccludees && this._material.setParameters({\n      hasOccludees: e.hasOccludees\n    });\n  }\n  beginSlot(e) {\n    return this._output === n.Color && this._updateOccludeeState(e), this._updateParameters(e);\n  }\n}\nclass S extends m {\n  write(e, s, i, a, o) {\n    b(i, this.vertexBufferLayout, e, s, a, o);\n    for (const n of this.vertexBufferLayout.fields.keys()) {\n      const s = i.attributes.get(n),\n        c = s?.indices;\n      if (s && c) switch (n) {\n        case h.UVMAPSPACE:\n          {\n            p(4 === s.size);\n            const e = a.getField(n, r);\n            e && A(s, e, o);\n            break;\n          }\n        case h.BOUNDINGRECT:\n          {\n            p(9 === s.size);\n            const r = a.getField(n, t);\n            r && j(s, e, r, o);\n            break;\n          }\n      }\n    }\n  }\n}\nfunction j(e, t, r, s) {\n  const {\n      data: i,\n      indices: a\n    } = e,\n    o = t,\n    n = r.typedBuffer,\n    c = r.typedBufferStride,\n    l = a.length;\n  s *= c;\n  for (let u = 0; u < l; ++u) {\n    const e = 9 * a[u],\n      t = i[e],\n      r = i[e + 1],\n      l = i[e + 2];\n    n[s] = o[0] * t + o[4] * r + o[8] * l + o[12], n[s + 1] = o[1] * t + o[5] * r + o[9] * l + o[13], n[s + 2] = o[2] * t + o[6] * r + o[10] * l + o[14];\n    for (let a = 3; a < 9; ++a) n[s + a] = i[e + a];\n    s += c;\n  }\n}\nclass C extends _ {\n  constructor() {\n    super(...arguments), this.color = e(1, 1, 1, 1), this.writeLinearDepth = !1, this.hasVertexColors = !1, this.polygonOffset = !1, this.hasSlicePlane = !1, this.cullFace = c.None, this.hasOccludees = !1, this.style = d.Cross, this.patternSpacing = 10, this.lineWidth = 1, this.draped = !0;\n  }\n}\nexport { C as Parameters, v as PatternMaterial };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { fromValues as t } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { perVertexElevationAligner as e } from \"../graphics/ElevationAligners.js\";\nimport { createMapSpaceUVCoords as r } from \"./uvUtils.js\";\nimport { VertexAttribute as a } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { ColorMaterial as n } from \"../../webgl-engine/materials/ColorMaterial.js\";\nimport { PatternMaterial as o } from \"../../webgl-engine/materials/PatternMaterial.js\";\nimport { Style as i } from \"../../webgl-engine/materials/PatternStyle.js\";\nfunction s(e, r) {\n  const a = e?.pattern ?? null;\n  return null == a ? new n(r) : \"none\" === a.style || \"solid\" === a.style ? (\"none\" === a.style && (r.color = t(0, 0, 0, 0), r.forceTransparentMode = !0), new n(r)) : (r.style = l(a.style), new o(r));\n}\nfunction l(t) {\n  switch (t) {\n    case \"horizontal\":\n      return i.Horizontal;\n    case \"vertical\":\n      return i.Vertical;\n    case \"cross\":\n      return i.Cross;\n    case \"forward-diagonal\":\n      return i.ForwardDiagonal;\n    case \"backward-diagonal\":\n      return i.BackwardDiagonal;\n    case \"diagonal-cross\":\n      return i.DiagonalCross;\n    default:\n      return;\n  }\n}\nfunction c(t) {\n  return t.material instanceof o && !t.material.parameters.draped;\n}\nfunction u(t, e) {\n  if (c(t)) {\n    const n = t.attributes.get(a.POSITION).data,\n      o = t.getMutableAttribute(a.UVMAPSPACE).data,\n      i = t.getMutableAttribute(a.BOUNDINGRECT).data;\n    r(o, i, n, e);\n  }\n}\nfunction m(t, r, a, n, o) {\n  const i = e(t, r, a, n, o),\n    s = t.stageObject.geometries;\n  for (const e of s) u(e, o);\n  return i;\n}\nexport { s as createMaterial, l as parsePatternStyle, c as requiresUVUpdates, u as updateMapSpaceUVCoords, m as uvElevationAligner };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport { pt2px as t } from \"../../../../core/screenUtils.js\";\nimport { e as i } from \"../../../../chunks/earcut.js\";\nimport { create as r, empty as o, expandWithBuffer as s, intersectsClippingArea as n, expandWithAABB as a } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { newDoubleArray as l, doubleSubArray as c } from \"../../../../geometry/support/DoubleArray.js\";\nimport { newFloatArray as p, floatSubArray as h } from \"../../../../geometry/support/FloatArray.js\";\nimport { SymbolUpdateType as u, elevationModeChangeUpdateType as d, needsElevationUpdates2D as m } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DDrapedGraphicLayer as y } from \"./Graphics3DDrapedGraphicLayer.js\";\nimport { Graphics3DObject3DGraphicLayer as _ } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as g } from \"./Graphics3DSymbolLayer.js\";\nimport { mixinColorAndOpacity as f } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as b } from \"./interfaces.js\";\nimport { parseCapType as x } from \"./lineUtils.js\";\nimport { geometryAsPolygon as O, createIndices3D as v, createColorGeometry as D, PolygonCreationDataBase as C } from \"./polygonUtils.js\";\nimport { initFastSymbolUpdatesState as S, updateFastSymbolUpdatesState as j, getAttributeValue as A, ConvertOptions as P } from \"../support/FastSymbolUpdates.js\";\nimport { createMaterial as U, uvElevationAligner as E } from \"../support/patternUtils.js\";\nimport { createMapSpaceUVCoords as G, createMapSpaceUVCoordsDraped as L } from \"../support/uvUtils.js\";\nimport { createGeometry as F } from \"../../support/engineContent/line.js\";\nimport { geometryToRenderInfo as w, geometryToRenderInfoDraped as R } from \"../../support/renderInfoUtils/polygon.js\";\nimport { Object3D as M } from \"../../webgl-engine/lib/Object3D.js\";\nimport { RenderGeometry as I } from \"../../webgl-engine/lib/RenderGeometry.js\";\nimport { getStipplePatternForLinePattern as V } from \"../../webgl-engine/materials/lineStippleUtils.js\";\nimport { PatternMaterial as B } from \"../../webgl-engine/materials/PatternMaterial.js\";\nimport { RibbonLineMaterial as T } from \"../../webgl-engine/materials/RibbonLineMaterial.js\";\nconst z = [\"polyline\", \"polygon\", \"extent\"],\n  H = new P({\n    size: !1,\n    color: !0,\n    rotation: !1,\n    opacity: !1\n  });\nclass N extends g {\n  constructor(e, t, i, r) {\n    super(e, t, i, r), this._needsUV = !1;\n  }\n  async doLoad() {\n    this._fastUpdates = S(this._context.renderer, H);\n  }\n  _createMaterials() {\n    if (this._materials.length > 0) return;\n    const e = this.symbolLayer?.material?.color,\n      i = this._getCombinedOpacityAndColor(e);\n    this._materials[J.Fill] = U(this.symbolLayer, {\n      color: i,\n      forceTransparentMode: this.needsDrivenTransparentPass,\n      polygonOffset: !1,\n      hasVertexColors: !0,\n      writeLinearDepth: !0,\n      draped: this.draped,\n      hasSlicePlane: this._context.slicePlaneEnabled,\n      ...this._fastUpdates?.materialParameters\n    }), this._needsUV = this._materials[J.Fill] instanceof B;\n    const r = this.symbolLayer.outline;\n    if (K(r)) {\n      const e = V(r.pattern);\n      this._materials[J.Outline] = new T({\n        width: t(r.size),\n        color: this._getOutlineColor(),\n        hasPolygonOffset: !0,\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        isClosed: !0,\n        stipplePattern: e,\n        cap: x(r.patternCap || \"butt\")\n      });\n    }\n    this._context.stage.addMany(this._materials);\n  }\n  destroy() {\n    super.destroy(), this._context.stage.removeMany(this._materials), this._materials.length = 0;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry, z, this.symbolLayer.type)) return null;\n    const i = this._getVertexOpacityAndColor(e.renderingInfo, 255),\n      r = this.setGraphicElevationContext(t);\n    return this.ensureDrapedStatus(\"on-the-ground\" === r.mode), this._createMaterials(), this.draped ? this._createAsOverlay(t, i) : this._createAs3DShape(t, i, r);\n  }\n  applyRendererDiff(e, t) {\n    for (const i in e.diff) {\n      if (\"visualVariables\" !== i) return b.RecreateSymbol;\n      if (!j(this._fastUpdates, t, H)) return b.RecreateSymbol;\n      this._materials[J.Fill]?.setParameters(this._fastUpdates.materialParameters);\n    }\n    return b.FastUpdate;\n  }\n  layerOpacityChanged() {\n    if (null != this._materials[J.Fill]) {\n      const e = this._materials[J.Fill].parameters.color,\n        t = this.symbolLayer?.material?.color,\n        i = this._getCombinedOpacity(t);\n      this._materials[J.Fill].setParameters({\n        color: [e[0], e[1], e[2], i],\n        forceTransparentMode: this.needsDrivenTransparentPass\n      });\n    }\n    if (null != this._materials[J.Outline]) {\n      const e = this._materials[J.Outline].parameters.color;\n      this._materials[J.Outline].setParameters({\n        color: [e[0], e[1], e[2], this._getOutlineOpacity()]\n      });\n    }\n  }\n  layerElevationInfoChanged(e, t, i) {\n    const r = this._elevationContext.mode,\n      o = d(N.elevationModeChangeTypes, i, r);\n    if (o !== u.UPDATE) return o;\n    const s = m(r);\n    return this.updateGraphics3DGraphicElevationInfo(e, t, () => s);\n  }\n  slicePlaneEnabledChanged() {\n    if (this._materials[J.Fill]?.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), this._materials[J.Outline]) {\n      const e = {\n        hasSlicePlane: this._context.slicePlaneEnabled\n      };\n      this._materials[J.Outline].setParameters(e);\n    }\n    return !0;\n  }\n  physicalBasedRenderingChanged() {\n    return !0;\n  }\n  _createAs3DShape(e, t, i) {\n    const r = O(e.geometry);\n    if (!r) return null;\n    const o = w(r, this._context.elevationProvider, this._context.renderCoordsHelper, i),\n      s = new k(o, t, this._context.layer.uid, e.uid),\n      n = s.renderData.position.length / 3;\n    if (this._needsUV && (s.uvMapSpace = p(4 * n, !0), s.boundingRect = l(9 * n, !0), G(s.uvMapSpace, s.boundingRect, s.renderData.position, this._context.renderCoordsHelper)), s.objectAndLayerIdColor = this._context.stage.renderView?.getObjectAndLayerIdColor(s), this._createAs3DShapeFill(e, s), this._materials[J.Outline] && this._createAs3DShapeOutline(s), this._logGeometryCreationWarnings(s.renderData, r.rings, \"rings\", \"FillSymbol3DLayer\"), 0 === s.outGeometries.length) return null;\n    const a = new M({\n        geometries: s.outGeometries,\n        castShadow: !1,\n        layerUid: this._context.layer.uid,\n        graphicUid: e.uid\n      }),\n      c = new _(this, a, s.outGeometries, null, null, E, i);\n    return c.alignedSampledElevation = s.renderData.sampledElevation, c.needsElevationUpdates = m(i.mode), c;\n  }\n  _createAs3DShapeFill(e, t) {\n    const i = t.renderData.polygons;\n    for (const {\n      position: r,\n      mapPositions: a,\n      holeIndices: l,\n      index: p,\n      count: u\n    } of i) {\n      if (null != this._context.clippingExtent && (o(W), s(W, a), !n(W, this._context.clippingExtent))) continue;\n      const i = v(a, l, this._context.elevationProvider.spatialReference);\n      if (0 === i.length) continue;\n      const d = this._fastUpdates?.visualVariables.color,\n        m = D({\n          material: this._materials[J.Fill],\n          indices: i,\n          mapPositions: a,\n          attributeData: {\n            position: r,\n            color: d ? null : t.color,\n            colorFeature: d ? A(d.field, e) : null,\n            uvMapSpace: this._needsUV ? h(t.uvMapSpace, 4 * p, 4 * u) : null,\n            boundingRect: this._needsUV ? c(t.boundingRect, 9 * p, 9 * u) : null,\n            objectAndLayerIdColor: t.objectAndLayerIdColor\n          }\n        });\n      t.outGeometries.push(m);\n    }\n  }\n  _createAs3DShapeOutline(e) {\n    if (null == this._materials[J.Outline]) return;\n    const t = e.renderData.outlines;\n    for (const {\n      mapPositions: i,\n      position: r\n    } of t) {\n      if (null != this._context.clippingExtent && (o(W), s(W, i), !n(W, this._context.clippingExtent))) continue;\n      const t = F(this._materials[J.Outline], {\n        overlayInfo: null,\n        removeDuplicateStartEnd: !0,\n        mapPositions: i,\n        attributeData: {\n          position: r\n        }\n      }, e.objectAndLayerIdColor);\n      e.outGeometries.push(t);\n    }\n  }\n  _createAsOverlay(e, t) {\n    const i = O(e.geometry);\n    if (null == i) return null;\n    this._materials[J.Fill].renderPriority = this._renderPriority + this._renderPriorityStep / 2, null != this._materials[J.Outline] && (this._materials[J.Outline].renderPriority = this._renderPriority);\n    const r = R(i, this._context.overlaySR),\n      s = new q(r, t, this._context.layer.uid, e.uid),\n      n = s.renderData.position.length / 3;\n    return this._needsUV && (s.uvMapSpace = p(4 * n, !0), L(s.uvMapSpace, s.renderData.position, this._context.overlaySR, this._context.graphicsCoreOwner.view.state.viewingMode)), s.outBoundingBox = o(), s.objectAndLayerIdColor = this._context.stage.renderView?.getObjectAndLayerIdColor(s), this._createAsOverlayFill(e, s), this._materials[J.Outline] && this._createAsOverlayOutline(s), this._logGeometryCreationWarnings(s.renderData, i.rings, \"rings\", \"FillSymbol3DLayer\"), 0 === s.outGeometries.length ? null : new y(this, s.outGeometries, s.outBoundingBox, this._context.drapeSourceRenderer);\n  }\n  _createAsOverlayFill(e, t) {\n    const r = t.renderData.polygons;\n    for (const {\n      position: l,\n      holeIndices: c,\n      index: p,\n      count: u\n    } of r) {\n      const r = o(W);\n      if (s(r, l), !n(r, this._context.clippingExtent)) continue;\n      const d = i(l, c, 3);\n      if (0 === d.length) continue;\n      a(t.outBoundingBox, r);\n      const m = this._fastUpdates?.visualVariables.color,\n        y = D({\n          material: this._materials[J.Fill],\n          indices: d,\n          attributeData: {\n            position: l,\n            color: m ? null : t.color,\n            colorFeature: m ? A(m.field, e) : null,\n            uvMapSpace: this._needsUV ? h(t.uvMapSpace, 4 * p, 4 * u) : null,\n            objectAndLayerIdColor: t.objectAndLayerIdColor\n          }\n        });\n      t.outGeometries.push(new I(y, t));\n    }\n  }\n  _createAsOverlayOutline(e) {\n    if (null == this._materials[J.Outline]) return;\n    const t = e.renderData.outlines;\n    for (let i = 0; i < t.length; ++i) {\n      const {\n        position: r\n      } = t[i];\n      if (o(W), s(W, r), !n(W, this._context.clippingExtent)) continue;\n      a(e.outBoundingBox, W);\n      const l = F(this._materials[J.Outline], {\n        overlayInfo: {\n          spatialReference: this._context.overlaySR,\n          renderCoordsHelper: this._context.renderCoordsHelper\n        },\n        removeDuplicateStartEnd: !0,\n        attributeData: {\n          position: r\n        }\n      }, e.objectAndLayerIdColor);\n      e.outGeometries.push(new I(l, e));\n    }\n  }\n  _getOutlineOpacity() {\n    const e = this.symbolLayer?.outline?.color;\n    return (this.draped ? 1 : this._getLayerOpacity()) * (null != e ? e.a : 0);\n  }\n  _getOutlineColor() {\n    const t = this.symbolLayer?.outline?.color,\n      i = this._getOutlineOpacity();\n    return f(null != t ? e.toUnitRGB(t) : null, i);\n  }\n  test() {\n    return {\n      ...super.test(),\n      createAsOverlay: (e, t) => this._createAsOverlay(e, t),\n      createAs3DShape: (e, t, i) => this._createAs3DShape(e, t, i)\n    };\n  }\n}\nN.elevationModeChangeTypes = {\n  definedChanged: u.RECREATE,\n  staysOnTheGround: u.NONE,\n  onTheGroundChanged: u.RECREATE\n};\nconst W = r();\nclass k extends C {\n  constructor(e, t, i, r) {\n    super(e, i, r), this.color = t;\n  }\n}\nclass q extends C {\n  constructor(e, t, i, r) {\n    super(e, i, r), this.color = t;\n  }\n}\nvar J;\nfunction K(e) {\n  return null != e?.size && e.size > 0 && null != e.color && (null == e.pattern || \"style\" !== e.pattern.type || \"none\" !== e.pattern.style);\n}\n!function (e) {\n  e[e.Fill = 0] = \"Fill\", e[e.Outline = 1] = \"Outline\";\n}(J || (J = {}));\nexport { N as Graphics3DPolygonFillSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { getTextHelperCanvas as e } from \"./TextHelperCanvas.js\";\nimport { TextRenderer as r } from \"./TextRenderer.js\";\nimport { TextTextureAtlas as t } from \"./TextTextureAtlas.js\";\nimport { Texture as n } from \"./Texture.js\";\nimport { TextureWrapMode as s } from \"../../../webgl/enums.js\";\nclass i {\n  constructor(e, n, s) {\n    this._renderer = new r(e, n, s, t.maxSize);\n  }\n  get key() {\n    return this._renderer.key;\n  }\n  get baselineAnchorY() {\n    return 1 - this._renderer.firstRenderedBaselinePosition / this._renderer.renderedHeight;\n  }\n  get displayWidth() {\n    return this._renderer.displayWidth;\n  }\n  get displayHeight() {\n    return this._renderer.displayHeight;\n  }\n  create() {\n    const r = e(d, this._renderer.renderedWidth, this._renderer.renderedHeight),\n      t = r.getContext(\"2d\");\n    return t.save(), this._renderer.render(t, 0, 0), t.restore(), new n(r, {\n      wrap: {\n        s: s.CLAMP_TO_EDGE,\n        t: s.CLAMP_TO_EDGE\n      },\n      noUnpackFlip: !1,\n      mipmap: !0,\n      preMultiplyAlpha: !0\n    });\n  }\n}\nconst d = {\n  canvas: null\n};\nexport { i as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Error.js\";\nimport has from \"../../../../core/has.js\";\nimport { releaseMaybe as t } from \"../../../../core/maybe.js\";\nimport { isPromiseLike as r } from \"../../../../core/promiseUtils.js\";\nimport { pt2px as n } from \"../../../../core/screenUtils.js\";\nimport { fromValues as s, ZEROS as i, create as o } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { fromValues as l } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { hasCalloutSupport as a, textSymbolLayerSupportsVerticalOffset as c } from \"../../../../symbols/callouts/calloutUtils.js\";\nimport { perObjectElevationAligner as m } from \"./ElevationAligners.js\";\nimport { SymbolUpdateType as f, needsElevationUpdates2D as h } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as p } from \"./ElevationContext.js\";\nimport { Graphics3DObject3DGraphicLayer as u } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DObjectMetadata as d } from \"./Graphics3DObjectMetadata.js\";\nimport { Graphics3DSymbolLayer as g } from \"./Graphics3DSymbolLayer.js\";\nimport { validateSymbolLayerSize as y } from \"./graphicUtils.js\";\nimport { LabelParameters as x, LabelPlacement as v } from \"./LabelParameters.js\";\nimport { verticalScreenOffsetFromAlignment as b, verticalPlacementFromAlignment as O, textRenderAlignmentFromHorizontalPlacement as P, horizontalPlacementToAnchorX as j, anchorFromPlacements as w, namedAnchorToHUDMaterialAnchorPos as S } from \"./placementUtils.js\";\nimport { placePointOnGeometry as _, updateStageObjectGeometry as E, getLocalOriginForPoint as L, extendPointGraphicElevationContext as G, createStageObject as z } from \"./pointUtils.js\";\nimport { getFontMetrics as C } from \"../../webgl-engine/lib/FontMetrics.js\";\nimport { createPointGeometry as U } from \"../../webgl-engine/lib/GeometryUtil.js\";\nimport { TextRenderParameters as D } from \"../../webgl-engine/lib/TextRenderParameters.js\";\nimport R from \"../../webgl-engine/lib/TextTextureFactory.js\";\nimport { HUDMaterial as A } from \"../../webgl-engine/materials/HUDMaterial.js\";\nconst T = l(0, 0, 1);\nclass H extends g {\n  constructor(e, t, r, n) {\n    super(e, t, r, n), this._elevationOptions = {\n      supportsOffsetAdjustment: !0,\n      supportsOnTheGround: !1\n    }, this.ensureDrapedStatus(!1);\n  }\n  async doLoad() {\n    if (!this._drivenProperties.size) {\n      const t = y(this.symbolLayer.size);\n      if (t) throw new e(\"graphics3dtextsymbollayer:invalid-size\", t);\n    }\n    await this._createTextRenderParameters();\n  }\n  async _createTextRenderParameters() {\n    const e = this._context.graphicsCoreOwner.view.state.rasterPixelRatio;\n    this._textRenderParameters = await D.fromSymbol(this.symbolLayer, e);\n  }\n  destroy() {\n    super.destroy();\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic,\n      r = _(t.geometry);\n    if (null == r) return this.logger.warn(`unsupported geometry type for text symbol: ${t.geometry.type}`), null;\n    const n = this.symbolLayer.text;\n    if (null == n || \"\" === n) return null;\n    const s = a(this.symbol) && this.symbol.hasVisibleVerticalOffset() ? this.symbol.verticalOffset : null;\n    if (null != s && !c(this.symbolLayer)) return this.logger.errorOncePerTick(`Callouts and vertical offset on text symbols are currently only supported with 'center' horizontal alignment (not with '${this.symbolLayer.horizontalAlignment}' alignment)`), null;\n    const {\n        verticalAlignment: i\n      } = this.symbolLayer,\n      o = new v(s);\n    b(i, o.screenOffset);\n    const l = new x(o, this.symbolLayer.horizontalAlignment, O(i));\n    return this._createAs3DShape(t, r, n, l);\n  }\n  createLabel(e, t, r, n, s) {\n    const i = e.graphic,\n      o = _(i.geometry);\n    if (null == o) return this.logger.warn(`unsupported geometry type for label: ${i.geometry.type}`), null;\n    const l = t.text;\n    return !l || /^\\s+$/.test(l) ? null : this._createAs3DShape(i, o, l, t, r, n, s);\n  }\n  setGraphicElevationContext(e, t, r = 0) {\n    return super.setGraphicElevationContext(e, t), t.addOffsetRenderUnits(r), t;\n  }\n  layerOpacityChanged() {\n    return this.logger.warn(\"layer opacity change not yet implemented in Graphics3DTextSymbolLayer\"), !1;\n  }\n  layerElevationInfoChanged(e, t) {\n    return W(e, t, (e, t) => {\n      this.updateGraphicElevationContext(t, e);\n    }), f.UPDATE;\n  }\n  slicePlaneEnabledChanged(e, t) {\n    return W(e, t, e => {\n      for (const t of e.stageObject.geometries) t.material.setParameters({\n        hasSlicePlane: this._context.slicePlaneEnabled\n      });\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return !0;\n  }\n  get pixelRatioChanged() {\n    return !1;\n  }\n  updateGraphicElevationContext(e, t) {\n    const r = t.elevationContext;\n    this.setGraphicElevationContext(e, r, null != t.metadata ? t.metadata.elevationOffset : 0), t.needsElevationUpdates = h(r.mode) || \"absolute-height\" === r.mode;\n  }\n  updateGeometry(e, t) {\n    if (this.draped || !this._validateGeometry(t)) return !1;\n    const {\n      elevationContext: r,\n      stageObject: n\n    } = e;\n    if (r.mode !== this.getGeometryElevationMode(t)) return !1;\n    const s = _(t);\n    if (!s) return !1;\n    const i = E(n, this._context, s, r);\n    if (null == i) return !1;\n    const o = L(this._context, s);\n    return n.geometries[0].localOrigin === o && (e.alignedSampledElevation = i, G(e, s, this._context.elevationProvider), !0);\n  }\n  _defaultElevationInfoNoZ() {\n    return M;\n  }\n  _createAs3DShape(e, l, a, c, f = null, g = null, y = () => c.placement.elevationOffset) {\n    const x = this.setGraphicElevationContext(e, new p(), c.placement.elevationOffset),\n      v = \"polyline\" === e.geometry?.type,\n      b = e.uid;\n    let O = null,\n      j = null;\n    if (null == g) {\n      const e = P(c.horizontalPlacement);\n      O = new R(a, e, this._textRenderParameters);\n      let n = null;\n      if (null != this._context.sharedResources.textures) {\n        j = this._context.sharedResources.textures.fromData(O.key, () => O.create()), j.texture.events.on(\"unloaded\", () => n = t(n));\n        const e = this._context.stage.renderView.textures.acquire(j.texture.id);\n        if (null == e || r(e)) return j.release(), null;\n        n = e;\n      }\n    }\n    const w = I(O, c),\n      S = {\n        occlusionTest: !has(\"enable-feature:non-occluded-hud\"),\n        screenOffset: c.placement.screenOffset,\n        anchorPosition: w,\n        polygonOffset: !0,\n        color: [1, 1, 1, 1],\n        centerOffsetUnits: c.placement.centerOffsetUnits,\n        drawInSecondSlot: !0\n      };\n    if (v && (S.shaderPolygonOffset = 1e-4), g ? S.textureId = g.id : j && (S.textureId = j.texture.id), null != c.placement.verticalOffset) {\n      const {\n        screenLength: e,\n        minWorldLength: t,\n        maxWorldLength: r\n      } = c.placement.verticalOffset;\n      S.verticalOffset = {\n        screenLength: n(e),\n        minWorldLength: t || 0,\n        maxWorldLength: null != r ? r : 1 / 0\n      };\n    }\n    const _ = {\n      screenOffset: S.screenOffset,\n      anchorPosition: w,\n      centerOffsetUnits: S.centerOffsetUnits,\n      verticalOffset: S.verticalOffset,\n      shaderPolygonOffset: S.shaderPolygonOffset\n    };\n    if (this._context.screenSizePerspectiveEnabled) {\n      const {\n          screenSizePerspectiveSettings: e,\n          screenSizePerspectiveSettingsLabels: t\n        } = this._context.sharedResources,\n        r = C(this._textRenderParameters);\n      S.screenSizePerspective = t.overrideFontHeight(r.maxHeight), S.screenSizePerspectiveAlignment = e, _.fontHeight = r.maxHeight;\n    }\n    S.hasSlicePlane = this._context.slicePlaneEnabled;\n    const E = (e, t, r) => {\n        let n = e.get(r);\n        return null == n && (n = new A(t), e.add(r, n)), n;\n      },\n      L = f ? E(f, S, JSON.stringify(_)) : new A(S),\n      D = c.placement.translation,\n      H = O ? s(O.displayWidth, O.displayHeight) : i,\n      W = c.placement.centerOffset,\n      M = T,\n      V = o(),\n      $ = U(L, M, D, null, H, W, V, null),\n      F = z(this._context, l, $, x, b);\n    if (null == F) return null;\n    const k = (t, r, n, s, i, o) => {\n        const l = y() || c.placement.elevationOffset,\n          a = this.setGraphicElevationContext(e, r, l);\n        return m(t, a, n, s, i, o);\n      },\n      N = new u(this, F.object, [$], null == f ? [L] : null, j, k, x);\n    N.alignedSampledElevation = F.sampledElevation, N.needsElevationUpdates = h(x.mode) || \"absolute-height\" === x.mode, N.getScreenSize = (e = o()) => (e[0] = O ? O.displayWidth : c.displaySize[0], e[1] = O ? O.displayHeight : c.displaySize[1], e);\n    const q = new d(c.placement.elevationOffset, a);\n    return N.metadata = q, G(N, l, this._context.elevationProvider), N;\n  }\n}\nfunction W(e, t, r) {\n  e && e.forEach(e => {\n    const n = t(e);\n    null != n && r(n, e.graphic);\n  });\n}\nfunction I(e, t) {\n  if (\"baseline\" === t.verticalPlacement) {\n    const r = j[t.horizontalPlacement],\n      n = null != e ? e.baselineAnchorY : 0;\n    return s(r, n);\n  }\n  const r = w(t.horizontalPlacement, t.verticalPlacement);\n  return S[r];\n}\nconst M = {\n  mode: \"relative-to-ground\",\n  offset: 0\n};\nexport { H as Graphics3DTextSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { ViewingMode as t } from \"../../../ViewingMode.js\";\nimport { ShaderOutput as o } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { PBRMode as r } from \"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";\nimport { WaterDistortionPassParameters as i } from \"../core/shaderLibrary/shading/WaterDistortion.glsl.js\";\nimport { ReloadableShaderModule as s } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as a } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { parameter as n } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { Default3D as p } from \"../lib/DefaultVertexAttributeLocations.js\";\nimport { blendingDefault as l, oitBlending as d, oitDepthTest as u, oitDepthWrite as c, oitDrawBuffers as h, getOITPolygonOffset as f } from \"../lib/OrderIndependentTransparency.js\";\nimport { Program as m } from \"../lib/Program.js\";\nimport { TransparencyPassType as y } from \"../lib/TransparencyPassType.js\";\nimport { DefaultTechniqueConfiguration as b } from \"./DefaultTechniqueConfiguration.js\";\nimport { W as v } from \"../../../../chunks/WaterSurface.glsl.js\";\nimport { makePipelineState as g, defaultDepthWriteParams as j, defaultColorWriteParams as P } from \"../../../webgl/renderState.js\";\nclass S extends i {}\nclass T extends a {\n  initializeConfiguration(e, o) {\n    o.spherical = e.viewingMode === t.Global, o.doublePrecisionRequiresObfuscation = e.rctx.driverTest.doublePrecisionRequiresObfuscation.result;\n  }\n  initializeProgram(e) {\n    return new m(e.rctx, T.shader.get().build(this.configuration), p);\n  }\n  _setPipelineState(e) {\n    const t = this.configuration,\n      r = e === y.NONE,\n      i = e === y.FrontFace;\n    return g({\n      blending: t.output !== o.Normal && t.output !== o.Highlight && t.output !== o.ObjectAndLayerIdColor && t.transparent ? r ? l : d(e) : null,\n      depthTest: t.draped ? null : {\n        func: u(e)\n      },\n      depthWrite: t.draped ? null : r ? t.writeDepth ? j : null : c(e),\n      drawBuffers: h(e),\n      colorWrite: P,\n      polygonOffset: r || i ? null : f(t.enableOffset)\n    });\n  }\n  initializePipeline() {\n    return this._setPipelineState(this.configuration.transparencyPassType);\n  }\n}\nT.shader = new s(v, () => import(\"../shaders/WaterSurface.glsl.js\"));\nclass O extends b {\n  constructor() {\n    super(...arguments), this.output = o.Color, this.transparencyPassType = y.NONE, this.spherical = !1, this.receiveShadows = !1, this.hasSlicePlane = !1, this.transparent = !1, this.enableOffset = !0, this.writeDepth = !1, this.hasScreenSpaceReflections = !1, this.doublePrecisionRequiresObfuscation = !1, this.hasCloudsReflections = !1, this.objectAndLayerIdColorInstanced = !1, this.draped = !1, this.multipassEnabled = !1, this.cullAboveGround = !1;\n  }\n}\ne([n({\n  count: o.COUNT\n})], O.prototype, \"output\", void 0), e([n({\n  count: y.COUNT\n})], O.prototype, \"transparencyPassType\", void 0), e([n()], O.prototype, \"spherical\", void 0), e([n()], O.prototype, \"receiveShadows\", void 0), e([n()], O.prototype, \"hasSlicePlane\", void 0), e([n()], O.prototype, \"transparent\", void 0), e([n()], O.prototype, \"enableOffset\", void 0), e([n()], O.prototype, \"writeDepth\", void 0), e([n()], O.prototype, \"hasScreenSpaceReflections\", void 0), e([n()], O.prototype, \"doublePrecisionRequiresObfuscation\", void 0), e([n()], O.prototype, \"hasCloudsReflections\", void 0), e([n()], O.prototype, \"objectAndLayerIdColorInstanced\", void 0), e([n()], O.prototype, \"draped\", void 0), e([n()], O.prototype, \"multipassEnabled\", void 0), e([n()], O.prototype, \"cullAboveGround\", void 0), e([n({\n  constValue: !1\n})], O.prototype, \"occlusionPass\", void 0), e([n({\n  constValue: r.Water\n})], O.prototype, \"pbrMode\", void 0), e([n({\n  constValue: !0\n})], O.prototype, \"useCustomDTRExponentForWater\", void 0), e([n({\n  constValue: !0\n})], O.prototype, \"highStepCount\", void 0), e([n({\n  constValue: !1\n})], O.prototype, \"useFillLights\", void 0);\nexport { S as WaterMaterialPassParameters, T as WaterTechnique, O as WaterTechniqueConfiguration };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { ShaderOutput as e } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport t from \"../lib/GLMaterial.js\";\nimport { WaterTechnique as a } from \"./WaterTechnique.js\";\nclass s extends t {\n  _updateShadowState(e) {\n    e.shadowMap.enabled !== this._material.parameters.receiveShadows && this._material.setParameters({\n      receiveShadows: e.shadowMap.enabled\n    });\n  }\n  _updateSSRState(e) {\n    const t = null != e.ssr.lastFrameColor;\n    t !== this._material.parameters.hasScreenSpaceReflections && this._material.setParameters({\n      hasScreenSpaceReflections: t\n    });\n  }\n  _updateCloudsReflectionState(e) {\n    const t = null != e.cloudsFade.data;\n    t !== this._material.parameters.hasCloudsReflections && this._material.setParameters({\n      hasCloudsReflections: t\n    });\n  }\n  ensureResources(e) {\n    return this._techniques.constructionContext.waterTextures.ensureResources(e);\n  }\n  beginSlot(t) {\n    return this._output === e.Color && (this._updateShadowState(t), this._updateSSRState(t), this._updateCloudsReflectionState(t)), this._material.setParameters(this._techniques.constructionContext.waterTextures.passParameters), this.ensureTechnique(a, t);\n  }\n}\nexport { s as WaterGLMaterial };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport has from \"../../../../core/has.js\";\nimport { secondsFromMilliseconds as e } from \"../../../../core/time.js\";\nimport { fromValues as t } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { create as r } from \"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { fromValues as a } from \"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport { isColor as i, isOIDorHighlight as s, ShaderOutput as n } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { AnimationTimer as o } from \"../lib/AnimationTimer.js\";\nimport { MaterialParameters as h } from \"../lib/Material.js\";\nimport { OITPolygonOffsetLimit as c } from \"../lib/OrderIndependentTransparency.js\";\nimport { RenderSlot as m } from \"../lib/RenderSlot.js\";\nimport { DefaultBufferWriter as l } from \"./DefaultBufferWriter.js\";\nimport { PositionUVLayoutObjectAndLayerId as p, PositionUVLayout as f } from \"./DefaultLayouts.js\";\nimport { TriangleMaterial as u } from \"./TriangleMaterial.js\";\nimport { WaterGLMaterial as d } from \"./WaterGLMaterial.js\";\nimport { WaterTechniqueConfiguration as g } from \"./WaterTechnique.js\";\nclass _ extends u {\n  constructor(e) {\n    super(e, new S()), this._configuration = new g(), this._animation = new o(), this.produces = new Map([[m.OPAQUE_MATERIAL, e => i(e) && !this.parameters.transparent || s(e)], [m.TRANSPARENT_MATERIAL, e => i(e) && this.parameters.transparent || s(e)], [m.DRAPED_MATERIAL, e => this.parameters.draped && e === n.Color || s(e)], [m.DRAPED_WATER, e => e === n.Normal]]);\n  }\n  getConfiguration(e, t) {\n    return this._configuration.output = e, this._configuration.writeDepth = !0, this._configuration.receiveShadows = this.parameters.receiveShadows, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.transparent = this.parameters.transparent, this._configuration.hasScreenSpaceReflections = this.parameters.hasScreenSpaceReflections, this._configuration.hasCloudsReflections = this.parameters.hasCloudsReflections, this._configuration.draped = this.parameters.draped, this._configuration.transparencyPassType = t.transparencyPassType, this._configuration.enableOffset = t.camera.relativeElevation < c, this._configuration.multipassEnabled = t.multipassEnabled, this._configuration.cullAboveGround = t.multipassTerrain.cullAboveGround, this._configuration;\n  }\n  update(t) {\n    const r = Math.min(t.camera.relativeElevation, t.camera.distance);\n    this._animation.enabled = Math.sqrt(this.parameters.waveTextureRepeat / this.parameters.waveStrength) * r < v;\n    const a = this._animation.advance(t);\n    return this.setParameters({\n      timeElapsed: e(this._animation.time) * this.parameters.animationSpeed\n    }, !1), this._animation.enabled && a;\n  }\n  createGLMaterial(e) {\n    return new d(e);\n  }\n  createBufferWriter() {\n    return new l(has(\"enable-feature:objectAndLayerId-rendering\") ? p : f);\n  }\n  get test() {}\n}\nclass S extends h {\n  constructor() {\n    super(...arguments), this.waveStrength = .06, this.waveTextureRepeat = 32, this.waveDirection = t(1, 0), this.waveVelocity = .05, this.flowStrength = .015, this.flowOffset = -.5, this.animationSpeed = .35, this.timeElapsed = 0, this.color = a(0, 0, 0, 0), this.transparent = !0, this.hasSlicePlane = !1, this.draped = !1, this.receiveShadows = !0, this.hasScreenSpaceReflections = !1, this.hasCloudsReflections = !1, this.origin = r(), this.modelTransformation = null;\n  }\n}\nconst v = 35e3;\nexport { _ as WaterMaterial, S as WaterMaterialParameters };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst e = {\n  \"calm-small\": {\n    waveStrength: .005,\n    perturbationStrength: .02,\n    textureRepeat: 12,\n    waveVelocity: .01\n  },\n  \"rippled-small\": {\n    waveStrength: .02,\n    perturbationStrength: .09,\n    textureRepeat: 32,\n    waveVelocity: .07\n  },\n  \"slight-small\": {\n    waveStrength: .05,\n    perturbationStrength: .07,\n    textureRepeat: 28,\n    waveVelocity: .1\n  },\n  \"moderate-small\": {\n    waveStrength: .075,\n    perturbationStrength: .07,\n    textureRepeat: 24,\n    waveVelocity: .1\n  },\n  \"calm-medium\": {\n    waveStrength: .003125,\n    perturbationStrength: .01,\n    textureRepeat: 8,\n    waveVelocity: .02\n  },\n  \"rippled-medium\": {\n    waveStrength: .035,\n    perturbationStrength: .015,\n    textureRepeat: 12,\n    waveVelocity: .07\n  },\n  \"slight-medium\": {\n    waveStrength: .06,\n    perturbationStrength: .015,\n    textureRepeat: 8,\n    waveVelocity: .12\n  },\n  \"moderate-medium\": {\n    waveStrength: .09,\n    perturbationStrength: .03,\n    textureRepeat: 4,\n    waveVelocity: .12\n  },\n  \"calm-large\": {\n    waveStrength: .01,\n    perturbationStrength: 0,\n    textureRepeat: 4,\n    waveVelocity: .05\n  },\n  \"rippled-large\": {\n    waveStrength: .025,\n    perturbationStrength: .01,\n    textureRepeat: 8,\n    waveVelocity: .11\n  },\n  \"slight-large\": {\n    waveStrength: .06,\n    perturbationStrength: .02,\n    textureRepeat: 3,\n    waveVelocity: .13\n  },\n  \"moderate-large\": {\n    waveStrength: .14,\n    perturbationStrength: .03,\n    textureRepeat: 2,\n    waveVelocity: .15\n  }\n};\nexport { e as wavePresets };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport { getMetersPerUnitForSR as t } from \"../../../../core/unitUtils.js\";\nimport { e as r } from \"../../../../chunks/earcut.js\";\nimport { set as o } from \"../../../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { fromValues as i, create as n } from \"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { b as s } from \"../../../../chunks/vec42.js\";\nimport { toRadian as a } from \"../../../../core/libs/gl-matrix-2/math/common.js\";\nimport { create as l, empty as c, expandWithBuffer as h, intersectsClippingArea as m, expandWithAABB as p } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { create as u, empty as d, expandPointInPlace as g } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { newDoubleArray as y, doubleSubArray as f } from \"../../../../geometry/support/DoubleArray.js\";\nimport { perVertexElevationAligner as _ } from \"./ElevationAligners.js\";\nimport { SymbolUpdateType as x, elevationModeChangeUpdateType as v, needsElevationUpdates2D as b } from \"./elevationAlignmentUtils.js\";\nimport { Graphics3DDrapedGraphicLayer as C } from \"./Graphics3DDrapedGraphicLayer.js\";\nimport { Graphics3DObject3DGraphicLayer as D } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as j } from \"./Graphics3DSymbolLayer.js\";\nimport { geometryAsPolygon as S, createWaterGeometry as w, PolygonCreationDataBase as G } from \"./polygonUtils.js\";\nimport { geometryToRenderInfo as A, geometryToRenderInfoDraped as E } from \"../../support/renderInfoUtils/polygon.js\";\nimport { Object3D as L } from \"../../webgl-engine/lib/Object3D.js\";\nimport { RenderGeometry as O } from \"../../webgl-engine/lib/RenderGeometry.js\";\nimport { WaterMaterialParameters as P, WaterMaterial as T } from \"../../webgl-engine/materials/WaterMaterial.js\";\nimport { wavePresets as R } from \"../../webgl-engine/materials/internal/waterMaterialUtils.js\";\nconst I = [\"polyline\", \"polygon\", \"extent\"];\nclass B extends j {\n  constructor(e, t, r, o) {\n    super(e, t, r, o);\n  }\n  async doLoad() {}\n  destroy() {\n    super.destroy(), this._context.stage.remove(this._materials[0]), this._materials.length = 0;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry, I, this.symbolLayer.type)) return null;\n    const r = this.setGraphicElevationContext(t);\n    return this.ensureDrapedStatus(\"on-the-ground\" === r.mode), this.ensureMaterial(), this.draped ? this._createAsOverlay(t) : this._createAs3DShape(t, r, t.uid);\n  }\n  ensureMaterial() {\n    if (this._materials[0]) return;\n    const t = new P(),\n      r = this.symbolLayer.color;\n    null != r && (t.color = e.toUnitRGBA(r));\n    const o = this._getCombinedOpacity(r, {\n      hasIntrinsicColor: !0\n    });\n    t.color = [t.color[0], t.color[1], t.color[2], o], t.transparent = o < 1 || this.needsDrivenTransparentPass, t.waveDirection = null != this.symbolLayer.waveDirection ? B.headingVectorFromAngle(this.symbolLayer.waveDirection) : i(0, 0);\n    const n = this.symbolLayer.waveStrength + \"-\" + this.symbolLayer.waterbodySize,\n      s = R[n];\n    t.waveStrength = s.waveStrength, t.waveTextureRepeat = s.textureRepeat, t.waveVelocity = s.waveVelocity, t.flowStrength = s.perturbationStrength, t.hasSlicePlane = this._context.slicePlaneEnabled, t.draped = this.draped, this._materials[0] = new T(t), this._context.stage.add(this._materials[0]);\n  }\n  layerOpacityChanged() {\n    if (null == this._materials[0]) return;\n    const e = this._materials[0].parameters.color,\n      t = this._getCombinedOpacity(this.symbolLayer.color, {\n        hasIntrinsicColor: !0\n      }),\n      r = t < 1 || this.needsDrivenTransparentPass;\n    this._materials[0].setParameters({\n      color: [e[0], e[1], e[2], t],\n      transparent: r\n    });\n  }\n  layerElevationInfoChanged(e, t, r) {\n    const o = this._elevationContext.mode,\n      i = v(B.elevationModeChangeTypes, r, o);\n    if (i !== x.UPDATE) return i;\n    const n = b(o);\n    return this.updateGraphics3DGraphicElevationInfo(e, t, () => n);\n  }\n  slicePlaneEnabledChanged() {\n    return this._materials[0]?.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return !0;\n  }\n  _createAs3DShape(e, t, r) {\n    const o = S(e.geometry);\n    if (null == o) return null;\n    const i = A(o, this._context.elevationProvider, this._context.renderCoordsHelper, t),\n      n = i.position.length / 3,\n      s = y(2 * n);\n    U(s, i.mapPositions, n, this._context.elevationProvider.spatialReference);\n    const a = new k(i, s, this._context.layer.uid, e.uid);\n    if (a.objectAndLayerIdColor = this._context.stage.renderView?.getObjectAndLayerIdColor(a), this._create3DShapeGeometries(a), this._logGeometryCreationWarnings(a.renderData, o.rings, \"rings\", \"WaterSymbol3DLayer\"), 0 === a.outGeometries.length) return null;\n    const l = new L({\n        geometries: a.outGeometries,\n        castShadow: !1,\n        layerUid: this._context.layer.uid,\n        graphicUid: r\n      }),\n      c = new D(this, l, a.outGeometries, null, null, _, t);\n    return c.alignedSampledElevation = a.renderData.sampledElevation, c.needsElevationUpdates = b(t.mode), c;\n  }\n  _create3DShapeGeometries(e) {\n    const t = e.renderData.polygons,\n      o = e.uvCoords;\n    for (const {\n      count: i,\n      index: n,\n      position: s,\n      mapPositions: a,\n      holeIndices: l\n    } of t) {\n      if (null != this._context.clippingExtent && (c(V), h(V, a), !m(V, this._context.clippingExtent))) continue;\n      const t = r(a, l, 3);\n      if (0 === t.length) continue;\n      const p = f(o, 2 * n, 2 * i),\n        u = w({\n          material: this._materials[0],\n          indices: t,\n          mapPositions: a,\n          attributeData: {\n            position: s,\n            uv0: p\n          }\n        }, e.objectAndLayerIdColor);\n      e.outGeometries.push(u);\n    }\n  }\n  _createAsOverlay(e) {\n    const t = S(e.geometry);\n    if (null == t) return null;\n    this._materials[0].renderPriority = this._renderPriority;\n    const r = E(t, this._context.overlaySR),\n      o = r.position.length / 3,\n      i = y(2 * o);\n    U(i, r.position, o, this._context.overlaySR);\n    const n = new F(r, i, this._context.layer.uid, e.uid);\n    return n.objectAndLayerIdColor = this._context.stage.renderView?.getObjectAndLayerIdColor(n), n.outBoundingBox = c(), this._createAsOverlayWater(n), this._logGeometryCreationWarnings(n.renderData, t.rings, \"rings\", \"WaterSymbol3DLayer\"), 0 === n.outGeometries.length ? null : new C(this, n.outGeometries, n.outBoundingBox, this._context.drapeSourceRenderer);\n  }\n  _createAsOverlayWater(e) {\n    const t = e.uvCoords,\n      o = e.renderData.polygons;\n    for (const {\n      position: i,\n      holeIndices: n,\n      index: s,\n      count: a\n    } of o) {\n      if (c(V), h(V, i), !m(V, this._context.clippingExtent)) continue;\n      p(e.outBoundingBox, V);\n      const o = r(i, n, 3);\n      if (0 === o.length) continue;\n      const l = f(t, 2 * s, 2 * a),\n        u = w({\n          material: this._materials[0],\n          indices: o,\n          attributeData: {\n            position: i,\n            uv0: l\n          }\n        }, e.objectAndLayerIdColor);\n      e.outGeometries.push(new O(u, e));\n    }\n  }\n  static headingVectorFromAngle(e) {\n    const t = n(),\n      r = a(e);\n    return t[0] = Math.sin(r), t[1] = Math.cos(r), t;\n  }\n  test() {\n    return {\n      ...super.test(),\n      create3DShape: e => this._createAs3DShape(e.graphic, e.elevationContext, e.graphicUid),\n      ensureMaterial: () => this.ensureMaterial()\n    };\n  }\n}\nfunction U(e, r, i, n) {\n  const a = t(n);\n  d(W);\n  for (let t = 0; t < i; t++) o(z, r[3 * t], r[3 * t + 1]), g(W, z);\n  s(W, W, a);\n  const l = W[0] % B.unitSizeOfTexture,\n    c = W[1] % B.unitSizeOfTexture;\n  M[0] = W[0] - l, M[1] = W[1] - c;\n  for (let t = 0; t < i; t++) e[2 * t] = (r[3 * t] * a - M[0]) / B.unitSizeOfTexture, e[2 * t + 1] = (r[3 * t + 1] * a - M[1]) / B.unitSizeOfTexture;\n}\nB.unitSizeOfTexture = 100, B.elevationModeChangeTypes = {\n  definedChanged: x.RECREATE,\n  staysOnTheGround: x.NONE,\n  onTheGroundChanged: x.RECREATE\n};\nconst M = n(),\n  W = u(),\n  z = n(),\n  V = l();\nclass k extends G {\n  constructor(e, t, r, o) {\n    super(e, r, o), this.uvCoords = t;\n  }\n}\nclass F extends G {\n  constructor(e, t, r, o) {\n    super(e, r, o), this.uvCoords = t;\n  }\n}\nexport { B as Graphics3DWaterSymbolLayer };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport r from \"../../../../core/Logger.js\";\nimport { Graphics3DExtrudeSymbolLayer as o } from \"./Graphics3DExtrudeSymbolLayer.js\";\nimport { Graphics3DIconSymbolLayer as e } from \"./Graphics3DIconSymbolLayer.js\";\nimport { Graphics3DLineSymbolLayer as t } from \"./Graphics3DLineSymbolLayer.js\";\nimport { Graphics3DMeshFillSymbolLayer as i } from \"./Graphics3DMeshFillSymbolLayer.js\";\nimport { Graphics3DObjectSymbolLayer as m } from \"./Graphics3DObjectSymbolLayer.js\";\nimport { Graphics3DPathSymbolLayer as a } from \"./Graphics3DPathSymbolLayer.js\";\nimport { Graphics3DPolygonFillSymbolLayer as s } from \"./Graphics3DPolygonFillSymbolLayer.js\";\nimport { Graphics3DTextSymbolLayer as y } from \"./Graphics3DTextSymbolLayer.js\";\nimport { Graphics3DWaterSymbolLayer as p } from \"./Graphics3DWaterSymbolLayer.js\";\nfunction c(o, e, t, i) {\n  const m = h[o.type]?.[e.type] || l[e.type];\n  return m ? new m(o, e, t, i) : (r.getLogger(\"esri.views.3d.layers.graphics.Graphics3DSymbolLayerFactory\").error(\"GraphicsLayerFactory#make\", `unknown symbol type ${e.type}`), null);\n}\nconst l = {\n  icon: e,\n  object: m,\n  line: t,\n  path: a,\n  fill: s,\n  extrude: o,\n  text: y,\n  water: p\n};\nfunction n(r, o) {\n  l[r] = o;\n}\nconst h = {\n  \"mesh-3d\": {\n    fill: i\n  }\n};\nexport { c as make, n as setSymbolClass };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../core/arrayUtils.js\";\nimport { forEach as e } from \"../../../../core/asyncUtils.js\";\nimport \"../../../../core/has.js\";\nimport { onAbortOrThrow as r, throwIfAborted as s } from \"../../../../core/promiseUtils.js\";\nimport { totalSymbolComplexities as o } from \"./defaultSymbolComplexity.js\";\nimport { Graphics3DGraphic as a } from \"./Graphics3DGraphic.js\";\nimport { Graphics3DObject3DGraphicLayer as i } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayerCreationContext as n } from \"./Graphics3DSymbolCreationContext.js\";\nimport { make as l } from \"./Graphics3DSymbolLayerFactory.js\";\nimport { ApplyRendererDiffResult as y } from \"./interfaces.js\";\nimport { Loadable as h, LoadStatus as m } from \"./Loadable.js\";\nclass c extends h {\n  set symbol(t) {\n    this._symbol = t, t.symbolLayers.forEach((e, r) => {\n      const s = this.symbolLayers[r];\n      null != s && (s.symbol = t, s.symbolLayer = e);\n    });\n  }\n  get symbol() {\n    return this._symbol;\n  }\n  constructor(t, e, r) {\n    super(e.schedule), this._symbol = t, this._context = e, this._backgroundLayers = r, this._destroyed = !1, this.symbolLayers = new Array(), this.referenced = 0, this._extentPadding = 0;\n  }\n  async doLoad(t) {\n    let o = this._symbol.symbolLayers;\n    this._extentPadding = 0, this._backgroundLayers && (o = this._backgroundLayers.concat(o));\n    const a = o.length;\n    for (; this.symbolLayers.length < o.length;) this.symbolLayers.push(null);\n    this.symbolLayers.length = o.length;\n    const i = [];\n    for (let e = 0; e < a; e++) {\n      const s = o.at(e);\n      if (!1 === s.enabled) continue;\n      p.renderPriority = 1 - (1 + e) / a, p.renderPriorityStep = 1 / a, p.ignoreDrivers = s.ignoreDrivers;\n      const n = l(this.symbol, s, this._context, p),\n        y = r(t, () => {\n          this.symbolLayers[e] = null, n.destroy();\n        });\n      y && i.push(y), this.symbolLayers[e] = n;\n    }\n    if (await e(this.symbolLayers, async (t, e) => {\n      if (null != t) try {\n        await t.load(), this._extentPadding += Math.max(this._extentPadding, t.extentPadding);\n      } catch {\n        this.symbolLayers[e] = null;\n      }\n    }), i.forEach(t => t.remove()), s(t), this.symbolLayers.length && !this.symbolLayers.some(t => !!t)) throw new Error();\n  }\n  getSymbolLayerSize(t) {\n    const e = this.symbolLayers[t];\n    return null != e ? e.getCachedSize() : null;\n  }\n  get extentPadding() {\n    return this._extentPadding;\n  }\n  get symbologySnappingSupported() {\n    return this.symbolLayers.some(t => t?.queryForSnapping);\n  }\n  createGraphics3DGraphic(t, e) {\n    const r = t.graphic,\n      s = this.symbolLayers.map(e => e?.createGraphics3DGraphic(t) ?? null),\n      o = this._context.arcade || this._context.featureExpressionInfoContext?.arcade?.modules || null;\n    return new a(r, e || this, s, t.layer, o);\n  }\n  get complexity() {\n    return o(this.symbolLayers.map(t => null != t ? t.complexity : null));\n  }\n  globalPropertyChanged(t, e) {\n    const r = this.symbolLayers.length;\n    for (let s = 0; s < r; s++) {\n      const r = this.symbolLayers[s],\n        o = t => {\n          const e = t.layers[s];\n          return e instanceof i ? e : null;\n        };\n      if (null != r && !r.globalPropertyChanged(t, e, o)) return !1;\n    }\n    return !0;\n  }\n  applyRendererDiff(t, e) {\n    return this.loadStatus !== m.LOADED ? y.RecreateSymbol : this.symbolLayers.reduce((r, s) => r !== y.RecreateSymbol && null != s ? Math.min(r, s.applyRendererDiff(t, e)) : r, y.FastUpdate);\n  }\n  prepareSymbolPatch(t) {\n    if (this.loadStatus === m.FAILED) return;\n    if (\"partial\" !== t.diff.type) return;\n    const e = t.diff.diff;\n    if (!e.symbolLayers || \"partial\" !== e.symbolLayers.type) return;\n    const r = e.symbolLayers.diff;\n    this.symbolLayers.forEach((e, s) => {\n      if (null == e) return;\n      const o = r[s];\n      if (o) {\n        const r = {\n          diff: o,\n          graphics3DGraphicPatches: [],\n          symbolLayerStatePatches: []\n        };\n        e.prepareSymbolLayerPatch(r), t.symbolStatePatches.push(...r.symbolLayerStatePatches), r.graphics3DGraphicPatches.length && t.graphics3DGraphicPatches.push((t, e) => {\n          const o = t.layers[s];\n          null != o && r.graphics3DGraphicPatches.forEach(t => t(o, e));\n        });\n      }\n    });\n  }\n  updateGeometry(t, e) {\n    return this._updateGeometryOrTransform(t, (t, r) => t.updateGeometry(r, e));\n  }\n  updateTransform(t, e, r, s) {\n    return this._updateGeometryOrTransform(t, (t, o) => t.updateTransform(o, e, r, s));\n  }\n  _updateGeometryOrTransform(t, e) {\n    for (let r = 0; r < this.symbolLayers.length; r++) {\n      const s = this.symbolLayers[r];\n      if (null == s) continue;\n      const o = t.layers[r];\n      if (!o || !e(s, o)) return !1;\n    }\n    return !0;\n  }\n  onRemoveGraphic(t) {\n    for (let e = 0; e < this.symbolLayers.length; e++) {\n      const r = this.symbolLayers[e];\n      if (null == r) continue;\n      const s = t.layers[e];\n      null != s && r.onRemoveGraphic(s);\n    }\n  }\n  getFastUpdateStatus() {\n    let t = 0,\n      e = 0,\n      r = 0;\n    return this.symbolLayers.forEach(s => {\n      null != s && (s.loadStatus === m.LOADING ? t++ : s.isFastUpdatesEnabled() ? r++ : e++);\n    }), {\n      loading: t,\n      slow: e,\n      fast: r\n    };\n  }\n  async queryForSnapping(e, r, o, a) {\n    const i = this.symbolLayers.filter(t).filter(t => null != t.queryForSnapping).map(t => t.queryForSnapping(e, r, o, a)),\n      n = await Promise.all(i);\n    return s(a), n.flat();\n  }\n  destroy() {\n    if (!this.destroyed) {\n      super.destroy();\n      for (const t of this.symbolLayers) null != t && t.destroy();\n      this.symbolLayers.length = 0, this._destroyed = !0;\n    }\n  }\n  get destroyed() {\n    return this._destroyed;\n  }\n}\nconst p = new n();\nexport { c as Graphics3DSymbol };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { emptySymbolComplexity as t } from \"./defaultSymbolComplexity.js\";\nimport { ApplyRendererDiffResult as r } from \"./interfaces.js\";\nimport { Loadable as s } from \"./Loadable.js\";\nclass i extends s {\n  constructor(t, r, s) {\n    super(r), this.symbol = t, this._convert = s, this.symbologySnappingSupported = !1, this.graphics3DSymbol = null, this.referenced = 0;\n  }\n  getSymbolLayerSize(t) {\n    return null != this.graphics3DSymbol ? this.graphics3DSymbol.getSymbolLayerSize(t) : null;\n  }\n  get symbolLayers() {\n    return null != this.graphics3DSymbol ? this.graphics3DSymbol.symbolLayers : [];\n  }\n  get extentPadding() {\n    return null != this.graphics3DSymbol ? this.graphics3DSymbol.extentPadding : 0;\n  }\n  async doLoad(t) {\n    const r = await this.symbol.fetchSymbol({\n      signal: t\n    });\n    r.id = this.symbol.id, this.graphics3DSymbol = this._convert(r), null != this.graphics3DSymbol && (await this.graphics3DSymbol.load());\n  }\n  createGraphics3DGraphic(t) {\n    return null != this.graphics3DSymbol ? this.graphics3DSymbol.createGraphics3DGraphic(t, this) : null;\n  }\n  get complexity() {\n    return null != this.graphics3DSymbol ? this.graphics3DSymbol.complexity : t;\n  }\n  globalPropertyChanged(t, r) {\n    return null != this.graphics3DSymbol && this.graphics3DSymbol.globalPropertyChanged(t, r);\n  }\n  applyRendererDiff(t, s) {\n    return null != this.graphics3DSymbol ? this.graphics3DSymbol.applyRendererDiff(t, s) : r.RecreateSymbol;\n  }\n  prepareSymbolPatch(t) {\n    null != this.graphics3DSymbol && this.graphics3DSymbol.prepareSymbolPatch(t);\n  }\n  updateGeometry(t, r) {\n    return null != this.graphics3DSymbol && this.graphics3DSymbol.updateGeometry(t, r);\n  }\n  updateTransform(t, r, s, i) {\n    return this.graphics3DSymbol?.updateTransform(t, r, s, i) ?? !1;\n  }\n  onRemoveGraphic() {}\n  getFastUpdateStatus() {\n    return null != this.graphics3DSymbol ? this.graphics3DSymbol.getFastUpdateStatus() : {\n      loading: 1,\n      fast: 0,\n      slow: 0\n    };\n  }\n  destroy() {\n    null != this.graphics3DSymbol && this.graphics3DSymbol.destroy(), this.graphics3DSymbol = void 0, super.destroy();\n  }\n  get destroyed() {\n    return void 0 === this.graphics3DSymbol;\n  }\n}\nexport { i as Graphics3DWebStyleSymbol };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { create as r } from \"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";\nimport { m as n, f as t, g as i, j as e, p as c, c as o, n as u } from \"../../../chunks/vec32.js\";\nimport { create as f } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { signedDistance as l, getNormal as s } from \"../../../geometry/support/plane.js\";\nfunction p(r, n, t) {\n  return r[0] * n[0] + r[1] * n[1] + r[2] * n[2] + r[3] < t;\n}\nfunction a(r, n, t) {\n  const i = n[0],\n    e = n[1],\n    c = n[2];\n  return !(r[0][0] * i + r[0][1] * e + r[0][2] * c + r[0][3] > t) && !(r[1][0] * i + r[1][1] * e + r[1][2] * c + r[1][3] > t) && !(r[2][0] * i + r[2][1] * e + r[2][2] * c + r[2][3] > t) && !(r[3][0] * i + r[3][1] * e + r[3][2] * c + r[3][3] > t) && !(r[4][0] * i + r[4][1] * e + r[4][2] * c + r[4][3] > t) && !(r[5][0] * i + r[5][1] * e + r[5][2] * c + r[5][3] > t);\n}\nfunction m(r, n, t, i) {\n  return h(r, n, null, v(i, n, t, !1));\n}\nfunction d(r, n) {\n  for (let t = 0; t < 6; t++) {\n    if (l(r[t], n) > 0) return !1;\n  }\n  return !0;\n}\nfunction g(r, n, t, i) {\n  return h(r, n, t, v(i, n, t, !0));\n}\nfunction j(r, c, o, u) {\n  const f = n(o, t(r, u, c));\n  return i(r, c, e(r, o, f));\n}\nconst b = {\n  dir: f(),\n  len: 0,\n  clip: r()\n};\nfunction v(r, n, i, f) {\n  const l = b;\n  return r ? (i && f && (l.len = c(n, i)), o(l.dir, r)) : f ? (l.len = c(n, i), t(l.dir, i, n), e(l.dir, l.dir, 1 / l.len)) : (t(l.dir, i, n), u(l.dir, l.dir)), l;\n}\nfunction x(r, t, i) {\n  const e = n(s(r), i.dir),\n    c = -l(r, t);\n  if (c < 0 && e >= 0) return !1;\n  if (e > -1e-6 && e < 1e-6) return c > 0;\n  if ((c < 0 || e < 0) && !(c < 0 && e < 0)) return !0;\n  const o = c / e;\n  return e > 0 ? o < i.clip[1] && (i.clip[1] = o) : o > i.clip[0] && (i.clip[0] = o), i.clip[0] <= i.clip[1];\n}\nfunction h(r, n, t, i) {\n  i.clip[0] = 0, i.clip[1] = t ? i.len : Number.MAX_VALUE;\n  for (let e = 0; e < r.length; e++) if (!x(r[e], n, i)) return !1;\n  return !0;\n}\nexport { j as closestPointOnRay, g as frustumLineSegment, d as frustumPoint, m as frustumRay, a as frustumSphere, p as planeSphere };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { neverReached as t } from \"../../../core/compilerUtils.js\";\nimport { lerp as e } from \"../../../core/mathUtils.js\";\nimport { invert as i } from \"../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { create as r } from \"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { g as n, j as o, E as s, h as a, s as c, m as l } from \"../../../chunks/vec32.js\";\nimport { create as p } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { getReferenceEllipsoid as h } from \"../../../geometry/ellipsoidUtils.js\";\nimport { computeTranslationToOriginAndRotation as d } from \"../../../geometry/projection/computeTranslationToOriginAndRotation.js\";\nimport { projectBoundingRect as m } from \"../../../geometry/projection/projectBoundingRect.js\";\nimport { projectVectorToVector as _ } from \"../../../geometry/projection/projectVectorToVector.js\";\nimport { create as g, empty as f, expandWithVec3 as u } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { create as x, center as R } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { PlaneIndex as y } from \"../../../geometry/support/frustum.js\";\nimport { create as j, fromPoints as b } from \"../../../geometry/support/lineSegment.js\";\nimport { create as A, fromVectorsAndPoint as E, copy as S, negate as B, signedDistance as C } from \"../../../geometry/support/plane.js\";\nimport { wrap as H } from \"../../../geometry/support/ray.js\";\nimport { ViewingMode as w } from \"../../ViewingMode.js\";\nimport { frustumLineSegment as G } from \"./intersectionUtils.js\";\nconst M = .5 * Math.PI,\n  F = M / Math.PI * 180;\nclass N {\n  constructor(t) {\n    this._renderCoordsHelper = t.renderCoordsHelper, this._extent = new Array(4), this._planes = new Array(6), this._maxSpan = 0, this._center = {\n      origin: p(),\n      direction: p()\n    };\n    for (let e = 0; e < 4; e++) this._extent[e] = {\n      origin: p(),\n      direction: p(),\n      cap: {\n        next: null,\n        direction: p()\n      }\n    }, this._planes[e] = A();\n    this._planes[y.NEAR] = A(), this._planes[y.FAR] = A(), this._planesWithoutFar = this._planes.slice(0, 5);\n  }\n  update(t, e, i, r = !0) {\n    const a = this._extent;\n    this._toRenderBoundingExtent(t, e, i), n(this._center.origin, a[0].origin, a[2].origin), o(this._center.origin, this._center.origin, .5), this._renderCoordsHelper.worldUpAtPosition(this._center.origin, this._center.direction), r || o(this._center.direction, this._center.direction, -1);\n    for (let n = 0; n < 4; n++) {\n      const t = a[n];\n      this._renderCoordsHelper.worldUpAtPosition(t.origin, t.direction);\n      const e = a[3 === n ? 0 : n + 1];\n      t.cap.next = e.origin, s(t.cap.direction, t.origin, e.origin), E(t.direction, t.cap.direction, t.origin, this._planes[n]), r || o(t.direction, t.direction, -1);\n    }\n    E(a[0].cap.direction, a[1].cap.direction, a[0].origin, this._planes[y.NEAR]), r ? B(this._planes[y.NEAR], this._planes[y.FAR]) : (S(this._planes[y.FAR], this._planes[y.NEAR]), B(this._planes[y.NEAR], this._planes[y.NEAR])), this._maxSpan = Math.max(Math.abs(t[0] - t[2]), Math.abs(t[1] - t[3])), this._maxSpanSpatialReference = e, this._minGlobalAltitude = .9 * h(this._maxSpanSpatialReference).radius;\n  }\n  isVisibleInFrustum(t, e, i = !1) {\n    if (null == t) return !1;\n    if (this._renderCoordsHelper.viewingMode === w.Global) {\n      const i = this._maxSpanSpatialReference.isGeographic ? F : M * e;\n      if (this._maxSpan > i) return !0;\n      if (null != t.altitude && t.altitude >= this._minGlobalAltitude) return this._isVisibleInFrustumGlobal(t);\n    }\n    if (0 === this._maxSpan) {\n      const e = this._extent[0];\n      return !(i || !t.intersectsRay(H(e.origin, e.direction)));\n    }\n    for (let n = 0; n < this._extent.length; n++) {\n      const e = this._extent[n];\n      if (!i && t.intersectsRay(H(e.origin, e.direction))) return !0;\n      if (t.intersectsLineSegment(b(e.origin, e.cap.next, k), e.cap.direction)) return !0;\n    }\n    const r = i ? this._planes : this._planesWithoutFar;\n    for (let n = 0; n < t.lines.length; n++) {\n      const e = t.lines[n];\n      if (G(r, e.origin, e.endpoint, e.direction)) return !0;\n    }\n    return !1;\n  }\n  _toRenderBoundingExtentGlobal(t, r, n) {\n    const o = 5;\n    R(t, V), V[2] = n, d(r, V, v, this._renderCoordsHelper.spatialReference), i(I, v), f(L);\n    for (const {\n      x0: i,\n      x1: s,\n      y0: c,\n      y1: l\n    } of U) for (let p = 0; p < o; p++) {\n      const h = p / (o - 1);\n      V[0] = e(t[i], t[s], h), V[1] = e(t[c], t[l], h), V[2] = n, _(V, r, V, this._renderCoordsHelper.spatialReference), a(V, V, I), u(L, V);\n    }\n    c(this._extent[0].origin, L[0], L[1], L[2]), c(this._extent[1].origin, L[3], L[1], L[2]), c(this._extent[2].origin, L[3], L[4], L[2]), c(this._extent[3].origin, L[0], L[4], L[2]);\n    for (let e = 0; e < 4; ++e) a(this._extent[e].origin, this._extent[e].origin, v);\n  }\n  _toRenderBoundingExtentLocal(t, e, i) {\n    m(t, e, P, this._renderCoordsHelper.spatialReference), c(this._extent[0].origin, P[0], P[1], i), c(this._extent[1].origin, P[2], P[1], i), c(this._extent[2].origin, P[2], P[3], i), c(this._extent[3].origin, P[0], P[3], i);\n  }\n  _toRenderBoundingExtent(e, i, r) {\n    switch (this._renderCoordsHelper.viewingMode) {\n      case w.Global:\n        this._toRenderBoundingExtentGlobal(e, i, r);\n        break;\n      case w.Local:\n        this._toRenderBoundingExtentLocal(e, i, r);\n        break;\n      default:\n        t(this._renderCoordsHelper.viewingMode);\n    }\n  }\n  _isVisibleInFrustumGlobal(t) {\n    if (C(t.planes[y.NEAR], this._center.origin) < 0 && l(this._center.direction, t.direction) < 0) return !0;\n    for (let e = 0; e < 4; e++) {\n      const i = this._extent[e];\n      if (C(t.planes[y.NEAR], i.origin) < 0 && l(i.direction, t.direction) < 0) return !0;\n    }\n    return !1;\n  }\n}\nconst U = [{\n    x0: 0,\n    y0: 1,\n    x1: 2,\n    y1: 1\n  }, {\n    x0: 0,\n    y0: 3,\n    x1: 2,\n    y1: 3\n  }, {\n    x0: 0,\n    y0: 1,\n    x1: 0,\n    y1: 3\n  }, {\n    x0: 2,\n    y0: 1,\n    x1: 2,\n    y1: 3\n  }],\n  V = p(),\n  v = r(),\n  I = r(),\n  L = g(),\n  P = x(),\n  k = j();\nexport { N as FrustumExtentIntersection };"],
  "mappings": "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",
  "names": ["l", "e", "t", "r", "s", "i", "a", "I", "u", "o", "n", "L", "c", "h", "L", "A", "e", "o", "u", "t", "e", "o", "n", "r", "a", "s", "i", "l", "M", "p", "m", "f", "c", "E", "b", "g", "I", "v", "T", "S", "d", "h", "O", "R", "r", "s", "t", "j", "e", "t", "i", "p", "s", "a", "n", "r", "o", "v", "l", "c", "V", "A", "G", "y", "O", "u", "d", "E", "h", "w", "_", "f", "P", "k", "m", "t", "e", "o", "t", "c", "s", "e", "t", "r", "n", "c", "o", "i", "d", "e", "S", "m", "n", "s", "a", "c", "r", "G", "l", "ot", "z", "e", "a", "t", "s", "r", "l", "t", "m", "e", "F", "r", "p", "a", "s", "u", "o", "b", "d", "L", "y", "C", "c", "f", "n", "P", "E", "w", "S", "j", "e", "r", "t", "l", "e", "u", "y", "r", "e", "t", "i", "o", "f", "n", "s", "g", "m", "v", "F", "_", "p", "b", "a", "e", "r", "t", "o", "n", "u", "d", "i", "O", "p", "c", "g", "y", "m", "l", "f", "b", "h", "h", "r", "i", "t", "l", "e", "O", "S", "o", "R", "_", "s", "t", "e", "r", "m", "c", "e", "g", "E", "o", "s", "t", "r", "p", "b", "i", "n", "a", "l", "u", "f", "h", "d", "O", "H", "S", "E", "y", "e", "t", "w", "m", "r", "g", "i", "n", "u", "a", "o", "U", "l", "s", "b", "d", "c", "I", "j", "p", "P", "G", "S", "t", "e", "o", "l", "a", "E", "o", "t", "e", "r", "i", "n", "l", "a", "s", "R", "u", "c", "r", "t", "_", "c", "a", "n", "c", "e", "c", "a", "i", "n", "u", "o", "x", "r", "s", "t", "s", "r", "t", "e", "i", "n", "a", "l", "h", "o", "d", "_", "g", "m", "f", "u", "p", "x", "R", "S", "c", "i", "s", "r", "f", "t", "o", "a", "l", "m", "e", "u", "h", "c", "i", "r", "c", "a", "n", "o", "l", "f", "e", "s", "s", "o", "a", "l", "t", "e", "f", "m", "u", "_", "g", "d", "h", "y", "b", "p", "r", "i", "S", "c", "b", "v", "S", "t", "e", "E", "r", "n", "R", "A", "D", "L", "c", "I", "l", "s", "i", "y", "h", "k", "o", "O", "j", "a", "_", "e", "s", "x", "e", "O", "D", "v", "u", "A", "t", "i", "r", "s", "L", "I", "j", "ot", "n", "l", "a", "P", "o", "S", "p", "r", "o", "n", "a", "s", "c", "t", "i", "m", "e", "A", "I", "l", "b", "w", "j", "g", "p", "o", "n", "r", "c", "a", "h", "t", "u", "g", "f", "l", "e", "te", "s", "i", "m", "y", "t", "e", "r", "s", "I", "o", "n", "i", "a", "j", "g", "L", "l", "c", "m", "b", "p", "h", "d", "u", "f", "M", "w", "C", "B", "D", "T", "N", "P", "_", "v", "rt", "A", "z", "R", "ft", "V", "O", "k", "H", "W", "ot", "at", "x", "it", "ht", "S", "E", "Ot", "l", "e", "t", "r", "i", "E", "I", "n", "o", "P", "f", "d", "u", "k", "a", "O", "p", "S", "r", "o", "e", "y", "t", "i", "p", "I", "s", "u", "a", "n", "l", "c", "j", "Q", "O", "f", "d", "m", "b", "G", "h", "te", "W", "B", "n", "r", "e", "W", "G", "B", "O", "y", "e", "t", "r", "i", "s", "n", "F", "z", "u", "a", "m", "b", "d", "V", "h", "c", "p", "P", "T", "g", "I", "o", "l", "_", "f", "w", "j", "e", "p", "e", "a", "s", "r", "i", "g", "o", "t", "n", "m", "l", "f", "d", "c", "u", "h", "T", "_", "b", "U", "q", "F", "E", "r", "t", "e", "a", "s", "j", "i", "n", "S", "r", "e", "O", "t", "l", "R", "i", "_", "o", "f", "E", "m", "s", "t", "o", "e", "r", "V", "c", "e", "U", "s", "E", "o", "t", "r", "f", "p", "d", "S", "m", "L", "x", "y", "N", "z", "J", "b", "K", "Y", "$", "ee", "R", "T", "q", "B", "X", "G", "D", "j", "F", "u", "h", "H", "k", "v", "w", "Q", "W", "i", "a", "n", "l", "g", "I", "y", "e", "t", "r", "o", "V", "g", "n", "a", "s", "nt", "i", "l", "u", "c", "m", "f", "p", "h", "d", "x", "_", "T", "j", "rt", "et", "tt", "O", "S", "I", "it", "U", "D", "v", "Y", "q", "ot", "J", "P", "at", "A", "st", "p", "e", "t", "i", "n", "l", "c", "s", "I", "O", "P", "o", "x", "h", "a", "r", "d", "b", "m", "w", "u", "f", "v", "k", "n", "e", "r", "t", "s", "u", "o", "r", "o", "s", "u", "i", "y", "m", "j", "l", "a", "h", "t", "d", "r", "i", "s", "c", "F", "e", "t", "c", "t", "e", "i", "l", "x", "f", "s", "u", "r", "M", "C", "t", "e", "H", "R", "b", "T", "l", "u", "h", "c", "x", "d", "S", "s", "y", "i", "D", "N", "V", "a", "o", "n", "r", "g", "w", "n", "Y", "e", "r", "t", "z", "_", "s", "i", "O", "V", "m", "e", "i", "t", "c", "r", "s", "a", "u", "s", "i", "o", "n", "f", "d", "c", "t", "F", "r", "O", "e", "a", "m", "l", "p", "h", "G", "a", "e", "r", "i", "s", "o", "u", "c", "n", "t", "P", "h", "V", "e", "t", "r", "B", "d", "i", "E", "b", "I", "q", "a", "s", "n", "f", "o", "W", "O", "K", "Y", "M", "k", "l", "c", "h", "u", "z", "P", "Q", "J", "m", "_", "G", "H", "me", "e", "t", "s", "r", "i", "a", "o", "n", "l", "c", "h", "d", "pe", "y", "I", "m", "_", "p", "u", "O", "j", "g", "S", "b", "R", "x", "f", "P", "v", "L", "G", "w", "W", "B", "C", "fe", "ye", "ge", "_e", "F", "U", "ue", "r", "t", "i", "s", "o", "n", "g", "v", "f", "c", "l", "e", "h", "h", "t", "r", "o", "p", "n", "l", "a", "u", "f", "e", "i", "s", "o", "e", "t", "s", "i", "l", "f", "r", "n", "m", "h", "p", "c", "a", "u", "c", "t", "e", "r", "s", "a", "i", "o", "h", "n", "l", "p", "u", "m", "j", "f", "O", "e", "I", "r", "o", "n", "s", "i", "t", "d", "t", "f", "r", "a", "l", "c", "u", "b", "v", "m", "x", "A", "V", "g", "D", "N", "j", "o", "R", "E", "w", "y", "P", "_", "I", "h", "C", "q", "e", "T", "O", "L", "M", "s", "i", "n", "l", "v", "h", "u", "j", "R", "n", "y", "b", "x", "L", "k", "q", "E", "G", "r", "o", "M", "U", "m", "a", "s", "S", "_", "o", "t", "e", "s", "n", "i", "c", "d", "a", "r", "h", "l", "v", "p", "m", "n", "t", "r", "a", "u", "o", "e", "c", "s", "i", "f", "l", "M", "h", "b", "m", "d", "p", "y", "x", "S", "j", "_", "g", "q", "e", "r", "t", "n", "o", "R", "n", "l", "t", "r", "u", "k", "I", "e", "D", "_", "x", "s", "w", "y", "U", "m", "a", "b", "o", "j", "d", "i", "F", "P", "L", "S", "h", "E", "A", "C", "e", "L", "n", "r", "A", "o", "l", "t", "S", "c", "i", "a", "f", "s", "_", "O", "D", "V", "g", "c", "e", "w", "E", "r", "n", "C", "V", "t", "o", "i", "s", "a", "u", "l", "p", "m", "f", "b", "O", "S", "v", "_", "H", "A", "L", "ee", "te", "y", "e", "t", "i", "r", "o", "B", "O", "d", "a", "c", "l", "f", "h", "p", "m", "u", "S", "s", "g", "j", "G", "n", "b", "v", "P", "w", "x", "oe", "A", "D", "C", "L", "ae", "se", "ne", "R", "T", "t", "r", "e", "s", "i", "l", "o", "y", "m", "a", "n", "c", "M", "F", "Y", "_", "D", "x", "d", "V", "O", "P", "E", "f", "q", "v", "A", "G", "u", "I", "p", "N", "g", "S", "k", "w", "U", "N", "r", "e", "R", "I", "o", "i", "s", "S", "A", "c", "h", "f", "l", "_", "E", "t", "T", "a", "v", "e", "C", "E", "h", "i", "g", "o", "R", "I", "A", "t", "H", "S", "N", "r", "s", "a", "n", "c", "p", "l", "j", "u", "s", "e", "r", "a", "d", "l", "v", "t", "c", "u", "n", "o", "i", "M", "m", "z", "H", "B", "N", "y", "e", "t", "i", "r", "O", "J", "s", "v", "K", "n", "u", "G", "o", "m", "b", "d", "p", "k", "M", "a", "c", "l", "P", "W", "q", "T", "F", "g", "i", "e", "n", "s", "r", "v", "a", "d", "t", "D", "T", "r", "H", "y", "e", "t", "n", "I", "s", "f", "o", "l", "i", "h", "u", "W", "b", "d", "p", "m", "M", "a", "c", "g", "x", "v", "O", "j", "w", "S", "_", "E", "Q", "L", "D", "V", "$", "F", "k", "N", "q", "T", "r", "e", "o", "l", "O", "t", "i", "S", "A", "c", "f", "s", "_", "s", "t", "e", "o", "T", "_", "e", "S", "O", "E", "i", "h", "o", "t", "r", "v", "a", "u", "s", "I", "f", "n", "e", "I", "B", "y", "e", "t", "r", "o", "S", "u", "n", "s", "_", "i", "m", "b", "d", "p", "U", "a", "k", "l", "O", "c", "P", "V", "F", "W", "z", "f", "M", "g", "c", "o", "e", "t", "i", "m", "h", "l", "pe", "O", "te", "N", "H", "B", "h", "c", "r", "t", "e", "s", "o", "a", "i", "p", "n", "y", "A", "F", "l", "i", "r", "t", "s", "l", "e", "g", "r", "n", "t", "i", "h", "v", "j", "c", "o", "u", "f", "e", "b", "l", "x", "F", "V", "M", "F", "N", "t", "n", "e", "E", "j", "i", "r", "a", "u", "q", "A", "s", "l", "h", "k", "g", "o", "p", "V", "v", "I", "P", "L", "c", "U", "f", "O"]
}
