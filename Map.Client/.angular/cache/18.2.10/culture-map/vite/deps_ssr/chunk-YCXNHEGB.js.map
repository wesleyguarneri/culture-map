{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/webdoc/support/writeUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { clone as t } from \"../../core/lang.js\";\nimport { getDeepValue as n } from \"../../core/object.js\";\nimport { numberToJSON as r } from \"../../core/accessorSupport/extensions/serializableProperty/writer.js\";\nimport { isFeatureCollectionLayer as i } from \"../../layers/support/layerUtils.js\";\nconst o = new Set([\"bing-maps\", \"imagery\", \"imagery-tile\", \"map-image\", \"open-street-map\", \"tile\", \"unknown\", \"unsupported\", \"vector-tile\", \"web-tile\", \"wms\", \"wmts\"]),\n  l = new Set([\"catalog\", \"csv\", \"feature\", \"geo-rss\", \"geojson\", \"group\", \"imagery\", \"imagery-tile\", \"kml\", \"knowledge-graph\", \"map-image\", \"map-notes\", \"media\", \"ogc-feature\", \"oriented-imagery\", \"route\", \"stream\", \"subtype-group\", \"tile\", \"unknown\", \"unsupported\", \"vector-tile\", \"web-tile\", \"wfs\", \"wms\", \"wmts\"]);\nfunction a(e) {\n  o.delete(e), l.delete(e);\n}\nfunction s(e) {\n  o.add(e), l.add(e);\n}\nfunction d(e) {\n  return \"basemap\" === e.layerContainerType ? o : \"operational-layers\" === e.layerContainerType ? l : null;\n}\nfunction p(e, t) {\n  if (t.restrictedWebMapWriting) {\n    const n = d(t);\n    return null == n || n.has(e.type) && !i(e);\n  }\n  return !0;\n}\nfunction u(e, t) {\n  if (t) if (i(e)) {\n    const r = n(\"featureCollection.layers\", t),\n      i = r?.[0]?.layerDefinition;\n    i && c(e, i);\n  } else \"group\" !== e.type && c(e, t);\n}\nfunction c(e, t) {\n  \"maxScale\" in e && (t.maxScale = r(e.maxScale) ?? void 0), \"minScale\" in e && (t.minScale = r(e.minScale) ?? void 0);\n}\nfunction m(e, t) {\n  if (u(e, t), t && (t.id = e.id, \"blendMode\" in e && (t.blendMode = e.blendMode, \"normal\" === t.blendMode && delete t.blendMode), t.opacity = r(e.opacity) ?? void 0, t.title = e.title || \"Layer\", t.visibility = e.visible, \"legendEnabled\" in e && \"wmts\" !== e.type)) if (i(e)) {\n    const n = t.featureCollection;\n    n && (n.showLegend = e.legendEnabled);\n  } else t.showLegend = e.legendEnabled;\n}\nfunction f(n, r, o) {\n  if (!n.persistenceEnabled) return null;\n  if (!(\"write\" in n) || !n.write) return o?.messages && o.messages.push(new e(\"layer:unsupported\", `Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`, {\n    layer: n\n  })), null;\n  if (i(n) && !n.isTable) r = n.resourceInfo;else if (p(n, o)) {\n    const e = {};\n    return n.write(e, o) ? e : null;\n  }\n  return null != r && m(n, r = t(r)), r;\n}\nexport { s as disableRestrictedWriting, a as enableRestrictedWriting, f as getLayerJSON };"],
  "mappings": ";;;;;;;;;;;;;;AASA,IAAM,IAAI,oBAAI,IAAI,CAAC,aAAa,WAAW,gBAAgB,aAAa,mBAAmB,QAAQ,WAAW,eAAe,eAAe,YAAY,OAAO,MAAM,CAAC;AAAtK,IACE,IAAI,oBAAI,IAAI,CAAC,WAAW,OAAO,WAAW,WAAW,WAAW,SAAS,WAAW,gBAAgB,OAAO,mBAAmB,aAAa,aAAa,SAAS,eAAe,oBAAoB,SAAS,UAAU,iBAAiB,QAAQ,WAAW,eAAe,eAAe,YAAY,OAAO,OAAO,MAAM,CAAC;AAO5T,SAAS,EAAE,GAAG;AACZ,SAAO,cAAc,EAAE,qBAAqB,IAAI,yBAAyB,EAAE,qBAAqB,IAAI;AACtG;AACA,SAAS,EAAE,GAAGA,IAAG;AACf,MAAIA,GAAE,yBAAyB;AAC7B,UAAM,IAAI,EAAEA,EAAC;AACb,WAAO,QAAQ,KAAK,EAAE,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,CAAC;AAAA,EAC3C;AACA,SAAO;AACT;AACA,SAAS,EAAE,GAAGA,IAAG;AACf,MAAIA,GAAG,KAAI,EAAE,CAAC,GAAG;AACf,UAAM,IAAI,EAAE,4BAA4BA,EAAC,GACvC,IAAI,IAAI,CAAC,GAAG;AACd,SAAK,EAAE,GAAG,CAAC;AAAA,EACb,MAAO,aAAY,EAAE,QAAQ,EAAE,GAAGA,EAAC;AACrC;AACA,SAAS,EAAE,GAAGA,IAAG;AACf,gBAAc,MAAMA,GAAE,WAAW,EAAE,EAAE,QAAQ,KAAK,SAAS,cAAc,MAAMA,GAAE,WAAW,EAAE,EAAE,QAAQ,KAAK;AAC/G;AACA,SAAS,EAAE,GAAGA,IAAG;AACf,MAAI,EAAE,GAAGA,EAAC,GAAGA,OAAMA,GAAE,KAAK,EAAE,IAAI,eAAe,MAAMA,GAAE,YAAY,EAAE,WAAW,aAAaA,GAAE,aAAa,OAAOA,GAAE,YAAYA,GAAE,UAAU,EAAE,EAAE,OAAO,KAAK,QAAQA,GAAE,QAAQ,EAAE,SAAS,SAASA,GAAE,aAAa,EAAE,SAAS,mBAAmB,KAAK,WAAW,EAAE,MAAO,KAAI,EAAE,CAAC,GAAG;AACjR,UAAM,IAAIA,GAAE;AACZ,UAAM,EAAE,aAAa,EAAE;AAAA,EACzB,MAAO,CAAAA,GAAE,aAAa,EAAE;AAC1B;AACA,SAAS,EAAE,GAAG,GAAGC,IAAG;AAClB,MAAI,CAAC,EAAE,mBAAoB,QAAO;AAClC,MAAI,EAAE,WAAW,MAAM,CAAC,EAAE,MAAO,QAAOA,IAAG,YAAYA,GAAE,SAAS,KAAK,IAAI,EAAE,qBAAqB,WAAW,EAAE,KAAK,KAAK,EAAE,EAAE,cAAc,EAAE,aAAa,yBAAyB;AAAA,IACjL,OAAO;AAAA,EACT,CAAC,CAAC,GAAG;AACL,MAAI,EAAE,CAAC,KAAK,CAAC,EAAE,QAAS,KAAI,EAAE;AAAA,WAAsB,EAAE,GAAGA,EAAC,GAAG;AAC3D,UAAM,IAAI,CAAC;AACX,WAAO,EAAE,MAAM,GAAGA,EAAC,IAAI,IAAI;AAAA,EAC7B;AACA,SAAO,QAAQ,KAAK,EAAE,GAAG,IAAI,EAAE,CAAC,CAAC,GAAG;AACtC;",
  "names": ["t", "o"]
}
