{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/layers/support/I3SIndexInfo.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport o from \"../../core/Error.js\";\nasync function r(r, n, t, s, a, i, l) {\n  let d = null;\n  if (null != t) {\n    const o = `${r}/nodepages/`,\n      n = o + Math.floor(t.rootIndex / t.nodesPerPage);\n    try {\n      return {\n        type: \"page\",\n        rootPage: (await e(n, {\n          query: {\n            f: \"json\",\n            ...s,\n            token: a\n          },\n          responseType: \"json\",\n          signal: l\n        })).data,\n        rootIndex: t.rootIndex,\n        pageSize: t.nodesPerPage,\n        lodMetric: t.lodSelectionMetricType,\n        urlPrefix: o\n      };\n    } catch (g) {\n      null != i && i.warn(\"#fetchIndexInfo()\", \"Failed to load root node page. Falling back to node documents.\", n, g), d = g;\n    }\n  }\n  if (!n) return null;\n  const p = n?.split(\"/\").pop(),\n    c = `${r}/nodes/`,\n    u = c + p;\n  try {\n    return {\n      type: \"node\",\n      rootNode: (await e(u, {\n        query: {\n          f: \"json\",\n          ...s,\n          token: a\n        },\n        responseType: \"json\",\n        signal: l\n      })).data,\n      urlPrefix: c\n    };\n  } catch (g) {\n    throw new o(\"sceneservice:root-node-missing\", \"Root node missing.\", {\n      pageError: d,\n      nodeError: g,\n      url: u\n    });\n  }\n}\nexport { r as fetchIndexInfo };"],
  "mappings": ";;;;;;;;;;;;;;AAMA,SAAe,EAAEA,IAAG,GAAG,GAAGC,IAAG,GAAG,GAAG,GAAG;AAAA;AACpC,QAAI,IAAI;AACR,QAAI,QAAQ,GAAG;AACb,YAAM,IAAI,GAAGD,EAAC,eACZE,KAAI,IAAI,KAAK,MAAM,EAAE,YAAY,EAAE,YAAY;AACjD,UAAI;AACF,eAAO;AAAA,UACL,MAAM;AAAA,UACN,WAAW,MAAM,EAAEA,IAAG;AAAA,YACpB,OAAO;AAAA,cACL,GAAG;AAAA,eACAD,KAFE;AAAA,cAGL,OAAO;AAAA,YACT;AAAA,YACA,cAAc;AAAA,YACd,QAAQ;AAAA,UACV,CAAC,GAAG;AAAA,UACJ,WAAW,EAAE;AAAA,UACb,UAAU,EAAE;AAAA,UACZ,WAAW,EAAE;AAAA,UACb,WAAW;AAAA,QACb;AAAA,MACF,SAAS,GAAG;AACV,gBAAQ,KAAK,EAAE,KAAK,qBAAqB,kEAAkEC,IAAG,CAAC,GAAG,IAAI;AAAA,MACxH;AAAA,IACF;AACA,QAAI,CAAC,EAAG,QAAO;AACf,UAAM,IAAI,GAAG,MAAM,GAAG,EAAE,IAAI,GAC1B,IAAI,GAAGF,EAAC,WACR,IAAI,IAAI;AACV,QAAI;AACF,aAAO;AAAA,QACL,MAAM;AAAA,QACN,WAAW,MAAM,EAAE,GAAG;AAAA,UACpB,OAAO;AAAA,YACL,GAAG;AAAA,aACAC,KAFE;AAAA,YAGL,OAAO;AAAA,UACT;AAAA,UACA,cAAc;AAAA,UACd,QAAQ;AAAA,QACV,CAAC,GAAG;AAAA,QACJ,WAAW;AAAA,MACb;AAAA,IACF,SAAS,GAAG;AACV,YAAM,IAAI,EAAE,kCAAkC,sBAAsB;AAAA,QAClE,WAAW;AAAA,QACX,WAAW;AAAA,QACX,KAAK;AAAA,MACP,CAAC;AAAA,IACH;AAAA,EACF;AAAA;",
  "names": ["r", "s", "n"]
}
