{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/imageutils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport \"../../../../../core/has.js\";\nimport e from \"../../../../../core/Error.js\";\nimport { throwIfAborted as t } from \"../../../../../core/promiseUtils.js\";\nimport { isDataProtocol as n, dataComponents as r } from \"../../../../../core/urlUtils.js\";\nfunction a(e) {\n  const t = m(e);\n  return null != t ? t.toDataURL() : \"\";\n}\nasync function i(n, r) {\n  const a = m(n);\n  if (null == a) throw new e(\"imageToArrayBuffer\", \"Unsupported image type\");\n  const i = o(n),\n    s = await new Promise(e => a.toBlob(e, i));\n  if (t(r), !s) throw new e(\"imageToArrayBuffer\", \"Failed to encode image\");\n  const c = await s.arrayBuffer();\n  return t(r), {\n    data: c,\n    type: i\n  };\n}\nfunction o(e) {\n  if (!(e instanceof HTMLImageElement)) return \"image/png\";\n  const t = e.src;\n  if (n(t)) {\n    const e = r(t);\n    return \"image/jpeg\" === e?.mediaType ? e.mediaType : \"image/png\";\n  }\n  return /\\.png$/i.test(t) ? \"image/png\" : /\\.(jpg|jpeg)$/i.test(t) ? \"image/jpeg\" : \"image/png\";\n}\nfunction m(e) {\n  if (e instanceof HTMLCanvasElement) return e;\n  if (e instanceof HTMLVideoElement) return null;\n  const t = document.createElement(\"canvas\");\n  t.width = e.width, t.height = e.height;\n  const n = t.getContext(\"2d\");\n  return e instanceof HTMLImageElement ? n.drawImage(e, 0, 0, e.width, e.height) : e instanceof ImageData && n.putImageData(e, 0, 0), t;\n}\nfunction s(e) {\n  const t = [],\n    n = new Uint8Array(e);\n  for (let r = 0; r < n.length; r++) t.push(String.fromCharCode(n[r]));\n  return \"data:application/octet-stream;base64,\" + btoa(t.join(\"\"));\n}\nfunction c(e) {\n  if (e.byteLength < 8) return !1;\n  const t = new Uint8Array(e);\n  return 137 === t[0] && 80 === t[1] && 78 === t[2] && 71 === t[3] && 13 === t[4] && 10 === t[5] && 26 === t[6] && 10 === t[7];\n}\nexport { s as encodeBase64DataUri, i as imageToArrayBuffer, a as imageToDataURI, m as imageTypeToCanvas, c as isArrayBufferPNG };"],
  "mappings": ";;;;;;;;;;;;;;;;AAQA,SAAS,EAAE,GAAG;AACZ,QAAM,IAAI,EAAE,CAAC;AACb,SAAO,QAAQ,IAAI,EAAE,UAAU,IAAI;AACrC;AACA,SAAe,EAAE,GAAG,GAAG;AAAA;AACrB,UAAMA,KAAI,EAAE,CAAC;AACb,QAAI,QAAQA,GAAG,OAAM,IAAI,EAAE,sBAAsB,wBAAwB;AACzE,UAAMC,KAAI,EAAE,CAAC,GACXC,KAAI,MAAM,IAAI,QAAQ,OAAKF,GAAE,OAAO,GAAGC,EAAC,CAAC;AAC3C,QAAIC,GAAE,CAAC,GAAG,CAACA,GAAG,OAAM,IAAI,EAAE,sBAAsB,wBAAwB;AACxE,UAAMC,KAAI,MAAMD,GAAE,YAAY;AAC9B,WAAOA,GAAE,CAAC,GAAG;AAAA,MACX,MAAMC;AAAA,MACN,MAAMF;AAAA,IACR;AAAA,EACF;AAAA;AACA,SAAS,EAAE,GAAG;AACZ,MAAI,EAAE,aAAa,kBAAmB,QAAO;AAC7C,QAAM,IAAI,EAAE;AACZ,MAAI,GAAE,CAAC,GAAG;AACR,UAAMG,KAAI,GAAE,CAAC;AACb,WAAO,iBAAiBA,IAAG,YAAYA,GAAE,YAAY;AAAA,EACvD;AACA,SAAO,UAAU,KAAK,CAAC,IAAI,cAAc,iBAAiB,KAAK,CAAC,IAAI,eAAe;AACrF;AACA,SAAS,EAAE,GAAG;AACZ,MAAI,aAAa,kBAAmB,QAAO;AAC3C,MAAI,aAAa,iBAAkB,QAAO;AAC1C,QAAM,IAAI,SAAS,cAAc,QAAQ;AACzC,IAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE;AAChC,QAAM,IAAI,EAAE,WAAW,IAAI;AAC3B,SAAO,aAAa,mBAAmB,EAAE,UAAU,GAAG,GAAG,GAAG,EAAE,OAAO,EAAE,MAAM,IAAI,aAAa,aAAa,EAAE,aAAa,GAAG,GAAG,CAAC,GAAG;AACtI;AACA,SAASF,GAAE,GAAG;AACZ,QAAM,IAAI,CAAC,GACT,IAAI,IAAI,WAAW,CAAC;AACtB,WAAS,IAAI,GAAG,IAAI,EAAE,QAAQ,IAAK,GAAE,KAAK,OAAO,aAAa,EAAE,CAAC,CAAC,CAAC;AACnE,SAAO,0CAA0C,KAAK,EAAE,KAAK,EAAE,CAAC;AAClE;AACA,SAAS,EAAE,GAAG;AACZ,MAAI,EAAE,aAAa,EAAG,QAAO;AAC7B,QAAM,IAAI,IAAI,WAAW,CAAC;AAC1B,SAAO,QAAQ,EAAE,CAAC,KAAK,OAAO,EAAE,CAAC,KAAK,OAAO,EAAE,CAAC,KAAK,OAAO,EAAE,CAAC,KAAK,OAAO,EAAE,CAAC,KAAK,OAAO,EAAE,CAAC,KAAK,OAAO,EAAE,CAAC,KAAK,OAAO,EAAE,CAAC;AAC7H;",
  "names": ["a", "i", "s", "c", "e"]
}
