{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/layers/CatalogDynamicGroupLayerView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../core/Collection.js\";\nimport { handlesGroup as t, makeHandle as s } from \"../../core/handleUtils.js\";\nimport i from \"../../core/Logger.js\";\nimport { debounce as a, ignoreAbortErrors as o } from \"../../core/promiseUtils.js\";\nimport { sqlAnd as n } from \"../../core/sql.js\";\nimport { property as d } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as p } from \"../../core/accessorSupport/decorators/subclass.js\";\nconst l = Symbol(),\n  u = u => {\n    let y = class extends u {\n      constructor() {\n        super(...arguments), this.layerViews = new r(), this._debouncedUpdate = a(async () => {\n          const {\n              layer: e,\n              parent: r\n            } = this,\n            t = r?.footprintLayerView;\n          let s = [];\n          const i = this._createQuery();\n          if (i && t) {\n            const {\n              features: r\n            } = await t.queryFeatures(i);\n            this.suspended || (s = r.map(r => e.acquireLayer(r)));\n          }\n          this.removeHandles(l), this.addHandles(s, l);\n        });\n      }\n      get creatingLayerViews() {\n        return this.view?.layerViewManager.isCreatingLayerViewsForLayer(this.layer) ?? !1;\n      }\n      isUpdating() {\n        return this.creatingLayerViews || this.layer.updating || this.layerViews.some(e => e.updating);\n      }\n      enableLayerUpdates() {\n        return t([this._updatingHandles.addWhen(() => !1 === this.parent?.footprintLayerView?.dataUpdating, () => this.updateLayers()), this._updatingHandles.add(() => [this.layer.maximumVisibleSublayers, this.layer.parent?.orderBy, this.parent?.footprintLayerView?.filter, this.parent?.footprintLayerView?.timeExtent, this.suspended], () => this.updateLayers()), s(() => this.removeHandles(l))]);\n      }\n      updateLayers() {\n        this.suspended ? this.removeHandles(l) : this._updatingHandles.addPromise(o(this._debouncedUpdate()).catch(e => {\n          i.getLogger(this).error(e);\n        }));\n      }\n      _createQuery() {\n        const e = this.parent?.footprintLayerView,\n          r = this.layer?.parent;\n        if (!e || !r || r.destroyed) return null;\n        const {\n          layer: {\n            maximumVisibleSublayers: t\n          },\n          view: {\n            scale: s\n          }\n        } = this;\n        if (!t) return null;\n        const {\n            itemTypeField: i,\n            itemSourceField: a,\n            itemNameField: o,\n            minScaleField: d,\n            maxScaleField: p,\n            objectIdField: l,\n            orderBy: u\n          } = r,\n          y = n(`${d} IS NULL OR ${s} <= ${d} OR ${d} = 0`, `${p} IS NULL OR ${s} >= ${p}`),\n          c = u?.find(e => e.field && !e.valueExpression),\n          m = e.createQuery();\n        if (m.returnGeometry = !1, m.num = t, m.outFields = [l, a, o], m.where = n(m.where, y), null != this.unsupportedItemTypes) {\n          const e = `${i} NOT IN (${this.unsupportedItemTypes.map(e => `'${e}'`)})`;\n          m.where = n(m.where, e);\n        }\n        return c?.field && (m.orderByFields = [`${c.field} ${\"descending\" === c.order ? \"DESC\" : \"ASC\"}`], m.outFields.push(c.field)), m;\n      }\n    };\n    return e([d({\n      readOnly: !0\n    })], y.prototype, \"creatingLayerViews\", null), e([d()], y.prototype, \"layer\", void 0), e([d()], y.prototype, \"layerViews\", void 0), e([d({\n      readOnly: !0\n    })], y.prototype, \"unsupportedItemTypes\", void 0), e([d()], y.prototype, \"parent\", void 0), e([d({\n      readOnly: !0\n    })], y.prototype, \"isUpdating\", null), y = e([p(\"esri.views.layers.CatalogDynamicGroupLayerView\")], y), y;\n  };\nexport { u as default };"],
  "mappings": "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",
  "names": ["u", "y", "e", "r", "a", "o", "d", "l", "n"]
}
