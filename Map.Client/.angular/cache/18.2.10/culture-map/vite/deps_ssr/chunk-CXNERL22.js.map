{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { urlToObject as e, getOrigin as r, removeTrailingSlash as t, removeQueryParameters as s, join as n, Url as l, makeAbsolute as i } from \"../../core/urlUtils.js\";\nimport { w as u } from \"../../chunks/persistableUrlUtils.js\";\nconst o = {\n    mapserver: \"MapServer\",\n    imageserver: \"ImageServer\",\n    featureserver: \"FeatureServer\",\n    knowledgegraphserver: \"KnowledgeGraphServer\",\n    sceneserver: \"SceneServer\",\n    streamserver: \"StreamServer\",\n    vectortileserver: \"VectorTileServer\",\n    \"3dtilesserver\": \"3DTilesServer\",\n    videoserver: \"VideoServer\"\n  },\n  a = Object.values(o),\n  c = new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`, \"i\"),\n  v = new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^/\\\\n]+)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`, \"i\"),\n  f = /(.*?)\\/(?:layers\\/)?(\\d+)\\/?$/i;\nfunction p(e) {\n  return c.test(e);\n}\nfunction d(r) {\n  if (null == r) return null;\n  const t = e(r),\n    s = t?.path.match(c) || t?.path.match(v);\n  if (!s) return null;\n  const [, n, l, i, u] = s,\n    a = l.indexOf(\"/\");\n  return {\n    title: m(-1 !== a ? l.slice(a + 1) : l),\n    serverType: o[i.toLowerCase()],\n    sublayer: null != u && \"\" !== u ? parseInt(u, 10) : null,\n    url: {\n      path: n\n    }\n  };\n}\nfunction h(r) {\n  const t = e(r).path.match(f);\n  return t ? {\n    serviceUrl: t[1],\n    sublayerId: Number(t[2])\n  } : null;\n}\nfunction m(e) {\n  return (e = e.replaceAll(/\\s*[/_]+\\s*/g, \" \"))[0].toUpperCase() + e.slice(1);\n}\nfunction w(e, r) {\n  const t = [];\n  if (e) {\n    const r = d(e);\n    null != r && r.title && t.push(r.title);\n  }\n  if (r) {\n    const e = m(r);\n    t.push(e);\n  }\n  if (2 === t.length) {\n    if (t[0].toLowerCase().includes(t[1].toLowerCase())) return t[0];\n    if (t[1].toLowerCase().includes(t[0].toLowerCase())) return t[1];\n  }\n  return t.join(\" - \");\n}\nfunction g(e) {\n  let t = r(e, !0);\n  return !!t && (t = t.toLowerCase(), t.endsWith(\".arcgis.com\") && (t.startsWith(\"services\") || t.startsWith(\"tiles\") || t.startsWith(\"features\")));\n}\nfunction y(e, r) {\n  return e ? t(s(e, r)) : e;\n}\nfunction S(r) {\n  let {\n    url: n\n  } = r;\n  if (!n) return {\n    url: n\n  };\n  n = s(n, r.logger);\n  const l = e(n),\n    i = d(l.path);\n  let u;\n  if (null != i) null != i.sublayer && null == r.layer.layerId && (u = i.sublayer), n = i.url.path;else if (r.nonStandardUrlAllowed) {\n    const e = h(l.path);\n    null != e && (n = e.serviceUrl, u = e.sublayerId);\n  }\n  return {\n    url: t(n),\n    layerId: u\n  };\n}\nfunction C(e, r, t, s, l) {\n  u(r, s, \"url\", l), s.url && null != e.layerId && (s.url = n(s.url, t, e.layerId.toString()));\n}\nfunction b(e) {\n  if (!e) return !1;\n  const r = e.toLowerCase(),\n    t = r.includes(\"/services/\"),\n    s = r.includes(\"/mapserver/wmsserver\"),\n    n = r.includes(\"/imageserver/wmsserver\"),\n    l = r.includes(\"/wmsserver\");\n  return t && (s || n || l);\n}\nfunction I(e) {\n  if (!e) return !1;\n  const r = new l(i(e)),\n    t = r.authority?.toLowerCase();\n  return \"server.arcgisonline.com\" === t || \"services.arcgisonline.com\" === t;\n}\nexport { m as cleanTitle, p as isArcGISUrl, g as isHostedAgolService, I as isServerOrServicesAGOLUrl, b as isWmsServer, d as parse, h as parseNonStandardSublayerUrl, y as sanitizeUrl, S as sanitizeUrlWithLayerId, a as serverTypes, w as titleFromUrlAndName, C as writeUrlWithLayerId };"],
  "mappings": ";;;;;;;;;;;;;;;AAMA,IAAM,IAAI;AAAA,EACN,WAAW;AAAA,EACX,aAAa;AAAA,EACb,eAAe;AAAA,EACf,sBAAsB;AAAA,EACtB,aAAa;AAAA,EACb,cAAc;AAAA,EACd,kBAAkB;AAAA,EAClB,iBAAiB;AAAA,EACjB,aAAa;AACf;AAVF,IAWE,IAAI,OAAO,OAAO,CAAC;AAXrB,IAYE,IAAI,IAAI,OAAO,0DAA0D,EAAE,KAAK,GAAG,CAAC,kCAAkC,GAAG;AAZ3H,IAaE,IAAI,IAAI,OAAO,6CAA6C,EAAE,KAAK,GAAG,CAAC,kCAAkC,GAAG;AAb9G,IAcE,IAAI;AACN,SAAS,EAAE,GAAG;AACZ,SAAO,EAAE,KAAK,CAAC;AACjB;AACA,SAAS,EAAE,GAAG;AACZ,MAAI,QAAQ,EAAG,QAAO;AACtB,QAAM,IAAI,EAAE,CAAC,GACX,IAAI,GAAG,KAAK,MAAM,CAAC,KAAK,GAAG,KAAK,MAAM,CAAC;AACzC,MAAI,CAAC,EAAG,QAAO;AACf,QAAM,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,IAAI,GACrBA,KAAI,EAAE,QAAQ,GAAG;AACnB,SAAO;AAAA,IACL,OAAO,EAAE,OAAOA,KAAI,EAAE,MAAMA,KAAI,CAAC,IAAI,CAAC;AAAA,IACtC,YAAY,EAAE,EAAE,YAAY,CAAC;AAAA,IAC7B,UAAU,QAAQ,KAAK,OAAO,IAAI,SAAS,GAAG,EAAE,IAAI;AAAA,IACpD,KAAK;AAAA,MACH,MAAM;AAAA,IACR;AAAA,EACF;AACF;AACA,SAASC,GAAE,GAAG;AACZ,QAAM,IAAI,EAAE,CAAC,EAAE,KAAK,MAAM,CAAC;AAC3B,SAAO,IAAI;AAAA,IACT,YAAY,EAAE,CAAC;AAAA,IACf,YAAY,OAAO,EAAE,CAAC,CAAC;AAAA,EACzB,IAAI;AACN;AACA,SAAS,EAAE,GAAG;AACZ,UAAQ,IAAI,EAAE,WAAW,gBAAgB,GAAG,GAAG,CAAC,EAAE,YAAY,IAAI,EAAE,MAAM,CAAC;AAC7E;AACA,SAAS,EAAE,GAAG,GAAG;AACf,QAAM,IAAI,CAAC;AACX,MAAI,GAAG;AACL,UAAMC,KAAI,EAAE,CAAC;AACb,YAAQA,MAAKA,GAAE,SAAS,EAAE,KAAKA,GAAE,KAAK;AAAA,EACxC;AACA,MAAI,GAAG;AACL,UAAMC,KAAI,EAAE,CAAC;AACb,MAAE,KAAKA,EAAC;AAAA,EACV;AACA,MAAI,MAAM,EAAE,QAAQ;AAClB,QAAI,EAAE,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,EAAE,YAAY,CAAC,EAAG,QAAO,EAAE,CAAC;AAC/D,QAAI,EAAE,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,EAAE,YAAY,CAAC,EAAG,QAAO,EAAE,CAAC;AAAA,EACjE;AACA,SAAO,EAAE,KAAK,KAAK;AACrB;AACA,SAAS,EAAE,GAAG;AACZ,MAAI,IAAI,EAAE,GAAG,IAAE;AACf,SAAO,CAAC,CAAC,MAAM,IAAI,EAAE,YAAY,GAAG,EAAE,SAAS,aAAa,MAAM,EAAE,WAAW,UAAU,KAAK,EAAE,WAAW,OAAO,KAAK,EAAE,WAAW,UAAU;AAChJ;AACA,SAAS,EAAE,GAAG,GAAG;AACf,SAAO,IAAI,GAAE,GAAE,GAAG,CAAC,CAAC,IAAI;AAC1B;AACA,SAAS,EAAE,GAAG;AACZ,MAAI;AAAA,IACF,KAAK;AAAA,EACP,IAAI;AACJ,MAAI,CAAC,EAAG,QAAO;AAAA,IACb,KAAK;AAAA,EACP;AACA,MAAI,GAAE,GAAG,EAAE,MAAM;AACjB,QAAM,IAAI,EAAE,CAAC,GACX,IAAI,EAAE,EAAE,IAAI;AACd,MAAI;AACJ,MAAI,QAAQ,EAAG,SAAQ,EAAE,YAAY,QAAQ,EAAE,MAAM,YAAY,IAAI,EAAE,WAAW,IAAI,EAAE,IAAI;AAAA,WAAc,EAAE,uBAAuB;AACjI,UAAM,IAAIF,GAAE,EAAE,IAAI;AAClB,YAAQ,MAAM,IAAI,EAAE,YAAY,IAAI,EAAE;AAAA,EACxC;AACA,SAAO;AAAA,IACL,KAAK,GAAE,CAAC;AAAA,IACR,SAAS;AAAA,EACX;AACF;AACA,SAAS,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG;AACxB,IAAE,GAAG,GAAG,OAAO,CAAC,GAAG,EAAE,OAAO,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAE,EAAE,KAAK,GAAG,EAAE,QAAQ,SAAS,CAAC;AAC5F;AACA,SAAS,EAAE,GAAG;AACZ,MAAI,CAAC,EAAG,QAAO;AACf,QAAM,IAAI,EAAE,YAAY,GACtB,IAAI,EAAE,SAAS,YAAY,GAC3B,IAAI,EAAE,SAAS,sBAAsB,GACrC,IAAI,EAAE,SAAS,wBAAwB,GACvC,IAAI,EAAE,SAAS,YAAY;AAC7B,SAAO,MAAM,KAAK,KAAK;AACzB;AACA,SAASG,GAAE,GAAG;AACZ,MAAI,CAAC,EAAG,QAAO;AACf,QAAM,IAAI,IAAI,EAAE,EAAE,CAAC,CAAC,GAClB,IAAI,EAAE,WAAW,YAAY;AAC/B,SAAO,8BAA8B,KAAK,gCAAgC;AAC5E;",
  "names": ["a", "h", "r", "e", "I"]
}
