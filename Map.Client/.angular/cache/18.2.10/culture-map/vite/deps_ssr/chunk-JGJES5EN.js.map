{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/interactive/support/utils.js", "../../../../../../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { pt2px as o } from \"../../../core/screenUtils.js\";\nfunction s(s) {\n  let t = 0,\n    a = 0,\n    e = 0;\n  return s ? (\"cim\" === s.type && s.data.symbol && \"symbolLayers\" in s.data.symbol && s.data.symbol.symbolLayers && s.data.symbol.symbolLayers.map(o => {\n    \"CIMVectorMarker\" === o.type && o.anchorPoint && (Math.abs(o.anchorPoint.x) > t && (t = o.anchorPoint.x), Math.abs(o.anchorPoint.y) > a && (a = o.anchorPoint.y), null != o.size && o.size > e && (e = o.size));\n  }), t = o(t), a = o(a), e = o(e), {\n    offsetX: t,\n    offsetY: a,\n    size: e\n  }) : {\n    offsetX: t,\n    offsetY: a,\n    size: e\n  };\n}\nexport { s as getSymbolInfo };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../core/Accessor.js\";\nimport o from \"../../core/Evented.js\";\nimport { watch as i, sync as s } from \"../../core/reactiveUtils.js\";\nimport { screenPointObjectToArray as r, pt2px as l, createScreenPointArray as n } from \"../../core/screenUtils.js\";\nimport { property as a } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as c } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { squaredDistance as h } from \"../../core/libs/gl-matrix-2/math/vec2.js\";\nimport { p } from \"../../chunks/vec32.js\";\nimport { create as m } from \"../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { canProjectWithoutEngine as u, project as y } from \"../../geometry/projection.js\";\nimport { projectPointToVector as g } from \"../../geometry/projection/projectPointToVector.js\";\nimport { getGraphicEffectiveElevationMode as b } from \"../../support/elevationInfoUtils.js\";\nimport { getDefaultSymbol2D as d } from \"../../symbols/support/defaults.js\";\nimport f from \"../../symbols/support/ElevationInfo.js\";\nimport { getSymbolInfo as _ } from \"./support/utils.js\";\nimport { intersectsDrapedGeometry as v } from \"../support/drapedUtils.js\";\nlet S = class extends e {\n  set graphic(t) {\n    this._circleCollisionCache = null, this._originalSymbol = t.symbol, this._set(\"graphic\", t), this.attachSymbolChanged();\n  }\n  get elevationInfo() {\n    const {\n        layer: t\n      } = this.graphic,\n      e = t && \"elevationInfo\" in t ? t.elevationInfo : null,\n      o = b(this.graphic),\n      i = e ? e.offset : 0;\n    return new f({\n      mode: o,\n      offset: i\n    });\n  }\n  set focusedSymbol(t) {\n    t !== this._get(\"focusedSymbol\") && (this._set(\"focusedSymbol\", t), this._updateGraphicSymbol(), this._circleCollisionCache = null);\n  }\n  grabbableForEvent() {\n    return !0;\n  }\n  set grabbing(t) {\n    t !== this._get(\"grabbing\") && (this._set(\"grabbing\", t), this._updateGraphicSymbol());\n  }\n  set hovering(t) {\n    t !== this._get(\"hovering\") && (this._set(\"hovering\", t), this._updateGraphicSymbol());\n  }\n  set selected(t) {\n    t !== this._get(\"selected\") && (this._set(\"selected\", t), this._updateGraphicSymbol(), this.events.emit(\"select-changed\", {\n      action: t ? \"select\" : \"deselect\"\n    }));\n  }\n  get _focused() {\n    return this._get(\"hovering\") || this._get(\"grabbing\");\n  }\n  constructor(t) {\n    super(t), this.layer = null, this.interactive = !0, this.selectable = !1, this.grabbable = !0, this.dragging = !1, this.cursor = null, this.consumesClicks = !0, this.events = new o.EventEmitter(), this._circleCollisionCache = null, this._graphicSymbolChangedHandle = null, this._originalSymbol = null;\n  }\n  destroy() {\n    this.detachSymbolChanged(), this._resetGraphicSymbol(), this._set(\"view\", null);\n  }\n  intersectionDistance(t) {\n    const e = this.graphic;\n    if (!1 === e.visible) return null;\n    const o = e.geometry;\n    if (null == o) return null;\n    const i = this._get(\"focusedSymbol\"),\n      s = null != i ? i : e.symbol;\n    return \"2d\" === this.view.type ? this._intersectDistance2D(this.view, t, o, s) : this._intersectDistance3D(this.view, t, e);\n  }\n  attach() {\n    this.attachSymbolChanged(), null != this.layer && this.layer.add(this.graphic);\n  }\n  detach() {\n    this.detachSymbolChanged(), this._resetGraphicSymbol(), null != this.layer && this.layer.remove(this.graphic);\n  }\n  attachSymbolChanged() {\n    this.detachSymbolChanged(), this._graphicSymbolChangedHandle = i(() => this.graphic?.symbol, t => {\n      null != t && t !== this.focusedSymbol && t !== this._originalSymbol && (this._originalSymbol = t, this._focused && null != this.focusedSymbol && (this.graphic.symbol = this.focusedSymbol));\n    }, s);\n  }\n  detachSymbolChanged() {\n    null != this._graphicSymbolChangedHandle && (this._graphicSymbolChangedHandle.remove(), this._graphicSymbolChangedHandle = null);\n  }\n  onElevationChange() {}\n  onViewChange() {}\n  _updateGraphicSymbol() {\n    this.graphic.symbol = this._focused && null != this.focusedSymbol ? this.focusedSymbol : this._originalSymbol;\n  }\n  _resetGraphicSymbol() {\n    this.graphic.symbol = this._originalSymbol;\n  }\n  _intersectDistance2D(t, e, o, i) {\n    if (null == (i = i || d(o))) return null;\n    const s = 1;\n    let n = this._circleCollisionCache;\n    if (\"point\" === o.type && \"cim\" === i.type && \"CIMPointSymbol\" === i.data.symbol?.type && i.data.symbol.symbolLayers) {\n      const {\n          offsetX: l,\n          offsetY: n,\n          size: a\n        } = _(i),\n        c = r(e, j),\n        p = a / 2,\n        m = t.toScreen(o),\n        u = m.x + l,\n        y = m.y + n;\n      return h(c, [u, y]) < p * p ? s : null;\n    }\n    if (\"point\" !== o.type || \"simple-marker\" !== i.type) return v(e, o, t) ? s : null;\n    if (null == n || !n.originalPoint.equals(o)) {\n      const e = o,\n        s = t.spatialReference;\n      if (u(e.spatialReference, s)) {\n        const t = y(e, s);\n        n = {\n          originalPoint: e.clone(),\n          mapPoint: t,\n          radiusPx: l(i.size)\n        }, this._circleCollisionCache = n;\n      }\n    }\n    if (null != n) {\n      const o = r(e, j),\n        a = t.toScreen?.(n.mapPoint);\n      if (!a) return null;\n      const c = n.radiusPx,\n        p = a.x + l(i.xoffset),\n        m = a.y - l(i.yoffset);\n      return h(o, [p, m]) < c * c ? s : null;\n    }\n    return null;\n  }\n  _intersectDistance3D(t, e, o) {\n    const i = t.toMap(e, {\n      include: [o]\n    });\n    return i && g(i, C, t.renderSpatialReference) ? p(C, t.state.camera.eye) : null;\n  }\n};\nt([a({\n  constructOnly: !0,\n  nonNullable: !0\n})], S.prototype, \"graphic\", null), t([a()], S.prototype, \"elevationInfo\", null), t([a({\n  constructOnly: !0,\n  nonNullable: !0\n})], S.prototype, \"view\", void 0), t([a({\n  value: null\n})], S.prototype, \"focusedSymbol\", null), t([a({\n  constructOnly: !0\n})], S.prototype, \"layer\", void 0), t([a()], S.prototype, \"interactive\", void 0), t([a()], S.prototype, \"selectable\", void 0), t([a()], S.prototype, \"grabbable\", void 0), t([a({\n  value: !1\n})], S.prototype, \"grabbing\", null), t([a()], S.prototype, \"dragging\", void 0), t([a()], S.prototype, \"hovering\", null), t([a({\n  value: !1\n})], S.prototype, \"selected\", null), t([a()], S.prototype, \"cursor\", void 0), S = t([c(\"esri.views.interactive.GraphicManipulator\")], S);\nconst C = m(),\n  j = n();\nexport { S as GraphicManipulator };"],
  "mappings": "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",
  "names": ["s", "a", "e", "o", "S", "e", "o", "i", "s", "J", "n", "l", "a", "c", "d", "u", "y", "t", "C"]
}
