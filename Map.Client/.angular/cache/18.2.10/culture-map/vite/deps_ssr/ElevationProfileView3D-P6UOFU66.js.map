{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/InputRepresentation3D.js", "../../../../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/ProfileLines3D.js", "../../../../../../node_modules/@arcgis/core/widgets/ElevationProfile/support/ElevationProfileView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { createTask as e } from \"../../../core/asyncUtils.js\";\nimport { destroyHandle as i, handlesGroup as t } from \"../../../core/handleUtils.js\";\nimport { abortMaybe as s, removeMaybe as l } from \"../../../core/maybe.js\";\nimport { throwIfAborted as r } from \"../../../core/promiseUtils.js\";\nimport { watch as a } from \"../../../core/reactiveUtils.js\";\nimport { getGraphicEffectiveElevationInfo as h } from \"../../../support/elevationInfoUtils.js\";\nimport { Settings as n } from \"../../../views/3d/interactive/editingTools/settings.js\";\nimport { OutlineVisualElement as o } from \"../../../views/3d/interactive/visualElements/OutlineVisualElement.js\";\nimport { GraphicState as m } from \"../../../views/3d/layers/graphics/GraphicState.js\";\nimport { RenderOccludedFlag as g } from \"../../../views/3d/webgl-engine/lib/Material.js\";\nimport { highlightsSupported as c } from \"../../../views/support/layerViewUtils.js\";\nclass p {\n  constructor(e) {\n    this._params = e, this._highlightTask = null, this._highlightHandle = null, this._visualElementHandle = null, this._settings = new n({\n      getTheme: () => this._params.view.effectiveTheme\n    });\n  }\n  destroy() {\n    this.remove();\n  }\n  remove() {\n    this._highlightTask = s(this._highlightTask), this._highlightHandle = l(this._highlightHandle), this._visualElementHandle = l(this._visualElementHandle);\n  }\n  showHighlight(i) {\n    if (this.remove(), null == i || !u(i)) return;\n    const t = i.layer;\n    this._highlightTask = e(async e => {\n      const s = await this._params.view.whenLayerView(t);\n      r(e), c(s) && (this._highlightHandle = s.highlight(i));\n    });\n  }\n  showReshaping(e) {\n    if (this.remove(), null == e) return;\n    const s = this._params.view,\n      l = new o({\n        view: s,\n        geometry: u(e) ? e.geometry : null,\n        attached: !1,\n        elevationInfo: h(e),\n        renderOccluded: g.OccludeAndTransparentStencil,\n        isDecoration: !0\n      }),\n      r = new m({\n        graphic: e\n      }),\n      n = [a(() => r.isDraped, e => {\n        l.isDraped = e;\n      }), r.on(\"changed\", () => {\n        l.geometry = u(e) ? e.geometry : null;\n      }), s.trackGraphicState(r), s.maskOccludee(e), i(l)];\n    this._settings.visualElements.lineObjects.outline.apply(l), l.attached = !0, this._visualElementHandle = t(n);\n  }\n}\nfunction u(e) {\n  return null != e.geometry && \"polyline\" === e.geometry.type;\n}\nexport { p as InputRepresentation3D };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Color.js\";\nimport o from \"../../../core/Accessor.js\";\nimport { watch as r, syncAndInitial as s } from \"../../../core/reactiveUtils.js\";\nimport { throttle as i } from \"../../../core/throttle.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/RandomLCG.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { fromArray as n } from \"../../../core/libs/gl-matrix-2/factories/vec4f64.js\";\nimport c from \"../../../geometry/Polyline.js\";\nimport { OutlineVisualElement as m } from \"../../../views/3d/interactive/visualElements/OutlineVisualElement.js\";\nimport { getConfig as p } from \"./constants.js\";\nconst h = 100;\nlet f = class extends o {\n  constructor(e) {\n    super(e), this._chartData = null, this._visualElements = [];\n  }\n  initialize() {\n    const e = i(e => {\n      this._update(e);\n    }, h);\n    this.addHandles([r(() => ({\n      spatialReference: this.view.spatialReference,\n      chartData: this._chartData\n    }), e, s), e]);\n  }\n  destroy() {\n    this._destroyVisualElements();\n  }\n  remove() {\n    this._destroyVisualElements();\n  }\n  update(e) {\n    this._chartData = e;\n  }\n  _update(e) {\n    const {\n      chartData: o\n    } = e;\n    if (null == o) return this.remove();\n    if (!o.refined) return;\n    const r = this._visualElements,\n      s = o.lines.filter(e => e.viewVisualizationEnabled),\n      i = s.length;\n    for (; r.length > i;) r.pop().destroy();\n    const l = p().profileLinesStyle3D;\n    for (; r.length < i;) {\n      const e = new m({\n        view: this.view,\n        elevationInfo: {\n          mode: \"absolute-height\",\n          offset: 0\n        },\n        innerWidth: l.width - l.outlineSize,\n        width: l.width,\n        falloff: l.falloff,\n        color: l.outlineColor,\n        renderOccluded: l.renderOccluded,\n        isDecoration: !0\n      });\n      r.push(e);\n    }\n    const a = e.spatialReference;\n    for (let c = 0; c < i; ++c) {\n      const e = r[c],\n        o = s[i - 1 - c];\n      e.geometry = this._createLineGeometry(o, a), e.innerColor = n(t.toUnitRGBA(o.color));\n    }\n  }\n  _createLineGeometry(e, t) {\n    const o = e.samples ?? [],\n      r = o.length - 1,\n      s = [];\n    let i = [];\n    for (let l = 0; l <= r; l++) {\n      const {\n        x: e,\n        y: t,\n        z: a\n      } = o[l];\n      null != a && i.push([e, t, a]), l !== r && null != a || !i.length || (s.push(i), i = []);\n    }\n    return new c({\n      paths: s,\n      hasZ: !0,\n      spatialReference: t\n    });\n  }\n  _destroyVisualElements() {\n    this._visualElements.forEach(e => e.destroy()), this._visualElements.length = 0;\n  }\n};\ne([l()], f.prototype, \"view\", void 0), e([l()], f.prototype, \"_chartData\", void 0), f = e([a(\"esri.widgets.ElevationProfile.support.ProfileLines3D\")], f);\nexport { f as ProfileLines3D };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Handles.js\";\nimport { destroyMaybe as t } from \"../../../core/maybe.js\";\nimport { watch as i, syncAndInitial as o } from \"../../../core/reactiveUtils.js\";\nimport { ElevationProfileState as s } from \"./constants.js\";\nimport { HoveredPoints as n } from \"./HoveredPoints.js\";\nimport { InputRepresentation3D as r } from \"./InputRepresentation3D.js\";\nimport { ProfileLines3D as h } from \"./ProfileLines3D.js\";\nclass p {\n  constructor(t, s) {\n    this._handles = new e(), this._inputRepresentation = new r({\n      view: t\n    }), this._hoveredPoints = new n({\n      view: t\n    }), this._profileLines = new h({\n      view: t\n    }), this._handles.add([i(() => s.viewModel.hoveredPoints, e => this._hoveredPoints.update(e), o), i(() => {\n      const {\n          state: e,\n          editable: t,\n          highlightEnabled: i,\n          viewModel: o\n        } = s,\n        n = o.input;\n      return n && (n.commitProperty(\"geometry\"), n.commitProperty(\"layer\")), {\n        input: n,\n        state: e,\n        editable: t,\n        highlightEnabled: i\n      };\n    }, e => this._updateInputRepresentation(e), o), i(() => s.viewModel.chartData, e => this._profileLines.update(e), o), i(() => s.viewModel.input?.geometry, () => {\n      this._profileLines.remove();\n    }, o)]);\n  }\n  destroy() {\n    this._handles = t(this._handles), this._inputRepresentation = t(this._inputRepresentation), this._hoveredPoints = t(this._hoveredPoints), this._profileLines = t(this._profileLines);\n  }\n  _updateInputRepresentation({\n    input: e,\n    state: t,\n    editable: i,\n    highlightEnabled: o\n  }) {\n    const n = this._inputRepresentation;\n    if (!o) return n.remove();\n    t === s.Selected ? n.showHighlight(e) : t !== s.Created || i ? n.remove() : n.showReshaping(e);\n  }\n}\nexport { p as ElevationProfileView3D };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA,IAAM,IAAN,MAAQ;AAAA,EACN,YAAYA,IAAG;AACb,SAAK,UAAUA,IAAG,KAAK,iBAAiB,MAAM,KAAK,mBAAmB,MAAM,KAAK,uBAAuB,MAAM,KAAK,YAAY,IAAI,EAAE;AAAA,MACnI,UAAU,MAAM,KAAK,QAAQ,KAAK;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EACA,UAAU;AACR,SAAK,OAAO;AAAA,EACd;AAAA,EACA,SAAS;AACP,SAAK,iBAAiB,EAAE,KAAK,cAAc,GAAG,KAAK,mBAAmB,EAAE,KAAK,gBAAgB,GAAG,KAAK,uBAAuB,EAAE,KAAK,oBAAoB;AAAA,EACzJ;AAAA,EACA,cAAc,GAAG;AACf,QAAI,KAAK,OAAO,GAAG,QAAQ,KAAK,CAACC,GAAE,CAAC,EAAG;AACvC,UAAMC,KAAI,EAAE;AACZ,SAAK,iBAAiB,EAAE,CAAMF,OAAK;AACjC,YAAMG,KAAI,MAAM,KAAK,QAAQ,KAAK,cAAcD,EAAC;AACjD,QAAEF,EAAC,GAAG,EAAEG,EAAC,MAAM,KAAK,mBAAmBA,GAAE,UAAU,CAAC;AAAA,IACtD,EAAC;AAAA,EACH;AAAA,EACA,cAAcH,IAAG;AACf,QAAI,KAAK,OAAO,GAAG,QAAQA,GAAG;AAC9B,UAAMG,KAAI,KAAK,QAAQ,MACrBC,KAAI,IAAI,EAAE;AAAA,MACR,MAAMD;AAAA,MACN,UAAUF,GAAED,EAAC,IAAIA,GAAE,WAAW;AAAA,MAC9B,UAAU;AAAA,MACV,eAAeK,GAAEL,EAAC;AAAA,MAClB,gBAAgB,EAAE;AAAA,MAClB,cAAc;AAAA,IAChB,CAAC,GACDM,KAAI,IAAIN,GAAE;AAAA,MACR,SAASA;AAAA,IACX,CAAC,GACDO,KAAI,CAACC,GAAE,MAAMF,GAAE,UAAU,CAAAN,OAAK;AAC5B,MAAAI,GAAE,WAAWJ;AAAA,IACf,CAAC,GAAGM,GAAE,GAAG,WAAW,MAAM;AACxB,MAAAF,GAAE,WAAWH,GAAED,EAAC,IAAIA,GAAE,WAAW;AAAA,IACnC,CAAC,GAAGG,GAAE,kBAAkBG,EAAC,GAAGH,GAAE,aAAaH,EAAC,GAAGI,GAAEA,EAAC,CAAC;AACrD,SAAK,UAAU,eAAe,YAAY,QAAQ,MAAMA,EAAC,GAAGA,GAAE,WAAW,MAAI,KAAK,uBAAuB,EAAEG,EAAC;AAAA,EAC9G;AACF;AACA,SAASN,GAAED,IAAG;AACZ,SAAO,QAAQA,GAAE,YAAY,eAAeA,GAAE,SAAS;AACzD;;;ACzCA,IAAMS,KAAI;AACV,IAAI,IAAI,cAAc,EAAE;AAAA,EACtB,YAAYC,IAAG;AACb,UAAMA,EAAC,GAAG,KAAK,aAAa,MAAM,KAAK,kBAAkB,CAAC;AAAA,EAC5D;AAAA,EACA,aAAa;AACX,UAAMA,KAAIA,GAAE,CAAAA,OAAK;AACf,WAAK,QAAQA,EAAC;AAAA,IAChB,GAAGD,EAAC;AACJ,SAAK,WAAW,CAACE,GAAE,OAAO;AAAA,MACxB,kBAAkB,KAAK,KAAK;AAAA,MAC5B,WAAW,KAAK;AAAA,IAClB,IAAID,IAAG,CAAC,GAAGA,EAAC,CAAC;AAAA,EACf;AAAA,EACA,UAAU;AACR,SAAK,uBAAuB;AAAA,EAC9B;AAAA,EACA,SAAS;AACP,SAAK,uBAAuB;AAAA,EAC9B;AAAA,EACA,OAAOA,IAAG;AACR,SAAK,aAAaA;AAAA,EACpB;AAAA,EACA,QAAQA,IAAG;AACT,UAAM;AAAA,MACJ,WAAWE;AAAA,IACb,IAAIF;AACJ,QAAI,QAAQE,GAAG,QAAO,KAAK,OAAO;AAClC,QAAI,CAACA,GAAE,QAAS;AAChB,UAAMC,KAAI,KAAK,iBACbC,KAAIF,GAAE,MAAM,OAAO,CAAAF,OAAKA,GAAE,wBAAwB,GAClD,IAAII,GAAE;AACR,WAAOD,GAAE,SAAS,IAAI,CAAAA,GAAE,IAAI,EAAE,QAAQ;AACtC,UAAME,KAAIF,GAAE,EAAE;AACd,WAAOA,GAAE,SAAS,KAAI;AACpB,YAAMH,KAAI,IAAI,EAAE;AAAA,QACd,MAAM,KAAK;AAAA,QACX,eAAe;AAAA,UACb,MAAM;AAAA,UACN,QAAQ;AAAA,QACV;AAAA,QACA,YAAYK,GAAE,QAAQA,GAAE;AAAA,QACxB,OAAOA,GAAE;AAAA,QACT,SAASA,GAAE;AAAA,QACX,OAAOA,GAAE;AAAA,QACT,gBAAgBA,GAAE;AAAA,QAClB,cAAc;AAAA,MAChB,CAAC;AACD,MAAAF,GAAE,KAAKH,EAAC;AAAA,IACV;AACA,UAAMM,KAAIN,GAAE;AACZ,aAAS,IAAI,GAAG,IAAI,GAAG,EAAE,GAAG;AAC1B,YAAMA,KAAIG,GAAE,CAAC,GACXD,KAAIE,GAAE,IAAI,IAAI,CAAC;AACjB,MAAAJ,GAAE,WAAW,KAAK,oBAAoBE,IAAGI,EAAC,GAAGN,GAAE,aAAaA,GAAEO,GAAE,WAAWL,GAAE,KAAK,CAAC;AAAA,IACrF;AAAA,EACF;AAAA,EACA,oBAAoBF,IAAGQ,IAAG;AACxB,UAAMN,KAAIF,GAAE,WAAW,CAAC,GACtBG,KAAID,GAAE,SAAS,GACfE,KAAI,CAAC;AACP,QAAI,IAAI,CAAC;AACT,aAASC,KAAI,GAAGA,MAAKF,IAAGE,MAAK;AAC3B,YAAM;AAAA,QACJ,GAAGL;AAAA,QACH,GAAGQ;AAAA,QACH,GAAGF;AAAA,MACL,IAAIJ,GAAEG,EAAC;AACP,cAAQC,MAAK,EAAE,KAAK,CAACN,IAAGQ,IAAGF,EAAC,CAAC,GAAGD,OAAMF,MAAK,QAAQG,MAAK,CAAC,EAAE,WAAWF,GAAE,KAAK,CAAC,GAAG,IAAI,CAAC;AAAA,IACxF;AACA,WAAO,IAAI,EAAE;AAAA,MACX,OAAOA;AAAA,MACP,MAAM;AAAA,MACN,kBAAkBI;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EACA,yBAAyB;AACvB,SAAK,gBAAgB,QAAQ,CAAAR,OAAKA,GAAE,QAAQ,CAAC,GAAG,KAAK,gBAAgB,SAAS;AAAA,EAChF;AACF;AACAA,GAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,QAAQ,MAAM,GAAGA,GAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,cAAc,MAAM,GAAG,IAAIA,GAAE,CAAC,EAAE,sDAAsD,CAAC,GAAG,CAAC;;;ACvFxJ,IAAMS,KAAN,MAAQ;AAAA,EACN,YAAYC,IAAGC,IAAG;AAChB,SAAK,WAAW,IAAI,EAAE,GAAG,KAAK,uBAAuB,IAAI,EAAE;AAAA,MACzD,MAAMD;AAAA,IACR,CAAC,GAAG,KAAK,iBAAiB,IAAIE,GAAE;AAAA,MAC9B,MAAMF;AAAA,IACR,CAAC,GAAG,KAAK,gBAAgB,IAAI,EAAE;AAAA,MAC7B,MAAMA;AAAA,IACR,CAAC,GAAG,KAAK,SAAS,IAAI,CAACG,GAAE,MAAMF,GAAE,UAAU,eAAe,CAAAG,OAAK,KAAK,eAAe,OAAOA,EAAC,GAAG,CAAC,GAAGD,GAAE,MAAM;AACxG,YAAM;AAAA,QACF,OAAOC;AAAA,QACP,UAAUJ;AAAA,QACV,kBAAkB;AAAA,QAClB,WAAWK;AAAA,MACb,IAAIJ,IACJK,KAAID,GAAE;AACR,aAAOC,OAAMA,GAAE,eAAe,UAAU,GAAGA,GAAE,eAAe,OAAO,IAAI;AAAA,QACrE,OAAOA;AAAA,QACP,OAAOF;AAAA,QACP,UAAUJ;AAAA,QACV,kBAAkB;AAAA,MACpB;AAAA,IACF,GAAG,CAAAI,OAAK,KAAK,2BAA2BA,EAAC,GAAG,CAAC,GAAGD,GAAE,MAAMF,GAAE,UAAU,WAAW,CAAAG,OAAK,KAAK,cAAc,OAAOA,EAAC,GAAG,CAAC,GAAGD,GAAE,MAAMF,GAAE,UAAU,OAAO,UAAU,MAAM;AAC/J,WAAK,cAAc,OAAO;AAAA,IAC5B,GAAG,CAAC,CAAC,CAAC;AAAA,EACR;AAAA,EACA,UAAU;AACR,SAAK,WAAW,EAAE,KAAK,QAAQ,GAAG,KAAK,uBAAuB,EAAE,KAAK,oBAAoB,GAAG,KAAK,iBAAiB,EAAE,KAAK,cAAc,GAAG,KAAK,gBAAgB,EAAE,KAAK,aAAa;AAAA,EACrL;AAAA,EACA,2BAA2B;AAAA,IACzB,OAAOG;AAAA,IACP,OAAOJ;AAAA,IACP,UAAU;AAAA,IACV,kBAAkBK;AAAA,EACpB,GAAG;AACD,UAAMC,KAAI,KAAK;AACf,QAAI,CAACD,GAAG,QAAOC,GAAE,OAAO;AACxB,IAAAN,OAAM,EAAE,WAAWM,GAAE,cAAcF,EAAC,IAAIJ,OAAM,EAAE,WAAW,IAAIM,GAAE,OAAO,IAAIA,GAAE,cAAcF,EAAC;AAAA,EAC/F;AACF;",
  "names": ["e", "u", "t", "s", "l", "a", "r", "n", "d", "h", "e", "d", "o", "r", "s", "l", "a", "u", "t", "p", "t", "s", "a", "d", "e", "o", "n"]
}
