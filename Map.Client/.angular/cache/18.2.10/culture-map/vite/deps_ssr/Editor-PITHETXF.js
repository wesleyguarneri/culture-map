import { createRequire } from 'module';const require = createRequire(import.meta.url);
import {
  L as L4,
  k as k3,
  s as s9
} from "./chunk-ISIPDML5.js";
import "./chunk-MAPTCBQI.js";
import {
  pe
} from "./chunk-66F7E2ZC.js";
import {
  h as h7
} from "./chunk-YJ3POSXJ.js";
import "./chunk-BUA2HOYZ.js";
import {
  Y,
  Z,
  a as a5,
  n as n6,
  s as s8
} from "./chunk-QQ2ANQLR.js";
import "./chunk-MOS2AZCM.js";
import {
  F,
  h as h6,
  m as m4,
  o as o5,
  t as t2
} from "./chunk-SESO3P5F.js";
import "./chunk-JKNSHHXJ.js";
import "./chunk-IAY2Q5KW.js";
import {
  s as s7,
  t
} from "./chunk-LKON3V7U.js";
import {
  e as e10
} from "./chunk-JT2HZ7FY.js";
import "./chunk-5F4Q35S4.js";
import {
  e as e11
} from "./chunk-2RXZ22QZ.js";
import "./chunk-L2VTN5PI.js";
import {
  a as a4,
  l as l4
} from "./chunk-R3ALLGC4.js";
import "./chunk-7J24PH7A.js";
import {
  I as I3,
  c as c3,
  p as p3
} from "./chunk-IA5UKRA2.js";
import "./chunk-7HWP2QWI.js";
import "./chunk-DUZT23UA.js";
import "./chunk-CP2IGGT7.js";
import "./chunk-ZEZCWQFR.js";
import "./chunk-WXECQAUG.js";
import "./chunk-CATQ6UZ5.js";
import "./chunk-MIWJLMUG.js";
import "./chunk-MDOKECP3.js";
import "./chunk-IVVINOEJ.js";
import "./chunk-DUSY4H5O.js";
import "./chunk-XUM2DDAI.js";
import {
  e as e9
} from "./chunk-H5Z6ZNKP.js";
import "./chunk-2L7HC722.js";
import "./chunk-WQIJCG2D.js";
import "./chunk-JRL65HQ7.js";
import {
  h as h5,
  p as p2
} from "./chunk-DU4CPDF3.js";
import "./chunk-S5FY2EPM.js";
import {
  L as L3
} from "./chunk-XJ6YJASZ.js";
import "./chunk-AEX7USXS.js";
import {
  o as o4,
  r as r5
} from "./chunk-BZGBXDFF.js";
import {
  n as n5
} from "./chunk-LUORW76W.js";
import {
  _ as _2
} from "./chunk-62PN4TEW.js";
import "./chunk-OPXEKSUB.js";
import "./chunk-BGWWZY5C.js";
import {
  z
} from "./chunk-YJSSLMB3.js";
import "./chunk-TFJN5Q7A.js";
import {
  e as e8
} from "./chunk-5L5LGHM5.js";
import {
  e as e7,
  n as n4
} from "./chunk-XJ4XZPHY.js";
import "./chunk-LTKDZMRF.js";
import "./chunk-VQJITNCG.js";
import "./chunk-TZTWNLH5.js";
import "./chunk-GXX7GUFH.js";
import "./chunk-2ZELMUDG.js";
import {
  I as I2,
  y as y3
} from "./chunk-R3RRJKEI.js";
import {
  J,
  K
} from "./chunk-NDXKLAFE.js";
import "./chunk-YEDQK53F.js";
import "./chunk-WYPPXVX7.js";
import "./chunk-T2SCEBLQ.js";
import {
  e as e6
} from "./chunk-FYGR4X6I.js";
import "./chunk-GBPPBJPA.js";
import {
  h as h4
} from "./chunk-XP4RC2MQ.js";
import "./chunk-MXW2KGHZ.js";
import "./chunk-PZKTCBLJ.js";
import "./chunk-O7RCHW3H.js";
import "./chunk-5ZLERKFB.js";
import "./chunk-62NDSO75.js";
import {
  i as i5,
  l as l3,
  m as m3
} from "./chunk-NPUFNTAZ.js";
import "./chunk-HKAONIBH.js";
import "./chunk-H65MVS3B.js";
import {
  i as i4,
  u as u4
} from "./chunk-YT63GLYW.js";
import "./chunk-WS7U2AGS.js";
import "./chunk-U4NXHH3L.js";
import "./chunk-IQEF4U4C.js";
import "./chunk-B76NC7GX.js";
import "./chunk-EFLOBCAZ.js";
import {
  h as h3
} from "./chunk-HFXXFWYN.js";
import "./chunk-QRWQ6QBB.js";
import "./chunk-UZFXFPGS.js";
import "./chunk-BK3AMA5C.js";
import {
  v as v2
} from "./chunk-ZSJNH2BT.js";
import "./chunk-FJ3AI2QH.js";
import "./chunk-XUSZNRTW.js";
import "./chunk-W26QF64E.js";
import "./chunk-D3XX7CQS.js";
import "./chunk-D5ZVYTUT.js";
import "./chunk-MY2HOJQI.js";
import "./chunk-CAYYEMNX.js";
import "./chunk-6NY22YWY.js";
import "./chunk-JBJJW35I.js";
import "./chunk-PXTZCDRW.js";
import "./chunk-GVEKX2VV.js";
import "./chunk-MM5HQGRH.js";
import "./chunk-JA5GJ7PX.js";
import "./chunk-Q6OCJ3NG.js";
import "./chunk-DD6UQHSS.js";
import "./chunk-FALQTRQL.js";
import "./chunk-GGTDLTZW.js";
import "./chunk-2W7YKBRA.js";
import "./chunk-GLFGRGCP.js";
import "./chunk-WQZJGTGX.js";
import "./chunk-VFQA3B5S.js";
import "./chunk-NOH3NLJ5.js";
import "./chunk-LX5BT6XP.js";
import "./chunk-PLGJMWC5.js";
import "./chunk-UGFQYEND.js";
import "./chunk-XC5RDNAY.js";
import "./chunk-KXVPQVTB.js";
import "./chunk-ARN5GJBK.js";
import "./chunk-MPLS4PY6.js";
import "./chunk-AGBPYPP3.js";
import "./chunk-IKBXTTSU.js";
import "./chunk-VMZV7772.js";
import "./chunk-3FR2T2I2.js";
import "./chunk-LOZRWPGI.js";
import "./chunk-GZ64OOAB.js";
import "./chunk-WR2NVDOI.js";
import "./chunk-EPLJRYUV.js";
import "./chunk-VYRCS5VR.js";
import "./chunk-OOK3QTWF.js";
import "./chunk-VFYCIIDC.js";
import "./chunk-PQUZDC3L.js";
import "./chunk-UUQ5O7GK.js";
import "./chunk-6XY35LS7.js";
import "./chunk-T42EJVJR.js";
import "./chunk-D3QK4EV3.js";
import "./chunk-JTDKNK44.js";
import "./chunk-RR7OQLEK.js";
import "./chunk-ZFES27RA.js";
import "./chunk-XP2AJZUL.js";
import "./chunk-L6FG3WIC.js";
import "./chunk-6ZLH7XBS.js";
import "./chunk-44ZUWZXU.js";
import "./chunk-NAG6YX7T.js";
import "./chunk-WFNAKG2H.js";
import "./chunk-EKHRAAS6.js";
import {
  d as d4
} from "./chunk-IEB4ZCRH.js";
import "./chunk-7QOUHKW5.js";
import {
  s as s6
} from "./chunk-NHYYZMJR.js";
import "./chunk-WVSTX2NW.js";
import {
  l as l2
} from "./chunk-GNCXYHNE.js";
import "./chunk-2TNGEJGS.js";
import "./chunk-OYGNGIHQ.js";
import "./chunk-GSG4T2KM.js";
import "./chunk-BZHHBBFX.js";
import "./chunk-GK5M6FUR.js";
import "./chunk-YGAXDKHF.js";
import "./chunk-4TOSJLKR.js";
import "./chunk-EXPZNTF3.js";
import "./chunk-ORYC4PVJ.js";
import "./chunk-DXIKKLD7.js";
import "./chunk-VQNXE43R.js";
import "./chunk-VZ37C3ID.js";
import "./chunk-5R3HARKC.js";
import "./chunk-BKSTWG4S.js";
import "./chunk-FSG7HOZQ.js";
import "./chunk-Q5TIVVER.js";
import {
  n as n3,
  r as r4
} from "./chunk-ZPMUEGLK.js";
import {
  g
} from "./chunk-GNFDYYU3.js";
import "./chunk-X36BR2QB.js";
import "./chunk-RGG3YJQA.js";
import {
  h as h2,
  y as y2
} from "./chunk-GBJYL7OX.js";
import {
  a as a3,
  i as i3
} from "./chunk-GHKVDSKU.js";
import {
  d as d3
} from "./chunk-NVOJILW6.js";
import "./chunk-KYPTWEOO.js";
import "./chunk-WVFB3H4O.js";
import "./chunk-C7BQE556.js";
import "./chunk-ZREJ3Y2F.js";
import "./chunk-IR6CVPPC.js";
import "./chunk-BBUQOCRA.js";
import "./chunk-YBUJLIWZ.js";
import "./chunk-DL2B6IFJ.js";
import "./chunk-VOOO6FU5.js";
import "./chunk-IUPJR3FF.js";
import "./chunk-TGZW6QWO.js";
import "./chunk-OYIDHTXG.js";
import "./chunk-KUBMHTYA.js";
import "./chunk-42ZAWY2C.js";
import "./chunk-TVHVZK5G.js";
import "./chunk-P2MUOE6G.js";
import "./chunk-E5NWFBZG.js";
import "./chunk-FP37456K.js";
import "./chunk-VSQZQLTQ.js";
import "./chunk-K43CZ3M5.js";
import "./chunk-6EIBUVMG.js";
import "./chunk-S4XQLN73.js";
import "./chunk-XCCMILGI.js";
import "./chunk-NBJSAHZT.js";
import "./chunk-BD24XM4D.js";
import "./chunk-YCXNHEGB.js";
import "./chunk-CSATD3VX.js";
import "./chunk-NXXQ35YM.js";
import "./chunk-3BXPVUY5.js";
import "./chunk-LM3JDV4W.js";
import "./chunk-34V2CLL5.js";
import "./chunk-CXNERL22.js";
import {
  B as B2,
  O as O2,
  c as c2,
  k as k2,
  r as r3,
  x
} from "./chunk-7V4JSBFA.js";
import "./chunk-REIMIECM.js";
import "./chunk-EO2EW5KR.js";
import "./chunk-JEFPXTYT.js";
import "./chunk-MVS2BECH.js";
import "./chunk-UZ7IOCF3.js";
import "./chunk-OS542PQQ.js";
import "./chunk-3B5GODXR.js";
import "./chunk-NKXXHQDD.js";
import "./chunk-7TBQUMV3.js";
import "./chunk-TPLUZX3A.js";
import "./chunk-BGLJ2FAH.js";
import "./chunk-2EJFYNM7.js";
import "./chunk-DC5LRNPY.js";
import "./chunk-ASCK5HJ5.js";
import {
  m as m2
} from "./chunk-5X5U7R6O.js";
import "./chunk-XNLAOXPY.js";
import "./chunk-ZT7V2AVD.js";
import "./chunk-C2OXE4NQ.js";
import "./chunk-KOI252FF.js";
import {
  I2 as I,
  _2 as _,
  je
} from "./chunk-I2TVVMQ6.js";
import "./chunk-5EGQYY2H.js";
import "./chunk-JKPUNUQA.js";
import "./chunk-SR7PRON4.js";
import "./chunk-HGHPYGKP.js";
import "./chunk-4DSGTDZJ.js";
import {
  e as e5
} from "./chunk-VYTPFEL2.js";
import "./chunk-RLGDH6IY.js";
import "./chunk-MRPCXIVS.js";
import "./chunk-YTKVV2Y3.js";
import "./chunk-GCVQXAS4.js";
import "./chunk-UFQD6AL4.js";
import "./chunk-HEG4CVDM.js";
import {
  B,
  e2 as e4,
  r as r2
} from "./chunk-UVQYXHKM.js";
import {
  i as i2,
  n as n2
} from "./chunk-M5N6UHWJ.js";
import "./chunk-EBCBYN6Y.js";
import {
  T,
  f as f3
} from "./chunk-ODFKYX74.js";
import {
  r
} from "./chunk-EGBDRLCX.js";
import {
  s as s5
} from "./chunk-THZPD5CT.js";
import "./chunk-OBCA6CWH.js";
import "./chunk-2JI245BP.js";
import "./chunk-ABIG6PT5.js";
import "./chunk-ZEZ3LI2L.js";
import "./chunk-N34BRXVM.js";
import "./chunk-KETDH2J4.js";
import "./chunk-7QV7DHWN.js";
import "./chunk-4L4Y34YK.js";
import "./chunk-BXONKQKI.js";
import "./chunk-2HDBQXAR.js";
import "./chunk-RNF7VOCU.js";
import "./chunk-TIRJMGGG.js";
import "./chunk-ZDRQSPB6.js";
import "./chunk-DCXDXGAR.js";
import "./chunk-BCCDYCTQ.js";
import "./chunk-AYL3HQHD.js";
import "./chunk-66YQWHHE.js";
import "./chunk-QGBMZIP4.js";
import "./chunk-AOEBZVTA.js";
import "./chunk-2OZSYJDX.js";
import "./chunk-MZM4INJV.js";
import "./chunk-J4GMQHGL.js";
import "./chunk-MHPE4SZA.js";
import {
  A as A2,
  C as C2,
  G,
  w as w2
} from "./chunk-6SSA7P3A.js";
import "./chunk-FQBTLEUI.js";
import "./chunk-GS7Y3YOG.js";
import "./chunk-Y2HYKTTT.js";
import {
  s as s4
} from "./chunk-XLEC46FY.js";
import "./chunk-4AZPIP7K.js";
import "./chunk-JSKTDZU2.js";
import "./chunk-G73HQZEL.js";
import {
  A,
  C,
  P,
  d as d2,
  p,
  v,
  w
} from "./chunk-LZSLQ24Q.js";
import {
  V
} from "./chunk-U3RHUXYK.js";
import "./chunk-7DBI6LQG.js";
import {
  d
} from "./chunk-AUUN7RFQ.js";
import {
  o as o3
} from "./chunk-JAMSDYD6.js";
import "./chunk-PH6NPTP7.js";
import {
  e as e3
} from "./chunk-NUICEVIH.js";
import {
  S,
  i,
  s3
} from "./chunk-NXK752PZ.js";
import {
  y
} from "./chunk-UVNLCXWD.js";
import "./chunk-PNUA7JOS.js";
import "./chunk-OR2FKGUM.js";
import {
  a3 as a2
} from "./chunk-UDMPWVPF.js";
import "./chunk-XJNKCEWL.js";
import {
  L as L2,
  c2 as c,
  f2,
  h,
  k,
  m,
  s as s2,
  u as u3
} from "./chunk-AIZ3T7E3.js";
import {
  e as e2,
  o as o2,
  u as u2
} from "./chunk-6UEMNP3E.js";
import {
  e,
  f,
  l,
  u
} from "./chunk-6WGE3IUL.js";
import "./chunk-MLYB2YW4.js";
import {
  a,
  n2 as n,
  s2 as s
} from "./chunk-6JFGZTLU.js";
import {
  L,
  O,
  o
} from "./chunk-2ZJE6ZFX.js";
import "./chunk-L4CMR4WM.js";
import "./chunk-7JIACICA.js";
import "./chunk-IE4UBD3F.js";
import "./chunk-IAO6HACY.js";
import {
  __async,
  __objRest,
  __spreadProps,
  __spreadValues,
  __superGet
} from "./chunk-XBPEBUD5.js";

// ../../../node_modules/@arcgis/core/widgets/Editor/css.js
var e12 = "esri-editor";
var t3 = {
  base: e12,
  helpMessage: `${e12}__help-message`,
  updateActions: `${e12}__update-actions`,
  updateActionsList: `${e12}__update-actions-list`,
  featureTemplatesContainer: `${e12}__feature-templates-container`,
  templateItemContentEnd: `${e12}__template-item-content-end`
};

// ../../../node_modules/@arcgis/core/widgets/Editor/CreateFeaturesWorkflowData.js
var p4 = class extends S {
  constructor(o9) {
    super(o9), this.creationInfo = null, this.editorItem = null, this.parent = null, this.pendingFeatures = new V(), this.sketchOptions = null, this.snappingManager = null, this.viewModel = null, this.upload = null;
  }
};
e3([y()], p4.prototype, "creationInfo", void 0), e3([y()], p4.prototype, "editorItem", void 0), e3([y()], p4.prototype, "parent", void 0), e3([y({
  constructOnly: true
})], p4.prototype, "sketchOptions", void 0), e3([y()], p4.prototype, "snappingManager", void 0), e3([y()], p4.prototype, "viewModel", void 0), e3([y()], p4.prototype, "upload", void 0), p4 = e3([a2("esri.widgets.Editor.CreateFeaturesWorkflowData")], p4);

// ../../../node_modules/@arcgis/core/widgets/Editor/workflowUtils.js
function L5(e15) {
  const t5 = e15.sourceLayer;
  if (!t5 || "feature" !== t5.type || !P2(t5.renderer)) return {
    rotation: null,
    size: null
  };
  let r13 = null, i11 = null;
  const a10 = t5.renderer.getVisualVariablesForType("rotation").filter((t6) => (!t6.axis || "heading" === t6.axis) && t6.field && !t6.valueExpression && null != h2(t6, e15));
  1 === a10.length && (r13 = x2(a10[0], t5));
  const n13 = t5.renderer.getVisualVariablesForType("size").filter((t6) => t6.field && !t6.useSymbolValue && !t6.valueExpression && a3(t6) === i3.RealWorldSize && null != y2(t6, e15));
  return 1 === n13.length && (i11 = E(n13[0], t5)), {
    rotation: r13,
    size: i11
  };
}
function x2(e15, t5) {
  const r13 = "heading" === (e15.axis || "heading") && "arithmetic" === e15.rotationType ? -1 : 1, i11 = e15.field, a10 = t5.fields && t5.fields.filter((e16) => e16.name === i11), n13 = a10 && 1 === a10.length ? a10[0].type : "double", s15 = {
    initial: 0,
    current: 0
  };
  return {
    field: i11,
    fieldType: n13,
    getDefault: () => Promise.resolve(0),
    getValue: (e16) => (s15.current = s15.initial - r13 * e16, M((s15.current + 360) % 360, n13)),
    setInitialValue: (e16) => {
      s15.initial = e16, s15.current = 0;
    },
    isUpdatingInteractively: false,
    rotationType: e15.rotationType ?? "geographic"
  };
}
function k4(e15, t5) {
  switch (t5) {
    case "width":
      return e15[0];
    case "depth":
      return e15[1];
    case "height":
      return e15[2];
    default:
      return e15[2] || e15[1] || e15[0];
  }
}
function A3(e15, t5, r13) {
  return __async(this, null, function* () {
    if (null == t5) return 0;
    const {
      symbol: i11
    } = g(t5);
    if (null == i11 || "web-style" === i11.type || "cim" === i11.type) return 0;
    const a10 = i11.symbolLayers.at(0);
    if (!a10) return 0;
    switch (a10.type) {
      case "icon": {
        const {
          computeIconLayerResourceSize: e16
        } = yield import("./symbolLayerUtils-BD24DU3W.js");
        return a10.size || Math.min(te.icon, (yield e16(a10, te.icon))[0]) || te.icon;
      }
      case "text":
        return a10.size || te.text;
      case "line":
        return a10.size || te.line;
      case "object": {
        const {
          computeObjectLayerResourceSize: t6
        } = yield import("./symbolLayerUtils-BD24DU3W.js");
        return k4(yield t6(a10, e15.scale / te.viewScaleSizeFactor), r13);
      }
      case "path":
        return (null != a10.width ? a10.width : a10.height) || e15.scale / te.viewScaleSizeFactor;
      case "extrude":
        return a10.size || e15.scale / te.viewScaleSizeFactor;
      default:
        return 0;
    }
  });
}
function E(e15, t5) {
  const r13 = e15.field, i11 = e15.axis, a10 = t5.fields && t5.fields.filter((e16) => e16.name === r13), n13 = a10 && 1 === a10.length ? a10[0].type : "double", s15 = {
    initial: 0,
    current: 0
  }, l6 = m2[e15.valueUnit] ?? 1;
  let o9;
  return o9 = "area" === e15.valueRepresentation ? (e16) => (e16 * l6 / 2) ** 2 * Math.PI : "radius" === e15.valueRepresentation || "distance" === e15.valueRepresentation ? (e16) => e16 * l6 / 2 : (e16) => e16 * l6, {
    field: r13,
    fieldType: n13,
    getDefault: (e16, t6) => __async(this, null, function* () {
      return M(o9(yield A3(t6, e16, i11)), n13);
    }),
    getValue: (e16, t6) => (s15.initial || (s15.initial = t6.pixelSizeAt(t6.center)), s15.current = s15.initial * e16, M(s15.current, n13)),
    setInitialValue: (e16) => {
      s15.initial = e16, s15.current = 0;
    },
    isUpdatingInteractively: false,
    displayUnit: ae(e15.valueUnit),
    axis: e15.axis
  };
}
function M(e15, t5) {
  switch (t5) {
    case "small-integer":
    case "integer":
    case "long":
      return Math.round(e15);
    case "double":
    case "single":
      return e15;
    default:
      return 0;
  }
}
function P2(e15) {
  switch (e15?.type) {
    case "class-breaks":
    case "simple":
    case "unique-value":
    case "dot-density":
    case "dictionary":
    case "pie-chart":
      return true;
    default:
      return false;
  }
}
function C3(e15, t5, r13) {
  return __async(this, null, function* () {
    const i11 = yield L3(e15, {
      useSourceLayer: true,
      ignoreGraphicSymbol: true,
      webStyleCache: t5,
      scale: r13
    });
    null != d4(e15.symbol, i11) && (e15.symbol = i11);
  });
}
function R(e15) {
  if (!e15) throw new Error("no geometry type");
  return "multipatch" === e15 ? "mesh" : e15;
}
function O3(e15, t5, r13) {
  return __async(this, null, function* () {
    const a10 = t5.layer, n13 = __spreadValues(__spreadValues({}, t5.template?.prototype.attributes), t5.attributeOverrides);
    let s15 = null;
    const {
      view: l6
    } = e15, u6 = "2d" === l6?.type;
    if (yield G2(e15, a10, n13, r13, u6 ? l6.scale : null), u6) {
      const t6 = k((t7) => G2(e15, a10, n13, r13, t7));
      s15 = d2(() => l6.scale, (e16) => t6(e16));
    }
    const {
      data: p12,
      editing: y5
    } = a10.capabilities;
    return e15.layer.elevationInfo = a10.elevationInfo, null == t5.geometryToPlace ? yield e15.create(R(a10.geometryType), {
      graphicProperties: {
        attributes: n13,
        sourceLayer: a10
      },
      hasZ: p12.supportsZ,
      defaultZ: (u6 ? y5.zDefault : null) ?? e15.defaultCreateOptions.defaultZ
    }) : yield e15.place(t5.geometryToPlace, {
      graphicProperties: {
        attributes: n13,
        sourceLayer: a10
      }
    }), s15 ?? e2();
  });
}
function G2(t5, r13, i11, a10, n13) {
  return __async(this, null, function* () {
    const s15 = new d3({
      sourceLayer: r13,
      attributes: i11
    }), {
      rotation: l6,
      size: o9
    } = L5(s15);
    let c9 = yield L3(s15, {
      useSourceLayer: true,
      webStyleCache: a10,
      scale: n13
    }), u6 = false;
    for (const e15 of [o9, l6]) {
      if (null == e15) continue;
      null == i11[e15.field] && (i11[e15.field] = yield e15.getDefault(c9, t5.view), u6 = true);
    }
    switch (u6 && (c9 = yield L3(s15, {
      useSourceLayer: true,
      webStyleCache: a10,
      scale: n13
    })), c9?.type) {
      case "simple-fill":
      case "polygon-3d":
        t5.polygonSymbol = c9;
        break;
      case "simple-line":
      case "line-3d":
        t5.polylineSymbol = c9;
        break;
      case "simple-marker":
      case "picture-marker":
      case "point-3d":
      case "cim":
        t5.pointSymbol = c9;
        break;
      case "mesh-3d":
        t5.meshSymbol = c9;
    }
    D(t5.tooltipOptions, o9, l6);
  });
}
function D(e15, t5, r13) {
  e15.visualVariables = null != t5 || null != r13 ? {
    size: null != t5 ? {
      unit: t5.displayUnit,
      axis: t5.axis,
      valueType: t5.fieldType
    } : null,
    rotation: null != r13 ? {
      valueType: r13.fieldType,
      rotationType: r13.rotationType ?? "geographic"
    } : null
  } : null;
}
function Z2(e15, t5) {
  return e15?.find((e16) => e16.layer === t5);
}
function q(e15, t5, r13, i11) {
  return __async(this, null, function* () {
    switch (t5.type) {
      case "3d":
        return Q(e15, t5, r13, i11);
      case "2d":
        return B3(e15, t5, r13, i11);
    }
  });
}
function Q(e15, r13, i11, a10) {
  return __async(this, null, function* () {
    if (0 === e15.length) return [];
    const {
      updatable: n13,
      graphicsByLayer: l6
    } = yield i11.async(() => __async(this, null, function* () {
      const {
        results: t5
      } = yield h(t(r13, i11), a10), n14 = /* @__PURE__ */ new Map(), l7 = (e16) => {
        const t6 = e16.layer, r14 = n14.get(t6);
        if (!r14) {
          const e17 = new Array();
          return n14.set(t6, e17), e17;
        }
        return r14;
      };
      s7(t5).forEach(({
        graphic: e16
      }) => l7(e16).push(e16));
      const o9 = e15.filter(({
        capabilities: e16,
        layer: t6
      }) => e16.update.enabled && n14.has(t6));
      return 0 !== o9.length && i11.stopPropagation(), {
        updatable: o9,
        graphicsByLayer: n14
      };
    }));
    return h(Promise.allSettled(n13.map((_0) => __async(this, [_0], function* ({
      layer: e16
    }) {
      const r14 = l6.get(e16), i12 = W(e16);
      if (r14.every((e17) => je(i12, e17))) return r14;
      const n14 = [];
      for (const a11 of r14) {
        n14.push(a11.getObjectId());
        const e17 = Object.keys(a11.attributes);
        o(i12, e17);
      }
      const s15 = e16.createQuery();
      return s15.returnGeometry = false, s15.objectIds = n14, s15.outFields = I(e16.fieldsIndex, i12), e16.queryFeatures(s15, {
        signal: a10
      }).then(({
        features: e17
      }) => e17);
    }))), a10);
  });
}
function B3(e15, t5, r13, i11) {
  return __async(this, null, function* () {
    if (0 === e15.length) return [];
    const {
      mapPoint: a10
    } = r13;
    if (null == a10) return [];
    let n13 = null;
    const l6 = yield r13.async(() => __async(this, null, function* () {
      const {
        results: a11
      } = yield h(t5.hitTest(r13), i11);
      if (0 === a11.length) return [];
      const l7 = /* @__PURE__ */ new Set();
      n13 = s7(a11), n13.forEach(({
        graphic: e16
      }) => e16 && l7.add(e16.layer));
      const o9 = e15.filter((e16) => l7.has(e16.layer) && e16.supportsUpdateWorkflow);
      return o9.length > 0 && r13.stopPropagation(), o9;
    }));
    return h(Promise.allSettled(l6.map((_0) => __async(this, [_0], function* ({
      layer: e16
    }) {
      const s15 = e16.createQuery();
      s15.returnGeometry = false, s15.outFields = W(e16);
      const l7 = "renderer" in e16 ? o4({
        renderer: e16.renderer,
        pointerType: r13.pointerType
      }) : 0;
      s15.geometry = r5(a10, l7, t5), s15.outSpatialReference = t5.spatialReference;
      const {
        features: o9
      } = yield e16.queryFeatures(s15, {
        signal: i11
      });
      return n13?.forEach(({
        graphic: t6
      }) => {
        t6.layer !== e16 || o9.some((e17) => e17.getObjectId() === t6.getObjectId()) || o9.push(t6);
      }), o9;
    }))), i11);
  });
}
function W(e15) {
  return I(e15.fieldsIndex, [e15.objectIdField, _({
    displayField: "displayField" in e15 ? e15.displayField : null,
    fields: e15.fields
  })]);
}
function H(e15, t5, r13) {
  return __async(this, null, function* () {
    const {
      sourceLayer: i11
    } = e15, a10 = i11.createQuery();
    a10.objectIds = [e15.getAttribute(i11.objectIdField)], a10.outFields = ["*"], a10.returnM = i11.capabilities.data.supportsM, a10.returnZ = i11.capabilities.data.supportsZ, "scene" === i11.type && null != i11.infoFor3D || (a10.outSpatialReference = t5);
    const n13 = yield i11.queryFeatures(a10, {
      signal: r13
    });
    s2(r13);
    return n13.features[0];
  });
}
function J2(e15) {
  return __async(this, null, function* () {
    const {
      graphic: t5,
      sketchViewModel: r13,
      sourceLayer: i11,
      visualVariables: a10,
      webStyleCache: n13
    } = e15;
    let s15 = false;
    const {
      rotation: l6,
      size: o9
    } = a10;
    if ([l6, o9].forEach((e16) => __async(this, null, function* () {
      if (null == e16) return;
      const i12 = t5.getAttribute(e16.field);
      if (null != i12) e16.setInitialValue(i12);
      else {
        const i13 = yield e16.getDefault(t5.symbol, r13.view);
        e16.setInitialValue(i13), t5.setAttribute(e16.field, i13), s15 = true;
      }
    })), s15) {
      const e16 = "2d" === r13.view?.type ? r13.view.scale : null;
      yield C3(t5, n13, e16);
    }
    const c9 = {
      multipleSelectionEnabled: false
    };
    return "point" === i11.geometryType && (c9.enableRotation = null != l6, c9.enableScaling = null != o9), D(r13.tooltipOptions, o9, l6), r13.layer.elevationInfo = i11.elevationInfo, r13.update(t5, c9);
  });
}
function K2(e15) {
  return null == e15 || "rotate-start" !== e15.type && "rotate" !== e15.type && "rotate-stop" !== e15.type ? null : e15;
}
function N(e15) {
  return null == e15 || "scale-start" !== e15.type && "scale" !== e15.type && "scale-stop" !== e15.type ? null : e15;
}
function X(e15, t5, r13, i11, a10) {
  return __async(this, null, function* () {
    if (null == t5.geometry || "point" !== t5.geometry?.type) return;
    const n13 = i11.rotation, s15 = K2(r13.toolEventInfo);
    if (null != n13 && null != s15) {
      const {
        field: r14,
        getValue: i12
      } = n13;
      "rotate-stop" === s15.type ? (n13.isUpdatingInteractively = false, n13.setInitialValue(t5.getAttribute(r14))) : (n13.isUpdatingInteractively = true, t5.setAttribute(r14, i12(s15.angle, e15)));
    }
    const l6 = i11.size, o9 = N(r13.toolEventInfo);
    if (null != l6 && null != o9) {
      const {
        field: r14,
        getValue: i12
      } = l6;
      "scale-stop" === o9.type ? (l6.isUpdatingInteractively = false, l6.setInitialValue(t5.getAttribute(r14))) : (l6.isUpdatingInteractively = true, t5.setAttribute(r14, i12(o9.xScale, e15)));
    }
    yield C3(t5, a10, "2d" === e15.type ? e15.scale : null);
  });
}
function Y2(_0) {
  return __async(this, arguments, function* ({
    feature: e15,
    featureClone: t5,
    visualVariableAttributes: r13,
    sketchViewModel: n13,
    view: s15,
    onUpdate: l6,
    webStyleCache: u6
  }) {
    yield C3(t5, u6, "2d" === s15.type ? s15.scale : null);
    let p12 = null;
    if ("2d" === n13?.view?.type) {
      const e16 = k((e17) => C3(t5, u6, e17));
      p12 = d2(() => n13?.view?.scale, (t6) => e16(t6));
    }
    const y5 = t5.sourceLayer, f7 = le(s15, y5);
    yield J2({
      graphic: t5,
      sketchViewModel: n13,
      sourceLayer: y5,
      visualVariables: r13,
      webStyleCache: u6
    });
    let d8 = null;
    f7.then((e16) => d8 = e16).catch(() => {
    });
    const m6 = r13.size, g4 = r13.rotation, h11 = d2(() => e15.attributes, (e16) => __async(this, null, function* () {
      let r14 = false;
      for (const i11 in e16) {
        const a10 = e16[i11];
        a10 !== t5.getAttribute(i11) && (t5.setAttribute(i11, a10), null == m6 || m6.isUpdatingInteractively || m6.field !== i11 || m6.setInitialValue(a10), null == g4 || g4.isUpdatingInteractively || g4.field !== i11 || g4.setInitialValue(a10), (null == d8 || d8.requiredFields.includes(i11)) && (r14 = true));
      }
      r14 && (yield C3(t5, u6, "2d" === s15.type ? s15.scale : null));
    })), b2 = n13.on("update", (e16) => __async(this, null, function* () {
      const t6 = e16.graphics[0];
      if ("complete" === e16.state) return J2({
        graphic: t6,
        sketchViewModel: n13,
        sourceLayer: y5,
        visualVariables: r13,
        webStyleCache: u6
      });
      yield X(s15, t6, e16, r13, u6), l6(ce(t6), e16);
    })), w4 = n13.on(["undo", "redo"], (e16) => __async(this, null, function* () {
      l6(ce(e16.graphics[0]), e16);
    }));
    return o2([w4, b2, e2(() => n13.cancel()), h11, p12]);
  });
}
function $(e15, t5, n13) {
  return __async(this, null, function* () {
    const s15 = e15.view;
    e15.layer.add(n13);
    const o9 = t5.sourceLayer, c9 = t5.layer, p12 = t5.getAttribute(c9.objectIdField);
    let y5 = null;
    function f7(e16) {
      y5?.abort(), y5 = d((t6) => __async(this, null, function* () {
        const r13 = yield le(s15, o9);
        s2(t6), r13.setVisibility?.(p12, e16);
      }));
    }
    return yield ee(s15, n13), f7(false), o2([_3(s15, n13, (e16) => f7(!e16)), e2(() => __async(this, null, function* () {
      f7(true);
      try {
        const e16 = yield le(s15, o9);
        yield w(() => !e16.updating);
      } finally {
        e15.layer.remove(n13);
      }
    }))]);
  });
}
function _3(e15, t5, r13) {
  if ("3d" === e15.type) {
    const i11 = new e10({
      graphic: t5
    });
    return o2([e15.trackGraphicState(i11), d2(() => i11.displaying, r13)]);
  }
  return d2(() => t5.visible, r13);
}
function ee(e15, t5) {
  return __async(this, null, function* () {
    if ("3d" === e15.type) {
      const r13 = new e10({
        graphic: t5
      }), i11 = e15.trackGraphicState(r13);
      yield w(() => r13.displaying), i11.remove();
    } else yield w(() => t5.visible);
  });
}
var te = {
  icon: e5(24),
  text: e5(12),
  line: e5(1),
  viewScaleSizeFactor: 100
};
function re(e15, t5, r13) {
  let i11 = false;
  return e15.filter((e16) => !!i11 || (i11 = e16 === t5, i11)).map((e16) => r13[e16]());
}
function ie(e15, t5) {
  e15.viewModel.syncFeatureTemplates();
  const r13 = e15.creationInfo;
  if ("awaiting-feature-creation-info" === t5[0].id && r13) {
    const e16 = r13.layer, i11 = t2(e16);
    1 === i11.length && "scene" !== e16.type && (r13.template = i11[0], t5.shift());
  }
  return t5;
}
function ae(e15) {
  switch (e15) {
    case "unknown":
    case "decimal-degrees":
      return null;
    default:
      return e15;
  }
}
function ne(e15) {
  e15.filesEnabled = true, e15.mode = "view", e15.capabilities = {
    editing: true,
    operations: {
      add: true,
      update: true,
      delete: true
    }
  };
}
var se = (e15) => /-stop/.test(e15) || /vertex-/.test(e15);
var le = (e15, t5) => {
  const r13 = "subtype-sublayer" === t5.type ? t5.parent : t5;
  return e15.whenLayerView(r13);
};
function oe(e15) {
  return "createInteractiveEditSession" in e15;
}
function ce(e15) {
  const t5 = e15.geometry;
  if ("mesh" === t5?.type) {
    const r13 = e15.cloneShallow();
    return r13.attributes = a(e15.attributes), r13.geometry = t5.cloneShallow(), r13.geometry.transform = t5.transform?.clone() ?? null, r13;
  }
  return e15.clone();
}
function ue(e15) {
  const t5 = e15.cursor;
  return e15.cursor = "progress", e2(() => e15.cursor = t5);
}

// ../../../node_modules/@arcgis/core/widgets/Editor/modelUploadUtils.js
function n7(_0) {
  return __async(this, arguments, function* ({
    view: n13,
    data: c9,
    signal: l6,
    next: i11,
    cancel: u6
  }) {
    const {
      creationInfo: m6
    } = c9;
    if (!m6) return e2();
    if (!s10(m6)) return e2();
    const {
      layer: p12
    } = m6, f7 = null != m6.geometryToPlace;
    if (m6.geometryToPlace = null, f7) return u6(), e2();
    const {
      Upload: d8
    } = yield import("./Upload-AL5Q6LVD.js");
    s2(l6);
    const y5 = new d8();
    c9.upload = y5;
    let w4 = null;
    const U2 = () => w4?.remove(), g4 = o2([d2(() => y5.state, (e15) => {
      switch (e15) {
        case "default":
        case "error":
          U2();
          break;
        case "pending":
          U2(), w4 = ue(n13);
          break;
        case "success":
          m6.maxFeatures = 1, m6.geometryToPlace = y5.result, U2(), i11();
      }
    }), e2(() => {
      y5.cancel(), U2();
    })]);
    return y5.uploadTo(p12), g4;
  });
}
function s10(e15) {
  const r13 = e15?.layer;
  return "scene" === r13?.type;
}

// ../../../node_modules/@arcgis/core/widgets/Editor/Workflow.js
var p5 = class extends o3.EventedAccessor {
  constructor(t5) {
    super(t5), this._indexHistory = [], this._lastStepIndex = -1, this._stepIndex = -1, this._updatingHandles = new h3(), this._handleKeys = {
      afterCommit: "after-commit",
      beforeCommit: "before-commit"
    }, this.data = void 0, this.started = false, this.steps = [], this.type = null, this._pendingOperation = null;
  }
  destroy() {
    this._updatingHandles.destroy();
  }
  get hasNextStep() {
    const {
      steps: t5
    } = this;
    return !!(t5 && this._stepIndex < t5.filter((t6) => !t6.parent).length - 1);
  }
  get hasPreviousStep() {
    return this._stepIndex > 0;
  }
  get reliesOnOwnerAdminPrivileges() {
    return false;
  }
  get hasInvalidFormTemplate() {
    return false;
  }
  get shouldShowAttachments() {
    return false;
  }
  get shouldAllowAttachmentEditing() {
    return false;
  }
  get stepId() {
    const {
      steps: t5
    } = this, e15 = t5 && t5[this._stepIndex];
    return e15 && e15.id;
  }
  get helpMessage() {
  }
  get hasPendingEdits() {
    return false;
  }
  get keyboardCancellationEnabled() {
    return true;
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  back(t5 = () => Promise.resolve(true)) {
    return __async(this, null, function* () {
      if (this.hasPendingEdits) {
        if (!(yield t5())) return;
      }
      this.hasPreviousStep ? yield this.previous({
        cancelCurrentStep: true
      }) : yield this.cancel({
        force: true
      });
    });
  }
  cancel() {
    return __async(this, arguments, function* (t5 = {
      force: true
    }) {
      return false !== t5.force ? this._cancel(t5) : new Promise((s15, i11) => {
        this.emit("cancel-request", {
          controller: {
            allow: () => {
              this._cancel(__spreadProps(__spreadValues({}, t5), {
                force: true
              })).then(s15);
            },
            deny: () => i11(new s("workflow:cancel-denied", "Request to cancel workflow was denied."))
          }
        });
      });
    });
  }
  commit() {
    return __async(this, null, function* () {
      this.removeHandles(this._handleKeys.beforeCommit), this.onCommit && (yield this.onCommit(this.data)), this.removeHandles(this._handleKeys.afterCommit), this.emit("commit");
    });
  }
  go(t5) {
    return __async(this, null, function* () {
      const {
        steps: e15
      } = this, s15 = e15.findIndex((e16) => e16.id === t5);
      this._indexHistory.push(this._stepIndex), yield this._go(s15);
    });
  }
  next() {
    return __async(this, null, function* () {
      this._indexHistory.push(this._stepIndex), yield this._go(this._stepIndex + 1);
    });
  }
  previous() {
    return __async(this, arguments, function* (t5 = {
      cancelCurrentStep: false
    }) {
      yield this._go(this._indexHistory.pop(), t5.cancelCurrentStep);
    });
  }
  reset() {
    return __async(this, null, function* () {
      yield this._cancel({
        emitCancelEvent: false
      }), yield this.start();
    });
  }
  save() {
    return __async(this, null, function* () {
      yield this.commit(), yield this.reset();
    });
  }
  start() {
    return __async(this, null, function* () {
      this._set("started", true);
      const t5 = -1 === this._stepIndex ? 0 : this._stepIndex;
      yield this._go(t5);
    });
  }
  _cancel() {
    return __async(this, arguments, function* ({
      emitCancelEvent: t5 = true,
      error: e15
    } = {}) {
      this.started && (this._set("started", false), yield this._transaction(() => this.steps[this._stepIndex]?.tearDown({
        canceled: true
      }))), this.removeHandles([this._handleKeys.afterCommit, this._handleKeys.beforeCommit]), this._resetIndexing(t5), t5 && this.emit("cancel", {
        error: e15
      });
    });
  }
  _go(t5 = -1, e15 = false) {
    return this._transaction(() => __async(this, null, function* () {
      const {
        steps: s15
      } = this;
      if (!(t5 <= -1 || t5 >= s15.length)) {
        if (!this.started) return this._stepIndex = t5, void this._notifyStepProps();
        this._lastStepIndex > -1 && (yield s15[this._lastStepIndex].tearDown({
          canceled: e15
        }));
        try {
          yield s15[t5].setUp();
        } catch (n13) {
          f2(n13);
        }
        this._lastStepIndex = t5, this._stepIndex = t5, this._notifyStepProps();
      }
    }));
  }
  _transaction(t5) {
    return __async(this, null, function* () {
      const e15 = this._pendingOperation, s15 = L2(), i11 = (e15 ?? Promise.resolve()).then(() => s15.promise);
      this._pendingOperation = i11, this._updatingHandles.addPromise(i11);
      try {
        e15 && (yield e15), yield t5();
      } finally {
        s15.resolve(), i11 === this._pendingOperation && (this._pendingOperation = null);
      }
    });
  }
  _resetIndexing(t5 = true) {
    this._stepIndex = -1, this._lastStepIndex = -1, this._indexHistory.length = 0, t5 && this._notifyStepProps();
  }
  _notifyStepProps() {
    this.notifyChange("stepId"), this.notifyChange("hasPreviousStep"), this.notifyChange("hasNextStep");
  }
};
e3([y()], p5.prototype, "data", void 0), e3([y()], p5.prototype, "hasNextStep", null), e3([y()], p5.prototype, "hasPreviousStep", null), e3([y()], p5.prototype, "onCommit", void 0), e3([y()], p5.prototype, "reliesOnOwnerAdminPrivileges", null), e3([y()], p5.prototype, "hasInvalidFormTemplate", null), e3([y()], p5.prototype, "shouldShowAttachments", null), e3([y()], p5.prototype, "shouldAllowAttachmentEditing", null), e3([y()], p5.prototype, "started", void 0), e3([y({
  readOnly: true
})], p5.prototype, "stepId", null), e3([y()], p5.prototype, "steps", void 0), e3([y({
  readOnly: true
})], p5.prototype, "type", void 0), e3([y()], p5.prototype, "helpMessage", null), e3([y()], p5.prototype, "hasPendingEdits", null), e3([y()], p5.prototype, "keyboardCancellationEnabled", null), e3([y()], p5.prototype, "updating", null), p5 = e3([a2("esri.widgets.Editor.Workflow")], p5);
var h8 = p5;

// ../../../node_modules/@arcgis/core/widgets/Editor/CreateFeaturesWorkflow.js
var T2;
var W2 = Symbol();
var x3 = Symbol();
var N2 = Symbol();
var z2 = T2 = class _this extends h8 {
  constructor(e15) {
    super(e15), this.type = "create-features", this.createFeatureState = "create-new", this.data = void 0, this.isNested = false, this._getDrawMeshHelpMessage = void 0, this._featureFormHandle = null, this._visualVariableAttributes = {
      rotation: null,
      size: null
    }, this._featureFormViewModel = new Y(), this._sketchViewModel = null, this._attachmentFileInfos = /* @__PURE__ */ new Map(), this._highlightHandles = /* @__PURE__ */ new Map(), this._preventDefaultActionOnCancel = false, this._lastActiveGraphics = [], this._isActive = true, this._updateGraphicDebounced = k((e16, t5, a10) => C3(e16, t5, a10));
  }
  initialize() {
    this.isNested && (this._isActive = false), this._initializeSketchViewModel();
  }
  destroy() {
    this._sketchViewModel.destroy();
  }
  get featureFormViewModel() {
    return this._featureFormViewModel;
  }
  get hasPendingEdits() {
    if (this.numPendingFeatures > 0) return true;
    const {
      creationInfo: e15,
      upload: t5
    } = this.data, a10 = this._sketchViewModel, {
      activeComponent: i11
    } = a10, r13 = a10.createGraphic?.geometry?.type;
    return !("polyline" !== r13 && "polygon" !== r13 && "multipoint" !== r13 || "draw-2d" !== i11?.type && "draw-3d" !== i11?.type) && i11.drawOperation.committedVertices.length > 0 || !(!t5 || "pending" !== t5.state && "success" !== t5.state) || !!e15?.geometryToPlace;
  }
  get helpMessage() {
    const {
      creationInfo: e15,
      viewModel: t5
    } = this.data;
    if ("creating-features" !== this.stepId || !e15) return;
    const a10 = e15.layer.geometryType, i11 = this._sketchViewModel.createGraphic;
    if ("mesh" === a10) {
      this._getDrawMeshHelpMessage || import("./helpMessageUtils3d-LHWQBTUY.js").then((e17) => {
        this._getDrawMeshHelpMessage = e17.getDrawMeshHelpMessage;
      });
      const {
        view: e16
      } = t5;
      return "3d" === e16?.type ? this._getDrawMeshHelpMessage?.(i11, e16) : void 0;
    }
    return e11(a10, i11?.geometry);
  }
  get layer() {
    return this.data.creationInfo?.layer;
  }
  get numPendingFeatures() {
    return this.pendingFeatures.length;
  }
  get parent() {
    return this.data.parent;
  }
  get parentLayer() {
    return this.parent?.data.editorItem.layer;
  }
  get pendingFeatures() {
    return this.data.pendingFeatures;
  }
  get keyboardCancellationEnabled() {
    return 0 === this.numPendingFeatures;
  }
  get reliesOnOwnerAdminPrivileges() {
    return this.data.editorItem?.capabilities.create.reliesOnOwnerAdminPrivileges ?? false;
  }
  get shouldShowAttachments() {
    return this.data.editorItem?.capabilities.create.attachments.enabled ?? false;
  }
  get shouldAllowAttachmentEditing() {
    return this.shouldShowAttachments;
  }
  get sketchViewModel() {
    return this._sketchViewModel;
  }
  get test() {
  }
  enter() {
    return __async(this, null, function* () {
      this._isActive = true, "awaiting-feature-creation-info" !== this.stepId && this._setUpCreatingFeaturesStep();
    });
  }
  exit() {
    this._isActive = false, this.removeHandles([N2]);
  }
  updatePendingFeature(e15, t5) {
    return __async(this, null, function* () {
      return this._preventDefaultActionOnCancel = true, this._sketchViewModel.cancel(), L(this._lastActiveGraphics, e15), this._startUpdating(e15, t5);
    });
  }
  start() {
    return __async(this, null, function* () {
      return yield __superGet(_this.prototype, this, "start").call(this), k2(this.data.creationInfo?.layer) ? null : {
        enter: () => __async(this, null, function* () {
        }),
        exit: () => __async(this, null, function* () {
        }),
        viewModel: this._sketchViewModel
      };
    });
  }
  static create(e15) {
    const {
      addAttachmentsCallback: t5,
      applyEditsCallback: a10,
      isNested: i11,
      creationInfo: r13,
      parent: s15,
      snappingManager: n13,
      startAt: o9,
      viewModel: l6
    } = e15, d8 = e15.sketchOptions ?? new l4(), c9 = r13?.layer, h11 = c9 ? l6.findEditorItemForLayer(c9) : void 0, p12 = new T2({
      data: new p4({
        creationInfo: r13,
        editorItem: h11,
        parent: s15,
        sketchOptions: d8,
        snappingManager: n13,
        viewModel: l6
      }),
      isNested: i11,
      onCommit: (e16) => __async(this, null, function* () {
        const {
          creationInfo: i12
        } = e16;
        if (!i12) return;
        const r14 = e16.pendingFeatures.toArray(), {
          layer: s16
        } = i12, n14 = s16.capabilities?.editing.supportsGlobalId && "globalIdField" in s16, o10 = p12._attachmentFileInfos;
        if (n14) {
          const e17 = q2(r14, s16, o10);
          return void (yield a10(s16, e17, {
            globalIdUsed: true
          }));
        }
        const l7 = yield a10(s16, {
          addFeatures: r14
        });
        if (o10.size > 0) {
          const e17 = l7?.addFeatureResults ?? [];
          yield t5(s16, Z3(r14, e17, s16, o10));
        }
      })
    });
    return p12._set("steps", this._createWorkflowSteps(p12, o9)), p12;
  }
  _fadeExistingFeatures(e15) {
    if ("effect" in e15) {
      const t6 = e15.effect;
      return e15.effect = "saturate(0.6) opacity(0.8)", e2(() => e15.effect = t6);
    }
    const t5 = e15.opacity;
    return e15.opacity = 0.7, e2(() => e15.opacity = t5);
  }
  _highlight(e15) {
    const t5 = this.data.viewModel.view;
    "3d" === t5?.type && this._highlightHandles.set(e15, t5.highlight(e15));
  }
  _removeHighlight(e15) {
    l(this._highlightHandles.get(e15)), this._highlightHandles.delete(e15);
  }
  _startCreating(e15) {
    return __async(this, null, function* () {
      this.removeHandles(x3);
      const {
        creationInfo: t5
      } = this.data;
      if (!t5) return;
      this.createFeatureState = "create-new";
      const a10 = yield O3(this._sketchViewModel, t5, e15);
      this.addHandles(a10, x3);
    });
  }
  _startUpdating(e15, t5) {
    return __async(this, null, function* () {
      const {
        pendingFeatures: a10
      } = this;
      a10.includes(e15) || a10.add(e15);
      const {
        _featureFormViewModel: i11,
        _sketchViewModel: r13
      } = this, {
        creationInfo: o9,
        viewModel: l6
      } = this.data, {
        attachmentsViewModel: c9,
        layerInfos: h11,
        view: p12
      } = l6;
      if (!p12 || !o9) return;
      const u6 = o9.layer, f7 = Z2(h11, u6), m6 = f7?.formTemplate, g4 = p12.spatialReference;
      i11.set({
        arcadeEditType: "INSERT",
        feature: e15,
        formTemplate: m6,
        spatialReference: g4,
        map: p12.map
      }), "add" !== c9.mode && "edit" !== c9.mode || l6.activeWorkflow?.previous(), c9.graphic = e15, c9.fileInfos.removeAll(), c9.mode = "view";
      if ((this._attachmentFileInfos.get(e15) || []).forEach(({
        file: e16,
        form: t6
      }) => c9.addFile(e16, t6)), this._removeHighlight(e15), yield C3(e15, t5, "2d" === p12.type ? p12.scale : null), this.removeHandles(x3), l(this._featureFormHandle), "2d" === p12.type) {
        const a11 = d2(() => p12.scale, (a12) => this._updateGraphicDebounced(e15, t5, a12));
        this.addHandles(a11, x3);
      }
      return this._featureFormHandle = o2([i11.on("value-change", () => __async(this, null, function* () {
        e15.attributes = i11.getValues(), yield C3(e15, t5, "2d" === p12.type ? p12.scale : null);
      })), r13.on(["update", "undo", "redo"], (e16) => {
        ("undo" === e16.type || "redo" === e16.type || "update" === e16.type && null != e16.toolEventInfo && se(e16.toolEventInfo.type)) && i11.notifyFeatureGeometryChanged();
      })]), this.createFeatureState = "update-pending", this._visualVariableAttributes = L5(e15), k2(u6) ? void 0 : J2({
        graphic: e15,
        sketchViewModel: r13,
        sourceLayer: u6,
        visualVariables: this._visualVariableAttributes,
        webStyleCache: t5
      });
    });
  }
  static _createWorkflowSteps(e15, t5 = "awaiting-feature-creation-info") {
    const {
      data: a10
    } = e15, i11 = re(["awaiting-feature-creation-info", "creating-features", "adding-attachment", "editing-attachment"], t5, {
      "awaiting-feature-creation-info": () => ({
        id: "awaiting-feature-creation-info",
        setUp() {
          return __async(this, null, function* () {
            const {
              creationInfo: t6,
              viewModel: i12
            } = a10, {
              view: r13
            } = i12;
            r13 && (s10(t6) ? e15.addHandles(yield n7({
              view: r13,
              data: a10,
              next: () => e15.next(),
              cancel: () => i12.cancelWorkflow({
                warnIfNoWorkflow: false
              })
            }), this.id) : (a10.parent && t6 && (e15.addHandles(i12.lockFeatureTemplatesViewModel(), this.id), i12.featureTemplatesViewModel.layers = [t6.layer]), e15.addHandles(i12.featureTemplatesViewModel.on("select", ({
              item: t7
            }) => {
              t7 && (a10.creationInfo = __spreadProps(__spreadValues({}, a10.creationInfo), {
                layer: t7.layer,
                template: t7.template
              }), e15.next());
            }), this.id)));
          });
        },
        tearDown() {
          return __async(this, null, function* () {
            e15.removeHandles([this.id, x3]);
          });
        }
      }),
      "creating-features": () => ({
        id: "creating-features",
        setUp() {
          return __async(this, null, function* () {
            e15._isActive && (yield e15._setUpCreatingFeaturesStep());
          });
        },
        tearDown(t6) {
          return __async(this, null, function* () {
            const {
              viewModel: i12
            } = a10;
            t6.canceled && (e15.removeHandles([N2, W2, x3]), i12.attachmentsViewModel.fileInfos.removeAll(), e15._attachmentFileInfos.clear());
          });
        }
      }),
      "adding-attachment": () => ({
        id: "adding-attachment",
        parent: "creating-features",
        setUp() {
          return __async(this, null, function* () {
          });
        },
        tearDown() {
          return __async(this, null, function* () {
            const {
              attachmentsViewModel: t6
            } = a10.viewModel, {
              graphic: i12,
              fileInfos: r13
            } = t6;
            e15._attachmentFileInfos.set(i12, r13.toArray()), t6.mode = "view";
          });
        }
      }),
      "editing-attachment": () => ({
        id: "editing-attachment",
        parent: "creating-features",
        setUp() {
          return __async(this, null, function* () {
          });
        },
        tearDown() {
          return __async(this, null, function* () {
            const {
              attachmentsViewModel: t6
            } = a10.viewModel, {
              graphic: i12,
              fileInfos: r13
            } = t6;
            e15._attachmentFileInfos.set(i12, r13.toArray()), t6.mode = "view";
          });
        }
      })
    });
    return ie(a10, i11);
  }
  static _configureSketchViewModel(e15, t5) {
    const {
      data: i11
    } = e15, {
      creationInfo: n13,
      viewModel: o9
    } = i11, {
      view: l6
    } = o9, d8 = e15._sketchViewModel;
    let c9 = null;
    const h11 = [];
    if (!l6) return e2();
    "2d" === l6.type && n13 && h11.push(e15._fadeExistingFeatures(n13.layer));
    const u6 = (a10) => __async(this, null, function* () {
      if ("cancel" === a10.state) {
        if (e15._preventDefaultActionOnCancel) return void (e15._preventDefaultActionOnCancel = false);
        if (e15._lastActiveGraphics.length < 1) return e15._startCreating(t5);
        const a11 = e15._lastActiveGraphics.pop();
        return e15._startUpdating(a11, t5);
      }
      if ("complete" === a10.state && a10.graphic) return e15._startUpdating(a10.graphic, t5);
    }), f7 = (a10) => __async(this, null, function* () {
      const {
        attachmentsViewModel: i12
      } = o9, {
        _featureFormViewModel: r13
      } = e15, s15 = a10.graphics[0];
      if ("complete" === a10.state) {
        s15 !== c9 && (e15._lastActiveGraphics.push(s15), e15._highlight(s15)), c9 = null;
        const {
          hasPendingSubtypeChoice: d10,
          submittable: h13
        } = r13;
        if (e15.numPendingFeatures === n13?.maxFeatures || d10 || !h13) {
          !h13 && r13.submit();
          const a11 = e15._lastActiveGraphics.pop();
          return e15._startUpdating(a11, t5);
        }
        if ("add" !== i12.mode && "edit" !== i12.mode || o9.activeWorkflow?.previous(), a10.aborted && e15._preventDefaultActionOnCancel) return void (e15._preventDefaultActionOnCancel = false);
        e15.addHandles([ue(l6), l6.on("click", (e16) => e16.preventDefault())], W2), yield w(() => !r13.updating), e15.removeHandles(W2), e15._startCreating(t5);
      }
      "start" === a10.state && e15._removeHighlight(s15);
      const d9 = e15._visualVariableAttributes;
      yield X(l6, s15, a10, d9, t5);
      const h12 = s15.attributes, {
        rotation: u7,
        size: f8
      } = d9;
      if (null != u7) {
        const {
          field: e16
        } = u7;
        r13.setValue(e16, h12[e16]);
      }
      if (null != f8) {
        const {
          field: e16
        } = f8;
        r13.setValue(e16, h12[e16]);
      }
    }), m6 = (t6) => {
      const i12 = t6.graphics[0];
      e15.pendingFeatures.remove(i12), L(e15._lastActiveGraphics, i12), c9 = i12;
    }, g4 = (a10) => __async(this, null, function* () {
      if (s10(n13)) return;
      const {
        results: i12
      } = yield l6.hitTest(a10, {
        include: d8.layer
      }), r13 = i12.find((e16) => "graphic" === e16.type && e16.graphic.sourceLayer === n13?.layer);
      if (!r13) return;
      const s15 = r13.graphic;
      if ("transform" === d8.activeTool || "reshape" === d8.activeTool) {
        if (d8.updateGraphics.at(0) === s15) return;
        const {
          submittable: a11,
          hasPendingSubtypeChoice: i13
        } = e15._featureFormViewModel;
        if (!a11 || i13) return;
        yield e15.updatePendingFeature(s15, t5);
      }
    });
    h11.push(d8.on("create", (t6) => e15._updatingHandles.addPromise(u6(t6))), d8.on("update", (t6) => e15._updatingHandles.addPromise(f7(t6))), d8.on("delete", (e16) => m6(e16)), l6.on("immediate-click", (t6) => e15._updatingHandles.addPromise(g4(t6)), _2.TOOL), e2(() => {
      e15._preventDefaultActionOnCancel = true, d8.cancel();
    }), R2(d8, i11));
    const w4 = o2(h11);
    return d8.addHandles(w4), w4;
  }
  _initializeSketchViewModel() {
    const {
      data: e15
    } = this, {
      view: t5
    } = e15.viewModel, a10 = new h4({
      elevationInfo: e15.creationInfo?.layer.elevationInfo,
      internal: true,
      listMode: "hide"
    }), i11 = new pe({
      layer: a10,
      sketchOptions: e15.sketchOptions,
      snappingManager: e15.snappingManager,
      updateOnGraphicClick: false,
      view: t5
    });
    this._sketchViewModel = i11, t5?.map.add(a10), this.addHandles(e2(() => {
      t5?.destroyed || t5?.map.remove(a10), a10.destroy();
    }));
  }
  _setUpCreatingFeaturesStep() {
    return __async(this, null, function* () {
      if (this.hasHandles(N2)) return;
      const {
        creationInfo: e15,
        viewModel: a10
      } = this.data, {
        attachmentsViewModel: o9,
        view: l6
      } = a10;
      if (!l6 || !e15?.layer) throw new s("missing-parameters", "CreateFeaturesWorkflow requires a view and creationInfo.");
      const {
        initialFeature: h11,
        layer: p12
      } = e15, u6 = this._sketchViewModel, f7 = /* @__PURE__ */ new Map(), m6 = [];
      this._lastActiveGraphics = [], this._featureFormHandle = l(this._featureFormHandle), this._visualVariableAttributes = {
        rotation: null,
        size: null
      }, this.data.editorItem = a10.findEditorItemForLayer(e15.layer), ne(o9), m6.push(d2(() => o9.mode, (e16) => {
        switch (e16) {
          case "add":
            this.go("adding-attachment");
            break;
          case "edit":
            this.go("editing-attachment");
        }
      }));
      const g4 = ue(l6);
      m6.push(g4);
      const y5 = k2(e15.layer);
      try {
        if (y5) {
          const a11 = h11 ?? new d3({
            attributes: __spreadValues(__spreadValues({}, e15.template?.prototype.attributes), e15.attributeOverrides),
            sourceLayer: p12
          });
          yield this._startUpdating(a11, f7);
        } else m6.push(T2._configureSketchViewModel(this, f7)), h11 ? (u6.layer.add(h11), yield this._startUpdating(h11, f7)) : yield this._startCreating(f7);
      } finally {
        g4.remove();
      }
      const v5 = e2(() => this.pendingFeatures.drain((e16) => u6.layer.remove(e16))), _6 = d2(() => l6?.timeZone, (e16) => this._featureFormViewModel.timeZone = e16, P), M2 = e2(() => {
        s10(e15) && a10.cancelWorkflow({
          warnIfNoWorkflow: false
        });
      });
      this._featureFormHandle && m6.push(this._featureFormHandle), this.addHandles(m6, this._handleKeys.beforeCommit), this.addHandles([e2(() => o9.fileInfos.removeAll()), o2(m6), M2, v5, _6], N2);
    });
  }
};
function R2(e15, t5) {
  let a10 = null;
  const i11 = () => e15.snappingOptions.featureSources, n13 = () => (a10 = new p3({
    layer: e15.layer
  }), i11().add(a10), a10), l6 = () => {
    null != a10 && (i11().remove(a10), a10 = u(a10));
  };
  return o2([d2(() => {
    const e16 = t5.creationInfo?.layer, a11 = i11().find((t6) => t6.layer === e16);
    return {
      hasFeatureLayerSource: !!a11,
      enabled: a11?.enabled ?? false
    };
  }, ({
    hasFeatureLayerSource: e16,
    enabled: t6
  }) => {
    if (!e16) return l6();
    a10 ??= n13(), a10.enabled = t6;
  }, A), e2(l6)]);
}
function Z3(e15, t5, a10, i11) {
  const r13 = [];
  return t5.forEach((t6, s15) => {
    if (!t6.error) {
      const n13 = e15[s15], o9 = i11.get(n13) || [];
      n13.attributes[a10.objectIdField] = t6.objectId, o9.forEach(({
        form: e16
      }) => r13.push({
        feature: n13,
        attachment: e16
      }));
    }
  }), r13;
}
function q2(e15, t5, a10) {
  const i11 = [], r13 = t5.globalIdField;
  return e15.forEach((t6, s15) => {
    e15[s15].attributes[r13] ??= r(), (a10?.get(t6) || []).forEach(({
      file: e16
    }) => i11.push({
      feature: t6,
      attachment: {
        globalId: r(),
        data: e16
      }
    }));
  }), i11.length ? {
    addFeatures: e15,
    addAttachments: i11
  } : {
    addFeatures: e15
  };
}
e3([y()], z2.prototype, "createFeatureState", void 0), e3([y()], z2.prototype, "data", void 0), e3([y({
  constructOnly: true
})], z2.prototype, "isNested", void 0), e3([y()], z2.prototype, "featureFormViewModel", null), e3([y()], z2.prototype, "hasPendingEdits", null), e3([y()], z2.prototype, "_getDrawMeshHelpMessage", void 0), e3([y()], z2.prototype, "helpMessage", null), e3([y()], z2.prototype, "layer", null), e3([y()], z2.prototype, "parent", null), e3([y()], z2.prototype, "parentLayer", null), e3([y()], z2.prototype, "keyboardCancellationEnabled", null), e3([y()], z2.prototype, "reliesOnOwnerAdminPrivileges", null), e3([y()], z2.prototype, "shouldShowAttachments", null), e3([y()], z2.prototype, "shouldAllowAttachmentEditing", null), e3([y()], z2.prototype, "sketchViewModel", null), z2 = T2 = e3([a2("esri.widgets.Editor.CreateFeaturesWorkflow")], z2);
var K3 = z2;

// ../../../node_modules/@arcgis/core/widgets/Editor/Edits.js
function s11(t5) {
  return null == t5 ? null : JSON.stringify(t5);
}
var o6 = class extends S {
  constructor(t5) {
    super(t5), this._stagedForDelete = false, this.feature = null, this.initialFeature = null;
  }
  get attributesModified() {
    return this._stringifyAttributes(this.feature) !== this._stringifyAttributes(this.initialFeature);
  }
  get geometryModified() {
    return this._stringifyGeometry(this.feature) !== this._stringifyGeometry(this.initialFeature);
  }
  get stagedForDelete() {
    return this._stagedForDelete;
  }
  get modified() {
    return this.attributesModified || this.geometryModified || this._stagedForDelete;
  }
  stageDelete() {
    this._stagedForDelete = true;
  }
  unstageDelete() {
    this._stagedForDelete = false;
  }
  trackChanges() {
    this.initialFeature = this.feature?.clone();
  }
  updateAttributes(t5) {
    const {
      feature: e15
    } = this;
    e15 && (e15.attributes = t5, this.notifyChange("attributesModified"));
  }
  updateGeometry(t5) {
    const {
      feature: e15
    } = this;
    e15 && (e15.geometry = t5, this.notifyChange("geometryModified"));
  }
  _stringifyAttributes(t5) {
    return s11(t5?.attributes);
  }
  _stringifyGeometry(t5) {
    const e15 = t5?.geometry;
    return s11("mesh" === e15?.type ? {
      transform: e15.transform,
      vertexSpace: e15.vertexSpace
    } : e15);
  }
};
e3([y()], o6.prototype, "_stagedForDelete", void 0), e3([y()], o6.prototype, "attributesModified", null), e3([y()], o6.prototype, "feature", void 0), e3([y()], o6.prototype, "geometryModified", null), e3([y()], o6.prototype, "initialFeature", void 0), e3([y()], o6.prototype, "modified", null), o6 = e3([a2("esri.widgets.Editor.Edits")], o6);

// ../../../node_modules/@arcgis/core/widgets/Editor/UpdateRecordWorkflowData.js
var i6;
var d5 = i6 = class extends S {
  constructor(e15) {
    super(e15), this.editorItem = null, this.edits = null, this.parent = null, this.relatedRecordCallbacks = null, this.viewModel = null;
  }
  get attachmentsCapabilities() {
    const e15 = this.editorItem.capabilities.update.attachments.enabled;
    return {
      editing: true,
      operations: {
        add: e15,
        update: e15,
        delete: e15
      }
    };
  }
  get formTemplate() {
    return this.editorItem.formTemplate;
  }
  static create(e15) {
    return __async(this, null, function* () {
      const t5 = i6._makeConstructorProps(e15);
      return new i6(t5);
    });
  }
  static _makeConstructorProps(e15) {
    const {
      feature: t5,
      parent: o9,
      relatedRecordCallbacks: s15,
      viewModel: i11
    } = e15, d8 = i11.editorItems.find((e16) => e16.layer === t5.layer);
    if (!d8) throw new s("no-editorItem-found", "The EditorViewModel provided did not have an EditorItem associated with the specified Graphic's layer");
    return {
      editorItem: d8,
      edits: new o6({
        feature: t5
      }),
      parent: o9,
      relatedRecordCallbacks: s15,
      viewModel: i11
    };
  }
};
e3([y()], d5.prototype, "attachmentsCapabilities", null), e3([y({
  constructOnly: true
})], d5.prototype, "editorItem", void 0), e3([y()], d5.prototype, "edits", void 0), e3([y()], d5.prototype, "formTemplate", null), e3([y()], d5.prototype, "parent", void 0), e3([y()], d5.prototype, "relatedRecordCallbacks", void 0), e3([y()], d5.prototype, "viewModel", void 0), d5 = i6 = e3([a2("esri.widgets.Editor.UpdateRecordWorkflowData")], d5);
var p6 = d5;

// ../../../node_modules/@arcgis/core/widgets/Editor/UpdateFeatureWorkflowData.js
var p7;
var n8 = p7 = class extends p6 {
  constructor(o9) {
    super(o9), this.sketchOptions = null, this.snappingManager = null;
  }
  static create(o9) {
    return __async(this, null, function* () {
      const {
        feature: t5,
        snappingManager: e15,
        viewModel: a10
      } = o9, n13 = o9.sketchOptions ?? new l4(), {
        view: c9
      } = a10;
      if (!c9) throw new s("editor:cannot-create-workflow-data", "The provided EditorViewModel does not have an associated view");
      const d8 = yield le(c9, t5.layer);
      return new p7(__spreadProps(__spreadValues({}, p7._makeConstructorProps(o9)), {
        layerView: d8,
        sketchOptions: n13,
        snappingManager: e15
      }));
    });
  }
};
e3([y()], n8.prototype, "layerView", void 0), e3([y({
  constructOnly: true
})], n8.prototype, "sketchOptions", void 0), e3([y()], n8.prototype, "snappingManager", void 0), n8 = p7 = e3([a2("esri.widgets.Editor.UpdateFeatureWorkflowData")], n8);
var c4 = n8;

// ../../../node_modules/@arcgis/core/widgets/Editor/UpdateRecordWorkflow.js
var f4;
var g2 = {
  exit: Symbol()
};
var w3 = f4 = class _this extends h8 {
  constructor(e15) {
    super(e15), this._highlightHelper = null, this.fullFeature = null, this.type = "update-table-record";
  }
  initialize() {
    const {
      data: e15
    } = this, {
      edits: o9
    } = e15, {
      view: s15
    } = e15.viewModel, l6 = o9.feature, n13 = new AbortController();
    this.addHandles(u2(n13)), this._updatingHandles.addPromise(H(l6, e15.viewModel.view.spatialReference, n13.signal).then((e16) => {
      c(n13) || (this._onFullFeatureLoaded(e16), this._initializeFeatureFormViewModel());
    }, (e16) => this.cancel({
      force: true,
      error: new s("editor:failed-to-fetch-full-feature", "Failed to retrieve all information for this feature. The update cannot proceed.", {
        detail: {
          error: e16
        }
      })
    }))), s15 && (this._highlightHelper = new h7({
      view: s15
    }), this.addHandles(e2(() => this._highlightHelper?.removeAll())));
  }
  get editorItem() {
    return this.data.editorItem;
  }
  get featureFormViewModel() {
    return this._featureFormViewModel;
  }
  get hasPendingEdits() {
    return this.data.edits.modified;
  }
  get layer() {
    return this.data.editorItem.layer;
  }
  get parent() {
    return this.data.parent;
  }
  get parentLayer() {
    return this.parent?.data.editorItem.layer;
  }
  get shouldShowAttachments() {
    return this.editorItem.capabilities.attachments.enabled;
  }
  get shouldAllowAttachmentEditing() {
    return this.editorItem.capabilities.update.attachments.enabled;
  }
  get reliesOnOwnerAdminPrivileges() {
    const e15 = this.editorItem.capabilities;
    return e15.update.reliesOnOwnerAdminPrivileges || e15.delete.reliesOnOwnerAdminPrivileges;
  }
  deleteAndCommit() {
    return __async(this, null, function* () {
      return this.data.edits.stageDelete(), this.commit();
    });
  }
  enter() {
    return __async(this, null, function* () {
      this._configureAttachmentsViewModel();
    });
  }
  exit(e15) {
    this.removeHandles(g2.exit);
  }
  start() {
    return __async(this, null, function* () {
      return yield __superGet(_this.prototype, this, "start").call(this), null;
    });
  }
  _configureAttachmentsViewModel() {
    const {
      data: e15,
      fullFeature: t5
    } = this, {
      attachmentsCapabilities: r13,
      viewModel: a10
    } = e15, {
      attachmentsViewModel: s15
    } = a10;
    s15.set({
      capabilities: r13,
      graphic: t5,
      filesEnabled: false,
      mode: "view"
    }), this.addHandles([e2(() => s15.fileInfos.removeAll()), d2(() => s15.mode, (e16) => {
      switch (e16) {
        case "add":
          this.go("adding-attachment");
          break;
        case "edit":
          this.go("editing-attachment");
      }
    })], g2.exit);
  }
  _initializeFeatureFormViewModel() {
    const {
      edits: e15,
      formTemplate: t5,
      viewModel: {
        view: r13
      }
    } = this.data, i11 = this._featureFormViewModel = new Y({
      arcadeEditType: "UPDATE",
      feature: this.fullFeature,
      formTemplate: t5,
      highlightHelper: this._highlightHelper,
      map: r13?.map,
      spatialReference: r13.spatialReference,
      timeZone: r13?.timeZone
    });
    i11.relatedRecordCallbacks = __spreadProps(__spreadValues({}, this.data.relatedRecordCallbacks), {
      showAllRelatedRecords: (e16) => i11.relationshipId = e16.relationshipId
    });
    const {
      initialFeature: a10
    } = e15;
    a10 && i11.overrideInitialFeature(a10), this.addHandles([i11.on("value-change", () => {
      e15.updateAttributes(i11.getValues()), this.fullFeature.attributes = e15.feature.attributes;
    }), d2(() => r13?.timeZone, (e16) => i11.timeZone = e16)]);
  }
  _onFullFeatureLoaded(e15) {
    this.fullFeature = e15;
    const {
      edits: t5
    } = this.data;
    t5.updateAttributes(e15.attributes), t5.trackChanges();
  }
  static create(e15) {
    return __async(this, null, function* () {
      const t5 = new f4({
        data: yield p6.create(e15),
        onCommit: this._onCommitFactory(e15.applyEdits)
      });
      return t5._set("steps", this._createWorkflowSteps(t5)), t5;
    });
  }
  static _createWorkflowSteps(e15) {
    const {
      attachmentsViewModel: t5
    } = e15.data.viewModel;
    return [{
      id: "editing-attributes",
      setUp() {
        return __async(this, null, function* () {
        });
      },
      tearDown() {
        return __async(this, null, function* () {
        });
      }
    }, {
      id: "adding-attachment",
      setUp() {
        return __async(this, null, function* () {
        });
      },
      tearDown() {
        return __async(this, null, function* () {
          t5.mode = "view";
        });
      }
    }, {
      id: "editing-attachment",
      setUp() {
        return __async(this, null, function* () {
        });
      },
      tearDown() {
        return __async(this, null, function* () {
          t5.mode = "view";
        });
      }
    }];
  }
};
w3._onCommitFactory = (e15) => (t5) => __async(void 0, null, function* () {
  const {
    edits: r13
  } = t5, {
    feature: i11
  } = r13;
  if (!i11) return;
  const a10 = i11.sourceLayer, o9 = i11.clone();
  if (!r13.attributesModified || r13.stagedForDelete) {
    const e16 = a10.objectIdField;
    if (o9.attributes = {
      [e16]: i11.getAttribute(e16)
    }, n3() && r4() && "scene" === a10.type && null != a10.infoFor3D) {
      const e17 = a10.associatedLayer?.globalIdField;
      null != e17 && o9.setAttribute(e17, i11.getAttribute(e17));
    }
  }
  r13.geometryModified && !r13.stagedForDelete || (o9.geometry = null);
  const s15 = r13.stagedForDelete ? "deleteFeatures" : "updateFeatures";
  yield e15(a10, {
    [s15]: [o9]
  });
}), e3([y()], w3.prototype, "editorItem", null), e3([y()], w3.prototype, "featureFormViewModel", null), e3([y()], w3.prototype, "fullFeature", void 0), e3([y()], w3.prototype, "hasPendingEdits", null), e3([y()], w3.prototype, "layer", null), e3([y()], w3.prototype, "parent", null), e3([y()], w3.prototype, "parentLayer", null), e3([y()], w3.prototype, "shouldShowAttachments", null), e3([y()], w3.prototype, "shouldAllowAttachmentEditing", null), e3([y()], w3.prototype, "reliesOnOwnerAdminPrivileges", null), w3 = f4 = e3([a2("esri.widgets.Editor.UpdateRecordWorkflow")], w3);

// ../../../node_modules/@arcgis/core/widgets/Editor/UpdateFeatureWorkflow.js
var _4;
var V2 = __spreadProps(__spreadValues({}, g2), {
  highlights: Symbol(),
  sketchGraphics: Symbol(),
  sketchViewModel: Symbol()
});
var v3 = _4 = class _this extends w3 {
  constructor(e15) {
    super(e15), this.type = "update-feature", this._layerViewEditSession = null, this._sketchGraphicClone = null, this._sketchViewModel = null, this._webStyleCache = /* @__PURE__ */ new Map();
  }
  destroy() {
    this._layerViewEditSession?.rollback();
  }
  commit() {
    return __async(this, null, function* () {
      this.removeHandles(V2.sketchGraphics);
      try {
        const e15 = this.data.edits.stagedForDelete;
        yield __superGet(_this.prototype, this, "commit").call(this);
        const t5 = this._layerViewEditSession;
        e15 ? t5?.rollback() : t5?.commit();
      } catch (e15) {
        throw yield this._configureSketchViewModel(), new s("editor-workflow:failed-to-commit", "An error occurred when sending the updates to the service", {
          error: e15
        });
      }
    });
  }
  start() {
    return __async(this, null, function* () {
      return yield __superGet(_this.prototype, this, "start").call(this), yield this._initializeSketchViewModel();
    });
  }
  _initializeFeatureFormViewModel() {
    super._initializeFeatureFormViewModel(), this.addHandles(this._featureFormViewModel.on("value-change", (e15) => {
      this._layerViewEditSession?.setAttribute(e15.fieldName, e15.value);
    }));
  }
  _configureHighlight() {
    const {
      edits: e15,
      layerView: t5
    } = this.data;
    n5(t5) && this.addHandles(t5.highlight(e15.feature), V2.highlights);
  }
  _configureSketchViewModel() {
    return __async(this, null, function* () {
      const e15 = this._sketchViewModel;
      if (!e15) return;
      const {
        data: t5,
        _featureFormViewModel: i11,
        _sketchGraphicClone: s15
      } = this, {
        edits: o9,
        viewModel: r13
      } = t5, a10 = o9.feature, {
        view: l6
      } = r13, h11 = L5(a10), n13 = yield Y2({
        feature: a10,
        featureClone: s15,
        visualVariableAttributes: h11,
        sketchViewModel: e15,
        view: l6,
        onUpdate: ({
          geometry: e16,
          attributes: t6
        }, s16) => {
          if (o9.updateAttributes(t6), o9.updateGeometry(e16), i11.feature.geometry = e16, null != h11.rotation) {
            const {
              field: e17
            } = h11.rotation;
            i11.setValue(e17, t6[e17]);
          }
          if (null != h11.size) {
            const {
              field: e17
            } = h11.size;
            i11.setValue(e17, t6[e17]);
          }
          ("undo" === s16.type || "redo" === s16.type || "update" === s16.type && null != s16.toolEventInfo && se(s16.toolEventInfo.type)) && i11.notifyFeatureGeometryChanged();
        },
        webStyleCache: this._webStyleCache
      });
      this.addHandles(n13, V2.sketchGraphics), e15.addHandles(n13);
    });
  }
  _initializeSketchViewModel() {
    return __async(this, null, function* () {
      const {
        data: e15,
        _sketchGraphicClone: t5
      } = this, o9 = e15.edits.feature, {
        capabilities: r13,
        layer: h11
      } = e15.editorItem, {
        view: n13
      } = e15.viewModel;
      if (this.removeHandles([V2.highlights, V2.sketchGraphics, V2.sketchViewModel]), !r13.update.geometry || "3d" === n13?.type && v2(h11.elevationInfo)) return {
        enter: () => __async(this, null, function* () {
          this.hasHandles(V2.highlights) || this._configureHighlight();
        }),
        exit: () => this.removeHandles([V2.highlights])
      };
      const d8 = new h4({
        elevationInfo: h11.elevationInfo,
        internal: true,
        listMode: "hide"
      }), c9 = new pe({
        allowDeleteKey: false,
        layer: d8,
        sketchOptions: e15.sketchOptions,
        snappingManager: e15.snappingManager,
        updateOnGraphicClick: false,
        view: n13
      });
      return this._sketchViewModel = c9, n13?.map.add(d8), this.addHandles(e2(() => {
        n13?.destroyed || n13?.map.remove(d8), d8.destroy(), this._sketchViewModel = u(c9);
      }), V2.sketchViewModel), yield C3(t5, this._webStyleCache, "2d" === n13?.type ? n13.scale : null), this.addHandles([yield $(c9, o9, t5)]), {
        enter: () => __async(this, null, function* () {
          this.hasHandles(V2.sketchGraphics) || (yield this._configureSketchViewModel());
        }),
        exit: () => this.removeHandles([V2.sketchGraphics]),
        viewModel: c9
      };
    });
  }
  _onFullFeatureLoaded(e15) {
    super._onFullFeatureLoaded(e15);
    const t5 = this._sketchGraphicClone = ce(e15), {
      edits: i11,
      layerView: s15
    } = this.data;
    i11.updateGeometry(e15.geometry), i11.trackChanges(), oe(s15) && (this._layerViewEditSession = s15.createInteractiveEditSession(t5));
  }
  static create(e15) {
    return __async(this, null, function* () {
      const t5 = new _4({
        data: yield c4.create(e15),
        onCommit: this._onCommitFactory(e15.applyEdits)
      });
      return t5._set("steps", this._createWorkflowSteps(t5)), t5;
    });
  }
  get test() {
  }
};
e3([y()], v3.prototype, "_layerViewEditSession", void 0), e3([y()], v3.prototype, "_sketchGraphicClone", void 0), e3([y()], v3.prototype, "_sketchViewModel", void 0), v3 = _4 = e3([a2("esri.widgets.Editor.UpdateFeatureWorkflow")], v3);

// ../../../node_modules/@arcgis/core/widgets/Editor/UpdateWorkflowData.js
var e13 = class extends S {
  constructor(o9) {
    super(o9), this.addAttachmentsCallback = null, this.applyEditsCallback = null, this.candidates = null, this.rootFeature = null, this.sketchOptions = null, this.snappingManager = null, this.viewModel = null;
  }
};
e3([y()], e13.prototype, "addAttachmentsCallback", void 0), e3([y()], e13.prototype, "applyEditsCallback", void 0), e3([y()], e13.prototype, "candidates", void 0), e3([y()], e13.prototype, "rootFeature", void 0), e3([y({
  constructOnly: true
})], e13.prototype, "sketchOptions", void 0), e3([y()], e13.prototype, "snappingManager", void 0), e3([y()], e13.prototype, "viewModel", void 0), e13 = e3([a2("esri.widgets.Editor.UpdateWorkflowData")], e13);
var a6 = e13;

// ../../../node_modules/@arcgis/core/widgets/Editor/UpdateWorkflow.js
var E2;
var x4 = "esri.widgets.Editor.UpdateWorkflow";
var R3 = () => n.getLogger(x4);
var O4 = E2 = class _this extends h8 {
  constructor(e15) {
    super(e15), this._workflowStack = new s6(s3), this._sketchStack = new s6(s3), this.data = void 0, this.type = "update";
  }
  get activeEditorItem() {
    return this.activeWorkflow?.data.editorItem ?? void 0;
  }
  get activeFeatureFormViewModel() {
    return this.activeWorkflow?.featureFormViewModel;
  }
  get activeSketchViewModel() {
    return this._sketchStack.peek()?.viewModel;
  }
  get activeWorkflow() {
    return this._workflowStack.last();
  }
  get hasUpdatableCandidates() {
    const {
      candidates: e15,
      viewModel: t5
    } = this.data;
    return e15.some(({
      layer: e16
    }) => t5.findEditorItemForLayer(e16)?.supportsUpdateWorkflow);
  }
  get nestedWorkflowCount() {
    return this._workflowStack.length;
  }
  get shouldShowAttachments() {
    return !!this.activeEditorItem?.capabilities.attachments.enabled;
  }
  get shouldAllowAttachmentEditing() {
    return !!this.activeEditorItem?.capabilities.update.attachments.enabled;
  }
  get hasPendingEdits() {
    return Array.from(this._workflowStack).some((e15) => e15.hasPendingEdits);
  }
  get helpMessage() {
    return this.activeWorkflow?.helpMessage ? this.activeWorkflow.helpMessage : "awaiting-feature-to-update" === this.stepId ? "select" : void 0;
  }
  get reliesOnOwnerAdminPrivileges() {
    return this.activeWorkflow?.reliesOnOwnerAdminPrivileges ?? false;
  }
  get hasInvalidFormTemplate() {
    return !!this.activeEditorItem?.hasInvalidFormTemplate;
  }
  back(e15 = () => Promise.resolve(true)) {
    return __async(this, null, function* () {
      const {
        activeWorkflow: t5
      } = this;
      if (null == t5?.featureFormViewModel.relationshipId) {
        if (t5) {
          if (t5.hasPendingEdits) {
            if (!(yield e15())) return;
          }
          t5.hasPreviousStep ? yield t5.previous({
            cancelCurrentStep: true
          }) : yield this.cancelActiveWorkflow({
            force: true
          });
        } else this.hasPreviousStep ? yield this.previous({
          cancelCurrentStep: true
        }) : yield this.cancel({
          force: true
        });
      } else t5.featureFormViewModel.relationshipId = null;
    });
  }
  cancelActiveWorkflow(e15) {
    return __async(this, null, function* () {
      yield this.activeWorkflow?.cancel(e15), yield this._popWorkflow();
    });
  }
  commit() {
    return __async(this, null, function* () {
      yield this._drainWorkflowStack((e15) => e15.commit()), yield __superGet(_this.prototype, this, "commit").call(this);
    });
  }
  static create(e15) {
    const {
      viewModel: t5,
      snappingManager: a10,
      startAt: o9,
      addAttachmentsCallback: i11,
      applyEditsCallback: r13
    } = e15, s15 = e15.sketchOptions ?? new l4(), n13 = new E2({
      data: new a6({
        addAttachmentsCallback: i11,
        applyEditsCallback: r13,
        sketchOptions: s15,
        snappingManager: a10,
        viewModel: t5
      }),
      onCommit: () => __async(this, null, function* () {
      })
    });
    return n13._set("steps", this._createWorkflowSteps(n13, o9)), n13;
  }
  save() {
    return __async(this, null, function* () {
      this.nestedWorkflowCount > 1 ? (yield this.activeWorkflow?.commit(), yield this._popWorkflow()) : yield this.commit();
    });
  }
  startCreatingRelatedRecord(e15) {
    return __async(this, null, function* () {
      try {
        const t5 = yield this._createNestedCreateFeaturesWorkflow(e15);
        yield this._pushWorkflow(t5);
      } catch (t5) {
        throw new s("editor:unable-to-start-creating", "Could not begin updating the provided feature or table record.", {
          error: t5
        });
      }
    });
  }
  startUpdating(e15) {
    return __async(this, null, function* () {
      try {
        const t5 = yield this._createNestedUpdateWorkflow(e15);
        yield this._pushWorkflow(t5);
      } catch (t5) {
        throw new s("editor:unable-to-start-updating", "Could not begin updating the provided feature or table record.", {
          error: t5
        });
      }
    });
  }
  deleteActiveFeature() {
    return __async(this, null, function* () {
      const {
        activeWorkflow: e15
      } = this;
      if (!e15) throw new s("editor:nothing-to-delete", "There is no feature to delete");
      V3(e15) ? yield e15.deleteAndCommit() : yield e15.cancel(), 1 === this.nestedWorkflowCount ? yield this.reset() : yield this._popWorkflow();
    });
  }
  cancelAll() {
    return __async(this, null, function* () {
      yield this._drainWorkflowStack((e15) => e15.cancel({
        force: true
      }));
    });
  }
  _createNestedCreateFeaturesWorkflow(e15) {
    return __async(this, null, function* () {
      const {
        relatedLayer: t5
      } = e15, {
        addAttachmentsCallback: o9,
        applyEditsCallback: i11,
        sketchOptions: r13,
        snappingManager: s15,
        viewModel: n13
      } = this.data;
      if (!e9(t5)) throw new s("editor:unsupported-layer", "Editing is not supported on the provided layer");
      const l6 = this._getCreationInfoForNestedCreateFeaturesWorkflow(e15), d8 = l6.template || l6.initialFeature ? "creating-features" : "awaiting-feature-creation-info", c9 = "create-features" !== this.activeWorkflow?.type ? this.activeWorkflow : void 0;
      return K3.create({
        addAttachmentsCallback: o9,
        applyEditsCallback: i11,
        creationInfo: l6,
        isNested: true,
        parent: c9,
        sketchOptions: r13,
        snappingManager: s15,
        startAt: d8,
        viewModel: n13
      });
    });
  }
  _getCreationInfoForNestedCreateFeaturesWorkflow(e15) {
    const {
      relatedLayer: o9
    } = e15;
    if (!e9(o9) || c2(o9)) throw new s("editor:unsupported-layer", "Editing is not supported on the provided layer");
    const i11 = {
      layer: o9,
      maxFeatures: 1
    }, r13 = this._makeRelatedRecordAttributes(e15), s15 = t2(o9);
    return s15?.length > 0 ? (i11.attributeOverrides = r13, 1 === s15.length && (i11.template = s15[0])) : i11.initialFeature = new d3({
      sourceLayer: o9,
      attributes: r13
    }), i11;
  }
  _createNestedUpdateWorkflow(e15) {
    return __async(this, null, function* () {
      const t5 = k2(e15.sourceLayer) ? w3 : v3, {
        applyEditsCallback: a10,
        sketchOptions: o9,
        snappingManager: i11,
        viewModel: r13
      } = this.data, s15 = "create-features" !== this.activeWorkflow?.type ? this.activeWorkflow : void 0, n13 = yield t5.create({
        feature: e15,
        parent: s15,
        sketchOptions: o9,
        snappingManager: i11,
        viewModel: r13,
        applyEdits: a10,
        relatedRecordCallbacks: {
          addRelatedRecord: (e16) => __async(this, null, function* () {
            return yield this.startCreatingRelatedRecord(e16);
          }),
          editRelatedRecord: (_0) => __async(this, [_0], function* ({
            relatedFeature: e16
          }) {
            return yield this.startUpdating(e16);
          })
        }
      });
      return yield w(() => !n13.updating), n13;
    });
  }
  _drainWorkflowStack(e15) {
    return __async(this, null, function* () {
      const t5 = this._workflowStack, a10 = [];
      for (; t5.length > 0; ) {
        const o9 = t5.pop();
        this._sketchStack.pop();
        const i11 = e15(o9).then(() => o9.destroy());
        this._updatingHandles.addPromise(i11), a10.push(i11);
      }
      yield Promise.all(a10);
    });
  }
  _makeRelatedRecordAttributes(e15) {
    const {
      parentFeature: t5,
      relatedLayer: a10,
      relationshipId: o9
    } = e15;
    if (!K(t5)) return;
    const i11 = a10.relationships?.find((e16) => e16.id === o9);
    if (!i11) return void P3("relationship-not-found", "Could not begin creating a related record because the relationship specified could not be found on the destination layer.");
    if ("origin" === i11.role) return void P3("unsupported-role", "Creating new related records in the 'origin' table of a relationship is not yet supported");
    const r13 = t5.sourceLayer;
    i11.relatedTableId !== r13.layerId && P3("invalid-argument-combination", "The given parent feature does not belong to the relationship designated by the given relationship ID.");
    const s15 = r13.relationships?.find((e16) => e16.id === o9);
    if (!s15) return void P3("relationship-not-found", "Could not begin creating a related record because the relationship specified could not be found on the origin layer.");
    const n13 = t5.getAttribute(s15.keyField);
    return n13 || P3("no-key-on-origin-feature", "The given parent feature does not have a value for the relationship's origin primary key field."), {
      [i11.keyField]: n13
    };
  }
  _popWorkflow() {
    return __async(this, null, function* () {
      this._workflowStack.pop()?.destroy(), this._sketchStack.pop();
      const e15 = yield this._reconcileWorkflowStack();
      if (e15.failureCount > 0) throw new s("editor:next-workflow-failed", "Popped the top workflow, but the next workflow in the stack failed to activate", e15);
    });
  }
  _pushWorkflow(e15) {
    return __async(this, null, function* () {
      const t5 = this._workflowRequiresSketchViewModel(e15);
      this.activeWorkflow?.exit({
        removeSketchHandles: t5
      });
      const o9 = this._sketchStack, i11 = yield e15?.start(), r13 = o9.peek();
      i11 ? (r13?.exit(), o9.push(i11)) : o9.push(this._cloneSketchController(r13)), this._workflowStack.push(e15);
      const s15 = yield this._reconcileWorkflowStack();
      if (s15.failureCount > 0) throw new s("editor:failed-to-start-updating-feature", "Failed to enter the provided workflow.", s15);
    });
  }
  _reconcileWorkflowStack() {
    return __async(this, null, function* () {
      const e15 = this._workflowStack, t5 = this._sketchStack;
      try {
        const a10 = e15.peek();
        return yield a10?.enter(), yield t5.peek()?.enter(), {
          activeWorkflow: a10,
          failureCount: 0
        };
      } catch (a10) {
        e15.pop().destroy(), t5.pop();
        const {
          activeWorkflow: o9,
          failureCount: i11
        } = yield this._reconcileWorkflowStack();
        return {
          activeWorkflow: o9,
          failureCount: i11 + 1
        };
      }
    });
  }
  _cloneSketchController(e15) {
    return {
      enter: e15?.enter ?? (() => __async(this, null, function* () {
      })),
      exit: e15?.exit ?? (() => __async(this, null, function* () {
      })),
      viewModel: e15?.viewModel
    };
  }
  _workflowRequiresSketchViewModel(e15) {
    const {
      type: t5
    } = e15;
    return "update-feature" === t5 || "create-features" === t5 && !k2(e15.data.creationInfo?.layer);
  }
  static _createWorkflowSteps(e15, t5 = "awaiting-feature-to-update") {
    const {
      data: i11
    } = e15;
    return re(["awaiting-feature-to-update", "awaiting-update-feature-candidate", "editing-existing-feature", "adding-attachment", "editing-attachment"], t5, {
      "awaiting-feature-to-update": () => ({
        id: "awaiting-feature-to-update",
        setUp() {
          return __async(this, null, function* () {
            const {
              spinnerViewModel: t6
            } = i11.viewModel, a10 = i11.viewModel.view;
            let d8 = null;
            e15.addHandles(e2(() => {
              d8 = e(d8);
            }), this.id), i11.rootFeature = null, i11.candidates = [];
            const c9 = a10.on("immediate-click", (o9) => __async(this, null, function* () {
              t6.location = o9.mapPoint, t6.visible = true, d8?.abort();
              const {
                editorItems: r13
              } = i11.viewModel;
              d8 = new AbortController();
              const c10 = yield o9.async(() => new Promise((e16, t7) => {
                m(d8?.signal, () => t7(u3())), e16(q(r13, a10, o9, d8?.signal));
              }));
              s2(d8), i11.candidates = c10.filter((e16) => "fulfilled" === e16.status).flatMap((e16) => e16.value).filter((e16) => !e16.isAggregate), t6.visible = 1 === i11.candidates.length, 0 !== i11.candidates.length && (o9.stopPropagation(), 1 === i11.candidates.length ? (i11.rootFeature = i11.candidates[0], e15.go("editing-existing-feature").catch(() => {
              }).then(() => t6.visible = false)) : e15.next());
            }), _2.TOOL);
            a10.focus(), e15.addHandles(c9, this.id);
          });
        },
        tearDown() {
          return __async(this, null, function* () {
            0 === i11.candidates.length && (i11.viewModel.spinnerViewModel.visible = false), e15.removeHandles(this.id);
          });
        }
      }),
      "awaiting-update-feature-candidate": () => ({
        id: "awaiting-update-feature-candidate",
        setUp() {
          return __async(this, null, function* () {
            i11.rootFeature = null;
            const {
              view: t6
            } = i11.viewModel;
            if (!t6) return;
            const a10 = new h7({
              view: t6
            });
            e15.addHandles([d2(() => i11.rootFeature, (e16, t7) => {
              a10.remove(t7), a10.add(e16);
            }, C), e2(() => a10.removeAll())], this.id);
          });
        },
        tearDown() {
          return __async(this, null, function* () {
            e15.removeHandles(this.id);
          });
        }
      }),
      "editing-existing-feature": () => ({
        id: "editing-existing-feature",
        setUp() {
          return __async(this, null, function* () {
            const {
              rootFeature: t6,
              viewModel: o9
            } = e15.data;
            if (!t6) throw new s("editor:no-feature-specified", "Cannot setup the 'updating-existing-feature' step until the root feature is defined");
            yield e15.startUpdating(t6), o9.spinnerViewModel.visible = false;
            const i12 = k(() => __async(this, null, function* () {
              yield w(() => !e15.updating), e15.previous();
            }));
            e15.addHandles([d2(() => e15.nestedWorkflowCount, (e16, t7) => {
              0 === e16 && 0 !== t7 && i12();
            }, C)], this.id);
          });
        },
        tearDown() {
          return __async(this, null, function* () {
            yield e15.cancelAll(), e15.removeHandles(this.id);
          });
        }
      }),
      "adding-attachment": () => ({
        id: "adding-attachment",
        parent: "editing-existing-feature",
        setUp() {
          return __async(this, null, function* () {
          });
        },
        tearDown() {
          return __async(this, null, function* () {
            i11.viewModel.attachmentsViewModel.mode = "view";
          });
        }
      }),
      "editing-attachment": () => ({
        id: "editing-attachment",
        parent: "editing-existing-feature",
        setUp() {
          return __async(this, null, function* () {
          });
        },
        tearDown() {
          return __async(this, null, function* () {
            i11.viewModel.attachmentsViewModel.mode = "view";
          });
        }
      })
    });
  }
};
e3([y()], O4.prototype, "activeEditorItem", null), e3([y()], O4.prototype, "activeFeatureFormViewModel", null), e3([y()], O4.prototype, "activeSketchViewModel", null), e3([y()], O4.prototype, "activeWorkflow", null), e3([y()], O4.prototype, "data", void 0), e3([y()], O4.prototype, "hasUpdatableCandidates", null), e3([y()], O4.prototype, "nestedWorkflowCount", null), e3([y()], O4.prototype, "shouldShowAttachments", null), e3([y()], O4.prototype, "shouldAllowAttachmentEditing", null), e3([y()], O4.prototype, "hasPendingEdits", null), e3([y()], O4.prototype, "helpMessage", null), e3([y()], O4.prototype, "reliesOnOwnerAdminPrivileges", null), e3([y()], O4.prototype, "hasInvalidFormTemplate", null), O4 = E2 = e3([a2(x4)], O4);
var P3 = (e15, t5) => R3().warn(`editor:${e15}`, t5, "The create operation will be allowed to proceed, but the resulting feature may not be related to the given parent feature.");
var V3 = (e15) => !!e15 && /update-/.test(e15.type);
var L6 = O4;

// ../../../node_modules/@arcgis/core/layers/support/EditingCapabilities.js
var n9 = class extends S {
  constructor(e15) {
    super(e15), this.layer = null;
  }
  get attachments() {
    return {
      enabled: this._effectiveEnabled && !!this._effectiveCapabilities?.data.supportsAttachment
    };
  }
  get create() {
    const {
      _effectiveCapabilities: e15,
      layer: t5
    } = this, r13 = this._createEnabled, i11 = r13, s15 = t5.capabilities?.operations.supportsAdd, a10 = !!e15?.operations.supportsAdd;
    return {
      attachments: {
        enabled: r13 && this.attachments.enabled
      },
      attributes: r13,
      enabled: r13,
      geometry: i11,
      reliesOnOwnerAdminPrivileges: !s15 && a10
    };
  }
  get delete() {
    const {
      _effectiveCapabilities: e15,
      layer: t5
    } = this, r13 = t5.capabilities?.operations.supportsDelete, i11 = !!e15?.operations.supportsDelete;
    return {
      enabled: this._effectiveEnabled && !!e15?.operations.supportsDelete,
      reliesOnOwnerAdminPrivileges: !r13 && i11
    };
  }
  get reliesOnOwnerAdminPrivileges() {
    return this._effectiveEnabled && !this.layer.editingEnabled || this.create.reliesOnOwnerAdminPrivileges || this.update.reliesOnOwnerAdminPrivileges || this.delete.reliesOnOwnerAdminPrivileges;
  }
  get update() {
    const {
      _effectiveCapabilities: e15,
      layer: t5
    } = this, r13 = this._updateEnabled, i11 = !(!r13 || !e15?.editing.supportsGeometryUpdate), s15 = t5.capabilities?.operations.supportsUpdate, a10 = !!e15?.operations.supportsUpdate, n13 = this.attachments.enabled, p12 = n13 && this._canCreateOrUpdate;
    return {
      attachments: {
        enabled: n13,
        create: p12,
        update: p12
      },
      attributes: r13,
      enabled: r13,
      geometry: i11,
      reliesOnOwnerAdminPrivileges: !s15 && a10
    };
  }
  get _createEnabled() {
    return this._effectiveEnabled && !!this._effectiveCapabilities?.operations.supportsAdd;
  }
  get _updateEnabled() {
    return this._effectiveEnabled && !!this._effectiveCapabilities?.operations.supportsUpdate;
  }
  get _canCreateOrUpdate() {
    return !(!this._createEnabled && !this._updateEnabled);
  }
  get _effectiveEnabled() {
    return B2(this.layer);
  }
  get _effectiveCapabilities() {
    return O2(this.layer);
  }
};
e3([y()], n9.prototype, "attachments", null), e3([y()], n9.prototype, "create", null), e3([y()], n9.prototype, "delete", null), e3([y()], n9.prototype, "layer", void 0), e3([y()], n9.prototype, "reliesOnOwnerAdminPrivileges", null), e3([y()], n9.prototype, "update", null), e3([y()], n9.prototype, "_createEnabled", null), e3([y()], n9.prototype, "_updateEnabled", null), e3([y()], n9.prototype, "_canCreateOrUpdate", null), e3([y()], n9.prototype, "_effectiveEnabled", null), e3([y()], n9.prototype, "_effectiveCapabilities", null), n9 = e3([a2("esri.layers.support.EditingCapabilities")], n9);
var p8 = n9;

// ../../../node_modules/@arcgis/core/views/layers/support/editableLayerViews.js
var d6 = "esri.views.layers.support.editableLayerViews";
function c5(c9, l6) {
  const {
    associatedLayer: g4
  } = c9, p12 = g4?.infoFor3D;
  if (!!!p12) return false;
  const {
    supportedFormats: u6,
    queryFormats: f7
  } = p12, w4 = u4("model/gltf-binary", u6) ?? i4("glb", u6);
  if (!(null != w4 && f7.includes(w4))) return n.getLogger(d6).warnOnce(`SceneLayer (${c9.title ?? "Untitled layer"}, ${c9.id}) does not support geometry edits because it does not support GLB queries.`), false;
  const y5 = c9.spatialReference, m6 = g4.spatialReference;
  if (!G(y5, m6)) return n.getLogger(d6).warnOnce(`SceneLayer (${c9.title ?? "Untitled layer"}, ${c9.id}) does not support geometry edits because its spatial reference (wkid:${y5.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${m6.wkid}).`), false;
  const $3 = g4.sourceJSON.sourceSpatialReference;
  if (!(null == $3 || G($3, m6))) return n.getLogger(d6).warnOnce(`SceneLayer (${c9.title ?? "Untitled layer"}, ${c9.id}) does not support geometry edits because the spatial reference of its associated FeatureLayer's service (wkid:${m6.wkid}) is different from its source spatial reference (wkid:${$3.wkid}).`), false;
  const {
    view: L7
  } = l6;
  if (l6.destroyed || null == L7) return false;
  const k6 = L7.spatialReference, {
    viewingMode: b2
  } = L7.state, v5 = A2(y5), h11 = b2 === l2.Global;
  if (v5 && !h11) return n.getLogger(d6).warnOnce(`SceneLayer (${c9.title ?? "Untitled layer"}, ${c9.id}) does not support geometry edits in local viewing mode because its spatial reference (wkid:${y5.wkid}) is geographic. Please consider changing the viewing mode to global.`), false;
  if (!v5 && h11) return n.getLogger(d6).warnOnce(`SceneLayer (${c9.title ?? "Untitled layer"}, ${c9.id}) does not support geometry edits in global viewing mode because its spatial reference (wkid:${y5.wkid}) is projected. Please consider changing the viewing mode to local.`), false;
  return !!(G(y5, k6) || h11 && w2(k6) && C2(y5)) || (n.getLogger(d6).warnOnce(`SceneLayer (${c9.title ?? "Untitled layer"}, ${c9.id}) does not support geometry edits because its spatial reference (wkid:${y5.wkid}) does not match the view spatial reference (wkid:${k6.wkid}).`), false);
}

// ../../../node_modules/@arcgis/core/widgets/Editor/support/EditorEditingCapabilities.js
var s12 = class extends p8 {
  constructor(e15) {
    super(e15), this.layerInfo = null, this.layerView = null;
  }
  get attachments() {
    const e15 = this.defaults.attachments.enabled, t5 = this.layerInfo;
    return {
      enabled: e15 && false !== t5?.enabled
    };
  }
  get create() {
    const {
      attachments: e15,
      defaults: t5,
      layerInfo: r13,
      layer: a10,
      layerView: l6
    } = this, n13 = t5.create, s15 = false !== r13?.enabled && false !== r13?.addEnabled, i11 = n13.enabled && s15;
    return {
      attributes: i11 && n13.attributes,
      enabled: i11,
      geometry: i11 && n13.geometry && o7(a10, l6),
      attachments: {
        enabled: e15.enabled && i11 && false !== r13?.attachmentsOnCreateEnabled
      },
      reliesOnOwnerAdminPrivileges: n13.reliesOnOwnerAdminPrivileges
    };
  }
  get defaults() {
    return new p8({
      layer: this.layer
    });
  }
  get delete() {
    const {
      defaults: e15,
      layerInfo: t5
    } = this, r13 = e15.delete, a10 = false !== t5?.enabled && false !== t5?.deleteEnabled;
    return {
      enabled: r13.enabled && a10,
      reliesOnOwnerAdminPrivileges: r13.reliesOnOwnerAdminPrivileges
    };
  }
  get formTemplate() {
    const {
      layer: e15,
      layerInfo: t5
    } = this;
    return t5?.formTemplate ? t5.formTemplate : e15 && "formTemplate" in e15 ? e15.formTemplate : null;
  }
  get relationship() {
    const {
      layer: e15
    } = this, t5 = !(!J(e15) || !e15.relationships?.length), r13 = !!this.formTemplate?.elements?.some((e16) => "relationship" === e16.type);
    return {
      enabled: t5 && r13
    };
  }
  get update() {
    const {
      attachments: e15,
      defaults: t5,
      layerInfo: r13,
      layer: a10,
      layerView: l6
    } = this, n13 = t5.update, s15 = false !== r13?.enabled && false !== r13?.updateEnabled, i11 = n13.enabled && s15, p12 = i11 && n13.attributes && false !== r13?.attributeUpdatesEnabled, d8 = i11 && n13.geometry && false !== r13?.geometryUpdatesEnabled && o7(a10, l6), m6 = e15.enabled && false !== r13?.attachmentsOnUpdateEnabled;
    return {
      attributes: p12,
      enabled: i11,
      geometry: d8,
      attachments: {
        enabled: m6,
        create: m6 && n13.attachments.create,
        update: m6 && n13.attachments.update
      },
      reliesOnOwnerAdminPrivileges: n13.reliesOnOwnerAdminPrivileges
    };
  }
};
function o7(e15, t5) {
  return "scene" !== e15.type || null != t5 && "type" in t5 && "scene-layer-3d" === t5.type && c5(e15, t5);
}
e3([y()], s12.prototype, "attachments", null), e3([y()], s12.prototype, "create", null), e3([y()], s12.prototype, "defaults", null), e3([y()], s12.prototype, "delete", null), e3([y()], s12.prototype, "formTemplate", null), e3([y()], s12.prototype, "layerInfo", void 0), e3([y()], s12.prototype, "layerView", void 0), e3([y()], s12.prototype, "relationship", null), e3([y()], s12.prototype, "update", null), s12 = e3([a2("esri.widgets.Editor.support.EditorEditingCapabilities")], s12);
var i7 = s12;

// ../../../node_modules/@arcgis/core/widgets/Editor/support/EditorItem.js
var a7 = class extends S {
  constructor(e15) {
    super(e15), this.disabled = false, this.layer = null, this.layerInfo = null, this.layerView = null;
  }
  get _suspended() {
    return !!this.layerView?.suspended;
  }
  get capabilities() {
    return new i7({
      layer: this.layer,
      layerInfo: this.layerInfo,
      layerView: this.layerView
    });
  }
  get editable() {
    const {
      create: e15,
      relationship: t5,
      update: r13,
      delete: {
        enabled: s15
      }
    } = this.capabilities, o9 = e15.attachments.enabled || r13.attachments.enabled;
    return !this.disabled && (e15.enabled || r13.enabled || o9 || s15 || t5.enabled);
  }
  get formTemplate() {
    return this.capabilities.formTemplate;
  }
  get hasInvalidFormTemplate() {
    return z(this.layer, this.formTemplate);
  }
  get isTable() {
    return k2(this.layer);
  }
  get supportsCreateFeaturesWorkflow() {
    if (this.disabled) return false;
    const {
      enabled: e15,
      geometry: t5
    } = this.capabilities.create;
    return this.isTable ? e15 : e15 && t5;
  }
  get supportsUpdateWorkflow() {
    const {
      capabilities: e15
    } = this;
    return !this.disabled && (e15.update.enabled || e15.update.attachments.enabled || e15.delete.enabled);
  }
  get visible() {
    const {
      layer: e15
    } = this, t5 = e15.parent;
    return !this._suspended && e15.visible && (!t5 || !("visible" in t5) || t5.visible);
  }
};
e3([y()], a7.prototype, "_suspended", null), e3([y()], a7.prototype, "capabilities", null), e3([y()], a7.prototype, "disabled", void 0), e3([y()], a7.prototype, "editable", null), e3([y()], a7.prototype, "formTemplate", null), e3([y()], a7.prototype, "hasInvalidFormTemplate", null), e3([y()], a7.prototype, "isTable", null), e3([y()], a7.prototype, "layer", void 0), e3([y()], a7.prototype, "layerInfo", void 0), e3([y()], a7.prototype, "layerView", void 0), e3([y()], a7.prototype, "supportsCreateFeaturesWorkflow", null), e3([y()], a7.prototype, "supportsUpdateWorkflow", null), e3([y()], a7.prototype, "visible", null), a7 = e3([a2("esri.widgets.Editor.support.EditorItem")], a7);
var p9 = a7;

// ../../../node_modules/@arcgis/core/widgets/Editor/EditorViewModel.js
var H2 = "esri.widgets.Editor.EditorViewModel";
var x5 = () => n.getLogger(H2);
var D2 = ["create-features", "update"];
function G3(t5, e15, a10) {
  x5().error(new s(t5, e15, a10));
}
function q3(t5, e15) {
  return t5?.find((t6) => t6.layer === e15);
}
var B4 = class extends o3.EventedAccessor {
  constructor(t5) {
    super(t5), this._sketchEventListenerHandle = null, this._sketchGraphicsLayer = new h4({
      listMode: "hide",
      internal: true
    }), this._snappingManager = null, this._updateItemsTask = null, this._updatingHandles = new h3(), this._featureTemplatesViewModelLocked = false, this.activeWorkflow = null, this._activityQueue = new V(), this.editorItems = new V(), this.failures = [], this.hideTemplatesForInactiveLayers = false, this.attachmentsViewModel = new y3({
      capabilities: {
        editing: true
      }
    }), this.featureTemplatesViewModel = new h6({
      disabledItemFunction: ({
        layer: t6
      }) => this._itemIsSuspended(t6)
    }), this.layerInfos = null, this.ownSketchViewModel = new pe({
      layer: this._sketchGraphicsLayer
    }), this.sketchOptions = new l4(), this.snappingOptions = new c3({
      attributeRulesEnabled: true
    }), this.spinnerViewModel = new p2(), this.pageStack = [], this.showDiscardEditsPrompt = () => Promise.resolve(true), this._candidateCommitted = false, this.back = () => __async(this, null, function* () {
      this.canGoBack && (this.activeWorkflow?.hasPreviousStep ? yield this.activeWorkflow.back(this.showDiscardEditsPrompt) : yield this._cancelWorkflow({
        force: !this.hasPendingEdits
      }));
    }), this.saveWorkflow = () => __async(this, null, function* () {
      const {
        featureFormViewModel: t6
      } = this;
      if (t6) {
        if (t6.submit(), !t6.submittable || t6.hasPendingSubtypeChoice) return;
        const e15 = t6.getValues();
        if (t6.validateContingencyConstraints(e15, {
          includeIncompleteViolations: true
        }).length > 0) return;
      }
      yield this.activeWorkflow?.save();
    }), this.selectFeature = (t6, e15 = false) => {
      const a10 = this.activeWorkflow;
      this._candidateCommitted || "update" !== a10?.type || (a10.data.rootFeature = t6, e15 && (a10.next(), this._candidateCommitted = true));
    };
  }
  initialize() {
    this.addHandles([d2(() => {
      const t5 = this.view, e15 = t5?.map?.editableLayers, a10 = t5?.allLayerViews, r13 = a10?.filter((t6) => !!e15?.includes(t6.layer));
      return [e15, r13, this.layerInfos, this.allowedWorkflows];
    }, () => this._updateEditorItems(), A), d2(() => this.hideTemplatesForInactiveLayers, () => this.syncFeatureTemplates()), v(() => this.activeWorkflow, "cancel", () => this.emit("workflow-cancel")), v(() => this.activeWorkflow, "commit", () => this.emit("workflow-commit")), v(() => this.activeWorkflow, "complete", () => {
      this.emit("workflow-commit"), this._set("activeWorkflow", null);
    }), p(() => this.view?.map, (t5) => t5.add(this._sketchGraphicsLayer), P), v(() => this.editorItems, "change", () => this._afterEditorItemsChange()), d2(() => [this.canCreate, this.canUpdateVisible], () => this._afterEditorItemsChange()), d2(() => this.page, (t5, e15) => {
      const a10 = [...this.pageStack];
      if (-1 === a10.indexOf(t5)) a10.push(t5);
      else for (; a10.length && a10.at(-1) !== t5; ) a10.pop();
      this.pageStack = a10;
    }, A), p(() => "awaiting-update-feature-candidate" === this.state, () => this._candidateCommitted = false), v(() => this.featureTemplatesViewModel, "select", (_0) => __async(this, [_0], function* ({
      item: t5,
      oldItem: e15
    }) {
      const {
        activeWorkflow: a10
      } = this;
      if (a10) {
        if ("update" === a10.type && "awaiting-feature-creation-info" === a10.activeWorkflow?.stepId) return;
        try {
          yield this.cancelWorkflow({
            force: !this.hasPendingEdits
          });
        } catch {
          return void this.featureTemplatesViewModel.select(e15, {
            emit: false
          });
        }
      }
      if (!t5) return;
      const r13 = {
        layer: t5.layer,
        template: t5.template
      };
      if (t5.supportsUpload) return this.featureTemplatesViewModel.select(e15, {
        emit: false
      }), this.startCreateFeaturesWorkflow(r13);
      this.startCreateFeaturesWorkflowAtFeatureCreation(r13);
    })), v(() => this.view, "key-down", (t5) => {
      "Escape" === t5.key && this.activeWorkflow?.keyboardCancellationEnabled && (t5.stopPropagation(), this.back());
    }), v(() => this.sketchViewModel, ["create", "delete", "update"], (t5) => {
      const {
        activeWorkflow: e15
      } = this, a10 = "update" === e15?.type, r13 = a10 ? e15.activeWorkflow?.layer : e15?.layer, i11 = a10 ? e15?.activeWorkflow?.parentLayer : void 0, s15 = `sketch-${t5.type}`;
      this.emit(s15, {
        type: s15,
        detail: t5,
        layer: r13,
        parentLayer: i11
      });
    }, C), d2(() => this.view, (t5) => {
      if (this._snappingManager = u(this._snappingManager), !t5) return;
      const e15 = this.snappingOptions;
      this._snappingManager = new I3({
        view: t5,
        options: e15
      });
    }, A), d2(() => this.snappingOptions, (t5) => {
      this._snappingManager && (this._snappingManager.options = t5);
    }, A)]);
  }
  destroy() {
    this._cancelWorkflow({
      warnIfNoWorkflow: false
    }).then(() => {
      this.view?.map?.remove(this._sketchGraphicsLayer), this.view = null;
    }), this._updateItemsTask = e(this._updateItemsTask), this._updatingHandles.destroy(), this._sketchEventListenerHandle = l(this._sketchEventListenerHandle);
  }
  get allowedWorkflows() {
    return this._get("allowedWorkflows");
  }
  set allowedWorkflows(t5) {
    i(n.getLogger(this), "allowedWorkflows", {
      replacement: "Editor.visibleElements",
      version: "4.29",
      warnOnce: true
    }), t5 && 0 !== t5.length || (t5 = [...D2]), this._set("allowedWorkflows", t5);
  }
  get canCreate() {
    return this.editorItems.some((t5) => t5.supportsCreateFeaturesWorkflow);
  }
  get canCreateVisible() {
    return !!this.featureTemplatesLayers.length;
  }
  get canUpdate() {
    return this.editorItems.some((t5) => t5.supportsUpdateWorkflow);
  }
  get canUpdateVisible() {
    return this.editorItems.some((t5) => t5.supportsUpdateWorkflow && t5.visible);
  }
  get featureTemplatesLayers() {
    const t5 = new V();
    for (const e15 of this.editorItems) {
      const a10 = e15.supportsCreateFeaturesWorkflow && !e15.isTable, r13 = this.hideTemplatesForInactiveLayers && !e15.visible;
      a10 && !r13 && t5.push(e15.layer);
    }
    return t5;
  }
  get editableItems() {
    return i(n.getLogger(this), "editableItems", {
      replacement: "editorItems",
      version: "4.29",
      warnOnce: true
    }), this.editorItems.map((t5) => {
      const {
        capabilities: e15,
        disabled: a10,
        hasInvalidFormTemplate: r13,
        layer: i11
      } = t5, s15 = [], o9 = e15.create, n13 = e15.update, l6 = e15.delete;
      return o9.enabled && s15.push("create"), n13.enabled && s15.push("update"), l6.enabled && s15.push("delete"), {
        layer: i11,
        supports: s15,
        suspended: a10,
        attributeUpdatesEnabled: n13.attributes,
        geometryUpdatesEnabled: n13.geometry,
        attachmentsOnCreateEnabled: o9.attachments.enabled,
        attachmentsOnUpdateEnabled: n13.attachments.enabled,
        hasInvalidFormTemplate: r13,
        hasAttachments: e15.attachments.enabled
      };
    });
  }
  get featureFormViewModel() {
    const {
      activeWorkflow: t5
    } = this;
    return "update" === t5?.type ? t5.activeFeatureFormViewModel : "create-features" === t5?.type ? t5.featureFormViewModel : null;
  }
  get labelOptions() {
    return this.sketchOptions.labels;
  }
  set labelOptions(t5) {
    this.sketchOptions.labels = t5;
  }
  get sketchViewModel() {
    const {
      activeWorkflow: t5
    } = this;
    return "update" === t5?.type ? t5.activeSketchViewModel : "create-features" === t5?.type ? t5.sketchViewModel : this.ownSketchViewModel;
  }
  get state() {
    if (!this.view?.ready) return "disabled";
    const t5 = this.attachmentsViewModel.mode;
    if ("add" === t5) return "adding-attachment";
    if ("edit" === t5) return "editing-attachment";
    const {
      activeWorkflow: e15
    } = this;
    return e15?.stepId ? "update" === e15.type && e15.activeWorkflow?.stepId ? e15.activeWorkflow.stepId : e15.stepId : "ready";
  }
  get syncing() {
    return this._activityQueue.length > 0;
  }
  get updating() {
    return this._updatingHandles.updating || true === this.activeWorkflow?.updating;
  }
  get tooltipOptions() {
    return this.sketchOptions.tooltips;
  }
  set tooltipOptions(t5) {
    this.sketchOptions.tooltips = t5;
  }
  get valueOptions() {
    return this.sketchOptions.values;
  }
  set valueOptions(t5) {
    this.sketchOptions.values = t5;
  }
  set view(t5) {
    this.ownSketchViewModel.view = t5, this.spinnerViewModel.view = t5, this._set("view", t5);
  }
  get page() {
    const {
      activeWorkflow: t5,
      state: e15
    } = this;
    if ("update" === t5?.type && "awaiting-feature-to-update" === t5.stepId) return "ready";
    if ("create-features" === t5?.type && 0 === t5.numPendingFeatures) {
      const e16 = t5.data.upload;
      if (e16) return "default" === e16.state ? "ready" : "creating-features-upload-details";
    }
    return e15 ?? "disabled";
  }
  get featureFormDisabled() {
    const {
      activeWorkflow: t5
    } = this;
    return "update" === t5?.type && false === t5.activeEditorItem?.capabilities.update.attributes;
  }
  get canGoBack() {
    return null != this.activeWorkflow && !this.syncing;
  }
  get shouldShowDeleteButton() {
    const {
      activeWorkflow: t5
    } = this;
    return !!t5 && "update" === t5.type && !!t5.activeEditorItem?.capabilities.delete.enabled;
  }
  get hasPendingEdits() {
    return this.activeWorkflow?.hasPendingEdits ?? false;
  }
  startCreateFeaturesWorkflowAtFeatureTypeSelection() {
    return __async(this, null, function* () {
      return this.startCreateFeaturesWorkflow();
    });
  }
  startCreateFeaturesWorkflowAtFeatureCreation(t5) {
    return __async(this, null, function* () {
      return this.startCreateFeaturesWorkflow(t5, "creating-features");
    });
  }
  startCreateFeaturesWorkflow(t5, e15 = "awaiting-feature-creation-info") {
    return __async(this, null, function* () {
      if (yield w(() => !this.updating), !this.canCreate) throw new s("editing:unsupported-workflow", "Creating features is unsupported or disabled.");
      const a10 = this._createUpdatingResolver();
      try {
        yield this._cancelWorkflow();
        const a11 = this._createCreateFeaturesWorkflow(t5, e15);
        this._set("activeWorkflow", a11), yield a11.start();
      } catch (r13) {
        this._logErrorAndCancelWorkflow(r13);
      } finally {
        a10.resolve();
      }
    });
  }
  startCreateFeaturesWorkflowAtFeatureEdit(t5) {
    return __async(this, null, function* () {
      yield w(() => !this.updating);
      const e15 = this._createUpdatingResolver();
      try {
        const {
          initialFeature: e16
        } = t5, a10 = e16.sourceLayer = e16.layer, r13 = a10 ? this.findEditorItemForLayer(a10) : void 0;
        if (!r13?.supportsCreateFeaturesWorkflow) throw new s("editing:unsupported-workflow", "Creating features is unsupported or disabled for this layer.");
        yield this._cancelWorkflow();
        const s15 = this._createCreateFeaturesWorkflow({
          initialFeature: e16,
          layer: r13.layer,
          maxFeatures: 1
        }, "creating-features");
        this._set("activeWorkflow", s15), yield s15.start();
      } catch (a10) {
        this._logErrorAndCancelWorkflow(a10);
      } finally {
        e15.resolve();
      }
    });
  }
  startUpdateWorkflowAtFeatureSelection() {
    return __async(this, null, function* () {
      if (yield w(() => !this.updating), !this.canUpdate) return void G3("editing:unsupported-workflow", "Update workflow is unsupported or disabled.");
      const t5 = this._createUpdatingResolver();
      try {
        yield this._cancelWorkflow();
        const t6 = this._createUpdateWorkflow();
        this._set("activeWorkflow", t6), yield t6.start();
      } catch (e15) {
        this._logErrorAndCancelWorkflow(e15);
      } finally {
        t5.resolve();
      }
    });
  }
  startUpdateWorkflowAtMultipleFeatureSelection(t5) {
    return __async(this, null, function* () {
      if (yield w(() => !this.updating), !this.canUpdate) return void G3("editing:unsupported-workflow", "Update workflow is unsupported or disabled.");
      const e15 = this._createUpdatingResolver();
      try {
        yield this._cancelWorkflow();
        const e16 = this._createUpdateWorkflow("awaiting-update-feature-candidate");
        e16.data.candidates = t5, this._set("activeWorkflow", e16), yield e16.start();
      } catch (a10) {
        this._logErrorAndCancelWorkflow(a10);
      } finally {
        e15.resolve();
      }
    });
  }
  startUpdateWorkflowAtFeatureEdit(t5) {
    return __async(this, null, function* () {
      if (yield w(() => !this.updating), !this.canUpdate) return void G3("editing:unsupported-workflow", "Update workflow is unsupported or disabled.");
      const e15 = this._createUpdatingResolver();
      try {
        yield this._cancelWorkflow();
        const e16 = this._createUpdateWorkflow("editing-existing-feature");
        e16.data.rootFeature = t5, this._set("activeWorkflow", e16), yield e16.start();
      } catch (a10) {
        this._logErrorAndCancelWorkflow(a10);
      } finally {
        e15.resolve();
      }
    });
  }
  deleteFeatureFromWorkflow() {
    return __async(this, null, function* () {
      const {
        activeWorkflow: t5
      } = this;
      t5 && "update" === t5.type ? yield t5.deleteActiveFeature() : G3("editing:unsupported-workflow", "Deleting requires an active update workflow.");
    });
  }
  cancelWorkflow(t5) {
    return __async(this, null, function* () {
      return this._cancelWorkflow(__spreadValues({
        warnIfNoWorkflow: true
      }, t5));
    });
  }
  findEditorItemForLayer(t5) {
    return this.editorItems.find((e15) => e15.layer === t5);
  }
  itemHasInvalidFormTemplate(t5) {
    return null != t5 && true === this.findEditorItemForLayer(t5.layer)?.hasInvalidFormTemplate;
  }
  syncFeatureTemplates() {
    this._featureTemplatesViewModelLocked || (this.featureTemplatesViewModel.layers = this.featureTemplatesLayers.toArray());
  }
  toggleUpdateWorkflow() {
    return __async(this, null, function* () {
      this.canUpdate && (this.hasPendingEdits && !(yield this.showDiscardEditsPrompt()) || (this.activeWorkflow && "awaiting-feature-to-update" === this.state ? yield this.cancelWorkflow({
        force: true
      }) : yield this.startUpdateWorkflowAtFeatureSelection()));
    });
  }
  lockFeatureTemplatesViewModel() {
    return this._featureTemplatesViewModelLocked = true, e2(() => {
      this._featureTemplatesViewModelLocked = false, this.syncFeatureTemplates();
    });
  }
  _getEditorItemCandidates(t5) {
    return __async(this, null, function* () {
      const {
        view: e15
      } = this;
      if (!e15?.map) return [];
      const {
        map: a10
      } = e15, r13 = a10.editableLayers.toArray() ?? [], i11 = a10.allTables.toArray().filter(r3) ?? [];
      return yield Promise.allSettled([...r13.map((t6) => "subtype-group" === t6.type ? t6.loadAll() : Promise.resolve()), ...i11.map((t6) => t6.load())]), s2(t5), [...r13.reverse(), ...i11.reverse()].filter((t6) => e9(t6) && ("mesh" !== t6.geometryType || "3d" === e15.type)).flatMap((t6) => "subtype-group" === t6.type ? t6.sublayers.toArray() : t6);
    });
  }
  _drainEditorItems() {
    this.editorItems.drain((t5) => t5.destroy());
  }
  _updateEditorItems() {
    return __async(this, null, function* () {
      e(this._updateItemsTask);
      const {
        view: t5
      } = this, a10 = d((e15) => __async(this, null, function* () {
        if (!t5?.map || !t5?.allLayerViews) return;
        const a11 = yield this._getEditorItemCandidates(e15);
        if (!a11.length) return void this._drainEditorItems();
        const r13 = [], i11 = [], s15 = [], {
          layerInfos: o9
        } = this;
        for (const l6 of a11) {
          const e16 = q3(o9, l6), a12 = yield le(t5, l6).catch(() => null);
          (e16 ? r13 : a12 ? i11 : s15).push(new p9({
            layer: l6,
            layerInfo: e16,
            layerView: a12
          }));
        }
        o9?.length && r13.sort((t6, e16) => o9.findIndex(({
          layer: e17
        }) => e17 === t6.layer) - o9.findIndex(({
          layer: t7
        }) => t7 === e16.layer));
        const n13 = [...r13, ...i11, ...s15];
        e15.aborted || (this._drainEditorItems(), this.editorItems.addMany(n13));
      }));
      this._updatingHandles.addPromise(a10.promise), this._updateItemsTask = a10;
    });
  }
  _afterEditorItemsChange() {
    const {
      activeWorkflow: t5
    } = this;
    if (this.syncFeatureTemplates(), !t5) return;
    const {
      stepId: e15
    } = t5;
    "create-features" !== t5.type ? "update" === t5.type && ("awaiting-feature-to-update" === e15 && !this.canUpdateVisible || "awaiting-update-feature-candidate" === e15 && !t5.hasUpdatableCandidates) && this._cancelWorkflow() : "awaiting-feature-creation-info" !== e15 || this.canCreate || this._cancelWorkflow();
  }
  _cancelWorkflow(t5) {
    return __async(this, null, function* () {
      const e15 = this.activeWorkflow;
      if (!e15) return void (t5?.warnIfNoWorkflow && G3("editing:no-active-workflow", "There is no active workflow to cancel."));
      if (!t5 || false !== t5.force) return this.emit("workflow-cancel"), this._set("activeWorkflow", null), void (yield e15.cancel(t5));
      yield e15.cancel(t5), this._set("activeWorkflow", null);
    });
  }
  _createCreateFeaturesWorkflow(t5, e15) {
    return K3.create({
      viewModel: this,
      creationInfo: t5,
      sketchOptions: this.sketchOptions,
      snappingManager: this._snappingManager,
      startAt: e15,
      applyEditsCallback: (t6, e16, a10) => this._applyEdits(t6, e16, a10),
      addAttachmentsCallback: (t6, e16) => this._addAttachments(t6, e16)
    });
  }
  _createUpdateWorkflow(t5) {
    return L6.create({
      viewModel: this,
      sketchOptions: this.sketchOptions,
      snappingManager: this._snappingManager,
      startAt: t5,
      applyEditsCallback: (t6, e15, a10) => this._applyEdits(t6, e15, a10),
      addAttachmentsCallback: (t6, e15) => this._addAttachments(t6, e15)
    });
  }
  _addAttachments(t5, e15) {
    const a10 = e15.map((e16) => this._addAttachment(t5, e16.feature, e16.attachment)) ?? [];
    return Promise.all(a10);
  }
  _addAttachment(t5, e15, a10) {
    return __async(this, null, function* () {
      let r13 = null;
      if (!("addAttachment" in t5) || null == t5.capabilities?.attachment) throw new s("editor:attachments-not-supported", "Adding attachments is not supported for this layer type");
      return yield this._queueOperation(() => __async(this, null, function* () {
        return r13 = (yield t5.addAttachment?.(e15, a10).catch((t6) => {
          throw t6?.error || t6;
        })) ?? null, r13;
      })), r13;
    });
  }
  _applyEdits(t5, e15, a10) {
    return __async(this, null, function* () {
      let r13 = null;
      const i11 = t5.url ? yield x(t5.url) : null, s15 = __spreadValues({
        returnServiceEditsOption: (!i11 || !s4(i11)) && !RegExp("/hosted/", "i").test(t5.url) ? "original-and-current-features" : void 0
      }, a10);
      return yield this._queueOperation(() => __async(this, null, function* () {
        const {
          view: a11
        } = this;
        if (!a11) return null;
        const i12 = yield le(a11, t5).catch(() => null);
        return r13 = yield t5.applyEdits(e15, s15), i12 && (yield w(() => !i12.updating)), r13;
      })), r13;
    });
  }
  _queueOperation(t5) {
    this._activityQueue.push(t5);
    const e15 = (t6, e16) => {
      const a10 = e16.indexOf(t6);
      a10 > -1 && e16.splice(a10, 1);
    };
    return t5().then((t6) => {
      if (null != t6 && "error" in t6 && null != t6.error) throw t6.error;
      if (null != t6 && "addFeatureResults" in t6) {
        const {
          addFeatureResults: e16,
          deleteFeatureResults: a10,
          updateFeatureResults: r13
        } = t6, i11 = e16.find((t7) => !!t7.error) || r13.find((t7) => !!t7.error) || a10.find((t7) => !!t7.error);
        if (i11) throw i11.error;
      }
      return t6;
    }).catch((a10) => {
      G3("editing:operation-error", "An error occurred.", {
        error: a10
      });
      const r13 = {
        error: a10,
        retry: () => (e15(r13, this.failures), this._queueOperation(t5)),
        cancel: () => {
          e15(r13, this.failures);
        }
      };
      this._set("failures", [...this.failures, r13]);
    }).then(() => {
      e15(t5, this._activityQueue);
    });
  }
  _createUpdatingResolver() {
    const t5 = L2();
    return this._updatingHandles.addPromise(t5.promise), t5;
  }
  _logErrorAndCancelWorkflow(t5) {
    const {
      name: e15,
      message: a10,
      details: r13
    } = t5;
    G3(e15 ?? "editing:workflow-start-failed", a10 ?? void 0, r13 ?? t5), this._cancelWorkflow({
      force: true
    });
  }
  _itemIsSuspended(t5) {
    const e15 = this.findEditorItemForLayer(t5);
    return null != e15 && (!e15.visible || e15.disabled);
  }
};
e3([y({
  readOnly: true
})], B4.prototype, "activeWorkflow", void 0), e3([y({
  readOnly: true
})], B4.prototype, "_activityQueue", void 0), e3([y({
  value: [...D2]
})], B4.prototype, "allowedWorkflows", null), e3([y({
  readOnly: true
})], B4.prototype, "canCreate", null), e3([y()], B4.prototype, "canCreateVisible", null), e3([y({
  readOnly: true
})], B4.prototype, "canUpdate", null), e3([y()], B4.prototype, "canUpdateVisible", null), e3([y()], B4.prototype, "featureTemplatesLayers", null), e3([y()], B4.prototype, "editableItems", null), e3([y()], B4.prototype, "editorItems", void 0), e3([y({
  readOnly: true
})], B4.prototype, "failures", void 0), e3([y()], B4.prototype, "hideTemplatesForInactiveLayers", void 0), e3([y()], B4.prototype, "attachmentsViewModel", void 0), e3([y()], B4.prototype, "featureFormViewModel", null), e3([y()], B4.prototype, "featureTemplatesViewModel", void 0), e3([y()], B4.prototype, "labelOptions", null), e3([y()], B4.prototype, "layerInfos", void 0), e3([y()], B4.prototype, "ownSketchViewModel", void 0), e3([y()], B4.prototype, "sketchOptions", void 0), e3([y()], B4.prototype, "sketchViewModel", null), e3([y({
  type: c3,
  nonNullable: true
})], B4.prototype, "snappingOptions", void 0), e3([y()], B4.prototype, "spinnerViewModel", void 0), e3([y()], B4.prototype, "state", null), e3([y({
  readOnly: true
})], B4.prototype, "syncing", null), e3([y()], B4.prototype, "updating", null), e3([y()], B4.prototype, "tooltipOptions", null), e3([y()], B4.prototype, "valueOptions", null), e3([y()], B4.prototype, "view", null), e3([y()], B4.prototype, "pageStack", void 0), e3([y()], B4.prototype, "showDiscardEditsPrompt", void 0), e3([y()], B4.prototype, "_candidateCommitted", void 0), e3([y()], B4.prototype, "page", null), e3([y()], B4.prototype, "featureFormDisabled", null), e3([y()], B4.prototype, "canGoBack", null), e3([y()], B4.prototype, "shouldShowDeleteButton", null), e3([y()], B4.prototype, "hasPendingEdits", null), B4 = e3([a2(H2)], B4);
var Q2 = B4;

// ../../../node_modules/@arcgis/core/widgets/Editor/VisibleElements.js
var r6 = class extends S {
  constructor(o9) {
    super(o9), this.createFeaturesSection = true, this.directionModePicker = false, this.editFeaturesSection = true, this.labelsToggle = true, this.settingsMenu = true, this.snappingControls = true, this.snappingControlsElements = new s9(), this.tooltipsToggle = true, this.undoRedoButtons = false;
  }
};
e3([y({
  type: Boolean,
  nonNullable: true
})], r6.prototype, "createFeaturesSection", void 0), e3([y({
  type: Boolean,
  nonNullable: true
})], r6.prototype, "directionModePicker", void 0), e3([y({
  type: Boolean,
  nonNullable: true
})], r6.prototype, "editFeaturesSection", void 0), e3([y({
  type: Boolean,
  nonNullable: true
})], r6.prototype, "labelsToggle", void 0), e3([y({
  type: Boolean,
  nonNullable: true
})], r6.prototype, "settingsMenu", void 0), e3([y({
  type: Boolean,
  nonNullable: true
})], r6.prototype, "snappingControls", void 0), e3([y({
  type: s9,
  nonNullable: true
})], r6.prototype, "snappingControlsElements", void 0), e3([y({
  type: Boolean,
  nonNullable: true
})], r6.prototype, "tooltipsToggle", void 0), e3([y({
  type: Boolean,
  nonNullable: true
})], r6.prototype, "undoRedoButtons", void 0), r6 = e3([a2("esri.widgets.Editor.VisibleElements")], r6);
var l5 = r6;

// ../../../node_modules/@arcgis/core/widgets/Editor/components/PanelContent.js
var n10 = "esri-editor__panel-content";
var o8 = {
  base: n10,
  message: `${n10}__message`,
  section: `${n10}__section`,
  sectionGroup: `${n10}__section__group`,
  scrimContainer: `${n10}__scrim-container`
};
var i8 = () => r2({
  scrim: () => import("./calcite-scrim-GBXWCUR2.js")
});
function c6(e15, ...n13) {
  return n2("div", {
    class: f3(o8.base, e15?.showScrimOverlay ? o8.scrimContainer : void 0),
    key: e15?.key ?? "panel-content"
  }, ...n13, e15?.showScrimOverlay ? n2("calcite-scrim", null) : void 0);
}
function r7(e15, ...t5) {
  return n2("div", {
    class: o8.message,
    "data-testid": "panel-content-message",
    key: e15?.key ?? "panel-content-message"
  }, ...t5);
}
function a8(e15, ...t5) {
  return n2("div", {
    class: o8.section,
    key: e15?.key ?? "panel-content-section"
  }, ...t5);
}
function p10(e15, ...t5) {
  return n2("div", {
    class: o8.sectionGroup,
    key: e15?.key ?? "panel-content-section-group"
  }, ...t5);
}

// ../../../node_modules/@arcgis/core/widgets/Editor/components/CreateFeaturesPanelContent.js
var r8 = () => i8();
function s13({
  helpMessage: t5
}) {
  return n2(c6, {
    key: "creating-features-panel-content"
  }, n2(r7, {
    key: "content-message"
  }, t5));
}

// ../../../node_modules/@arcgis/core/widgets/Editor/components/FeatureList.js
var i9 = () => i8();
function n11({
  editorItems: t5,
  filterText: r13,
  id: i11,
  messagesTemplates: n13,
  onFilterTextChange: m6,
  onSelectFeature: c9,
  workflow: u6
}) {
  const f7 = /* @__PURE__ */ new Map(), p12 = u6.data.candidates;
  let y5 = 0;
  p12.map((e15) => ({
    label: d7(e15),
    id: e15.attributes[e15.layer.objectIdField],
    data: e15
  })).filter(({
    label: e15,
    data: a10
  }) => {
    const l6 = r13.toLowerCase(), {
      title: o9
    } = a10.layer, s15 = t5.find((e16) => e16.layer === a10.sourceLayer);
    return s15 ? s15.supportsUpdateWorkflow && (!l6 || e15?.toLowerCase().includes(l6) || o9?.toLowerCase().includes(l6)) : null;
  }).filter(O).forEach((e15) => {
    y5++;
    const t6 = e15.data.layer;
    f7.has(t6) ? f7.get(t6)?.items.push(e15) : f7.set(t6, {
      id: `${t6.id}`,
      label: t6.title ?? "",
      items: [e15]
    });
  });
  const h11 = t5.toArray().map(({
    layer: e15
  }) => f7.get(e15)).filter(O), I4 = y5 > 10 || r13.length > 0;
  return n2(c6, {
    key: "feature-list"
  }, n2(a8, null, o5({
    enableListScroll: false,
    filterEnabled: I4,
    filterText: r13,
    id: i11,
    items: h11,
    messages: {
      filterPlaceholder: n13.filterPlaceholder,
      noItems: n13.noItems,
      noMatches: n13.noMatches
    },
    onFilterChange: (e15) => m6(e15),
    onItemMouseEnter: (e15) => c9(e15.data),
    onItemMouseLeave: () => c9(null),
    onItemSelect: (e15) => c9(e15.data, true)
  })));
}
function d7(e15) {
  const r13 = e15.layer;
  if (!r13) return null;
  const a10 = r13.fieldsIndex.get(r13.objectIdField), l6 = a10.alias || a10.name, {
    attributes: o9
  } = e15, s15 = _(r13);
  return s15 && o9[s15] && `${o9[s15]}` || `${l6}: ${o9[a10.name]}`;
}

// ../../../node_modules/@arcgis/core/widgets/Editor/components/FooterActions.js
var i10 = {
  base: "esri-editor__actions"
};
var e14 = () => r2({
  button: () => import("./calcite-button-LAMWLR56.js")
});
function r9({
  buttons: o9,
  key: e15
}) {
  return n2("div", {
    class: i10.base,
    key: e15 ?? "footer-actions",
    slot: "footer"
  }, o9.filter(O).map((_a, r13) => {
    var _b = _a, {
      disabled: t5,
      onClick: o10,
      label: i11
    } = _b, e16 = __objRest(_b, [
      "disabled",
      "onClick",
      "label"
    ]);
    return n2("calcite-button", __spreadValues({
      disabled: t5 ?? false,
      key: `action-${r13}`,
      onclick: () => {
        t5 || o10();
      },
      slot: "footer-actions",
      width: "full"
    }, e16), i11);
  }));
}

// ../../../node_modules/@arcgis/core/widgets/Editor/components/Notices.js
var t4 = {
  notice: "esri-editor__notice"
};
var r10 = () => r2({
  notice: () => import("./calcite-notice-GSFPF5BZ.js")
});
function n12({
  workflow: o9,
  messages: t5
}) {
  return n2(i2, null, o9?.reliesOnOwnerAdminPrivileges ? n2(c7, {
    message: t5.ownerAdminNotice
  }) : void 0, o9?.hasInvalidFormTemplate ? n2(c7, {
    icon: a5,
    message: t5.formFieldUpdateError
  }) : void 0);
}
function c7(_a) {
  var _b = _a, {
    message: e15
  } = _b, o9 = __objRest(_b, [
    "message"
  ]);
  return n2("calcite-notice", __spreadValues({
    class: t4.notice,
    open: true,
    scale: "s"
  }, o9), n2("div", {
    slot: "message"
  }, e15));
}

// ../../../node_modules/@arcgis/core/widgets/Editor/components/Settings.js
var r11 = {
  settingsContainer: "esri-editor__settings"
};
var p11 = () => r2({
  accordion: () => import("./calcite-accordion-HHLYNS2T.js"),
  "accordion-item": () => import("./calcite-accordion-item-DA6TOFIJ.js")
});
function c8({
  editorViewModel: t5,
  messagesCommon: p12,
  visibleElements: c9
}) {
  const {
    snappingOptions: l6,
    sketchOptions: a10,
    view: m6
  } = t5, g4 = [], d8 = {
    directionModePicker: c9.directionModePicker,
    labelsToggle: c9.labelsToggle,
    tooltipsToggle: c9.tooltipsToggle
  };
  return T(d8) && g4.push(n2(k3, {
    sketchOptions: a10,
    viewType: m6?.type,
    visibleElements: d8
  })), c9.snappingControls && g4.push(n2(L4, {
    afterCreate: (t6) => t6.layerListOpen = false,
    snappingOptions: l6,
    view: m6,
    visibleElements: c9.snappingControlsElements ?? new s9()
  })), 0 === g4.length ? null : n2("calcite-accordion", {
    appearance: "transparent",
    class: r11.settingsContainer,
    key: "settings"
  }, n2("calcite-accordion-item", {
    "data-testid": "settings",
    heading: p12.settings,
    iconStart: "gear"
  }, g4));
}

// ../../../node_modules/@arcgis/core/widgets/Editor/components/PanelToolbar.js
var s14 = {
  base: "esri-editor__panel-toolbar"
};
var a9 = () => Promise.all([r2({
  button: () => import("./calcite-button-LAMWLR56.js")
}), p11()]);
function r12({
  editorViewModel: e15,
  messagesCommon: t5,
  visibleElements: a10
}) {
  const {
    sketchViewModel: r13
  } = e15;
  return n2("div", {
    class: s14.base,
    key: "panel-toolbar"
  }, n2(c8, {
    editorViewModel: e15,
    messagesCommon: t5,
    visibleElements: a10
  }), a10.undoRedoButtons ? [n2("calcite-button", {
    alignment: "center",
    appearance: "transparent",
    disabled: !r13?.canUndo(),
    iconStart: "undo",
    key: "undo-button",
    kind: "neutral",
    label: t5.undo,
    onclick: () => r13?.undo(),
    scale: "l"
  }, t5.undo), n2("calcite-button", {
    alignment: "center",
    appearance: "transparent",
    disabled: !r13?.canRedo(),
    iconStart: "redo",
    key: "redo-button",
    kind: "neutral",
    label: t5.redo,
    onclick: () => r13?.redo(),
    scale: "l"
  }, t5.redo)] : null);
}

// ../../../node_modules/@arcgis/core/widgets/Editor/components/UpdateFeaturePanelContent.js
var f5 = () => Promise.all([e14(), r10(), i8()]);
function h9({
  editorViewModel: t5,
  headingLevel: n13,
  messages: r13,
  messagesCommon: f7,
  onDelete: h11,
  onSave: g4,
  renderAttachments: v5,
  renderFeatureForm: k6
}) {
  const {
    activeWorkflow: w4,
    featureFormViewModel: y5,
    syncing: F2
  } = t5;
  if (!w4 || !y5) return null;
  const b2 = w4.type, j2 = "activeWorkflow" in w4 ? w4.activeWorkflow : void 0, P4 = j2?.type, S2 = j2 && !j2.hasPendingEdits || "update" === b2 && !w4.hasPendingEdits || F2 || y5.updating, C5 = "update" === b2 && "create-features" !== P4 ? f7.update : f7.create, A4 = "create-features" === b2 && "create-new" === w4.createFeatureState, T3 = "create-features" === b2 ? w4.numPendingFeatures : 0, W3 = T3 > 1 ? s5(r13.createFeaturesTemplate, {
    numFeatures: T3
  }) : C5, x6 = w4.shouldShowAttachments && !y5.activeRelationshipInput, D3 = y5.inputs.every((e15) => !e15.visible) && !x6 ? n2(r7, {
    key: "panel-content-message"
  }, s5(r13.clickToFinishTemplate, {
    button: C5
  })) : n2(a8, {
    key: "panel-content-section"
  }, n2(n12, {
    messages: r13,
    workflow: w4
  }), n2(p10, null, k6(), x6 ? n2("div", {
    key: "attachments"
  }, n2(e7, {
    level: n4(n13)
  }, r13.attachments), v5()) : null));
  return n2(i2, null, n2(c6, {
    key: "attribute-panel-content",
    showScrimOverlay: A4
  }, D3), n2(r9, {
    buttons: [{
      onClick: g4,
      disabled: S2,
      label: W3
    }, t5.shouldShowDeleteButton ? {
      appearance: "outline",
      onClick: h11,
      disabled: F2,
      kind: "danger",
      label: f7.delete
    } : void 0]
  }));
}

// ../../../node_modules/@arcgis/core/widgets/Editor/components/UploadDetails.js
var u5 = "esri-editor__upload-details";
var m5 = {
  base: u5,
  status: `${u5}__status`,
  titleWrapper: `${u5}__title-wrapper`,
  title: `${u5}__title`,
  description: `${u5}__description`,
  loader: `${u5}__loader`,
  iconSuccess: `${u5}__icon ${u5}__icon--success`,
  iconError: `${u5}__icon ${u5}__icon--error`,
  fileList: `${u5}__file-list`,
  file: `${u5}__file`,
  fileIcon: `${u5}__file-icon`,
  fileName: `${u5}__file-name`
};
var f6 = () => Promise.all([r2({
  icon: () => import("./calcite-icon-42Z6A6ZS.js"),
  loader: () => import("./calcite-loader-XGS6NTUP.js")
}), e14(), i8()]);
function _5(e15) {
  const {
    messages: t5,
    key: s15,
    upload: o9
  } = e15;
  return n2(i2, null, n2(c6, {
    key: s15 ?? "upload-details"
  }, n2(a8, null, g3(e15))), "error" === o9.state ? n2(r9, {
    buttons: [{
      onClick: () => o9.retry(),
      label: t5.modelUploads.error.uploadNew,
      iconStart: "upload-to"
    }],
    key: "upload-details-footer-actions"
  }) : null);
}
function g3(e15) {
  const t5 = y4(e15);
  return t5 ? n2("div", {
    class: m5.base,
    "data-testid": "upload-details",
    key: "upload-details-content"
  }, n2("div", {
    class: m5.status,
    key: "status"
  }, t5.iconContent, n2("div", {
    class: m5.titleWrapper,
    key: "text"
  }, n2("div", {
    class: m5.title,
    key: "title"
  }, t5.title), n2("div", {
    class: m5.description,
    key: "description"
  }, t5.description))), k5(e15.upload)) : null;
}
function y4({
  helpMessage: e15,
  messages: t5,
  upload: s15
}) {
  switch (s15.state) {
    case "pending": {
      const {
        title: e16,
        description: o9
      } = t5.modelUploads.pending;
      return {
        title: e16,
        description: o9,
        iconContent: n2("calcite-loader", {
          "aria-hidden": "true",
          class: m5.loader,
          label: "",
          scale: "s",
          type: "determinate",
          value: Math.min(Math.round(100 * s15.progress), 1 === s15.progress ? 100 : 99)
        })
      };
    }
    case "success": {
      const {
        title: s16
      } = t5.modelUploads.success;
      return {
        title: s16,
        description: e15 || t5.helpMessages3d.mesh,
        iconContent: n2("calcite-icon", {
          class: f3(m5.iconSuccess),
          icon: "check",
          scale: "l"
        })
      };
    }
    case "error": {
      const {
        title: e16
      } = t5.modelUploads.error;
      return {
        title: e16,
        description: $2(s15.error, t5),
        iconContent: n2("calcite-icon", {
          class: f3(m5.iconError),
          icon: "exclamation-mark-circle",
          scale: "l"
        })
      };
    }
    default:
      return null;
  }
}
function $2(o9, i11) {
  if (!o9) return null;
  const l6 = i11.modelUploads.error.messages;
  switch (o9.constructor) {
    case i5:
      return l6.noModel;
    case m3:
      return l6.multipleModels;
    case l3:
      return l6.conversionFailed;
    default:
      return l6.default;
  }
}
function k5(e15) {
  return n2("div", {
    class: m5.fileList,
    key: "file-list"
  }, e15.files.map((e16) => n2("div", {
    class: m5.file,
    key: `file-${e16.name}`
  }, n2("calcite-icon", {
    class: m5.fileIcon,
    icon: j(e16),
    scale: "s"
  }), n2("span", {
    class: m5.fileName
  }, h10(e16.name)))));
}
function h10(e15) {
  return e15.split("/").pop()?.split("\\").pop() ?? "";
}
function j(e15) {
  const t5 = e15.name.split(".").pop()?.toLowerCase();
  return (t5 ? b[t5] : null) ?? v4;
}
var v4 = "file";
var C4 = "file-shape";
var U = "file-image";
var b = {
  glb: C4,
  gltf: C4,
  jpeg: U,
  jpg: U,
  png: U,
  svg: U,
  zip: "file-zip"
};

// ../../../node_modules/@arcgis/core/widgets/Editor.js
var X2 = class extends B {
  constructor(e15, t5) {
    super(e15, t5), this._featureForm = new Z(), this._attachments = new I2({
      visibleElements: {
        addSubmitButton: false,
        cancelAddButton: false,
        cancelUpdateButton: false,
        deleteButton: false,
        errorMessage: false,
        progressBar: false,
        updateButton: false
      }
    }), this._featureTemplates = new F({
      enableListScroll: false,
      renderItemContentEnd: (e16) => e16.supportsUpload ? n2("calcite-icon", {
        class: t3.templateItemContentEnd,
        icon: "upload-to",
        key: "upload-icon"
      }) : null,
      renderItemLabel: (e16) => e16.label,
      renderCustomGroupContent: (e16) => this._renderCustomTemplateGroupContent(e16)
    }), this._filterText = "", this._prompt = null, this._spinner = new h5(), this.headingLevel = 4, this.messages = null, this.messagesCommon = null, this.messagesTemplates = null, this.supportingWidgetDefaults = null, this.viewModel = new Q2(), this.visibleElements = new l5(), this._renderSelectIcon = () => n2("calcite-icon", {
      icon: "cursor",
      slot: "content-start"
    }), this.EditorPanel = ({
      heading: e16,
      key: t6
    }, ...s15) => {
      const {
        visibleElements: o9
      } = this;
      return n2("calcite-flow-item", {
        closable: false,
        heading: e16,
        headingLevel: this.headingLevel,
        key: t6,
        loading: this._loading,
        onCalciteFlowItemBack: this._onBack
      }, o9.settingsMenu ? n2(r12, {
        editorViewModel: this.viewModel,
        messagesCommon: this.messagesCommon,
        visibleElements: o9
      }) : null, ...s15);
    }, this._showDiscardEditsPrompt = () => {
      const {
        messages: e16,
        activeWorkflow: t6
      } = this;
      return "create-features" === t6?.type && s10(t6.data.creationInfo) ? this._showPromptAndWait("success" === t6.data.upload?.state ? e16.modelUploads.cancelPlacementPrompt : e16.modelUploads.cancelUploadPrompt) : this._showPromptAndWait({
        title: e16.cancelEditTitle,
        message: e16.cancelEditWarningMessage,
        yesLabel: e16.discardEdits,
        noLabel: e16.continueEditing
      });
    }, this._showGenericCancelPrompt = () => {
      const {
        messages: e16,
        messagesCommon: t6
      } = this;
      return this._showPromptAndWait({
        title: e16.cancelRequestTitle,
        message: e16.cancelRequestWarningMessage,
        yesLabel: t6.form.yes,
        noLabel: t6.form.no
      });
    }, this._showPrompt = (e16) => {
      this._prompt?.cancel?.(), this._prompt = e16;
    }, this._clearPrompt = () => {
      this._prompt = null;
    }, this._onSave = () => {
      this.viewModel.saveWorkflow();
    }, this._onDelete = () => {
      const {
        messages: e16,
        messagesCommon: t6
      } = this;
      this._showPrompt({
        title: e16.deleteWarningTitle,
        message: e16.deleteWarningMessage,
        context: "danger",
        actions: {
          primary: {
            label: t6.delete,
            action: () => {
              this.deleteFeatureFromWorkflow(), this._clearPrompt();
            }
          },
          secondary: {
            label: e16.keepFeature,
            action: this._clearPrompt
          }
        }
      });
    }, this._onToggleUpdateWorkflow = () => this.viewModel.toggleUpdateWorkflow(), this._onBack = (e16) => (e16?.stopPropagation(), this.viewModel.back()), this._onAttachmentAdd = () => {
      const {
        activeWorkflow: e16
      } = this.viewModel;
      e16 && ("create-features" === e16.type || "update" === e16.type && "create-features" === e16.activeWorkflow?.type ? (this._attachments.addFile(), e16.back()) : this._attachments.addAttachment().then(() => e16.back()));
    }, this._onAttachmentUpdate = () => {
      const {
        activeWorkflow: e16
      } = this.viewModel;
      e16 && ("create-features" === e16.type ? (this._attachments.updateFile(), e16.back()) : this._attachments.updateAttachment().then(() => e16.back()));
    }, this._onAttachmentDelete = () => {
      const {
        messages: e16,
        messagesCommon: t6
      } = this;
      this._showPrompt({
        title: e16.deleteAttachmentWarningTitle,
        message: e16.deleteAttachmentWarningMessage,
        context: "danger",
        actions: {
          primary: {
            label: t6.delete,
            action: this._onAttachmentDeleteConfirm
          },
          secondary: {
            label: e16.keepAttachment,
            action: this._clearPrompt
          }
        }
      });
    }, this._onAttachmentDeleteConfirm = () => __async(this, null, function* () {
      const e16 = this._attachments, {
        activeWorkflow: t6
      } = this.viewModel;
      t6 && ("create-features" === t6.type ? e16.deleteFile() : (yield e16.deleteAttachment(e16.viewModel.activeAttachmentInfo), this._clearPrompt()), yield t6.back(), this._clearPrompt());
    }), this._onAttachmentsError = (e16) => {
      this._showPrompt({
        title: this.messages.errorWarningTitle,
        message: e16.message,
        context: "warning",
        actions: {
          primary: {
            label: this.messagesCommon.form.ok,
            action: this._clearPrompt
          }
        }
      });
    };
  }
  initialize() {
    this._featureForm.showPrompt = this._showPrompt, this._featureForm.clearPrompt = this._clearPrompt, this.addHandles([d2(() => n4(this.headingLevel), (e15) => {
      this._featureForm.headingLevel = e15, this._featureTemplates.headingLevel = e15;
    }, P), v(() => this.viewModel.activeWorkflow, "cancel-request", ({
      controller: e15
    }) => {
      (this.viewModel.hasPendingEdits ? this._showDiscardEditsPrompt() : this._showGenericCancelPrompt()).then((t5) => t5 ? e15.allow() : e15.deny());
    }), p(() => this.viewModel.featureFormViewModel, (e15) => {
      this._featureForm.viewModel = e15;
    }, P), d2(() => this.viewModel, (e15) => {
      this._attachments.viewModel = e15?.attachmentsViewModel ?? null, this._featureTemplates.viewModel = e15?.featureTemplatesViewModel ?? null, this._spinner.viewModel = e15?.spinnerViewModel ?? null, e15.showDiscardEditsPrompt = this._showDiscardEditsPrompt;
    }, P), d2(() => this.view, (e15, t5) => {
      const s15 = `editor-${this.id}-spinner`;
      t5?.ui.remove(this._spinner, s15), e15?.ui.add(this._spinner, {
        key: s15,
        position: "manual"
      });
    }, P), d2(() => [this.supportingWidgetDefaults, this.viewModel.sketchViewModel], ([e15]) => {
      e15 && (this._featureForm.set(e15.featureForm), this._attachments.set(e15.attachments), this._featureTemplates.set(e15.featureTemplates), this.viewModel.sketchViewModel?.set(e15.sketch));
    }, P), p(() => this._attachments?.error, (e15) => this._onAttachmentsError(e15)), p(() => this.viewModel?.failures, (e15) => {
      const {
        messages: t5
      } = this, [{
        error: s15,
        retry: o9,
        cancel: i11
      }] = e15;
      this._showPrompt({
        title: t5.errorWarningTitle,
        message: s5(t5.errorWarningMessageTemplate, {
          errorMessage: s15.message
        }),
        context: "warning",
        actions: {
          primary: {
            label: t5.retry,
            action: () => {
              o9(), this._clearPrompt();
            }
          },
          secondary: {
            label: t5.ignore,
            action: () => {
              i11(), this._clearPrompt();
            }
          }
        }
      });
    }), d2(() => this.viewModel?.state, (e15) => {
      switch (e15) {
        case "awaiting-feature-to-update":
        case "ready":
        case "disabled":
          this._filterText = "", this._featureTemplates.filterText = "";
      }
    }), d2(() => this.viewModel.featureFormDisabled, (e15) => this._featureForm.disabled = e15)]);
  }
  destroy() {
    this._attachments.destroy(), this._featureForm.destroy(), this._featureTemplates.destroy();
  }
  loadDependencies() {
    return Promise.all([r2({
      "flow-item": () => import("./calcite-flow-item-6QKZ7KRC.js"),
      flow: () => import("./calcite-flow-WGSZ7TX4.js"),
      icon: () => import("./calcite-icon-42Z6A6ZS.js"),
      list: () => import("./calcite-list-IDJ56B53.js")
    }), r8(), i9(), e14(), r10(), i8(), a9(), n6(), f5(), f6()]);
  }
  get _deleteButtonCommonInfo() {
    return {
      appearance: "outline",
      kind: "danger"
    };
  }
  get _loading() {
    const {
      viewModel: e15
    } = this;
    return e15.syncing || e15.updating || this._attachments.submitting;
  }
  get activeWorkflow() {
    return this.viewModel.activeWorkflow;
  }
  get allowedWorkflows() {
    return this.viewModel.allowedWorkflows;
  }
  set allowedWorkflows(e15) {
    i(n.getLogger(this), "allowedWorkflows", {
      replacement: "visibleElements",
      version: "4.29",
      warnOnce: true
    }), this.viewModel.allowedWorkflows = e15;
  }
  get hideTemplatesForInactiveLayers() {
    return this.viewModel.hideTemplatesForInactiveLayers;
  }
  set hideTemplatesForInactiveLayers(e15) {
    this.viewModel.hideTemplatesForInactiveLayers = e15;
  }
  get icon() {
    return "pencil";
  }
  set icon(e15) {
    this._overrideIfSome("icon", e15);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e15) {
    this._overrideIfSome("label", e15);
  }
  get labelOptions() {
    return this.viewModel.labelOptions;
  }
  set labelOptions(e15) {
    this.viewModel.labelOptions = e15;
  }
  get layerInfos() {
    return this.viewModel.layerInfos;
  }
  set layerInfos(e15) {
    this.viewModel.layerInfos = e15;
  }
  get snappingOptions() {
    return this.viewModel.snappingOptions;
  }
  set snappingOptions(e15) {
    this.viewModel.snappingOptions = e15;
  }
  get tooltipOptions() {
    return this.viewModel.tooltipOptions;
  }
  set tooltipOptions(e15) {
    this.viewModel.tooltipOptions = e15;
  }
  get valueOptions() {
    return this.viewModel.valueOptions;
  }
  set valueOptions(e15) {
    this.viewModel.valueOptions = e15;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e15) {
    this.viewModel.view = e15;
  }
  startCreateFeaturesWorkflowAtFeatureTypeSelection() {
    return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection();
  }
  startCreateFeaturesWorkflowAtFeatureCreation(e15) {
    return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(e15);
  }
  startCreateFeaturesWorkflowAtFeatureEdit(e15) {
    return this.viewModel.startCreateFeaturesWorkflowAtFeatureEdit(e15);
  }
  startUpdateWorkflowAtFeatureSelection() {
    return this.viewModel.startUpdateWorkflowAtFeatureSelection();
  }
  startUpdateWorkflowAtMultipleFeatureSelection(e15) {
    return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(e15);
  }
  startUpdateWorkflowAtFeatureEdit(e15) {
    return this.viewModel.startUpdateWorkflowAtFeatureEdit(e15);
  }
  deleteFeatureFromWorkflow() {
    return this.viewModel.deleteFeatureFromWorkflow();
  }
  cancelWorkflow(e15) {
    return this.viewModel.cancelWorkflow(e15);
  }
  render() {
    const {
      viewModel: e15
    } = this, t5 = this.classes(t3.base, e6.widget, e6.panel);
    return e15 ? n2("div", {
      class: t5,
      key: "base"
    }, n2("calcite-flow", {
      key: "flow"
    }, e15.pageStack.map((e16) => this._renderPage(e16))), this._prompt ? n2(s8, __spreadProps(__spreadValues({}, this._prompt), {
      headingLevel: this.headingLevel
    })) : void 0) : n2("div", {
      class: t5,
      key: "empty"
    });
  }
  _renderPage(e15) {
    switch (e15) {
      case "disabled":
        break;
      case "ready":
        return this._renderReady();
      case "awaiting-feature-creation-info":
        return this._renderAwaitingFeatureCreationInfo();
      case "creating-features-upload-details":
        return this._renderUploadDetails();
      case "creating-features":
        return this._renderCreatingFeatures();
      case "editing-existing-feature":
      case "editing-attributes":
        return this._renderUpdateFeature();
      case "awaiting-update-feature-candidate":
        return this._renderFeatureList();
      case "adding-attachment":
        return this._renderAttachmentAdding();
      case "editing-attachment":
        return this._renderAttachmentEditing();
    }
    return n2("div", {
      key: "empty-page"
    });
  }
  _renderAwaitingFeatureCreationInfo() {
    const {
      EditorPanel: e15,
      messages: t5
    } = this;
    return n2(e15, {
      heading: t5.selectTemplate,
      key: "templates-panel"
    }, n2(c6, {
      key: "feature-templates"
    }, n2(a8, null, this._featureTemplates.render())));
  }
  _renderUploadDetails() {
    const {
      EditorPanel: e15,
      activeWorkflow: t5,
      messages: s15
    } = this;
    if ("create-features" !== t5?.type) return null;
    const o9 = t5.data.upload;
    return o9 ? n2(e15, {
      heading: s15.createFeatures,
      key: "upload-details-panel"
    }, n2(_5, {
      helpMessage: this._helpMessage,
      messages: s15,
      upload: o9
    })) : null;
  }
  _renderCreatingFeatures() {
    const {
      EditorPanel: e15,
      activeWorkflow: t5,
      messages: s15,
      messagesCommon: o9,
      headingLevel: i11,
      viewModel: r13
    } = this;
    if (!t5) return null;
    const a10 = "create-features" === t5.type && t5.numPendingFeatures > 0 || "update" === t5.type && "create-features" === t5?.activeWorkflow?.type && t5.activeWorkflow?.numPendingFeatures > 0;
    return n2(e15, {
      heading: s15.createFeatures,
      key: "create-features-panel"
    }, a10 ? n2(h9, {
      editorViewModel: r13,
      headingLevel: i11,
      messages: s15,
      messagesCommon: o9,
      renderAttachments: () => this._attachments.render(),
      renderFeatureForm: () => this._featureForm.render(),
      onDelete: this._onDelete,
      onSave: this._onSave
    }) : n2(s13, {
      helpMessage: this._helpMessage
    }));
  }
  _renderUpdateFeature() {
    const {
      EditorPanel: e15,
      messages: t5,
      messagesCommon: s15,
      headingLevel: o9,
      viewModel: i11
    } = this;
    return n2(e15, {
      heading: t5.editFeature,
      key: "update-feature-panel"
    }, n2(h9, {
      editorViewModel: i11,
      headingLevel: o9,
      messages: t5,
      messagesCommon: s15,
      renderAttachments: () => this._attachments.render(),
      renderFeatureForm: () => this._featureForm.render(),
      onDelete: this._onDelete,
      onSave: this._onSave
    }));
  }
  _renderCustomTemplateGroupContent(e15) {
    const {
      messages: t5,
      viewModel: s15
    } = this, i11 = f(e15.group.items, (e16) => s15.itemHasInvalidFormTemplate(e16) ? t5.formFieldCreateError : void 0);
    return i11 ? n2(c7, {
      icon: a5,
      message: i11
    }) : null;
  }
  _renderAttachmentAdding() {
    const {
      EditorPanel: e15,
      _attachments: t5,
      messages: s15,
      messagesCommon: o9
    } = this;
    return n2(e15, {
      heading: s15.addAttachment,
      key: "attachment-adding-panel"
    }, n2(c6, {
      key: "attachments"
    }, t5.render()), n2(r9, {
      buttons: [{
        label: t5.submitting ? o9.cancel : o9.add,
        disabled: t5.submitting || !t5.selectedFile,
        onClick: this._onAttachmentAdd
      }]
    }));
  }
  _renderAttachmentEditing() {
    const {
      EditorPanel: e15,
      _attachments: t5,
      activeWorkflow: s15,
      messages: o9,
      messagesCommon: i11
    } = this;
    return s15 ? n2(e15, {
      heading: o9.editAttachment,
      key: "attachment-editing-panel"
    }, n2(c6, {
      key: "attachments"
    }, t5.render()), s15.shouldAllowAttachmentEditing ? n2(r9, {
      buttons: [{
        label: i11.update,
        disabled: t5.submitting || !t5.selectedFile,
        onClick: this._onAttachmentUpdate
      }, __spreadProps(__spreadValues({}, this._deleteButtonCommonInfo), {
        onClick: this._onAttachmentDelete,
        disabled: t5.submitting,
        label: i11.delete
      })]
    }) : void 0) : null;
  }
  _renderReady() {
    const {
      EditorPanel: e15,
      messages: t5,
      viewModel: s15,
      visibleElements: o9
    } = this, i11 = this._helpMessage;
    return n2(e15, {
      heading: t5.widgetLabel,
      key: "landing-panel"
    }, n2(c6, {
      key: "landing-content"
    }, s15.editorItems.length ? [o9.editFeaturesSection ? n2(a8, {
      key: "edit-actions"
    }, this._renderUpdateActions()) : null, o9.createFeaturesSection && s15.canCreateVisible ? n2(a8, {
      key: "create-actions"
    }, this._renderCreateActions()) : null] : n2(r7, {
      key: "no-content"
    }, t5.noEditableLayers)), i11 ? n2("div", {
      class: t3.helpMessage,
      key: "footer-actions",
      slot: "footer"
    }, i11) : void 0);
  }
  get _helpMessage() {
    const {
      activeWorkflow: e15,
      messages: t5,
      view: s15
    } = this, o9 = e15?.helpMessage;
    return o9 ? t5["3d" === s15?.type ? "helpMessages3d" : "helpMessages2d"]?.[o9] : void 0;
  }
  _renderUpdateActions() {
    const {
      messages: e15,
      messagesCommon: t5,
      viewModel: s15
    } = this, o9 = {
      id: "select",
      label: t5.select
    };
    return n2("div", {
      class: t3.updateActions,
      key: "update-actions"
    }, n2(e7, {
      level: n4(this.headingLevel)
    }, e15.editFeatures), n2("calcite-list", {
      class: t3.updateActionsList,
      selectionAppearance: "border",
      selectionMode: "single"
    }, m4({
      disabled: !s15.canUpdateVisible,
      grouped: false,
      item: o9,
      selectedItem: "awaiting-feature-to-update" === s15.activeWorkflow?.stepId ? o9 : void 0,
      renderIcon: this._renderSelectIcon,
      onItemSelect: this._onToggleUpdateWorkflow
    })));
  }
  _renderCreateActions() {
    return n2("div", {
      key: "create-actions"
    }, n2(e7, {
      level: n4(this.headingLevel)
    }, this.messages.createFeatures), n2("div", {
      class: t3.featureTemplatesContainer,
      key: "templates"
    }, this._featureTemplates.render()));
  }
  _renderFeatureList() {
    const {
      EditorPanel: e15,
      viewModel: t5
    } = this, {
      activeWorkflow: s15
    } = t5;
    if ("update" !== s15?.type) return null;
    const o9 = s15.data.candidates, i11 = s5(this.messages.multipleFeaturesTemplate, {
      total: o9.length
    });
    return n2(e15, {
      heading: i11,
      key: "feature-list"
    }, n2(n11, {
      editorItems: t5.editorItems,
      filterText: this._filterText,
      id: this.id,
      messagesTemplates: this.messagesTemplates,
      workflow: s15,
      onFilterTextChange: (e16) => this._filterText = e16,
      onSelectFeature: (e16, s16) => t5.selectFeature(e16, s16)
    }));
  }
  _showPromptAndWait({
    title: e15,
    message: t5,
    yesLabel: s15,
    noLabel: o9
  }) {
    const r13 = L2(), {
      view: a10
    } = this, n13 = a10?.focused;
    return this._showPrompt({
      title: e15,
      message: t5,
      context: "danger",
      actions: {
        primary: {
          label: s15,
          action: () => r13.resolve(true)
        },
        secondary: {
          label: o9,
          action: () => r13.resolve(false)
        }
      }
    }), r13.promise.finally(() => {
      this._clearPrompt(), n13 && a10?.focus();
    });
  }
};
e3([y()], X2.prototype, "_featureForm", void 0), e3([y()], X2.prototype, "_attachments", void 0), e3([y()], X2.prototype, "_featureTemplates", void 0), e3([y()], X2.prototype, "_filterText", void 0), e3([y()], X2.prototype, "_prompt", void 0), e3([y()], X2.prototype, "_spinner", void 0), e3([y()], X2.prototype, "_deleteButtonCommonInfo", null), e3([y()], X2.prototype, "_loading", null), e3([y({
  readOnly: true
})], X2.prototype, "activeWorkflow", null), e3([y()], X2.prototype, "allowedWorkflows", null), e3([y()], X2.prototype, "headingLevel", void 0), e3([y()], X2.prototype, "hideTemplatesForInactiveLayers", null), e3([y()], X2.prototype, "icon", null), e3([y()], X2.prototype, "label", null), e3([y()], X2.prototype, "labelOptions", null), e3([y()], X2.prototype, "layerInfos", null), e3([y(), e4("esri/widgets/Editor/t9n/Editor")], X2.prototype, "messages", void 0), e3([y(), e4("esri/t9n/common")], X2.prototype, "messagesCommon", void 0), e3([y(), e4("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")], X2.prototype, "messagesTemplates", void 0), e3([y()], X2.prototype, "snappingOptions", null), e3([y()], X2.prototype, "tooltipOptions", null), e3([y()], X2.prototype, "supportingWidgetDefaults", void 0), e3([y({
  type: a4,
  nonNullable: true
})], X2.prototype, "valueOptions", null), e3([y()], X2.prototype, "view", null), e3([y(), e8(["sketch-create", "sketch-delete", "sketch-update", "workflow-cancel", "workflow-commit"])], X2.prototype, "viewModel", void 0), e3([y({
  type: l5,
  nonNullable: true
})], X2.prototype, "visibleElements", void 0), e3([y()], X2.prototype, "_helpMessage", null), X2 = e3([a2("esri.widgets.Editor")], X2);
var Y3 = X2;
export {
  Y3 as default
};
//# sourceMappingURL=Editor-PITHETXF.js.map
