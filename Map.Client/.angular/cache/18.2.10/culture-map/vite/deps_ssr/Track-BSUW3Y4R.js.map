{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/widgets/Track/TrackViewModel.js", "../../../../../../node_modules/@arcgis/core/widgets/Track.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport { ignoreAbortErrors as i, debounce as o, isAbortError as r } from \"../../core/promiseUtils.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as e } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../support/GeolocationPositioning.js\";\nconst n = 15e3;\nlet c = class extends a {\n  constructor(t) {\n    super(t), this._watchId = void 0, this._trackStartingTimeoutId = void 0, this._settingPosition = null, this._trackController = null, this.error = void 0, this.positionFilterFunction = null;\n  }\n  destroy() {\n    this._stopTracking();\n  }\n  get state() {\n    return this._geolocationUsable ? this.view && !this.view.ready ? \"disabled\" : this._settingPosition || void 0 !== this._trackStartingTimeoutId ? \"waiting\" : this.tracking ? \"tracking\" : null != this.error ? \"error\" : \"ready\" : \"feature-unsupported\";\n  }\n  get tracking() {\n    return void 0 !== this._watchId;\n  }\n  start() {\n    \"disabled\" !== this.state && \"feature-unsupported\" !== this.state && this._startTracking();\n  }\n  stop() {\n    \"disabled\" !== this.state && \"feature-unsupported\" !== this.state && this._stopTracking();\n  }\n  _stopWatchingPosition() {\n    void 0 !== this._watchId && (navigator.geolocation.clearWatch(this._watchId), this._watchId = void 0);\n  }\n  _stopTracking() {\n    this._abortTrack(), this._clearWaitingTimer(), this._stopWatchingPosition(), this._clearGraphic();\n  }\n  _startTracking() {\n    this._stopTracking();\n    const t = o(async t => {\n      this._abortTrack();\n      const i = new AbortController();\n      this._trackController = i;\n      const {\n          timestamp: o,\n          coords: s\n        } = t,\n        e = {\n          timestamp: o,\n          coords: {\n            ...s\n          }\n        };\n      this.error = void 0;\n      try {\n        if (\"function\" == typeof this.positionFilterFunction && !this.positionFilterFunction.call(null, {\n          position: e\n        })) return;\n        if (await this.updatePosition(t, i), this._trackController !== i) return;\n        this._clearWaitingTimer(), this._addGraphic(), this.emit(\"track\", {\n          position: t\n        }), this._trackController = null;\n      } catch (a) {\n        if (r(a)) return;\n        throw this._trackController = null, this._emitError(a), this._clearWaitingTimer(), a;\n      }\n    }, 0);\n    this._watchId = navigator.geolocation.watchPosition(o => {\n      this._settingPosition = t(o).catch(i);\n    }, this._handleWatchPositionError.bind(this), this.geolocationOptions ?? void 0), this._trackStartingTimeoutId = setTimeout(() => {\n      this._trackStartingTimeoutId = void 0;\n    }, n);\n  }\n  _handleWatchPositionError(t) {\n    t.code === t.PERMISSION_DENIED && this._stopTracking(), this._emitError(t);\n  }\n  _abortTrack() {\n    this._trackController?.abort(), this._trackController = null;\n  }\n  _clearWaitingTimer() {\n    clearTimeout(this._trackStartingTimeoutId), this._trackStartingTimeoutId = void 0, this._settingPosition = null;\n  }\n  _emitError(t) {\n    this.error = t, this.emit(\"track-error\", {\n      error: t\n    });\n  }\n};\nt([s()], c.prototype, \"_watchId\", void 0), t([s()], c.prototype, \"_trackStartingTimeoutId\", void 0), t([s()], c.prototype, \"_settingPosition\", void 0), t([s()], c.prototype, \"error\", void 0), t([s()], c.prototype, \"positionFilterFunction\", void 0), t([s({\n  readOnly: !0\n})], c.prototype, \"state\", null), t([s({\n  readOnly: !0\n})], c.prototype, \"tracking\", null), t([s()], c.prototype, \"start\", null), t([s()], c.prototype, \"stop\", null), c = t([e(\"esri.widgets.Track.TrackViewModel\")], c);\nconst h = c;\nexport { h as default };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport { property as o } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/Logger.js\";\nimport \"../core/RandomLCG.js\";\nimport { subclass as t } from \"../core/accessorSupport/decorators/subclass.js\";\nimport i from \"./Widget.js\";\nimport { loadCalciteComponents as r } from \"./support/componentsUtils.js\";\nimport { globalCss as s } from \"./support/globalCss.js\";\nimport \"./support/widgetUtils.js\";\nimport { messageBundle as n } from \"./support/decorators/messageBundle.js\";\nimport { vmEvent as a } from \"./support/decorators/vmEvent.js\";\nimport { tsx as l } from \"./support/jsxFactory.js\";\nimport c from \"./Track/TrackViewModel.js\";\nconst p = {\n  base: \"esri-track\"\n};\nlet d = class extends i {\n  constructor(e, o) {\n    super(e, o), this.messages = null, this.viewModel = new c(), this._toggleTracking = () => {\n      const e = this.viewModel;\n      e && \"feature-unsupported\" !== e.state && \"disabled\" !== e.state && (\"tracking\" !== e.state && \"waiting\" !== e.state ? this.viewModel.start() : this.viewModel.stop());\n    };\n  }\n  loadDependencies() {\n    return r({\n      button: () => import(\"@esri/calcite-components/dist/components/calcite-button.js\"),\n      tooltip: () => import(\"@esri/calcite-components/dist/components/calcite-tooltip.js\")\n    });\n  }\n  get geolocationOptions() {\n    return this.viewModel.geolocationOptions;\n  }\n  set geolocationOptions(e) {\n    this.viewModel.geolocationOptions = e;\n  }\n  get goToLocationEnabled() {\n    return this.viewModel.goToLocationEnabled;\n  }\n  set goToLocationEnabled(e) {\n    this.viewModel.goToLocationEnabled = e;\n  }\n  get goToOverride() {\n    return this.viewModel.goToOverride;\n  }\n  set goToOverride(e) {\n    this.viewModel.goToOverride = e;\n  }\n  get graphic() {\n    return this.viewModel.graphic;\n  }\n  set graphic(e) {\n    this.viewModel.graphic = e;\n  }\n  get icon() {\n    return \"compass-north-circle\";\n  }\n  set icon(e) {\n    this._overrideIfSome(\"icon\", e);\n  }\n  get label() {\n    return this.messages?.widgetLabel ?? \"\";\n  }\n  set label(e) {\n    this._overrideIfSome(\"label\", e);\n  }\n  get rotationEnabled() {\n    return this.viewModel.rotationEnabled;\n  }\n  set rotationEnabled(e) {\n    this.viewModel.rotationEnabled = e;\n  }\n  get scale() {\n    return this.viewModel.scale;\n  }\n  set scale(e) {\n    this.viewModel.scale = e;\n  }\n  get tracking() {\n    return this.viewModel.tracking;\n  }\n  get view() {\n    return this.viewModel.view;\n  }\n  set view(e) {\n    this.viewModel.view = e;\n  }\n  start() {\n    this.viewModel.start();\n  }\n  stop() {\n    this.viewModel.stop();\n  }\n  render() {\n    const {\n        viewModel: e,\n        messages: o,\n        icon: t\n      } = this,\n      i = e?.state,\n      r = \"tracking\" === i,\n      n = this._localizeError(this.viewModel?.error),\n      a = (r ? o?.stopTracking : o?.startTracking) ?? \"\",\n      c = \"feature-unsupported\" === i,\n      d = (\"tracking\" === i ? \"pause\" : void 0) ?? t;\n    return l(\"div\", {\n      class: this.classes(p.base, s.widget)\n    }, !c && l(\"calcite-button\", {\n      class: s.widgetButton,\n      disabled: \"disabled\" === i,\n      iconStart: d,\n      kind: \"neutral\",\n      label: a,\n      loading: \"waiting\" === i,\n      onclick: this._toggleTracking,\n      title: a\n    }), n ? l(\"calcite-tooltip\", {\n      open: !0,\n      overlayPositioning: \"fixed\",\n      referenceElement: this.container\n    }, n) : null);\n  }\n  _localizeError(e) {\n    return e instanceof GeolocationPositionError ? e.code === GeolocationPositionError.PERMISSION_DENIED ? this.messages?.permissionError : e.code === GeolocationPositionError.TIMEOUT ? this.messages?.timeoutError : this.messages?.positionUnavailable : e instanceof Error ? e.message : void 0;\n  }\n};\ne([o()], d.prototype, \"geolocationOptions\", null), e([o()], d.prototype, \"goToLocationEnabled\", null), e([o()], d.prototype, \"goToOverride\", null), e([o()], d.prototype, \"graphic\", null), e([o()], d.prototype, \"icon\", null), e([o()], d.prototype, \"label\", null), e([o(), n(\"esri/widgets/Track/t9n/Track\")], d.prototype, \"messages\", void 0), e([o()], d.prototype, \"rotationEnabled\", null), e([o()], d.prototype, \"scale\", null), e([o({\n  readOnly: !0\n})], d.prototype, \"tracking\", null), e([o()], d.prototype, \"view\", null), e([o({\n  type: c\n}), a([\"track\", \"track-error\"])], d.prototype, \"viewModel\", void 0), d = e([t(\"esri.widgets.Track\")], d);\nconst g = d;\nexport { g as default };"],
  "mappings": "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",
  "names": ["n", "b", "t", "e", "a", "d", "e", "r", "n", "a", "c"]
}
