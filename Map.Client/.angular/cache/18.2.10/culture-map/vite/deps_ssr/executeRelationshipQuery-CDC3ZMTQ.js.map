{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/rest/query/operations/queryRelatedRecords.js", "../../../../../../node_modules/@arcgis/core/rest/query/executeRelationshipQuery.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from \"../../../request.js\";\nimport { srToRESTValue as t } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { mapParameters as o } from \"../../operations/urlUtils.js\";\nfunction r(e, o) {\n  const r = e.toJSON();\n  return r.objectIds && (r.objectIds = r.objectIds.join(\",\")), r.orderByFields && (r.orderByFields = r.orderByFields.join(\",\")), r.outFields && !o?.returnCountOnly ? r.outFields.includes(\"*\") ? r.outFields = \"*\" : r.outFields = r.outFields.join(\",\") : delete r.outFields, r.outSR && (r.outSR = t(r.outSR)), r.dynamicDataSource && (r.layer = JSON.stringify({\n    source: r.dynamicDataSource\n  }), delete r.dynamicDataSource), r;\n}\nasync function s(e, t, o) {\n  const r = await a(e, t, o),\n    s = r.data,\n    n = s.geometryType,\n    d = s.spatialReference,\n    c = {};\n  for (const a of s.relatedRecordGroups) {\n    const e = {\n      fields: void 0,\n      objectIdFieldName: void 0,\n      geometryType: n,\n      spatialReference: d,\n      hasZ: !!s.hasZ,\n      hasM: !!s.hasM,\n      features: a.relatedRecords\n    };\n    if (null != a.objectId) c[a.objectId] = e;else for (const t of Object.keys(a)) \"relatedRecords\" !== t && (c[a[t]] = e);\n  }\n  return {\n    ...r,\n    data: c\n  };\n}\nasync function n(e, t, o) {\n  const r = await a(e, t, o, {\n      returnCountOnly: !0\n    }),\n    s = r.data,\n    n = {};\n  for (const a of s.relatedRecordGroups) null != a.objectId && (n[a.objectId] = a.count);\n  return {\n    ...r,\n    data: n\n  };\n}\nasync function a(t, s, n = {}, a) {\n  const d = o({\n    ...t.query,\n    f: \"json\",\n    ...a,\n    ...r(s, a)\n  });\n  return e(t.path + \"/queryRelatedRecords\", {\n    ...n,\n    query: {\n      ...n.query,\n      ...d\n    }\n  });\n}\nexport { s as executeRelationshipQuery, n as executeRelationshipQueryForCount, r as toQueryStringParameters };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { parseUrl as t } from \"../utils.js\";\nimport { executeRelationshipQuery as r, executeRelationshipQueryForCount as e } from \"./operations/queryRelatedRecords.js\";\nimport o from \"../support/FeatureSet.js\";\nimport s from \"../support/RelationshipQuery.js\";\nasync function n(e, n, u) {\n  n = s.from(n);\n  const a = t(e);\n  return r(a, n, u).then(t => {\n    const r = t.data,\n      e = {};\n    return Object.keys(r).forEach(t => e[t] = o.fromJSON(r[t])), e;\n  });\n}\nasync function u(r, o, n) {\n  o = s.from(o);\n  const u = t(r);\n  return e(u, o, {\n    ...n\n  }).then(t => t.data);\n}\nexport { n as executeRelationshipQuery, u as executeRelationshipQueryForCount };"],
  "mappings": "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",
  "names": ["r", "t", "s", "n", "d", "a", "e", "n", "u", "d", "a", "t", "r", "e"]
}
