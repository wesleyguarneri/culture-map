import { createRequire } from 'module';const require = createRequire(import.meta.url);
import {
  u as u4
} from "./chunk-OVZCDMLP.js";
import {
  u as u3
} from "./chunk-BQIZESK5.js";
import "./chunk-CG3HCSGN.js";
import {
  M
} from "./chunk-G3GRFYNY.js";
import {
  e as e6
} from "./chunk-K2LPE2X5.js";
import "./chunk-5E5FRWDI.js";
import {
  t as t2
} from "./chunk-AAOWJTVD.js";
import {
  R
} from "./chunk-6VIW23IK.js";
import {
  p as p3
} from "./chunk-PF7D56B5.js";
import {
  f as f2
} from "./chunk-VFDQ2IPM.js";
import "./chunk-DYMQWLSL.js";
import {
  e as e5
} from "./chunk-Q23C3NFQ.js";
import "./chunk-FVMSCDY4.js";
import "./chunk-MH54QISY.js";
import "./chunk-ZUFYTMSS.js";
import "./chunk-PPORR5ZR.js";
import {
  q,
  z
} from "./chunk-SPTEUQ5I.js";
import {
  a as a2
} from "./chunk-ARMSKPOE.js";
import "./chunk-IA5UKRA2.js";
import "./chunk-7HWP2QWI.js";
import "./chunk-DUZT23UA.js";
import "./chunk-CP2IGGT7.js";
import "./chunk-ZEZCWQFR.js";
import {
  o
} from "./chunk-2FVMT5KX.js";
import "./chunk-MZ5BWUSD.js";
import {
  c as c2
} from "./chunk-6AG7CVLS.js";
import {
  e as e4,
  ee,
  f
} from "./chunk-73EW5OP6.js";
import {
  i,
  p as p2
} from "./chunk-J5J3QXIV.js";
import "./chunk-NCXTRC7L.js";
import "./chunk-F2LQGEBE.js";
import "./chunk-7RXQQ22H.js";
import {
  E2 as E,
  P,
  p
} from "./chunk-VC76DE2W.js";
import "./chunk-O3EWP5OO.js";
import {
  t
} from "./chunk-6NBMJUQX.js";
import "./chunk-WXECQAUG.js";
import "./chunk-RFURERTV.js";
import "./chunk-CATQ6UZ5.js";
import {
  N
} from "./chunk-MIWJLMUG.js";
import "./chunk-MDOKECP3.js";
import "./chunk-IVVINOEJ.js";
import "./chunk-DUSY4H5O.js";
import "./chunk-XUM2DDAI.js";
import "./chunk-SF5T5ZX3.js";
import "./chunk-7ZLUUE5X.js";
import "./chunk-4Y6TKPBN.js";
import "./chunk-BV256A2V.js";
import "./chunk-KJGRJNY4.js";
import "./chunk-AJ474NL3.js";
import "./chunk-X3HF4XA3.js";
import "./chunk-AP543QXG.js";
import "./chunk-6SSO6SUU.js";
import "./chunk-ATL6GPJC.js";
import {
  x
} from "./chunk-IPGNBAEV.js";
import "./chunk-N7TLJ6LV.js";
import "./chunk-INUNNFZT.js";
import "./chunk-NF2MOJH5.js";
import "./chunk-2NPPOPEZ.js";
import "./chunk-JP4VYCP3.js";
import "./chunk-BKOZEXTL.js";
import "./chunk-NLRSH3TD.js";
import "./chunk-3Q4YEFJ3.js";
import "./chunk-K6JW77RY.js";
import "./chunk-377KSYNB.js";
import "./chunk-PSH57UZT.js";
import "./chunk-KRRPY5PU.js";
import "./chunk-YUYMEQ3T.js";
import "./chunk-ZTTGFJJT.js";
import "./chunk-TFCCIKDP.js";
import "./chunk-FT6GF7ST.js";
import "./chunk-4B3LNBOC.js";
import "./chunk-KAKCJGSZ.js";
import {
  st
} from "./chunk-LEBOC3ZD.js";
import "./chunk-FSYMZVRK.js";
import "./chunk-T4DTOVU4.js";
import "./chunk-GYNRSS5Q.js";
import "./chunk-TO2KOAJE.js";
import "./chunk-JZISCETB.js";
import "./chunk-DM6DHTKZ.js";
import "./chunk-OEBP4L4N.js";
import "./chunk-L3REUUFH.js";
import "./chunk-JMJZXQF3.js";
import "./chunk-UT2ZOLZR.js";
import "./chunk-DTMLHZFB.js";
import {
  n as n4
} from "./chunk-WQIJCG2D.js";
import "./chunk-WOWVQEU2.js";
import "./chunk-JRL65HQ7.js";
import "./chunk-LUORW76W.js";
import "./chunk-62PN4TEW.js";
import "./chunk-OPXEKSUB.js";
import "./chunk-PAFRRTJD.js";
import "./chunk-ZCCDVQ3H.js";
import "./chunk-T2SCEBLQ.js";
import {
  e as e3
} from "./chunk-FYGR4X6I.js";
import "./chunk-PZKTCBLJ.js";
import "./chunk-O7RCHW3H.js";
import "./chunk-N4FQBAT2.js";
import "./chunk-K7U66W6G.js";
import "./chunk-WQMUOLHB.js";
import "./chunk-LVERV6OU.js";
import "./chunk-3FFTEL3W.js";
import "./chunk-4WON4QDF.js";
import "./chunk-45GTM6LF.js";
import "./chunk-XUZTWNKD.js";
import "./chunk-Q5PBA64J.js";
import "./chunk-TIAWSZQK.js";
import "./chunk-KWHFMZEB.js";
import "./chunk-FBMJVQWQ.js";
import "./chunk-WUTM5T74.js";
import "./chunk-ONVI4SC3.js";
import "./chunk-2IRGMYX2.js";
import "./chunk-OU2TYICP.js";
import "./chunk-DZAXDRPA.js";
import "./chunk-RV5QLAWU.js";
import "./chunk-AA5NMQ6N.js";
import "./chunk-Z4PRO5ND.js";
import "./chunk-MHGADXDL.js";
import "./chunk-VYJ7IUDT.js";
import "./chunk-2ZXVDYHF.js";
import "./chunk-22UDIQGJ.js";
import "./chunk-XFLPRRYT.js";
import "./chunk-Z5ZLX3BE.js";
import "./chunk-23Q4INNG.js";
import "./chunk-LZSSTWLW.js";
import "./chunk-ALQIX2AS.js";
import "./chunk-D3VQCVGJ.js";
import "./chunk-PFTDB6ZJ.js";
import "./chunk-6YHZYHJS.js";
import "./chunk-UVHNQY4M.js";
import "./chunk-FCVY35OB.js";
import "./chunk-TSTMST4X.js";
import "./chunk-I47GCEJP.js";
import "./chunk-LA4GCRJY.js";
import "./chunk-ZTMARHUQ.js";
import "./chunk-P5MJSFMN.js";
import "./chunk-HMPRRFR4.js";
import "./chunk-UE7ZYRIH.js";
import "./chunk-W24M6HII.js";
import "./chunk-FWGI52X4.js";
import "./chunk-E5RXQH35.js";
import "./chunk-62ZEBDPC.js";
import "./chunk-ZFMS3XGM.js";
import "./chunk-QWQJOAVR.js";
import "./chunk-YLQMUXQA.js";
import "./chunk-4U7LUZFD.js";
import "./chunk-T257OY4U.js";
import "./chunk-BMO2W6EC.js";
import "./chunk-QA265FYQ.js";
import "./chunk-HUOFTIIK.js";
import "./chunk-6NVF5BZF.js";
import "./chunk-ZDFN6OZC.js";
import "./chunk-DUV7OLAZ.js";
import "./chunk-KSOKDIBG.js";
import "./chunk-3NWWTJOW.js";
import "./chunk-TRF6JO5N.js";
import "./chunk-ZHVMMFTW.js";
import "./chunk-HKAONIBH.js";
import {
  c
} from "./chunk-RHVUMKCC.js";
import "./chunk-2B3WLK32.js";
import "./chunk-EPIUUGS2.js";
import "./chunk-TMXHZTIG.js";
import "./chunk-FIQ7DCCC.js";
import "./chunk-SNHVHW2N.js";
import "./chunk-HVJMAP6C.js";
import "./chunk-MDEPINSI.js";
import "./chunk-QATJRB5Q.js";
import "./chunk-7Z4UWMRU.js";
import "./chunk-YEB36ZCF.js";
import "./chunk-WHVSAUHM.js";
import "./chunk-LQUVB46M.js";
import "./chunk-GHPF24X4.js";
import "./chunk-UC4DX4SE.js";
import "./chunk-44O4APOL.js";
import "./chunk-LCPLUSDH.js";
import "./chunk-KINQ7OJ3.js";
import "./chunk-KYLW5XXS.js";
import "./chunk-B63XAMYJ.js";
import "./chunk-THUD7LGO.js";
import "./chunk-YSJVVDDH.js";
import "./chunk-DLWZ3HVT.js";
import "./chunk-B76NC7GX.js";
import {
  h as h2
} from "./chunk-HFXXFWYN.js";
import "./chunk-EXKCGLRO.js";
import "./chunk-WRLGLGM6.js";
import "./chunk-47DYJR3W.js";
import "./chunk-QRWQ6QBB.js";
import "./chunk-ZSJNH2BT.js";
import "./chunk-2W7YKBRA.js";
import "./chunk-RIZOHDTP.js";
import "./chunk-ZFES27RA.js";
import "./chunk-XP2AJZUL.js";
import "./chunk-CZA7RDJP.js";
import "./chunk-NCMX3DAD.js";
import "./chunk-BCNABTAE.js";
import "./chunk-3PPEJ4QJ.js";
import "./chunk-ZEOLGKXL.js";
import "./chunk-HITI6WDM.js";
import "./chunk-IS4RJOPJ.js";
import "./chunk-XK3CKE5Q.js";
import "./chunk-AMH7CZMY.js";
import "./chunk-EAVSYZXD.js";
import "./chunk-7GHUVMBI.js";
import "./chunk-Q5JLNMWZ.js";
import "./chunk-AABDXAD3.js";
import "./chunk-LGS63R4F.js";
import "./chunk-L6FG3WIC.js";
import "./chunk-6ZLH7XBS.js";
import "./chunk-44ZUWZXU.js";
import {
  F,
  G,
  I
} from "./chunk-NAG6YX7T.js";
import "./chunk-NHYYZMJR.js";
import "./chunk-U4EMQMDC.js";
import "./chunk-AVCKPV77.js";
import "./chunk-MNBTLVRM.js";
import "./chunk-GNCXYHNE.js";
import "./chunk-CSK4VZQ7.js";
import "./chunk-2TNGEJGS.js";
import "./chunk-OYGNGIHQ.js";
import "./chunk-GSG4T2KM.js";
import "./chunk-D7C26LZP.js";
import "./chunk-BZHHBBFX.js";
import "./chunk-GK5M6FUR.js";
import "./chunk-MRP3FBLV.js";
import "./chunk-Y7SJWJAL.js";
import "./chunk-A2FDYA6M.js";
import "./chunk-YGAXDKHF.js";
import "./chunk-4TOSJLKR.js";
import "./chunk-ORYC4PVJ.js";
import "./chunk-DXIKKLD7.js";
import "./chunk-VQNXE43R.js";
import "./chunk-VZ37C3ID.js";
import "./chunk-FSG7HOZQ.js";
import "./chunk-Q5TIVVER.js";
import "./chunk-NVOJILW6.js";
import "./chunk-KYPTWEOO.js";
import "./chunk-WVFB3H4O.js";
import "./chunk-C7BQE556.js";
import "./chunk-ZREJ3Y2F.js";
import "./chunk-IR6CVPPC.js";
import "./chunk-BBUQOCRA.js";
import "./chunk-YBUJLIWZ.js";
import "./chunk-DL2B6IFJ.js";
import "./chunk-VOOO6FU5.js";
import "./chunk-IUPJR3FF.js";
import "./chunk-TGZW6QWO.js";
import "./chunk-OYIDHTXG.js";
import {
  u as u2
} from "./chunk-KUBMHTYA.js";
import "./chunk-VSQZQLTQ.js";
import "./chunk-K43CZ3M5.js";
import "./chunk-6EIBUVMG.js";
import "./chunk-S4XQLN73.js";
import "./chunk-NXXQ35YM.js";
import "./chunk-LM3JDV4W.js";
import "./chunk-34V2CLL5.js";
import "./chunk-7V4JSBFA.js";
import "./chunk-2EJFYNM7.js";
import "./chunk-DC5LRNPY.js";
import "./chunk-ASCK5HJ5.js";
import "./chunk-5X5U7R6O.js";
import "./chunk-XNLAOXPY.js";
import "./chunk-C2OXE4NQ.js";
import "./chunk-KOI252FF.js";
import "./chunk-I2TVVMQ6.js";
import "./chunk-5EGQYY2H.js";
import "./chunk-JKPUNUQA.js";
import "./chunk-SR7PRON4.js";
import "./chunk-HGHPYGKP.js";
import "./chunk-4DSGTDZJ.js";
import {
  d as d3
} from "./chunk-VYTPFEL2.js";
import "./chunk-RLGDH6IY.js";
import {
  j
} from "./chunk-MRPCXIVS.js";
import "./chunk-YTKVV2Y3.js";
import "./chunk-GCVQXAS4.js";
import "./chunk-UFQD6AL4.js";
import {
  B,
  e2
} from "./chunk-UVQYXHKM.js";
import {
  n as n2
} from "./chunk-M5N6UHWJ.js";
import "./chunk-EBCBYN6Y.js";
import "./chunk-ODFKYX74.js";
import "./chunk-EGBDRLCX.js";
import "./chunk-THZPD5CT.js";
import "./chunk-OBCA6CWH.js";
import "./chunk-2JI245BP.js";
import "./chunk-N34BRXVM.js";
import "./chunk-7QV7DHWN.js";
import "./chunk-4L4Y34YK.js";
import "./chunk-BXONKQKI.js";
import "./chunk-2HDBQXAR.js";
import "./chunk-RNF7VOCU.js";
import {
  _
} from "./chunk-TIRJMGGG.js";
import "./chunk-ZDRQSPB6.js";
import "./chunk-DCXDXGAR.js";
import "./chunk-BCCDYCTQ.js";
import "./chunk-AYL3HQHD.js";
import "./chunk-66YQWHHE.js";
import "./chunk-QGBMZIP4.js";
import "./chunk-AOEBZVTA.js";
import "./chunk-2OZSYJDX.js";
import "./chunk-MZM4INJV.js";
import {
  n as n3
} from "./chunk-J4GMQHGL.js";
import "./chunk-MHPE4SZA.js";
import {
  w2 as w
} from "./chunk-6SSA7P3A.js";
import "./chunk-FQBTLEUI.js";
import "./chunk-GS7Y3YOG.js";
import "./chunk-Y2HYKTTT.js";
import "./chunk-XLEC46FY.js";
import "./chunk-4AZPIP7K.js";
import "./chunk-JSKTDZU2.js";
import "./chunk-G73HQZEL.js";
import {
  A,
  C,
  d as d2
} from "./chunk-LZSLQ24Q.js";
import "./chunk-U3RHUXYK.js";
import "./chunk-7DBI6LQG.js";
import "./chunk-AUUN7RFQ.js";
import "./chunk-JAMSDYD6.js";
import "./chunk-PH6NPTP7.js";
import {
  e
} from "./chunk-NUICEVIH.js";
import {
  r
} from "./chunk-NXK752PZ.js";
import {
  y
} from "./chunk-UVNLCXWD.js";
import "./chunk-PNUA7JOS.js";
import "./chunk-OR2FKGUM.js";
import {
  a3 as a
} from "./chunk-UDMPWVPF.js";
import "./chunk-XJNKCEWL.js";
import {
  d
} from "./chunk-AIZ3T7E3.js";
import "./chunk-6UEMNP3E.js";
import {
  u
} from "./chunk-6WGE3IUL.js";
import "./chunk-MLYB2YW4.js";
import {
  n2 as n
} from "./chunk-6JFGZTLU.js";
import {
  h
} from "./chunk-2ZJE6ZFX.js";
import "./chunk-L4CMR4WM.js";
import "./chunk-7JIACICA.js";
import "./chunk-IE4UBD3F.js";
import "./chunk-IAO6HACY.js";
import {
  __spreadProps,
  __spreadValues
} from "./chunk-XBPEBUD5.js";

// ../../../node_modules/@arcgis/core/analysis/AreaMeasurementAnalysis.js
var p4 = class extends c {
  constructor(e7) {
    super(e7), this.type = "area-measurement", this.unit = null;
  }
  set geometry(e7) {
    null != e7 ? (e7.rings.length > 1 && n.getLogger(this).warn("Measuring polygons with multiple rings is not supported."), this._set("geometry", e7.clone())) : this._set("geometry", null);
  }
  get requiredPropertiesForEditing() {
    if (null != this.geometry && 1 === this.geometry.rings.length) {
      const e7 = this.geometry.rings[0];
      if (e7.length <= 2 || !h(e7[0], e7[e7.length - 1])) return [null];
    }
    return [this.geometry];
  }
  clear() {
    this.geometry = null;
  }
};
e([y({
  type: ["area-measurement"]
})], p4.prototype, "type", void 0), e([y({
  value: null,
  type: j
})], p4.prototype, "geometry", null), e([y({
  type: w,
  value: null
})], p4.prototype, "unit", void 0), e([y({
  readOnly: true
})], p4.prototype, "requiredPropertiesForEditing", null), p4 = e([a("esri.analysis.AreaMeasurementAnalysis")], p4);
var m = p4;

// ../../../node_modules/@arcgis/core/views/3d/interactive/measurementTools/support/PickRequest.js
var s = class {
  constructor(s2, t4 = null) {
    this.screenPoint = s2, this.result = t4;
  }
};
var t3 = class {
  constructor(s2, t4) {
    this.scenePoint = s2, this.mapPoint = t4;
  }
};

// ../../../node_modules/@arcgis/core/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DView.js
var y2 = class {
  constructor(t4) {
    this.vertexManipulators = [], this._destroyed = false, this._isManipulatorsOwner = true, this._visible = true, this._listenerHandles = null, this._tempHandlePosition = n3();
    const {
      analysisViewData: e7,
      manipulators: i2,
      toolState: s2,
      view: a3,
      visible: r2
    } = t4;
    this._analysisViewData = e7, this._toolState = s2, null != i2 ? (this._manipulators = i2, this._isManipulatorsOwner = false) : this._manipulators = new i(), this._view = a3, this._intersector = t2(a3.state.viewingMode);
    const o2 = f(this._handleColor), n5 = [new e4(st(o2, 1, 32, 32))], l = new ee({
      view: a3,
      renderObjects: n5
    });
    l.available = false, l.radius = D, l.interactive = false, this._manipulators.add(l), this._cursorManipulator = l, this._cursorManipulatorMaterial = o2, this._laserLine = new c2({
      view: a3,
      attached: true,
      style: {
        glowWidth: V,
        glowFalloff: M2,
        innerWidth: b
      },
      isDecoration: true
    }), this._updateVisibility(r2 ?? true);
  }
  destroy() {
    this._listenerHandles = u(this._listenerHandles), this._isManipulatorsOwner ? this._manipulators = u(this._manipulators) : this._manipulators = null, this._laserLine = u(this._laserLine), this._destroyed = true;
  }
  get destroyed() {
    return this._destroyed;
  }
  get visible() {
    return this._visible;
  }
  set visible(t4) {
    t4 ? this.show() : this.hide();
  }
  get testData() {
  }
  show() {
    this._setVisibility(true);
  }
  hide() {
    this._setVisibility(false);
  }
  _setVisibility(t4) {
    this._destroyed || this._visible === t4 || this._updateVisibility(t4);
  }
  _updateVisibility(t4) {
    this._visible = t4, this._laserLine.visible = t4, t4 ? (this._initializeListeners(), this._updateAll()) : (this._destroyListeners(), this.vertexManipulators.forEach(({
      manipulator: t5
    }) => this._removeVertexManipulator(t5)), this.vertexManipulators = [], this._view.cursor = null);
  }
  vertexHandleAt(t4, e7) {
    const i2 = this._manipulators.intersect(t4, e7);
    return i2?.metadata;
  }
  pick(t4) {
    const e7 = this._view.spatialReference, i2 = d3(t4.screenPoint);
    this._view.sceneIntersectionHelper.intersectToolIntersectorScreen(i2, this._intersector);
    const s2 = this._intersector.results.min, a3 = n3();
    if (!s2.getIntersectionPoint(a3)) return null;
    const r2 = this._view.renderCoordsHelper.fromRenderCoords(a3, new _({
      spatialReference: e7
    }));
    return null == r2 ? null : new t3(a3, r2);
  }
  _updateAll() {
    this._visible && (this._updateVertexManipulators(), this._updateLaserLine());
  }
  _createVertexManipulator() {
    const t4 = f(this._handleColor), e7 = [new e4(st(t4, 1, 32, 32))], i2 = new ee({
      view: this._view,
      renderObjects: e7
    });
    return i2.radius = D, this._manipulators.add(i2), {
      manipulator: i2,
      material: t4
    };
  }
  _removeVertexManipulator(t4) {
    this._manipulators.remove(t4);
  }
  _updateVertexManipulators() {
    const {
      viewData: t4
    } = this._analysisViewData, e7 = this._analysisViewData.path ? this._analysisViewData.path.vertices : [], i2 = this.vertexManipulators;
    f3(i2, e7.length, () => this._createVertexManipulator(), ({
      manipulator: t5
    }) => this._removeVertexManipulator(t5)), i2.forEach(({
      manipulator: i3
    }, s2) => {
      i3.metadata = e7[s2], i3.renderLocation = t4.positionsRender[s2], i3.cursor = 0 === s2 && "drawing" === this._toolState.polygonState ? "crosshair" : null;
    }), "drawing" === this._toolState.polygonState && null != this._analysisViewData.stagedPoint ? (this._cursorManipulator.available = true, this._cursorManipulator.location = this._analysisViewData.stagedPoint) : this._cursorManipulator.available = false;
  }
  get _handleColor() {
    return F(this._view.effectiveTheme.accentColor, 0.5);
  }
  _getFocusPoint() {
    const {
      lastDraggedVertex: t4
    } = this._analysisViewData;
    switch (this._toolState.polygonState) {
      case "drawing":
        return null != this._analysisViewData.stagedPoint ? this._analysisViewData.stagedPoint : null != t4 ? this._analysisViewData.path.getVertexPositionAsPoint(t4) : this._analysisViewData.path.lastPoint;
      case "editing":
        return null != t4 ? this._analysisViewData.path.getVertexPositionAsPoint(t4) : null;
      default:
        return this._analysisViewData.stagedPoint;
    }
  }
  _updateLaserLine() {
    const t4 = "measured" !== this._toolState.polygonState && this._toolState.active, e7 = this._getFocusPoint();
    if (t4 && null != e7) {
      const t5 = this._tempHandlePosition;
      this._view.renderCoordsHelper.toRenderCoords(e7, t5), this._laserLine.heightManifoldTarget = t5;
    } else this._laserLine.heightManifoldTarget = null;
  }
  _initializeListeners() {
    this._listenerHandles = new r(), this._listenerHandles.add([d2(() => this._toolState.polygonState, () => this._updateLaserLine()), d2(() => this._analysisViewData.viewData, () => this._updateAll(), C), d2(() => ({
      lastDraggedVertex: this._analysisViewData.lastDraggedVertex,
      cursorPoint: this._analysisViewData.stagedPoint
    }), () => this._updateLaserLine()), d2(() => this._toolState.active, () => this._updateAll()), d2(() => this._view.effectiveTheme.accentColor, (i2) => {
      const a3 = F(i2, 0.5);
      for (const {
        material: t4
      } of this.vertexManipulators) t4.setParameters({
        color: a3
      });
      this._cursorManipulatorMaterial.setParameters({
        color: a3
      });
      const r2 = u2.toUnitRGB(i2), o2 = u2.toUnitRGB(G(i2)), n5 = 0.75 * i2.a, l = this._laserLine, h3 = l.style;
      l.style = __spreadProps(__spreadValues({}, h3), {
        glowColor: r2,
        innerColor: o2,
        globalAlpha: n5
      });
    }, {
      initial: true,
      equals: I
    })]);
  }
  _destroyListeners() {
    this._listenerHandles = u(this._listenerHandles);
  }
};
function f3(t4, e7, i2, s2) {
  for (; t4.length < e7; ) t4.push(i2());
  if (s2) for (; t4.length > e7; ) {
    s2(t4.pop());
  }
  else t4.length = e7;
}
var V = 8;
var M2 = 8;
var b = 1;
var D = 5;

// ../../../node_modules/@arcgis/core/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DTool.js
var b2 = class extends o {
  constructor(t4) {
    super(t4), this._updatingHandles = new h2(), this.polygonState = "initial", this.manipulators = new i(), this._getSnappingContext = t((t5) => new e5({
      elevationInfo: {
        mode: "absolute-height",
        offset: 0
      },
      pointer: t5,
      editGeometryOperations: new E(new p("point", P(true, false, this.view.spatialReference)), this.view.state.viewingMode),
      visualizer: new R()
    }));
  }
  initialize() {
    const {
      view: t4,
      analysisViewData: e7,
      manipulators: i2,
      visible: o2
    } = this;
    this.measurementView = new y2({
      view: t4,
      analysisViewData: e7,
      toolState: this,
      manipulators: i2,
      visible: o2
    });
    const r2 = a2(t4);
    this._snappingManagerResult = r2, this.addHandles(r2), this._snappingOperation = new p3({
      view: t4
    }), this._updatingHandles.add(() => this.stagedPoint, (t5) => {
      this.analysisViewData.stagedPoint = null != t5 ? x(t5, new _()) : null;
    }, A), N(this, () => {
      const t5 = this.view.inputManager.latestPointerType ?? "mouse", e8 = this._getSnappingContext(t5);
      this._updatingHandles.addPromise(d(this._snappingOperation.snapAgainNearPreviousMapPoint(this._snappingManager, e8)));
    }), this._setupManipulators(), this.addHandles([d2(() => this.state, (t5) => {
      "measured" === t5 && this.finishToolCreation();
    }, A), this.analysisViewData.path.on("change", () => {
      const t5 = this.analysisViewData.path;
      "initial" !== this.polygonState || t5.isEmptyPolygon || (t5.isValidPolygon ? this.polygonState = "measured" : this.polygonState = "drawing");
    })]);
  }
  destroy() {
    this.measurementView.destroy(), this._set("measurementView", null), this._updatingHandles = u(this._updatingHandles);
  }
  get _snappingManager() {
    return this._snappingManagerResult.snappingManager;
  }
  get state() {
    return 0 === this.analysisViewData.path.numVertices ? "ready" : this.analysisViewData.path.isValidPolygon && "editing" !== this.polygonState ? "measured" : "measuring";
  }
  get cursor() {
    return "ready" === this.state || "drawing" === this.polygonState ? "crosshair" : null;
  }
  get updating() {
    return this._updatingHandles.updating || this._snappingManager.updating;
  }
  get stagedPoint() {
    return this._snappingOperation.stagedPoint;
  }
  set stagedPoint(t4) {
    this._snappingOperation.stagedPoint = t4;
  }
  get snappingOptions() {
    return this._snappingManager.options;
  }
  finishMeasurement() {
    const {
      path: t4
    } = this.analysisViewData;
    t4.numVertices < 3 ? (t4.clear(), this.polygonState = "initial") : (t4.close(), this.polygonState = "measured"), this._resetSnappingState();
  }
  onShow() {
    this.measurementView.show();
  }
  onHide() {
    this.measurementView.hide();
  }
  onDeactivate() {
    this._resetSnappingState();
  }
  onInputEvent(t4) {
    switch (t4.type) {
      case "immediate-double-click":
        this._handleImmediateDoubleClick(t4);
        break;
      case "immediate-click":
        this._handleImmediateClick(t4);
        break;
      case "pointer-move":
        this._handlePointerMove(t4);
        break;
      case "drag":
        this._handleDrag(t4);
        break;
      case "key-down":
        this._handleKeyDown(t4);
    }
  }
  _setupManipulators() {
    const t4 = (t5) => t5.events.on("grab-changed", () => {
      if (this.analysisViewData.path.isValidPolygon) {
        const t6 = this.manipulators.some((t7) => t7.manipulator.grabbing);
        this.polygonState = t6 ? "editing" : "measured";
      }
    }), e7 = (e8) => {
      this.addHandles([p2(e8, (t5, e9, i2, a3) => {
        const n5 = q(t5), s2 = t5.metadata, o2 = this._snappingManager, r2 = this._getSnappingContext(a3), p6 = this._updatingHandles, {
          snappingStep: l,
          cancelSnapping: h3
        } = f2({
          snappingManager: o2,
          snappingContext: r2,
          updatingHandles: p6
        });
        i2 = i2.next(n5).next((e10) => (this.analysisViewData.lastDraggedVertex = null, this.analysisViewData.path.setVertexPosition(s2, d6), t5.location = d6, e10)).next(h3), e9.next(n5).next(z(this.view)).next(...l).next((e10) => {
          t5.location = e10.mapEnd, this.analysisViewData.lastDraggedVertex = "end" === e10.action ? null : s2, this.analysisViewData.path.setVertexPosition(s2, x(e10.mapEnd));
        });
        const d6 = x(this.analysisViewData.path.getVertexPositionAsPoint(s2));
      }), t4(e8)], e8);
    };
    this.manipulators.forEach(({
      manipulator: t5
    }) => {
      e7(t5);
    }), this.addHandles([this.manipulators.on("after-add", ({
      item: {
        manipulator: t5
      }
    }) => {
      e7(t5);
    }), this.manipulators.on("after-remove", ({
      item: {
        manipulator: t5
      }
    }) => this.removeHandles(t5))]);
  }
  _handleImmediateDoubleClick(t4) {
    M(t4) && ("drawing" === this.polygonState && this.finishMeasurement(), t4.stopPropagation());
  }
  _handleDrag(t4) {
    "editing" === this.polygonState && t4.stopPropagation();
  }
  _handleImmediateClick(t4) {
    if (!M(t4)) return;
    const e7 = n4(t4), {
      pointerType: i2
    } = t4;
    if (this.active) switch (this.polygonState) {
      case "initial":
        if (this._addVertexAt(e7, i2)) return this.stagedPoint = null, this.polygonState = "drawing", void t4.stopPropagation();
        break;
      case "drawing": {
        const a3 = this.measurementView.vertexHandleAt(e7, i2);
        if (null == a3) {
          if (this._addVertexAt(e7, i2)) return this.stagedPoint = null, void t4.stopPropagation();
        } else 0 === a3.index && (this.finishMeasurement(), t4.stopPropagation());
        break;
      }
    }
    "mouse" === t4.pointerType && this._hoverAt(e7);
  }
  _handlePointerMove(t4) {
    if ("mouse" === t4.pointerType) {
      const e7 = n4(t4);
      this._hoverAt(e7);
    }
  }
  _handleKeyDown(t4) {
    const {
      path: e7
    } = this.analysisViewData;
    "Enter" === t4.key && "drawing" === this.polygonState && e7.numVertices >= 3 && (this.stagedPoint = null, this.finishMeasurement(), t4.stopPropagation());
  }
  _hoverAt(t4) {
    const {
      polygonState: e7
    } = this;
    if (this.active && ("initial" === e7 || "drawing" === e7)) {
      const e8 = this._pick(t4);
      if (null != e8?.mapPoint) {
        const t5 = this._getSnappingContext("mouse");
        this._updatingHandles.addPromise(d(this._snappingOperation.snap({
          point: e8.mapPoint
        }, this._snappingManager, t5)));
      }
    } else this.stagedPoint = null;
  }
  _addVertexAt(t4, e7) {
    const i2 = this._pick(t4);
    if (null != i2?.mapPoint) {
      const {
        mapPoint: t5
      } = i2, a3 = this._getSnappingContext(e7), n5 = this._snappingOperation.update({
        point: t5
      }, this._snappingManager, a3), s2 = x(n5, new _());
      return this.analysisViewData.path.add(s2), true;
    }
    return false;
  }
  _pick(t4) {
    const e7 = new s(t4);
    return this.measurementView.pick(e7);
  }
  _resetSnappingState() {
    this._snappingManager.doneSnapping(), this._snappingOperation.abort(), this._snappingOperation.stagedPoint = null;
  }
  get test() {
  }
};
e([y({
  readOnly: true
})], b2.prototype, "state", null), e([y()], b2.prototype, "polygonState", void 0), e([y({
  readOnly: true
})], b2.prototype, "cursor", null), e([y()], b2.prototype, "measurementView", void 0), e([y({
  constructOnly: true
})], b2.prototype, "view", void 0), e([y({
  constructOnly: true
})], b2.prototype, "analysis", void 0), e([y({
  constructOnly: true
})], b2.prototype, "analysisViewData", void 0), e([y({
  readOnly: true
})], b2.prototype, "manipulators", void 0), e([y()], b2.prototype, "updating", null), e([y()], b2.prototype, "stagedPoint", null), e([y()], b2.prototype, "snappingOptions", null), b2 = e([a("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DTool")], b2);
var O = b2;

// ../../../node_modules/@arcgis/core/widgets/AreaMeasurement3D/AreaMeasurement3DViewModel.js
var p5 = class extends u4 {
  constructor(t4) {
    super(t4), this.analysis = null, this.supportedViewType = "3d", this.unsupportedErrorMessage = "AreaMeasurement3DViewModel is only supported in 3D views.", this._userUnitOptions = null, this._userUnit = null;
  }
  initialize() {
    this.addHandles(d2(() => ({
      analysis: this.analysis,
      unit: this.unit
    }), ({
      analysis: t4,
      unit: e7
    }) => {
      null != t4 && (t4.unit = e7);
    }, A));
  }
  get state() {
    return this.disabled || !this.ready ? "disabled" : null == this.tool ? "ready" : this.tool.state;
  }
  get measurement() {
    if (null == this.tool || this.disabled || this.tool.destroyed) return null;
    const {
      analysisView: t4
    } = this;
    if (null == t4) return null;
    const e7 = t4.analysisVisualization, i2 = e7.viewData, s2 = i2.validMeasurement, n5 = "euclidean" === i2.mode, r2 = 0 === i2.intersectingSegments.size, l = r2 ? s2 ? "available" : "unavailable" : "invalid";
    return {
      mode: n5 ? "euclidean" : "geodesic",
      area: {
        text: r2 && s2 ? e7.areaLabel : null,
        state: l
      },
      perimeterLength: {
        text: r2 && s2 ? e7.perimeterLengthLabel : null,
        state: l
      }
    };
  }
  set unitOptions(t4) {
    this._userUnitOptions = t4, this._set("unitOptions", this._filteredOrAllUnits(this._userUnitOptions));
  }
  get unitOptions() {
    return this._filteredOrAllUnits(this._userUnitOptions);
  }
  set unit(t4) {
    this._userUnit = t4 ? this._findSelectableUnit(t4, this._userUnit) : null;
  }
  get unit() {
    return null != this._userUnit ? (this._userUnit = this._findSelectableUnit(this._userUnit, this.defaultUnit), this._userUnit) : this._findSelectableUnit(this.defaultUnit);
  }
  constructAnalysis() {
    return new m();
  }
  constructTool() {
    return new O({
      view: this.view,
      analysis: this.analysis,
      analysisViewData: this.analysisView,
      visible: this.visible
    });
  }
  _findSelectableUnit(t4, e7) {
    const {
      unitOptions: i2
    } = this;
    return i2.includes(t4) ? t4 : null != e7 ? this._findSelectableUnit(e7) : i2[0];
  }
  _filteredOrAllUnits(t4) {
    if (null == t4) return w.slice();
    const e7 = t4.filter((t5) => w.includes(t5));
    return 0 === e7.length ? w.slice() : e7;
  }
};
e([y({
  type: m
})], p5.prototype, "analysis", void 0), e([y({
  readOnly: true
})], p5.prototype, "state", null), e([y({
  readOnly: true
})], p5.prototype, "measurement", null), e([y()], p5.prototype, "unitOptions", null), e([y()], p5.prototype, "unit", null), e([y(e6)], p5.prototype, "defaultUnit", void 0), e([y()], p5.prototype, "_userUnit", void 0), p5 = e([a("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel")], p5);
var d4 = p5;

// ../../../node_modules/@arcgis/core/widgets/AreaMeasurement3D.js
var u5 = "esri-area-measurement-3d";
var m2 = {
  base: u5,
  newMeasurementButton: `${u5}__clear-button`
};
var d5 = class extends B {
  constructor(e7, t4) {
    super(e7, t4), this.messages = null, this.messagesCommon = null, this.messagesUnits = null, this.viewModel = new d4();
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e7) {
    this.viewModel.view = e7;
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(e7) {
    this.viewModel.visible = e7;
  }
  get active() {
    return this.viewModel.active;
  }
  get analysis() {
    return this.viewModel.analysis;
  }
  set analysis(e7) {
    this.viewModel.analysis = e7;
  }
  get icon() {
    return "measure-area";
  }
  set icon(e7) {
    this._overrideIfSome("icon", e7);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e7) {
    this._overrideIfSome("label", e7);
  }
  get unitOptions() {
    return this.viewModel.unitOptions;
  }
  set unitOptions(e7) {
    this.viewModel.unitOptions = e7;
  }
  get unit() {
    return this.viewModel.unit;
  }
  set unit(e7) {
    this.viewModel.unit = e7;
  }
  render() {
    const {
      messages: e7,
      messagesCommon: s2,
      messagesUnits: i2,
      unit: o2,
      unitOptions: r2,
      viewModel: l
    } = this, {
      active: u6,
      measurement: d6,
      state: v2,
      supported: g
    } = l;
    return n2("div", {
      "aria-label": this.messages.widgetLabel,
      class: this.classes(m2.base, e3.widget, e3.panel),
      key: this,
      role: "presentation"
    }, this.visible ? n2(u3, {
      active: u6,
      measurementItems: [{
        key: "direct",
        title: i2.measures.area,
        value: c3(d6?.area)
      }, {
        key: "perimeter",
        title: e7.perimeterLength,
        value: c3(d6?.perimeterLength)
      }],
      messages: __spreadProps(__spreadValues({}, e7), {
        notApplicable: s2.notApplicable
      }),
      newMeasurementButtonClass: m2.newMeasurementButton,
      state: v2,
      supported: g,
      unit: o2,
      unitOptions: r2,
      onNewMeasurementClick: () => {
        d(this.viewModel.start());
      },
      onUnitChange: (e8) => {
        this.unit = e8;
      }
    }) : null);
  }
};
function c3(e7) {
  return "available" === e7?.state ? e7.text : null;
}
e([y()], d5.prototype, "view", null), e([y()], d5.prototype, "visible", null), e([y()], d5.prototype, "active", null), e([y({
  constructOnly: true,
  nonNullable: true
})], d5.prototype, "analysis", null), e([y()], d5.prototype, "icon", null), e([y()], d5.prototype, "label", null), e([y(), e2("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")], d5.prototype, "messages", void 0), e([y(), e2("esri/t9n/common")], d5.prototype, "messagesCommon", void 0), e([y(), e2("esri/core/t9n/Units")], d5.prototype, "messagesUnits", void 0), e([y()], d5.prototype, "uiStrings", void 0), e([y({
  type: d4
})], d5.prototype, "viewModel", void 0), e([y()], d5.prototype, "unitOptions", null), e([y()], d5.prototype, "unit", null), d5 = e([a("esri.widgets.AreaMeasurement3D")], d5);
var v = d5;
export {
  v as default
};
//# sourceMappingURL=AreaMeasurement3D-WJRUU5DJ.js.map
