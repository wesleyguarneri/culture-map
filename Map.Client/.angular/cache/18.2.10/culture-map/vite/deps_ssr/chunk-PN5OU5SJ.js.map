{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/views/layers/ImageryLayerView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Error.js\";\nimport { throwIfAborted as r } from \"../../core/promiseUtils.js\";\nimport { property as o } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/RandomLCG.js\";\nimport { subclass as s } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport i from \"../../geometry/Point.js\";\nimport { combineTimeExtent as p } from \"../../layers/support/timeSupport.js\";\nimport a from \"../../rest/support/Query.js\";\nimport { getFetchPopupTemplate as n } from \"./support/popupUtils.js\";\nconst m = m => {\n  let u = class extends m {\n    constructor() {\n      super(...arguments), this.view = null;\n    }\n    get timeExtent() {\n      return p(this.layer, this.view?.timeExtent, this._get(\"timeExtent\"));\n    }\n    async fetchPopupFeaturesAtLocation(e, o) {\n      const {\n        layer: s\n      } = this;\n      if (!e) throw new t(\"imagerylayerview:fetchPopupFeatures\", \"Nothing to fetch without area\", {\n        layer: s\n      });\n      const {\n          popupEnabled: p\n        } = s,\n        m = n(s, o);\n      if (!p || null == m) return [];\n      const u = await m.getRequiredFields();\n      r(o);\n      const c = new a();\n      c.timeExtent = this.timeExtent, c.geometry = e, c.outFields = u, c.outSpatialReference = e.spatialReference;\n      const {\n          resolution: l,\n          spatialReference: y\n        } = this.view,\n        h = \"2d\" === this.view.type ? new i(l, l, y) : new i(.5 * l, .5 * l, y),\n        {\n          returnTopmostRaster: d,\n          showNoDataRecords: f\n        } = m.layerOptions || {\n          returnTopmostRaster: !0,\n          showNoDataRecords: !1\n        },\n        w = {\n          returnDomainValues: !0,\n          returnTopmostRaster: d,\n          pixelSize: h,\n          showNoDataRecords: f,\n          signal: o?.signal\n        };\n      return s.queryVisibleRasters(c, w).then(e => e);\n    }\n    canResume() {\n      return !!super.canResume() && !this.timeExtent?.isEmpty;\n    }\n  };\n  return e([o()], u.prototype, \"layer\", void 0), e([o()], u.prototype, \"suspended\", void 0), e([o({\n    readOnly: !0\n  })], u.prototype, \"timeExtent\", null), e([o()], u.prototype, \"view\", void 0), u = e([s(\"esri.views.layers.ImageryLayerView\")], u), u;\n};\nexport { m as default };"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,IAAM,IAAI,CAAAA,OAAK;AACb,MAAI,IAAI,cAAcA,GAAE;AAAA,IACtB,cAAc;AACZ,YAAM,GAAG,SAAS,GAAG,KAAK,OAAO;AAAA,IACnC;AAAA,IACA,IAAI,aAAa;AACf,aAAO,EAAE,KAAK,OAAO,KAAK,MAAM,YAAY,KAAK,KAAK,YAAY,CAAC;AAAA,IACrE;AAAA,IACM,6BAA6BC,IAAG,GAAG;AAAA;AACvC,cAAM;AAAA,UACJ,OAAOC;AAAA,QACT,IAAI;AACJ,YAAI,CAACD,GAAG,OAAM,IAAI,EAAE,uCAAuC,iCAAiC;AAAA,UAC1F,OAAOC;AAAA,QACT,CAAC;AACD,cAAM;AAAA,UACF,cAAcC;AAAA,QAChB,IAAID,IACJF,KAAI,EAAEE,IAAG,CAAC;AACZ,YAAI,CAACC,MAAK,QAAQH,GAAG,QAAO,CAAC;AAC7B,cAAMI,KAAI,MAAMJ,GAAE,kBAAkB;AACpC,QAAAE,GAAE,CAAC;AACH,cAAM,IAAI,IAAI,EAAE;AAChB,UAAE,aAAa,KAAK,YAAY,EAAE,WAAWD,IAAG,EAAE,YAAYG,IAAG,EAAE,sBAAsBH,GAAE;AAC3F,cAAM;AAAA,UACF,YAAY;AAAA,UACZ,kBAAkBI;AAAA,QACpB,IAAI,KAAK,MACT,IAAI,SAAS,KAAK,KAAK,OAAO,IAAI,EAAE,GAAG,GAAGA,EAAC,IAAI,IAAI,EAAE,MAAK,GAAG,MAAK,GAAGA,EAAC,GACtE;AAAA,UACE,qBAAqB;AAAA,UACrB,mBAAmB;AAAA,QACrB,IAAIL,GAAE,gBAAgB;AAAA,UACpB,qBAAqB;AAAA,UACrB,mBAAmB;AAAA,QACrB,GACA,IAAI;AAAA,UACF,oBAAoB;AAAA,UACpB,qBAAqB;AAAA,UACrB,WAAW;AAAA,UACX,mBAAmB;AAAA,UACnB,QAAQ,GAAG;AAAA,QACb;AACF,eAAOE,GAAE,oBAAoB,GAAG,CAAC,EAAE,KAAK,CAAAD,OAAKA,EAAC;AAAA,MAChD;AAAA;AAAA,IACA,YAAY;AACV,aAAO,CAAC,CAAC,MAAM,UAAU,KAAK,CAAC,KAAK,YAAY;AAAA,IAClD;AAAA,EACF;AACA,SAAO,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,SAAS,MAAM,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,aAAa,MAAM,GAAG,EAAE,CAAC,EAAE;AAAA,IAC9F,UAAU;AAAA,EACZ,CAAC,CAAC,GAAG,EAAE,WAAW,cAAc,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,QAAQ,MAAM,GAAG,IAAI,EAAE,CAAC,EAAE,oCAAoC,CAAC,GAAG,CAAC,GAAG;AACrI;",
  "names": ["m", "e", "s", "p", "u", "y"]
}
