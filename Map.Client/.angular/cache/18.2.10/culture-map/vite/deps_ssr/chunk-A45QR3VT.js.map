{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/geometry/support/meshUtils/projection.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { hasScaling as r, deg2rad as t } from \"../../../core/mathUtils.js\";\nimport { normalFromMat4 as o, fromMat4 as e } from \"../../../core/libs/gl-matrix-2/math/mat3.js\";\nimport { create as n } from \"../../../core/libs/gl-matrix-2/factories/mat3f64.js\";\nimport { multiply as i, equals as c, invert as a } from \"../../../core/libs/gl-matrix-2/math/mat4.js\";\nimport { IDENTITY as f, create as s } from \"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";\nimport { t as l, n as m, e as u } from \"../../../chunks/vec32.js\";\nimport { ZEROS as p, create as T } from \"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";\nimport { canProjectWithoutEngine as y } from \"../../projection.js\";\nimport { getSphericalPCPF as A } from \"../../spatialReferenceEllipsoidUtils.js\";\nimport { computeTranslationToOriginAndRotation as d } from \"../../projection/computeTranslationToOriginAndRotation.js\";\nimport { projectBuffer as P } from \"../../projection/projectBuffer.js\";\nimport { newDoubleArray as g, copyInto as j } from \"../DoubleArray.js\";\nimport { earth as M } from \"../Ellipsoid.js\";\nimport { isCGCS2000 as h, isMars as N, isMoon as R } from \"../spatialReferenceUtils.js\";\nimport { y2lat as O } from \"../webMercatorUtils.js\";\nimport { BufferViewVec3f as F, BufferViewVec3f64 as E } from \"../buffer/BufferView.js\";\nimport { t as _, n as b, a as x } from \"../../../chunks/vec3.js\";\nimport { t as C } from \"../../../chunks/vec4.js\";\nconst L = \"Projection may be possible after calling projection.load().\";\nfunction S(r, t, o, e) {\n  r.error(`Failed to project from (wkid:${t.wkid}) to (wkid:${o.wkid}).${e ? \" \" : \"\"}${e}`);\n}\nfunction v(r, t, o, e, n) {\n  return I(z.TO_PCPF, F.fromTypedArray(r), D.NORMAL, E.fromTypedArray(t), E.fromTypedArray(o), e, F.fromTypedArray(n)) ? n : null;\n}\nfunction k(r, t, o, e, n) {\n  return I(z.FROM_PCPF, F.fromTypedArray(r), D.NORMAL, E.fromTypedArray(t), E.fromTypedArray(o), e, F.fromTypedArray(n)) ? n : null;\n}\nfunction w(r, t, o) {\n  return P(r, t, 0, o, A(t), 0, r.length / 3) ? o : null;\n}\nfunction G(r, t, o) {\n  return P(r, A(o), 0, t, o, 0, r.length / 3) ? t : null;\n}\nfunction V(t, e, n) {\n  return o(or, n), _(e, t, or), r(or) && b(e, e), e;\n}\nfunction B(t, o, n) {\n  return e(or, n), C(o, t, or), r(or) && b(o, o, 4), o;\n}\nfunction U(r, o, e, n) {\n  const i = o === D.NORMAL;\n  return W(r, o, e, (r, o) => {\n    const e = Math.cos(t(r));\n    o[0] = i ? e : 1 / e, o[1] = 1;\n  }, n);\n}\nfunction $(r, t, o, e) {\n  const n = t === D.NORMAL;\n  return W(r, t, o, (r, t) => {\n    const o = Math.cosh(-r / M.radius);\n    t[0] = 1, t[1] = n ? o : 1 / o;\n  }, e);\n}\nfunction W(r, t, o, e, n) {\n  const i = t === D.NORMAL ? 3 : 4,\n    c = [0, 0];\n  for (let a = 0, f = 1; a < r.length; a += i, f += 3) {\n    e(o[f], c);\n    const t = r[a] * c[0],\n      s = r[a + 1] * c[1],\n      l = r[a + 2],\n      m = 1 / Math.sqrt(t * t + s * s + l * l);\n    n[a] = t * m, n[a + 1] = s * m, n[a + 2] = l * m, 4 === i && (n[a + 3] = r[a + 3]);\n  }\n  return n;\n}\nfunction Y(r, t, o, e, n) {\n  if (!I(z.TO_PCPF, F.fromTypedArray(r, 4 * Float32Array.BYTES_PER_ELEMENT), D.TANGENT, E.fromTypedArray(t), E.fromTypedArray(o), e, F.fromTypedArray(n, 4 * Float32Array.BYTES_PER_ELEMENT))) return null;\n  for (let i = 3; i < r.length; i += 4) n[i] = r[i];\n  return n;\n}\nfunction q(r, t, o, e, n) {\n  if (!I(z.FROM_PCPF, F.fromTypedArray(r, 16), D.TANGENT, E.fromTypedArray(t), E.fromTypedArray(o), e, F.fromTypedArray(n, 16))) return null;\n  for (let i = 3; i < r.length; i += 4) n[i] = r[i];\n  return n;\n}\nvar D, z;\nfunction H(r, t, n, i, c) {\n  switch (d(i, n, tr, i), r === z.FROM_PCPF && a(tr, tr), t) {\n    case D.NORMAL:\n      return o(c, tr);\n    case D.TANGENT:\n      return e(c, tr);\n  }\n}\nfunction I(r, t, o, e, n, i, c) {\n  if (!t) return;\n  const a = e.count,\n    f = A(i);\n  if (X(i)) for (let s = 0; s < a; s++) n.getVec(s, Z), t.getVec(s, rr), l(rr, rr, H(r, o, Z, f, or)), c.setVec(s, rr);else for (let s = 0; s < a; s++) {\n    n.getVec(s, Z), t.getVec(s, rr);\n    const i = O(e.get(s, 1));\n    let a = Math.cos(i);\n    o === D.TANGENT != (r === z.TO_PCPF) && (a = 1 / a), H(r, o, Z, f, or), r === z.TO_PCPF ? (or[0] *= a, or[1] *= a, or[2] *= a, or[3] *= a, or[4] *= a, or[5] *= a) : (or[0] *= a, or[3] *= a, or[6] *= a, or[1] *= a, or[4] *= a, or[7] *= a), l(rr, rr, or), m(rr, rr), c.setVec(s, rr);\n  }\n  return c;\n}\nfunction J(r) {\n  return \"local\" === r.vertexSpace.type ? K(r) : Q(r);\n}\nfunction K({\n  vertexSpace: r,\n  transform: t,\n  inSpatialReference: o,\n  outSpatialReference: e,\n  localMode: n,\n  outPositions: c,\n  positions: a\n}) {\n  const s = r.origin ?? p,\n    l = null != r.origin ? t?.localMatrix ?? f : f,\n    m = A(o),\n    u = e.isWebMercator && n || !y(o, m) ? o : m;\n  d(o, s, tr, u), i(tr, tr, l);\n  const T = c ?? g(a.length);\n  return x(T, a, tr), P(T, u, 0, T, e, 0, T.length / 3), T;\n}\nfunction Q({\n  vertexSpace: r,\n  transform: t,\n  outPositions: o,\n  positions: e,\n  inSpatialReference: n,\n  outSpatialReference: i\n}) {\n  const a = null != r.origin ? t?.localMatrix ?? f : f,\n    s = o ?? g(e.length);\n  c(a, f) ? j(s, e) : x(s, e, a);\n  const l = r.origin ?? p;\n  if (!u(l, p)) {\n    const [r, t, o] = l;\n    for (let e = 0; e < s.length; e += 3) s[e] += r, s[e + 1] += t, s[e + 2] += o;\n  }\n  return P(s, n, 0, s, i, 0, s.length / 3) ? s : null;\n}\nfunction X(r) {\n  return r.isWGS84 || h(r) || N(r) || R(r);\n}\n!function (r) {\n  r[r.NORMAL = 0] = \"NORMAL\", r[r.TANGENT = 1] = \"TANGENT\";\n}(D || (D = {})), function (r) {\n  r[r.TO_PCPF = 0] = \"TO_PCPF\", r[r.FROM_PCPF = 1] = \"FROM_PCPF\";\n}(z || (z = {}));\nconst Z = T(),\n  rr = T(),\n  tr = s(),\n  or = n();\nexport { D as VectorType, L as loadProjectErrorMessage, S as logProjectionError, J as project, G as projectFromPCPF, k as projectNormalFromPCPF, v as projectNormalToPCPF, q as projectTangentFromPCPF, Y as projectTangentToPCPF, w as projectToPCPF, V as transformNormal, B as transformTangent, U as transformVectorENUPlateCarree, $ as transformVectorWMPlateCarree };"],
  "mappings": "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",
  "names": ["S", "t", "o", "e", "n", "z", "k", "G", "f", "l", "i", "r", "c", "a", "s", "h", "J", "u", "T"]
}
