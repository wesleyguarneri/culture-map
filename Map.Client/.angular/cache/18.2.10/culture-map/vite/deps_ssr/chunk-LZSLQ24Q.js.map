{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/core/reactiveUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { createTask as n } from \"./asyncUtils.js\";\nimport e from \"./Collection.js\";\nimport { isEventedOrEventTarget as t, on as o } from \"./events.js\";\nimport { handlesGroup as r, destroyHandle as s, makeHandle as i } from \"./handleUtils.js\";\nimport { removeMaybe as c } from \"./maybe.js\";\nimport { isAborted as u, createAbortError as l, onAbort as a, ignoreAbortErrors as f } from \"./promiseUtils.js\";\nimport { watchTracked as m } from \"./accessorSupport/watch.js\";\nexport { autorun } from \"./accessorSupport/trackingUtils.js\";\nfunction d(n, e, t = {}) {\n  return y(n, e, t, L);\n}\nfunction p(n, e, t = {}) {\n  return y(n, e, t, M);\n}\nfunction y(n, e, t = {}, o) {\n  let r = null;\n  const s = t.once ? (n, t) => {\n    o(n) && (c(r), e(n, t));\n  } : (n, t) => {\n    o(n) && e(n, t);\n  };\n  if (r = m(n, s, t.sync, t.equals), t.initial) {\n    const e = n();\n    s(e, e);\n  }\n  return r;\n}\nfunction v(n, e, r, s = {}) {\n  let u = null,\n    l = null,\n    a = null;\n  function f() {\n    u && l && (l.remove(), s.onListenerRemove?.(u), u = null, l = null);\n  }\n  function m(n) {\n    s.once && s.once && c(a), r(n);\n  }\n  const p = d(n, (n, r) => {\n    f(), t(n) && (u = n, l = o(n, e, m), s.onListenerAdd?.(n));\n  }, {\n    sync: s.sync,\n    initial: !0\n  });\n  return a = i(() => {\n    p.remove(), f();\n  }), a;\n}\nfunction j(n, e) {\n  return h(n, null, e);\n}\nfunction w(n, e) {\n  return h(n, M, e);\n}\nfunction h(n, e, t) {\n  if (u(t)) return Promise.reject(l());\n  const o = n();\n  if (e?.(o)) return Promise.resolve(o);\n  let s = null;\n  function i() {\n    s = c(s);\n  }\n  return new Promise((o, c) => {\n    s = r([a(t, () => {\n      i(), c(l());\n    }), y(n, n => {\n      i(), o(n);\n    }, {\n      sync: !1,\n      once: !0\n    }, e ?? L)]);\n  });\n}\nfunction L(n) {\n  return !0;\n}\nfunction M(n) {\n  return !!n;\n}\nfunction U(n, e, t = {}) {\n  let o = !1;\n  const r = d(n, (n, t) => {\n    o || e(n, t);\n  }, t);\n  return {\n    remove() {\n      r.remove();\n    },\n    pause() {\n      o = !0;\n    },\n    resume() {\n      o = !1;\n    }\n  };\n}\nfunction g(n, t) {\n  const o = new e(),\n    r = v(n, \"after-splice\", ({\n      added: n,\n      start: e,\n      deleteCount: r\n    }) => {\n      const s = o.splice(e, r);\n      for (const t of s) t.remove();\n      if (n?.length) {\n        const r = n.map(t);\n        o.addMany(r, e);\n      }\n    }, {\n      sync: !0,\n      onListenerRemove: () => o.drain(n => n.remove()),\n      onListenerAdd: n => o.addMany(n.items.map(t))\n    });\n  return o.addHandles(r), o;\n}\nfunction x(t, o) {\n  const r = new e(),\n    i = g(t, e => n(async n => {\n      const t = await o(e, n);\n      if (u(n)) throw t.remove(), l();\n      return t;\n    })),\n    c = () => null,\n    a = async n => {\n      const e = await n.promise,\n        t = i.indexOf(n);\n      t < 0 || r.splice(t, 1, e);\n    };\n  r.addMany(i.items.map(c));\n  for (const n of i) f(a(n));\n  const m = i.on(\"after-splice\", ({\n    added: n,\n    start: e,\n    deleteCount: t\n  }) => {\n    const o = r.splice(e, t);\n    for (const r of o) r?.remove();\n    if (n?.length) {\n      r.addMany(n.map(c), e);\n      for (const e of n) f(a(e));\n    }\n  });\n  return r.addHandles([s(i), m]), r;\n}\nconst C = {\n    sync: !0\n  },\n  P = {\n    initial: !0\n  },\n  A = {\n    sync: !0,\n    initial: !0\n  };\nexport { P as initial, g as mapCollection, x as mapCollectionAsync, v as on, j as once, U as pausable, C as sync, A as syncAndInitial, d as watch, p as when, w as whenOnce };"],
  "mappings": "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",
  "names": ["d", "n", "e", "o", "t", "u", "l", "m", "p", "r", "w", "i", "c"]
}
