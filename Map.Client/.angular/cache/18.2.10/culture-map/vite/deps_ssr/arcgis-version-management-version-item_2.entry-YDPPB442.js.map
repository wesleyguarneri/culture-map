{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/map-components/dist/esm/arcgis-version-management-version-item_2.entry.js"],
  "sourcesContent": ["/*!\n * All material copyright Esri, All Rights Reserved, unless otherwise specified.\n * See https://js.arcgis.com/4.30/esri/copyright.txt for details.\n * v4.30.7\n */\nimport { r as registerInstance, c as createEvent, h, g as getElement } from './index-7d33cc26.js';\nconst ArcgisVersionManagementVersionItem = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.arcgisManageVersion = createEvent(this, \"arcgisManageVersion\", 7);\n    this.versionItemElementProps = undefined;\n  }\n  render() {\n    const {\n      versionItemElementProps: {\n        currentUser,\n        currentVersionIdentifier,\n        hasAdvEditingUte,\n        isVersioningApiAvailable,\n        serviceUrl,\n        strings: {\n          actions\n        },\n        versionInfo\n      }\n    } = this;\n    const fullVersionName = versionInfo.versionIdentifier.name;\n    const versionName = fullVersionName.substring(fullVersionName.lastIndexOf(\".\") + 1); // label\n    const versionOwner = fullVersionName.substring(0, fullVersionName.lastIndexOf(\".\")).toUpperCase(); // description\n    const guid = versionInfo.versionIdentifier.guid;\n    const actionElementId = `actionSwitchToVersion_${guid}`;\n    const canEditVersion = versionOwner.toUpperCase() === currentUser.toUpperCase() && isVersioningApiAvailable && hasAdvEditingUte;\n    const isCurrentVersion = currentVersionIdentifier.guid === versionInfo.versionIdentifier.guid;\n    const startActionChangeVersion = h(\"calcite-action\", {\n      key: '2f6e3eeea7fc7736a1199a29668894dd80dac94a',\n      disabled: isCurrentVersion,\n      id: actionElementId,\n      icon: \"code-branch\",\n      text: \"\",\n      onClick: () => {\n        this.arcgisManageVersion.emit({\n          actionType: \"changeVersion\",\n          serviceUrl,\n          versionInfo\n        });\n      },\n      slot: \"actions-start\"\n    });\n    const startActionChangeVersionTooltip = !isCurrentVersion ? h(\"calcite-tooltip\", {\n      \"overlay-positioning\": \"fixed\",\n      referenceElement: actionElementId\n    }, h(\"span\", null, actions.switchToVersion)) : undefined;\n    return h(\"calcite-list-item\", {\n      key: '74b8319a683737aaaf8cfc5f06147eaa401195a6',\n      description: versionOwner,\n      label: versionName,\n      selected: false,\n      value: guid\n    }, startActionChangeVersion, startActionChangeVersionTooltip, h(\"calcite-action-menu\", {\n      key: '535784b416984e07bbfc44a275dfc5c81fb55daf',\n      \"overlay-positioning\": \"fixed\",\n      slot: \"actions-end\",\n      label: \"\"\n    }, h(\"calcite-action\", {\n      key: '5e89410767d43ab3ce8a6e3ac6ef5d2db5542ea7',\n      disabled: isCurrentVersion,\n      icon: \"code-branch\",\n      onClick: () => {\n        this.arcgisManageVersion.emit({\n          actionType: \"changeVersion\",\n          serviceUrl,\n          versionInfo\n        });\n      },\n      scale: \"s\",\n      text: actions.switchToVersion,\n      textEnabled: true\n    }), h(\"calcite-action\", {\n      key: 'cf3ab694540fb02bcfa7c5ef9557fcb6a93746c1',\n      disabled: !canEditVersion || isCurrentVersion,\n      icon: \"code-branch-edit\",\n      onClick: () => {\n        this.arcgisManageVersion.emit({\n          actionType: \"editVersion\",\n          serviceUrl,\n          versionInfo\n        });\n      },\n      scale: \"s\",\n      text: actions.editVersion,\n      textEnabled: true\n    }), h(\"calcite-action\", {\n      key: 'bb646b907dbbc62283a15295a265912ba45d73a4',\n      disabled: !canEditVersion || canEditVersion && isCurrentVersion,\n      icon: \"trash\",\n      onClick: () => {\n        this.arcgisManageVersion.emit({\n          actionType: \"deleteVersion\",\n          serviceUrl,\n          versionInfo\n        });\n      },\n      scale: \"s\",\n      text: actions.deleteVersion,\n      textEnabled: true\n    })));\n  }\n  get el() {\n    return getElement(this);\n  }\n};\nconst ArcgisVersionManagementVersionList = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.arcgisNewVersion = createEvent(this, \"arcgisNewVersion\", 7);\n    this.arcgisGetVersions = createEvent(this, \"arcgisGetVersions\", 7);\n    this.arcgisManageVersion = createEvent(this, \"arcgisManageVersion\", 7);\n    this._handleFilterChange = () => {\n      const {\n        versionListElementProps: {\n          versionInfos\n        }\n      } = this;\n      const filterText = this._filterInputElement.value.toUpperCase();\n      this._filteredVersionInfos = filterText === \"\" ? versionInfos : versionInfos.filter(version => version.versionIdentifier.name.toUpperCase().includes(filterText) || version.versionIdentifier.guid.toUpperCase().includes(filterText));\n      if (this._filteredVersionInfos.length) {\n        this.currentPage = 1;\n      }\n    };\n    this._handleNoticeClosed = () => {\n      this.versionListElementProps = {\n        ...this.versionListElementProps,\n        executionError: undefined\n      };\n    };\n    this._handlePaginationChange = event => {\n      this.currentPage = event.target.startItem;\n    };\n    this.currentPage = 1;\n    this.versionListElementProps = undefined;\n    this._filteredVersionInfos = undefined;\n  }\n  propertiesChangeHandler(newValue, oldValue) {\n    if (oldValue.versionInfos !== newValue.versionInfos) {\n      this._filteredVersionInfos = this.versionListElementProps.versionInfos;\n      if (this._filterInputElement) {\n        this._handleFilterChange();\n      }\n    }\n  }\n  componentWillLoad() {\n    this._filteredVersionInfos = this.versionListElementProps.versionInfos;\n  }\n  componentDidRender() {\n    this._filterInputElement?.setFocus();\n  }\n  render() {\n    const {\n      currentPage,\n      versionListElementProps: {\n        closable,\n        currentUser,\n        currentVersionIdentifier,\n        executionError,\n        hasAdvEditingUte,\n        heading,\n        isVersioningApiAvailable,\n        pageSize,\n        serviceName,\n        serviceUrl,\n        state,\n        strings: {\n          headers\n        },\n        strings,\n        versionInfos\n      }\n    } = this;\n    const currentVersionIdentifierBlock = h(\"calcite-block\", {\n      heading: headers.currentVersion,\n      description: currentVersionIdentifier.name,\n      overlayPositioning: \"fixed\"\n    });\n    const actionRefreshVersions = h(\"calcite-action\", {\n      id: \"actionRefreshVersions\",\n      icon: \"refresh\",\n      text: \"\",\n      onClick: () => {\n        this.arcgisGetVersions.emit({\n          serviceUrl\n        });\n      },\n      slot: \"header-actions-end\"\n    }, h(\"calcite-tooltip\", {\n      \"overlay-positioning\": \"fixed\",\n      referenceElement: \"actionRefreshVersions\"\n    }, h(\"span\", null, strings.actions.refreshVersions)));\n    this._paginatedVersionInfos = this._filteredVersionInfos.length > pageSize ? this._paginate(this._filteredVersionInfos, pageSize, currentPage) : this._filteredVersionInfos;\n    const pagination = this._filteredVersionInfos.length > pageSize ? h(\"calcite-pagination\", {\n      onCalcitePaginationChange: this._handlePaginationChange,\n      pageSize: 1,\n      startItem: currentPage,\n      totalItems: Math.ceil(this._filteredVersionInfos.length / pageSize)\n    }) : undefined;\n    const versionItems = this._paginate(this._paginatedVersionInfos, pageSize, 1).map(versionInfo => {\n      const versionItemElementProps = {\n        currentUser,\n        currentVersionIdentifier,\n        isCurrentVersionCard: false,\n        hasAdvEditingUte,\n        isVersioningApiAvailable,\n        serviceUrl,\n        strings,\n        versionInfo\n      };\n      return h(\"arcgis-version-management-version-item\", {\n        versionItemElementProps: versionItemElementProps\n      });\n    });\n    const versionFilter = versionInfos.length > pageSize ? h(\"calcite-block\", {\n      heading: \"\",\n      open: true\n    }, h(\"calcite-input-text\", {\n      ref: node => {\n        this._filterInputElement = node;\n      },\n      clearable: true,\n      icon: \"search\",\n      onCalciteInputTextInput: this._handleFilterChange,\n      placeholder: strings.actions.searchVersions\n    })) : undefined;\n    const versionList = h(\"calcite-list\", null, versionItems);\n    const newVersionButton = isVersioningApiAvailable && hasAdvEditingUte ? h(\"calcite-fab\", {\n      appearance: \"outline-fill\",\n      slot: \"fab\",\n      textEnabled: true,\n      text: strings.actions.newVersion,\n      onClick: () => {\n        this.arcgisNewVersion.emit({\n          serviceUrl\n        });\n      }\n    }) : undefined;\n    const noticeError = executionError ? h(\"calcite-notice\", {\n      onCalciteNoticeClose: this._handleNoticeClosed,\n      class: \"notice\",\n      closable: true,\n      kind: \"warning\",\n      open: true,\n      scale: \"s\",\n      slot: \"footer\",\n      width: \"full\"\n    }, h(\"div\", {\n      slot: \"message\"\n    }, this._getExecutionError(executionError))) : undefined;\n    return h(\"calcite-flow-item\", {\n      closable: closable,\n      description: serviceName,\n      heading: heading\n    }, h(\"calcite-panel\", {\n      loading: state === \"executing\"\n    }, currentVersionIdentifierBlock, h(\"calcite-panel\", {\n      heading: this._filteredVersionInfos.length ? `${strings.headers.manageVersions} (${this._filteredVersionInfos.length})` : strings.headers.manageVersions\n    }, actionRefreshVersions, versionFilter, versionList, newVersionButton), pagination, noticeError));\n  }\n  _getExecutionError(executionError) {\n    const {\n      versionListElementProps: {\n        strings: {\n          executionErrors\n        }\n      }\n    } = this;\n    switch (executionError) {\n      case \"no-advanced-editing-user-type-extension\":\n        return executionErrors.noAdvancedEditingUserTypeExtension;\n      case \"no-feature-service-found\":\n        return executionErrors.noFeatureServiceFound;\n      case \"no-valid-enterprise-version\":\n        return executionErrors.notValidEnterpriseVersion;\n      case \"no-valid-version-name\":\n        return executionErrors.invalidVersionName;\n      default:\n        return executionError;\n    }\n  }\n  _paginate(versionInfos, pageSize, pageNumber) {\n    return versionInfos.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n  }\n  get el() {\n    return getElement(this);\n  }\n  static get watchers() {\n    return {\n      \"versionListElementProps\": [\"propertiesChangeHandler\"]\n    };\n  }\n};\nexport { ArcgisVersionManagementVersionItem as arcgis_version_management_version_item, ArcgisVersionManagementVersionList as arcgis_version_management_version_list };"],
  "mappings": "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",
  "names": []
}
