{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/core/ground/NavigationConstraint.js", "../../../../../../node_modules/@arcgis/core/Ground.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as o } from \"../chunks/tslib.es6.js\";\nimport { JSONSupport as r } from \"../core/JSONSupport.js\";\nimport \"../core/Logger.js\";\nimport \"../core/has.js\";\nimport \"../core/RandomLCG.js\";\nimport \"../core/Error.js\";\nimport { enumeration as e } from \"../core/accessorSupport/decorators/enumeration.js\";\nimport { subclass as t } from \"../core/accessorSupport/decorators/subclass.js\";\nvar s;\nlet p = s = class extends r {\n  constructor(o) {\n    super(o), this.type = \"none\";\n  }\n  clone() {\n    return new s({\n      type: this.type\n    });\n  }\n};\no([e({\n  none: \"none\",\n  stayAbove: \"stay-above\"\n})], p.prototype, \"type\", void 0), p = s = o([t(\"esri.ground.NavigationConstraint\")], p);\nexport { p as NavigationConstraint };", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport { _ as r } from \"./chunks/tslib.es6.js\";\nimport e from \"./Color.js\";\nimport o from \"./core/Collection.js\";\nimport { referenceSetter as t } from \"./core/collectionUtils.js\";\nimport { typeCast as s } from \"./core/compilerUtils.js\";\nimport a from \"./core/Error.js\";\nimport { JSONSupportMixin as i } from \"./core/JSONSupport.js\";\nimport { clone as n } from \"./core/lang.js\";\nimport l from \"./core/Loadable.js\";\nimport { loadAll as p } from \"./core/loadAll.js\";\nimport c from \"./core/Logger.js\";\nimport { destroyMaybe as y } from \"./core/maybe.js\";\nimport { isAbortError as u, throwIfAborted as d } from \"./core/promiseUtils.js\";\nimport { property as m } from \"./core/accessorSupport/decorators/property.js\";\nimport { Integer as f } from \"./core/accessorSupport/ensureType.js\";\nimport { subclass as h } from \"./core/accessorSupport/decorators/subclass.js\";\nimport { writer as g } from \"./core/accessorSupport/decorators/writer.js\";\nimport { NavigationConstraint as v } from \"./ground/NavigationConstraint.js\";\nimport { transparencyToOpacity as j, opacityToTransparency as w } from \"./webdoc/support/opacityUtils.js\";\nvar S;\nlet C = S = class extends i(l) {\n  constructor(r) {\n    super(r), this.opacity = 1, this.surfaceColor = null, this.navigationConstraint = null, this.layers = new o();\n    const e = r => {\n        r.parent && r.parent !== this && \"remove\" in r.parent && r.parent.remove(r), r.parent = this, \"elevation\" !== r.type && \"base-elevation\" !== r.type && c.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`);\n      },\n      t = r => {\n        r.parent = null;\n      };\n    this.addHandles([this.layers.on(\"after-add\", r => e(r.item)), this.layers.on(\"after-remove\", r => t(r.item))]);\n  }\n  initialize() {\n    this.when().catch(r => {\n      u(r) || c.getLogger(this).error(\"#load()\", \"Failed to load ground\", r);\n    }), this.resourceInfo && this.read(this.resourceInfo.data, this.resourceInfo.context);\n  }\n  destroy() {\n    const r = this.layers.removeAll();\n    for (const e of r) y(e);\n    this.layers.destroy();\n  }\n  normalizeCtorArgs(r) {\n    return r && \"resourceInfo\" in r && (this._set(\"resourceInfo\", r.resourceInfo), delete (r = {\n      ...r\n    }).resourceInfo), r;\n  }\n  set layers(r) {\n    this._set(\"layers\", t(r, this._get(\"layers\")));\n  }\n  writeLayers(r, e, o, t) {\n    const i = [];\n    r ? (t = {\n      ...t,\n      layerContainerType: \"ground\"\n    }, r.forEach(r => {\n      if (\"write\" in r) {\n        const e = {};\n        s(r)().write(e, t) && i.push(e);\n      } else t?.messages && t.messages.push(new a(\"layer:unsupported\", `Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`, {\n        layer: r\n      }));\n    }), e.layers = i) : e.layers = i;\n  }\n  load(r) {\n    return this.addResolvingPromise(this._loadFromSource(r)), Promise.resolve(this);\n  }\n  loadAll() {\n    return p(this, r => {\n      r(this.layers);\n    });\n  }\n  async queryElevation(r, e) {\n    await this.load({\n      signal: e?.signal\n    });\n    const {\n      ElevationQuery: o\n    } = await import(\"./layers/support/ElevationQuery.js\");\n    d(e);\n    const t = new o(),\n      s = this.layers.filter(L).toArray();\n    return t.queryAll(s, r, e);\n  }\n  async createElevationSampler(r, e) {\n    await this.load({\n      signal: e?.signal\n    });\n    const {\n      ElevationQuery: o\n    } = await import(\"./layers/support/ElevationQuery.js\");\n    d(e);\n    const t = new o(),\n      s = this.layers.filter(L).toArray();\n    return t.createSamplerAll(s, r, e);\n  }\n  clone() {\n    const r = {\n      opacity: this.opacity,\n      surfaceColor: n(this.surfaceColor),\n      navigationConstraint: n(this.navigationConstraint),\n      layers: this.layers.slice()\n    };\n    return this.loaded && (r.loadStatus = \"loaded\"), new S({\n      resourceInfo: this.resourceInfo\n    }).set(r);\n  }\n  read(r, e) {\n    this.resourceInfo || this._set(\"resourceInfo\", {\n      data: r,\n      context: e\n    }), super.read(r, e);\n  }\n  _loadFromSource(r) {\n    const e = this.resourceInfo;\n    return e ? this._loadLayersFromJSON(e.data, e.context, r) : Promise.resolve();\n  }\n  async _loadLayersFromJSON(r, e, o) {\n    const t = e?.origin || \"web-scene\",\n      s = e?.portal || null,\n      a = e?.url || null,\n      {\n        populateOperationalLayers: i\n      } = await import(\"./layers/support/layersCreator.js\");\n    d(o);\n    const n = [];\n    if (r.layers && Array.isArray(r.layers)) {\n      const e = {\n        context: {\n          origin: t,\n          url: a,\n          portal: s,\n          layerContainerType: \"ground\"\n        },\n        defaultLayerType: \"ArcGISTiledElevationServiceLayer\"\n      };\n      n.push(i(this.layers, r.layers, e));\n    }\n    await Promise.allSettled(n);\n  }\n};\nfunction I(r) {\n  return r && \"createElevationSampler\" in r;\n}\nfunction L(r) {\n  return \"elevation\" === r.type || I(r);\n}\nr([m({\n  json: {\n    read: !1\n  }\n})], C.prototype, \"layers\", null), r([g(\"layers\")], C.prototype, \"writeLayers\", null), r([m({\n  readOnly: !0\n})], C.prototype, \"resourceInfo\", void 0), r([m({\n  type: Number,\n  nonNullable: !0,\n  range: {\n    min: 0,\n    max: 1\n  },\n  json: {\n    type: f,\n    read: {\n      reader: j,\n      source: \"transparency\"\n    },\n    write: {\n      writer: (r, e) => {\n        e.transparency = w(r);\n      },\n      target: \"transparency\"\n    }\n  }\n})], C.prototype, \"opacity\", void 0), r([m({\n  type: e,\n  json: {\n    type: [f],\n    write: (r, e) => {\n      e.surfaceColor = r.toJSON().slice(0, 3);\n    }\n  }\n})], C.prototype, \"surfaceColor\", void 0), r([m({\n  type: v,\n  json: {\n    write: !0\n  }\n})], C.prototype, \"navigationConstraint\", void 0), C = S = r([h(\"esri.Ground\")], C);\nconst b = C;\nexport { b as default };"],
  "mappings": "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",
  "names": ["s", "o", "a", "u", "r", "e", "t", "n", "o", "s", "a", "b"]
}
