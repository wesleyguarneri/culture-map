{
  "version": 3,
  "sources": ["../../../../../../node_modules/@arcgis/map-components/dist/esm/component-utils-de9339fe.js"],
  "sourcesContent": ["/*!\n * All material copyright Esri, All Rights Reserved, unless otherwise specified.\n * See https://js.arcgis.com/4.30/esri/copyright.txt for details.\n * v4.30.7\n */\n//--------------------------------------------------------------------------\n//\n//  Public Methods\n//\n//--------------------------------------------------------------------------\n/** @deprecated Use this.manager.onLifecycle() instead */\nfunction addHandles(element, handle) {\n  if (Array.isArray(handle)) {\n    element._watchHandles = [...element._watchHandles, ...handle];\n  } else {\n    element._watchHandles.push(handle);\n  }\n}\n/**\n * Find applicable arcgis-map, arcgis-scene, arcgis-expand or arcgis-placement\n * for the current component and attach to it\n */\nfunction attachToParent(component) {\n  const parent = findClosestParent(component);\n  if (!parent) {\n    const referenceElement = resolveReferenceElement(component.referenceElement);\n    if (!referenceElement) {\n      return undefined;\n    }\n    attachToView(referenceElement, component, false);\n    return referenceElement;\n  }\n  if (ignoreParentChange(parent, component.el.parent)) {\n    return parent;\n  }\n  component.el.parent = parent;\n  if (component.el.childElem) {\n    component.el.childElem.ownedBy = component.el;\n  }\n  if (parent.tagName.toLowerCase() === \"arcgis-expand\") {\n    attachToExpand(parent, component);\n  } else if (parent.tagName.toLowerCase() === \"arcgis-placement\") {\n    attachToPlacement(parent, component);\n  } else {\n    attachToView(parent, component, true);\n  }\n  return parent;\n}\nfunction findClosestParent({\n  el\n}) {\n  for (let element = el.parentElement; element; element = element?.parentElement ?? null) {\n    if (possibleParents.has(element.tagName.toLowerCase())) {\n      return element;\n    }\n    /*\n     * The expand's and placement's childElem will have an ownedBy property to\n     * help findParent() detect if it belongs to expand, even after expand\n     * moved it's childElem to be under view.ui's control\n     */\n    if (\"ownedBy\" in element && element.ownedBy instanceof HTMLElement && possibleParents.has(element.ownedBy.tagName.toLowerCase())) {\n      return element.ownedBy;\n    }\n  }\n  return undefined;\n}\nconst possibleParents = new Set([\"arcgis-map\", \"arcgis-scene\", \"arcgis-expand\", \"arcgis-placement\"]);\n/**\n * attachToParent() may be called redundantly (i.e when expand sets the\n * position prop on a component). Ignore the attachToParent() calls if the\n * parent is the same element, UNLESS the parent is a map/scene (as in that\n * case position change is meaningful)\n */\nfunction ignoreParentChange(newParent, oldParent) {\n  if (newParent !== oldParent) {\n    return false;\n  }\n  const tagName = newParent.tagName.toLowerCase();\n  return tagName === \"arcgis-expand\" || tagName === \"arcgis-placement\";\n}\n/** Call callback once component emits \"arcgisReady\" and has view property set */\nfunction awaitReady(element, callback, eventName = \"arcgisReady\") {\n  const maybeHasView = element;\n  if (typeof maybeHasView.view?.ready === \"boolean\") {\n    callback(maybeHasView.view);\n  } else {\n    element.addEventListener(eventName, () => awaitReady(element, callback, eventName), {\n      once: true\n    });\n  }\n}\nconst attachToExpand = (expandRef, component) => awaitReady(expandRef, view => {\n  if (component.el.childElem && typeof expandRef.content === \"object\") {\n    expandRef.content?.append(component.el.childElem);\n  }\n  expandRef.expandIcon = component.icon || component.widget?.icon || expandRef.expandIcon;\n  /**\n   * Even though component-utils don't read the value of component's\n   * position once component is in expand/placement, setting the position\n   * here anyway is a good ideas as the component may use it's position\n   * to inform rtl or styling.\n   * FEATURE: when expand's/placement's position changes, update component too\n   */\n  component.position = expandRef.position;\n  // Set the view property last since it will fire arcgisReady event\n  component.el.view = view;\n});\nconst attachToPlacement = (placementRef, component) => awaitReady(placementRef, view => {\n  if (component.el.childElem) {\n    component.el.append(component.el.childElem);\n  }\n  component.position = placementRef.position;\n  // Set the view property last since it will fire arcgisReady event\n  component.el.view = view;\n});\nconst attachToView = (referenceElement, component, addToView) => awaitReady(referenceElement, view => {\n  if (addToView) {\n    addToViewUi(referenceElement, component);\n  } else if (component.el.childElem) {\n    component.el.append(component.el.childElem);\n  }\n  // Set the view property last since it will fire arcgisReady event\n  component.el.view = view;\n}, \"arcgisViewReadyChange\");\nfunction addToViewUi(referenceElement, component) {\n  // REFACTOR: rename childElem to childElement\n  const el = component.el.childElem ?? component.el;\n  const childElements = [...referenceElement.children];\n  const childrenPositions = {};\n  /*\n   * This logic is done for each component because if a component is dynamically\n   * added, would need to redo anyway.\n   */\n  for (const child of childElements) {\n    const position = child.getAttribute(\"position\") ?? \"manual\";\n    childrenPositions[position] ?? (childrenPositions[position] = []);\n    childrenPositions[position].push({\n      child,\n      position,\n      index: childElements.indexOf(child)\n    });\n  }\n  /*\n   * If component.el is not actually inside of arcgis-map (has\n   * referenceElement), index will be -1. In that case view.ui will simply add\n   * it as last\n   */\n  const index = childrenPositions[component.position ?? \"manual\"]?.findIndex(({\n    child\n  }) => child === component.el);\n  // Remove it first in case it is already present\n  referenceElement.view.ui.remove(el);\n  referenceElement.view.ui.add(el, {\n    position: component.position,\n    index\n  });\n}\n/**\n * Defines a view prop on the component's el and emits arcgisReady once that\n * prop is set by attachToParent()\n *\n * @deprecated Use useWidget or useViewModel instead\n */\nfunction defineViewProperty(component) {\n  let arcgisReadyEmitted = false;\n  let view = component.el.view;\n  const originalAccessor = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(component.el), \"view\") ?? {\n    get: () => view,\n    set: newView => view = newView\n  };\n  // Define the \"view\" property for compatibility with JS API\n  Object.defineProperty(component.el, \"view\", {\n    get: originalAccessor.get.bind(component),\n    set: newView => {\n      originalAccessor.set.call(component, newView);\n      if (newView && !arcgisReadyEmitted) {\n        arcgisReadyEmitted = true;\n        component.arcgisReady.emit();\n      }\n    },\n    configurable: true,\n    enumerable: true\n  });\n  if (view) {\n    component.el.view = view;\n  }\n}\nfunction isNullOrEmptyString(value) {\n  return value === undefined || value === null || value === \"\";\n}\nfunction isNotSameCamera(camera, camera2) {\n  return camera2 === undefined || camera.position !== camera2.position || camera.heading !== camera2.heading || camera.tilt !== camera2.tilt;\n}\nfunction isNotSameEnvironment(environment, environment2) {\n  return environment2 === undefined || environment2?.atmosphereEnabled !== environment?.atmosphereEnabled || (environment2?.lighting).date !== (environment?.lighting).date || (environment2?.lighting).directShadowsEnabled !== (environment?.lighting).directShadowsEnabled || (environment2?.lighting).cameraTrackingEnabled !== (environment?.lighting).cameraTrackingEnabled || (environment2?.lighting).date !== (environment?.lighting).date || (environment2?.lighting).displayUTCOffset !== (environment?.lighting).displayUTCOffset;\n}\nfunction isNotSameViewpoint(viewpoint, viewpoint2) {\n  return viewpoint2 === undefined || viewpoint?.targetGeometry !== viewpoint2?.targetGeometry || viewpoint?.rotation !== viewpoint2?.rotation || viewpoint?.scale !== viewpoint2?.scale;\n}\nfunction parseCenter(newValue, view) {\n  if (typeof newValue === \"string\") {\n    const center = newValue.split(\",\").map(Number);\n    if (center[0] !== view?.center.longitude && center[1] !== view?.center.latitude) {\n      return center;\n    }\n  } else if (Array.isArray(newValue)) {\n    if (newValue[0] !== view?.center.longitude && newValue[1] !== view?.center.latitude) {\n      return newValue;\n    }\n  } else if (newValue && !view?.center.equals(newValue)) {\n    return newValue;\n  }\n  return undefined;\n}\n/** @deprecated Use useWidget or useViewModel instead */\nasync function referenceElementHelper(component, refElement) {\n  if (refElement == null) {\n    return;\n  } else if (typeof refElement === \"string\") {\n    component.el.view = await updateForView(refElement);\n  } else if (component.widget) {\n    component.el.view = refElement.view;\n  }\n}\n/** @deprecated Use useWidget or useViewModel instead */\nasync function updateForView(referenceElement) {\n  const viewRef = resolveReferenceElement(referenceElement);\n  return await new Promise(resolve => {\n    if (typeof viewRef?.view?.ready === \"boolean\") {\n      resolve(viewRef.view);\n    } else if (viewRef) {\n      viewRef.addEventListener(\"arcgisViewReadyChange\", () => resolve(viewRef.view), {\n        once: true\n      });\n    }\n  });\n}\n//--------------------------------------------------------------------------\n//\n//  Private Methods\n//\n//--------------------------------------------------------------------------\nfunction resolveReferenceElement(referenceElement) {\n  if (typeof referenceElement !== \"string\") {\n    return referenceElement ?? undefined;\n  }\n  const isComplexSelector = referenceElement.includes(\"#\") || referenceElement.includes(\".\") || referenceElement.includes(\"[\");\n  const resolved = (isComplexSelector ? undefined : document.querySelector(`#${referenceElement}`)) ?? document.querySelector(referenceElement);\n  return resolved ?? undefined;\n}\nexport { attachToParent as a, isNullOrEmptyString as b, isNotSameCamera as c, defineViewProperty as d, isNotSameEnvironment as e, addHandles as f, isNotSameViewpoint as i, parseCenter as p, referenceElementHelper as r };"],
  "mappings": "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",
  "names": []
}
